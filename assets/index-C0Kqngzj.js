function cC(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in t)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(t,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var nre=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function g1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function kP(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var a=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return t[n]}})}),r}var Wg={exports:{}},Bm={},Gg={exports:{}},zr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sN;function PP(){if(sN)return zr;sN=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;function x(Y){return Y===null||typeof Y!="object"?null:(Y=m&&Y[m]||Y["@@iterator"],typeof Y=="function"?Y:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,w={};function j(Y,L,z){this.props=Y,this.context=L,this.refs=w,this.updater=z||p}j.prototype.isReactComponent={},j.prototype.setState=function(Y,L){if(typeof Y!="object"&&typeof Y!="function"&&Y!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Y,L,"setState")},j.prototype.forceUpdate=function(Y){this.updater.enqueueForceUpdate(this,Y,"forceUpdate")};function C(){}C.prototype=j.prototype;function S(Y,L,z){this.props=Y,this.context=L,this.refs=w,this.updater=z||p}var k=S.prototype=new C;k.constructor=S,y(k,j.prototype),k.isPureReactComponent=!0;var P=Array.isArray,O=Object.prototype.hasOwnProperty,$={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function B(Y,L,z){var V,W={},Q=null,T=null;if(L!=null)for(V in L.ref!==void 0&&(T=L.ref),L.key!==void 0&&(Q=""+L.key),L)O.call(L,V)&&!R.hasOwnProperty(V)&&(W[V]=L[V]);var ie=arguments.length-2;if(ie===1)W.children=z;else if(1<ie){for(var ge=Array(ie),we=0;we<ie;we++)ge[we]=arguments[we+2];W.children=ge}if(Y&&Y.defaultProps)for(V in ie=Y.defaultProps,ie)W[V]===void 0&&(W[V]=ie[V]);return{$$typeof:t,type:Y,key:Q,ref:T,props:W,_owner:$.current}}function U(Y,L){return{$$typeof:t,type:Y.type,key:L,ref:Y.ref,props:Y.props,_owner:Y._owner}}function K(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===t}function M(Y){var L={"=":"=0",":":"=2"};return"$"+Y.replace(/[=:]/g,function(z){return L[z]})}var q=/\/+/g;function re(Y,L){return typeof Y=="object"&&Y!==null&&Y.key!=null?M(""+Y.key):L.toString(36)}function ee(Y,L,z,V,W){var Q=typeof Y;(Q==="undefined"||Q==="boolean")&&(Y=null);var T=!1;if(Y===null)T=!0;else switch(Q){case"string":case"number":T=!0;break;case"object":switch(Y.$$typeof){case t:case e:T=!0}}if(T)return T=Y,W=W(T),Y=V===""?"."+re(T,0):V,P(W)?(z="",Y!=null&&(z=Y.replace(q,"$&/")+"/"),ee(W,L,z,"",function(we){return we})):W!=null&&(K(W)&&(W=U(W,z+(!W.key||T&&T.key===W.key?"":(""+W.key).replace(q,"$&/")+"/")+Y)),L.push(W)),1;if(T=0,V=V===""?".":V+":",P(Y))for(var ie=0;ie<Y.length;ie++){Q=Y[ie];var ge=V+re(Q,ie);T+=ee(Q,L,z,ge,W)}else if(ge=x(Y),typeof ge=="function")for(Y=ge.call(Y),ie=0;!(Q=Y.next()).done;)Q=Q.value,ge=V+re(Q,ie++),T+=ee(Q,L,z,ge,W);else if(Q==="object")throw L=String(Y),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(Y).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.");return T}function H(Y,L,z){if(Y==null)return Y;var V=[],W=0;return ee(Y,V,"","",function(Q){return L.call(z,Q,W++)}),V}function se(Y){if(Y._status===-1){var L=Y._result;L=L(),L.then(function(z){(Y._status===0||Y._status===-1)&&(Y._status=1,Y._result=z)},function(z){(Y._status===0||Y._status===-1)&&(Y._status=2,Y._result=z)}),Y._status===-1&&(Y._status=0,Y._result=L)}if(Y._status===1)return Y._result.default;throw Y._result}var ue={current:null},G={transition:null},J={ReactCurrentDispatcher:ue,ReactCurrentBatchConfig:G,ReactCurrentOwner:$};function oe(){throw Error("act(...) is not supported in production builds of React.")}return zr.Children={map:H,forEach:function(Y,L,z){H(Y,function(){L.apply(this,arguments)},z)},count:function(Y){var L=0;return H(Y,function(){L++}),L},toArray:function(Y){return H(Y,function(L){return L})||[]},only:function(Y){if(!K(Y))throw Error("React.Children.only expected to receive a single React element child.");return Y}},zr.Component=j,zr.Fragment=r,zr.Profiler=a,zr.PureComponent=S,zr.StrictMode=n,zr.Suspense=c,zr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J,zr.act=oe,zr.cloneElement=function(Y,L,z){if(Y==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Y+".");var V=y({},Y.props),W=Y.key,Q=Y.ref,T=Y._owner;if(L!=null){if(L.ref!==void 0&&(Q=L.ref,T=$.current),L.key!==void 0&&(W=""+L.key),Y.type&&Y.type.defaultProps)var ie=Y.type.defaultProps;for(ge in L)O.call(L,ge)&&!R.hasOwnProperty(ge)&&(V[ge]=L[ge]===void 0&&ie!==void 0?ie[ge]:L[ge])}var ge=arguments.length-2;if(ge===1)V.children=z;else if(1<ge){ie=Array(ge);for(var we=0;we<ge;we++)ie[we]=arguments[we+2];V.children=ie}return{$$typeof:t,type:Y.type,key:W,ref:Q,props:V,_owner:T}},zr.createContext=function(Y){return Y={$$typeof:o,_currentValue:Y,_currentValue2:Y,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Y.Provider={$$typeof:i,_context:Y},Y.Consumer=Y},zr.createElement=B,zr.createFactory=function(Y){var L=B.bind(null,Y);return L.type=Y,L},zr.createRef=function(){return{current:null}},zr.forwardRef=function(Y){return{$$typeof:l,render:Y}},zr.isValidElement=K,zr.lazy=function(Y){return{$$typeof:h,_payload:{_status:-1,_result:Y},_init:se}},zr.memo=function(Y,L){return{$$typeof:u,type:Y,compare:L===void 0?null:L}},zr.startTransition=function(Y){var L=G.transition;G.transition={};try{Y()}finally{G.transition=L}},zr.unstable_act=oe,zr.useCallback=function(Y,L){return ue.current.useCallback(Y,L)},zr.useContext=function(Y){return ue.current.useContext(Y)},zr.useDebugValue=function(){},zr.useDeferredValue=function(Y){return ue.current.useDeferredValue(Y)},zr.useEffect=function(Y,L){return ue.current.useEffect(Y,L)},zr.useId=function(){return ue.current.useId()},zr.useImperativeHandle=function(Y,L,z){return ue.current.useImperativeHandle(Y,L,z)},zr.useInsertionEffect=function(Y,L){return ue.current.useInsertionEffect(Y,L)},zr.useLayoutEffect=function(Y,L){return ue.current.useLayoutEffect(Y,L)},zr.useMemo=function(Y,L){return ue.current.useMemo(Y,L)},zr.useReducer=function(Y,L,z){return ue.current.useReducer(Y,L,z)},zr.useRef=function(Y){return ue.current.useRef(Y)},zr.useState=function(Y){return ue.current.useState(Y)},zr.useSyncExternalStore=function(Y,L,z){return ue.current.useSyncExternalStore(Y,L,z)},zr.useTransition=function(){return ue.current.useTransition()},zr.version="18.3.1",zr}var aN;function v1(){return aN||(aN=1,Gg.exports=PP()),Gg.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iN;function TP(){if(iN)return Bm;iN=1;var t=v1(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,a=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(l,c,u){var h,m={},x=null,p=null;u!==void 0&&(x=""+u),c.key!==void 0&&(x=""+c.key),c.ref!==void 0&&(p=c.ref);for(h in c)n.call(c,h)&&!i.hasOwnProperty(h)&&(m[h]=c[h]);if(l&&l.defaultProps)for(h in c=l.defaultProps,c)m[h]===void 0&&(m[h]=c[h]);return{$$typeof:e,type:l,key:x,ref:p,props:m,_owner:a.current}}return Bm.Fragment=r,Bm.jsx=o,Bm.jsxs=o,Bm}var oN;function IP(){return oN||(oN=1,Wg.exports=TP()),Wg.exports}var s=IP(),Lp={},Kg={exports:{}},zi={},Yg={exports:{}},Xg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lN;function DP(){return lN||(lN=1,(function(t){function e(G,J){var oe=G.length;G.push(J);e:for(;0<oe;){var Y=oe-1>>>1,L=G[Y];if(0<a(L,J))G[Y]=J,G[oe]=L,oe=Y;else break e}}function r(G){return G.length===0?null:G[0]}function n(G){if(G.length===0)return null;var J=G[0],oe=G.pop();if(oe!==J){G[0]=oe;e:for(var Y=0,L=G.length,z=L>>>1;Y<z;){var V=2*(Y+1)-1,W=G[V],Q=V+1,T=G[Q];if(0>a(W,oe))Q<L&&0>a(T,W)?(G[Y]=T,G[Q]=oe,Y=Q):(G[Y]=W,G[V]=oe,Y=V);else if(Q<L&&0>a(T,oe))G[Y]=T,G[Q]=oe,Y=Q;else break e}}return J}function a(G,J){var oe=G.sortIndex-J.sortIndex;return oe!==0?oe:G.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,m=null,x=3,p=!1,y=!1,w=!1,j=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(G){for(var J=r(u);J!==null;){if(J.callback===null)n(u);else if(J.startTime<=G)n(u),J.sortIndex=J.expirationTime,e(c,J);else break;J=r(u)}}function P(G){if(w=!1,k(G),!y)if(r(c)!==null)y=!0,se(O);else{var J=r(u);J!==null&&ue(P,J.startTime-G)}}function O(G,J){y=!1,w&&(w=!1,C(B),B=-1),p=!0;var oe=x;try{for(k(J),m=r(c);m!==null&&(!(m.expirationTime>J)||G&&!M());){var Y=m.callback;if(typeof Y=="function"){m.callback=null,x=m.priorityLevel;var L=Y(m.expirationTime<=J);J=t.unstable_now(),typeof L=="function"?m.callback=L:m===r(c)&&n(c),k(J)}else n(c);m=r(c)}if(m!==null)var z=!0;else{var V=r(u);V!==null&&ue(P,V.startTime-J),z=!1}return z}finally{m=null,x=oe,p=!1}}var $=!1,R=null,B=-1,U=5,K=-1;function M(){return!(t.unstable_now()-K<U)}function q(){if(R!==null){var G=t.unstable_now();K=G;var J=!0;try{J=R(!0,G)}finally{J?re():($=!1,R=null)}}else $=!1}var re;if(typeof S=="function")re=function(){S(q)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,H=ee.port2;ee.port1.onmessage=q,re=function(){H.postMessage(null)}}else re=function(){j(q,0)};function se(G){R=G,$||($=!0,re())}function ue(G,J){B=j(function(){G(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){y||p||(y=!0,se(O))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(G){switch(x){case 1:case 2:case 3:var J=3;break;default:J=x}var oe=x;x=J;try{return G()}finally{x=oe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,J){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var oe=x;x=G;try{return J()}finally{x=oe}},t.unstable_scheduleCallback=function(G,J,oe){var Y=t.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?Y+oe:Y):oe=Y,G){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=oe+L,G={id:h++,callback:J,priorityLevel:G,startTime:oe,expirationTime:L,sortIndex:-1},oe>Y?(G.sortIndex=oe,e(u,G),r(c)===null&&G===r(u)&&(w?(C(B),B=-1):w=!0,ue(P,oe-Y))):(G.sortIndex=L,e(c,G),y||p||(y=!0,se(O))),G},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(G){var J=x;return function(){var oe=x;x=J;try{return G.apply(this,arguments)}finally{x=oe}}}})(Xg)),Xg}var cN;function OP(){return cN||(cN=1,Yg.exports=DP()),Yg.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dN;function RP(){if(dN)return zi;dN=1;var t=v1(),e=OP();function r(d){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+d,g=1;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,a={};function i(d,f){o(d,f),o(d+"Capture",f)}function o(d,f){for(a[d]=f,d=0;d<f.length;d++)n.add(f[d])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},m={};function x(d){return c.call(m,d)?!0:c.call(h,d)?!1:u.test(d)?m[d]=!0:(h[d]=!0,!1)}function p(d,f,g,b){if(g!==null&&g.type===0)return!1;switch(typeof f){case"function":case"symbol":return!0;case"boolean":return b?!1:g!==null?!g.acceptsBooleans:(d=d.toLowerCase().slice(0,5),d!=="data-"&&d!=="aria-");default:return!1}}function y(d,f,g,b){if(f===null||typeof f>"u"||p(d,f,g,b))return!0;if(b)return!1;if(g!==null)switch(g.type){case 3:return!f;case 4:return f===!1;case 5:return isNaN(f);case 6:return isNaN(f)||1>f}return!1}function w(d,f,g,b,E,D,te){this.acceptsBooleans=f===2||f===3||f===4,this.attributeName=b,this.attributeNamespace=E,this.mustUseProperty=g,this.propertyName=d,this.type=f,this.sanitizeURL=D,this.removeEmptyString=te}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(d){j[d]=new w(d,0,!1,d,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(d){var f=d[0];j[f]=new w(f,1,!1,d[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(d){j[d]=new w(d,2,!1,d.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(d){j[d]=new w(d,2,!1,d,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(d){j[d]=new w(d,3,!1,d.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(d){j[d]=new w(d,3,!0,d,null,!1,!1)}),["capture","download"].forEach(function(d){j[d]=new w(d,4,!1,d,null,!1,!1)}),["cols","rows","size","span"].forEach(function(d){j[d]=new w(d,6,!1,d,null,!1,!1)}),["rowSpan","start"].forEach(function(d){j[d]=new w(d,5,!1,d.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function S(d){return d[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(d){var f=d.replace(C,S);j[f]=new w(f,1,!1,d,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(d){var f=d.replace(C,S);j[f]=new w(f,1,!1,d,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(d){var f=d.replace(C,S);j[f]=new w(f,1,!1,d,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(d){j[d]=new w(d,1,!1,d.toLowerCase(),null,!1,!1)}),j.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(d){j[d]=new w(d,1,!1,d.toLowerCase(),null,!0,!0)});function k(d,f,g,b){var E=j.hasOwnProperty(f)?j[f]:null;(E!==null?E.type!==0:b||!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(y(f,g,E,b)&&(g=null),b||E===null?x(f)&&(g===null?d.removeAttribute(f):d.setAttribute(f,""+g)):E.mustUseProperty?d[E.propertyName]=g===null?E.type===3?!1:"":g:(f=E.attributeName,b=E.attributeNamespace,g===null?d.removeAttribute(f):(E=E.type,g=E===3||E===4&&g===!0?"":""+g,b?d.setAttributeNS(b,f,g):d.setAttribute(f,g))))}var P=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,O=Symbol.for("react.element"),$=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),K=Symbol.for("react.provider"),M=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),re=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),se=Symbol.for("react.lazy"),ue=Symbol.for("react.offscreen"),G=Symbol.iterator;function J(d){return d===null||typeof d!="object"?null:(d=G&&d[G]||d["@@iterator"],typeof d=="function"?d:null)}var oe=Object.assign,Y;function L(d){if(Y===void 0)try{throw Error()}catch(g){var f=g.stack.trim().match(/\n( *(at )?)/);Y=f&&f[1]||""}return`
`+Y+d}var z=!1;function V(d,f){if(!d||z)return"";z=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(f)if(f=function(){throw Error()},Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch($e){var b=$e}Reflect.construct(d,[],f)}else{try{f.call()}catch($e){b=$e}d.call(f.prototype)}else{try{throw Error()}catch($e){b=$e}d()}}catch($e){if($e&&b&&typeof $e.stack=="string"){for(var E=$e.stack.split(`
`),D=b.stack.split(`
`),te=E.length-1,ve=D.length-1;1<=te&&0<=ve&&E[te]!==D[ve];)ve--;for(;1<=te&&0<=ve;te--,ve--)if(E[te]!==D[ve]){if(te!==1||ve!==1)do if(te--,ve--,0>ve||E[te]!==D[ve]){var _e=`
`+E[te].replace(" at new "," at ");return d.displayName&&_e.includes("<anonymous>")&&(_e=_e.replace("<anonymous>",d.displayName)),_e}while(1<=te&&0<=ve);break}}}finally{z=!1,Error.prepareStackTrace=g}return(d=d?d.displayName||d.name:"")?L(d):""}function W(d){switch(d.tag){case 5:return L(d.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return d=V(d.type,!1),d;case 11:return d=V(d.type.render,!1),d;case 1:return d=V(d.type,!0),d;default:return""}}function Q(d){if(d==null)return null;if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case R:return"Fragment";case $:return"Portal";case U:return"Profiler";case B:return"StrictMode";case re:return"Suspense";case ee:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case M:return(d.displayName||"Context")+".Consumer";case K:return(d._context.displayName||"Context")+".Provider";case q:var f=d.render;return d=d.displayName,d||(d=f.displayName||f.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case H:return f=d.displayName||null,f!==null?f:Q(d.type)||"Memo";case se:f=d._payload,d=d._init;try{return Q(d(f))}catch{}}return null}function T(d){var f=d.type;switch(d.tag){case 24:return"Cache";case 9:return(f.displayName||"Context")+".Consumer";case 10:return(f._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return d=f.render,d=d.displayName||d.name||"",f.displayName||(d!==""?"ForwardRef("+d+")":"ForwardRef");case 7:return"Fragment";case 5:return f;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Q(f);case 8:return f===B?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f}return null}function ie(d){switch(typeof d){case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function ge(d){var f=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function we(d){var f=ge(d)?"checked":"value",g=Object.getOwnPropertyDescriptor(d.constructor.prototype,f),b=""+d[f];if(!d.hasOwnProperty(f)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var E=g.get,D=g.set;return Object.defineProperty(d,f,{configurable:!0,get:function(){return E.call(this)},set:function(te){b=""+te,D.call(this,te)}}),Object.defineProperty(d,f,{enumerable:g.enumerable}),{getValue:function(){return b},setValue:function(te){b=""+te},stopTracking:function(){d._valueTracker=null,delete d[f]}}}}function Se(d){d._valueTracker||(d._valueTracker=we(d))}function Ue(d){if(!d)return!1;var f=d._valueTracker;if(!f)return!0;var g=f.getValue(),b="";return d&&(b=ge(d)?d.checked?"true":"false":d.value),d=b,d!==g?(f.setValue(d),!0):!1}function We(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}function be(d,f){var g=f.checked;return oe({},f,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:g??d._wrapperState.initialChecked})}function pe(d,f){var g=f.defaultValue==null?"":f.defaultValue,b=f.checked!=null?f.checked:f.defaultChecked;g=ie(f.value!=null?f.value:g),d._wrapperState={initialChecked:b,initialValue:g,controlled:f.type==="checkbox"||f.type==="radio"?f.checked!=null:f.value!=null}}function at(d,f){f=f.checked,f!=null&&k(d,"checked",f,!1)}function tt(d,f){at(d,f);var g=ie(f.value),b=f.type;if(g!=null)b==="number"?(g===0&&d.value===""||d.value!=g)&&(d.value=""+g):d.value!==""+g&&(d.value=""+g);else if(b==="submit"||b==="reset"){d.removeAttribute("value");return}f.hasOwnProperty("value")?ye(d,f.type,g):f.hasOwnProperty("defaultValue")&&ye(d,f.type,ie(f.defaultValue)),f.checked==null&&f.defaultChecked!=null&&(d.defaultChecked=!!f.defaultChecked)}function Be(d,f,g){if(f.hasOwnProperty("value")||f.hasOwnProperty("defaultValue")){var b=f.type;if(!(b!=="submit"&&b!=="reset"||f.value!==void 0&&f.value!==null))return;f=""+d._wrapperState.initialValue,g||f===d.value||(d.value=f),d.defaultValue=f}g=d.name,g!==""&&(d.name=""),d.defaultChecked=!!d._wrapperState.initialChecked,g!==""&&(d.name=g)}function ye(d,f,g){(f!=="number"||We(d.ownerDocument)!==d)&&(g==null?d.defaultValue=""+d._wrapperState.initialValue:d.defaultValue!==""+g&&(d.defaultValue=""+g))}var st=Array.isArray;function Ve(d,f,g,b){if(d=d.options,f){f={};for(var E=0;E<g.length;E++)f["$"+g[E]]=!0;for(g=0;g<d.length;g++)E=f.hasOwnProperty("$"+d[g].value),d[g].selected!==E&&(d[g].selected=E),E&&b&&(d[g].defaultSelected=!0)}else{for(g=""+ie(g),f=null,E=0;E<d.length;E++){if(d[E].value===g){d[E].selected=!0,b&&(d[E].defaultSelected=!0);return}f!==null||d[E].disabled||(f=d[E])}f!==null&&(f.selected=!0)}}function vt(d,f){if(f.dangerouslySetInnerHTML!=null)throw Error(r(91));return oe({},f,{value:void 0,defaultValue:void 0,children:""+d._wrapperState.initialValue})}function ct(d,f){var g=f.value;if(g==null){if(g=f.children,f=f.defaultValue,g!=null){if(f!=null)throw Error(r(92));if(st(g)){if(1<g.length)throw Error(r(93));g=g[0]}f=g}f==null&&(f=""),g=f}d._wrapperState={initialValue:ie(g)}}function Kt(d,f){var g=ie(f.value),b=ie(f.defaultValue);g!=null&&(g=""+g,g!==d.value&&(d.value=g),f.defaultValue==null&&d.defaultValue!==g&&(d.defaultValue=g)),b!=null&&(d.defaultValue=""+b)}function ot(d){var f=d.textContent;f===d._wrapperState.initialValue&&f!==""&&f!==null&&(d.value=f)}function Ct(d){switch(d){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qt(d,f){return d==null||d==="http://www.w3.org/1999/xhtml"?Ct(f):d==="http://www.w3.org/2000/svg"&&f==="foreignObject"?"http://www.w3.org/1999/xhtml":d}var Tt,Et=(function(d){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(f,g,b,E){MSApp.execUnsafeLocalFunction(function(){return d(f,g,b,E)})}:d})(function(d,f){if(d.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in d)d.innerHTML=f;else{for(Tt=Tt||document.createElement("div"),Tt.innerHTML="<svg>"+f.valueOf().toString()+"</svg>",f=Tt.firstChild;d.firstChild;)d.removeChild(d.firstChild);for(;f.firstChild;)d.appendChild(f.firstChild)}});function kt(d,f){if(f){var g=d.firstChild;if(g&&g===d.lastChild&&g.nodeType===3){g.nodeValue=f;return}}d.textContent=f}var St={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gr=["Webkit","ms","Moz","O"];Object.keys(St).forEach(function(d){gr.forEach(function(f){f=f+d.charAt(0).toUpperCase()+d.substring(1),St[f]=St[d]})});function Rr(d,f,g){return f==null||typeof f=="boolean"||f===""?"":g||typeof f!="number"||f===0||St.hasOwnProperty(d)&&St[d]?(""+f).trim():f+"px"}function xt(d,f){d=d.style;for(var g in f)if(f.hasOwnProperty(g)){var b=g.indexOf("--")===0,E=Rr(g,f[g],b);g==="float"&&(g="cssFloat"),b?d.setProperty(g,E):d[g]=E}}var Ht=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Me(d,f){if(f){if(Ht[d]&&(f.children!=null||f.dangerouslySetInnerHTML!=null))throw Error(r(137,d));if(f.dangerouslySetInnerHTML!=null){if(f.children!=null)throw Error(r(60));if(typeof f.dangerouslySetInnerHTML!="object"||!("__html"in f.dangerouslySetInnerHTML))throw Error(r(61))}if(f.style!=null&&typeof f.style!="object")throw Error(r(62))}}function bt(d,f){if(d.indexOf("-")===-1)return typeof f.is=="string";switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wt=null;function It(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var Cr=null,Gr=null,vr=null;function At(d){if(d=Cd(d)){if(typeof Cr!="function")throw Error(r(280));var f=d.stateNode;f&&(f=Mu(f),Cr(d.stateNode,d.type,f))}}function yt(d){Gr?vr?vr.push(d):vr=[d]:Gr=d}function Lr(){if(Gr){var d=Gr,f=vr;if(vr=Gr=null,At(d),f)for(d=0;d<f.length;d++)At(f[d])}}function Sr(d,f){return d(f)}function Kr(){}var Mr=!1;function jt(d,f,g){if(Mr)return d(f,g);Mr=!0;try{return Sr(d,f,g)}finally{Mr=!1,(Gr!==null||vr!==null)&&(Kr(),Lr())}}function Tr(d,f){var g=d.stateNode;if(g===null)return null;var b=Mu(g);if(b===null)return null;g=b[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(d=d.type,b=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!b;break e;default:d=!1}if(d)return null;if(g&&typeof g!="function")throw Error(r(231,f,typeof g));return g}var Vn=!1;if(l)try{var Fr={};Object.defineProperty(Fr,"passive",{get:function(){Vn=!0}}),window.addEventListener("test",Fr,Fr),window.removeEventListener("test",Fr,Fr)}catch{Vn=!1}function Yr(d,f,g,b,E,D,te,ve,_e){var $e=Array.prototype.slice.call(arguments,3);try{f.apply(g,$e)}catch(dt){this.onError(dt)}}var $r=!1,yr=null,wn=!1,Ra=null,La={onError:function(d){$r=!0,yr=d}};function Ss(d,f,g,b,E,D,te,ve,_e){$r=!1,yr=null,Yr.apply(La,arguments)}function ba(d,f,g,b,E,D,te,ve,_e){if(Ss.apply(this,arguments),$r){if($r){var $e=yr;$r=!1,yr=null}else throw Error(r(198));wn||(wn=!0,Ra=$e)}}function Xn(d){var f=d,g=d;if(d.alternate)for(;f.return;)f=f.return;else{d=f;do f=d,(f.flags&4098)!==0&&(g=f.return),d=f.return;while(d)}return f.tag===3?g:null}function Fs(d){if(d.tag===13){var f=d.memoizedState;if(f===null&&(d=d.alternate,d!==null&&(f=d.memoizedState)),f!==null)return f.dehydrated}return null}function In(d){if(Xn(d)!==d)throw Error(r(188))}function Na(d){var f=d.alternate;if(!f){if(f=Xn(d),f===null)throw Error(r(188));return f!==d?null:d}for(var g=d,b=f;;){var E=g.return;if(E===null)break;var D=E.alternate;if(D===null){if(b=E.return,b!==null){g=b;continue}break}if(E.child===D.child){for(D=E.child;D;){if(D===g)return In(E),d;if(D===b)return In(E),f;D=D.sibling}throw Error(r(188))}if(g.return!==b.return)g=E,b=D;else{for(var te=!1,ve=E.child;ve;){if(ve===g){te=!0,g=E,b=D;break}if(ve===b){te=!0,b=E,g=D;break}ve=ve.sibling}if(!te){for(ve=D.child;ve;){if(ve===g){te=!0,g=D,b=E;break}if(ve===b){te=!0,b=D,g=E;break}ve=ve.sibling}if(!te)throw Error(r(189))}}if(g.alternate!==b)throw Error(r(190))}if(g.tag!==3)throw Error(r(188));return g.stateNode.current===g?d:f}function Ms(d){return d=Na(d),d!==null?Fa(d):null}function Fa(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){var f=Fa(d);if(f!==null)return f;d=d.sibling}return null}var Js=e.unstable_scheduleCallback,Ya=e.unstable_cancelCallback,fi=e.unstable_shouldYield,ze=e.unstable_requestPaint,ft=e.unstable_now,gn=e.unstable_getCurrentPriorityLevel,Ee=e.unstable_ImmediatePriority,wt=e.unstable_UserBlockingPriority,nt=e.unstable_NormalPriority,Qr=e.unstable_LowPriority,Zn=e.unstable_IdlePriority,bn=null,Bs=null;function ld(d){if(Bs&&typeof Bs.onCommitFiberRoot=="function")try{Bs.onCommitFiberRoot(bn,d,void 0,(d.current.flags&128)===128)}catch{}}var Qs=Math.clz32?Math.clz32:cr,Ke=Math.log,Xe=Math.LN2;function cr(d){return d>>>=0,d===0?32:31-(Ke(d)/Xe|0)|0}var cn=64,dn=4194304;function Dn(d){switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return d&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return d}}function ea(d,f){var g=d.pendingLanes;if(g===0)return 0;var b=0,E=d.suspendedLanes,D=d.pingedLanes,te=g&268435455;if(te!==0){var ve=te&~E;ve!==0?b=Dn(ve):(D&=te,D!==0&&(b=Dn(D)))}else te=g&~E,te!==0?b=Dn(te):D!==0&&(b=Dn(D));if(b===0)return 0;if(f!==0&&f!==b&&(f&E)===0&&(E=b&-b,D=f&-f,E>=D||E===16&&(D&4194240)!==0))return f;if((b&4)!==0&&(b|=g&16),f=d.entangledLanes,f!==0)for(d=d.entanglements,f&=b;0<f;)g=31-Qs(f),E=1<<g,b|=d[g],f&=~E;return b}function mi(d,f){switch(d){case 1:case 2:case 4:return f+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jn(d,f){for(var g=d.suspendedLanes,b=d.pingedLanes,E=d.expirationTimes,D=d.pendingLanes;0<D;){var te=31-Qs(D),ve=1<<te,_e=E[te];_e===-1?((ve&g)===0||(ve&b)!==0)&&(E[te]=mi(ve,f)):_e<=f&&(d.expiredLanes|=ve),D&=~ve}}function xc(d){return d=d.pendingLanes&-1073741825,d!==0?d:d&1073741824?1073741824:0}function Eh(){var d=cn;return cn<<=1,(cn&4194240)===0&&(cn=64),d}function wu(d){for(var f=[],g=0;31>g;g++)f.push(d);return f}function gc(d,f,g){d.pendingLanes|=f,f!==536870912&&(d.suspendedLanes=0,d.pingedLanes=0),d=d.eventTimes,f=31-Qs(f),d[f]=g}function Co(d,f){var g=d.pendingLanes&~f;d.pendingLanes=f,d.suspendedLanes=0,d.pingedLanes=0,d.expiredLanes&=f,d.mutableReadLanes&=f,d.entangledLanes&=f,f=d.entanglements;var b=d.eventTimes;for(d=d.expirationTimes;0<g;){var E=31-Qs(g),D=1<<E;f[E]=0,b[E]=-1,d[E]=-1,g&=~D}}function cd(d,f){var g=d.entangledLanes|=f;for(d=d.entanglements;g;){var b=31-Qs(g),E=1<<b;E&f|d[b]&f&&(d[b]|=f),g&=~E}}var Zr=0;function el(d){return d&=-d,1<d?4<d?(d&268435455)!==0?16:536870912:4:1}var dd,bu,kh,Ph,ud,tl=!1,no=[],So=null,Xa=null,Pi=null,mr=new Map,vc=new Map,Ao=[],mm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Th(d,f){switch(d){case"focusin":case"focusout":So=null;break;case"dragenter":case"dragleave":Xa=null;break;case"mouseover":case"mouseout":Pi=null;break;case"pointerover":case"pointerout":mr.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":vc.delete(f.pointerId)}}function pi(d,f,g,b,E,D){return d===null||d.nativeEvent!==D?(d={blockedOn:f,domEventName:g,eventSystemFlags:b,nativeEvent:D,targetContainers:[E]},f!==null&&(f=Cd(f),f!==null&&bu(f)),d):(d.eventSystemFlags|=b,f=d.targetContainers,E!==null&&f.indexOf(E)===-1&&f.push(E),d)}function rl(d,f,g,b,E){switch(f){case"focusin":return So=pi(So,d,f,g,b,E),!0;case"dragenter":return Xa=pi(Xa,d,f,g,b,E),!0;case"mouseover":return Pi=pi(Pi,d,f,g,b,E),!0;case"pointerover":var D=E.pointerId;return mr.set(D,pi(mr.get(D)||null,d,f,g,b,E)),!0;case"gotpointercapture":return D=E.pointerId,vc.set(D,pi(vc.get(D)||null,d,f,g,b,E)),!0}return!1}function Ih(d){var f=Gl(d.target);if(f!==null){var g=Xn(f);if(g!==null){if(f=g.tag,f===13){if(f=Fs(g),f!==null){d.blockedOn=f,ud(d.priority,function(){kh(g)});return}}else if(f===3&&g.stateNode.current.memoizedState.isDehydrated){d.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}d.blockedOn=null}function hd(d){if(d.blockedOn!==null)return!1;for(var f=d.targetContainers;0<f.length;){var g=wc(d.domEventName,d.eventSystemFlags,f[0],d.nativeEvent);if(g===null){g=d.nativeEvent;var b=new g.constructor(g.type,g);Wt=b,g.target.dispatchEvent(b),Wt=null}else return f=Cd(g),f!==null&&bu(f),d.blockedOn=g,!1;f.shift()}return!0}function yc(d,f,g){hd(d)&&g.delete(f)}function Nu(){tl=!1,So!==null&&hd(So)&&(So=null),Xa!==null&&hd(Xa)&&(Xa=null),Pi!==null&&hd(Pi)&&(Pi=null),mr.forEach(yc),vc.forEach(yc)}function so(d,f){d.blockedOn===f&&(d.blockedOn=null,tl||(tl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Nu)))}function Eo(d){function f(E){return so(E,d)}if(0<no.length){so(no[0],d);for(var g=1;g<no.length;g++){var b=no[g];b.blockedOn===d&&(b.blockedOn=null)}}for(So!==null&&so(So,d),Xa!==null&&so(Xa,d),Pi!==null&&so(Pi,d),mr.forEach(f),vc.forEach(f),g=0;g<Ao.length;g++)b=Ao[g],b.blockedOn===d&&(b.blockedOn=null);for(;0<Ao.length&&(g=Ao[0],g.blockedOn===null);)Ih(g),g.blockedOn===null&&Ao.shift()}var ao=P.ReactCurrentBatchConfig,fd=!0;function ju(d,f,g,b){var E=Zr,D=ao.transition;ao.transition=null;try{Zr=1,nl(d,f,g,b)}finally{Zr=E,ao.transition=D}}function _u(d,f,g,b){var E=Zr,D=ao.transition;ao.transition=null;try{Zr=4,nl(d,f,g,b)}finally{Zr=E,ao.transition=D}}function nl(d,f,g,b){if(fd){var E=wc(d,f,g,b);if(E===null)Ru(d,f,b,ko,g),Th(d,b);else if(rl(E,d,f,g,b))b.stopPropagation();else if(Th(d,b),f&4&&-1<mm.indexOf(d)){for(;E!==null;){var D=Cd(E);if(D!==null&&dd(D),D=wc(d,f,g,b),D===null&&Ru(d,f,b,ko,g),D===E)break;E=D}E!==null&&b.stopPropagation()}else Ru(d,f,b,null,g)}}var ko=null;function wc(d,f,g,b){if(ko=null,d=It(b),d=Gl(d),d!==null)if(f=Xn(d),f===null)d=null;else if(g=f.tag,g===13){if(d=Fs(f),d!==null)return d;d=null}else if(g===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;d=null}else f!==d&&(d=null);return ko=d,null}function bc(d){switch(d){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gn()){case Ee:return 1;case wt:return 4;case nt:case Qr:return 16;case Zn:return 536870912;default:return 16}default:return 16}}var Ti=null,sl=null,Nc=null;function Cu(){if(Nc)return Nc;var d,f=sl,g=f.length,b,E="value"in Ti?Ti.value:Ti.textContent,D=E.length;for(d=0;d<g&&f[d]===E[d];d++);var te=g-d;for(b=1;b<=te&&f[g-b]===E[D-b];b++);return Nc=E.slice(d,1<b?1-b:void 0)}function Ii(d){var f=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&f===13&&(d=13)):d=f,d===10&&(d=13),32<=d||d===13?d:0}function Di(){return!0}function Su(){return!1}function ja(d){function f(g,b,E,D,te){this._reactName=g,this._targetInst=E,this.type=b,this.nativeEvent=D,this.target=te,this.currentTarget=null;for(var ve in d)d.hasOwnProperty(ve)&&(g=d[ve],this[ve]=g?g(D):D[ve]);return this.isDefaultPrevented=(D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1)?Di:Su,this.isPropagationStopped=Su,this}return oe(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=Di)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=Di)},persist:function(){},isPersistent:Di}),f}var Oi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},md=ja(Oi),A=oe({},Oi,{view:0,detail:0}),Z=ja(A),xe,Ne,ke,Ye=oe({},A,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ml,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==ke&&(ke&&d.type==="mousemove"?(xe=d.screenX-ke.screenX,Ne=d.screenY-ke.screenY):Ne=xe=0,ke=d),xe)},movementY:function(d){return"movementY"in d?d.movementY:Ne}}),it=ja(Ye),Ft=oe({},Ye,{dataTransfer:0}),Yt=ja(Ft),wr=oe({},A,{relatedTarget:0}),br=ja(wr),en=oe({},Oi,{animationName:0,elapsedTime:0,pseudoElement:0}),Qn=ja(en),As=oe({},Oi,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),On=ja(As),Us=oe({},Oi,{data:0}),xs=ja(Us),ua={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ri={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Za={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dh(d){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(d):(d=Za[d])?!!f[d]:!1}function Ml(){return Dh}var jc=oe({},A,{key:function(d){if(d.key){var f=ua[d.key]||d.key;if(f!=="Unidentified")return f}return d.type==="keypress"?(d=Ii(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?Ri[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ml,charCode:function(d){return d.type==="keypress"?Ii(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?Ii(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),Bl=ja(jc),_c=oe({},Ye,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ul=ja(_c),Cc=oe({},A,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ml}),_a=ja(Cc),Sc=oe({},Oi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ac=ja(Sc),Au=oe({},Ye,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),Eu=ja(Au),as=[9,13,27,32],io=l&&"CompositionEvent"in window,Po=null;l&&"documentMode"in document&&(Po=document.documentMode);var Oh=l&&"TextEvent"in window&&!Po,xi=l&&(!io||Po&&8<Po&&11>=Po),$l=" ",pd=!1;function xd(d,f){switch(d){case"keyup":return as.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function al(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var Li=!1;function gi(d,f){switch(d){case"compositionend":return al(f);case"keypress":return f.which!==32?null:(pd=!0,$l);case"textInput":return d=f.data,d===$l&&pd?null:d;default:return null}}function vi(d,f){if(Li)return d==="compositionend"||!io&&xd(d,f)?(d=Cu(),Nc=sl=Ti=null,Li=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return xi&&f.locale!=="ko"?null:f.data;default:return null}}var Vl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function To(d){var f=d&&d.nodeName&&d.nodeName.toLowerCase();return f==="input"?!!Vl[d.type]:f==="textarea"}function il(d,f,g,b){yt(b),f=Bh(f,"onChange"),0<f.length&&(g=new md("onChange","change",null,g,b),d.push({event:g,listeners:f}))}var ol=null,Io=null;function gs(d){Du(d,0)}function Ec(d){var f=Mc(d);if(Ue(f))return d}function Do(d,f){if(d==="change")return f}var oo=!1;if(l){var kc;if(l){var Pc="oninput"in document;if(!Pc){var gd=document.createElement("div");gd.setAttribute("oninput","return;"),Pc=typeof gd.oninput=="function"}kc=Pc}else kc=!1;oo=kc&&(!document.documentMode||9<document.documentMode)}function vd(){ol&&(ol.detachEvent("onpropertychange",ll),Io=ol=null)}function ll(d){if(d.propertyName==="value"&&Ec(Io)){var f=[];il(f,Io,d,It(d)),jt(gs,f)}}function zl(d,f,g){d==="focusin"?(vd(),ol=f,Io=g,ol.attachEvent("onpropertychange",ll)):d==="focusout"&&vd()}function ql(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return Ec(Io)}function Tc(d,f){if(d==="click")return Ec(f)}function Hl(d,f){if(d==="input"||d==="change")return Ec(f)}function Ic(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var is=typeof Object.is=="function"?Object.is:Ic;function Ja(d,f){if(is(d,f))return!0;if(typeof d!="object"||d===null||typeof f!="object"||f===null)return!1;var g=Object.keys(d),b=Object.keys(f);if(g.length!==b.length)return!1;for(b=0;b<g.length;b++){var E=g[b];if(!c.call(f,E)||!is(d[E],f[E]))return!1}return!0}function tn(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function Nn(d,f){var g=tn(d);d=0;for(var b;g;){if(g.nodeType===3){if(b=d+g.textContent.length,d<=f&&b>=f)return{node:g,offset:f-d};d=b}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=tn(g)}}function os(d,f){return d&&f?d===f?!0:d&&d.nodeType===3?!1:f&&f.nodeType===3?os(d,f.parentNode):"contains"in d?d.contains(f):d.compareDocumentPosition?!!(d.compareDocumentPosition(f)&16):!1:!1}function Es(){for(var d=window,f=We();f instanceof d.HTMLIFrameElement;){try{var g=typeof f.contentWindow.location.href=="string"}catch{g=!1}if(g)d=f.contentWindow;else break;f=We(d.document)}return f}function lo(d){var f=d&&d.nodeName&&d.nodeName.toLowerCase();return f&&(f==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||f==="textarea"||d.contentEditable==="true")}function ku(d){var f=Es(),g=d.focusedElem,b=d.selectionRange;if(f!==g&&g&&g.ownerDocument&&os(g.ownerDocument.documentElement,g)){if(b!==null&&lo(g)){if(f=b.start,d=b.end,d===void 0&&(d=f),"selectionStart"in g)g.selectionStart=f,g.selectionEnd=Math.min(d,g.value.length);else if(d=(f=g.ownerDocument||document)&&f.defaultView||window,d.getSelection){d=d.getSelection();var E=g.textContent.length,D=Math.min(b.start,E);b=b.end===void 0?D:Math.min(b.end,E),!d.extend&&D>b&&(E=b,b=D,D=E),E=Nn(g,D);var te=Nn(g,b);E&&te&&(d.rangeCount!==1||d.anchorNode!==E.node||d.anchorOffset!==E.offset||d.focusNode!==te.node||d.focusOffset!==te.offset)&&(f=f.createRange(),f.setStart(E.node,E.offset),d.removeAllRanges(),D>b?(d.addRange(f),d.extend(te.node,te.offset)):(f.setEnd(te.node,te.offset),d.addRange(f)))}}for(f=[],d=g;d=d.parentNode;)d.nodeType===1&&f.push({element:d,left:d.scrollLeft,top:d.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<f.length;g++)d=f[g],d.element.scrollLeft=d.left,d.element.scrollTop=d.top}}var yd=l&&"documentMode"in document&&11>=document.documentMode,cl=null,Rh=null,wd=null,Lh=!1;function pm(d,f,g){var b=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;Lh||cl==null||cl!==We(b)||(b=cl,"selectionStart"in b&&lo(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),wd&&Ja(wd,b)||(wd=b,b=Bh(Rh,"onSelect"),0<b.length&&(f=new md("onSelect","select",null,f,g),d.push({event:f,listeners:b}),f.target=cl)))}function Pu(d,f){var g={};return g[d.toLowerCase()]=f.toLowerCase(),g["Webkit"+d]="webkit"+f,g["Moz"+d]="moz"+f,g}var Dc={animationend:Pu("Animation","AnimationEnd"),animationiteration:Pu("Animation","AnimationIteration"),animationstart:Pu("Animation","AnimationStart"),transitionend:Pu("Transition","TransitionEnd")},Oc={},xm={};l&&(xm=document.createElement("div").style,"AnimationEvent"in window||(delete Dc.animationend.animation,delete Dc.animationiteration.animation,delete Dc.animationstart.animation),"TransitionEvent"in window||delete Dc.transitionend.transition);function Tu(d){if(Oc[d])return Oc[d];if(!Dc[d])return d;var f=Dc[d],g;for(g in f)if(f.hasOwnProperty(g)&&g in xm)return Oc[d]=f[g];return d}var gm=Tu("animationend"),vm=Tu("animationiteration"),ym=Tu("animationstart"),wm=Tu("transitionend"),bm=new Map,Nm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Oo(d,f){bm.set(d,f),i(f,[d])}for(var bd=0;bd<Nm.length;bd++){var Ma=Nm[bd],Fi=Ma.toLowerCase(),Fh=Ma[0].toUpperCase()+Ma.slice(1);Oo(Fi,"on"+Fh)}Oo(gm,"onAnimationEnd"),Oo(vm,"onAnimationIteration"),Oo(ym,"onAnimationStart"),Oo("dblclick","onDoubleClick"),Oo("focusin","onFocus"),Oo("focusout","onBlur"),Oo(wm,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rp=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wl));function Iu(d,f,g){var b=d.type||"unknown-event";d.currentTarget=g,ba(b,f,void 0,d),d.currentTarget=null}function Du(d,f){f=(f&4)!==0;for(var g=0;g<d.length;g++){var b=d[g],E=b.event;b=b.listeners;e:{var D=void 0;if(f)for(var te=b.length-1;0<=te;te--){var ve=b[te],_e=ve.instance,$e=ve.currentTarget;if(ve=ve.listener,_e!==D&&E.isPropagationStopped())break e;Iu(E,ve,$e),D=_e}else for(te=0;te<b.length;te++){if(ve=b[te],_e=ve.instance,$e=ve.currentTarget,ve=ve.listener,_e!==D&&E.isPropagationStopped())break e;Iu(E,ve,$e),D=_e}}}if(wn)throw d=Ra,wn=!1,Ra=null,d}function Sn(d,f){var g=f[ei];g===void 0&&(g=f[ei]=new Set);var b=d+"__bubble";g.has(b)||(Ou(f,d,2,!1),g.add(b))}function Mh(d,f,g){var b=0;f&&(b|=4),Ou(g,d,b,f)}var Nd="_reactListening"+Math.random().toString(36).slice(2);function Rc(d){if(!d[Nd]){d[Nd]=!0,n.forEach(function(g){g!=="selectionchange"&&(rp.has(g)||Mh(g,!1,d),Mh(g,!0,d))});var f=d.nodeType===9?d:d.ownerDocument;f===null||f[Nd]||(f[Nd]=!0,Mh("selectionchange",!1,f))}}function Ou(d,f,g,b){switch(bc(f)){case 1:var E=ju;break;case 4:E=_u;break;default:E=nl}g=E.bind(null,f,g,d),E=void 0,!Vn||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(E=!0),b?E!==void 0?d.addEventListener(f,g,{capture:!0,passive:E}):d.addEventListener(f,g,!0):E!==void 0?d.addEventListener(f,g,{passive:E}):d.addEventListener(f,g,!1)}function Ru(d,f,g,b,E){var D=b;if((f&1)===0&&(f&2)===0&&b!==null)e:for(;;){if(b===null)return;var te=b.tag;if(te===3||te===4){var ve=b.stateNode.containerInfo;if(ve===E||ve.nodeType===8&&ve.parentNode===E)break;if(te===4)for(te=b.return;te!==null;){var _e=te.tag;if((_e===3||_e===4)&&(_e=te.stateNode.containerInfo,_e===E||_e.nodeType===8&&_e.parentNode===E))return;te=te.return}for(;ve!==null;){if(te=Gl(ve),te===null)return;if(_e=te.tag,_e===5||_e===6){b=D=te;continue e}ve=ve.parentNode}}b=b.return}jt(function(){var $e=D,dt=It(g),ht=[];e:{var lt=bm.get(d);if(lt!==void 0){var Dt=md,Ut=d;switch(d){case"keypress":if(Ii(g)===0)break e;case"keydown":case"keyup":Dt=Bl;break;case"focusin":Ut="focus",Dt=br;break;case"focusout":Ut="blur",Dt=br;break;case"beforeblur":case"afterblur":Dt=br;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Dt=it;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Dt=Yt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Dt=_a;break;case gm:case vm:case ym:Dt=Qn;break;case wm:Dt=Ac;break;case"scroll":Dt=Z;break;case"wheel":Dt=Eu;break;case"copy":case"cut":case"paste":Dt=On;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Dt=Ul}var Gt=(f&4)!==0,zs=!Gt&&d==="scroll",De=Gt?lt!==null?lt+"Capture":null:lt;Gt=[];for(var Ae=$e,Le;Ae!==null;){Le=Ae;var mt=Le.stateNode;if(Le.tag===5&&mt!==null&&(Le=mt,De!==null&&(mt=Tr(Ae,De),mt!=null&&Gt.push(Lu(Ae,mt,Le)))),zs)break;Ae=Ae.return}0<Gt.length&&(lt=new Dt(lt,Ut,null,g,dt),ht.push({event:lt,listeners:Gt}))}}if((f&7)===0){e:{if(lt=d==="mouseover"||d==="pointerover",Dt=d==="mouseout"||d==="pointerout",lt&&g!==Wt&&(Ut=g.relatedTarget||g.fromElement)&&(Gl(Ut)||Ut[Ca]))break e;if((Dt||lt)&&(lt=dt.window===dt?dt:(lt=dt.ownerDocument)?lt.defaultView||lt.parentWindow:window,Dt?(Ut=g.relatedTarget||g.toElement,Dt=$e,Ut=Ut?Gl(Ut):null,Ut!==null&&(zs=Xn(Ut),Ut!==zs||Ut.tag!==5&&Ut.tag!==6)&&(Ut=null)):(Dt=null,Ut=$e),Dt!==Ut)){if(Gt=it,mt="onMouseLeave",De="onMouseEnter",Ae="mouse",(d==="pointerout"||d==="pointerover")&&(Gt=Ul,mt="onPointerLeave",De="onPointerEnter",Ae="pointer"),zs=Dt==null?lt:Mc(Dt),Le=Ut==null?lt:Mc(Ut),lt=new Gt(mt,Ae+"leave",Dt,g,dt),lt.target=zs,lt.relatedTarget=Le,mt=null,Gl(dt)===$e&&(Gt=new Gt(De,Ae+"enter",Ut,g,dt),Gt.target=Le,Gt.relatedTarget=zs,mt=Gt),zs=mt,Dt&&Ut)t:{for(Gt=Dt,De=Ut,Ae=0,Le=Gt;Le;Le=Lc(Le))Ae++;for(Le=0,mt=De;mt;mt=Lc(mt))Le++;for(;0<Ae-Le;)Gt=Lc(Gt),Ae--;for(;0<Le-Ae;)De=Lc(De),Le--;for(;Ae--;){if(Gt===De||De!==null&&Gt===De.alternate)break t;Gt=Lc(Gt),De=Lc(De)}Gt=null}else Gt=null;Dt!==null&&np(ht,lt,Dt,Gt,!1),Ut!==null&&zs!==null&&np(ht,zs,Ut,Gt,!0)}}e:{if(lt=$e?Mc($e):window,Dt=lt.nodeName&&lt.nodeName.toLowerCase(),Dt==="select"||Dt==="input"&&lt.type==="file")var Jt=Do;else if(To(lt))if(oo)Jt=Hl;else{Jt=ql;var dr=zl}else(Dt=lt.nodeName)&&Dt.toLowerCase()==="input"&&(lt.type==="checkbox"||lt.type==="radio")&&(Jt=Tc);if(Jt&&(Jt=Jt(d,$e))){il(ht,Jt,g,dt);break e}dr&&dr(d,lt,$e),d==="focusout"&&(dr=lt._wrapperState)&&dr.controlled&&lt.type==="number"&&ye(lt,"number",lt.value)}switch(dr=$e?Mc($e):window,d){case"focusin":(To(dr)||dr.contentEditable==="true")&&(cl=dr,Rh=$e,wd=null);break;case"focusout":wd=Rh=cl=null;break;case"mousedown":Lh=!0;break;case"contextmenu":case"mouseup":case"dragend":Lh=!1,pm(ht,g,dt);break;case"selectionchange":if(yd)break;case"keydown":case"keyup":pm(ht,g,dt)}var ur;if(io)e:{switch(d){case"compositionstart":var Ar="onCompositionStart";break e;case"compositionend":Ar="onCompositionEnd";break e;case"compositionupdate":Ar="onCompositionUpdate";break e}Ar=void 0}else Li?xd(d,g)&&(Ar="onCompositionEnd"):d==="keydown"&&g.keyCode===229&&(Ar="onCompositionStart");Ar&&(xi&&g.locale!=="ko"&&(Li||Ar!=="onCompositionStart"?Ar==="onCompositionEnd"&&Li&&(ur=Cu()):(Ti=dt,sl="value"in Ti?Ti.value:Ti.textContent,Li=!0)),dr=Bh($e,Ar),0<dr.length&&(Ar=new xs(Ar,d,null,g,dt),ht.push({event:Ar,listeners:dr}),ur?Ar.data=ur:(ur=al(g),ur!==null&&(Ar.data=ur)))),(ur=Oh?gi(d,g):vi(d,g))&&($e=Bh($e,"onBeforeInput"),0<$e.length&&(dt=new xs("onBeforeInput","beforeinput",null,g,dt),ht.push({event:dt,listeners:$e}),dt.data=ur))}Du(ht,f)})}function Lu(d,f,g){return{instance:d,listener:f,currentTarget:g}}function Bh(d,f){for(var g=f+"Capture",b=[];d!==null;){var E=d,D=E.stateNode;E.tag===5&&D!==null&&(E=D,D=Tr(d,g),D!=null&&b.unshift(Lu(d,D,E)),D=Tr(d,f),D!=null&&b.push(Lu(d,D,E))),d=d.return}return b}function Lc(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5);return d||null}function np(d,f,g,b,E){for(var D=f._reactName,te=[];g!==null&&g!==b;){var ve=g,_e=ve.alternate,$e=ve.stateNode;if(_e!==null&&_e===b)break;ve.tag===5&&$e!==null&&(ve=$e,E?(_e=Tr(g,D),_e!=null&&te.unshift(Lu(g,_e,ve))):E||(_e=Tr(g,D),_e!=null&&te.push(Lu(g,_e,ve)))),g=g.return}te.length!==0&&d.push({event:f,listeners:te})}var ig=/\r\n?/g,og=/\u0000|\uFFFD/g;function sp(d){return(typeof d=="string"?d:""+d).replace(ig,`
`).replace(og,"")}function Uh(d,f,g){if(f=sp(f),sp(d)!==f&&g)throw Error(r(425))}function jd(){}var Fu=null,Fc=null;function jm(d,f){return d==="textarea"||d==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var _m=typeof setTimeout=="function"?setTimeout:void 0,ap=typeof clearTimeout=="function"?clearTimeout:void 0,ip=typeof Promise=="function"?Promise:void 0,lg=typeof queueMicrotask=="function"?queueMicrotask:typeof ip<"u"?function(d){return ip.resolve(null).then(d).catch(cg)}:_m;function cg(d){setTimeout(function(){throw d})}function Cm(d,f){var g=f,b=0;do{var E=g.nextSibling;if(d.removeChild(g),E&&E.nodeType===8)if(g=E.data,g==="/$"){if(b===0){d.removeChild(E),Eo(f);return}b--}else g!=="$"&&g!=="$?"&&g!=="$!"||b++;g=E}while(g);Eo(f)}function Ba(d){for(;d!=null;d=d.nextSibling){var f=d.nodeType;if(f===1||f===3)break;if(f===8){if(f=d.data,f==="$"||f==="$!"||f==="$?")break;if(f==="/$")return null}}return d}function Mi(d){d=d.previousSibling;for(var f=0;d;){if(d.nodeType===8){var g=d.data;if(g==="$"||g==="$!"||g==="$?"){if(f===0)return d;f--}else g==="/$"&&f++}d=d.previousSibling}return null}var Qa=Math.random().toString(36).slice(2),Ro="__reactFiber$"+Qa,_d="__reactProps$"+Qa,Ca="__reactContainer$"+Qa,ei="__reactEvents$"+Qa,dg="__reactListeners$"+Qa,ug="__reactHandles$"+Qa;function Gl(d){var f=d[Ro];if(f)return f;for(var g=d.parentNode;g;){if(f=g[Ca]||g[Ro]){if(g=f.alternate,f.child!==null||g!==null&&g.child!==null)for(d=Mi(d);d!==null;){if(g=d[Ro])return g;d=Mi(d)}return f}d=g,g=d.parentNode}return null}function Cd(d){return d=d[Ro]||d[Ca],!d||d.tag!==5&&d.tag!==6&&d.tag!==13&&d.tag!==3?null:d}function Mc(d){if(d.tag===5||d.tag===6)return d.stateNode;throw Error(r(33))}function Mu(d){return d[_d]||null}var Sm=[],dl=-1;function co(d){return{current:d}}function vn(d){0>dl||(d.current=Sm[dl],Sm[dl]=null,dl--)}function jn(d,f){dl++,Sm[dl]=d.current,d.current=f}var Kl={},ha=co(Kl),ti=co(!1),Bc=Kl;function Sd(d,f){var g=d.type.contextTypes;if(!g)return Kl;var b=d.stateNode;if(b&&b.__reactInternalMemoizedUnmaskedChildContext===f)return b.__reactInternalMemoizedMaskedChildContext;var E={},D;for(D in g)E[D]=f[D];return b&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=f,d.__reactInternalMemoizedMaskedChildContext=E),E}function ri(d){return d=d.childContextTypes,d!=null}function $h(){vn(ti),vn(ha)}function op(d,f,g){if(ha.current!==Kl)throw Error(r(168));jn(ha,f),jn(ti,g)}function Am(d,f,g){var b=d.stateNode;if(f=f.childContextTypes,typeof b.getChildContext!="function")return g;b=b.getChildContext();for(var E in b)if(!(E in f))throw Error(r(108,T(d)||"Unknown",E));return oe({},g,b)}function Uc(d){return d=(d=d.stateNode)&&d.__reactInternalMemoizedMergedChildContext||Kl,Bc=ha.current,jn(ha,d),jn(ti,ti.current),!0}function lp(d,f,g){var b=d.stateNode;if(!b)throw Error(r(169));g?(d=Am(d,f,Bc),b.__reactInternalMemoizedMergedChildContext=d,vn(ti),vn(ha),jn(ha,d)):vn(ti),jn(ti,g)}var ul=null,Bu=!1,v=!1;function _(d){ul===null?ul=[d]:ul.push(d)}function I(d){Bu=!0,_(d)}function F(){if(!v&&ul!==null){v=!0;var d=0,f=Zr;try{var g=ul;for(Zr=1;d<g.length;d++){var b=g[d];do b=b(!0);while(b!==null)}ul=null,Bu=!1}catch(E){throw ul!==null&&(ul=ul.slice(d+1)),Js(Ee,F),E}finally{Zr=f,v=!1}}return null}var X=[],ne=0,ae=null,le=0,ce=[],he=0,je=null,Ie=1,me="";function Ce(d,f){X[ne++]=le,X[ne++]=ae,ae=d,le=f}function Te(d,f,g){ce[he++]=Ie,ce[he++]=me,ce[he++]=je,je=d;var b=Ie;d=me;var E=32-Qs(b)-1;b&=~(1<<E),g+=1;var D=32-Qs(f)+E;if(30<D){var te=E-E%5;D=(b&(1<<te)-1).toString(32),b>>=te,E-=te,Ie=1<<32-Qs(f)+E|g<<E|b,me=D+d}else Ie=1<<D|g<<E|b,me=d}function Ge(d){d.return!==null&&(Ce(d,1),Te(d,1,0))}function Oe(d){for(;d===ae;)ae=X[--ne],X[ne]=null,le=X[--ne],X[ne]=null;for(;d===je;)je=ce[--he],ce[he]=null,me=ce[--he],ce[he]=null,Ie=ce[--he],ce[he]=null}var qe=null,He=null,Je=!1,rt=null;function Xt(d,f){var g=Uo(5,null,null,0);g.elementType="DELETED",g.stateNode=f,g.return=d,f=d.deletions,f===null?(d.deletions=[g],d.flags|=16):f.push(g)}function Ot(d,f){switch(d.tag){case 5:var g=d.type;return f=f.nodeType!==1||g.toLowerCase()!==f.nodeName.toLowerCase()?null:f,f!==null?(d.stateNode=f,qe=d,He=Ba(f.firstChild),!0):!1;case 6:return f=d.pendingProps===""||f.nodeType!==3?null:f,f!==null?(d.stateNode=f,qe=d,He=null,!0):!1;case 13:return f=f.nodeType!==8?null:f,f!==null?(g=je!==null?{id:Ie,overflow:me}:null,d.memoizedState={dehydrated:f,treeContext:g,retryLane:1073741824},g=Uo(18,null,null,0),g.stateNode=f,g.return=d,d.child=g,qe=d,He=null,!0):!1;default:return!1}}function Ir(d){return(d.mode&1)!==0&&(d.flags&128)===0}function Mt(d){if(Je){var f=He;if(f){var g=f;if(!Ot(d,f)){if(Ir(d))throw Error(r(418));f=Ba(g.nextSibling);var b=qe;f&&Ot(d,f)?Xt(b,g):(d.flags=d.flags&-4097|2,Je=!1,qe=d)}}else{if(Ir(d))throw Error(r(418));d.flags=d.flags&-4097|2,Je=!1,qe=d}}}function Vr(d){for(d=d.return;d!==null&&d.tag!==5&&d.tag!==3&&d.tag!==13;)d=d.return;qe=d}function ls(d){if(d!==qe)return!1;if(!Je)return Vr(d),Je=!0,!1;var f;if((f=d.tag!==3)&&!(f=d.tag!==5)&&(f=d.type,f=f!=="head"&&f!=="body"&&!jm(d.type,d.memoizedProps)),f&&(f=He)){if(Ir(d))throw Dr(),Error(r(418));for(;f;)Xt(d,f),f=Ba(f.nextSibling)}if(Vr(d),d.tag===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));e:{for(d=d.nextSibling,f=0;d;){if(d.nodeType===8){var g=d.data;if(g==="/$"){if(f===0){He=Ba(d.nextSibling);break e}f--}else g!=="$"&&g!=="$!"&&g!=="$?"||f++}d=d.nextSibling}He=null}}else He=qe?Ba(d.stateNode.nextSibling):null;return!0}function Dr(){for(var d=He;d;)d=Ba(d.nextSibling)}function Rt(){He=qe=null,Je=!1}function Nt(d){rt===null?rt=[d]:rt.push(d)}var vs=P.ReactCurrentBatchConfig;function pr(d,f,g){if(d=g.ref,d!==null&&typeof d!="function"&&typeof d!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(r(309));var b=g.stateNode}if(!b)throw Error(r(147,d));var E=b,D=""+d;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===D?f.ref:(f=function(te){var ve=E.refs;te===null?delete ve[D]:ve[D]=te},f._stringRef=D,f)}if(typeof d!="string")throw Error(r(284));if(!g._owner)throw Error(r(290,d))}return d}function Br(d,f){throw d=Object.prototype.toString.call(f),Error(r(31,d==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":d))}function Rn(d){var f=d._init;return f(d._payload)}function ta(d){function f(De,Ae){if(d){var Le=De.deletions;Le===null?(De.deletions=[Ae],De.flags|=16):Le.push(Ae)}}function g(De,Ae){if(!d)return null;for(;Ae!==null;)f(De,Ae),Ae=Ae.sibling;return null}function b(De,Ae){for(De=new Map;Ae!==null;)Ae.key!==null?De.set(Ae.key,Ae):De.set(Ae.index,Ae),Ae=Ae.sibling;return De}function E(De,Ae){return De=Ld(De,Ae),De.index=0,De.sibling=null,De}function D(De,Ae,Le){return De.index=Le,d?(Le=De.alternate,Le!==null?(Le=Le.index,Le<Ae?(De.flags|=2,Ae):Le):(De.flags|=2,Ae)):(De.flags|=1048576,Ae)}function te(De){return d&&De.alternate===null&&(De.flags|=2),De}function ve(De,Ae,Le,mt){return Ae===null||Ae.tag!==6?(Ae=Ug(Le,De.mode,mt),Ae.return=De,Ae):(Ae=E(Ae,Le),Ae.return=De,Ae)}function _e(De,Ae,Le,mt){var Jt=Le.type;return Jt===R?dt(De,Ae,Le.props.children,mt,Le.key):Ae!==null&&(Ae.elementType===Jt||typeof Jt=="object"&&Jt!==null&&Jt.$$typeof===se&&Rn(Jt)===Ae.type)?(mt=E(Ae,Le.props),mt.ref=pr(De,Ae,Le),mt.return=De,mt):(mt=Ep(Le.type,Le.key,Le.props,null,De.mode,mt),mt.ref=pr(De,Ae,Le),mt.return=De,mt)}function $e(De,Ae,Le,mt){return Ae===null||Ae.tag!==4||Ae.stateNode.containerInfo!==Le.containerInfo||Ae.stateNode.implementation!==Le.implementation?(Ae=$g(Le,De.mode,mt),Ae.return=De,Ae):(Ae=E(Ae,Le.children||[]),Ae.return=De,Ae)}function dt(De,Ae,Le,mt,Jt){return Ae===null||Ae.tag!==7?(Ae=Gu(Le,De.mode,mt,Jt),Ae.return=De,Ae):(Ae=E(Ae,Le),Ae.return=De,Ae)}function ht(De,Ae,Le){if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number")return Ae=Ug(""+Ae,De.mode,Le),Ae.return=De,Ae;if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case O:return Le=Ep(Ae.type,Ae.key,Ae.props,null,De.mode,Le),Le.ref=pr(De,null,Ae),Le.return=De,Le;case $:return Ae=$g(Ae,De.mode,Le),Ae.return=De,Ae;case se:var mt=Ae._init;return ht(De,mt(Ae._payload),Le)}if(st(Ae)||J(Ae))return Ae=Gu(Ae,De.mode,Le,null),Ae.return=De,Ae;Br(De,Ae)}return null}function lt(De,Ae,Le,mt){var Jt=Ae!==null?Ae.key:null;if(typeof Le=="string"&&Le!==""||typeof Le=="number")return Jt!==null?null:ve(De,Ae,""+Le,mt);if(typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case O:return Le.key===Jt?_e(De,Ae,Le,mt):null;case $:return Le.key===Jt?$e(De,Ae,Le,mt):null;case se:return Jt=Le._init,lt(De,Ae,Jt(Le._payload),mt)}if(st(Le)||J(Le))return Jt!==null?null:dt(De,Ae,Le,mt,null);Br(De,Le)}return null}function Dt(De,Ae,Le,mt,Jt){if(typeof mt=="string"&&mt!==""||typeof mt=="number")return De=De.get(Le)||null,ve(Ae,De,""+mt,Jt);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case O:return De=De.get(mt.key===null?Le:mt.key)||null,_e(Ae,De,mt,Jt);case $:return De=De.get(mt.key===null?Le:mt.key)||null,$e(Ae,De,mt,Jt);case se:var dr=mt._init;return Dt(De,Ae,Le,dr(mt._payload),Jt)}if(st(mt)||J(mt))return De=De.get(Le)||null,dt(Ae,De,mt,Jt,null);Br(Ae,mt)}return null}function Ut(De,Ae,Le,mt){for(var Jt=null,dr=null,ur=Ae,Ar=Ae=0,Pa=null;ur!==null&&Ar<Le.length;Ar++){ur.index>Ar?(Pa=ur,ur=null):Pa=ur.sibling;var un=lt(De,ur,Le[Ar],mt);if(un===null){ur===null&&(ur=Pa);break}d&&ur&&un.alternate===null&&f(De,ur),Ae=D(un,Ae,Ar),dr===null?Jt=un:dr.sibling=un,dr=un,ur=Pa}if(Ar===Le.length)return g(De,ur),Je&&Ce(De,Ar),Jt;if(ur===null){for(;Ar<Le.length;Ar++)ur=ht(De,Le[Ar],mt),ur!==null&&(Ae=D(ur,Ae,Ar),dr===null?Jt=ur:dr.sibling=ur,dr=ur);return Je&&Ce(De,Ar),Jt}for(ur=b(De,ur);Ar<Le.length;Ar++)Pa=Dt(ur,De,Ar,Le[Ar],mt),Pa!==null&&(d&&Pa.alternate!==null&&ur.delete(Pa.key===null?Ar:Pa.key),Ae=D(Pa,Ae,Ar),dr===null?Jt=Pa:dr.sibling=Pa,dr=Pa);return d&&ur.forEach(function(Fd){return f(De,Fd)}),Je&&Ce(De,Ar),Jt}function Gt(De,Ae,Le,mt){var Jt=J(Le);if(typeof Jt!="function")throw Error(r(150));if(Le=Jt.call(Le),Le==null)throw Error(r(151));for(var dr=Jt=null,ur=Ae,Ar=Ae=0,Pa=null,un=Le.next();ur!==null&&!un.done;Ar++,un=Le.next()){ur.index>Ar?(Pa=ur,ur=null):Pa=ur.sibling;var Fd=lt(De,ur,un.value,mt);if(Fd===null){ur===null&&(ur=Pa);break}d&&ur&&Fd.alternate===null&&f(De,ur),Ae=D(Fd,Ae,Ar),dr===null?Jt=Fd:dr.sibling=Fd,dr=Fd,ur=Pa}if(un.done)return g(De,ur),Je&&Ce(De,Ar),Jt;if(ur===null){for(;!un.done;Ar++,un=Le.next())un=ht(De,un.value,mt),un!==null&&(Ae=D(un,Ae,Ar),dr===null?Jt=un:dr.sibling=un,dr=un);return Je&&Ce(De,Ar),Jt}for(ur=b(De,ur);!un.done;Ar++,un=Le.next())un=Dt(ur,De,Ar,un.value,mt),un!==null&&(d&&un.alternate!==null&&ur.delete(un.key===null?Ar:un.key),Ae=D(un,Ae,Ar),dr===null?Jt=un:dr.sibling=un,dr=un);return d&&ur.forEach(function(EP){return f(De,EP)}),Je&&Ce(De,Ar),Jt}function zs(De,Ae,Le,mt){if(typeof Le=="object"&&Le!==null&&Le.type===R&&Le.key===null&&(Le=Le.props.children),typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case O:e:{for(var Jt=Le.key,dr=Ae;dr!==null;){if(dr.key===Jt){if(Jt=Le.type,Jt===R){if(dr.tag===7){g(De,dr.sibling),Ae=E(dr,Le.props.children),Ae.return=De,De=Ae;break e}}else if(dr.elementType===Jt||typeof Jt=="object"&&Jt!==null&&Jt.$$typeof===se&&Rn(Jt)===dr.type){g(De,dr.sibling),Ae=E(dr,Le.props),Ae.ref=pr(De,dr,Le),Ae.return=De,De=Ae;break e}g(De,dr);break}else f(De,dr);dr=dr.sibling}Le.type===R?(Ae=Gu(Le.props.children,De.mode,mt,Le.key),Ae.return=De,De=Ae):(mt=Ep(Le.type,Le.key,Le.props,null,De.mode,mt),mt.ref=pr(De,Ae,Le),mt.return=De,De=mt)}return te(De);case $:e:{for(dr=Le.key;Ae!==null;){if(Ae.key===dr)if(Ae.tag===4&&Ae.stateNode.containerInfo===Le.containerInfo&&Ae.stateNode.implementation===Le.implementation){g(De,Ae.sibling),Ae=E(Ae,Le.children||[]),Ae.return=De,De=Ae;break e}else{g(De,Ae);break}else f(De,Ae);Ae=Ae.sibling}Ae=$g(Le,De.mode,mt),Ae.return=De,De=Ae}return te(De);case se:return dr=Le._init,zs(De,Ae,dr(Le._payload),mt)}if(st(Le))return Ut(De,Ae,Le,mt);if(J(Le))return Gt(De,Ae,Le,mt);Br(De,Le)}return typeof Le=="string"&&Le!==""||typeof Le=="number"?(Le=""+Le,Ae!==null&&Ae.tag===6?(g(De,Ae.sibling),Ae=E(Ae,Le),Ae.return=De,De=Ae):(g(De,Ae),Ae=Ug(Le,De.mode,mt),Ae.return=De,De=Ae),te(De)):g(De,Ae)}return zs}var ks=ta(!0),es=ta(!1),$s=co(null),ra=null,zn=null,Hr=null;function rn(){Hr=zn=ra=null}function qn(d){var f=$s.current;vn($s),d._currentValue=f}function nn(d,f,g){for(;d!==null;){var b=d.alternate;if((d.childLanes&f)!==f?(d.childLanes|=f,b!==null&&(b.childLanes|=f)):b!==null&&(b.childLanes&f)!==f&&(b.childLanes|=f),d===g)break;d=d.return}}function cs(d,f){ra=d,Hr=zn=null,d=d.dependencies,d!==null&&d.firstContext!==null&&((d.lanes&f)!==0&&(Ui=!0),d.firstContext=null)}function ds(d){var f=d._currentValue;if(Hr!==d)if(d={context:d,memoizedValue:f,next:null},zn===null){if(ra===null)throw Error(r(308));zn=d,ra.dependencies={lanes:0,firstContext:d}}else zn=zn.next=d;return f}var An=null;function Sa(d){An===null?An=[d]:An.push(d)}function _n(d,f,g,b){var E=f.interleaved;return E===null?(g.next=g,Sa(f)):(g.next=E.next,E.next=g),f.interleaved=g,En(d,b)}function En(d,f){d.lanes|=f;var g=d.alternate;for(g!==null&&(g.lanes|=f),g=d,d=d.return;d!==null;)d.childLanes|=f,g=d.alternate,g!==null&&(g.childLanes|=f),g=d,d=d.return;return g.tag===3?g.stateNode:null}var Ps=!1;function fa(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ni(d,f){d=d.updateQueue,f.updateQueue===d&&(f.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,effects:d.effects})}function ys(d,f){return{eventTime:d,lane:f,tag:0,payload:null,callback:null,next:null}}function ws(d,f,g){var b=d.updateQueue;if(b===null)return null;if(b=b.shared,(sn&2)!==0){var E=b.pending;return E===null?f.next=f:(f.next=E.next,E.next=f),b.pending=f,En(d,g)}return E=b.interleaved,E===null?(f.next=f,Sa(b)):(f.next=E.next,E.next=f),b.interleaved=f,En(d,g)}function Aa(d,f,g){if(f=f.updateQueue,f!==null&&(f=f.shared,(g&4194240)!==0)){var b=f.lanes;b&=d.pendingLanes,g|=b,f.lanes=g,cd(d,g)}}function kn(d,f){var g=d.updateQueue,b=d.alternate;if(b!==null&&(b=b.updateQueue,g===b)){var E=null,D=null;if(g=g.firstBaseUpdate,g!==null){do{var te={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};D===null?E=D=te:D=D.next=te,g=g.next}while(g!==null);D===null?E=D=f:D=D.next=f}else E=D=f;g={baseState:b.baseState,firstBaseUpdate:E,lastBaseUpdate:D,shared:b.shared,effects:b.effects},d.updateQueue=g;return}d=g.lastBaseUpdate,d===null?g.firstBaseUpdate=f:d.next=f,g.lastBaseUpdate=f}function Ea(d,f,g,b){var E=d.updateQueue;Ps=!1;var D=E.firstBaseUpdate,te=E.lastBaseUpdate,ve=E.shared.pending;if(ve!==null){E.shared.pending=null;var _e=ve,$e=_e.next;_e.next=null,te===null?D=$e:te.next=$e,te=_e;var dt=d.alternate;dt!==null&&(dt=dt.updateQueue,ve=dt.lastBaseUpdate,ve!==te&&(ve===null?dt.firstBaseUpdate=$e:ve.next=$e,dt.lastBaseUpdate=_e))}if(D!==null){var ht=E.baseState;te=0,dt=$e=_e=null,ve=D;do{var lt=ve.lane,Dt=ve.eventTime;if((b&lt)===lt){dt!==null&&(dt=dt.next={eventTime:Dt,lane:0,tag:ve.tag,payload:ve.payload,callback:ve.callback,next:null});e:{var Ut=d,Gt=ve;switch(lt=f,Dt=g,Gt.tag){case 1:if(Ut=Gt.payload,typeof Ut=="function"){ht=Ut.call(Dt,ht,lt);break e}ht=Ut;break e;case 3:Ut.flags=Ut.flags&-65537|128;case 0:if(Ut=Gt.payload,lt=typeof Ut=="function"?Ut.call(Dt,ht,lt):Ut,lt==null)break e;ht=oe({},ht,lt);break e;case 2:Ps=!0}}ve.callback!==null&&ve.lane!==0&&(d.flags|=64,lt=E.effects,lt===null?E.effects=[ve]:lt.push(ve))}else Dt={eventTime:Dt,lane:lt,tag:ve.tag,payload:ve.payload,callback:ve.callback,next:null},dt===null?($e=dt=Dt,_e=ht):dt=dt.next=Dt,te|=lt;if(ve=ve.next,ve===null){if(ve=E.shared.pending,ve===null)break;lt=ve,ve=lt.next,lt.next=null,E.lastBaseUpdate=lt,E.shared.pending=null}}while(!0);if(dt===null&&(_e=ht),E.baseState=_e,E.firstBaseUpdate=$e,E.lastBaseUpdate=dt,f=E.shared.interleaved,f!==null){E=f;do te|=E.lane,E=E.next;while(E!==f)}else D===null&&(E.shared.lanes=0);zu|=te,d.lanes=te,d.memoizedState=ht}}function Bi(d,f,g){if(d=f.effects,f.effects=null,d!==null)for(f=0;f<d.length;f++){var b=d[f],E=b.callback;if(E!==null){if(b.callback=null,b=g,typeof E!="function")throw Error(r(191,E));E.call(b)}}}var uo={},na=co(uo),bs=co(uo),Yl=co(uo);function hl(d){if(d===uo)throw Error(r(174));return d}function Ad(d,f){switch(jn(Yl,f),jn(bs,d),jn(na,uo),d=f.nodeType,d){case 9:case 11:f=(f=f.documentElement)?f.namespaceURI:qt(null,"");break;default:d=d===8?f.parentNode:f,f=d.namespaceURI||null,d=d.tagName,f=qt(f,d)}vn(na),jn(na,f)}function Lo(){vn(na),vn(bs),vn(Yl)}function cp(d){hl(Yl.current);var f=hl(na.current),g=qt(f,d.type);f!==g&&(jn(bs,d),jn(na,g))}function Em(d){bs.current===d&&(vn(na),vn(bs))}var Un=co(0);function ho(d){for(var f=d;f!==null;){if(f.tag===13){var g=f.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||g.data==="$!"))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===d)break;for(;f.sibling===null;){if(f.return===null||f.return===d)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var km=[];function Pm(){for(var d=0;d<km.length;d++)km[d]._workInProgressVersionPrimary=null;km.length=0}var Vh=P.ReactCurrentDispatcher,zh=P.ReactCurrentBatchConfig,Fo=0,Hn=null,Ts=null,Ns=null,Ed=!1,fl=!1,kd=0,hg=0;function Vs(){throw Error(r(321))}function qh(d,f){if(f===null)return!1;for(var g=0;g<f.length&&g<d.length;g++)if(!is(d[g],f[g]))return!1;return!0}function Uu(d,f,g,b,E,D){if(Fo=D,Hn=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,Vh.current=d===null||d.memoizedState===null?eP:tP,d=g(b,E),fl){D=0;do{if(fl=!1,kd=0,25<=D)throw Error(r(301));D+=1,Ns=Ts=null,f.updateQueue=null,Vh.current=rP,d=g(b,E)}while(fl)}if(Vh.current=mp,f=Ts!==null&&Ts.next!==null,Fo=0,Ns=Ts=Hn=null,Ed=!1,f)throw Error(r(300));return d}function Mo(){var d=kd!==0;return kd=0,d}function fo(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ns===null?Hn.memoizedState=Ns=d:Ns=Ns.next=d,Ns}function yi(){if(Ts===null){var d=Hn.alternate;d=d!==null?d.memoizedState:null}else d=Ts.next;var f=Ns===null?Hn.memoizedState:Ns.next;if(f!==null)Ns=f,Ts=d;else{if(d===null)throw Error(r(310));Ts=d,d={memoizedState:Ts.memoizedState,baseState:Ts.baseState,baseQueue:Ts.baseQueue,queue:Ts.queue,next:null},Ns===null?Hn.memoizedState=Ns=d:Ns=Ns.next=d}return Ns}function $u(d,f){return typeof f=="function"?f(d):f}function Hh(d){var f=yi(),g=f.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=d;var b=Ts,E=b.baseQueue,D=g.pending;if(D!==null){if(E!==null){var te=E.next;E.next=D.next,D.next=te}b.baseQueue=E=D,g.pending=null}if(E!==null){D=E.next,b=b.baseState;var ve=te=null,_e=null,$e=D;do{var dt=$e.lane;if((Fo&dt)===dt)_e!==null&&(_e=_e.next={lane:0,action:$e.action,hasEagerState:$e.hasEagerState,eagerState:$e.eagerState,next:null}),b=$e.hasEagerState?$e.eagerState:d(b,$e.action);else{var ht={lane:dt,action:$e.action,hasEagerState:$e.hasEagerState,eagerState:$e.eagerState,next:null};_e===null?(ve=_e=ht,te=b):_e=_e.next=ht,Hn.lanes|=dt,zu|=dt}$e=$e.next}while($e!==null&&$e!==D);_e===null?te=b:_e.next=ve,is(b,f.memoizedState)||(Ui=!0),f.memoizedState=b,f.baseState=te,f.baseQueue=_e,g.lastRenderedState=b}if(d=g.interleaved,d!==null){E=d;do D=E.lane,Hn.lanes|=D,zu|=D,E=E.next;while(E!==d)}else E===null&&(g.lanes=0);return[f.memoizedState,g.dispatch]}function Xl(d){var f=yi(),g=f.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=d;var b=g.dispatch,E=g.pending,D=f.memoizedState;if(E!==null){g.pending=null;var te=E=E.next;do D=d(D,te.action),te=te.next;while(te!==E);is(D,f.memoizedState)||(Ui=!0),f.memoizedState=D,f.baseQueue===null&&(f.baseState=D),g.lastRenderedState=D}return[D,b]}function dp(){}function Tm(d,f){var g=Hn,b=yi(),E=f(),D=!is(b.memoizedState,E);if(D&&(b.memoizedState=E,Ui=!0),b=b.queue,Kh(hp.bind(null,g,b,d),[d]),b.getSnapshot!==f||D||Ns!==null&&Ns.memoizedState.tag&1){if(g.flags|=2048,wi(9,Im.bind(null,g,b,E,f),void 0,null),ka===null)throw Error(r(349));(Fo&30)!==0||up(g,f,E)}return E}function up(d,f,g){d.flags|=16384,d={getSnapshot:f,value:g},f=Hn.updateQueue,f===null?(f={lastEffect:null,stores:null},Hn.updateQueue=f,f.stores=[d]):(g=f.stores,g===null?f.stores=[d]:g.push(d))}function Im(d,f,g,b){f.value=g,f.getSnapshot=b,Pd(f)&&Wh(d)}function hp(d,f,g){return g(function(){Pd(f)&&Wh(d)})}function Pd(d){var f=d.getSnapshot;d=d.value;try{var g=f();return!is(d,g)}catch{return!0}}function Wh(d){var f=En(d,1);f!==null&&vl(f,d,1,-1)}function Vu(d){var f=fo();return typeof d=="function"&&(d=d()),f.memoizedState=f.baseState=d,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$u,lastRenderedState:d},f.queue=d,d=d.dispatch=Q7.bind(null,Hn,d),[f.memoizedState,d]}function wi(d,f,g,b){return d={tag:d,create:f,destroy:g,deps:b,next:null},f=Hn.updateQueue,f===null?(f={lastEffect:null,stores:null},Hn.updateQueue=f,f.lastEffect=d.next=d):(g=f.lastEffect,g===null?f.lastEffect=d.next=d:(b=g.next,g.next=d,d.next=b,f.lastEffect=d)),d}function ml(){return yi().memoizedState}function mo(d,f,g,b){var E=fo();Hn.flags|=d,E.memoizedState=wi(1|f,g,void 0,b===void 0?null:b)}function $c(d,f,g,b){var E=yi();b=b===void 0?null:b;var D=void 0;if(Ts!==null){var te=Ts.memoizedState;if(D=te.destroy,b!==null&&qh(b,te.deps)){E.memoizedState=wi(f,g,D,b);return}}Hn.flags|=d,E.memoizedState=wi(1|f,g,D,b)}function Gh(d,f){return mo(8390656,8,d,f)}function Kh(d,f){return $c(2048,8,d,f)}function fp(d,f){return $c(4,2,d,f)}function Yh(d,f){return $c(4,4,d,f)}function Xh(d,f){if(typeof f=="function")return d=d(),f(d),function(){f(null)};if(f!=null)return d=d(),f.current=d,function(){f.current=null}}function r5(d,f,g){return g=g!=null?g.concat([d]):null,$c(4,4,Xh.bind(null,f,d),g)}function fg(){}function n5(d,f){var g=yi();f=f===void 0?null:f;var b=g.memoizedState;return b!==null&&f!==null&&qh(f,b[1])?b[0]:(g.memoizedState=[d,f],d)}function s5(d,f){var g=yi();f=f===void 0?null:f;var b=g.memoizedState;return b!==null&&f!==null&&qh(f,b[1])?b[0]:(d=d(),g.memoizedState=[d,f],d)}function a5(d,f,g){return(Fo&21)===0?(d.baseState&&(d.baseState=!1,Ui=!0),d.memoizedState=g):(is(g,f)||(g=Eh(),Hn.lanes|=g,zu|=g,d.baseState=!0),f)}function Z7(d,f){var g=Zr;Zr=g!==0&&4>g?g:4,d(!0);var b=zh.transition;zh.transition={};try{d(!1),f()}finally{Zr=g,zh.transition=b}}function i5(){return yi().memoizedState}function J7(d,f,g){var b=Od(d);if(g={lane:b,action:g,hasEagerState:!1,eagerState:null,next:null},o5(d))l5(f,g);else if(g=_n(d,f,g,b),g!==null){var E=Ni();vl(g,d,b,E),c5(g,f,b)}}function Q7(d,f,g){var b=Od(d),E={lane:b,action:g,hasEagerState:!1,eagerState:null,next:null};if(o5(d))l5(f,E);else{var D=d.alternate;if(d.lanes===0&&(D===null||D.lanes===0)&&(D=f.lastRenderedReducer,D!==null))try{var te=f.lastRenderedState,ve=D(te,g);if(E.hasEagerState=!0,E.eagerState=ve,is(ve,te)){var _e=f.interleaved;_e===null?(E.next=E,Sa(f)):(E.next=_e.next,_e.next=E),f.interleaved=E;return}}catch{}finally{}g=_n(d,f,E,b),g!==null&&(E=Ni(),vl(g,d,b,E),c5(g,f,b))}}function o5(d){var f=d.alternate;return d===Hn||f!==null&&f===Hn}function l5(d,f){fl=Ed=!0;var g=d.pending;g===null?f.next=f:(f.next=g.next,g.next=f),d.pending=f}function c5(d,f,g){if((g&4194240)!==0){var b=f.lanes;b&=d.pendingLanes,g|=b,f.lanes=g,cd(d,g)}}var mp={readContext:ds,useCallback:Vs,useContext:Vs,useEffect:Vs,useImperativeHandle:Vs,useInsertionEffect:Vs,useLayoutEffect:Vs,useMemo:Vs,useReducer:Vs,useRef:Vs,useState:Vs,useDebugValue:Vs,useDeferredValue:Vs,useTransition:Vs,useMutableSource:Vs,useSyncExternalStore:Vs,useId:Vs,unstable_isNewReconciler:!1},eP={readContext:ds,useCallback:function(d,f){return fo().memoizedState=[d,f===void 0?null:f],d},useContext:ds,useEffect:Gh,useImperativeHandle:function(d,f,g){return g=g!=null?g.concat([d]):null,mo(4194308,4,Xh.bind(null,f,d),g)},useLayoutEffect:function(d,f){return mo(4194308,4,d,f)},useInsertionEffect:function(d,f){return mo(4,2,d,f)},useMemo:function(d,f){var g=fo();return f=f===void 0?null:f,d=d(),g.memoizedState=[d,f],d},useReducer:function(d,f,g){var b=fo();return f=g!==void 0?g(f):f,b.memoizedState=b.baseState=f,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:f},b.queue=d,d=d.dispatch=J7.bind(null,Hn,d),[b.memoizedState,d]},useRef:function(d){var f=fo();return d={current:d},f.memoizedState=d},useState:Vu,useDebugValue:fg,useDeferredValue:function(d){return fo().memoizedState=d},useTransition:function(){var d=Vu(!1),f=d[0];return d=Z7.bind(null,d[1]),fo().memoizedState=d,[f,d]},useMutableSource:function(){},useSyncExternalStore:function(d,f,g){var b=Hn,E=fo();if(Je){if(g===void 0)throw Error(r(407));g=g()}else{if(g=f(),ka===null)throw Error(r(349));(Fo&30)!==0||up(b,f,g)}E.memoizedState=g;var D={value:g,getSnapshot:f};return E.queue=D,Gh(hp.bind(null,b,D,d),[d]),b.flags|=2048,wi(9,Im.bind(null,b,D,g,f),void 0,null),g},useId:function(){var d=fo(),f=ka.identifierPrefix;if(Je){var g=me,b=Ie;g=(b&~(1<<32-Qs(b)-1)).toString(32)+g,f=":"+f+"R"+g,g=kd++,0<g&&(f+="H"+g.toString(32)),f+=":"}else g=hg++,f=":"+f+"r"+g.toString(32)+":";return d.memoizedState=f},unstable_isNewReconciler:!1},tP={readContext:ds,useCallback:n5,useContext:ds,useEffect:Kh,useImperativeHandle:r5,useInsertionEffect:fp,useLayoutEffect:Yh,useMemo:s5,useReducer:Hh,useRef:ml,useState:function(){return Hh($u)},useDebugValue:fg,useDeferredValue:function(d){var f=yi();return a5(f,Ts.memoizedState,d)},useTransition:function(){var d=Hh($u)[0],f=yi().memoizedState;return[d,f]},useMutableSource:dp,useSyncExternalStore:Tm,useId:i5,unstable_isNewReconciler:!1},rP={readContext:ds,useCallback:n5,useContext:ds,useEffect:Kh,useImperativeHandle:r5,useInsertionEffect:fp,useLayoutEffect:Yh,useMemo:s5,useReducer:Xl,useRef:ml,useState:function(){return Xl($u)},useDebugValue:fg,useDeferredValue:function(d){var f=yi();return Ts===null?f.memoizedState=d:a5(f,Ts.memoizedState,d)},useTransition:function(){var d=Xl($u)[0],f=yi().memoizedState;return[d,f]},useMutableSource:dp,useSyncExternalStore:Tm,useId:i5,unstable_isNewReconciler:!1};function pl(d,f){if(d&&d.defaultProps){f=oe({},f),d=d.defaultProps;for(var g in d)f[g]===void 0&&(f[g]=d[g]);return f}return f}function mg(d,f,g,b){f=d.memoizedState,g=g(b,f),g=g==null?f:oe({},f,g),d.memoizedState=g,d.lanes===0&&(d.updateQueue.baseState=g)}var pp={isMounted:function(d){return(d=d._reactInternals)?Xn(d)===d:!1},enqueueSetState:function(d,f,g){d=d._reactInternals;var b=Ni(),E=Od(d),D=ys(b,E);D.payload=f,g!=null&&(D.callback=g),f=ws(d,D,E),f!==null&&(vl(f,d,E,b),Aa(f,d,E))},enqueueReplaceState:function(d,f,g){d=d._reactInternals;var b=Ni(),E=Od(d),D=ys(b,E);D.tag=1,D.payload=f,g!=null&&(D.callback=g),f=ws(d,D,E),f!==null&&(vl(f,d,E,b),Aa(f,d,E))},enqueueForceUpdate:function(d,f){d=d._reactInternals;var g=Ni(),b=Od(d),E=ys(g,b);E.tag=2,f!=null&&(E.callback=f),f=ws(d,E,b),f!==null&&(vl(f,d,b,g),Aa(f,d,b))}};function d5(d,f,g,b,E,D,te){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(b,D,te):f.prototype&&f.prototype.isPureReactComponent?!Ja(g,b)||!Ja(E,D):!0}function u5(d,f,g){var b=!1,E=Kl,D=f.contextType;return typeof D=="object"&&D!==null?D=ds(D):(E=ri(f)?Bc:ha.current,b=f.contextTypes,D=(b=b!=null)?Sd(d,E):Kl),f=new f(g,D),d.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=pp,d.stateNode=f,f._reactInternals=d,b&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=E,d.__reactInternalMemoizedMaskedChildContext=D),f}function h5(d,f,g,b){d=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(g,b),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(g,b),f.state!==d&&pp.enqueueReplaceState(f,f.state,null)}function pg(d,f,g,b){var E=d.stateNode;E.props=g,E.state=d.memoizedState,E.refs={},fa(d);var D=f.contextType;typeof D=="object"&&D!==null?E.context=ds(D):(D=ri(f)?Bc:ha.current,E.context=Sd(d,D)),E.state=d.memoizedState,D=f.getDerivedStateFromProps,typeof D=="function"&&(mg(d,f,D,g),E.state=d.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(f=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),f!==E.state&&pp.enqueueReplaceState(E,E.state,null),Ea(d,g,E,b),E.state=d.memoizedState),typeof E.componentDidMount=="function"&&(d.flags|=4194308)}function Zh(d,f){try{var g="",b=f;do g+=W(b),b=b.return;while(b);var E=g}catch(D){E=`
Error generating stack: `+D.message+`
`+D.stack}return{value:d,source:f,stack:E,digest:null}}function xg(d,f,g){return{value:d,source:null,stack:g??null,digest:f??null}}function gg(d,f){try{console.error(f.value)}catch(g){setTimeout(function(){throw g})}}var nP=typeof WeakMap=="function"?WeakMap:Map;function f5(d,f,g){g=ys(-1,g),g.tag=3,g.payload={element:null};var b=f.value;return g.callback=function(){Np||(Np=!0,Ig=b),gg(d,f)},g}function m5(d,f,g){g=ys(-1,g),g.tag=3;var b=d.type.getDerivedStateFromError;if(typeof b=="function"){var E=f.value;g.payload=function(){return b(E)},g.callback=function(){gg(d,f)}}var D=d.stateNode;return D!==null&&typeof D.componentDidCatch=="function"&&(g.callback=function(){gg(d,f),typeof b!="function"&&(Id===null?Id=new Set([this]):Id.add(this));var te=f.stack;this.componentDidCatch(f.value,{componentStack:te!==null?te:""})}),g}function p5(d,f,g){var b=d.pingCache;if(b===null){b=d.pingCache=new nP;var E=new Set;b.set(f,E)}else E=b.get(f),E===void 0&&(E=new Set,b.set(f,E));E.has(g)||(E.add(g),d=gP.bind(null,d,f,g),f.then(d,d))}function x5(d){do{var f;if((f=d.tag===13)&&(f=d.memoizedState,f=f!==null?f.dehydrated!==null:!0),f)return d;d=d.return}while(d!==null);return null}function g5(d,f,g,b,E){return(d.mode&1)===0?(d===f?d.flags|=65536:(d.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:(f=ys(-1,1),f.tag=2,ws(g,f,1))),g.lanes|=1),d):(d.flags|=65536,d.lanes=E,d)}var sP=P.ReactCurrentOwner,Ui=!1;function bi(d,f,g,b){f.child=d===null?es(f,null,g,b):ks(f,d.child,g,b)}function v5(d,f,g,b,E){g=g.render;var D=f.ref;return cs(f,E),b=Uu(d,f,g,b,D,E),g=Mo(),d!==null&&!Ui?(f.updateQueue=d.updateQueue,f.flags&=-2053,d.lanes&=~E,Vc(d,f,E)):(Je&&g&&Ge(f),f.flags|=1,bi(d,f,b,E),f.child)}function y5(d,f,g,b,E){if(d===null){var D=g.type;return typeof D=="function"&&!Bg(D)&&D.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(f.tag=15,f.type=D,w5(d,f,D,b,E)):(d=Ep(g.type,null,b,f,f.mode,E),d.ref=f.ref,d.return=f,f.child=d)}if(D=d.child,(d.lanes&E)===0){var te=D.memoizedProps;if(g=g.compare,g=g!==null?g:Ja,g(te,b)&&d.ref===f.ref)return Vc(d,f,E)}return f.flags|=1,d=Ld(D,b),d.ref=f.ref,d.return=f,f.child=d}function w5(d,f,g,b,E){if(d!==null){var D=d.memoizedProps;if(Ja(D,b)&&d.ref===f.ref)if(Ui=!1,f.pendingProps=b=D,(d.lanes&E)!==0)(d.flags&131072)!==0&&(Ui=!0);else return f.lanes=d.lanes,Vc(d,f,E)}return vg(d,f,g,b,E)}function b5(d,f,g){var b=f.pendingProps,E=b.children,D=d!==null?d.memoizedState:null;if(b.mode==="hidden")if((f.mode&1)===0)f.memoizedState={baseLanes:0,cachePool:null,transitions:null},jn(Qh,po),po|=g;else{if((g&1073741824)===0)return d=D!==null?D.baseLanes|g:g,f.lanes=f.childLanes=1073741824,f.memoizedState={baseLanes:d,cachePool:null,transitions:null},f.updateQueue=null,jn(Qh,po),po|=d,null;f.memoizedState={baseLanes:0,cachePool:null,transitions:null},b=D!==null?D.baseLanes:g,jn(Qh,po),po|=b}else D!==null?(b=D.baseLanes|g,f.memoizedState=null):b=g,jn(Qh,po),po|=b;return bi(d,f,E,g),f.child}function N5(d,f){var g=f.ref;(d===null&&g!==null||d!==null&&d.ref!==g)&&(f.flags|=512,f.flags|=2097152)}function vg(d,f,g,b,E){var D=ri(g)?Bc:ha.current;return D=Sd(f,D),cs(f,E),g=Uu(d,f,g,b,D,E),b=Mo(),d!==null&&!Ui?(f.updateQueue=d.updateQueue,f.flags&=-2053,d.lanes&=~E,Vc(d,f,E)):(Je&&b&&Ge(f),f.flags|=1,bi(d,f,g,E),f.child)}function j5(d,f,g,b,E){if(ri(g)){var D=!0;Uc(f)}else D=!1;if(cs(f,E),f.stateNode===null)gp(d,f),u5(f,g,b),pg(f,g,b,E),b=!0;else if(d===null){var te=f.stateNode,ve=f.memoizedProps;te.props=ve;var _e=te.context,$e=g.contextType;typeof $e=="object"&&$e!==null?$e=ds($e):($e=ri(g)?Bc:ha.current,$e=Sd(f,$e));var dt=g.getDerivedStateFromProps,ht=typeof dt=="function"||typeof te.getSnapshotBeforeUpdate=="function";ht||typeof te.UNSAFE_componentWillReceiveProps!="function"&&typeof te.componentWillReceiveProps!="function"||(ve!==b||_e!==$e)&&h5(f,te,b,$e),Ps=!1;var lt=f.memoizedState;te.state=lt,Ea(f,b,te,E),_e=f.memoizedState,ve!==b||lt!==_e||ti.current||Ps?(typeof dt=="function"&&(mg(f,g,dt,b),_e=f.memoizedState),(ve=Ps||d5(f,g,ve,b,lt,_e,$e))?(ht||typeof te.UNSAFE_componentWillMount!="function"&&typeof te.componentWillMount!="function"||(typeof te.componentWillMount=="function"&&te.componentWillMount(),typeof te.UNSAFE_componentWillMount=="function"&&te.UNSAFE_componentWillMount()),typeof te.componentDidMount=="function"&&(f.flags|=4194308)):(typeof te.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=b,f.memoizedState=_e),te.props=b,te.state=_e,te.context=$e,b=ve):(typeof te.componentDidMount=="function"&&(f.flags|=4194308),b=!1)}else{te=f.stateNode,ni(d,f),ve=f.memoizedProps,$e=f.type===f.elementType?ve:pl(f.type,ve),te.props=$e,ht=f.pendingProps,lt=te.context,_e=g.contextType,typeof _e=="object"&&_e!==null?_e=ds(_e):(_e=ri(g)?Bc:ha.current,_e=Sd(f,_e));var Dt=g.getDerivedStateFromProps;(dt=typeof Dt=="function"||typeof te.getSnapshotBeforeUpdate=="function")||typeof te.UNSAFE_componentWillReceiveProps!="function"&&typeof te.componentWillReceiveProps!="function"||(ve!==ht||lt!==_e)&&h5(f,te,b,_e),Ps=!1,lt=f.memoizedState,te.state=lt,Ea(f,b,te,E);var Ut=f.memoizedState;ve!==ht||lt!==Ut||ti.current||Ps?(typeof Dt=="function"&&(mg(f,g,Dt,b),Ut=f.memoizedState),($e=Ps||d5(f,g,$e,b,lt,Ut,_e)||!1)?(dt||typeof te.UNSAFE_componentWillUpdate!="function"&&typeof te.componentWillUpdate!="function"||(typeof te.componentWillUpdate=="function"&&te.componentWillUpdate(b,Ut,_e),typeof te.UNSAFE_componentWillUpdate=="function"&&te.UNSAFE_componentWillUpdate(b,Ut,_e)),typeof te.componentDidUpdate=="function"&&(f.flags|=4),typeof te.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof te.componentDidUpdate!="function"||ve===d.memoizedProps&&lt===d.memoizedState||(f.flags|=4),typeof te.getSnapshotBeforeUpdate!="function"||ve===d.memoizedProps&&lt===d.memoizedState||(f.flags|=1024),f.memoizedProps=b,f.memoizedState=Ut),te.props=b,te.state=Ut,te.context=_e,b=$e):(typeof te.componentDidUpdate!="function"||ve===d.memoizedProps&&lt===d.memoizedState||(f.flags|=4),typeof te.getSnapshotBeforeUpdate!="function"||ve===d.memoizedProps&&lt===d.memoizedState||(f.flags|=1024),b=!1)}return yg(d,f,g,b,D,E)}function yg(d,f,g,b,E,D){N5(d,f);var te=(f.flags&128)!==0;if(!b&&!te)return E&&lp(f,g,!1),Vc(d,f,D);b=f.stateNode,sP.current=f;var ve=te&&typeof g.getDerivedStateFromError!="function"?null:b.render();return f.flags|=1,d!==null&&te?(f.child=ks(f,d.child,null,D),f.child=ks(f,null,ve,D)):bi(d,f,ve,D),f.memoizedState=b.state,E&&lp(f,g,!0),f.child}function _5(d){var f=d.stateNode;f.pendingContext?op(d,f.pendingContext,f.pendingContext!==f.context):f.context&&op(d,f.context,!1),Ad(d,f.containerInfo)}function C5(d,f,g,b,E){return Rt(),Nt(E),f.flags|=256,bi(d,f,g,b),f.child}var wg={dehydrated:null,treeContext:null,retryLane:0};function bg(d){return{baseLanes:d,cachePool:null,transitions:null}}function S5(d,f,g){var b=f.pendingProps,E=Un.current,D=!1,te=(f.flags&128)!==0,ve;if((ve=te)||(ve=d!==null&&d.memoizedState===null?!1:(E&2)!==0),ve?(D=!0,f.flags&=-129):(d===null||d.memoizedState!==null)&&(E|=1),jn(Un,E&1),d===null)return Mt(f),d=f.memoizedState,d!==null&&(d=d.dehydrated,d!==null)?((f.mode&1)===0?f.lanes=1:d.data==="$!"?f.lanes=8:f.lanes=1073741824,null):(te=b.children,d=b.fallback,D?(b=f.mode,D=f.child,te={mode:"hidden",children:te},(b&1)===0&&D!==null?(D.childLanes=0,D.pendingProps=te):D=kp(te,b,0,null),d=Gu(d,b,g,null),D.return=f,d.return=f,D.sibling=d,f.child=D,f.child.memoizedState=bg(g),f.memoizedState=wg,d):Ng(f,te));if(E=d.memoizedState,E!==null&&(ve=E.dehydrated,ve!==null))return aP(d,f,te,b,ve,E,g);if(D){D=b.fallback,te=f.mode,E=d.child,ve=E.sibling;var _e={mode:"hidden",children:b.children};return(te&1)===0&&f.child!==E?(b=f.child,b.childLanes=0,b.pendingProps=_e,f.deletions=null):(b=Ld(E,_e),b.subtreeFlags=E.subtreeFlags&14680064),ve!==null?D=Ld(ve,D):(D=Gu(D,te,g,null),D.flags|=2),D.return=f,b.return=f,b.sibling=D,f.child=b,b=D,D=f.child,te=d.child.memoizedState,te=te===null?bg(g):{baseLanes:te.baseLanes|g,cachePool:null,transitions:te.transitions},D.memoizedState=te,D.childLanes=d.childLanes&~g,f.memoizedState=wg,b}return D=d.child,d=D.sibling,b=Ld(D,{mode:"visible",children:b.children}),(f.mode&1)===0&&(b.lanes=g),b.return=f,b.sibling=null,d!==null&&(g=f.deletions,g===null?(f.deletions=[d],f.flags|=16):g.push(d)),f.child=b,f.memoizedState=null,b}function Ng(d,f){return f=kp({mode:"visible",children:f},d.mode,0,null),f.return=d,d.child=f}function xp(d,f,g,b){return b!==null&&Nt(b),ks(f,d.child,null,g),d=Ng(f,f.pendingProps.children),d.flags|=2,f.memoizedState=null,d}function aP(d,f,g,b,E,D,te){if(g)return f.flags&256?(f.flags&=-257,b=xg(Error(r(422))),xp(d,f,te,b)):f.memoizedState!==null?(f.child=d.child,f.flags|=128,null):(D=b.fallback,E=f.mode,b=kp({mode:"visible",children:b.children},E,0,null),D=Gu(D,E,te,null),D.flags|=2,b.return=f,D.return=f,b.sibling=D,f.child=b,(f.mode&1)!==0&&ks(f,d.child,null,te),f.child.memoizedState=bg(te),f.memoizedState=wg,D);if((f.mode&1)===0)return xp(d,f,te,null);if(E.data==="$!"){if(b=E.nextSibling&&E.nextSibling.dataset,b)var ve=b.dgst;return b=ve,D=Error(r(419)),b=xg(D,b,void 0),xp(d,f,te,b)}if(ve=(te&d.childLanes)!==0,Ui||ve){if(b=ka,b!==null){switch(te&-te){case 4:E=2;break;case 16:E=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:E=32;break;case 536870912:E=268435456;break;default:E=0}E=(E&(b.suspendedLanes|te))!==0?0:E,E!==0&&E!==D.retryLane&&(D.retryLane=E,En(d,E),vl(b,d,E,-1))}return Mg(),b=xg(Error(r(421))),xp(d,f,te,b)}return E.data==="$?"?(f.flags|=128,f.child=d.child,f=vP.bind(null,d),E._reactRetry=f,null):(d=D.treeContext,He=Ba(E.nextSibling),qe=f,Je=!0,rt=null,d!==null&&(ce[he++]=Ie,ce[he++]=me,ce[he++]=je,Ie=d.id,me=d.overflow,je=f),f=Ng(f,b.children),f.flags|=4096,f)}function A5(d,f,g){d.lanes|=f;var b=d.alternate;b!==null&&(b.lanes|=f),nn(d.return,f,g)}function jg(d,f,g,b,E){var D=d.memoizedState;D===null?d.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:b,tail:g,tailMode:E}:(D.isBackwards=f,D.rendering=null,D.renderingStartTime=0,D.last=b,D.tail=g,D.tailMode=E)}function E5(d,f,g){var b=f.pendingProps,E=b.revealOrder,D=b.tail;if(bi(d,f,b.children,g),b=Un.current,(b&2)!==0)b=b&1|2,f.flags|=128;else{if(d!==null&&(d.flags&128)!==0)e:for(d=f.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&A5(d,g,f);else if(d.tag===19)A5(d,g,f);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===f)break e;for(;d.sibling===null;){if(d.return===null||d.return===f)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}b&=1}if(jn(Un,b),(f.mode&1)===0)f.memoizedState=null;else switch(E){case"forwards":for(g=f.child,E=null;g!==null;)d=g.alternate,d!==null&&ho(d)===null&&(E=g),g=g.sibling;g=E,g===null?(E=f.child,f.child=null):(E=g.sibling,g.sibling=null),jg(f,!1,E,g,D);break;case"backwards":for(g=null,E=f.child,f.child=null;E!==null;){if(d=E.alternate,d!==null&&ho(d)===null){f.child=E;break}d=E.sibling,E.sibling=g,g=E,E=d}jg(f,!0,g,null,D);break;case"together":jg(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function gp(d,f){(f.mode&1)===0&&d!==null&&(d.alternate=null,f.alternate=null,f.flags|=2)}function Vc(d,f,g){if(d!==null&&(f.dependencies=d.dependencies),zu|=f.lanes,(g&f.childLanes)===0)return null;if(d!==null&&f.child!==d.child)throw Error(r(153));if(f.child!==null){for(d=f.child,g=Ld(d,d.pendingProps),f.child=g,g.return=f;d.sibling!==null;)d=d.sibling,g=g.sibling=Ld(d,d.pendingProps),g.return=f;g.sibling=null}return f.child}function iP(d,f,g){switch(f.tag){case 3:_5(f),Rt();break;case 5:cp(f);break;case 1:ri(f.type)&&Uc(f);break;case 4:Ad(f,f.stateNode.containerInfo);break;case 10:var b=f.type._context,E=f.memoizedProps.value;jn($s,b._currentValue),b._currentValue=E;break;case 13:if(b=f.memoizedState,b!==null)return b.dehydrated!==null?(jn(Un,Un.current&1),f.flags|=128,null):(g&f.child.childLanes)!==0?S5(d,f,g):(jn(Un,Un.current&1),d=Vc(d,f,g),d!==null?d.sibling:null);jn(Un,Un.current&1);break;case 19:if(b=(g&f.childLanes)!==0,(d.flags&128)!==0){if(b)return E5(d,f,g);f.flags|=128}if(E=f.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),jn(Un,Un.current),b)break;return null;case 22:case 23:return f.lanes=0,b5(d,f,g)}return Vc(d,f,g)}var k5,_g,P5,T5;k5=function(d,f){for(var g=f.child;g!==null;){if(g.tag===5||g.tag===6)d.appendChild(g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===f)break;for(;g.sibling===null;){if(g.return===null||g.return===f)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},_g=function(){},P5=function(d,f,g,b){var E=d.memoizedProps;if(E!==b){d=f.stateNode,hl(na.current);var D=null;switch(g){case"input":E=be(d,E),b=be(d,b),D=[];break;case"select":E=oe({},E,{value:void 0}),b=oe({},b,{value:void 0}),D=[];break;case"textarea":E=vt(d,E),b=vt(d,b),D=[];break;default:typeof E.onClick!="function"&&typeof b.onClick=="function"&&(d.onclick=jd)}Me(g,b);var te;g=null;for($e in E)if(!b.hasOwnProperty($e)&&E.hasOwnProperty($e)&&E[$e]!=null)if($e==="style"){var ve=E[$e];for(te in ve)ve.hasOwnProperty(te)&&(g||(g={}),g[te]="")}else $e!=="dangerouslySetInnerHTML"&&$e!=="children"&&$e!=="suppressContentEditableWarning"&&$e!=="suppressHydrationWarning"&&$e!=="autoFocus"&&(a.hasOwnProperty($e)?D||(D=[]):(D=D||[]).push($e,null));for($e in b){var _e=b[$e];if(ve=E?.[$e],b.hasOwnProperty($e)&&_e!==ve&&(_e!=null||ve!=null))if($e==="style")if(ve){for(te in ve)!ve.hasOwnProperty(te)||_e&&_e.hasOwnProperty(te)||(g||(g={}),g[te]="");for(te in _e)_e.hasOwnProperty(te)&&ve[te]!==_e[te]&&(g||(g={}),g[te]=_e[te])}else g||(D||(D=[]),D.push($e,g)),g=_e;else $e==="dangerouslySetInnerHTML"?(_e=_e?_e.__html:void 0,ve=ve?ve.__html:void 0,_e!=null&&ve!==_e&&(D=D||[]).push($e,_e)):$e==="children"?typeof _e!="string"&&typeof _e!="number"||(D=D||[]).push($e,""+_e):$e!=="suppressContentEditableWarning"&&$e!=="suppressHydrationWarning"&&(a.hasOwnProperty($e)?(_e!=null&&$e==="onScroll"&&Sn("scroll",d),D||ve===_e||(D=[])):(D=D||[]).push($e,_e))}g&&(D=D||[]).push("style",g);var $e=D;(f.updateQueue=$e)&&(f.flags|=4)}},T5=function(d,f,g,b){g!==b&&(f.flags|=4)};function Dm(d,f){if(!Je)switch(d.tailMode){case"hidden":f=d.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?d.tail=null:g.sibling=null;break;case"collapsed":g=d.tail;for(var b=null;g!==null;)g.alternate!==null&&(b=g),g=g.sibling;b===null?f||d.tail===null?d.tail=null:d.tail.sibling=null:b.sibling=null}}function si(d){var f=d.alternate!==null&&d.alternate.child===d.child,g=0,b=0;if(f)for(var E=d.child;E!==null;)g|=E.lanes|E.childLanes,b|=E.subtreeFlags&14680064,b|=E.flags&14680064,E.return=d,E=E.sibling;else for(E=d.child;E!==null;)g|=E.lanes|E.childLanes,b|=E.subtreeFlags,b|=E.flags,E.return=d,E=E.sibling;return d.subtreeFlags|=b,d.childLanes=g,f}function oP(d,f,g){var b=f.pendingProps;switch(Oe(f),f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return si(f),null;case 1:return ri(f.type)&&$h(),si(f),null;case 3:return b=f.stateNode,Lo(),vn(ti),vn(ha),Pm(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(d===null||d.child===null)&&(ls(f)?f.flags|=4:d===null||d.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,rt!==null&&(Rg(rt),rt=null))),_g(d,f),si(f),null;case 5:Em(f);var E=hl(Yl.current);if(g=f.type,d!==null&&f.stateNode!=null)P5(d,f,g,b,E),d.ref!==f.ref&&(f.flags|=512,f.flags|=2097152);else{if(!b){if(f.stateNode===null)throw Error(r(166));return si(f),null}if(d=hl(na.current),ls(f)){b=f.stateNode,g=f.type;var D=f.memoizedProps;switch(b[Ro]=f,b[_d]=D,d=(f.mode&1)!==0,g){case"dialog":Sn("cancel",b),Sn("close",b);break;case"iframe":case"object":case"embed":Sn("load",b);break;case"video":case"audio":for(E=0;E<Wl.length;E++)Sn(Wl[E],b);break;case"source":Sn("error",b);break;case"img":case"image":case"link":Sn("error",b),Sn("load",b);break;case"details":Sn("toggle",b);break;case"input":pe(b,D),Sn("invalid",b);break;case"select":b._wrapperState={wasMultiple:!!D.multiple},Sn("invalid",b);break;case"textarea":ct(b,D),Sn("invalid",b)}Me(g,D),E=null;for(var te in D)if(D.hasOwnProperty(te)){var ve=D[te];te==="children"?typeof ve=="string"?b.textContent!==ve&&(D.suppressHydrationWarning!==!0&&Uh(b.textContent,ve,d),E=["children",ve]):typeof ve=="number"&&b.textContent!==""+ve&&(D.suppressHydrationWarning!==!0&&Uh(b.textContent,ve,d),E=["children",""+ve]):a.hasOwnProperty(te)&&ve!=null&&te==="onScroll"&&Sn("scroll",b)}switch(g){case"input":Se(b),Be(b,D,!0);break;case"textarea":Se(b),ot(b);break;case"select":case"option":break;default:typeof D.onClick=="function"&&(b.onclick=jd)}b=E,f.updateQueue=b,b!==null&&(f.flags|=4)}else{te=E.nodeType===9?E:E.ownerDocument,d==="http://www.w3.org/1999/xhtml"&&(d=Ct(g)),d==="http://www.w3.org/1999/xhtml"?g==="script"?(d=te.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild)):typeof b.is=="string"?d=te.createElement(g,{is:b.is}):(d=te.createElement(g),g==="select"&&(te=d,b.multiple?te.multiple=!0:b.size&&(te.size=b.size))):d=te.createElementNS(d,g),d[Ro]=f,d[_d]=b,k5(d,f,!1,!1),f.stateNode=d;e:{switch(te=bt(g,b),g){case"dialog":Sn("cancel",d),Sn("close",d),E=b;break;case"iframe":case"object":case"embed":Sn("load",d),E=b;break;case"video":case"audio":for(E=0;E<Wl.length;E++)Sn(Wl[E],d);E=b;break;case"source":Sn("error",d),E=b;break;case"img":case"image":case"link":Sn("error",d),Sn("load",d),E=b;break;case"details":Sn("toggle",d),E=b;break;case"input":pe(d,b),E=be(d,b),Sn("invalid",d);break;case"option":E=b;break;case"select":d._wrapperState={wasMultiple:!!b.multiple},E=oe({},b,{value:void 0}),Sn("invalid",d);break;case"textarea":ct(d,b),E=vt(d,b),Sn("invalid",d);break;default:E=b}Me(g,E),ve=E;for(D in ve)if(ve.hasOwnProperty(D)){var _e=ve[D];D==="style"?xt(d,_e):D==="dangerouslySetInnerHTML"?(_e=_e?_e.__html:void 0,_e!=null&&Et(d,_e)):D==="children"?typeof _e=="string"?(g!=="textarea"||_e!=="")&&kt(d,_e):typeof _e=="number"&&kt(d,""+_e):D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&D!=="autoFocus"&&(a.hasOwnProperty(D)?_e!=null&&D==="onScroll"&&Sn("scroll",d):_e!=null&&k(d,D,_e,te))}switch(g){case"input":Se(d),Be(d,b,!1);break;case"textarea":Se(d),ot(d);break;case"option":b.value!=null&&d.setAttribute("value",""+ie(b.value));break;case"select":d.multiple=!!b.multiple,D=b.value,D!=null?Ve(d,!!b.multiple,D,!1):b.defaultValue!=null&&Ve(d,!!b.multiple,b.defaultValue,!0);break;default:typeof E.onClick=="function"&&(d.onclick=jd)}switch(g){case"button":case"input":case"select":case"textarea":b=!!b.autoFocus;break e;case"img":b=!0;break e;default:b=!1}}b&&(f.flags|=4)}f.ref!==null&&(f.flags|=512,f.flags|=2097152)}return si(f),null;case 6:if(d&&f.stateNode!=null)T5(d,f,d.memoizedProps,b);else{if(typeof b!="string"&&f.stateNode===null)throw Error(r(166));if(g=hl(Yl.current),hl(na.current),ls(f)){if(b=f.stateNode,g=f.memoizedProps,b[Ro]=f,(D=b.nodeValue!==g)&&(d=qe,d!==null))switch(d.tag){case 3:Uh(b.nodeValue,g,(d.mode&1)!==0);break;case 5:d.memoizedProps.suppressHydrationWarning!==!0&&Uh(b.nodeValue,g,(d.mode&1)!==0)}D&&(f.flags|=4)}else b=(g.nodeType===9?g:g.ownerDocument).createTextNode(b),b[Ro]=f,f.stateNode=b}return si(f),null;case 13:if(vn(Un),b=f.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(Je&&He!==null&&(f.mode&1)!==0&&(f.flags&128)===0)Dr(),Rt(),f.flags|=98560,D=!1;else if(D=ls(f),b!==null&&b.dehydrated!==null){if(d===null){if(!D)throw Error(r(318));if(D=f.memoizedState,D=D!==null?D.dehydrated:null,!D)throw Error(r(317));D[Ro]=f}else Rt(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;si(f),D=!1}else rt!==null&&(Rg(rt),rt=null),D=!0;if(!D)return f.flags&65536?f:null}return(f.flags&128)!==0?(f.lanes=g,f):(b=b!==null,b!==(d!==null&&d.memoizedState!==null)&&b&&(f.child.flags|=8192,(f.mode&1)!==0&&(d===null||(Un.current&1)!==0?ma===0&&(ma=3):Mg())),f.updateQueue!==null&&(f.flags|=4),si(f),null);case 4:return Lo(),_g(d,f),d===null&&Rc(f.stateNode.containerInfo),si(f),null;case 10:return qn(f.type._context),si(f),null;case 17:return ri(f.type)&&$h(),si(f),null;case 19:if(vn(Un),D=f.memoizedState,D===null)return si(f),null;if(b=(f.flags&128)!==0,te=D.rendering,te===null)if(b)Dm(D,!1);else{if(ma!==0||d!==null&&(d.flags&128)!==0)for(d=f.child;d!==null;){if(te=ho(d),te!==null){for(f.flags|=128,Dm(D,!1),b=te.updateQueue,b!==null&&(f.updateQueue=b,f.flags|=4),f.subtreeFlags=0,b=g,g=f.child;g!==null;)D=g,d=b,D.flags&=14680066,te=D.alternate,te===null?(D.childLanes=0,D.lanes=d,D.child=null,D.subtreeFlags=0,D.memoizedProps=null,D.memoizedState=null,D.updateQueue=null,D.dependencies=null,D.stateNode=null):(D.childLanes=te.childLanes,D.lanes=te.lanes,D.child=te.child,D.subtreeFlags=0,D.deletions=null,D.memoizedProps=te.memoizedProps,D.memoizedState=te.memoizedState,D.updateQueue=te.updateQueue,D.type=te.type,d=te.dependencies,D.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),g=g.sibling;return jn(Un,Un.current&1|2),f.child}d=d.sibling}D.tail!==null&&ft()>ef&&(f.flags|=128,b=!0,Dm(D,!1),f.lanes=4194304)}else{if(!b)if(d=ho(te),d!==null){if(f.flags|=128,b=!0,g=d.updateQueue,g!==null&&(f.updateQueue=g,f.flags|=4),Dm(D,!0),D.tail===null&&D.tailMode==="hidden"&&!te.alternate&&!Je)return si(f),null}else 2*ft()-D.renderingStartTime>ef&&g!==1073741824&&(f.flags|=128,b=!0,Dm(D,!1),f.lanes=4194304);D.isBackwards?(te.sibling=f.child,f.child=te):(g=D.last,g!==null?g.sibling=te:f.child=te,D.last=te)}return D.tail!==null?(f=D.tail,D.rendering=f,D.tail=f.sibling,D.renderingStartTime=ft(),f.sibling=null,g=Un.current,jn(Un,b?g&1|2:g&1),f):(si(f),null);case 22:case 23:return Fg(),b=f.memoizedState!==null,d!==null&&d.memoizedState!==null!==b&&(f.flags|=8192),b&&(f.mode&1)!==0?(po&1073741824)!==0&&(si(f),f.subtreeFlags&6&&(f.flags|=8192)):si(f),null;case 24:return null;case 25:return null}throw Error(r(156,f.tag))}function lP(d,f){switch(Oe(f),f.tag){case 1:return ri(f.type)&&$h(),d=f.flags,d&65536?(f.flags=d&-65537|128,f):null;case 3:return Lo(),vn(ti),vn(ha),Pm(),d=f.flags,(d&65536)!==0&&(d&128)===0?(f.flags=d&-65537|128,f):null;case 5:return Em(f),null;case 13:if(vn(Un),d=f.memoizedState,d!==null&&d.dehydrated!==null){if(f.alternate===null)throw Error(r(340));Rt()}return d=f.flags,d&65536?(f.flags=d&-65537|128,f):null;case 19:return vn(Un),null;case 4:return Lo(),null;case 10:return qn(f.type._context),null;case 22:case 23:return Fg(),null;case 24:return null;default:return null}}var vp=!1,ai=!1,cP=typeof WeakSet=="function"?WeakSet:Set,Lt=null;function Jh(d,f){var g=d.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch(b){Is(d,f,b)}else g.current=null}function Cg(d,f,g){try{g()}catch(b){Is(d,f,b)}}var I5=!1;function dP(d,f){if(Fu=fd,d=Es(),lo(d)){if("selectionStart"in d)var g={start:d.selectionStart,end:d.selectionEnd};else e:{g=(g=d.ownerDocument)&&g.defaultView||window;var b=g.getSelection&&g.getSelection();if(b&&b.rangeCount!==0){g=b.anchorNode;var E=b.anchorOffset,D=b.focusNode;b=b.focusOffset;try{g.nodeType,D.nodeType}catch{g=null;break e}var te=0,ve=-1,_e=-1,$e=0,dt=0,ht=d,lt=null;t:for(;;){for(var Dt;ht!==g||E!==0&&ht.nodeType!==3||(ve=te+E),ht!==D||b!==0&&ht.nodeType!==3||(_e=te+b),ht.nodeType===3&&(te+=ht.nodeValue.length),(Dt=ht.firstChild)!==null;)lt=ht,ht=Dt;for(;;){if(ht===d)break t;if(lt===g&&++$e===E&&(ve=te),lt===D&&++dt===b&&(_e=te),(Dt=ht.nextSibling)!==null)break;ht=lt,lt=ht.parentNode}ht=Dt}g=ve===-1||_e===-1?null:{start:ve,end:_e}}else g=null}g=g||{start:0,end:0}}else g=null;for(Fc={focusedElem:d,selectionRange:g},fd=!1,Lt=f;Lt!==null;)if(f=Lt,d=f.child,(f.subtreeFlags&1028)!==0&&d!==null)d.return=f,Lt=d;else for(;Lt!==null;){f=Lt;try{var Ut=f.alternate;if((f.flags&1024)!==0)switch(f.tag){case 0:case 11:case 15:break;case 1:if(Ut!==null){var Gt=Ut.memoizedProps,zs=Ut.memoizedState,De=f.stateNode,Ae=De.getSnapshotBeforeUpdate(f.elementType===f.type?Gt:pl(f.type,Gt),zs);De.__reactInternalSnapshotBeforeUpdate=Ae}break;case 3:var Le=f.stateNode.containerInfo;Le.nodeType===1?Le.textContent="":Le.nodeType===9&&Le.documentElement&&Le.removeChild(Le.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(mt){Is(f,f.return,mt)}if(d=f.sibling,d!==null){d.return=f.return,Lt=d;break}Lt=f.return}return Ut=I5,I5=!1,Ut}function Om(d,f,g){var b=f.updateQueue;if(b=b!==null?b.lastEffect:null,b!==null){var E=b=b.next;do{if((E.tag&d)===d){var D=E.destroy;E.destroy=void 0,D!==void 0&&Cg(f,g,D)}E=E.next}while(E!==b)}}function yp(d,f){if(f=f.updateQueue,f=f!==null?f.lastEffect:null,f!==null){var g=f=f.next;do{if((g.tag&d)===d){var b=g.create;g.destroy=b()}g=g.next}while(g!==f)}}function Sg(d){var f=d.ref;if(f!==null){var g=d.stateNode;switch(d.tag){case 5:d=g;break;default:d=g}typeof f=="function"?f(d):f.current=d}}function D5(d){var f=d.alternate;f!==null&&(d.alternate=null,D5(f)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(f=d.stateNode,f!==null&&(delete f[Ro],delete f[_d],delete f[ei],delete f[dg],delete f[ug])),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function O5(d){return d.tag===5||d.tag===3||d.tag===4}function R5(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||O5(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function Ag(d,f,g){var b=d.tag;if(b===5||b===6)d=d.stateNode,f?g.nodeType===8?g.parentNode.insertBefore(d,f):g.insertBefore(d,f):(g.nodeType===8?(f=g.parentNode,f.insertBefore(d,g)):(f=g,f.appendChild(d)),g=g._reactRootContainer,g!=null||f.onclick!==null||(f.onclick=jd));else if(b!==4&&(d=d.child,d!==null))for(Ag(d,f,g),d=d.sibling;d!==null;)Ag(d,f,g),d=d.sibling}function Eg(d,f,g){var b=d.tag;if(b===5||b===6)d=d.stateNode,f?g.insertBefore(d,f):g.appendChild(d);else if(b!==4&&(d=d.child,d!==null))for(Eg(d,f,g),d=d.sibling;d!==null;)Eg(d,f,g),d=d.sibling}var Ua=null,xl=!1;function Td(d,f,g){for(g=g.child;g!==null;)L5(d,f,g),g=g.sibling}function L5(d,f,g){if(Bs&&typeof Bs.onCommitFiberUnmount=="function")try{Bs.onCommitFiberUnmount(bn,g)}catch{}switch(g.tag){case 5:ai||Jh(g,f);case 6:var b=Ua,E=xl;Ua=null,Td(d,f,g),Ua=b,xl=E,Ua!==null&&(xl?(d=Ua,g=g.stateNode,d.nodeType===8?d.parentNode.removeChild(g):d.removeChild(g)):Ua.removeChild(g.stateNode));break;case 18:Ua!==null&&(xl?(d=Ua,g=g.stateNode,d.nodeType===8?Cm(d.parentNode,g):d.nodeType===1&&Cm(d,g),Eo(d)):Cm(Ua,g.stateNode));break;case 4:b=Ua,E=xl,Ua=g.stateNode.containerInfo,xl=!0,Td(d,f,g),Ua=b,xl=E;break;case 0:case 11:case 14:case 15:if(!ai&&(b=g.updateQueue,b!==null&&(b=b.lastEffect,b!==null))){E=b=b.next;do{var D=E,te=D.destroy;D=D.tag,te!==void 0&&((D&2)!==0||(D&4)!==0)&&Cg(g,f,te),E=E.next}while(E!==b)}Td(d,f,g);break;case 1:if(!ai&&(Jh(g,f),b=g.stateNode,typeof b.componentWillUnmount=="function"))try{b.props=g.memoizedProps,b.state=g.memoizedState,b.componentWillUnmount()}catch(ve){Is(g,f,ve)}Td(d,f,g);break;case 21:Td(d,f,g);break;case 22:g.mode&1?(ai=(b=ai)||g.memoizedState!==null,Td(d,f,g),ai=b):Td(d,f,g);break;default:Td(d,f,g)}}function F5(d){var f=d.updateQueue;if(f!==null){d.updateQueue=null;var g=d.stateNode;g===null&&(g=d.stateNode=new cP),f.forEach(function(b){var E=yP.bind(null,d,b);g.has(b)||(g.add(b),b.then(E,E))})}}function gl(d,f){var g=f.deletions;if(g!==null)for(var b=0;b<g.length;b++){var E=g[b];try{var D=d,te=f,ve=te;e:for(;ve!==null;){switch(ve.tag){case 5:Ua=ve.stateNode,xl=!1;break e;case 3:Ua=ve.stateNode.containerInfo,xl=!0;break e;case 4:Ua=ve.stateNode.containerInfo,xl=!0;break e}ve=ve.return}if(Ua===null)throw Error(r(160));L5(D,te,E),Ua=null,xl=!1;var _e=E.alternate;_e!==null&&(_e.return=null),E.return=null}catch($e){Is(E,f,$e)}}if(f.subtreeFlags&12854)for(f=f.child;f!==null;)M5(f,d),f=f.sibling}function M5(d,f){var g=d.alternate,b=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:if(gl(f,d),Zl(d),b&4){try{Om(3,d,d.return),yp(3,d)}catch(Gt){Is(d,d.return,Gt)}try{Om(5,d,d.return)}catch(Gt){Is(d,d.return,Gt)}}break;case 1:gl(f,d),Zl(d),b&512&&g!==null&&Jh(g,g.return);break;case 5:if(gl(f,d),Zl(d),b&512&&g!==null&&Jh(g,g.return),d.flags&32){var E=d.stateNode;try{kt(E,"")}catch(Gt){Is(d,d.return,Gt)}}if(b&4&&(E=d.stateNode,E!=null)){var D=d.memoizedProps,te=g!==null?g.memoizedProps:D,ve=d.type,_e=d.updateQueue;if(d.updateQueue=null,_e!==null)try{ve==="input"&&D.type==="radio"&&D.name!=null&&at(E,D),bt(ve,te);var $e=bt(ve,D);for(te=0;te<_e.length;te+=2){var dt=_e[te],ht=_e[te+1];dt==="style"?xt(E,ht):dt==="dangerouslySetInnerHTML"?Et(E,ht):dt==="children"?kt(E,ht):k(E,dt,ht,$e)}switch(ve){case"input":tt(E,D);break;case"textarea":Kt(E,D);break;case"select":var lt=E._wrapperState.wasMultiple;E._wrapperState.wasMultiple=!!D.multiple;var Dt=D.value;Dt!=null?Ve(E,!!D.multiple,Dt,!1):lt!==!!D.multiple&&(D.defaultValue!=null?Ve(E,!!D.multiple,D.defaultValue,!0):Ve(E,!!D.multiple,D.multiple?[]:"",!1))}E[_d]=D}catch(Gt){Is(d,d.return,Gt)}}break;case 6:if(gl(f,d),Zl(d),b&4){if(d.stateNode===null)throw Error(r(162));E=d.stateNode,D=d.memoizedProps;try{E.nodeValue=D}catch(Gt){Is(d,d.return,Gt)}}break;case 3:if(gl(f,d),Zl(d),b&4&&g!==null&&g.memoizedState.isDehydrated)try{Eo(f.containerInfo)}catch(Gt){Is(d,d.return,Gt)}break;case 4:gl(f,d),Zl(d);break;case 13:gl(f,d),Zl(d),E=d.child,E.flags&8192&&(D=E.memoizedState!==null,E.stateNode.isHidden=D,!D||E.alternate!==null&&E.alternate.memoizedState!==null||(Tg=ft())),b&4&&F5(d);break;case 22:if(dt=g!==null&&g.memoizedState!==null,d.mode&1?(ai=($e=ai)||dt,gl(f,d),ai=$e):gl(f,d),Zl(d),b&8192){if($e=d.memoizedState!==null,(d.stateNode.isHidden=$e)&&!dt&&(d.mode&1)!==0)for(Lt=d,dt=d.child;dt!==null;){for(ht=Lt=dt;Lt!==null;){switch(lt=Lt,Dt=lt.child,lt.tag){case 0:case 11:case 14:case 15:Om(4,lt,lt.return);break;case 1:Jh(lt,lt.return);var Ut=lt.stateNode;if(typeof Ut.componentWillUnmount=="function"){b=lt,g=lt.return;try{f=b,Ut.props=f.memoizedProps,Ut.state=f.memoizedState,Ut.componentWillUnmount()}catch(Gt){Is(b,g,Gt)}}break;case 5:Jh(lt,lt.return);break;case 22:if(lt.memoizedState!==null){$5(ht);continue}}Dt!==null?(Dt.return=lt,Lt=Dt):$5(ht)}dt=dt.sibling}e:for(dt=null,ht=d;;){if(ht.tag===5){if(dt===null){dt=ht;try{E=ht.stateNode,$e?(D=E.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none"):(ve=ht.stateNode,_e=ht.memoizedProps.style,te=_e!=null&&_e.hasOwnProperty("display")?_e.display:null,ve.style.display=Rr("display",te))}catch(Gt){Is(d,d.return,Gt)}}}else if(ht.tag===6){if(dt===null)try{ht.stateNode.nodeValue=$e?"":ht.memoizedProps}catch(Gt){Is(d,d.return,Gt)}}else if((ht.tag!==22&&ht.tag!==23||ht.memoizedState===null||ht===d)&&ht.child!==null){ht.child.return=ht,ht=ht.child;continue}if(ht===d)break e;for(;ht.sibling===null;){if(ht.return===null||ht.return===d)break e;dt===ht&&(dt=null),ht=ht.return}dt===ht&&(dt=null),ht.sibling.return=ht.return,ht=ht.sibling}}break;case 19:gl(f,d),Zl(d),b&4&&F5(d);break;case 21:break;default:gl(f,d),Zl(d)}}function Zl(d){var f=d.flags;if(f&2){try{e:{for(var g=d.return;g!==null;){if(O5(g)){var b=g;break e}g=g.return}throw Error(r(160))}switch(b.tag){case 5:var E=b.stateNode;b.flags&32&&(kt(E,""),b.flags&=-33);var D=R5(d);Eg(d,D,E);break;case 3:case 4:var te=b.stateNode.containerInfo,ve=R5(d);Ag(d,ve,te);break;default:throw Error(r(161))}}catch(_e){Is(d,d.return,_e)}d.flags&=-3}f&4096&&(d.flags&=-4097)}function uP(d,f,g){Lt=d,B5(d)}function B5(d,f,g){for(var b=(d.mode&1)!==0;Lt!==null;){var E=Lt,D=E.child;if(E.tag===22&&b){var te=E.memoizedState!==null||vp;if(!te){var ve=E.alternate,_e=ve!==null&&ve.memoizedState!==null||ai;ve=vp;var $e=ai;if(vp=te,(ai=_e)&&!$e)for(Lt=E;Lt!==null;)te=Lt,_e=te.child,te.tag===22&&te.memoizedState!==null?V5(E):_e!==null?(_e.return=te,Lt=_e):V5(E);for(;D!==null;)Lt=D,B5(D),D=D.sibling;Lt=E,vp=ve,ai=$e}U5(d)}else(E.subtreeFlags&8772)!==0&&D!==null?(D.return=E,Lt=D):U5(d)}}function U5(d){for(;Lt!==null;){var f=Lt;if((f.flags&8772)!==0){var g=f.alternate;try{if((f.flags&8772)!==0)switch(f.tag){case 0:case 11:case 15:ai||yp(5,f);break;case 1:var b=f.stateNode;if(f.flags&4&&!ai)if(g===null)b.componentDidMount();else{var E=f.elementType===f.type?g.memoizedProps:pl(f.type,g.memoizedProps);b.componentDidUpdate(E,g.memoizedState,b.__reactInternalSnapshotBeforeUpdate)}var D=f.updateQueue;D!==null&&Bi(f,D,b);break;case 3:var te=f.updateQueue;if(te!==null){if(g=null,f.child!==null)switch(f.child.tag){case 5:g=f.child.stateNode;break;case 1:g=f.child.stateNode}Bi(f,te,g)}break;case 5:var ve=f.stateNode;if(g===null&&f.flags&4){g=ve;var _e=f.memoizedProps;switch(f.type){case"button":case"input":case"select":case"textarea":_e.autoFocus&&g.focus();break;case"img":_e.src&&(g.src=_e.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(f.memoizedState===null){var $e=f.alternate;if($e!==null){var dt=$e.memoizedState;if(dt!==null){var ht=dt.dehydrated;ht!==null&&Eo(ht)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}ai||f.flags&512&&Sg(f)}catch(lt){Is(f,f.return,lt)}}if(f===d){Lt=null;break}if(g=f.sibling,g!==null){g.return=f.return,Lt=g;break}Lt=f.return}}function $5(d){for(;Lt!==null;){var f=Lt;if(f===d){Lt=null;break}var g=f.sibling;if(g!==null){g.return=f.return,Lt=g;break}Lt=f.return}}function V5(d){for(;Lt!==null;){var f=Lt;try{switch(f.tag){case 0:case 11:case 15:var g=f.return;try{yp(4,f)}catch(_e){Is(f,g,_e)}break;case 1:var b=f.stateNode;if(typeof b.componentDidMount=="function"){var E=f.return;try{b.componentDidMount()}catch(_e){Is(f,E,_e)}}var D=f.return;try{Sg(f)}catch(_e){Is(f,D,_e)}break;case 5:var te=f.return;try{Sg(f)}catch(_e){Is(f,te,_e)}}}catch(_e){Is(f,f.return,_e)}if(f===d){Lt=null;break}var ve=f.sibling;if(ve!==null){ve.return=f.return,Lt=ve;break}Lt=f.return}}var hP=Math.ceil,wp=P.ReactCurrentDispatcher,kg=P.ReactCurrentOwner,Bo=P.ReactCurrentBatchConfig,sn=0,ka=null,sa=null,$a=0,po=0,Qh=co(0),ma=0,Rm=null,zu=0,bp=0,Pg=0,Lm=null,$i=null,Tg=0,ef=1/0,zc=null,Np=!1,Ig=null,Id=null,jp=!1,Dd=null,_p=0,Fm=0,Dg=null,Cp=-1,Sp=0;function Ni(){return(sn&6)!==0?ft():Cp!==-1?Cp:Cp=ft()}function Od(d){return(d.mode&1)===0?1:(sn&2)!==0&&$a!==0?$a&-$a:vs.transition!==null?(Sp===0&&(Sp=Eh()),Sp):(d=Zr,d!==0||(d=window.event,d=d===void 0?16:bc(d.type)),d)}function vl(d,f,g,b){if(50<Fm)throw Fm=0,Dg=null,Error(r(185));gc(d,g,b),((sn&2)===0||d!==ka)&&(d===ka&&((sn&2)===0&&(bp|=g),ma===4&&Rd(d,$a)),Vi(d,b),g===1&&sn===0&&(f.mode&1)===0&&(ef=ft()+500,Bu&&F()))}function Vi(d,f){var g=d.callbackNode;Jn(d,f);var b=ea(d,d===ka?$a:0);if(b===0)g!==null&&Ya(g),d.callbackNode=null,d.callbackPriority=0;else if(f=b&-b,d.callbackPriority!==f){if(g!=null&&Ya(g),f===1)d.tag===0?I(q5.bind(null,d)):_(q5.bind(null,d)),lg(function(){(sn&6)===0&&F()}),g=null;else{switch(el(b)){case 1:g=Ee;break;case 4:g=wt;break;case 16:g=nt;break;case 536870912:g=Zn;break;default:g=nt}g=J5(g,z5.bind(null,d))}d.callbackPriority=f,d.callbackNode=g}}function z5(d,f){if(Cp=-1,Sp=0,(sn&6)!==0)throw Error(r(327));var g=d.callbackNode;if(tf()&&d.callbackNode!==g)return null;var b=ea(d,d===ka?$a:0);if(b===0)return null;if((b&30)!==0||(b&d.expiredLanes)!==0||f)f=Ap(d,b);else{f=b;var E=sn;sn|=2;var D=W5();(ka!==d||$a!==f)&&(zc=null,ef=ft()+500,Hu(d,f));do try{pP();break}catch(ve){H5(d,ve)}while(!0);rn(),wp.current=D,sn=E,sa!==null?f=0:(ka=null,$a=0,f=ma)}if(f!==0){if(f===2&&(E=xc(d),E!==0&&(b=E,f=Og(d,E))),f===1)throw g=Rm,Hu(d,0),Rd(d,b),Vi(d,ft()),g;if(f===6)Rd(d,b);else{if(E=d.current.alternate,(b&30)===0&&!fP(E)&&(f=Ap(d,b),f===2&&(D=xc(d),D!==0&&(b=D,f=Og(d,D))),f===1))throw g=Rm,Hu(d,0),Rd(d,b),Vi(d,ft()),g;switch(d.finishedWork=E,d.finishedLanes=b,f){case 0:case 1:throw Error(r(345));case 2:Wu(d,$i,zc);break;case 3:if(Rd(d,b),(b&130023424)===b&&(f=Tg+500-ft(),10<f)){if(ea(d,0)!==0)break;if(E=d.suspendedLanes,(E&b)!==b){Ni(),d.pingedLanes|=d.suspendedLanes&E;break}d.timeoutHandle=_m(Wu.bind(null,d,$i,zc),f);break}Wu(d,$i,zc);break;case 4:if(Rd(d,b),(b&4194240)===b)break;for(f=d.eventTimes,E=-1;0<b;){var te=31-Qs(b);D=1<<te,te=f[te],te>E&&(E=te),b&=~D}if(b=E,b=ft()-b,b=(120>b?120:480>b?480:1080>b?1080:1920>b?1920:3e3>b?3e3:4320>b?4320:1960*hP(b/1960))-b,10<b){d.timeoutHandle=_m(Wu.bind(null,d,$i,zc),b);break}Wu(d,$i,zc);break;case 5:Wu(d,$i,zc);break;default:throw Error(r(329))}}}return Vi(d,ft()),d.callbackNode===g?z5.bind(null,d):null}function Og(d,f){var g=Lm;return d.current.memoizedState.isDehydrated&&(Hu(d,f).flags|=256),d=Ap(d,f),d!==2&&(f=$i,$i=g,f!==null&&Rg(f)),d}function Rg(d){$i===null?$i=d:$i.push.apply($i,d)}function fP(d){for(var f=d;;){if(f.flags&16384){var g=f.updateQueue;if(g!==null&&(g=g.stores,g!==null))for(var b=0;b<g.length;b++){var E=g[b],D=E.getSnapshot;E=E.value;try{if(!is(D(),E))return!1}catch{return!1}}}if(g=f.child,f.subtreeFlags&16384&&g!==null)g.return=f,f=g;else{if(f===d)break;for(;f.sibling===null;){if(f.return===null||f.return===d)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Rd(d,f){for(f&=~Pg,f&=~bp,d.suspendedLanes|=f,d.pingedLanes&=~f,d=d.expirationTimes;0<f;){var g=31-Qs(f),b=1<<g;d[g]=-1,f&=~b}}function q5(d){if((sn&6)!==0)throw Error(r(327));tf();var f=ea(d,0);if((f&1)===0)return Vi(d,ft()),null;var g=Ap(d,f);if(d.tag!==0&&g===2){var b=xc(d);b!==0&&(f=b,g=Og(d,b))}if(g===1)throw g=Rm,Hu(d,0),Rd(d,f),Vi(d,ft()),g;if(g===6)throw Error(r(345));return d.finishedWork=d.current.alternate,d.finishedLanes=f,Wu(d,$i,zc),Vi(d,ft()),null}function Lg(d,f){var g=sn;sn|=1;try{return d(f)}finally{sn=g,sn===0&&(ef=ft()+500,Bu&&F())}}function qu(d){Dd!==null&&Dd.tag===0&&(sn&6)===0&&tf();var f=sn;sn|=1;var g=Bo.transition,b=Zr;try{if(Bo.transition=null,Zr=1,d)return d()}finally{Zr=b,Bo.transition=g,sn=f,(sn&6)===0&&F()}}function Fg(){po=Qh.current,vn(Qh)}function Hu(d,f){d.finishedWork=null,d.finishedLanes=0;var g=d.timeoutHandle;if(g!==-1&&(d.timeoutHandle=-1,ap(g)),sa!==null)for(g=sa.return;g!==null;){var b=g;switch(Oe(b),b.tag){case 1:b=b.type.childContextTypes,b!=null&&$h();break;case 3:Lo(),vn(ti),vn(ha),Pm();break;case 5:Em(b);break;case 4:Lo();break;case 13:vn(Un);break;case 19:vn(Un);break;case 10:qn(b.type._context);break;case 22:case 23:Fg()}g=g.return}if(ka=d,sa=d=Ld(d.current,null),$a=po=f,ma=0,Rm=null,Pg=bp=zu=0,$i=Lm=null,An!==null){for(f=0;f<An.length;f++)if(g=An[f],b=g.interleaved,b!==null){g.interleaved=null;var E=b.next,D=g.pending;if(D!==null){var te=D.next;D.next=E,b.next=te}g.pending=b}An=null}return d}function H5(d,f){do{var g=sa;try{if(rn(),Vh.current=mp,Ed){for(var b=Hn.memoizedState;b!==null;){var E=b.queue;E!==null&&(E.pending=null),b=b.next}Ed=!1}if(Fo=0,Ns=Ts=Hn=null,fl=!1,kd=0,kg.current=null,g===null||g.return===null){ma=1,Rm=f,sa=null;break}e:{var D=d,te=g.return,ve=g,_e=f;if(f=$a,ve.flags|=32768,_e!==null&&typeof _e=="object"&&typeof _e.then=="function"){var $e=_e,dt=ve,ht=dt.tag;if((dt.mode&1)===0&&(ht===0||ht===11||ht===15)){var lt=dt.alternate;lt?(dt.updateQueue=lt.updateQueue,dt.memoizedState=lt.memoizedState,dt.lanes=lt.lanes):(dt.updateQueue=null,dt.memoizedState=null)}var Dt=x5(te);if(Dt!==null){Dt.flags&=-257,g5(Dt,te,ve,D,f),Dt.mode&1&&p5(D,$e,f),f=Dt,_e=$e;var Ut=f.updateQueue;if(Ut===null){var Gt=new Set;Gt.add(_e),f.updateQueue=Gt}else Ut.add(_e);break e}else{if((f&1)===0){p5(D,$e,f),Mg();break e}_e=Error(r(426))}}else if(Je&&ve.mode&1){var zs=x5(te);if(zs!==null){(zs.flags&65536)===0&&(zs.flags|=256),g5(zs,te,ve,D,f),Nt(Zh(_e,ve));break e}}D=_e=Zh(_e,ve),ma!==4&&(ma=2),Lm===null?Lm=[D]:Lm.push(D),D=te;do{switch(D.tag){case 3:D.flags|=65536,f&=-f,D.lanes|=f;var De=f5(D,_e,f);kn(D,De);break e;case 1:ve=_e;var Ae=D.type,Le=D.stateNode;if((D.flags&128)===0&&(typeof Ae.getDerivedStateFromError=="function"||Le!==null&&typeof Le.componentDidCatch=="function"&&(Id===null||!Id.has(Le)))){D.flags|=65536,f&=-f,D.lanes|=f;var mt=m5(D,ve,f);kn(D,mt);break e}}D=D.return}while(D!==null)}K5(g)}catch(Jt){f=Jt,sa===g&&g!==null&&(sa=g=g.return);continue}break}while(!0)}function W5(){var d=wp.current;return wp.current=mp,d===null?mp:d}function Mg(){(ma===0||ma===3||ma===2)&&(ma=4),ka===null||(zu&268435455)===0&&(bp&268435455)===0||Rd(ka,$a)}function Ap(d,f){var g=sn;sn|=2;var b=W5();(ka!==d||$a!==f)&&(zc=null,Hu(d,f));do try{mP();break}catch(E){H5(d,E)}while(!0);if(rn(),sn=g,wp.current=b,sa!==null)throw Error(r(261));return ka=null,$a=0,ma}function mP(){for(;sa!==null;)G5(sa)}function pP(){for(;sa!==null&&!fi();)G5(sa)}function G5(d){var f=Z5(d.alternate,d,po);d.memoizedProps=d.pendingProps,f===null?K5(d):sa=f,kg.current=null}function K5(d){var f=d;do{var g=f.alternate;if(d=f.return,(f.flags&32768)===0){if(g=oP(g,f,po),g!==null){sa=g;return}}else{if(g=lP(g,f),g!==null){g.flags&=32767,sa=g;return}if(d!==null)d.flags|=32768,d.subtreeFlags=0,d.deletions=null;else{ma=6,sa=null;return}}if(f=f.sibling,f!==null){sa=f;return}sa=f=d}while(f!==null);ma===0&&(ma=5)}function Wu(d,f,g){var b=Zr,E=Bo.transition;try{Bo.transition=null,Zr=1,xP(d,f,g,b)}finally{Bo.transition=E,Zr=b}return null}function xP(d,f,g,b){do tf();while(Dd!==null);if((sn&6)!==0)throw Error(r(327));g=d.finishedWork;var E=d.finishedLanes;if(g===null)return null;if(d.finishedWork=null,d.finishedLanes=0,g===d.current)throw Error(r(177));d.callbackNode=null,d.callbackPriority=0;var D=g.lanes|g.childLanes;if(Co(d,D),d===ka&&(sa=ka=null,$a=0),(g.subtreeFlags&2064)===0&&(g.flags&2064)===0||jp||(jp=!0,J5(nt,function(){return tf(),null})),D=(g.flags&15990)!==0,(g.subtreeFlags&15990)!==0||D){D=Bo.transition,Bo.transition=null;var te=Zr;Zr=1;var ve=sn;sn|=4,kg.current=null,dP(d,g),M5(g,d),ku(Fc),fd=!!Fu,Fc=Fu=null,d.current=g,uP(g),ze(),sn=ve,Zr=te,Bo.transition=D}else d.current=g;if(jp&&(jp=!1,Dd=d,_p=E),D=d.pendingLanes,D===0&&(Id=null),ld(g.stateNode),Vi(d,ft()),f!==null)for(b=d.onRecoverableError,g=0;g<f.length;g++)E=f[g],b(E.value,{componentStack:E.stack,digest:E.digest});if(Np)throw Np=!1,d=Ig,Ig=null,d;return(_p&1)!==0&&d.tag!==0&&tf(),D=d.pendingLanes,(D&1)!==0?d===Dg?Fm++:(Fm=0,Dg=d):Fm=0,F(),null}function tf(){if(Dd!==null){var d=el(_p),f=Bo.transition,g=Zr;try{if(Bo.transition=null,Zr=16>d?16:d,Dd===null)var b=!1;else{if(d=Dd,Dd=null,_p=0,(sn&6)!==0)throw Error(r(331));var E=sn;for(sn|=4,Lt=d.current;Lt!==null;){var D=Lt,te=D.child;if((Lt.flags&16)!==0){var ve=D.deletions;if(ve!==null){for(var _e=0;_e<ve.length;_e++){var $e=ve[_e];for(Lt=$e;Lt!==null;){var dt=Lt;switch(dt.tag){case 0:case 11:case 15:Om(8,dt,D)}var ht=dt.child;if(ht!==null)ht.return=dt,Lt=ht;else for(;Lt!==null;){dt=Lt;var lt=dt.sibling,Dt=dt.return;if(D5(dt),dt===$e){Lt=null;break}if(lt!==null){lt.return=Dt,Lt=lt;break}Lt=Dt}}}var Ut=D.alternate;if(Ut!==null){var Gt=Ut.child;if(Gt!==null){Ut.child=null;do{var zs=Gt.sibling;Gt.sibling=null,Gt=zs}while(Gt!==null)}}Lt=D}}if((D.subtreeFlags&2064)!==0&&te!==null)te.return=D,Lt=te;else e:for(;Lt!==null;){if(D=Lt,(D.flags&2048)!==0)switch(D.tag){case 0:case 11:case 15:Om(9,D,D.return)}var De=D.sibling;if(De!==null){De.return=D.return,Lt=De;break e}Lt=D.return}}var Ae=d.current;for(Lt=Ae;Lt!==null;){te=Lt;var Le=te.child;if((te.subtreeFlags&2064)!==0&&Le!==null)Le.return=te,Lt=Le;else e:for(te=Ae;Lt!==null;){if(ve=Lt,(ve.flags&2048)!==0)try{switch(ve.tag){case 0:case 11:case 15:yp(9,ve)}}catch(Jt){Is(ve,ve.return,Jt)}if(ve===te){Lt=null;break e}var mt=ve.sibling;if(mt!==null){mt.return=ve.return,Lt=mt;break e}Lt=ve.return}}if(sn=E,F(),Bs&&typeof Bs.onPostCommitFiberRoot=="function")try{Bs.onPostCommitFiberRoot(bn,d)}catch{}b=!0}return b}finally{Zr=g,Bo.transition=f}}return!1}function Y5(d,f,g){f=Zh(g,f),f=f5(d,f,1),d=ws(d,f,1),f=Ni(),d!==null&&(gc(d,1,f),Vi(d,f))}function Is(d,f,g){if(d.tag===3)Y5(d,d,g);else for(;f!==null;){if(f.tag===3){Y5(f,d,g);break}else if(f.tag===1){var b=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(Id===null||!Id.has(b))){d=Zh(g,d),d=m5(f,d,1),f=ws(f,d,1),d=Ni(),f!==null&&(gc(f,1,d),Vi(f,d));break}}f=f.return}}function gP(d,f,g){var b=d.pingCache;b!==null&&b.delete(f),f=Ni(),d.pingedLanes|=d.suspendedLanes&g,ka===d&&($a&g)===g&&(ma===4||ma===3&&($a&130023424)===$a&&500>ft()-Tg?Hu(d,0):Pg|=g),Vi(d,f)}function X5(d,f){f===0&&((d.mode&1)===0?f=1:(f=dn,dn<<=1,(dn&130023424)===0&&(dn=4194304)));var g=Ni();d=En(d,f),d!==null&&(gc(d,f,g),Vi(d,g))}function vP(d){var f=d.memoizedState,g=0;f!==null&&(g=f.retryLane),X5(d,g)}function yP(d,f){var g=0;switch(d.tag){case 13:var b=d.stateNode,E=d.memoizedState;E!==null&&(g=E.retryLane);break;case 19:b=d.stateNode;break;default:throw Error(r(314))}b!==null&&b.delete(f),X5(d,g)}var Z5;Z5=function(d,f,g){if(d!==null)if(d.memoizedProps!==f.pendingProps||ti.current)Ui=!0;else{if((d.lanes&g)===0&&(f.flags&128)===0)return Ui=!1,iP(d,f,g);Ui=(d.flags&131072)!==0}else Ui=!1,Je&&(f.flags&1048576)!==0&&Te(f,le,f.index);switch(f.lanes=0,f.tag){case 2:var b=f.type;gp(d,f),d=f.pendingProps;var E=Sd(f,ha.current);cs(f,g),E=Uu(null,f,b,d,E,g);var D=Mo();return f.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(f.tag=1,f.memoizedState=null,f.updateQueue=null,ri(b)?(D=!0,Uc(f)):D=!1,f.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,fa(f),E.updater=pp,f.stateNode=E,E._reactInternals=f,pg(f,b,d,g),f=yg(null,f,b,!0,D,g)):(f.tag=0,Je&&D&&Ge(f),bi(null,f,E,g),f=f.child),f;case 16:b=f.elementType;e:{switch(gp(d,f),d=f.pendingProps,E=b._init,b=E(b._payload),f.type=b,E=f.tag=bP(b),d=pl(b,d),E){case 0:f=vg(null,f,b,d,g);break e;case 1:f=j5(null,f,b,d,g);break e;case 11:f=v5(null,f,b,d,g);break e;case 14:f=y5(null,f,b,pl(b.type,d),g);break e}throw Error(r(306,b,""))}return f;case 0:return b=f.type,E=f.pendingProps,E=f.elementType===b?E:pl(b,E),vg(d,f,b,E,g);case 1:return b=f.type,E=f.pendingProps,E=f.elementType===b?E:pl(b,E),j5(d,f,b,E,g);case 3:e:{if(_5(f),d===null)throw Error(r(387));b=f.pendingProps,D=f.memoizedState,E=D.element,ni(d,f),Ea(f,b,null,g);var te=f.memoizedState;if(b=te.element,D.isDehydrated)if(D={element:b,isDehydrated:!1,cache:te.cache,pendingSuspenseBoundaries:te.pendingSuspenseBoundaries,transitions:te.transitions},f.updateQueue.baseState=D,f.memoizedState=D,f.flags&256){E=Zh(Error(r(423)),f),f=C5(d,f,b,g,E);break e}else if(b!==E){E=Zh(Error(r(424)),f),f=C5(d,f,b,g,E);break e}else for(He=Ba(f.stateNode.containerInfo.firstChild),qe=f,Je=!0,rt=null,g=es(f,null,b,g),f.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(Rt(),b===E){f=Vc(d,f,g);break e}bi(d,f,b,g)}f=f.child}return f;case 5:return cp(f),d===null&&Mt(f),b=f.type,E=f.pendingProps,D=d!==null?d.memoizedProps:null,te=E.children,jm(b,E)?te=null:D!==null&&jm(b,D)&&(f.flags|=32),N5(d,f),bi(d,f,te,g),f.child;case 6:return d===null&&Mt(f),null;case 13:return S5(d,f,g);case 4:return Ad(f,f.stateNode.containerInfo),b=f.pendingProps,d===null?f.child=ks(f,null,b,g):bi(d,f,b,g),f.child;case 11:return b=f.type,E=f.pendingProps,E=f.elementType===b?E:pl(b,E),v5(d,f,b,E,g);case 7:return bi(d,f,f.pendingProps,g),f.child;case 8:return bi(d,f,f.pendingProps.children,g),f.child;case 12:return bi(d,f,f.pendingProps.children,g),f.child;case 10:e:{if(b=f.type._context,E=f.pendingProps,D=f.memoizedProps,te=E.value,jn($s,b._currentValue),b._currentValue=te,D!==null)if(is(D.value,te)){if(D.children===E.children&&!ti.current){f=Vc(d,f,g);break e}}else for(D=f.child,D!==null&&(D.return=f);D!==null;){var ve=D.dependencies;if(ve!==null){te=D.child;for(var _e=ve.firstContext;_e!==null;){if(_e.context===b){if(D.tag===1){_e=ys(-1,g&-g),_e.tag=2;var $e=D.updateQueue;if($e!==null){$e=$e.shared;var dt=$e.pending;dt===null?_e.next=_e:(_e.next=dt.next,dt.next=_e),$e.pending=_e}}D.lanes|=g,_e=D.alternate,_e!==null&&(_e.lanes|=g),nn(D.return,g,f),ve.lanes|=g;break}_e=_e.next}}else if(D.tag===10)te=D.type===f.type?null:D.child;else if(D.tag===18){if(te=D.return,te===null)throw Error(r(341));te.lanes|=g,ve=te.alternate,ve!==null&&(ve.lanes|=g),nn(te,g,f),te=D.sibling}else te=D.child;if(te!==null)te.return=D;else for(te=D;te!==null;){if(te===f){te=null;break}if(D=te.sibling,D!==null){D.return=te.return,te=D;break}te=te.return}D=te}bi(d,f,E.children,g),f=f.child}return f;case 9:return E=f.type,b=f.pendingProps.children,cs(f,g),E=ds(E),b=b(E),f.flags|=1,bi(d,f,b,g),f.child;case 14:return b=f.type,E=pl(b,f.pendingProps),E=pl(b.type,E),y5(d,f,b,E,g);case 15:return w5(d,f,f.type,f.pendingProps,g);case 17:return b=f.type,E=f.pendingProps,E=f.elementType===b?E:pl(b,E),gp(d,f),f.tag=1,ri(b)?(d=!0,Uc(f)):d=!1,cs(f,g),u5(f,b,E),pg(f,b,E,g),yg(null,f,b,!0,d,g);case 19:return E5(d,f,g);case 22:return b5(d,f,g)}throw Error(r(156,f.tag))};function J5(d,f){return Js(d,f)}function wP(d,f,g,b){this.tag=d,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Uo(d,f,g,b){return new wP(d,f,g,b)}function Bg(d){return d=d.prototype,!(!d||!d.isReactComponent)}function bP(d){if(typeof d=="function")return Bg(d)?1:0;if(d!=null){if(d=d.$$typeof,d===q)return 11;if(d===H)return 14}return 2}function Ld(d,f){var g=d.alternate;return g===null?(g=Uo(d.tag,f,d.key,d.mode),g.elementType=d.elementType,g.type=d.type,g.stateNode=d.stateNode,g.alternate=d,d.alternate=g):(g.pendingProps=f,g.type=d.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=d.flags&14680064,g.childLanes=d.childLanes,g.lanes=d.lanes,g.child=d.child,g.memoizedProps=d.memoizedProps,g.memoizedState=d.memoizedState,g.updateQueue=d.updateQueue,f=d.dependencies,g.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},g.sibling=d.sibling,g.index=d.index,g.ref=d.ref,g}function Ep(d,f,g,b,E,D){var te=2;if(b=d,typeof d=="function")Bg(d)&&(te=1);else if(typeof d=="string")te=5;else e:switch(d){case R:return Gu(g.children,E,D,f);case B:te=8,E|=8;break;case U:return d=Uo(12,g,f,E|2),d.elementType=U,d.lanes=D,d;case re:return d=Uo(13,g,f,E),d.elementType=re,d.lanes=D,d;case ee:return d=Uo(19,g,f,E),d.elementType=ee,d.lanes=D,d;case ue:return kp(g,E,D,f);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case K:te=10;break e;case M:te=9;break e;case q:te=11;break e;case H:te=14;break e;case se:te=16,b=null;break e}throw Error(r(130,d==null?d:typeof d,""))}return f=Uo(te,g,f,E),f.elementType=d,f.type=b,f.lanes=D,f}function Gu(d,f,g,b){return d=Uo(7,d,b,f),d.lanes=g,d}function kp(d,f,g,b){return d=Uo(22,d,b,f),d.elementType=ue,d.lanes=g,d.stateNode={isHidden:!1},d}function Ug(d,f,g){return d=Uo(6,d,null,f),d.lanes=g,d}function $g(d,f,g){return f=Uo(4,d.children!==null?d.children:[],d.key,f),f.lanes=g,f.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},f}function NP(d,f,g,b,E){this.tag=f,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wu(0),this.expirationTimes=wu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wu(0),this.identifierPrefix=b,this.onRecoverableError=E,this.mutableSourceEagerHydrationData=null}function Vg(d,f,g,b,E,D,te,ve,_e){return d=new NP(d,f,g,ve,_e),f===1?(f=1,D===!0&&(f|=8)):f=0,D=Uo(3,null,null,f),d.current=D,D.stateNode=d,D.memoizedState={element:b,isDehydrated:g,cache:null,transitions:null,pendingSuspenseBoundaries:null},fa(D),d}function jP(d,f,g){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$,key:b==null?null:""+b,children:d,containerInfo:f,implementation:g}}function Q5(d){if(!d)return Kl;d=d._reactInternals;e:{if(Xn(d)!==d||d.tag!==1)throw Error(r(170));var f=d;do{switch(f.tag){case 3:f=f.stateNode.context;break e;case 1:if(ri(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break e}}f=f.return}while(f!==null);throw Error(r(171))}if(d.tag===1){var g=d.type;if(ri(g))return Am(d,g,f)}return f}function eN(d,f,g,b,E,D,te,ve,_e){return d=Vg(g,b,!0,d,E,D,te,ve,_e),d.context=Q5(null),g=d.current,b=Ni(),E=Od(g),D=ys(b,E),D.callback=f??null,ws(g,D,E),d.current.lanes=E,gc(d,E,b),Vi(d,b),d}function Pp(d,f,g,b){var E=f.current,D=Ni(),te=Od(E);return g=Q5(g),f.context===null?f.context=g:f.pendingContext=g,f=ys(D,te),f.payload={element:d},b=b===void 0?null:b,b!==null&&(f.callback=b),d=ws(E,f,te),d!==null&&(vl(d,E,te,D),Aa(d,E,te)),te}function Tp(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 5:return d.child.stateNode;default:return d.child.stateNode}}function tN(d,f){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var g=d.retryLane;d.retryLane=g!==0&&g<f?g:f}}function zg(d,f){tN(d,f),(d=d.alternate)&&tN(d,f)}function _P(){return null}var rN=typeof reportError=="function"?reportError:function(d){console.error(d)};function qg(d){this._internalRoot=d}Ip.prototype.render=qg.prototype.render=function(d){var f=this._internalRoot;if(f===null)throw Error(r(409));Pp(d,f,null,null)},Ip.prototype.unmount=qg.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var f=d.containerInfo;qu(function(){Pp(null,d,null,null)}),f[Ca]=null}};function Ip(d){this._internalRoot=d}Ip.prototype.unstable_scheduleHydration=function(d){if(d){var f=Ph();d={blockedOn:null,target:d,priority:f};for(var g=0;g<Ao.length&&f!==0&&f<Ao[g].priority;g++);Ao.splice(g,0,d),g===0&&Ih(d)}};function Hg(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function Dp(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11&&(d.nodeType!==8||d.nodeValue!==" react-mount-point-unstable "))}function nN(){}function CP(d,f,g,b,E){if(E){if(typeof b=="function"){var D=b;b=function(){var $e=Tp(te);D.call($e)}}var te=eN(f,b,d,0,null,!1,!1,"",nN);return d._reactRootContainer=te,d[Ca]=te.current,Rc(d.nodeType===8?d.parentNode:d),qu(),te}for(;E=d.lastChild;)d.removeChild(E);if(typeof b=="function"){var ve=b;b=function(){var $e=Tp(_e);ve.call($e)}}var _e=Vg(d,0,!1,null,null,!1,!1,"",nN);return d._reactRootContainer=_e,d[Ca]=_e.current,Rc(d.nodeType===8?d.parentNode:d),qu(function(){Pp(f,_e,g,b)}),_e}function Op(d,f,g,b,E){var D=g._reactRootContainer;if(D){var te=D;if(typeof E=="function"){var ve=E;E=function(){var _e=Tp(te);ve.call(_e)}}Pp(f,te,d,E)}else te=CP(g,f,d,E,b);return Tp(te)}dd=function(d){switch(d.tag){case 3:var f=d.stateNode;if(f.current.memoizedState.isDehydrated){var g=Dn(f.pendingLanes);g!==0&&(cd(f,g|1),Vi(f,ft()),(sn&6)===0&&(ef=ft()+500,F()))}break;case 13:qu(function(){var b=En(d,1);if(b!==null){var E=Ni();vl(b,d,1,E)}}),zg(d,1)}},bu=function(d){if(d.tag===13){var f=En(d,134217728);if(f!==null){var g=Ni();vl(f,d,134217728,g)}zg(d,134217728)}},kh=function(d){if(d.tag===13){var f=Od(d),g=En(d,f);if(g!==null){var b=Ni();vl(g,d,f,b)}zg(d,f)}},Ph=function(){return Zr},ud=function(d,f){var g=Zr;try{return Zr=d,f()}finally{Zr=g}},Cr=function(d,f,g){switch(f){case"input":if(tt(d,g),f=g.name,g.type==="radio"&&f!=null){for(g=d;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll("input[name="+JSON.stringify(""+f)+'][type="radio"]'),f=0;f<g.length;f++){var b=g[f];if(b!==d&&b.form===d.form){var E=Mu(b);if(!E)throw Error(r(90));Ue(b),tt(b,E)}}}break;case"textarea":Kt(d,g);break;case"select":f=g.value,f!=null&&Ve(d,!!g.multiple,f,!1)}},Sr=Lg,Kr=qu;var SP={usingClientEntryPoint:!1,Events:[Cd,Mc,Mu,yt,Lr,Lg]},Mm={findFiberByHostInstance:Gl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},AP={bundleType:Mm.bundleType,version:Mm.version,rendererPackageName:Mm.rendererPackageName,rendererConfig:Mm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:P.ReactCurrentDispatcher,findHostInstanceByFiber:function(d){return d=Ms(d),d===null?null:d.stateNode},findFiberByHostInstance:Mm.findFiberByHostInstance||_P,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rp.isDisabled&&Rp.supportsFiber)try{bn=Rp.inject(AP),Bs=Rp}catch{}}return zi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SP,zi.createPortal=function(d,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hg(f))throw Error(r(200));return jP(d,f,null,g)},zi.createRoot=function(d,f){if(!Hg(d))throw Error(r(299));var g=!1,b="",E=rN;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(b=f.identifierPrefix),f.onRecoverableError!==void 0&&(E=f.onRecoverableError)),f=Vg(d,1,!1,null,null,g,!1,b,E),d[Ca]=f.current,Rc(d.nodeType===8?d.parentNode:d),new qg(f)},zi.findDOMNode=function(d){if(d==null)return null;if(d.nodeType===1)return d;var f=d._reactInternals;if(f===void 0)throw typeof d.render=="function"?Error(r(188)):(d=Object.keys(d).join(","),Error(r(268,d)));return d=Ms(f),d=d===null?null:d.stateNode,d},zi.flushSync=function(d){return qu(d)},zi.hydrate=function(d,f,g){if(!Dp(f))throw Error(r(200));return Op(null,d,f,!0,g)},zi.hydrateRoot=function(d,f,g){if(!Hg(d))throw Error(r(405));var b=g!=null&&g.hydratedSources||null,E=!1,D="",te=rN;if(g!=null&&(g.unstable_strictMode===!0&&(E=!0),g.identifierPrefix!==void 0&&(D=g.identifierPrefix),g.onRecoverableError!==void 0&&(te=g.onRecoverableError)),f=eN(f,null,d,1,g??null,E,!1,D,te),d[Ca]=f.current,Rc(d),b)for(d=0;d<b.length;d++)g=b[d],E=g._getVersion,E=E(g._source),f.mutableSourceEagerHydrationData==null?f.mutableSourceEagerHydrationData=[g,E]:f.mutableSourceEagerHydrationData.push(g,E);return new Ip(f)},zi.render=function(d,f,g){if(!Dp(f))throw Error(r(200));return Op(null,d,f,!1,g)},zi.unmountComponentAtNode=function(d){if(!Dp(d))throw Error(r(40));return d._reactRootContainer?(qu(function(){Op(null,null,d,!1,function(){d._reactRootContainer=null,d[Ca]=null})}),!0):!1},zi.unstable_batchedUpdates=Lg,zi.unstable_renderSubtreeIntoContainer=function(d,f,g,b){if(!Dp(g))throw Error(r(200));if(d==null||d._reactInternals===void 0)throw Error(r(38));return Op(d,f,g,!1,b)},zi.version="18.3.1-next-f1338f8080-20240426",zi}var uN;function dC(){if(uN)return Kg.exports;uN=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Kg.exports=RP(),Kg.exports}var hN;function LP(){if(hN)return Lp;hN=1;var t=dC();return Lp.createRoot=t.createRoot,Lp.hydrateRoot=t.hydrateRoot,Lp}var FP=LP(),N=v1();const pt=g1(N),nw=cC({__proto__:null,default:pt},[N]);var I2=function(t,e){return I2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},I2(t,e)};function uC(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");I2(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var qo=function(){return qo=Object.assign||function(e){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},qo.apply(this,arguments)};function fu(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}function hC(t,e,r,n){var a=arguments.length,i=a<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,r,n);else for(var l=t.length-1;l>=0;l--)(o=t[l])&&(i=(a<3?o(i):a>3?o(e,r,i):o(e,r))||i);return a>3&&i&&Object.defineProperty(e,r,i),i}function fC(t,e){return function(r,n){e(r,n,t)}}function mC(t,e,r,n,a,i){function o(C){if(C!==void 0&&typeof C!="function")throw new TypeError("Function expected");return C}for(var l=n.kind,c=l==="getter"?"get":l==="setter"?"set":"value",u=!e&&t?n.static?t:t.prototype:null,h=e||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),m,x=!1,p=r.length-1;p>=0;p--){var y={};for(var w in n)y[w]=w==="access"?{}:n[w];for(var w in n.access)y.access[w]=n.access[w];y.addInitializer=function(C){if(x)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(C||null))};var j=(0,r[p])(l==="accessor"?{get:h.get,set:h.set}:h[c],y);if(l==="accessor"){if(j===void 0)continue;if(j===null||typeof j!="object")throw new TypeError("Object expected");(m=o(j.get))&&(h.get=m),(m=o(j.set))&&(h.set=m),(m=o(j.init))&&a.unshift(m)}else(m=o(j))&&(l==="field"?a.unshift(m):h[c]=m)}u&&Object.defineProperty(u,n.name,h),x=!0}function pC(t,e,r){for(var n=arguments.length>2,a=0;a<e.length;a++)r=n?e[a].call(t,r):e[a].call(t);return n?r:void 0}function xC(t){return typeof t=="symbol"?t:"".concat(t)}function gC(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function vC(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Qt(t,e,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(h){try{u(n.next(h))}catch(m){o(m)}}function c(h){try{u(n.throw(h))}catch(m){o(m)}}function u(h){h.done?i(h.value):a(h.value).then(l,c)}u((n=n.apply(t,e||[])).next())})}function yC(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(h){return c([u,h])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,a&&(i=u[0]&2?a.return:u[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,u[1])).done)return i;switch(a=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(h){u=[6,h],a=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var y1=Object.create?(function(t,e,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(e,r);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,a)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]});function wC(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&y1(e,t,r)}function Fx(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function sw(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),a,i=[],o;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(l){o={error:l}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}function bC(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(sw(arguments[e]));return t}function NC(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),a=0,e=0;e<r;e++)for(var i=arguments[e],o=0,l=i.length;o<l;o++,a++)n[a]=i[o];return n}function aw(t,e,r){if(r||arguments.length===2)for(var n=0,a=e.length,i;n<a;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}function $f(t){return this instanceof $f?(this.v=t,this):new $f(t)}function jC(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),a,i=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),a[Symbol.asyncIterator]=function(){return this},a;function o(p){return function(y){return Promise.resolve(y).then(p,m)}}function l(p,y){n[p]&&(a[p]=function(w){return new Promise(function(j,C){i.push([p,w,j,C])>1||c(p,w)})},y&&(a[p]=y(a[p])))}function c(p,y){try{u(n[p](y))}catch(w){x(i[0][3],w)}}function u(p){p.value instanceof $f?Promise.resolve(p.value.v).then(h,m):x(i[0][2],p)}function h(p){c("next",p)}function m(p){c("throw",p)}function x(p,y){p(y),i.shift(),i.length&&c(i[0][0],i[0][1])}}function _C(t){var e,r;return e={},n("next"),n("throw",function(a){throw a}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(a,i){e[a]=t[a]?function(o){return(r=!r)?{value:$f(t[a](o)),done:!1}:i?i(o):o}:i}}function CC(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Fx=="function"?Fx(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(o){return new Promise(function(l,c){o=t[i](o),a(l,c,o.done,o.value)})}}function a(i,o,l,c){Promise.resolve(c).then(function(u){i({value:u,done:l})},o)}}function SC(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var MP=Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e},D2=function(t){return D2=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},D2(t)};function AC(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=D2(t),n=0;n<r.length;n++)r[n]!=="default"&&y1(e,t,r[n]);return MP(e,t),e}function EC(t){return t&&t.__esModule?t:{default:t}}function kC(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function PC(t,e,r,n,a){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!a:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?a.call(t,r):a?a.value=r:e.set(t,r),r}function TC(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function IC(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,a;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(a=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");a&&(n=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}var BP=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};function DC(t){function e(i){t.error=t.hasError?new BP(i,t.error,"An error was suppressed during disposal."):i,t.hasError=!0}var r,n=0;function a(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(a);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(i).then(a,function(o){return e(o),a()})}else n|=1}catch(o){e(o)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return a()}function OC(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,a,i,o){return n?e?".jsx":".js":a&&(!i||!o)?r:a+i+"."+o.toLowerCase()+"js"}):t}const UP={__extends:uC,__assign:qo,__rest:fu,__decorate:hC,__param:fC,__esDecorate:mC,__runInitializers:pC,__propKey:xC,__setFunctionName:gC,__metadata:vC,__awaiter:Qt,__generator:yC,__createBinding:y1,__exportStar:wC,__values:Fx,__read:sw,__spread:bC,__spreadArrays:NC,__spreadArray:aw,__await:$f,__asyncGenerator:jC,__asyncDelegator:_C,__asyncValues:CC,__makeTemplateObject:SC,__importStar:AC,__importDefault:EC,__classPrivateFieldGet:kC,__classPrivateFieldSet:PC,__classPrivateFieldIn:TC,__addDisposableResource:IC,__disposeResources:DC,__rewriteRelativeImportExtension:OC},$P=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:IC,get __assign(){return qo},__asyncDelegator:_C,__asyncGenerator:jC,__asyncValues:CC,__await:$f,__awaiter:Qt,__classPrivateFieldGet:kC,__classPrivateFieldIn:TC,__classPrivateFieldSet:PC,__createBinding:y1,__decorate:hC,__disposeResources:DC,__esDecorate:mC,__exportStar:wC,__extends:uC,__generator:yC,__importDefault:EC,__importStar:AC,__makeTemplateObject:SC,__metadata:vC,__param:fC,__propKey:xC,__read:sw,__rest:fu,__rewriteRelativeImportExtension:OC,__runInitializers:pC,__setFunctionName:gC,__spread:bC,__spreadArray:aw,__spreadArrays:NC,__values:Fx,default:UP},Symbol.toStringTag,{value:"Module"})),VP=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class iw extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class fN extends iw{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class mN extends iw{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class pN extends iw{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var O2;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(O2||(O2={}));class zP{constructor(e,{headers:r={},customFetch:n,region:a=O2.Any}={}){this.url=e,this.headers=r,this.region=a,this.fetch=VP(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Qt(this,arguments,void 0,function*(r,n={}){var a;try{const{headers:i,method:o,body:l,signal:c}=n;let u={},{region:h}=n;h||(h=this.region);const m=new URL(`${this.url}/${r}`);h&&h!=="any"&&(u["x-region"]=h,m.searchParams.set("forceFunctionRegion",h));let x;l&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",x=l):typeof l=="string"?(u["Content-Type"]="text/plain",x=l):typeof FormData<"u"&&l instanceof FormData?x=l:(u["Content-Type"]="application/json",x=JSON.stringify(l)):x=l;const p=yield this.fetch(m.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),i),body:x,signal:c}).catch(C=>{throw C.name==="AbortError"?C:new fN(C)}),y=p.headers.get("x-relay-error");if(y&&y==="true")throw new mN(p);if(!p.ok)throw new pN(p);let w=((a=p.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),j;return w==="application/json"?j=yield p.json():w==="application/octet-stream"||w==="application/pdf"?j=yield p.blob():w==="text/event-stream"?j=p:w==="multipart/form-data"?j=yield p.formData():j=yield p.text(),{data:j,error:null,response:p}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new fN(i)}:{data:null,error:i,response:i instanceof pN||i instanceof mN?i.context:void 0}}})}}var ii={};const Qf=kP($P);var Fp={},Mp={},Bp={},Up={},$p={},Vp={},xN;function RC(){if(xN)return Vp;xN=1,Object.defineProperty(Vp,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Vp.default=t,Vp}var gN;function LC(){if(gN)return $p;gN=1,Object.defineProperty($p,"__esModule",{value:!0});const e=Qf.__importDefault(RC());class r{constructor(a){var i,o;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(i=a.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=a.signal,this.isMaybeSingle=(o=a.isMaybeSingle)!==null&&o!==void 0?o:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,i){return this.headers=new Headers(this.headers),this.headers.set(a,i),this}then(a,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let l=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var u,h,m,x;let p=null,y=null,w=null,j=c.status,C=c.statusText;if(c.ok){if(this.method!=="HEAD"){const O=await c.text();O===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?y=O:y=JSON.parse(O))}const k=(h=this.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),P=(m=c.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");k&&P&&P.length>1&&(w=parseInt(P[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(y)&&(y.length>1?(p={code:"PGRST116",details:`Results contain ${y.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},y=null,w=null,j=406,C="Not Acceptable"):y.length===1?y=y[0]:y=null)}else{const k=await c.text();try{p=JSON.parse(k),Array.isArray(p)&&c.status===404&&(y=[],p=null,j=200,C="OK")}catch{c.status===404&&k===""?(j=204,C="No Content"):p={message:k}}if(p&&this.isMaybeSingle&&(!((x=p?.details)===null||x===void 0)&&x.includes("0 rows"))&&(p=null,j=200,C="OK"),p&&this.shouldThrowOnError)throw new e.default(p)}return{error:p,data:y,count:w,status:j,statusText:C}});return this.shouldThrowOnError||(l=l.catch(c=>{var u,h,m;return{error:{message:`${(u=c?.name)!==null&&u!==void 0?u:"FetchError"}: ${c?.message}`,details:`${(h=c?.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(m=c?.code)!==null&&m!==void 0?m:""}`},data:null,count:null,status:0,statusText:""}})),l.then(a,i)}returns(){return this}overrideTypes(){return this}}return $p.default=r,$p}var vN;function FC(){if(vN)return Up;vN=1,Object.defineProperty(Up,"__esModule",{value:!0});const e=Qf.__importDefault(LC());class r extends e.default{select(a){let i=!1;const o=(a??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:i=!0,nullsFirst:o,foreignTable:l,referencedTable:c=l}={}){const u=c?`${c}.order`:"order",h=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${h?`${h},`:""}${a}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:i,referencedTable:o=i}={}){const l=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${a}`),this}range(a,i,{foreignTable:o,referencedTable:l=o}={}){const c=typeof l>"u"?"offset":`${l}.offset`,u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${a}`),this.url.searchParams.set(u,`${i-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:i=!1,settings:o=!1,buffers:l=!1,wal:c=!1,format:u="text"}={}){var h;const m=[a?"analyze":null,i?"verbose":null,o?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),x=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${x}"; options=${m};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return Up.default=r,Up}var yN;function ow(){if(yN)return Bp;yN=1,Object.defineProperty(Bp,"__esModule",{value:!0});const e=Qf.__importDefault(FC()),r=new RegExp("[,()]");class n extends e.default{eq(i,o){return this.url.searchParams.append(i,`eq.${o}`),this}neq(i,o){return this.url.searchParams.append(i,`neq.${o}`),this}gt(i,o){return this.url.searchParams.append(i,`gt.${o}`),this}gte(i,o){return this.url.searchParams.append(i,`gte.${o}`),this}lt(i,o){return this.url.searchParams.append(i,`lt.${o}`),this}lte(i,o){return this.url.searchParams.append(i,`lte.${o}`),this}like(i,o){return this.url.searchParams.append(i,`like.${o}`),this}likeAllOf(i,o){return this.url.searchParams.append(i,`like(all).{${o.join(",")}}`),this}likeAnyOf(i,o){return this.url.searchParams.append(i,`like(any).{${o.join(",")}}`),this}ilike(i,o){return this.url.searchParams.append(i,`ilike.${o}`),this}ilikeAllOf(i,o){return this.url.searchParams.append(i,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(i,o){return this.url.searchParams.append(i,`ilike(any).{${o.join(",")}}`),this}is(i,o){return this.url.searchParams.append(i,`is.${o}`),this}in(i,o){const l=Array.from(new Set(o)).map(c=>typeof c=="string"&&r.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(i,`in.(${l})`),this}contains(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cs.{${o.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(o)}`),this}containedBy(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cd.{${o.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(o)}`),this}rangeGt(i,o){return this.url.searchParams.append(i,`sr.${o}`),this}rangeGte(i,o){return this.url.searchParams.append(i,`nxl.${o}`),this}rangeLt(i,o){return this.url.searchParams.append(i,`sl.${o}`),this}rangeLte(i,o){return this.url.searchParams.append(i,`nxr.${o}`),this}rangeAdjacent(i,o){return this.url.searchParams.append(i,`adj.${o}`),this}overlaps(i,o){return typeof o=="string"?this.url.searchParams.append(i,`ov.${o}`):this.url.searchParams.append(i,`ov.{${o.join(",")}}`),this}textSearch(i,o,{config:l,type:c}={}){let u="";c==="plain"?u="pl":c==="phrase"?u="ph":c==="websearch"&&(u="w");const h=l===void 0?"":`(${l})`;return this.url.searchParams.append(i,`${u}fts${h}.${o}`),this}match(i){return Object.entries(i).forEach(([o,l])=>{this.url.searchParams.append(o,`eq.${l}`)}),this}not(i,o,l){return this.url.searchParams.append(i,`not.${o}.${l}`),this}or(i,{foreignTable:o,referencedTable:l=o}={}){const c=l?`${l}.or`:"or";return this.url.searchParams.append(c,`(${i})`),this}filter(i,o,l){return this.url.searchParams.append(i,`${o}.${l}`),this}}return Bp.default=n,Bp}var wN;function MC(){if(wN)return Mp;wN=1,Object.defineProperty(Mp,"__esModule",{value:!0});const e=Qf.__importDefault(ow());class r{constructor(a,{headers:i={},schema:o,fetch:l}){this.url=a,this.headers=new Headers(i),this.schema=o,this.fetch=l}select(a,i){const{head:o=!1,count:l}=i??{},c=o?"HEAD":"GET";let u=!1;const h=(a??"*").split("").map(m=>/\s/.test(m)&&!u?"":(m==='"'&&(u=!u),m)).join("");return this.url.searchParams.set("select",h),l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:i,defaultToNull:o=!0}={}){var l;const c="POST";if(i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const u=a.reduce((h,m)=>h.concat(Object.keys(m)),[]);if(u.length>0){const h=[...new Set(u)].map(m=>`"${m}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(a,{onConflict:i,ignoreDuplicates:o=!1,count:l,defaultToNull:c=!0}={}){var u;const h="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const m=a.reduce((x,p)=>x.concat(Object.keys(p)),[]);if(m.length>0){const x=[...new Set(m)].map(p=>`"${p}"`);this.url.searchParams.set("columns",x.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(a,{count:i}={}){var o;const l="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:a}={}){var i;const o="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return Mp.default=r,Mp}var bN;function qP(){if(bN)return Fp;bN=1,Object.defineProperty(Fp,"__esModule",{value:!0});const t=Qf,e=t.__importDefault(MC()),r=t.__importDefault(ow());class n{constructor(i,{headers:o={},schema:l,fetch:c}={}){this.url=i,this.headers=new Headers(o),this.schemaName=l,this.fetch=c}from(i){const o=new URL(`${this.url}/${i}`);return new e.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new n(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,o={},{head:l=!1,get:c=!1,count:u}={}){var h;let m;const x=new URL(`${this.url}/rpc/${i}`);let p;l||c?(m=l?"HEAD":"GET",Object.entries(o).filter(([w,j])=>j!==void 0).map(([w,j])=>[w,Array.isArray(j)?`{${j.join(",")}}`:`${j}`]).forEach(([w,j])=>{x.searchParams.append(w,j)})):(m="POST",p=o);const y=new Headers(this.headers);return u&&y.set("Prefer",`count=${u}`),new r.default({method:m,url:x,headers:y,schema:this.schemaName,body:p,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}}return Fp.default=n,Fp}var NN;function HP(){if(NN)return ii;NN=1,Object.defineProperty(ii,"__esModule",{value:!0}),ii.PostgrestError=ii.PostgrestBuilder=ii.PostgrestTransformBuilder=ii.PostgrestFilterBuilder=ii.PostgrestQueryBuilder=ii.PostgrestClient=void 0;const t=Qf,e=t.__importDefault(qP());ii.PostgrestClient=e.default;const r=t.__importDefault(MC());ii.PostgrestQueryBuilder=r.default;const n=t.__importDefault(ow());ii.PostgrestFilterBuilder=n.default;const a=t.__importDefault(FC());ii.PostgrestTransformBuilder=a.default;const i=t.__importDefault(LC());ii.PostgrestBuilder=i.default;const o=t.__importDefault(RC());return ii.PostgrestError=o.default,ii.default={PostgrestClient:e.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:i.default,PostgrestError:o.default},ii}var BC=HP();const UC=g1(BC),WP=cC({__proto__:null,default:UC},[BC]),{PostgrestClient:GP,PostgrestQueryBuilder:sre,PostgrestFilterBuilder:are,PostgrestTransformBuilder:ire,PostgrestBuilder:ore,PostgrestError:lre}=UC||WP;class KP{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,a=parseInt(n.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const YP="2.80.0",XP=`realtime-js/${YP}`,ZP="1.0.0",R2=1e4,JP=1e3,QP=100;var s0;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(s0||(s0={}));var xa;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(xa||(xa={}));var Al;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Al||(Al={}));var L2;(function(t){t.websocket="websocket"})(L2||(L2={}));var sh;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(sh||(sh={}));class eT{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const a=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(e.slice(o,o+a));o=o+a;const c=n.decode(e.slice(o,o+i));o=o+i;const u=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class $C{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Wn;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Wn||(Wn={}));const jN=(t,e,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((i,o)=>(i[o]=tT(o,t,e,a),i),{}):{}},tT=(t,e,r,n)=>{const a=e.find(l=>l.name===t),i=a?.type,o=r[t];return i&&!n.includes(i)?VC(i,o):F2(o)},VC=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return aT(e,r)}switch(t){case Wn.bool:return rT(e);case Wn.float4:case Wn.float8:case Wn.int2:case Wn.int4:case Wn.int8:case Wn.numeric:case Wn.oid:return nT(e);case Wn.json:case Wn.jsonb:return sT(e);case Wn.timestamp:return iT(e);case Wn.abstime:case Wn.date:case Wn.daterange:case Wn.int4range:case Wn.int8range:case Wn.money:case Wn.reltime:case Wn.text:case Wn.time:case Wn.timestamptz:case Wn.timetz:case Wn.tsrange:case Wn.tstzrange:return F2(e);default:return F2(e)}},F2=t=>t,rT=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},nT=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},sT=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},aT=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let i;const o=t.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>VC(e,l))}return t},iT=t=>typeof t=="string"?t.replace(" ","T"):t,zC=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Zg{constructor(e,r,n={},a=R2){this.channel=e,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var _N;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(_N||(_N={}));class a0{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=a0.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=a0.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=a0.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,a){const i=this.cloneDeep(e),o=this.transformState(r),l={},c={};return this.map(i,(u,h)=>{o[u]||(c[u]=h)}),this.map(o,(u,h)=>{const m=i[u];if(m){const x=h.map(j=>j.presence_ref),p=m.map(j=>j.presence_ref),y=h.filter(j=>p.indexOf(j.presence_ref)<0),w=m.filter(j=>x.indexOf(j.presence_ref)<0);y.length>0&&(l[u]=y),w.length>0&&(c[u]=w)}else l[u]=h}),this.syncDiff(i,{joins:l,leaves:c},n,a)}static syncDiff(e,r,n,a){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var u;const h=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(c),h.length>0){const m=e[l].map(p=>p.presence_ref),x=h.filter(p=>m.indexOf(p.presence_ref)<0);e[l].unshift(...x)}n(l,h,c)}),this.map(o,(l,c)=>{let u=e[l];if(!u)return;const h=c.map(m=>m.presence_ref);u=u.filter(m=>h.indexOf(m.presence_ref)<0),e[l]=u,a(l,u,c),u.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const a=e[n];return"metas"in a?r[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=a,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var CN;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(CN||(CN={}));var i0;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(i0||(i0={}));var Gc;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Gc||(Gc={}));class lw{constructor(e,r={config:{}},n){var a,i;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=xa.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Zg(this,Al.join,this.params,this.timeout),this.rejoinTimer=new $C(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=xa.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=xa.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=xa.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=xa.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=xa.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Al.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new a0(this),this.broadcastEndpointURL=zC(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==xa.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(p=>p.filter))!==null&&a!==void 0?a:[],h=!!this.bindings[i0.PRESENCE]&&this.bindings[i0.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,m={},x={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:h}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(p=>e?.(Gc.CHANNEL_ERROR,p)),this._onClose(()=>e?.(Gc.CLOSED)),this.updateJoinPayload(Object.assign({config:x},m)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:p})=>{var y;if(this.socket.setAuth(),p===void 0){e?.(Gc.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,j=(y=w?.length)!==null&&y!==void 0?y:0,C=[];for(let S=0;S<j;S++){const k=w[S],{filter:{event:P,schema:O,table:$,filter:R}}=k,B=p&&p[S];if(B&&B.event===P&&B.schema===O&&B.table===$&&B.filter===R)C.push(Object.assign(Object.assign({},k),{id:B.id}));else{this.unsubscribe(),this.state=xa.errored,e?.(Gc.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,e&&e(Gc.SUBSCRIBED);return}}).receive("error",p=>{this.state=xa.errored,e?.(Gc.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e?.(Gc.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===xa.joined&&e===i0.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async httpSend(e,r,n={}){var a;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(e,r={}){var n,a;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=xa.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Al.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new Zg(this,Al.leave,{},e),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=xa.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),o}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Zg(this,e,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>QP){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var a,i;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:u,join:h}=Al;if(n&&[l,c,u,h].indexOf(o)>=0&&n!==this._joinRef())return;let x=this._onMessage(o,r,n);if(r&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(p=>{var y,w,j;return((y=p.filter)===null||y===void 0?void 0:y.event)==="*"||((j=(w=p.filter)===null||w===void 0?void 0:w.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===o}).map(p=>p.callback(x,n)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var y,w,j,C,S,k;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const P=p.id,O=(y=p.filter)===null||y===void 0?void 0:y.event;return P&&((w=r.ids)===null||w===void 0?void 0:w.includes(P))&&(O==="*"||O?.toLocaleLowerCase()===((j=r.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))}else{const P=(S=(C=p?.filter)===null||C===void 0?void 0:C.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return P==="*"||P===((k=r?.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof x=="object"&&"ids"in x){const y=x.data,{schema:w,table:j,commit_timestamp:C,type:S,errors:k}=y;x=Object.assign(Object.assign({},{schema:w,table:j,commit_timestamp:C,eventType:S,new:{},old:{},errors:k}),this._getPayloadRecords(y))}p.callback(x,n)})}_isClosed(){return this.state===xa.closed}_isJoined(){return this.state===xa.joined}_isJoining(){return this.state===xa.joining}_isLeaving(){return this.state===xa.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const a=e.toLocaleLowerCase(),i={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&lw.isEqual(a.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Al.close,{},e)}_onError(e){this._on(Al.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=xa.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=jN(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=jN(e.columns,e.old_record)),r}}const Jg=()=>{},zp={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},oT=[1e3,2e3,5e3,1e4],lT=1e4,cT=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class dT{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=R2,this.transport=null,this.heartbeatIntervalMs=zp.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Jg,this.ref=0,this.reconnectTimer=null,this.logger=Jg,this.conn=null,this.sendBuffer=[],this.serializer=new eT,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...i)=>a(...i):(...i)=>fetch(...i),!(!((n=r?.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${L2.websocket}`,this.httpEndpoint=zC(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=KP.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ZP}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case s0.connecting:return sh.Connecting;case s0.open:return sh.Open;case s0.closing:return sh.Closing;default:return sh.Closed}}isConnected(){return this.connectionState()===sh.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new lw(`realtime:${e}`,r,this);return this.channels.push(i),i}}push(e){const{topic:r,event:n,payload:a,ref:i}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(JP,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},zp.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:a,payload:i,ref:o}=r,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${a} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(a,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Al.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${e}${n}${a}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([cT],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const a={access_token:r,version:XP};r&&n.updateJoinPayload(a),n.joinedOnce&&n._isJoined()&&n._push(Al.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new $C(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},zp.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,a,i,o,l,c,u,h;if(this.transport=(r=e?.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e?.timeout)!==null&&n!==void 0?n:R2,this.heartbeatIntervalMs=(a=e?.heartbeatIntervalMs)!==null&&a!==void 0?a:zp.HEARTBEAT_INTERVAL,this.worker=(i=e?.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e?.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=e?.heartbeatCallback)!==null&&l!==void 0?l:Jg,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e?.reconnectAfterMs)!==null&&c!==void 0?c:(m=>oT[m-1]||lT),this.encode=(u=e?.encode)!==null&&u!==void 0?u:((m,x)=>x(JSON.stringify(m))),this.decode=(h=e?.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class cw extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function _s(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class uT extends cw{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class M2 extends cw{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}const dw=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),hT=()=>Response,B2=t=>{if(Array.isArray(t))return t.map(r=>B2(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[a]=B2(n)}),e},fT=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Qg=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},mT=(t,e,r)=>Qt(void 0,void 0,void 0,function*(){const n=yield hT();t instanceof n&&!r?.noResolveJson?t.json().then(a=>{const i=t.status||500,o=a?.statusCode||i+"";e(new uT(Qg(a),i,o))}).catch(a=>{e(new M2(Qg(a),a))}):e(new M2(Qg(t),t))}),pT=(t,e,r,n)=>{const a={method:t,headers:e?.headers||{}};return t==="GET"||!n?a:(fT(n)?(a.headers=Object.assign({"Content-Type":"application/json"},e?.headers),a.body=JSON.stringify(n)):a.body=n,e?.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),r))};function O0(t,e,r,n,a,i){return Qt(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(r,pT(e,n,a,i)).then(c=>{if(!c.ok)throw c;return n?.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>mT(c,l,n))})})}function x0(t,e,r,n){return Qt(this,void 0,void 0,function*(){return O0(t,"GET",e,r,n)})}function Sl(t,e,r,n,a){return Qt(this,void 0,void 0,function*(){return O0(t,"POST",e,n,a,r)})}function U2(t,e,r,n,a){return Qt(this,void 0,void 0,function*(){return O0(t,"PUT",e,n,a,r)})}function xT(t,e,r,n){return Qt(this,void 0,void 0,function*(){return O0(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function uw(t,e,r,n,a){return Qt(this,void 0,void 0,function*(){return O0(t,"DELETE",e,n,a,r)})}class gT{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return Qt(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_s(e))return{data:null,error:e};throw e}})}}var qC;class vT{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r,this[qC]="BlobDownloadBuilder",this.promise=null}asStream(){return new gT(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.getPromise().then(e,r)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Qt(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(_s(e))return{data:null,error:e};throw e}})}}qC=Symbol.toStringTag;const yT={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},SN={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class wT{constructor(e,r={},n,a){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=n,this.fetch=dw(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,n,a){return Qt(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},SN),a);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),c&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),a?.headers&&(l=Object.assign(Object.assign({},l),a.headers));const u=this._removeEmptyFolders(r),h=this._getFinalPath(u),m=yield(e=="PUT"?U2:Sl)(this.fetch,`${this.url}/object/${h}`,i,Object.assign({headers:l},o?.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:m.Id,fullPath:m.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(_s(i))return{data:null,error:i};throw i}})}upload(e,r,n){return Qt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,a){return Qt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:SN.upsert},a),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType);const m=yield U2(this.fetch,l.toString(),c,{headers:h});return{data:{path:i,fullPath:m.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(_s(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,r){return Qt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const a=Object.assign({},this.headers);r?.upsert&&(a["x-upsert"]="true");const i=yield Sl(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new cw("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_s(n))return{data:null,error:n};throw n}})}update(e,r,n){return Qt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return Qt(this,void 0,void 0,function*(){try{return{data:yield Sl(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n?.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(_s(a))return{data:null,error:a};throw a}})}copy(e,r,n){return Qt(this,void 0,void 0,function*(){try{return{data:{path:(yield Sl(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(_s(a))return{data:null,error:a};throw a}})}createSignedUrl(e,r,n){return Qt(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),i=yield Sl(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n?.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n?.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(_s(a))return{data:null,error:a};throw a}})}createSignedUrls(e,r,n){return Qt(this,void 0,void 0,function*(){try{const a=yield Sl(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),i=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(_s(a))return{data:null,error:a};throw a}})}download(e,r){const a=typeof r?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(r?.transform||{}),o=i?`?${i}`:"",l=this._getFinalPath(e),c=()=>x0(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0});return new vT(c,this.shouldThrowOnError)}info(e){return Qt(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield x0(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:B2(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_s(n))return{data:null,error:n};throw n}})}exists(e){return Qt(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield xT(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_s(n)&&n instanceof M2){const a=n.originalError;if([400,404].includes(a?.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),a=[],i=r?.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&a.push(i);const l=typeof r?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(r?.transform||{});c!==""&&a.push(c);let u=a.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(e){return Qt(this,void 0,void 0,function*(){try{return{data:yield uw(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_s(r))return{data:null,error:r};throw r}})}list(e,r,n){return Qt(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},yT),r),{prefix:e||""});return{data:yield Sl(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(_s(a))return{data:null,error:a};throw a}})}listV2(e,r){return Qt(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield Sl(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_s(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const HC="2.80.0",WC={"X-Client-Info":`storage-js/${HC}`};class bT{constructor(e,r={},n,a){this.shouldThrowOnError=!1;const i=new URL(e);a?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},WC),r),this.fetch=dw(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return Qt(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(e);return{data:yield x0(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_s(r))return{data:null,error:r};throw r}})}getBucket(e){return Qt(this,void 0,void 0,function*(){try{return{data:yield x0(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_s(r))return{data:null,error:r};throw r}})}createBucket(e){return Qt(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield Sl(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(_s(a))return{data:null,error:a};throw a}})}updateBucket(e,r){return Qt(this,void 0,void 0,function*(){try{return{data:yield U2(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(_s(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Qt(this,void 0,void 0,function*(){try{return{data:yield Sl(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_s(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Qt(this,void 0,void 0,function*(){try{return{data:yield uw(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_s(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(e){const r={};return e&&("limit"in e&&(r.limit=String(e.limit)),"offset"in e&&(r.offset=String(e.offset)),e.search&&(r.search=e.search),e.sortColumn&&(r.sortColumn=e.sortColumn),e.sortOrder&&(r.sortOrder=e.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class NT{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},WC),r),this.fetch=dw(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Qt(this,void 0,void 0,function*(){try{return{data:yield Sl(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_s(r))return{data:null,error:r};throw r}})}listBuckets(e){return Qt(this,void 0,void 0,function*(){try{const r=new URLSearchParams;e?.limit!==void 0&&r.set("limit",e.limit.toString()),e?.offset!==void 0&&r.set("offset",e.offset.toString()),e?.sortColumn&&r.set("sortColumn",e.sortColumn),e?.sortOrder&&r.set("sortOrder",e.sortOrder),e?.search&&r.set("search",e.search);const n=r.toString(),a=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield x0(this.fetch,a,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_s(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Qt(this,void 0,void 0,function*(){try{return{data:yield uw(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(_s(r))return{data:null,error:r};throw r}})}}const hw={"X-Client-Info":`storage-js/${HC}`,"Content-Type":"application/json"};class GC extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function yo(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class ev extends GC{constructor(e,r,n){super(e),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class jT extends GC{constructor(e,r){super(e),this.name="StorageVectorsUnknownError",this.originalError=r}}var AN;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(AN||(AN={}));const fw=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),_T=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},EN=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),CT=(t,e,r)=>Qt(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!r?.noResolveJson){const a=t.status||500,i=t;if(typeof i.json=="function")i.json().then(o=>{const l=o?.statusCode||o?.code||a+"";e(new ev(EN(o),a,l))}).catch(()=>{const o=a+"",l=i.statusText||`HTTP ${a} error`;e(new ev(l,a,o))});else{const o=a+"",l=i.statusText||`HTTP ${a} error`;e(new ev(l,a,o))}}else e(new jT(EN(t),t))}),ST=(t,e,r,n)=>{const a={method:t,headers:e?.headers||{}};return n?(_T(n)?(a.headers=Object.assign({"Content-Type":"application/json"},e?.headers),a.body=JSON.stringify(n)):a.body=n,Object.assign(Object.assign({},a),r)):a};function AT(t,e,r,n,a,i){return Qt(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(r,ST(e,n,a,i)).then(c=>{if(!c.ok)throw c;if(n?.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>o(c)).catch(c=>CT(c,l,n))})})}function wo(t,e,r,n,a){return Qt(this,void 0,void 0,function*(){return AT(t,"POST",e,n,a,r)})}class ET{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},hw),r),this.fetch=fw(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return Qt(this,void 0,void 0,function*(){try{return{data:(yield wo(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yo(r))return{data:null,error:r};throw r}})}getIndex(e,r){return Qt(this,void 0,void 0,function*(){try{return{data:yield wo(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(yo(n))return{data:null,error:n};throw n}})}listIndexes(e){return Qt(this,void 0,void 0,function*(){try{return{data:yield wo(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yo(r))return{data:null,error:r};throw r}})}deleteIndex(e,r){return Qt(this,void 0,void 0,function*(){try{return{data:(yield wo(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(yo(n))return{data:null,error:n};throw n}})}}class kT{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},hw),r),this.fetch=fw(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return Qt(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield wo(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yo(r))return{data:null,error:r};throw r}})}getVectors(e){return Qt(this,void 0,void 0,function*(){try{return{data:yield wo(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yo(r))return{data:null,error:r};throw r}})}listVectors(e){return Qt(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield wo(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yo(r))return{data:null,error:r};throw r}})}queryVectors(e){return Qt(this,void 0,void 0,function*(){try{return{data:yield wo(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yo(r))return{data:null,error:r};throw r}})}deleteVectors(e){return Qt(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield wo(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yo(r))return{data:null,error:r};throw r}})}}class PT{constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},hw),r),this.fetch=fw(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Qt(this,void 0,void 0,function*(){try{return{data:(yield wo(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yo(r))return{data:null,error:r};throw r}})}getBucket(e){return Qt(this,void 0,void 0,function*(){try{return{data:yield wo(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yo(r))return{data:null,error:r};throw r}})}listBuckets(){return Qt(this,arguments,void 0,function*(e={}){try{return{data:yield wo(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yo(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Qt(this,void 0,void 0,function*(){try{return{data:(yield wo(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yo(r))return{data:null,error:r};throw r}})}}class TT extends PT{constructor(e,r={}){super(e,r.headers||{},r.fetch)}from(e){return new IT(this.url,this.headers,e,this.fetch)}}class IT extends ET{constructor(e,r,n,a){super(e,r,a),this.vectorBucketName=n}createIndex(e){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Qt(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Qt(this,arguments,void 0,function*(r={}){return e.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Qt(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Qt(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new DT(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class DT extends kT{constructor(e,r,n,a,i){super(e,r,i),this.vectorBucketName=n,this.indexName=a}putVectors(e){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Qt(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Qt(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Qt(this,arguments,void 0,function*(r={}){return e.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Qt(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Qt(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class OT extends bT{constructor(e,r={},n,a){super(e,r,n,a)}from(e){return new wT(this.url,this.headers,e,this.fetch)}get vectors(){return new TT(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new NT(this.url+"/iceberg",this.headers,this.fetch)}}const RT="2.80.0";let Ym="";typeof Deno<"u"?Ym="deno":typeof document<"u"?Ym="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ym="react-native":Ym="node";const LT={"X-Client-Info":`supabase-js-${Ym}/${RT}`},FT={headers:LT},MT={schema:"public"},BT={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},UT={},$T=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),VT=()=>Headers,zT=(t,e,r)=>{const n=$T(r),a=VT();return async(i,o)=>{var l;const c=(l=await e())!==null&&l!==void 0?l:t;let u=new a(o?.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:u}))}};function qT(t){return t.endsWith("/")?t:t+"/"}function HT(t,e){var r,n;const{db:a,auth:i,realtime:o,global:l}=t,{db:c,auth:u,realtime:h,global:m}=e,x={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},h),o),storage:{},global:Object.assign(Object.assign(Object.assign({},m),l),{headers:Object.assign(Object.assign({},(r=m?.headers)!==null&&r!==void 0?r:{}),(n=l?.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?x.accessToken=t.accessToken:delete x.accessToken,x}function WT(t){const e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(qT(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const KC="2.80.0",xf=30*1e3,$2=3,tv=$2*xf,GT="http://localhost:9999",KT="supabase.auth.token",YT={"X-Client-Info":`gotrue-js/${KC}`},V2="X-Supabase-Api-Version",YC={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},XT=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,ZT=600*1e3;class g0 extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function nr(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class JT extends g0{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function QT(t){return nr(t)&&t.name==="AuthApiError"}class ah extends g0{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class mu extends g0{constructor(e,r,n,a){super(e,n,a),this.name=r,this.status=n}}class bl extends mu{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function eI(t){return nr(t)&&t.name==="AuthSessionMissingError"}class rf extends mu{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class qp extends mu{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Hp extends mu{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function tI(t){return nr(t)&&t.name==="AuthImplicitGrantRedirectError"}class kN extends mu{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class z2 extends mu{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function rv(t){return nr(t)&&t.name==="AuthRetryableFetchError"}class PN extends mu{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class q2 extends mu{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Mx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),TN=` 	
\r=`.split(""),rI=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<TN.length;e+=1)t[TN[e].charCodeAt(0)]=-2;for(let e=0;e<Mx.length;e+=1)t[Mx[e].charCodeAt(0)]=e;return t})();function IN(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Mx[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Mx[n]),e.queuedBits-=6}}function XC(t,e,r){const n=rI[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function DN(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{aI(o,n,r)};for(let o=0;o<t.length;o+=1)XC(t.charCodeAt(o),a,i);return e.join("")}function nI(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function sI(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}nI(n,e)}}function aI(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if((t>>7-n&1)===0){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function Pf(t){const e=[],r={queue:0,queuedBits:0},n=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)XC(t.charCodeAt(a),r,n);return new Uint8Array(e)}function iI(t){const e=[];return sI(t,r=>e.push(r)),new Uint8Array(e)}function oh(t){const e=[],r={queue:0,queuedBits:0},n=a=>{e.push(a)};return t.forEach(a=>IN(a,r,n)),IN(null,r,n),e.join("")}function oI(t){return Math.round(Date.now()/1e3)+t}function lI(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const ui=()=>typeof window<"u"&&typeof document<"u",Ku={tested:!1,writable:!1},ZC=()=>{if(!ui())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ku.tested)return Ku.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Ku.tested=!0,Ku.writable=!0}catch{Ku.tested=!0,Ku.writable=!1}return Ku.writable};function cI(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{e[i]=a})}catch{}return r.searchParams.forEach((n,a)=>{e[a]=n}),e}const JC=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),dI=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",gf=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Yu=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Md=async(t,e)=>{await t.removeItem(e)};class w1{constructor(){this.promise=new w1.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}w1.promiseConstructor=Promise;function nv(t){const e=t.split(".");if(e.length!==3)throw new q2("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!XT.test(e[n]))throw new q2("JWT not in base64url format");return{header:JSON.parse(DN(e[0])),payload:JSON.parse(DN(e[1])),signature:Pf(e[2]),raw:{header:e[0],payload:e[1]}}}async function uI(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function hI(t,e){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){n(o);return}}catch(o){if(!e(i,o)){a(o);return}}})()})}function fI(t){return("0"+t.toString(16)).substr(-2)}function mI(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(e),Array.from(e,fI).join("")}async function pI(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function xI(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await pI(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function nf(t,e,r=!1){const n=mI();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await gf(t,`${e}-code-verifier`,a);const i=await xI(n);return[i,n===i?"plain":"s256"]}const gI=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function vI(t){const e=t.headers.get(V2);if(!e||!e.match(gI))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function yI(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function wI(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const bI=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function sf(t){if(!bI.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function sv(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function NI(t,e){return new Proxy(t,{get:(r,n,a)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,a)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,n,a)}})}function ON(t){return JSON.parse(JSON.stringify(t))}const eh=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),jI=[502,503,504];async function RN(t){var e;if(!dI(t))throw new z2(eh(t),0);if(jI.includes(t.status))throw new z2(eh(t),t.status);let r;try{r=await t.json()}catch(i){throw new ah(eh(i),i)}let n;const a=vI(t);if(a&&a.getTime()>=YC["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new PN(eh(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new bl}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new PN(eh(r),t.status,r.weak_password.reasons);throw new JT(eh(r),t.status||500,n)}const _I=(t,e,r,n)=>{const a={method:t,headers:e?.headers||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function Nr(t,e,r,n){var a;const i=Object.assign({},n?.headers);i[V2]||(i[V2]=YC["2024-01-01"].name),n?.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(a=n?.query)!==null&&a!==void 0?a:{};n?.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await CI(t,e,r+l,{headers:i,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(c):{data:Object.assign({},c),error:null}}async function CI(t,e,r,n,a,i){const o=_I(e,n,a,i);let l;try{l=await t(r,Object.assign({},o))}catch(c){throw console.error(c),new z2(eh(c),0)}if(l.ok||await RN(l),n?.noResolveJson)return l;try{return await l.json()}catch(c){await RN(c)}}function Nl(t){var e;let r=null;EI(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=oI(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function LN(t){const e=Nl(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Gd(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function SI(t){return{data:t,error:null}}function AI(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=t,o=fu(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function FN(t){return t}function EI(t){return t.access_token&&t.refresh_token&&t.expires_in}const av=["global","local","others"];class kI{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=JC(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=av[0]){if(av.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${av.join(", ")}`);try{return await Nr(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(nr(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await Nr(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Gd})}catch(n){if(nr(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=fu(e,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n?.newEmail,delete a.newEmail),await Nr(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:AI,redirectTo:r?.redirectTo})}catch(r){if(nr(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await Nr(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Gd})}catch(r){if(nr(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,a,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},h=await Nr(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:FN});if(h.error)throw h.error;const m=await h.json(),x=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(y=>{const w=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(y.split(";")[1].split("=")[1]);u[`${j}Page`]=w}),u.total=parseInt(x)),{data:Object.assign(Object.assign({},m),u),error:null}}catch(u){if(nr(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){sf(e);try{return await Nr(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Gd})}catch(r){if(nr(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){sf(e);try{return await Nr(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Gd})}catch(n){if(nr(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){sf(e);try{return await Nr(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Gd})}catch(n){if(nr(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){sf(e.userId);try{const{data:r,error:n}=await Nr(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(nr(r))return{data:null,error:r};throw r}}async _deleteFactor(e){sf(e.userId),sf(e.id);try{return{data:await Nr(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(nr(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,a,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},h=await Nr(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:FN});if(h.error)throw h.error;const m=await h.json(),x=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(y=>{const w=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(y.split(";")[1].split("=")[1]);u[`${j}Page`]=w}),u.total=parseInt(x)),{data:Object.assign(Object.assign({},m),u),error:null}}catch(u){if(nr(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await Nr(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(nr(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await Nr(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(nr(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await Nr(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(nr(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await Nr(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(nr(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await Nr(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(nr(r))return{data:null,error:r};throw r}}}function MN(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const af={debug:!!(globalThis&&ZC()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class QC extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class PI extends QC{}async function TI(t,e,r){af.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),af.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){af.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await r()}finally{af.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw af.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new PI(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(af.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function II(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function e6(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function DI(t){return parseInt(t,16)}function OI(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function RI(t){var e;const{chainId:r,domain:n,expirationTime:a,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:c,resources:u,scheme:h,uri:m,version:x}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!m)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(x!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${x}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const p=e6(t.address),y=h?`${h}://${n}`:n,w=t.statement?`${t.statement}
`:"",j=`${y} wants you to sign in with your Ethereum account:
${p}

${w}`;let C=`URI: ${m}
Version: ${x}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(a&&(C+=`
Expiration Time: ${a.toISOString()}`),l&&(C+=`
Not Before: ${l.toISOString()}`),c&&(C+=`
Request ID: ${c}`),u){let S=`
Resources:`;for(const k of u){if(!k||typeof k!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${k}`);S+=`
- ${k}`}C+=S}return`${j}
${C}`}class aa extends Error{constructor({message:e,code:r,cause:n,name:a}){var i;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=a??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class Bx extends aa{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function LI({error:t,options:e}){var r,n,a;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new aa({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new aa({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new aa({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new aa({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new aa({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new aa({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new aa({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new aa({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(t6(o)){if(i.rp.id!==o)return new aa({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new aa({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new aa({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new aa({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new aa({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function FI({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new aa({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new aa({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(t6(n)){if(r.rpId!==n)return new aa({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new aa({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new aa({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new aa({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class MI{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const BI=new MI;function UI(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,a=fu(t,["challenge","user","excludeCredentials"]),i=Pf(e).buffer,o=Object.assign(Object.assign({},r),{id:Pf(r.id).buffer}),l=Object.assign(Object.assign({},a),{challenge:i,user:o});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:Pf(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function $I(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=fu(t,["challenge","allowCredentials"]),a=Pf(e).buffer,i=Object.assign(Object.assign({},n),{challenge:a});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:Pf(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function VI(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:oh(new Uint8Array(t.response.attestationObject)),clientDataJSON:oh(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function zI(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),a=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:oh(new Uint8Array(a.authenticatorData)),clientDataJSON:oh(new Uint8Array(a.clientDataJSON)),signature:oh(new Uint8Array(a.signature)),userHandle:a.userHandle?oh(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function t6(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function BN(){var t,e;return!!(ui()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function qI(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Bx("Browser returned unexpected credential type",e)}:{data:null,error:new Bx("Empty credential response",e)}}catch(e){return{data:null,error:LI({error:e,options:t})}}}async function HI(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Bx("Browser returned unexpected credential type",e)}:{data:null,error:new Bx("Empty credential response",e)}}catch(e){return{data:null,error:FI({error:e,options:t})}}}const WI={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},GI={userVerification:"preferred",hints:["security-key"]};function Ux(...t){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),n={};for(const a of t)if(a)for(const i in a){const o=a[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(r(o))n[i]=o;else if(e(o)){const l=n[i];e(l)?n[i]=Ux(l,o):n[i]=Ux(o)}else n[i]=o}return n}function KI(t,e){return Ux(WI,t,e||{})}function YI(t,e){return Ux(GI,t,e||{})}class XI{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:a},i){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!o)return{data:null,error:l};const c=a??BI.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=KI(o.webauthn.credential_options.publicKey,i?.create),{data:h,error:m}=await qI({publicKey:u,signal:c});return h?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:m}}case"request":{const u=YI(o.webauthn.credential_options.publicKey,i?.request),{data:h,error:m}=await HI(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:c}));return h?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:m}}}}catch(o){return nr(o)?{data:null,error:o}:{data:null,error:new ah("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}},i){if(!r)return{data:null,error:new g0("rpId is required for WebAuthn authentication")};try{if(!BN())return{data:null,error:new ah("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:a},{request:i});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(o){return nr(o)?{data:null,error:o}:{data:null,error:new ah("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a},i){if(!r)return{data:null,error:new g0("rpId is required for WebAuthn registration")};try{if(!BN())return{data:null,error:new ah("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(h=>{var m;return(m=h.data)===null||m===void 0?void 0:m.all.find(x=>x.factor_type==="webauthn"&&x.friendly_name===e&&x.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h?.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:a},{create:i});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(o){return nr(o)?{data:null,error:o}:{data:null,error:new ah("Unexpected error in register",o)}}}}II();const ZI={url:GT,storageKey:KT,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:YT,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function UN(t,e,r){return await r()}const of={};class v0{get jwks(){var e,r;return(r=(e=of[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){of[this.storageKey]=Object.assign(Object.assign({},of[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=of[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){of[this.storageKey]=Object.assign(Object.assign({},of[this.storageKey]),{cachedAt:e})}constructor(e){var r,n,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},ZI),e);if(this.storageKey=i.storageKey,this.instanceID=(r=v0.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,v0.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&ui()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new kI({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=JC(i.fetch),this.lock=i.lock||UN,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:ui()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=TI:this.lock=UN,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new XI(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:ZC()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=MN(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=MN(this.memoryStorage)),ui()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${KC}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},n="none";if(ui()&&(r=cI(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),ui()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),tI(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return nr(r)?this._returnResult({error:r}):this._returnResult({error:new ah("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,a;try{const i=await Nr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e?.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=e?.options)===null||a===void 0?void 0:a.captchaToken}},xform:Nl}),{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(nr(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var r,n,a;try{let i;if("email"in e){const{email:h,password:m,options:x}=e;let p=null,y=null;this.flowType==="pkce"&&([p,y]=await nf(this.storage,this.storageKey)),i=await Nr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x?.emailRedirectTo,body:{email:h,password:m,data:(r=x?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:x?.captchaToken},code_challenge:p,code_challenge_method:y},xform:Nl})}else if("phone"in e){const{phone:h,password:m,options:x}=e;i=await Nr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:m,data:(n=x?.data)!==null&&n!==void 0?n:{},channel:(a=x?.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:x?.captchaToken}},xform:Nl})}else throw new qp("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(nr(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let r;if("email"in e){const{email:i,password:o,options:l}=e;r=await Nr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:LN})}else if("phone"in e){const{phone:i,password:o,options:l}=e;r=await Nr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:LN})}else throw new qp("You must provide either an email or phone number and a password");const{data:n,error:a}=r;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!n||!n.session||!n.user){const i=new rf;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(nr(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,n,a,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,a,i,o,l,c,u,h,m,x;let p,y;if("message"in e)p=e.message,y=e.signature;else{const{chain:w,wallet:j,statement:C,options:S}=e;let k;if(ui())if(typeof j=="object")k=j;else{const U=window;if("ethereum"in U&&typeof U.ethereum=="object"&&"request"in U.ethereum&&typeof U.ethereum.request=="function")k=U.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof j!="object"||!S?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=j}const P=new URL((r=S?.url)!==null&&r!==void 0?r:window.location.href),O=await k.request({method:"eth_requestAccounts"}).then(U=>U).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!O||O.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const $=e6(O[0]);let R=(n=S?.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!R){const U=await k.request({method:"eth_chainId"});R=DI(U)}const B={domain:P.host,address:$,statement:C,uri:P.href,version:"1",chainId:R,nonce:(a=S?.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(o=(i=S?.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=S?.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=S?.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=S?.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(h=S?.signInWithEthereum)===null||h===void 0?void 0:h.resources};p=RI(B),y=await k.request({method:"personal_sign",params:[OI(p),$]})}try{const{data:w,error:j}=await Nr(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:y},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(x=e.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Nl});if(j)throw j;if(!w||!w.session||!w.user){const C=new rf;return this._returnResult({data:{user:null,session:null},error:C})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:j})}catch(w){if(nr(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async signInWithSolana(e){var r,n,a,i,o,l,c,u,h,m,x,p;let y,w;if("message"in e)y=e.message,w=e.signature;else{const{chain:j,wallet:C,statement:S,options:k}=e;let P;if(ui())if(typeof C=="object")P=C;else{const $=window;if("solana"in $&&typeof $.solana=="object"&&("signIn"in $.solana&&typeof $.solana.signIn=="function"||"signMessage"in $.solana&&typeof $.solana.signMessage=="function"))P=$.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!k?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");P=C}const O=new URL((r=k?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in P&&P.signIn){const $=await P.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},k?.signInWithSolana),{version:"1",domain:O.host,uri:O.href}),S?{statement:S}:null));let R;if(Array.isArray($)&&$[0]&&typeof $[0]=="object")R=$[0];else if($&&typeof $=="object"&&"signedMessage"in $&&"signature"in $)R=$;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in R&&"signature"in R&&(typeof R.signedMessage=="string"||R.signedMessage instanceof Uint8Array)&&R.signature instanceof Uint8Array)y=typeof R.signedMessage=="string"?R.signedMessage:new TextDecoder().decode(R.signedMessage),w=R.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in P)||typeof P.signMessage!="function"||!("publicKey"in P)||typeof P!="object"||!P.publicKey||!("toBase58"in P.publicKey)||typeof P.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${O.host} wants you to sign in with your Solana account:`,P.publicKey.toBase58(),...S?["",S,""]:[""],"Version: 1",`URI: ${O.href}`,`Issued At: ${(a=(n=k?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=k?.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${k.signInWithSolana.notBefore}`]:[],...!((o=k?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${k.signInWithSolana.expirationTime}`]:[],...!((l=k?.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${k.signInWithSolana.chainId}`]:[],...!((c=k?.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${k.signInWithSolana.nonce}`]:[],...!((u=k?.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${k.signInWithSolana.requestId}`]:[],...!((m=(h=k?.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||m===void 0)&&m.length?["Resources",...k.signInWithSolana.resources.map(R=>`- ${R}`)]:[]].join(`
`);const $=await P.signMessage(new TextEncoder().encode(y),"utf8");if(!$||!($ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=$}}try{const{data:j,error:C}=await Nr(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:oh(w)},!((x=e.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Nl});if(C)throw C;if(!j||!j.session||!j.user){const S=new rf;return this._returnResult({data:{user:null,session:null},error:S})}return j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),this._returnResult({data:Object.assign({},j),error:C})}catch(j){if(nr(j))return this._returnResult({data:{user:null,session:null},error:j});throw j}}async _exchangeCodeForSession(e){const r=await Yu(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{const{data:i,error:o}=await Nr(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Nl});if(await Md(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const l=new rf;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(nr(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:r,provider:n,token:a,access_token:i,nonce:o}=e,l=await Nr(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Nl}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const h=new rf;return this._returnResult({data:{user:null,session:null},error:h})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if(nr(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,n,a,i,o;try{if("email"in e){const{email:l,options:c}=e;let u=null,h=null;this.flowType==="pkce"&&([u,h]=await nf(this.storage,this.storageKey));const{error:m}=await Nr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c?.data)!==null&&r!==void 0?r:{},create_user:(n=c?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:u,code_challenge_method:h},redirectTo:c?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:m})}if("phone"in e){const{phone:l,options:c}=e,{data:u,error:h}=await Nr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c?.data)!==null&&a!==void 0?a:{},create_user:(i=c?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(o=c?.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u?.message_id},error:h})}throw new qp("You must provide either an email or phone number.")}catch(l){if(nr(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(e){var r,n;try{let a,i;"options"in e&&(a=(r=e.options)===null||r===void 0?void 0:r.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await Nr(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Nl});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c?.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(nr(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(e){var r,n,a;try{let i=null,o=null;this.flowType==="pkce"&&([i,o]=await nf(this.storage,this.storageKey));const l=await Nr(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=e?.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:SI});return this._returnResult(l)}catch(i){if(nr(i))return this._returnResult({data:null,error:i});throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new bl;const{error:a}=await Nr(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(e){if(nr(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:a,options:i}=e,{error:o}=await Nr(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i?.captchaToken}},redirectTo:i?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:n,type:a,options:i}=e,{data:o,error:l}=await Nr(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o?.message_id},error:l})}throw new qp("You must provide either an email or phone number and a type")}catch(r){if(nr(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Yu(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<tv:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await Yu(this.userStorage,this.storageKey+"-user");o?.user?e.user=o.user:e.user=sv()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=NI(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Nr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Gd}):await this._useSession(async r=>{var n,a,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new bl}:await Nr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:Gd})})}catch(r){if(nr(r))return eI(r)&&(await this._removeSession(),await Md(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new bl;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await nf(this.storage,this.storageKey));const{data:u,error:h}=await Nr(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Gd});if(h)throw h;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(nr(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new bl;const r=Date.now()/1e3;let n=r,a=!0,i=null;const{payload:o}=nv(e.access_token);if(o.exp&&(n=o.exp,a=n<=r),a){const{data:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(nr(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:o,error:l}=r;if(l)throw l;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!e?.refresh_token)throw new bl;const{data:a,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(nr(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!ui())throw new Hp("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Hp(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new kN("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Hp("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new kN("No code detected.");const{data:S,error:k}=await this._exchangeCodeForSession(e.code);if(k)throw k;const P=new URL(window.location.href);return P.searchParams.delete("code"),window.history.replaceState(window.history.state,"",P.toString()),{data:{session:S.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=e;if(!i||!l||!o||!u)throw new Hp("No session defined in URL");const h=Math.round(Date.now()/1e3),m=parseInt(l);let x=h+m;c&&(x=parseInt(c));const p=x-h;p*1e3<=xf&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${m}s`);const y=x-m;h-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,x,h):h-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,x,h);const{data:w,error:j}=await this._getUser(i);if(j)throw j;const C={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:m,expires_at:x,refresh_token:o,token_type:u,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:C,redirectType:e.type},error:null})}catch(n){if(nr(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Yu(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({error:i});const o=(n=a.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(QT(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return e!=="others"&&(await this._removeSession(),await Md(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=lI(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,a;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await nf(this.storage,this.storageKey,!0));try{return await Nr(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(nr(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(nr(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:a}=await this._useSession(async i=>{var o,l,c,u,h;const{data:m,error:x}=i;if(x)throw x;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Nr(this.fetch,"GET",p,{headers:this.headers,jwt:(h=(u=m.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0})});if(a)throw a;return ui()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n?.url),this._returnResult({data:{provider:e.provider,url:n?.url},error:null})}catch(n){if(nr(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:a,data:{session:i}}=r;if(a)throw a;const{options:o,provider:l,token:c,access_token:u,nonce:h}=e,m=await Nr(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i?.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:u,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:Nl}),{data:x,error:p}=m;return p?this._returnResult({data:{user:null,session:null},error:p}):!x||!x.session||!x.user?this._returnResult({data:{user:null,session:null},error:new rf}):(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("USER_UPDATED",x.session)),this._returnResult({data:x,error:p}))}catch(a){if(nr(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)throw o;return await Nr(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(nr(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await hI(async a=>(a>0&&await uI(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await Nr(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Nl})),(a,i)=>{const o=200*Math.pow(2,a);return i&&rv(i)&&Date.now()+o-n<xf})}catch(n){if(this._debug(r,"error",n),nr(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),ui()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await Yu(this.storage,this.storageKey);if(a&&this.userStorage){let o=await Yu(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await gf(this.userStorage,this.storageKey+"-user",o)),a.user=(e=o?.user)!==null&&e!==void 0?e:sv()}else if(a&&!a.user&&!a.user){const o=await Yu(this.storage,this.storageKey+"-user");o&&o?.user?(a.user=o.user,await Md(this.storage,this.storageKey+"-user"),await gf(this.storage,this.storageKey,a)):a.user=sv()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<tv;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${tv}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),rv(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&o?.user?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new bl;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new w1;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new bl;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),nr(i)){const o={data:null,error:i};return rv(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,r,n=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await gf(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const i=ON(a);await gf(this.storage,this.storageKey,i)}else{const a=ON(r);await gf(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Md(this.storage,this.storageKey),await Md(this.storage,this.storageKey+"-code-verifier"),await Md(this.storage,this.storageKey+"-user"),this.userStorage&&await Md(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ui()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),xf);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-e)/xf);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${xf}ms, refresh threshold is ${$2} ticks`),a<=$2&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof QC)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ui()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n?.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await nf(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(n?.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n?.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?this._returnResult({data:null,error:i}):await Nr(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=a?.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(nr(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:c,error:u}=await Nr(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(e.factorType==="totp"&&c.type==="totp"&&(!((a=c?.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(nr(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?VI(e.webauthn.credential_response):zI(e.webauthn.credential_response)})}:{code:e.code}),{data:l,error:c}=await Nr(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=a?.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(r){if(nr(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await Nr(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=a?.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:UI(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:$I(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(nr(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const a={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=r?.factors)!==null&&e!==void 0?e:[])a.all.push(i),i.status==="verified"&&a[i.factor_type].push(i);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:n},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=nv(n.access_token);let o=null;i.aal&&(o=i.aal);let l=o;((r=(e=n.user.factors)===null||e===void 0?void 0:e.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=i.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?await Nr(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new bl})})}catch(r){if(nr(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new bl});const o=await Nr(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&ui()&&!r?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(n){if(nr(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new bl});const o=await Nr(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&ui()&&!r?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(n){if(nr(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(l=>l.kid===e);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(l=>l.kid===e),n&&this.jwks_cached_at+ZT>a)return n;const{data:i,error:o}=await Nr(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,n=i.keys.find(l=>l.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:p,error:y}=await this.getSession();if(y||!p.session)return this._returnResult({data:null,error:y});n=p.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:c}}=nv(n);r?.allowExpired||yI(i.exp);const u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!u){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:i,header:a,signature:o},error:null}}const h=wI(a.alg),m=await crypto.subtle.importKey("jwk",u,h,!0,["verify"]);if(!await crypto.subtle.verify(h,m,o,iI(`${l}.${c}`)))throw new q2("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(n){if(nr(n))return this._returnResult({data:null,error:n});throw n}}}v0.nextInstanceID={};const JI=v0;class QI extends JI{constructor(e){super(e)}}class e9{constructor(e,r,n){var a,i,o;this.supabaseUrl=e,this.supabaseKey=r;const l=WT(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:MT,realtime:UT,auth:Object.assign(Object.assign({},BT),{storageKey:c}),global:FT},h=HT(n??{},u);this.storageKey=(a=h.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(m,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=zT(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new GP(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new OT(this.storageUrl.href,this.headers,this.fetch,n?.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new zP(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:i,storageKey:o,flowType:l,lock:c,debug:u,throwOnError:h},m,x){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new QI({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),m),storageKey:o,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:i,flowType:l,lock:c,debug:u,throwOnError:h,fetch:x,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new dT(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n?.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const t9=(t,e,r)=>new e9(t,e,r);function r9(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}r9()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const n9="https://eajlufywoqxtvamgdtcu.supabase.co",s9="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVhamx1Znl3b3F4dHZhbWdkdGN1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIyMDYxOTQsImV4cCI6MjA3Nzc4MjE5NH0.4JxicxEkRsciYJjk0z3AZyUX38A9xEZKeDu87-4YAVo",Qe=t9(n9,s9),a9=Object.freeze(Object.defineProperty({__proto__:null,supabaseClient:Qe},Symbol.toStringTag,{value:"Module"})),$N={async login({email:t,password:e}){try{const{data:r,error:n}=await Qe.auth.signInWithPassword({email:t,password:e});if(n)throw console.error("Auth error:",JSON.stringify(n,null,2)),n.status===429||n.message?.toLowerCase().includes("rate limit")?new Error("Too many login attempts. Please wait a few minutes and try again."):new Error(n.message);if(!r.session)throw new Error("No session created");let a=null;try{const o=await Qe.from("users").select("*").eq("email",t).maybeSingle();a=o.data||null,o.error&&console.error("User fetch (by email) error:",JSON.stringify(o.error,null,2))}catch(o){console.error("Exception during user fetch (by email):",o)}let i=a||null;if(!i)throw console.error("No user profile found for email",{email:t}),new Error("Could not fetch user profile");if(!i.active)throw new Error("Account is not active");return{user:{...i,token:r.session.access_token}}}catch(r){throw r}},async logout(){const{error:t}=await Qe.auth.signOut();if(t)throw t}},r6=N.createContext(void 0);function i9({children:t}){const[e,r]=N.useState(null),[n,a]=N.useState(!1),[i,o]=N.useState(null),l=async(u,h)=>{try{o(null);const{user:m}=await $N.login({email:u,password:h});return r(m),a(!0),m}catch(m){throw o(m instanceof Error?m.message:"Authentication failed"),m}},c=async()=>{try{await $N.logout(),r(null),a(!1),o(null)}catch(u){throw o(u instanceof Error?u.message:"Logout failed"),u}};return s.jsx(r6.Provider,{value:{user:e,role:e?.role??null,isAuthenticated:n,login:l,logout:c,error:i},children:t})}function Ka(){const t=N.useContext(r6);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o9=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l9=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,n)=>n?n.toUpperCase():r.toLowerCase()),VN=t=>{const e=l9(t);return e.charAt(0).toUpperCase()+e.slice(1)},n6=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var c9={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d9=N.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:o,...l},c)=>N.createElement("svg",{ref:c,...c9,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:n6("lucide",a),...l},[...o.map(([u,h])=>N.createElement(u,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=(t,e)=>{const r=N.forwardRef(({className:n,...a},i)=>N.createElement(d9,{ref:i,iconNode:e,className:n6(`lucide-${o9(VN(t))}`,`lucide-${t}`,n),...a}));return r.displayName=VN(t),r};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u9=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],lc=ut("activity",u9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h9=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],Wi=ut("archive",h9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f9=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],$x=ut("arrow-down",f9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m9=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ln=ut("arrow-left",m9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p9=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],H2=ut("arrow-right",p9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x9=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],Vx=ut("arrow-up-down",x9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g9=[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]],W2=ut("arrow-up-narrow-wide",g9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v9=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],zx=ut("arrow-up",v9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y9=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],s6=ut("badge-check",y9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]],a6=ut("ban",w9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b9=[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M8 5v14",key:"1ybrkv"}],["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"M17 5v14",key:"ycjyhj"}],["path",{d:"M21 5v14",key:"nzette"}]],i6=ut("barcode",b9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N9=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],xh=ut("bell",N9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j9=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],mw=ut("briefcase",j9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _9=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],Ga=ut("building-2",_9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C9=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Zo=ut("calendar",C9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S9=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Ls=ut("camera",S9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A9=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],o6=ut("chart-column",A9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E9=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],kl=ut("check",E9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k9=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],qx=ut("chevron-down",k9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P9=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],zN=ut("chevron-left",P9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T9=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Xr=ut("chevron-right",T9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I9=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],D9=ut("chevron-up",I9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Kn=ut("circle-alert",O9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R9=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Hs=ut("circle-check-big",R9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],kr=ut("circle-check",L9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],l6=ut("circle-help",F9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]],B9=ut("circle-play",M9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],y0=ut("circle-x",U9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $9=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],V9=ut("clipboard-check",$9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z9=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],q9=ut("clipboard-list",z9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Ws=ut("clock",H9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W9=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],iv=ut("copy",W9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G9=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Ai=ut("download",G9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K9=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],R0=ut("ellipsis-vertical",K9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y9=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],pw=ut("external-link",Y9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X9=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],o0=ut("eye-off",X9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z9=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],hs=ut("eye",Z9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J9=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],Q9=ut("file-down",J9);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eD=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],hr=ut("file-text",eD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tD=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]],xw=ut("file-up",tD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rD=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Hx=ut("funnel",rD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nD=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],c6=ut("graduation-cap",nD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sD=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Kd=ut("history",sD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aD=[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]],iD=ut("hourglass",aD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oD=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],lD=ut("house",oD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cD=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],dD=ut("image",cD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Vf=ut("info",uD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hD=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Wx=ut("key",hD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fD=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],mD=ut("link",fD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pD=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],xD=ut("list",pD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gD=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Xd=ut("loader-circle",gD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vD=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],Gx=ut("lock-open",vD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yD=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],fs=ut("lock",yD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wD=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],bD=ut("log-in",wD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ND=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],su=ut("log-out",ND);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jD=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],Mn=ut("mail",jD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Jo=ut("map-pin",_D);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CD=[["path",{d:"M18 8c0 3.613-3.869 7.429-5.393 8.795a1 1 0 0 1-1.214 0C9.87 15.429 6 11.613 6 8a6 6 0 0 1 12 0",key:"11u0oz"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M8.714 14h-3.71a1 1 0 0 0-.948.683l-2.004 6A1 1 0 0 0 3 22h18a1 1 0 0 0 .948-1.316l-2-6a1 1 0 0 0-.949-.684h-3.712",key:"q8zwxj"}]],L0=ut("map-pinned",CD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SD=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],b1=ut("menu",SD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Kx=ut("message-square",AD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ED=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],cc=ut("monitor",ED);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kD=[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]],PD=ut("palette",kD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TD=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],F0=ut("paperclip",TD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ID=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],DD=ut("pen",ID);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OD=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],Yi=ut("phone",OD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RD=[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]],zf=ut("pill",RD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],qN=ut("play",LD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Da=ut("plus",FD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MD=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],vf=ut("printer",MD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BD=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Pl=ut("refresh-cw",BD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UD=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],bf=ut("rotate-ccw",UD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $D=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],gw=ut("save",$D);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VD=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]],zD=ut("scan-line",VD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qD=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]],Yx=ut("scan",qD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HD=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Zi=ut("search",HD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WD=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],d6=ut("send",WD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],au=ut("settings",GD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Gi=ut("shield",KD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],u6=ut("sliders-horizontal",YD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XD=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],M0=ut("smartphone",XD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZD=[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],HN=ut("square-check-big",ZD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JD=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],jh=ut("square-pen",JD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QD=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],eO=ut("square",QD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tO=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],WN=ut("star",tO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rO=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],iu=ut("trash-2",rO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nO=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],w0=ut("trending-up",nO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sO=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],go=ut("triangle-alert",sO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aO=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],Xm=ut("undo-2",aO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iO=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Ei=ut("upload",iO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oO=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],yx=ut("user-check",oO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lO=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],uh=ut("user-plus",lO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cO=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Bn=ut("user",cO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dO=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Rs=ut("users",dO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uO=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Tf=ut("wifi-off",uO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hO=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],h6=ut("wifi",hO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fO=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ps=ut("x",fO);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mO=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],pO=ut("zap",mO);function GN(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function fc(...t){return e=>{let r=!1;const n=t.map(a=>{const i=GN(a,e);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():GN(t[a],null)}}}}function Wr(...t){return N.useCallback(fc(...t),t)}var xO=Symbol.for("react.lazy"),Xx=nw[" use ".trim().toString()];function gO(t){return typeof t=="object"&&t!==null&&"then"in t}function f6(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===xO&&"_payload"in t&&gO(t._payload)}function B0(t){const e=vO(t),r=N.forwardRef((n,a)=>{let{children:i,...o}=n;f6(i)&&typeof Xx=="function"&&(i=Xx(i._payload));const l=N.Children.toArray(i),c=l.find(wO);if(c){const u=c.props.children,h=l.map(m=>m===c?N.Children.count(u)>1?N.Children.only(null):N.isValidElement(u)?u.props.children:null:m);return s.jsx(e,{...o,ref:a,children:N.isValidElement(u)?N.cloneElement(u,void 0,h):null})}return s.jsx(e,{...o,ref:a,children:i})});return r.displayName=`${t}.Slot`,r}var m6=B0("Slot");function vO(t){const e=N.forwardRef((r,n)=>{let{children:a,...i}=r;if(f6(a)&&typeof Xx=="function"&&(a=Xx(a._payload)),N.isValidElement(a)){const o=NO(a),l=bO(i,a.props);return a.type!==N.Fragment&&(l.ref=n?fc(n,o):o),N.cloneElement(a,l)}return N.Children.count(a)>1?N.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var yO=Symbol("radix.slottable");function wO(t){return N.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===yO}function bO(t,e){const r={...e};for(const n in e){const a=t[n],i=e[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...t,...r}}function NO(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function p6(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(r=p6(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function x6(){for(var t,e,r=0,n="",a=arguments.length;r<a;r++)(t=arguments[r])&&(e=p6(t))&&(n&&(n+=" "),n+=e);return n}const KN=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,YN=x6,vw=(t,e)=>r=>{var n;if(e?.variants==null)return YN(t,r?.class,r?.className);const{variants:a,defaultVariants:i}=e,o=Object.keys(a).map(u=>{const h=r?.[u],m=i?.[u];if(h===null)return null;const x=KN(h)||KN(m);return a[u][x]}),l=r&&Object.entries(r).reduce((u,h)=>{let[m,x]=h;return x===void 0||(u[m]=x),u},{}),c=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((u,h)=>{let{class:m,className:x,...p}=h;return Object.entries(p).every(y=>{let[w,j]=y;return Array.isArray(j)?j.includes({...i,...l}[w]):{...i,...l}[w]===j})?[...u,m,x]:u},[]);return YN(t,o,c,r?.class,r?.className)},yw="-",jO=t=>{const e=CO(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:o=>{const l=o.split(yw);return l[0]===""&&l.length!==1&&l.shift(),g6(l,e)||_O(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},g6=(t,e)=>{if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),a=n?g6(t.slice(1),n):void 0;if(a)return a;if(e.validators.length===0)return;const i=t.join(yw);return e.validators.find(({validator:o})=>o(i))?.classGroupId},XN=/^\[(.+)\]$/,_O=t=>{if(XN.test(t)){const e=XN.exec(t)[1],r=e?.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},CO=t=>{const{theme:e,classGroups:r}=t,n={nextPart:new Map,validators:[]};for(const a in r)G2(r[a],n,a,e);return n},G2=(t,e,r,n)=>{t.forEach(a=>{if(typeof a=="string"){const i=a===""?e:ZN(e,a);i.classGroupId=r;return}if(typeof a=="function"){if(SO(a)){G2(a(n),e,r,n);return}e.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([i,o])=>{G2(o,ZN(e,i),r,n)})})},ZN=(t,e)=>{let r=t;return e.split(yw).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},SO=t=>t.isThemeGetter,AO=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;const a=(i,o)=>{r.set(i,o),e++,e>t&&(e=0,n=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return a(i,o),o},set(i,o){r.has(i)?r.set(i,o):a(i,o)}}},K2="!",Y2=":",EO=Y2.length,kO=t=>{const{prefix:e,experimentalParseClassName:r}=t;let n=a=>{const i=[];let o=0,l=0,c=0,u;for(let y=0;y<a.length;y++){let w=a[y];if(o===0&&l===0){if(w===Y2){i.push(a.slice(c,y)),c=y+EO;continue}if(w==="/"){u=y;continue}}w==="["?o++:w==="]"?o--:w==="("?l++:w===")"&&l--}const h=i.length===0?a:a.substring(c),m=PO(h),x=m!==h,p=u&&u>c?u-c:void 0;return{modifiers:i,hasImportantModifier:x,baseClassName:m,maybePostfixModifierPosition:p}};if(e){const a=e+Y2,i=n;n=o=>o.startsWith(a)?i(o.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(r){const a=n;n=i=>r({className:i,parseClassName:a})}return n},PO=t=>t.endsWith(K2)?t.substring(0,t.length-1):t.startsWith(K2)?t.substring(1):t,TO=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(n=>[n,!0]));return n=>{if(n.length<=1)return n;const a=[];let i=[];return n.forEach(o=>{o[0]==="["||e[o]?(a.push(...i.sort(),o),i=[]):i.push(o)}),a.push(...i.sort()),a}},IO=t=>({cache:AO(t.cacheSize),parseClassName:kO(t),sortModifiers:TO(t),...jO(t)}),DO=/\s+/,OO=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a,sortModifiers:i}=e,o=[],l=t.trim().split(DO);let c="";for(let u=l.length-1;u>=0;u-=1){const h=l[u],{isExternal:m,modifiers:x,hasImportantModifier:p,baseClassName:y,maybePostfixModifierPosition:w}=r(h);if(m){c=h+(c.length>0?" "+c:c);continue}let j=!!w,C=n(j?y.substring(0,w):y);if(!C){if(!j){c=h+(c.length>0?" "+c:c);continue}if(C=n(y),!C){c=h+(c.length>0?" "+c:c);continue}j=!1}const S=i(x).join(":"),k=p?S+K2:S,P=k+C;if(o.includes(P))continue;o.push(P);const O=a(C,j);for(let $=0;$<O.length;++$){const R=O[$];o.push(k+R)}c=h+(c.length>0?" "+c:c)}return c};function RO(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=v6(e))&&(n&&(n+=" "),n+=r);return n}const v6=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=v6(t[n]))&&(r&&(r+=" "),r+=e);return r};function LO(t,...e){let r,n,a,i=o;function o(c){const u=e.reduce((h,m)=>m(h),t());return r=IO(u),n=r.cache.get,a=r.cache.set,i=l,l(c)}function l(c){const u=n(c);if(u)return u;const h=OO(c,r);return a(c,h),h}return function(){return i(RO.apply(null,arguments))}}const pa=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},y6=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,w6=/^\((?:(\w[\w-]*):)?(.+)\)$/i,FO=/^\d+\/\d+$/,MO=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,BO=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,UO=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,$O=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,VO=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,lf=t=>FO.test(t),Ur=t=>!!t&&!Number.isNaN(Number(t)),Bd=t=>!!t&&Number.isInteger(Number(t)),ov=t=>t.endsWith("%")&&Ur(t.slice(0,-1)),qc=t=>MO.test(t),zO=()=>!0,qO=t=>BO.test(t)&&!UO.test(t),b6=()=>!1,HO=t=>$O.test(t),WO=t=>VO.test(t),GO=t=>!$t(t)&&!Vt(t),KO=t=>em(t,_6,b6),$t=t=>y6.test(t),Xu=t=>em(t,C6,qO),lv=t=>em(t,QO,Ur),JN=t=>em(t,N6,b6),YO=t=>em(t,j6,WO),Wp=t=>em(t,S6,HO),Vt=t=>w6.test(t),Um=t=>tm(t,C6),XO=t=>tm(t,eR),QN=t=>tm(t,N6),ZO=t=>tm(t,_6),JO=t=>tm(t,j6),Gp=t=>tm(t,S6,!0),em=(t,e,r)=>{const n=y6.exec(t);return n?n[1]?e(n[1]):r(n[2]):!1},tm=(t,e,r=!1)=>{const n=w6.exec(t);return n?n[1]?e(n[1]):r:!1},N6=t=>t==="position"||t==="percentage",j6=t=>t==="image"||t==="url",_6=t=>t==="length"||t==="size"||t==="bg-size",C6=t=>t==="length",QO=t=>t==="number",eR=t=>t==="family-name",S6=t=>t==="shadow",tR=()=>{const t=pa("color"),e=pa("font"),r=pa("text"),n=pa("font-weight"),a=pa("tracking"),i=pa("leading"),o=pa("breakpoint"),l=pa("container"),c=pa("spacing"),u=pa("radius"),h=pa("shadow"),m=pa("inset-shadow"),x=pa("text-shadow"),p=pa("drop-shadow"),y=pa("blur"),w=pa("perspective"),j=pa("aspect"),C=pa("ease"),S=pa("animate"),k=()=>["auto","avoid","all","avoid-page","page","left","right","column"],P=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],O=()=>[...P(),Vt,$t],$=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto","contain","none"],B=()=>[Vt,$t,c],U=()=>[lf,"full","auto",...B()],K=()=>[Bd,"none","subgrid",Vt,$t],M=()=>["auto",{span:["full",Bd,Vt,$t]},Bd,Vt,$t],q=()=>[Bd,"auto",Vt,$t],re=()=>["auto","min","max","fr",Vt,$t],ee=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],H=()=>["start","end","center","stretch","center-safe","end-safe"],se=()=>["auto",...B()],ue=()=>[lf,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...B()],G=()=>[t,Vt,$t],J=()=>[...P(),QN,JN,{position:[Vt,$t]}],oe=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Y=()=>["auto","cover","contain",ZO,KO,{size:[Vt,$t]}],L=()=>[ov,Um,Xu],z=()=>["","none","full",u,Vt,$t],V=()=>["",Ur,Um,Xu],W=()=>["solid","dashed","dotted","double"],Q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],T=()=>[Ur,ov,QN,JN],ie=()=>["","none",y,Vt,$t],ge=()=>["none",Ur,Vt,$t],we=()=>["none",Ur,Vt,$t],Se=()=>[Ur,Vt,$t],Ue=()=>[lf,"full",...B()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[qc],breakpoint:[qc],color:[zO],container:[qc],"drop-shadow":[qc],ease:["in","out","in-out"],font:[GO],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[qc],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[qc],shadow:[qc],spacing:["px",Ur],text:[qc],"text-shadow":[qc],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",lf,$t,Vt,j]}],container:["container"],columns:[{columns:[Ur,$t,Vt,l]}],"break-after":[{"break-after":k()}],"break-before":[{"break-before":k()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:O()}],overflow:[{overflow:$()}],"overflow-x":[{"overflow-x":$()}],"overflow-y":[{"overflow-y":$()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:U()}],"inset-x":[{"inset-x":U()}],"inset-y":[{"inset-y":U()}],start:[{start:U()}],end:[{end:U()}],top:[{top:U()}],right:[{right:U()}],bottom:[{bottom:U()}],left:[{left:U()}],visibility:["visible","invisible","collapse"],z:[{z:[Bd,"auto",Vt,$t]}],basis:[{basis:[lf,"full","auto",l,...B()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ur,lf,"auto","initial","none",$t]}],grow:[{grow:["",Ur,Vt,$t]}],shrink:[{shrink:["",Ur,Vt,$t]}],order:[{order:[Bd,"first","last","none",Vt,$t]}],"grid-cols":[{"grid-cols":K()}],"col-start-end":[{col:M()}],"col-start":[{"col-start":q()}],"col-end":[{"col-end":q()}],"grid-rows":[{"grid-rows":K()}],"row-start-end":[{row:M()}],"row-start":[{"row-start":q()}],"row-end":[{"row-end":q()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":re()}],"auto-rows":[{"auto-rows":re()}],gap:[{gap:B()}],"gap-x":[{"gap-x":B()}],"gap-y":[{"gap-y":B()}],"justify-content":[{justify:[...ee(),"normal"]}],"justify-items":[{"justify-items":[...H(),"normal"]}],"justify-self":[{"justify-self":["auto",...H()]}],"align-content":[{content:["normal",...ee()]}],"align-items":[{items:[...H(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...H(),{baseline:["","last"]}]}],"place-content":[{"place-content":ee()}],"place-items":[{"place-items":[...H(),"baseline"]}],"place-self":[{"place-self":["auto",...H()]}],p:[{p:B()}],px:[{px:B()}],py:[{py:B()}],ps:[{ps:B()}],pe:[{pe:B()}],pt:[{pt:B()}],pr:[{pr:B()}],pb:[{pb:B()}],pl:[{pl:B()}],m:[{m:se()}],mx:[{mx:se()}],my:[{my:se()}],ms:[{ms:se()}],me:[{me:se()}],mt:[{mt:se()}],mr:[{mr:se()}],mb:[{mb:se()}],ml:[{ml:se()}],"space-x":[{"space-x":B()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":B()}],"space-y-reverse":["space-y-reverse"],size:[{size:ue()}],w:[{w:[l,"screen",...ue()]}],"min-w":[{"min-w":[l,"screen","none",...ue()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[o]},...ue()]}],h:[{h:["screen","lh",...ue()]}],"min-h":[{"min-h":["screen","lh","none",...ue()]}],"max-h":[{"max-h":["screen","lh",...ue()]}],"font-size":[{text:["base",r,Um,Xu]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,Vt,lv]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",ov,$t]}],"font-family":[{font:[XO,$t,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,Vt,$t]}],"line-clamp":[{"line-clamp":[Ur,"none",Vt,lv]}],leading:[{leading:[i,...B()]}],"list-image":[{"list-image":["none",Vt,$t]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Vt,$t]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:G()}],"text-color":[{text:G()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...W(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ur,"from-font","auto",Vt,Xu]}],"text-decoration-color":[{decoration:G()}],"underline-offset":[{"underline-offset":[Ur,"auto",Vt,$t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:B()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Vt,$t]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Vt,$t]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:J()}],"bg-repeat":[{bg:oe()}],"bg-size":[{bg:Y()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Bd,Vt,$t],radial:["",Vt,$t],conic:[Bd,Vt,$t]},JO,YO]}],"bg-color":[{bg:G()}],"gradient-from-pos":[{from:L()}],"gradient-via-pos":[{via:L()}],"gradient-to-pos":[{to:L()}],"gradient-from":[{from:G()}],"gradient-via":[{via:G()}],"gradient-to":[{to:G()}],rounded:[{rounded:z()}],"rounded-s":[{"rounded-s":z()}],"rounded-e":[{"rounded-e":z()}],"rounded-t":[{"rounded-t":z()}],"rounded-r":[{"rounded-r":z()}],"rounded-b":[{"rounded-b":z()}],"rounded-l":[{"rounded-l":z()}],"rounded-ss":[{"rounded-ss":z()}],"rounded-se":[{"rounded-se":z()}],"rounded-ee":[{"rounded-ee":z()}],"rounded-es":[{"rounded-es":z()}],"rounded-tl":[{"rounded-tl":z()}],"rounded-tr":[{"rounded-tr":z()}],"rounded-br":[{"rounded-br":z()}],"rounded-bl":[{"rounded-bl":z()}],"border-w":[{border:V()}],"border-w-x":[{"border-x":V()}],"border-w-y":[{"border-y":V()}],"border-w-s":[{"border-s":V()}],"border-w-e":[{"border-e":V()}],"border-w-t":[{"border-t":V()}],"border-w-r":[{"border-r":V()}],"border-w-b":[{"border-b":V()}],"border-w-l":[{"border-l":V()}],"divide-x":[{"divide-x":V()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":V()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...W(),"hidden","none"]}],"divide-style":[{divide:[...W(),"hidden","none"]}],"border-color":[{border:G()}],"border-color-x":[{"border-x":G()}],"border-color-y":[{"border-y":G()}],"border-color-s":[{"border-s":G()}],"border-color-e":[{"border-e":G()}],"border-color-t":[{"border-t":G()}],"border-color-r":[{"border-r":G()}],"border-color-b":[{"border-b":G()}],"border-color-l":[{"border-l":G()}],"divide-color":[{divide:G()}],"outline-style":[{outline:[...W(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ur,Vt,$t]}],"outline-w":[{outline:["",Ur,Um,Xu]}],"outline-color":[{outline:G()}],shadow:[{shadow:["","none",h,Gp,Wp]}],"shadow-color":[{shadow:G()}],"inset-shadow":[{"inset-shadow":["none",m,Gp,Wp]}],"inset-shadow-color":[{"inset-shadow":G()}],"ring-w":[{ring:V()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:G()}],"ring-offset-w":[{"ring-offset":[Ur,Xu]}],"ring-offset-color":[{"ring-offset":G()}],"inset-ring-w":[{"inset-ring":V()}],"inset-ring-color":[{"inset-ring":G()}],"text-shadow":[{"text-shadow":["none",x,Gp,Wp]}],"text-shadow-color":[{"text-shadow":G()}],opacity:[{opacity:[Ur,Vt,$t]}],"mix-blend":[{"mix-blend":[...Q(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Q()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ur]}],"mask-image-linear-from-pos":[{"mask-linear-from":T()}],"mask-image-linear-to-pos":[{"mask-linear-to":T()}],"mask-image-linear-from-color":[{"mask-linear-from":G()}],"mask-image-linear-to-color":[{"mask-linear-to":G()}],"mask-image-t-from-pos":[{"mask-t-from":T()}],"mask-image-t-to-pos":[{"mask-t-to":T()}],"mask-image-t-from-color":[{"mask-t-from":G()}],"mask-image-t-to-color":[{"mask-t-to":G()}],"mask-image-r-from-pos":[{"mask-r-from":T()}],"mask-image-r-to-pos":[{"mask-r-to":T()}],"mask-image-r-from-color":[{"mask-r-from":G()}],"mask-image-r-to-color":[{"mask-r-to":G()}],"mask-image-b-from-pos":[{"mask-b-from":T()}],"mask-image-b-to-pos":[{"mask-b-to":T()}],"mask-image-b-from-color":[{"mask-b-from":G()}],"mask-image-b-to-color":[{"mask-b-to":G()}],"mask-image-l-from-pos":[{"mask-l-from":T()}],"mask-image-l-to-pos":[{"mask-l-to":T()}],"mask-image-l-from-color":[{"mask-l-from":G()}],"mask-image-l-to-color":[{"mask-l-to":G()}],"mask-image-x-from-pos":[{"mask-x-from":T()}],"mask-image-x-to-pos":[{"mask-x-to":T()}],"mask-image-x-from-color":[{"mask-x-from":G()}],"mask-image-x-to-color":[{"mask-x-to":G()}],"mask-image-y-from-pos":[{"mask-y-from":T()}],"mask-image-y-to-pos":[{"mask-y-to":T()}],"mask-image-y-from-color":[{"mask-y-from":G()}],"mask-image-y-to-color":[{"mask-y-to":G()}],"mask-image-radial":[{"mask-radial":[Vt,$t]}],"mask-image-radial-from-pos":[{"mask-radial-from":T()}],"mask-image-radial-to-pos":[{"mask-radial-to":T()}],"mask-image-radial-from-color":[{"mask-radial-from":G()}],"mask-image-radial-to-color":[{"mask-radial-to":G()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":P()}],"mask-image-conic-pos":[{"mask-conic":[Ur]}],"mask-image-conic-from-pos":[{"mask-conic-from":T()}],"mask-image-conic-to-pos":[{"mask-conic-to":T()}],"mask-image-conic-from-color":[{"mask-conic-from":G()}],"mask-image-conic-to-color":[{"mask-conic-to":G()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:J()}],"mask-repeat":[{mask:oe()}],"mask-size":[{mask:Y()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Vt,$t]}],filter:[{filter:["","none",Vt,$t]}],blur:[{blur:ie()}],brightness:[{brightness:[Ur,Vt,$t]}],contrast:[{contrast:[Ur,Vt,$t]}],"drop-shadow":[{"drop-shadow":["","none",p,Gp,Wp]}],"drop-shadow-color":[{"drop-shadow":G()}],grayscale:[{grayscale:["",Ur,Vt,$t]}],"hue-rotate":[{"hue-rotate":[Ur,Vt,$t]}],invert:[{invert:["",Ur,Vt,$t]}],saturate:[{saturate:[Ur,Vt,$t]}],sepia:[{sepia:["",Ur,Vt,$t]}],"backdrop-filter":[{"backdrop-filter":["","none",Vt,$t]}],"backdrop-blur":[{"backdrop-blur":ie()}],"backdrop-brightness":[{"backdrop-brightness":[Ur,Vt,$t]}],"backdrop-contrast":[{"backdrop-contrast":[Ur,Vt,$t]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ur,Vt,$t]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ur,Vt,$t]}],"backdrop-invert":[{"backdrop-invert":["",Ur,Vt,$t]}],"backdrop-opacity":[{"backdrop-opacity":[Ur,Vt,$t]}],"backdrop-saturate":[{"backdrop-saturate":[Ur,Vt,$t]}],"backdrop-sepia":[{"backdrop-sepia":["",Ur,Vt,$t]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":B()}],"border-spacing-x":[{"border-spacing-x":B()}],"border-spacing-y":[{"border-spacing-y":B()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Vt,$t]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ur,"initial",Vt,$t]}],ease:[{ease:["linear","initial",C,Vt,$t]}],delay:[{delay:[Ur,Vt,$t]}],animate:[{animate:["none",S,Vt,$t]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[w,Vt,$t]}],"perspective-origin":[{"perspective-origin":O()}],rotate:[{rotate:ge()}],"rotate-x":[{"rotate-x":ge()}],"rotate-y":[{"rotate-y":ge()}],"rotate-z":[{"rotate-z":ge()}],scale:[{scale:we()}],"scale-x":[{"scale-x":we()}],"scale-y":[{"scale-y":we()}],"scale-z":[{"scale-z":we()}],"scale-3d":["scale-3d"],skew:[{skew:Se()}],"skew-x":[{"skew-x":Se()}],"skew-y":[{"skew-y":Se()}],transform:[{transform:[Vt,$t,"","none","gpu","cpu"]}],"transform-origin":[{origin:O()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ue()}],"translate-x":[{"translate-x":Ue()}],"translate-y":[{"translate-y":Ue()}],"translate-z":[{"translate-z":Ue()}],"translate-none":["translate-none"],accent:[{accent:G()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:G()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Vt,$t]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":B()}],"scroll-mx":[{"scroll-mx":B()}],"scroll-my":[{"scroll-my":B()}],"scroll-ms":[{"scroll-ms":B()}],"scroll-me":[{"scroll-me":B()}],"scroll-mt":[{"scroll-mt":B()}],"scroll-mr":[{"scroll-mr":B()}],"scroll-mb":[{"scroll-mb":B()}],"scroll-ml":[{"scroll-ml":B()}],"scroll-p":[{"scroll-p":B()}],"scroll-px":[{"scroll-px":B()}],"scroll-py":[{"scroll-py":B()}],"scroll-ps":[{"scroll-ps":B()}],"scroll-pe":[{"scroll-pe":B()}],"scroll-pt":[{"scroll-pt":B()}],"scroll-pr":[{"scroll-pr":B()}],"scroll-pb":[{"scroll-pb":B()}],"scroll-pl":[{"scroll-pl":B()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Vt,$t]}],fill:[{fill:["none",...G()]}],"stroke-w":[{stroke:[Ur,Um,Xu,lv]}],stroke:[{stroke:["none",...G()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},rR=LO(tR);function xr(...t){return rR(x6(t))}const ww=vw("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),de=N.forwardRef(({className:t,variant:e,size:r,asChild:n=!1,...a},i)=>{const o=n?m6:"button";return s.jsx(o,{"data-slot":"button",className:xr(ww({variant:e,size:r,className:t})),ref:i,...a})});de.displayName="Button";function Ze({className:t,type:e,...r}){return s.jsx("input",{type:e,"data-slot":"input",className:xr("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...r})}var U0=dC();const A6=g1(U0);var nR=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],sR=nR.reduce((t,e)=>{const r=B0(`Primitive.${e}`),n=N.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{}),aR="Label",E6=N.forwardRef((t,e)=>s.jsx(sR.label,{...t,ref:e,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(t.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));E6.displayName=aR;var iR=E6;function Fe({className:t,...e}){return s.jsx(iR,{"data-slot":"label",className:xr("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...e})}function ej({navigation:t}){const{login:e,user:r}=Ka(),[n,a]=N.useState(""),[i,o]=N.useState(""),[l,c]=N.useState(""),[u,h]=N.useState(!1),m=async()=>{if(c(""),h(!0),!n||!i){c("Please enter both email and password"),h(!1);return}try{const p=await e(n,i),y={clinician:"ClinicianDashboard",agency_admin:"AgencyAdminDashboard",scheduler:"SchedulerDashboard",super_admin:"SuperAdminDashboard"};p&&y[p.role]?t.navigate(y[p.role]):c("Unable to determine user role")}catch(p){c(p instanceof Error?p.message:"Login failed. Please check your credentials.")}finally{h(!1)}},x=p=>{p.key==="Enter"&&m()};return s.jsx("div",{className:"h-full overflow-y-auto bg-gradient-to-br from-[#f8fafc] via-white to-[#E0F2FE]",children:s.jsx("div",{className:"min-h-full flex items-center justify-center p-6",children:s.jsxs("div",{className:"w-full max-w-md space-y-8",children:[s.jsxs("div",{className:"text-center space-y-4",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 bg-gradient-to-r from-[#E0F2FE] to-[#D1FAE5] text-[#0C4A6E] px-4 py-2 rounded-full text-xs",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-[#10B981] animate-pulse"}),s.jsx("span",{children:"Home Health Medication Management"})]}),s.jsxs("div",{className:"flex items-center justify-center gap-4",children:[s.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-[#0966CC] to-[#10B981] flex items-center justify-center shadow-xl",children:s.jsx(lc,{className:"w-9 h-9 text-white"})}),s.jsx("h1",{className:"text-4xl text-[#0f172a] leading-tight",children:"Luminous Rehab"})]}),s.jsx("p",{className:"text-[#64748b] text-sm px-4",children:"Sign in to access your portal"})]}),s.jsxs("div",{className:"bg-white rounded-2xl p-8 border border-[#e2e8f0] shadow-lg space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl text-[#0f172a] mb-2",children:"Welcome back"}),s.jsx("p",{className:"text-sm text-[#64748b]",children:"Enter your credentials to continue"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"email",className:"text-[#0f172a]",children:"Email Address"}),s.jsxs("div",{className:"relative mt-2",children:[s.jsx(Mn,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-[#94a3b8]"}),s.jsx(Ze,{id:"email",type:"email",value:n,onChange:p=>a(p.target.value),onKeyPress:x,placeholder:"your.email@example.com",className:"pl-12 h-12 rounded-xl border-2 border-[#e2e8f0] focus:border-[#0966CC]"})]})]}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"password",className:"text-[#0f172a]",children:"Password"}),s.jsxs("div",{className:"relative mt-2",children:[s.jsx(fs,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-[#94a3b8]"}),s.jsx(Ze,{id:"password",type:"password",value:i,onChange:p=>o(p.target.value),onKeyPress:x,placeholder:"Enter your password",className:"pl-12 h-12 rounded-xl border-2 border-[#e2e8f0] focus:border-[#0966CC]"})]})]}),l&&s.jsx("div",{className:"bg-[#FEE2E2] border border-[#FECACA] text-[#DC2626] px-4 py-3 rounded-xl text-sm",children:l}),s.jsx(de,{onClick:m,disabled:u,className:"w-full h-12 bg-gradient-to-r from-[#0966CC] to-[#10B981] hover:from-[#075592] hover:to-[#059669] text-white rounded-xl disabled:opacity-50 disabled:cursor-not-allowed",children:u?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"animate-spin mr-2",children:""}),"Signing In..."]}):s.jsxs(s.Fragment,{children:[s.jsx(bD,{className:"w-5 h-5 mr-2"}),"Sign In"]})}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("button",{onClick:()=>t.navigate("PasswordReset"),className:"text-[#0966CC] hover:underline",children:"Forgot password?"}),s.jsx("button",{onClick:()=>t.navigate("AccountActivation"),className:"text-[#0966CC] hover:underline",children:"Activate your account"})]})]})]})]})})})}function oR(t,e){const r=N.createContext(e),n=i=>{const{children:o,...l}=i,c=N.useMemo(()=>l,Object.values(l));return s.jsx(r.Provider,{value:c,children:o})};n.displayName=t+"Provider";function a(i){const o=N.useContext(r);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[n,a]}function _o(t,e=[]){let r=[];function n(i,o){const l=N.createContext(o),c=r.length;r=[...r,o];const u=m=>{const{scope:x,children:p,...y}=m,w=x?.[t]?.[c]||l,j=N.useMemo(()=>y,Object.values(y));return s.jsx(w.Provider,{value:j,children:p})};u.displayName=i+"Provider";function h(m,x){const p=x?.[t]?.[c]||l,y=N.useContext(p);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${i}\``)}return[u,h]}const a=()=>{const i=r.map(o=>N.createContext(o));return function(l){const c=l?.[t]||i;return N.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return a.scopeName=t,[n,lR(a,...e)]}function lR(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const m=c(i)[`__scope${u}`];return{...l,...m}},{});return N.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}function Pt(t,e,{checkForDefaultPrevented:r=!0}={}){return function(a){if(t?.(a),r===!1||!a.defaultPrevented)return e?.(a)}}var wa=globalThis?.document?N.useLayoutEffect:()=>{},cR=nw[" useInsertionEffect ".trim().toString()]||wa;function dc({prop:t,defaultProp:e,onChange:r=()=>{},caller:n}){const[a,i,o]=dR({defaultProp:e,onChange:r}),l=t!==void 0,c=l?t:a;{const h=N.useRef(t!==void 0);N.useEffect(()=>{const m=h.current;m!==l&&console.warn(`${n} is changing from ${m?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=l},[l,n])}const u=N.useCallback(h=>{if(l){const m=uR(h)?h(t):h;m!==t&&o.current?.(m)}else i(h)},[l,t,i,o]);return[c,u]}function dR({defaultProp:t,onChange:e}){const[r,n]=N.useState(t),a=N.useRef(r),i=N.useRef(e);return cR(()=>{i.current=e},[e]),N.useEffect(()=>{a.current!==r&&(i.current?.(r),a.current=r)},[r,a]),[r,n,i]}function uR(t){return typeof t=="function"}function bw(t){const e=N.useRef({value:t,previous:t});return N.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}function Nw(t){const[e,r]=N.useState(void 0);return wa(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=t.offsetWidth,l=t.offsetHeight;r({width:o,height:l})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),e}function hR(t,e){return N.useReducer((r,n)=>e[r][n]??r,t)}var Qi=t=>{const{present:e,children:r}=t,n=fR(e),a=typeof r=="function"?r({present:n.isPresent}):N.Children.only(r),i=Wr(n.ref,mR(a));return typeof r=="function"||n.isPresent?N.cloneElement(a,{ref:i}):null};Qi.displayName="Presence";function fR(t){const[e,r]=N.useState(),n=N.useRef(null),a=N.useRef(t),i=N.useRef("none"),o=t?"mounted":"unmounted",[l,c]=hR(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return N.useEffect(()=>{const u=Kp(n.current);i.current=l==="mounted"?u:"none"},[l]),wa(()=>{const u=n.current,h=a.current;if(h!==t){const x=i.current,p=Kp(u);t?c("MOUNT"):p==="none"||u?.display==="none"?c("UNMOUNT"):c(h&&x!==p?"ANIMATION_OUT":"UNMOUNT"),a.current=t}},[t,c]),wa(()=>{if(e){let u;const h=e.ownerDocument.defaultView??window,m=p=>{const w=Kp(n.current).includes(CSS.escape(p.animationName));if(p.target===e&&w&&(c("ANIMATION_END"),!a.current)){const j=e.style.animationFillMode;e.style.animationFillMode="forwards",u=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=j)})}},x=p=>{p.target===e&&(i.current=Kp(n.current))};return e.addEventListener("animationstart",x),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{h.clearTimeout(u),e.removeEventListener("animationstart",x),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:N.useCallback(u=>{n.current=u?getComputedStyle(u):null,r(u)},[])}}function Kp(t){return t?.animationName||"none"}function mR(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function pR(t){const e=xR(t),r=N.forwardRef((n,a)=>{const{children:i,...o}=n,l=N.Children.toArray(i),c=l.find(vR);if(c){const u=c.props.children,h=l.map(m=>m===c?N.Children.count(u)>1?N.Children.only(null):N.isValidElement(u)?u.props.children:null:m);return s.jsx(e,{...o,ref:a,children:N.isValidElement(u)?N.cloneElement(u,void 0,h):null})}return s.jsx(e,{...o,ref:a,children:i})});return r.displayName=`${t}.Slot`,r}function xR(t){const e=N.forwardRef((r,n)=>{const{children:a,...i}=r;if(N.isValidElement(a)){const o=wR(a),l=yR(i,a.props);return a.type!==N.Fragment&&(l.ref=n?fc(n,o):o),N.cloneElement(a,l)}return N.Children.count(a)>1?N.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var gR=Symbol("radix.slottable");function vR(t){return N.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===gR}function yR(t,e){const r={...e};for(const n in e){const a=t[n],i=e[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...t,...r}}function wR(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var bR=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Pr=bR.reduce((t,e)=>{const r=pR(`Primitive.${e}`),n=N.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function k6(t,e){t&&U0.flushSync(()=>t.dispatchEvent(e))}var N1="Checkbox",[NR]=_o(N1),[jR,jw]=NR(N1);function _R(t){const{__scopeCheckbox:e,checked:r,children:n,defaultChecked:a,disabled:i,form:o,name:l,onCheckedChange:c,required:u,value:h="on",internal_do_not_use_render:m}=t,[x,p]=dc({prop:r,defaultProp:a??!1,onChange:c,caller:N1}),[y,w]=N.useState(null),[j,C]=N.useState(null),S=N.useRef(!1),k=y?!!o||!!y.closest("form"):!0,P={checked:x,disabled:i,setChecked:p,control:y,setControl:w,name:l,form:o,value:h,hasConsumerStoppedPropagationRef:S,required:u,defaultChecked:Zd(a)?!1:a,isFormControl:k,bubbleInput:j,setBubbleInput:C};return s.jsx(jR,{scope:e,...P,children:CR(m)?m(P):n})}var P6="CheckboxTrigger",T6=N.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:r,...n},a)=>{const{control:i,value:o,disabled:l,checked:c,required:u,setControl:h,setChecked:m,hasConsumerStoppedPropagationRef:x,isFormControl:p,bubbleInput:y}=jw(P6,t),w=Wr(a,h),j=N.useRef(c);return N.useEffect(()=>{const C=i?.form;if(C){const S=()=>m(j.current);return C.addEventListener("reset",S),()=>C.removeEventListener("reset",S)}},[i,m]),s.jsx(Pr.button,{type:"button",role:"checkbox","aria-checked":Zd(c)?"mixed":c,"aria-required":u,"data-state":F6(c),"data-disabled":l?"":void 0,disabled:l,value:o,...n,ref:w,onKeyDown:Pt(e,C=>{C.key==="Enter"&&C.preventDefault()}),onClick:Pt(r,C=>{m(S=>Zd(S)?!0:!S),y&&p&&(x.current=C.isPropagationStopped(),x.current||C.stopPropagation())})})});T6.displayName=P6;var I6=N.forwardRef((t,e)=>{const{__scopeCheckbox:r,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:c,onCheckedChange:u,form:h,...m}=t;return s.jsx(_R,{__scopeCheckbox:r,checked:a,defaultChecked:i,disabled:l,required:o,onCheckedChange:u,name:n,form:h,value:c,internal_do_not_use_render:({isFormControl:x})=>s.jsxs(s.Fragment,{children:[s.jsx(T6,{...m,ref:e,__scopeCheckbox:r}),x&&s.jsx(L6,{__scopeCheckbox:r})]})})});I6.displayName=N1;var D6="CheckboxIndicator",O6=N.forwardRef((t,e)=>{const{__scopeCheckbox:r,forceMount:n,...a}=t,i=jw(D6,r);return s.jsx(Qi,{present:n||Zd(i.checked)||i.checked===!0,children:s.jsx(Pr.span,{"data-state":F6(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:e,style:{pointerEvents:"none",...t.style}})})});O6.displayName=D6;var R6="CheckboxBubbleInput",L6=N.forwardRef(({__scopeCheckbox:t,...e},r)=>{const{control:n,hasConsumerStoppedPropagationRef:a,checked:i,defaultChecked:o,required:l,disabled:c,name:u,value:h,form:m,bubbleInput:x,setBubbleInput:p}=jw(R6,t),y=Wr(r,p),w=bw(i),j=Nw(n);N.useEffect(()=>{const S=x;if(!S)return;const k=window.HTMLInputElement.prototype,O=Object.getOwnPropertyDescriptor(k,"checked").set,$=!a.current;if(w!==i&&O){const R=new Event("click",{bubbles:$});S.indeterminate=Zd(i),O.call(S,Zd(i)?!1:i),S.dispatchEvent(R)}},[x,w,i,a]);const C=N.useRef(Zd(i)?!1:i);return s.jsx(Pr.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??C.current,required:l,disabled:c,name:u,value:h,form:m,...e,tabIndex:-1,ref:y,style:{...e.style,...j,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});L6.displayName=R6;function CR(t){return typeof t=="function"}function Zd(t){return t==="indeterminate"}function F6(t){return Zd(t)?"indeterminate":t?"checked":"unchecked"}function bo({className:t,...e}){return s.jsx(I6,{"data-slot":"checkbox",className:xr("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:s.jsx(O6,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:s.jsx(kl,{className:"size-3.5"})})})}function SR({navigation:t,route:e}){const{role:r}=e.params,{login:n}=Ka(),[a,i]=N.useState(""),[o,l]=N.useState(""),[c,u]=N.useState(!1),[h,m]=N.useState(!1),[x,p]=N.useState(""),[y,w]=N.useState(!1),C=(()=>{switch(r){case"clinician":return{title:"Clinician Login",colors:{from:"#0966CC",to:"#0C4A6E"},icon:lc,placeholder:"clinician@luminous.com"};case"agency-admin":return{title:"Agency Admin Login",colors:{from:"#10B981",to:"#059669"},icon:Ga,placeholder:"admin@agency.com"};case"scheduler":return{title:"Scheduler Login",colors:{from:"#F59E0B",to:"#D97706"},icon:hr,placeholder:"scheduler@agency.com"};case"super-admin":return{title:"Super Admin Login",colors:{from:"#DC2626",to:"#B91C1C"},icon:Gi,placeholder:"admin@luminous.com"};default:return{title:"Login",colors:{from:"#0966CC",to:"#0C4A6E"},icon:lc,placeholder:"your.email@example.com"}}})(),S=C.icon,k=async()=>{if(!a||!o){p("Please enter both email and password");return}try{w(!0),p("");const P=await n(a,o),$={clinician:"ClinicianDashboard",agency_admin:"AgencyAdminDashboard",scheduler:"SchedulerDashboard",super_admin:"SuperAdminDashboard"}[P.role];$?t.navigate($):p("Invalid user role")}catch(P){p(P instanceof Error?P.message:"Login failed")}finally{w(!1)}};return s.jsx("div",{className:"h-full overflow-y-auto bg-white",children:s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("button",{onClick:()=>t.goBack(),className:"w-10 h-10 rounded-xl bg-[#f8fafc] hover:bg-[#f1f5f9] flex items-center justify-center transition-colors",children:s.jsx(ln,{className:"w-5 h-5 text-[#64748b]"})}),s.jsxs("div",{className:"flex flex-col items-center text-center",children:[s.jsx("div",{className:"w-18 h-18 rounded-2xl flex items-center justify-center mb-4",style:{background:`linear-gradient(135deg, ${C.colors.from}, ${C.colors.to})`},children:s.jsx(S,{className:"w-10 h-10 text-white"})}),s.jsx("h1",{className:"text-2xl text-[#0f172a] mb-2",children:C.title}),s.jsx("p",{className:"text-[#64748b]",children:"Sign in to access your dashboard"})]})]}),s.jsxs("div",{className:"space-y-4 max-w-md mx-auto",children:[s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"email",children:"Email Address"}),s.jsxs("div",{className:"relative mt-2",children:[s.jsx(Mn,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-[#94a3b8]"}),s.jsx(Ze,{id:"email",type:"email",placeholder:C.placeholder,value:a,onChange:P=>i(P.target.value),className:"pl-12 h-12 rounded-xl border-2 border-[#e2e8f0] bg-[#f8fafc]"})]})]}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"password",children:"Password"}),s.jsxs("div",{className:"relative mt-2",children:[s.jsx(fs,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-[#94a3b8]"}),s.jsx(Ze,{id:"password",type:c?"text":"password",placeholder:"Enter your password",value:o,onChange:P=>l(P.target.value),className:"pl-12 pr-12 h-12 rounded-xl border-2 border-[#e2e8f0] bg-[#f8fafc]"}),s.jsx("button",{type:"button",onClick:()=>u(!c),className:"absolute right-4 top-1/2 -translate-y-1/2",children:c?s.jsx(o0,{className:"w-5 h-5 text-[#64748b]"}):s.jsx(hs,{className:"w-5 h-5 text-[#64748b]"})})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(bo,{id:"remember",checked:h,onCheckedChange:P=>m(P)}),s.jsx(Fe,{htmlFor:"remember",className:"text-sm cursor-pointer",children:"Remember me"})]}),s.jsx("button",{onClick:()=>t.navigate("PasswordReset"),className:"text-sm hover:underline",style:{color:C.colors.from},children:"Forgot password?"})]}),x&&s.jsx("p",{className:"text-sm text-red-600",children:x}),s.jsx(de,{onClick:k,disabled:y,className:"w-full h-12 rounded-xl text-white",style:{background:`linear-gradient(135deg, ${C.colors.from}, ${C.colors.to})`,opacity:y?.8:1},children:y?"Signing In...":"Sign In"})]}),s.jsx("div",{className:"text-center",children:s.jsxs("p",{className:"text-sm text-[#64748b]",children:["First time user?"," ",s.jsx("button",{onClick:()=>t.navigate("AccountActivation"),className:"hover:underline",style:{color:C.colors.from},children:"Activate your account"})]})})]})})}function AR({navigation:t,route:e}){const{role:r}=e.params,[n,a]=N.useState(""),i=()=>{if(!r){alert("User role is missing");return}switch(r){case"clinician":t.navigate("ClinicianDashboard");break;case"agency-admin":t.navigate("AgencyAdminDashboard");break;case"scheduler":t.navigate("SchedulerDashboard");break;case"super-admin":t.navigate("SuperAdminDashboard");break;default:alert("Unknown user role");break}};return s.jsx("div",{className:"h-full overflow-y-auto bg-white",children:s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsx("button",{onClick:()=>t.goBack(),className:"w-10 h-10 rounded-xl bg-[#f8fafc] hover:bg-[#f1f5f9] flex items-center justify-center transition-colors",children:s.jsx(ln,{className:"w-5 h-5 text-[#64748b]"})}),s.jsxs("div",{className:"flex flex-col items-center text-center",children:[s.jsx("div",{className:"w-18 h-18 rounded-2xl bg-gradient-to-br from-[#0966CC] to-[#0C4A6E] flex items-center justify-center mb-4",children:s.jsx(Gi,{className:"w-10 h-10 text-white"})}),s.jsx("h1",{className:"text-2xl text-[#0f172a] mb-2",children:"Two-Factor Authentication"}),s.jsx("p",{className:"text-[#64748b] px-4",children:"Enter the 6-digit code from your authenticator app"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"code",children:"Verification Code"}),s.jsx(Ze,{id:"code",type:"text",placeholder:"000000",value:n,onChange:o=>a(o.target.value),maxLength:6,className:"mt-2 h-12 rounded-xl border-2 border-[#e2e8f0] bg-[#f8fafc] text-center text-lg tracking-widest"})]}),s.jsx(de,{onClick:i,className:"w-full h-12 rounded-xl bg-gradient-to-r from-[#0966CC] to-[#0C4A6E] text-white hover:opacity-90",children:"Verify Code"}),s.jsx("div",{className:"text-center",children:s.jsxs("p",{className:"text-sm text-[#64748b]",children:["Didn't receive a code?"," ",s.jsx("button",{className:"text-[#0966CC] hover:underline",children:"Resend"})]})})]})]})})}function ER({navigation:t}){const[e,r]=N.useState(""),[n,a]=N.useState(!1),i=()=>{a(!0)};return s.jsx("div",{className:"h-full overflow-y-auto bg-white",children:s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsx("button",{onClick:()=>t.goBack(),className:"w-10 h-10 rounded-xl bg-[#f8fafc] hover:bg-[#f1f5f9] flex items-center justify-center transition-colors",children:s.jsx(ln,{className:"w-5 h-5 text-[#64748b]"})}),n?s.jsxs("div",{className:"flex flex-col items-center text-center py-12",children:[s.jsx(kr,{className:"w-16 h-16 text-[#10B981] mb-4"}),s.jsx("h2",{className:"text-xl text-[#0f172a] mb-2",children:"Check Your Email"}),s.jsxs("p",{className:"text-[#64748b] px-4 mb-8",children:["We've sent a password reset link to ",e]}),s.jsx(de,{onClick:()=>t.goBack(),className:"w-full h-12 rounded-xl bg-gradient-to-r from-[#0966CC] to-[#0C4A6E] text-white hover:opacity-90",children:"Back to Login"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex flex-col items-center text-center",children:[s.jsx("div",{className:"w-18 h-18 rounded-2xl bg-gradient-to-br from-[#0966CC] to-[#0C4A6E] flex items-center justify-center mb-4",children:s.jsx(Mn,{className:"w-10 h-10 text-white"})}),s.jsx("h1",{className:"text-2xl text-[#0f172a] mb-2",children:"Reset Password"}),s.jsx("p",{className:"text-[#64748b] px-4",children:"Enter your email address and we'll send you a link to reset your password"})]}),s.jsxs("div",{className:"space-y-4 max-w-md mx-auto",children:[s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"email",children:"Email Address"}),s.jsxs("div",{className:"relative mt-2",children:[s.jsx(Mn,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-[#94a3b8]"}),s.jsx(Ze,{id:"email",type:"email",placeholder:"your.email@example.com",value:e,onChange:o=>r(o.target.value),className:"pl-12 h-12 rounded-xl border-2 border-[#e2e8f0] bg-[#f8fafc]"})]})]}),s.jsx(de,{onClick:i,className:"w-full h-12 rounded-xl bg-gradient-to-r from-[#0966CC] to-[#0C4A6E] text-white hover:opacity-90",children:"Send Reset Link"})]})]})]})})}async function kR(t){const{data:e,error:r}=await Qe.from("charts").select(`
      *,
      patient:patients!charts_patient_id_fkey (
        id,
        first_name,
        last_name,
        date_of_birth,
        phone,
        email,
        address_line1,
        address_line2,
        city,
        state,
        zip_code,
        assigned_clinician_id,
        assigned_clinician:users!patients_assigned_clinician_id_fkey (
          id,
          first_name,
          last_name,
          email,
          role
        )
      ),
      created_by_user:users!charts_created_by_fkey (
        id,
        first_name,
        last_name,
        email,
        role
      ),
      finalized_by_user:users!charts_finalized_by_fkey (
        id,
        first_name,
        last_name
      )
    `).eq("tenant_id",t).order("created_at",{ascending:!1});if(r)throw r;return await Promise.all((e||[]).map(async a=>{const[{count:i},{count:o}]=await Promise.all([Qe.from("medications").select("id",{count:"exact",head:!0}).eq("chart_id",a.id),Qe.from("documents").select("id",{count:"exact",head:!0}).eq("chart_id",a.id)]);return{...a,medication_count:i||0,document_count:o||0}}))}async function _w(t){const{data:e,error:r}=await Qe.from("users").select("*").eq("tenant_id",t).order("created_at",{ascending:!1});if(r)throw r;return await Promise.all((e||[]).map(async a=>{if(a.role==="clinician"){const{count:i}=await Qe.from("patients").select("id",{count:"exact",head:!0}).eq("assigned_clinician_id",a.id);return{...a,assigned_chart_count:i||0}}return a}))}async function M6(t,e,r){const{data:n,error:a}=await Qe.from("chart_review_notes").insert({chart_id:t,note:e,created_by:r}).select(`
      *,
      reviewer:users!chart_review_notes_created_by_fkey (
        first_name,
        last_name
      )
    `).single();if(a)throw a;return n}async function B6(t,e){const{data:r,error:n}=await Qe.from("charts").select("*, medications:medications(count)").eq("id",t).single();if(n)throw n;if(!r)throw new Error("Chart not found");if(!r.finalized_at||!r.finalized_by)throw new Error("Chart must be finalized by a clinician before it can be approved");const{data:a,error:i}=await Qe.from("charts").update({status:"delivered_locked",awaiting_clinician_review:!1}).eq("id",t).select().single();if(i)throw i;return await M6(t,"Chart approved and finalized.",e),a}async function PR(t,e,r){await M6(t,e,r);const{data:n,error:a}=await Qe.from("charts").update({status:"needs_reverification",awaiting_clinician_review:!0,finalized_at:null,finalized_by:null}).eq("id",t).select().single();if(a)throw a;return n}async function TR(t,e,r){const{data:n,error:a}=await Qe.from("users").update({active:e,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(a)throw a;return n}async function IR(t){const{data:e}=await Qe.from("patients").select("id").eq("tenant_id",t),r=e?.map(h=>h.id)||[];if(r.length===0){const[{count:h},{count:m},{count:x}]=await Promise.all([Qe.from("users").select("id",{count:"exact",head:!0}).eq("tenant_id",t),Qe.from("users").select("id",{count:"exact",head:!0}).eq("tenant_id",t).eq("active",!0),Qe.from("patients").select("id",{count:"exact",head:!0}).eq("tenant_id",t)]);return{totalUsers:h||0,activeUsers:m||0,totalCharts:0,pendingReviewCharts:0,needsReverificationCharts:0,deliveredCharts:0,totalPatients:x||0}}const[{count:n},{count:a},{count:i},{count:o},{count:l},{count:c},{count:u}]=await Promise.all([Qe.from("users").select("id",{count:"exact",head:!0}).eq("tenant_id",t),Qe.from("users").select("id",{count:"exact",head:!0}).eq("tenant_id",t).eq("active",!0),Qe.from("charts").select("id",{count:"exact",head:!0}).in("patient_id",r),Qe.from("charts").select("id",{count:"exact",head:!0}).in("patient_id",r).eq("status","verified_ready"),Qe.from("charts").select("id",{count:"exact",head:!0}).in("patient_id",r).eq("status","needs_reverification"),Qe.from("charts").select("id",{count:"exact",head:!0}).in("patient_id",r).eq("status","delivered_locked"),Qe.from("patients").select("id",{count:"exact",head:!0}).eq("tenant_id",t)]);return{totalUsers:n||0,activeUsers:a||0,totalCharts:i||0,pendingReviewCharts:o||0,needsReverificationCharts:l||0,deliveredCharts:c||0,totalPatients:u||0}}async function DR(t){try{const{data:e,error:r}=await Qe.from("patients").select(`
        *,
        assigned_clinician:users!patients_assigned_clinician_id_fkey (
          id,
          first_name,
          last_name,
          role
        )
      `).eq("tenant_id",t).order("created_at",{ascending:!1});if(r)throw console.error("Supabase error fetching patients:",r),r;const n=await Promise.all((e||[]).map(async a=>{try{const o=(await Qe.from("charts").select("id, status").eq("patient_id",a.id)).data||[],l=o.map(u=>u.id);let c=[];return l.length>0&&(c=(await Qe.from("documents").select("id, file_name, file_type, file_url, created_at").in("chart_id",l)).data||[]),{...a,charts:o,documents:c}}catch(i){return console.warn(`Error fetching relations for patient ${a.id}:`,i),{...a,charts:[],documents:[]}}}));return console.log("Fetched patients with relations:",n),n}catch(e){throw console.error("Error in fetchAllPatients:",e),e}}async function OR(t){try{const{data:e,error:r}=await Qe.from("users").select("*").eq("id",t).single();if(r)throw r;const{data:n,error:a}=await Qe.from("patients").select("*").eq("assigned_clinician_id",t).order("created_at",{ascending:!1});if(a)throw a;const i=await Promise.all((n||[]).map(async c=>{const{data:u,error:h}=await Qe.from("charts").select("id, status, created_at").eq("patient_id",c.id).order("created_at",{ascending:!1});return h?(console.warn(`Error fetching charts for patient ${c.id}:`,h),{...c,chart_count:0,last_chart_date:null,status:"active"}):{...c,chart_count:u?.length||0,last_chart_date:u&&u.length>0?u[0].created_at:null,status:"active"}})),o=n?.map(c=>c.id)||[];let l=[];if(o.length>0){const{data:c,error:u}=await Qe.from("charts").select(`
          id,
          status,
          chart_type,
          created_at,
          patient_id,
          patients!charts_patient_id_fkey (
            first_name,
            last_name
          )
        `).in("patient_id",o).order("created_at",{ascending:!1}).limit(20);u?console.warn("Error fetching clinician charts:",u):l=await Promise.all((c||[]).map(async h=>{const{count:m}=await Qe.from("chart_medications").select("id",{count:"exact",head:!0}).eq("chart_id",h.id);return{...h,medication_count:m||0}}))}return{clinician:e,patients:i,charts:l,stats:{patient_count:n?.length||0,chart_count:l.length,pending_count:l.filter(c=>c.status==="pending_review").length,verified_count:l.filter(c=>c.status==="verified").length,active_patient_count:i.length}}}catch(e){throw console.error("Error in fetchClinicianDetails:",e),e}}function U6(){const t=Date.now().toString(36).toUpperCase(),e=Math.random().toString(36).substring(2,6).toUpperCase(),r=Math.random().toString(36).substring(2,6).toUpperCase();return`ACTV-${t}-${e}${r}`}async function RR(t){try{const e=U6(),r=`${window.location.origin}/activate?code=${e}`,{data:n,error:a}=await Qe.from("user_invitations").insert({email:t.email,first_name:t.first_name,last_name:t.last_name,role:t.role,tenant_id:t.tenant_id,created_by:t.created_by,phone_number:t.phone_number,occupation:t.occupation,activation_code:e,activation_link:r,status:"pending"}).select().single();if(a)throw a;return{...n,activation_code:e,activation_link:r}}catch(e){throw console.error("Error creating user invitation:",e),e}}async function LR(t){try{const{data:e,error:r}=await Qe.from("user_invitations").select(`
        *,
        created_by_user:users!user_invitations_created_by_fkey (
          first_name,
          last_name,
          email
        )
      `).eq("tenant_id",t).order("created_at",{ascending:!1});if(r)throw r;return e||[]}catch(e){throw console.error("Error fetching invitations:",e),e}}async function FR(t,e,r){try{const n=await fetch("http://localhost:8080/api/activate-user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({activationCode:t,password:e,additionalData:r})}),a=await n.json();if(!n.ok)throw new Error(a.error||"Failed to activate account");const{data:i,error:o}=await Qe.auth.signInWithPassword({email:a.user.email,password:e});return o?(console.error("Sign in error:",o),{user:a.user,session:null,message:"Account created successfully. Please log in."}):{user:a.user,session:i.session,message:a.message}}catch(n){throw console.error("Error in activateUserAccount:",n),n}}async function MR(t){try{const{data:e,error:r}=await Qe.from("user_invitations").update({status:"revoked"}).eq("id",t).select().single();if(r)throw r;return e}catch(e){throw console.error("Error revoking invitation:",e),e}}async function BR(t){try{const e=U6(),r=`${window.location.origin}/activate?code=${e}`,{data:n,error:a}=await Qe.from("user_invitations").update({activation_code:e,activation_link:r,status:"pending",expires_at:new Date(Date.now()+10080*60*1e3).toISOString()}).eq("id",t).select().single();if(a)throw a;return n}catch(e){throw console.error("Error resending invitation:",e),e}}function UR({navigation:t,params:e}){const[r,n]=N.useState(e?.code||""),[a,i]=N.useState(""),[o,l]=N.useState(""),[c,u]=N.useState(!1),[h,m]=N.useState(!1),[x,p]=N.useState(""),[y,w]=N.useState(!1),[j,C]=N.useState(e?.tenant||""),[S,k]=N.useState(""),[P,O]=N.useState(""),[$,R]=N.useState(""),[B,U]=N.useState("");N.useEffect(()=>{(e?.tenant||j)&&(w(!0),j&&K())},[e?.tenant,j]);const K=async()=>{try{const{data:ee,error:H}=await Qe.from("tenants").select("name").eq("subdomain",j).single();if(H)throw H;ee&&U(ee.name)}catch(ee){console.error("Error fetching tenant:",ee)}},M=async()=>{if(p(""),!r.trim()){p("Please enter your activation code");return}if(!a.trim()){p("Please create a password");return}if(a.length<8){p("Password must be at least 8 characters long");return}if(a!==o){p("Passwords do not match");return}m(!0);try{await FR(r.trim(),a),u(!0)}catch(ee){console.error("Activation error:",ee),p(ee instanceof Error?ee.message:"Failed to activate account. Please check your activation code.")}finally{m(!1)}},q=async()=>{if(p(""),!j.trim()){p("Please enter your tenant subdomain");return}if(!r.trim()){p("Please enter your activation code");return}if(!S.trim()){p("Please enter your email address");return}if(!P.trim()||!$.trim()){p("Please enter your full name");return}if(!a.trim()){p("Please create a password");return}if(a.length<8){p("Password must be at least 8 characters long");return}if(a!==o){p("Passwords do not match");return}m(!0);try{const ee=await fetch("https://lr-backend-api.onrender.com/api/activate-tenant",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tenantSubdomain:j.trim(),activationCode:r.trim(),email:S.trim(),password:a,firstName:P.trim(),lastName:$.trim()})}),H=await ee.json();if(!ee.ok)throw new Error(H.error||"Failed to activate tenant");u(!0)}catch(ee){console.error("Tenant activation error:",ee),p(ee instanceof Error?ee.message:"Failed to activate account. Please check your details.")}finally{m(!1)}},re=()=>{y?q():M()};return s.jsx("div",{className:"h-full overflow-y-auto bg-white",children:s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsx("button",{onClick:()=>t.goBack(),className:"w-10 h-10 rounded-xl bg-[#f8fafc] hover:bg-[#f1f5f9] flex items-center justify-center transition-colors",children:s.jsx(ln,{className:"w-5 h-5 text-[#64748b]"})}),c?s.jsxs("div",{className:"flex flex-col items-center text-center py-12",children:[s.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center mb-6",children:s.jsx(kr,{className:"w-12 h-12 text-white"})}),s.jsx("h2",{className:"text-2xl text-[#0f172a] mb-2",children:y?"Organization Activated!":"Account Activated!"}),s.jsx("p",{className:"text-[#64748b] mb-6 px-4",children:y?B?`${B} is now active. You can log in with your new admin credentials.`:"Your organization is now active. You can log in with your new admin credentials.":"Your account is ready. You can now log in with your new credentials."}),s.jsx(de,{onClick:()=>t.navigate("Landing"),className:"w-full h-12 rounded-xl bg-gradient-to-r from-[#0966CC] to-[#0C4A6E] text-white hover:opacity-90",children:"Go to Login"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex flex-col items-center text-center",children:[s.jsx("div",{className:"w-18 h-18 rounded-2xl bg-gradient-to-br from-[#0966CC] to-[#0C4A6E] flex items-center justify-center mb-4",children:y?s.jsx(Ga,{className:"w-10 h-10 text-white"}):s.jsx(uh,{className:"w-10 h-10 text-white"})}),s.jsx("h1",{className:"text-2xl text-[#0f172a] mb-2",children:y?"Activate Your Organization":"Activate Your Account"}),s.jsx("p",{className:"text-[#64748b] px-4",children:y?B?`Welcome to ${B}! Create your admin account to get started.`:"Enter your activation details to set up your admin account":"Enter the activation code from your welcome email and set your password"})]}),!e?.tenant&&!e?.code&&s.jsxs("div",{className:"flex gap-2 p-1 bg-slate-100 rounded-lg max-w-md mx-auto",children:[s.jsxs("button",{onClick:()=>w(!1),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${y?"text-slate-600 hover:text-slate-900":"bg-white text-[#0966CC] shadow-sm"}`,children:[s.jsx(uh,{className:"w-4 h-4 inline mr-2"}),"User Invitation"]}),s.jsxs("button",{onClick:()=>w(!0),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${y?"bg-white text-[#0966CC] shadow-sm":"text-slate-600 hover:text-slate-900"}`,children:[s.jsx(Ga,{className:"w-4 h-4 inline mr-2"}),"Organization Setup"]})]}),s.jsxs("div",{className:"space-y-4 max-w-md mx-auto",children:[x&&s.jsxs("div",{className:"flex items-start gap-3 p-4 bg-red-50 border border-red-200 rounded-xl",children:[s.jsx(Kn,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),s.jsx("p",{className:"text-sm text-red-800",children:x})]}),y&&s.jsx(s.Fragment,{children:s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"subdomain",children:"Tenant Subdomain"}),s.jsxs("div",{className:"relative mt-2",children:[s.jsx(Ga,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-[#94a3b8]"}),s.jsx(Ze,{id:"subdomain",type:"text",placeholder:"yourcompany",value:j,onChange:ee=>{C(ee.target.value),ee.target.value&&K()},className:"pl-12 h-12 rounded-xl border-2 border-[#e2e8f0] bg-[#f8fafc]",disabled:h||!!e?.tenant})]})]})}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"code",children:"Activation Code"}),s.jsxs("div",{className:"relative mt-2",children:[s.jsx(Mn,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-[#94a3b8]"}),s.jsx(Ze,{id:"code",type:"text",placeholder:"Enter activation code",value:r,onChange:ee=>n(ee.target.value),className:"pl-12 h-12 rounded-xl border-2 border-[#e2e8f0] bg-[#f8fafc]",disabled:h||!!e?.code})]})]}),y&&s.jsx(s.Fragment,{children:s.jsxs("div",{className:"border-t pt-4 mt-4",children:[s.jsx("p",{className:"text-sm text-[#64748b] mb-4",children:"Create Your Admin Account"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"firstName",children:"First Name"}),s.jsxs("div",{className:"relative mt-2",children:[s.jsx(Bn,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-[#94a3b8]"}),s.jsx(Ze,{id:"firstName",type:"text",placeholder:"John",value:P,onChange:ee=>O(ee.target.value),className:"pl-12 h-12 rounded-xl border-2 border-[#e2e8f0] bg-[#f8fafc]",disabled:h})]})]}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"lastName",children:"Last Name"}),s.jsxs("div",{className:"relative mt-2",children:[s.jsx(Bn,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-[#94a3b8]"}),s.jsx(Ze,{id:"lastName",type:"text",placeholder:"Doe",value:$,onChange:ee=>R(ee.target.value),className:"pl-12 h-12 rounded-xl border-2 border-[#e2e8f0] bg-[#f8fafc]",disabled:h})]})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx(Fe,{htmlFor:"email",children:"Email Address"}),s.jsxs("div",{className:"relative mt-2",children:[s.jsx(Mn,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-[#94a3b8]"}),s.jsx(Ze,{id:"email",type:"email",placeholder:"admin@yourcompany.com",value:S,onChange:ee=>k(ee.target.value),className:"pl-12 h-12 rounded-xl border-2 border-[#e2e8f0] bg-[#f8fafc]",disabled:h})]})]})]})}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"password",children:"Password"}),s.jsxs("div",{className:"relative mt-2",children:[s.jsx(fs,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-[#94a3b8]"}),s.jsx(Ze,{id:"password",type:"password",placeholder:"Create a password (min. 8 characters)",value:a,onChange:ee=>i(ee.target.value),className:"pl-12 h-12 rounded-xl border-2 border-[#e2e8f0] bg-[#f8fafc]",disabled:h})]})]}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"confirmPassword",children:"Confirm Password"}),s.jsxs("div",{className:"relative mt-2",children:[s.jsx(fs,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-[#94a3b8]"}),s.jsx(Ze,{id:"confirmPassword",type:"password",placeholder:"Confirm your password",value:o,onChange:ee=>l(ee.target.value),className:"pl-12 h-12 rounded-xl border-2 border-[#e2e8f0] bg-[#f8fafc]",disabled:h})]})]}),s.jsx(de,{onClick:re,className:"w-full h-12 rounded-xl bg-gradient-to-r from-[#0966CC] to-[#0C4A6E] text-white hover:opacity-90",disabled:h,children:h?"Activating...":y?"Activate Organization":"Activate Account"}),y&&s.jsx("p",{className:"text-xs text-[#94a3b8] text-center",children:"By activating, you agree to our Terms of Service and Privacy Policy"})]})]})]})})}function $R(t,e=[]){let r=[];function n(i,o){const l=N.createContext(o);l.displayName=i+"Context";const c=r.length;r=[...r,o];const u=m=>{const{scope:x,children:p,...y}=m,w=x?.[t]?.[c]||l,j=N.useMemo(()=>y,Object.values(y));return s.jsx(w.Provider,{value:j,children:p})};u.displayName=i+"Provider";function h(m,x){const p=x?.[t]?.[c]||l,y=N.useContext(p);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${i}\``)}return[u,h]}const a=()=>{const i=r.map(o=>N.createContext(o));return function(l){const c=l?.[t]||i;return N.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return a.scopeName=t,[n,VR(a,...e)]}function VR(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const m=c(i)[`__scope${u}`];return{...l,...m}},{});return N.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}function Tl(t){const e=N.useRef(t);return N.useEffect(()=>{e.current=t}),N.useMemo(()=>(...r)=>e.current?.(...r),[])}var zR=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Cw=zR.reduce((t,e)=>{const r=B0(`Primitive.${e}`),n=N.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{}),cv={exports:{}},dv={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tj;function qR(){if(tj)return dv;tj=1;var t=v1();function e(m,x){return m===x&&(m!==0||1/m===1/x)||m!==m&&x!==x}var r=typeof Object.is=="function"?Object.is:e,n=t.useState,a=t.useEffect,i=t.useLayoutEffect,o=t.useDebugValue;function l(m,x){var p=x(),y=n({inst:{value:p,getSnapshot:x}}),w=y[0].inst,j=y[1];return i(function(){w.value=p,w.getSnapshot=x,c(w)&&j({inst:w})},[m,p,x]),a(function(){return c(w)&&j({inst:w}),m(function(){c(w)&&j({inst:w})})},[m]),o(p),p}function c(m){var x=m.getSnapshot;m=m.value;try{var p=x();return!r(m,p)}catch{return!0}}function u(m,x){return x()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:l;return dv.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:h,dv}var rj;function HR(){return rj||(rj=1,cv.exports=qR()),cv.exports}var WR=HR();function GR(){return WR.useSyncExternalStore(KR,()=>!0,()=>!1)}function KR(){return()=>{}}var Sw="Avatar",[YR]=$R(Sw),[XR,$6]=YR(Sw),V6=N.forwardRef((t,e)=>{const{__scopeAvatar:r,...n}=t,[a,i]=N.useState("idle");return s.jsx(XR,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:s.jsx(Cw.span,{...n,ref:e})})});V6.displayName=Sw;var z6="AvatarImage",ZR=N.forwardRef((t,e)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:a=()=>{},...i}=t,o=$6(z6,r),l=JR(n,i),c=Tl(u=>{a(u),o.onImageLoadingStatusChange(u)});return wa(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?s.jsx(Cw.img,{...i,ref:e,src:n}):null});ZR.displayName=z6;var q6="AvatarFallback",H6=N.forwardRef((t,e)=>{const{__scopeAvatar:r,delayMs:n,...a}=t,i=$6(q6,r),[o,l]=N.useState(n===void 0);return N.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(c)}},[n]),o&&i.imageLoadingStatus!=="loaded"?s.jsx(Cw.span,{...a,ref:e}):null});H6.displayName=q6;function nj(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function JR(t,{referrerPolicy:e,crossOrigin:r}){const n=GR(),a=N.useRef(null),i=n?(a.current||(a.current=new window.Image),a.current):null,[o,l]=N.useState(()=>nj(i,t));return wa(()=>{l(nj(i,t))},[i,t]),wa(()=>{const c=m=>()=>{l(m)};if(!i)return;const u=c("loaded"),h=c("error");return i.addEventListener("load",u),i.addEventListener("error",h),e&&(i.referrerPolicy=e),typeof r=="string"&&(i.crossOrigin=r),()=>{i.removeEventListener("load",u),i.removeEventListener("error",h)}},[i,r,e]),o}var QR=V6,eL=H6;function Xs({className:t,...e}){return s.jsx(QR,{"data-slot":"avatar",className:xr("relative flex size-10 shrink-0 overflow-hidden rounded-full",t),...e})}function Zs({className:t,...e}){return s.jsx(eL,{"data-slot":"avatar-fallback",className:xr("bg-muted flex size-full items-center justify-center rounded-full",t),...e})}const tL=vw("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function gt({className:t,variant:e,asChild:r=!1,...n}){const a=r?m6:"span";return s.jsx(a,{"data-slot":"badge",className:xr(tL({variant:e}),t),...n})}var rL=nw[" useId ".trim().toString()]||(()=>{}),nL=0;function Ko(t){const[e,r]=N.useState(rL());return wa(()=>{r(n=>n??String(nL++))},[t]),t||(e?`radix-${e}`:"")}function sL(t,e=globalThis?.document){const r=Tl(t);N.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[r,e])}var aL="DismissableLayer",X2="dismissableLayer.update",iL="dismissableLayer.pointerDownOutside",oL="dismissableLayer.focusOutside",sj,W6=N.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),rm=N.forwardRef((t,e)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=t,u=N.useContext(W6),[h,m]=N.useState(null),x=h?.ownerDocument??globalThis?.document,[,p]=N.useState({}),y=Wr(e,R=>m(R)),w=Array.from(u.layers),[j]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),C=w.indexOf(j),S=h?w.indexOf(h):-1,k=u.layersWithOutsidePointerEventsDisabled.size>0,P=S>=C,O=dL(R=>{const B=R.target,U=[...u.branches].some(K=>K.contains(B));!P||U||(a?.(R),o?.(R),R.defaultPrevented||l?.())},x),$=uL(R=>{const B=R.target;[...u.branches].some(K=>K.contains(B))||(i?.(R),o?.(R),R.defaultPrevented||l?.())},x);return sL(R=>{S===u.layers.size-1&&(n?.(R),!R.defaultPrevented&&l&&(R.preventDefault(),l()))},x),N.useEffect(()=>{if(h)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(sj=x.body.style.pointerEvents,x.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),aj(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(x.body.style.pointerEvents=sj)}},[h,x,r,u]),N.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),aj())},[h,u]),N.useEffect(()=>{const R=()=>p({});return document.addEventListener(X2,R),()=>document.removeEventListener(X2,R)},[]),s.jsx(Pr.div,{...c,ref:y,style:{pointerEvents:k?P?"auto":"none":void 0,...t.style},onFocusCapture:Pt(t.onFocusCapture,$.onFocusCapture),onBlurCapture:Pt(t.onBlurCapture,$.onBlurCapture),onPointerDownCapture:Pt(t.onPointerDownCapture,O.onPointerDownCapture)})});rm.displayName=aL;var lL="DismissableLayerBranch",cL=N.forwardRef((t,e)=>{const r=N.useContext(W6),n=N.useRef(null),a=Wr(e,n);return N.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),s.jsx(Pr.div,{...t,ref:a})});cL.displayName=lL;function dL(t,e=globalThis?.document){const r=Tl(t),n=N.useRef(!1),a=N.useRef(()=>{});return N.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let c=function(){G6(iL,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",a.current),a.current=c,e.addEventListener("click",a.current,{once:!0})):c()}else e.removeEventListener("click",a.current);n.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",a.current)}},[e,r]),{onPointerDownCapture:()=>n.current=!0}}function uL(t,e=globalThis?.document){const r=Tl(t),n=N.useRef(!1);return N.useEffect(()=>{const a=i=>{i.target&&!n.current&&G6(oL,r,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",a),()=>e.removeEventListener("focusin",a)},[e,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function aj(){const t=new CustomEvent(X2);document.dispatchEvent(t)}function G6(t,e,r,{discrete:n}){const a=r.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&a.addEventListener(t,e,{once:!0}),n?k6(a,i):a.dispatchEvent(i)}var uv="focusScope.autoFocusOnMount",hv="focusScope.autoFocusOnUnmount",ij={bubbles:!1,cancelable:!0},hL="FocusScope",$0=N.forwardRef((t,e)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=t,[l,c]=N.useState(null),u=Tl(a),h=Tl(i),m=N.useRef(null),x=Wr(e,w=>c(w)),p=N.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;N.useEffect(()=>{if(n){let w=function(k){if(p.paused||!l)return;const P=k.target;l.contains(P)?m.current=P:qd(m.current,{select:!0})},j=function(k){if(p.paused||!l)return;const P=k.relatedTarget;P!==null&&(l.contains(P)||qd(m.current,{select:!0}))},C=function(k){if(document.activeElement===document.body)for(const O of k)O.removedNodes.length>0&&qd(l)};document.addEventListener("focusin",w),document.addEventListener("focusout",j);const S=new MutationObserver(C);return l&&S.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",j),S.disconnect()}}},[n,l,p.paused]),N.useEffect(()=>{if(l){lj.add(p);const w=document.activeElement;if(!l.contains(w)){const C=new CustomEvent(uv,ij);l.addEventListener(uv,u),l.dispatchEvent(C),C.defaultPrevented||(fL(vL(K6(l)),{select:!0}),document.activeElement===w&&qd(l))}return()=>{l.removeEventListener(uv,u),setTimeout(()=>{const C=new CustomEvent(hv,ij);l.addEventListener(hv,h),l.dispatchEvent(C),C.defaultPrevented||qd(w??document.body,{select:!0}),l.removeEventListener(hv,h),lj.remove(p)},0)}}},[l,u,h,p]);const y=N.useCallback(w=>{if(!r&&!n||p.paused)return;const j=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,C=document.activeElement;if(j&&C){const S=w.currentTarget,[k,P]=mL(S);k&&P?!w.shiftKey&&C===P?(w.preventDefault(),r&&qd(k,{select:!0})):w.shiftKey&&C===k&&(w.preventDefault(),r&&qd(P,{select:!0})):C===S&&w.preventDefault()}},[r,n,p.paused]);return s.jsx(Pr.div,{tabIndex:-1,...o,ref:x,onKeyDown:y})});$0.displayName=hL;function fL(t,{select:e=!1}={}){const r=document.activeElement;for(const n of t)if(qd(n,{select:e}),document.activeElement!==r)return}function mL(t){const e=K6(t),r=oj(e,t),n=oj(e.reverse(),t);return[r,n]}function K6(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function oj(t,e){for(const r of t)if(!pL(r,{upTo:e}))return r}function pL(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function xL(t){return t instanceof HTMLInputElement&&"select"in t}function qd(t,{select:e=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&xL(t)&&e&&t.select()}}var lj=gL();function gL(){let t=[];return{add(e){const r=t[0];e!==r&&r?.pause(),t=cj(t,e),t.unshift(e)},remove(e){t=cj(t,e),t[0]?.resume()}}}function cj(t,e){const r=[...t],n=r.indexOf(e);return n!==-1&&r.splice(n,1),r}function vL(t){return t.filter(e=>e.tagName!=="A")}var yL="Portal",nm=N.forwardRef((t,e)=>{const{container:r,...n}=t,[a,i]=N.useState(!1);wa(()=>i(!0),[]);const o=r||a&&globalThis?.document?.body;return o?A6.createPortal(s.jsx(Pr.div,{...n,ref:e}),o):null});nm.displayName=yL;var fv=0;function j1(){N.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??dj()),document.body.insertAdjacentElement("beforeend",t[1]??dj()),fv++,()=>{fv===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),fv--}},[])}function dj(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var wx="right-scroll-bar-position",bx="width-before-scroll-bar",wL="with-scroll-bars-hidden",bL="--removed-body-scroll-bar-size";function mv(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function NL(t,e){var r=N.useState(function(){return{value:t,callback:e,facade:{get current(){return r.value},set current(n){var a=r.value;a!==n&&(r.value=n,r.callback(n,a))}}}})[0];return r.callback=e,r.facade}var jL=typeof window<"u"?N.useLayoutEffect:N.useEffect,uj=new WeakMap;function _L(t,e){var r=NL(null,function(n){return t.forEach(function(a){return mv(a,n)})});return jL(function(){var n=uj.get(r);if(n){var a=new Set(n),i=new Set(t),o=r.current;a.forEach(function(l){i.has(l)||mv(l,null)}),i.forEach(function(l){a.has(l)||mv(l,o)})}uj.set(r,t)},[t]),r}function CL(t){return t}function SL(t,e){e===void 0&&(e=CL);var r=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(i){var o=e(i,n);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(n=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){n=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(i),o=r}var c=function(){var h=o;o=[],h.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(h){o.push(h),u()},filter:function(h){return o=o.filter(h),r}}}};return a}function AL(t){t===void 0&&(t={});var e=SL(null);return e.options=qo({async:!0,ssr:!1},t),e}var Y6=function(t){var e=t.sideCar,r=fu(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return N.createElement(n,qo({},r))};Y6.isSideCarExport=!0;function EL(t,e){return t.useMedium(e),Y6}var X6=AL(),pv=function(){},_1=N.forwardRef(function(t,e){var r=N.useRef(null),n=N.useState({onScrollCapture:pv,onWheelCapture:pv,onTouchMoveCapture:pv}),a=n[0],i=n[1],o=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,h=t.enabled,m=t.shards,x=t.sideCar,p=t.noRelative,y=t.noIsolation,w=t.inert,j=t.allowPinchZoom,C=t.as,S=C===void 0?"div":C,k=t.gapMode,P=fu(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),O=x,$=_L([r,e]),R=qo(qo({},P),a);return N.createElement(N.Fragment,null,h&&N.createElement(O,{sideCar:X6,removeScrollBar:u,shards:m,noRelative:p,noIsolation:y,inert:w,setCallbacks:i,allowPinchZoom:!!j,lockRef:r,gapMode:k}),o?N.cloneElement(N.Children.only(l),qo(qo({},R),{ref:$})):N.createElement(S,qo({},R,{className:c,ref:$}),l))});_1.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};_1.classNames={fullWidth:bx,zeroRight:wx};var kL=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function PL(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=kL();return e&&t.setAttribute("nonce",e),t}function TL(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function IL(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var DL=function(){var t=0,e=null;return{add:function(r){t==0&&(e=PL())&&(TL(e,r),IL(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},OL=function(){var t=DL();return function(e,r){N.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&r])}},Z6=function(){var t=OL(),e=function(r){var n=r.styles,a=r.dynamic;return t(n,a),null};return e},RL={left:0,top:0,right:0,gap:0},xv=function(t){return parseInt(t||"",10)||0},LL=function(t){var e=window.getComputedStyle(document.body),r=e[t==="padding"?"paddingLeft":"marginLeft"],n=e[t==="padding"?"paddingTop":"marginTop"],a=e[t==="padding"?"paddingRight":"marginRight"];return[xv(r),xv(n),xv(a)]},FL=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return RL;var e=LL(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-r+e[2]-e[0])}},ML=Z6(),If="data-scroll-locked",BL=function(t,e,r,n){var a=t.left,i=t.top,o=t.right,l=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(wL,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(If,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(wx,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(bx,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(wx," .").concat(wx,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(bx," .").concat(bx,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(If,`] {
    `).concat(bL,": ").concat(l,`px;
  }
`)},hj=function(){var t=parseInt(document.body.getAttribute(If)||"0",10);return isFinite(t)?t:0},UL=function(){N.useEffect(function(){return document.body.setAttribute(If,(hj()+1).toString()),function(){var t=hj()-1;t<=0?document.body.removeAttribute(If):document.body.setAttribute(If,t.toString())}},[])},$L=function(t){var e=t.noRelative,r=t.noImportant,n=t.gapMode,a=n===void 0?"margin":n;UL();var i=N.useMemo(function(){return FL(a)},[a]);return N.createElement(ML,{styles:BL(i,!e,a,r?"":"!important")})},Z2=!1;if(typeof window<"u")try{var Yp=Object.defineProperty({},"passive",{get:function(){return Z2=!0,!0}});window.addEventListener("test",Yp,Yp),window.removeEventListener("test",Yp,Yp)}catch{Z2=!1}var cf=Z2?{passive:!1}:!1,VL=function(t){return t.tagName==="TEXTAREA"},J6=function(t,e){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[e]!=="hidden"&&!(r.overflowY===r.overflowX&&!VL(t)&&r[e]==="visible")},zL=function(t){return J6(t,"overflowY")},qL=function(t){return J6(t,"overflowX")},fj=function(t,e){var r=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=Q6(t,n);if(a){var i=eS(t,n),o=i[1],l=i[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},HL=function(t){var e=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[e,r,n]},WL=function(t){var e=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[e,r,n]},Q6=function(t,e){return t==="v"?zL(e):qL(e)},eS=function(t,e){return t==="v"?HL(e):WL(e)},GL=function(t,e){return t==="h"&&e==="rtl"?-1:1},KL=function(t,e,r,n,a){var i=GL(t,window.getComputedStyle(e).direction),o=i*n,l=r.target,c=e.contains(l),u=!1,h=o>0,m=0,x=0;do{if(!l)break;var p=eS(t,l),y=p[0],w=p[1],j=p[2],C=w-j-i*y;(y||C)&&Q6(t,l)&&(m+=C,x+=y);var S=l.parentNode;l=S&&S.nodeType===Node.DOCUMENT_FRAGMENT_NODE?S.host:S}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(h&&Math.abs(m)<1||!h&&Math.abs(x)<1)&&(u=!0),u},Xp=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},mj=function(t){return[t.deltaX,t.deltaY]},pj=function(t){return t&&"current"in t?t.current:t},YL=function(t,e){return t[0]===e[0]&&t[1]===e[1]},XL=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},ZL=0,df=[];function JL(t){var e=N.useRef([]),r=N.useRef([0,0]),n=N.useRef(),a=N.useState(ZL++)[0],i=N.useState(Z6)[0],o=N.useRef(t);N.useEffect(function(){o.current=t},[t]),N.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(a));var w=aw([t.lockRef.current],(t.shards||[]).map(pj),!0).filter(Boolean);return w.forEach(function(j){return j.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),w.forEach(function(j){return j.classList.remove("allow-interactivity-".concat(a))})}}},[t.inert,t.lockRef.current,t.shards]);var l=N.useCallback(function(w,j){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!o.current.allowPinchZoom;var C=Xp(w),S=r.current,k="deltaX"in w?w.deltaX:S[0]-C[0],P="deltaY"in w?w.deltaY:S[1]-C[1],O,$=w.target,R=Math.abs(k)>Math.abs(P)?"h":"v";if("touches"in w&&R==="h"&&$.type==="range")return!1;var B=fj(R,$);if(!B)return!0;if(B?O=R:(O=R==="v"?"h":"v",B=fj(R,$)),!B)return!1;if(!n.current&&"changedTouches"in w&&(k||P)&&(n.current=O),!O)return!0;var U=n.current||O;return KL(U,j,w,U==="h"?k:P)},[]),c=N.useCallback(function(w){var j=w;if(!(!df.length||df[df.length-1]!==i)){var C="deltaY"in j?mj(j):Xp(j),S=e.current.filter(function(O){return O.name===j.type&&(O.target===j.target||j.target===O.shadowParent)&&YL(O.delta,C)})[0];if(S&&S.should){j.cancelable&&j.preventDefault();return}if(!S){var k=(o.current.shards||[]).map(pj).filter(Boolean).filter(function(O){return O.contains(j.target)}),P=k.length>0?l(j,k[0]):!o.current.noIsolation;P&&j.cancelable&&j.preventDefault()}}},[]),u=N.useCallback(function(w,j,C,S){var k={name:w,delta:j,target:C,should:S,shadowParent:QL(C)};e.current.push(k),setTimeout(function(){e.current=e.current.filter(function(P){return P!==k})},1)},[]),h=N.useCallback(function(w){r.current=Xp(w),n.current=void 0},[]),m=N.useCallback(function(w){u(w.type,mj(w),w.target,l(w,t.lockRef.current))},[]),x=N.useCallback(function(w){u(w.type,Xp(w),w.target,l(w,t.lockRef.current))},[]);N.useEffect(function(){return df.push(i),t.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:x}),document.addEventListener("wheel",c,cf),document.addEventListener("touchmove",c,cf),document.addEventListener("touchstart",h,cf),function(){df=df.filter(function(w){return w!==i}),document.removeEventListener("wheel",c,cf),document.removeEventListener("touchmove",c,cf),document.removeEventListener("touchstart",h,cf)}},[]);var p=t.removeScrollBar,y=t.inert;return N.createElement(N.Fragment,null,y?N.createElement(i,{styles:XL(a)}):null,p?N.createElement($L,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function QL(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const eF=EL(X6,JL);var V0=N.forwardRef(function(t,e){return N.createElement(_1,qo({},t,{ref:e,sideCar:eF}))});V0.classNames=_1.classNames;var tF=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},uf=new WeakMap,Zp=new WeakMap,Jp={},gv=0,tS=function(t){return t&&(t.host||tS(t.parentNode))},rF=function(t,e){return e.map(function(r){if(t.contains(r))return r;var n=tS(r);return n&&t.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},nF=function(t,e,r,n){var a=rF(e,Array.isArray(t)?t:[t]);Jp[r]||(Jp[r]=new WeakMap);var i=Jp[r],o=[],l=new Set,c=new Set(a),u=function(m){!m||l.has(m)||(l.add(m),u(m.parentNode))};a.forEach(u);var h=function(m){!m||c.has(m)||Array.prototype.forEach.call(m.children,function(x){if(l.has(x))h(x);else try{var p=x.getAttribute(n),y=p!==null&&p!=="false",w=(uf.get(x)||0)+1,j=(i.get(x)||0)+1;uf.set(x,w),i.set(x,j),o.push(x),w===1&&y&&Zp.set(x,!0),j===1&&x.setAttribute(r,"true"),y||x.setAttribute(n,"true")}catch(C){console.error("aria-hidden: cannot operate on ",x,C)}})};return h(e),l.clear(),gv++,function(){o.forEach(function(m){var x=uf.get(m)-1,p=i.get(m)-1;uf.set(m,x),i.set(m,p),x||(Zp.has(m)||m.removeAttribute(n),Zp.delete(m)),p||m.removeAttribute(r)}),gv--,gv||(uf=new WeakMap,uf=new WeakMap,Zp=new WeakMap,Jp={})}},C1=function(t,e,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),a=tF(t);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live], script"))),nF(n,a,r,"aria-hidden")):function(){return null}};function sF(t){const e=aF(t),r=N.forwardRef((n,a)=>{const{children:i,...o}=n,l=N.Children.toArray(i),c=l.find(oF);if(c){const u=c.props.children,h=l.map(m=>m===c?N.Children.count(u)>1?N.Children.only(null):N.isValidElement(u)?u.props.children:null:m);return s.jsx(e,{...o,ref:a,children:N.isValidElement(u)?N.cloneElement(u,void 0,h):null})}return s.jsx(e,{...o,ref:a,children:i})});return r.displayName=`${t}.Slot`,r}function aF(t){const e=N.forwardRef((r,n)=>{const{children:a,...i}=r;if(N.isValidElement(a)){const o=cF(a),l=lF(i,a.props);return a.type!==N.Fragment&&(l.ref=n?fc(n,o):o),N.cloneElement(a,l)}return N.Children.count(a)>1?N.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var iF=Symbol("radix.slottable");function oF(t){return N.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===iF}function lF(t,e){const r={...e};for(const n in e){const a=t[n],i=e[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...t,...r}}function cF(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var S1="Dialog",[rS,nS]=_o(S1),[dF,Rl]=rS(S1),sS=t=>{const{__scopeDialog:e,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!0}=t,l=N.useRef(null),c=N.useRef(null),[u,h]=dc({prop:n,defaultProp:a??!1,onChange:i,caller:S1});return s.jsx(dF,{scope:e,triggerRef:l,contentRef:c,contentId:Ko(),titleId:Ko(),descriptionId:Ko(),open:u,onOpenChange:h,onOpenToggle:N.useCallback(()=>h(m=>!m),[h]),modal:o,children:r})};sS.displayName=S1;var aS="DialogTrigger",iS=N.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,a=Rl(aS,r),i=Wr(e,a.triggerRef);return s.jsx(Pr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":kw(a.open),...n,ref:i,onClick:Pt(t.onClick,a.onOpenToggle)})});iS.displayName=aS;var Aw="DialogPortal",[uF,oS]=rS(Aw,{forceMount:void 0}),lS=t=>{const{__scopeDialog:e,forceMount:r,children:n,container:a}=t,i=Rl(Aw,e);return s.jsx(uF,{scope:e,forceMount:r,children:N.Children.map(n,o=>s.jsx(Qi,{present:r||i.open,children:s.jsx(nm,{asChild:!0,container:a,children:o})}))})};lS.displayName=Aw;var Zx="DialogOverlay",cS=N.forwardRef((t,e)=>{const r=oS(Zx,t.__scopeDialog),{forceMount:n=r.forceMount,...a}=t,i=Rl(Zx,t.__scopeDialog);return i.modal?s.jsx(Qi,{present:n||i.open,children:s.jsx(fF,{...a,ref:e})}):null});cS.displayName=Zx;var hF=sF("DialogOverlay.RemoveScroll"),fF=N.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,a=Rl(Zx,r);return s.jsx(V0,{as:hF,allowPinchZoom:!0,shards:[a.contentRef],children:s.jsx(Pr.div,{"data-state":kw(a.open),...n,ref:e,style:{pointerEvents:"auto",...n.style}})})}),gh="DialogContent",dS=N.forwardRef((t,e)=>{const r=oS(gh,t.__scopeDialog),{forceMount:n=r.forceMount,...a}=t,i=Rl(gh,t.__scopeDialog);return s.jsx(Qi,{present:n||i.open,children:i.modal?s.jsx(mF,{...a,ref:e}):s.jsx(pF,{...a,ref:e})})});dS.displayName=gh;var mF=N.forwardRef((t,e)=>{const r=Rl(gh,t.__scopeDialog),n=N.useRef(null),a=Wr(e,r.contentRef,n);return N.useEffect(()=>{const i=n.current;if(i)return C1(i)},[]),s.jsx(uS,{...t,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Pt(t.onCloseAutoFocus,i=>{i.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:Pt(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:Pt(t.onFocusOutside,i=>i.preventDefault())})}),pF=N.forwardRef((t,e)=>{const r=Rl(gh,t.__scopeDialog),n=N.useRef(!1),a=N.useRef(!1);return s.jsx(uS,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{t.onCloseAutoFocus?.(i),i.defaultPrevented||(n.current||r.triggerRef.current?.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{t.onInteractOutside?.(i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;r.triggerRef.current?.contains(o)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),uS=N.forwardRef((t,e)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=t,l=Rl(gh,r),c=N.useRef(null),u=Wr(e,c);return j1(),s.jsxs(s.Fragment,{children:[s.jsx($0,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(rm,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":kw(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(gF,{titleId:l.titleId}),s.jsx(yF,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Ew="DialogTitle",hS=N.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,a=Rl(Ew,r);return s.jsx(Pr.h2,{id:a.titleId,...n,ref:e})});hS.displayName=Ew;var fS="DialogDescription",mS=N.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,a=Rl(fS,r);return s.jsx(Pr.p,{id:a.descriptionId,...n,ref:e})});mS.displayName=fS;var pS="DialogClose",xS=N.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,a=Rl(pS,r);return s.jsx(Pr.button,{type:"button",...n,ref:e,onClick:Pt(t.onClick,()=>a.onOpenChange(!1))})});xS.displayName=pS;function kw(t){return t?"open":"closed"}var gS="DialogTitleWarning",[xF,vS]=oR(gS,{contentName:gh,titleName:Ew,docsSlug:"dialog"}),gF=({titleId:t})=>{const e=vS(gS),r=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return N.useEffect(()=>{t&&(document.getElementById(t)||console.error(r))},[r,t]),null},vF="DialogDescriptionWarning",yF=({contentRef:t,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${vS(vF).contentName}}.`;return N.useEffect(()=>{const a=t.current?.getAttribute("aria-describedby");e&&a&&(document.getElementById(e)||console.warn(n))},[n,t,e]),null},Pw=sS,wF=iS,Tw=lS,A1=cS,E1=dS,Iw=hS,Dw=mS,k1=xS;function Jd({...t}){return s.jsx(Pw,{"data-slot":"sheet",...t})}function bF({...t}){return s.jsx(Tw,{"data-slot":"sheet-portal",...t})}const yS=N.forwardRef(({className:t,...e},r)=>s.jsx(A1,{ref:r,"data-slot":"sheet-overlay",className:xr("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...e}));yS.displayName="SheetOverlay";function Qd({className:t,children:e,side:r="right",...n}){return s.jsxs(bF,{children:[s.jsx(yS,{}),s.jsxs(E1,{"data-slot":"sheet-content",className:xr("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",r==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",r==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",r==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",r==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",t),...n,children:[e,s.jsxs(k1,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[s.jsx(ps,{className:"size-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function eu({className:t,...e}){return s.jsx("div",{"data-slot":"sheet-header",className:xr("flex flex-col gap-1.5 p-4",t),...e})}function tu({className:t,...e}){return s.jsx(Iw,{"data-slot":"sheet-title",className:xr("text-foreground font-semibold",t),...e})}function Df({className:t,...e}){return s.jsx(Dw,{"data-slot":"sheet-description",className:xr("text-muted-foreground text-sm",t),...e})}function xj(t,[e,r]){return Math.min(r,Math.max(e,t))}function gj(t){const e=NF(t),r=N.forwardRef((n,a)=>{const{children:i,...o}=n,l=N.Children.toArray(i),c=l.find(_F);if(c){const u=c.props.children,h=l.map(m=>m===c?N.Children.count(u)>1?N.Children.only(null):N.isValidElement(u)?u.props.children:null:m);return s.jsx(e,{...o,ref:a,children:N.isValidElement(u)?N.cloneElement(u,void 0,h):null})}return s.jsx(e,{...o,ref:a,children:i})});return r.displayName=`${t}.Slot`,r}function NF(t){const e=N.forwardRef((r,n)=>{const{children:a,...i}=r;if(N.isValidElement(a)){const o=SF(a),l=CF(i,a.props);return a.type!==N.Fragment&&(l.ref=n?fc(n,o):o),N.cloneElement(a,l)}return N.Children.count(a)>1?N.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var jF=Symbol("radix.slottable");function _F(t){return N.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===jF}function CF(t,e){const r={...e};for(const n in e){const a=t[n],i=e[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...t,...r}}function SF(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function Ow(t){const e=t+"CollectionProvider",[r,n]=_o(e),[a,i]=r(e,{collectionRef:{current:null},itemMap:new Map}),o=w=>{const{scope:j,children:C}=w,S=pt.useRef(null),k=pt.useRef(new Map).current;return s.jsx(a,{scope:j,itemMap:k,collectionRef:S,children:C})};o.displayName=e;const l=t+"CollectionSlot",c=gj(l),u=pt.forwardRef((w,j)=>{const{scope:C,children:S}=w,k=i(l,C),P=Wr(j,k.collectionRef);return s.jsx(c,{ref:P,children:S})});u.displayName=l;const h=t+"CollectionItemSlot",m="data-radix-collection-item",x=gj(h),p=pt.forwardRef((w,j)=>{const{scope:C,children:S,...k}=w,P=pt.useRef(null),O=Wr(j,P),$=i(h,C);return pt.useEffect(()=>($.itemMap.set(P,{ref:P,...k}),()=>void $.itemMap.delete(P))),s.jsx(x,{[m]:"",ref:O,children:S})});p.displayName=h;function y(w){const j=i(t+"CollectionConsumer",w);return pt.useCallback(()=>{const S=j.collectionRef.current;if(!S)return[];const k=Array.from(S.querySelectorAll(`[${m}]`));return Array.from(j.itemMap.values()).sort(($,R)=>k.indexOf($.ref.current)-k.indexOf(R.ref.current))},[j.collectionRef,j.itemMap])}return[{Provider:o,Slot:u,ItemSlot:p},y,n]}var AF=N.createContext(void 0);function P1(t){const e=N.useContext(AF);return t||e||"ltr"}const EF=["top","right","bottom","left"],ou=Math.min,vo=Math.max,Jx=Math.round,Qp=Math.floor,sc=t=>({x:t,y:t}),kF={left:"right",right:"left",bottom:"top",top:"bottom"},PF={start:"end",end:"start"};function J2(t,e,r){return vo(t,ou(e,r))}function nd(t,e){return typeof t=="function"?t(e):t}function sd(t){return t.split("-")[0]}function sm(t){return t.split("-")[1]}function Rw(t){return t==="x"?"y":"x"}function Lw(t){return t==="y"?"height":"width"}const TF=new Set(["top","bottom"]);function tc(t){return TF.has(sd(t))?"y":"x"}function Fw(t){return Rw(tc(t))}function IF(t,e,r){r===void 0&&(r=!1);const n=sm(t),a=Fw(t),i=Lw(a);let o=a==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Qx(o)),[o,Qx(o)]}function DF(t){const e=Qx(t);return[Q2(t),e,Q2(e)]}function Q2(t){return t.replace(/start|end/g,e=>PF[e])}const vj=["left","right"],yj=["right","left"],OF=["top","bottom"],RF=["bottom","top"];function LF(t,e,r){switch(t){case"top":case"bottom":return r?e?yj:vj:e?vj:yj;case"left":case"right":return e?OF:RF;default:return[]}}function FF(t,e,r,n){const a=sm(t);let i=LF(sd(t),r==="start",n);return a&&(i=i.map(o=>o+"-"+a),e&&(i=i.concat(i.map(Q2)))),i}function Qx(t){return t.replace(/left|right|bottom|top/g,e=>kF[e])}function MF(t){return{top:0,right:0,bottom:0,left:0,...t}}function wS(t){return typeof t!="number"?MF(t):{top:t,right:t,bottom:t,left:t}}function e1(t){const{x:e,y:r,width:n,height:a}=t;return{width:n,height:a,top:r,left:e,right:e+n,bottom:r+a,x:e,y:r}}function wj(t,e,r){let{reference:n,floating:a}=t;const i=tc(e),o=Fw(e),l=Lw(o),c=sd(e),u=i==="y",h=n.x+n.width/2-a.width/2,m=n.y+n.height/2-a.height/2,x=n[l]/2-a[l]/2;let p;switch(c){case"top":p={x:h,y:n.y-a.height};break;case"bottom":p={x:h,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:m};break;case"left":p={x:n.x-a.width,y:m};break;default:p={x:n.x,y:n.y}}switch(sm(e)){case"start":p[o]-=x*(r&&u?-1:1);break;case"end":p[o]+=x*(r&&u?-1:1);break}return p}const BF=async(t,e,r)=>{const{placement:n="bottom",strategy:a="absolute",middleware:i=[],platform:o}=r,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:a}),{x:h,y:m}=wj(u,n,c),x=n,p={},y=0;for(let w=0;w<l.length;w++){const{name:j,fn:C}=l[w],{x:S,y:k,data:P,reset:O}=await C({x:h,y:m,initialPlacement:n,placement:x,strategy:a,middlewareData:p,rects:u,platform:o,elements:{reference:t,floating:e}});h=S??h,m=k??m,p={...p,[j]:{...p[j],...P}},O&&y<=50&&(y++,typeof O=="object"&&(O.placement&&(x=O.placement),O.rects&&(u=O.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:a}):O.rects),{x:h,y:m}=wj(u,x,c)),w=-1)}return{x:h,y:m,placement:x,strategy:a,middlewareData:p}};async function b0(t,e){var r;e===void 0&&(e={});const{x:n,y:a,platform:i,rects:o,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:m="floating",altBoundary:x=!1,padding:p=0}=nd(e,t),y=wS(p),j=l[x?m==="floating"?"reference":"floating":m],C=e1(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(j)))==null||r?j:j.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:h,strategy:c})),S=m==="floating"?{x:n,y:a,width:o.floating.width,height:o.floating.height}:o.reference,k=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),P=await(i.isElement==null?void 0:i.isElement(k))?await(i.getScale==null?void 0:i.getScale(k))||{x:1,y:1}:{x:1,y:1},O=e1(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:S,offsetParent:k,strategy:c}):S);return{top:(C.top-O.top+y.top)/P.y,bottom:(O.bottom-C.bottom+y.bottom)/P.y,left:(C.left-O.left+y.left)/P.x,right:(O.right-C.right+y.right)/P.x}}const UF=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:n,placement:a,rects:i,platform:o,elements:l,middlewareData:c}=e,{element:u,padding:h=0}=nd(t,e)||{};if(u==null)return{};const m=wS(h),x={x:r,y:n},p=Fw(a),y=Lw(p),w=await o.getDimensions(u),j=p==="y",C=j?"top":"left",S=j?"bottom":"right",k=j?"clientHeight":"clientWidth",P=i.reference[y]+i.reference[p]-x[p]-i.floating[y],O=x[p]-i.reference[p],$=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let R=$?$[k]:0;(!R||!await(o.isElement==null?void 0:o.isElement($)))&&(R=l.floating[k]||i.floating[y]);const B=P/2-O/2,U=R/2-w[y]/2-1,K=ou(m[C],U),M=ou(m[S],U),q=K,re=R-w[y]-M,ee=R/2-w[y]/2+B,H=J2(q,ee,re),se=!c.arrow&&sm(a)!=null&&ee!==H&&i.reference[y]/2-(ee<q?K:M)-w[y]/2<0,ue=se?ee<q?ee-q:ee-re:0;return{[p]:x[p]+ue,data:{[p]:H,centerOffset:ee-H-ue,...se&&{alignmentOffset:ue}},reset:se}}}),$F=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:h=!0,crossAxis:m=!0,fallbackPlacements:x,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:w=!0,...j}=nd(t,e);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const C=sd(a),S=tc(l),k=sd(l)===l,P=await(c.isRTL==null?void 0:c.isRTL(u.floating)),O=x||(k||!w?[Qx(l)]:DF(l)),$=y!=="none";!x&&$&&O.push(...FF(l,w,y,P));const R=[l,...O],B=await b0(e,j),U=[];let K=((n=i.flip)==null?void 0:n.overflows)||[];if(h&&U.push(B[C]),m){const ee=IF(a,o,P);U.push(B[ee[0]],B[ee[1]])}if(K=[...K,{placement:a,overflows:U}],!U.every(ee=>ee<=0)){var M,q;const ee=(((M=i.flip)==null?void 0:M.index)||0)+1,H=R[ee];if(H&&(!(m==="alignment"?S!==tc(H):!1)||K.every(G=>tc(G.placement)===S?G.overflows[0]>0:!0)))return{data:{index:ee,overflows:K},reset:{placement:H}};let se=(q=K.filter(ue=>ue.overflows[0]<=0).sort((ue,G)=>ue.overflows[1]-G.overflows[1])[0])==null?void 0:q.placement;if(!se)switch(p){case"bestFit":{var re;const ue=(re=K.filter(G=>{if($){const J=tc(G.placement);return J===S||J==="y"}return!0}).map(G=>[G.placement,G.overflows.filter(J=>J>0).reduce((J,oe)=>J+oe,0)]).sort((G,J)=>G[1]-J[1])[0])==null?void 0:re[0];ue&&(se=ue);break}case"initialPlacement":se=l;break}if(a!==se)return{reset:{placement:se}}}return{}}}};function bj(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Nj(t){return EF.some(e=>t[e]>=0)}const VF=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:r}=e,{strategy:n="referenceHidden",...a}=nd(t,e);switch(n){case"referenceHidden":{const i=await b0(e,{...a,elementContext:"reference"}),o=bj(i,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:Nj(o)}}}case"escaped":{const i=await b0(e,{...a,altBoundary:!0}),o=bj(i,r.floating);return{data:{escapedOffsets:o,escaped:Nj(o)}}}default:return{}}}}},bS=new Set(["left","top"]);async function zF(t,e){const{placement:r,platform:n,elements:a}=t,i=await(n.isRTL==null?void 0:n.isRTL(a.floating)),o=sd(r),l=sm(r),c=tc(r)==="y",u=bS.has(o)?-1:1,h=i&&c?-1:1,m=nd(e,t);let{mainAxis:x,crossAxis:p,alignmentAxis:y}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return l&&typeof y=="number"&&(p=l==="end"?y*-1:y),c?{x:p*h,y:x*u}:{x:x*u,y:p*h}}const qF=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:a,y:i,placement:o,middlewareData:l}=e,c=await zF(e,t);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:o}}}}},HF=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:a}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:j=>{let{x:C,y:S}=j;return{x:C,y:S}}},...c}=nd(t,e),u={x:r,y:n},h=await b0(e,c),m=tc(sd(a)),x=Rw(m);let p=u[x],y=u[m];if(i){const j=x==="y"?"top":"left",C=x==="y"?"bottom":"right",S=p+h[j],k=p-h[C];p=J2(S,p,k)}if(o){const j=m==="y"?"top":"left",C=m==="y"?"bottom":"right",S=y+h[j],k=y-h[C];y=J2(S,y,k)}const w=l.fn({...e,[x]:p,[m]:y});return{...w,data:{x:w.x-r,y:w.y-n,enabled:{[x]:i,[m]:o}}}}}},WF=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:n,placement:a,rects:i,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=nd(t,e),h={x:r,y:n},m=tc(a),x=Rw(m);let p=h[x],y=h[m];const w=nd(l,e),j=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(c){const k=x==="y"?"height":"width",P=i.reference[x]-i.floating[k]+j.mainAxis,O=i.reference[x]+i.reference[k]-j.mainAxis;p<P?p=P:p>O&&(p=O)}if(u){var C,S;const k=x==="y"?"width":"height",P=bS.has(sd(a)),O=i.reference[m]-i.floating[k]+(P&&((C=o.offset)==null?void 0:C[m])||0)+(P?0:j.crossAxis),$=i.reference[m]+i.reference[k]+(P?0:((S=o.offset)==null?void 0:S[m])||0)-(P?j.crossAxis:0);y<O?y=O:y>$&&(y=$)}return{[x]:p,[m]:y}}}},GF=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;const{placement:a,rects:i,platform:o,elements:l}=e,{apply:c=()=>{},...u}=nd(t,e),h=await b0(e,u),m=sd(a),x=sm(a),p=tc(a)==="y",{width:y,height:w}=i.floating;let j,C;m==="top"||m==="bottom"?(j=m,C=x===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(C=m,j=x==="end"?"top":"bottom");const S=w-h.top-h.bottom,k=y-h.left-h.right,P=ou(w-h[j],S),O=ou(y-h[C],k),$=!e.middlewareData.shift;let R=P,B=O;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(B=k),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(R=S),$&&!x){const K=vo(h.left,0),M=vo(h.right,0),q=vo(h.top,0),re=vo(h.bottom,0);p?B=y-2*(K!==0||M!==0?K+M:vo(h.left,h.right)):R=w-2*(q!==0||re!==0?q+re:vo(h.top,h.bottom))}await c({...e,availableWidth:B,availableHeight:R});const U=await o.getDimensions(l.floating);return y!==U.width||w!==U.height?{reset:{rects:!0}}:{}}}};function T1(){return typeof window<"u"}function am(t){return NS(t)?(t.nodeName||"").toLowerCase():"#document"}function jo(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function mc(t){var e;return(e=(NS(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function NS(t){return T1()?t instanceof Node||t instanceof jo(t).Node:!1}function Il(t){return T1()?t instanceof Element||t instanceof jo(t).Element:!1}function uc(t){return T1()?t instanceof HTMLElement||t instanceof jo(t).HTMLElement:!1}function jj(t){return!T1()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof jo(t).ShadowRoot}const KF=new Set(["inline","contents"]);function z0(t){const{overflow:e,overflowX:r,overflowY:n,display:a}=Dl(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!KF.has(a)}const YF=new Set(["table","td","th"]);function XF(t){return YF.has(am(t))}const ZF=[":popover-open",":modal"];function I1(t){return ZF.some(e=>{try{return t.matches(e)}catch{return!1}})}const JF=["transform","translate","scale","rotate","perspective"],QF=["transform","translate","scale","rotate","perspective","filter"],eM=["paint","layout","strict","content"];function Mw(t){const e=Bw(),r=Il(t)?Dl(t):t;return JF.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||QF.some(n=>(r.willChange||"").includes(n))||eM.some(n=>(r.contain||"").includes(n))}function tM(t){let e=lu(t);for(;uc(e)&&!qf(e);){if(Mw(e))return e;if(I1(e))return null;e=lu(e)}return null}function Bw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const rM=new Set(["html","body","#document"]);function qf(t){return rM.has(am(t))}function Dl(t){return jo(t).getComputedStyle(t)}function D1(t){return Il(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function lu(t){if(am(t)==="html")return t;const e=t.assignedSlot||t.parentNode||jj(t)&&t.host||mc(t);return jj(e)?e.host:e}function jS(t){const e=lu(t);return qf(e)?t.ownerDocument?t.ownerDocument.body:t.body:uc(e)&&z0(e)?e:jS(e)}function N0(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const a=jS(t),i=a===((n=t.ownerDocument)==null?void 0:n.body),o=jo(a);if(i){const l=ey(o);return e.concat(o,o.visualViewport||[],z0(a)?a:[],l&&r?N0(l):[])}return e.concat(a,N0(a,[],r))}function ey(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function _S(t){const e=Dl(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const a=uc(t),i=a?t.offsetWidth:r,o=a?t.offsetHeight:n,l=Jx(r)!==i||Jx(n)!==o;return l&&(r=i,n=o),{width:r,height:n,$:l}}function Uw(t){return Il(t)?t:t.contextElement}function Of(t){const e=Uw(t);if(!uc(e))return sc(1);const r=e.getBoundingClientRect(),{width:n,height:a,$:i}=_S(e);let o=(i?Jx(r.width):r.width)/n,l=(i?Jx(r.height):r.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const nM=sc(0);function CS(t){const e=jo(t);return!Bw()||!e.visualViewport?nM:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function sM(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==jo(t)?!1:e}function vh(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const a=t.getBoundingClientRect(),i=Uw(t);let o=sc(1);e&&(n?Il(n)&&(o=Of(n)):o=Of(t));const l=sM(i,r,n)?CS(i):sc(0);let c=(a.left+l.x)/o.x,u=(a.top+l.y)/o.y,h=a.width/o.x,m=a.height/o.y;if(i){const x=jo(i),p=n&&Il(n)?jo(n):n;let y=x,w=ey(y);for(;w&&n&&p!==y;){const j=Of(w),C=w.getBoundingClientRect(),S=Dl(w),k=C.left+(w.clientLeft+parseFloat(S.paddingLeft))*j.x,P=C.top+(w.clientTop+parseFloat(S.paddingTop))*j.y;c*=j.x,u*=j.y,h*=j.x,m*=j.y,c+=k,u+=P,y=jo(w),w=ey(y)}}return e1({width:h,height:m,x:c,y:u})}function O1(t,e){const r=D1(t).scrollLeft;return e?e.left+r:vh(mc(t)).left+r}function SS(t,e){const r=t.getBoundingClientRect(),n=r.left+e.scrollLeft-O1(t,r),a=r.top+e.scrollTop;return{x:n,y:a}}function aM(t){let{elements:e,rect:r,offsetParent:n,strategy:a}=t;const i=a==="fixed",o=mc(n),l=e?I1(e.floating):!1;if(n===o||l&&i)return r;let c={scrollLeft:0,scrollTop:0},u=sc(1);const h=sc(0),m=uc(n);if((m||!m&&!i)&&((am(n)!=="body"||z0(o))&&(c=D1(n)),uc(n))){const p=vh(n);u=Of(n),h.x=p.x+n.clientLeft,h.y=p.y+n.clientTop}const x=o&&!m&&!i?SS(o,c):sc(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+h.x+x.x,y:r.y*u.y-c.scrollTop*u.y+h.y+x.y}}function iM(t){return Array.from(t.getClientRects())}function oM(t){const e=mc(t),r=D1(t),n=t.ownerDocument.body,a=vo(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),i=vo(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+O1(t);const l=-r.scrollTop;return Dl(n).direction==="rtl"&&(o+=vo(e.clientWidth,n.clientWidth)-a),{width:a,height:i,x:o,y:l}}const _j=25;function lM(t,e){const r=jo(t),n=mc(t),a=r.visualViewport;let i=n.clientWidth,o=n.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;const h=Bw();(!h||h&&e==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}const u=O1(n);if(u<=0){const h=n.ownerDocument,m=h.body,x=getComputedStyle(m),p=h.compatMode==="CSS1Compat"&&parseFloat(x.marginLeft)+parseFloat(x.marginRight)||0,y=Math.abs(n.clientWidth-m.clientWidth-p);y<=_j&&(i-=y)}else u<=_j&&(i+=u);return{width:i,height:o,x:l,y:c}}const cM=new Set(["absolute","fixed"]);function dM(t,e){const r=vh(t,!0,e==="fixed"),n=r.top+t.clientTop,a=r.left+t.clientLeft,i=uc(t)?Of(t):sc(1),o=t.clientWidth*i.x,l=t.clientHeight*i.y,c=a*i.x,u=n*i.y;return{width:o,height:l,x:c,y:u}}function Cj(t,e,r){let n;if(e==="viewport")n=lM(t,r);else if(e==="document")n=oM(mc(t));else if(Il(e))n=dM(e,r);else{const a=CS(t);n={x:e.x-a.x,y:e.y-a.y,width:e.width,height:e.height}}return e1(n)}function AS(t,e){const r=lu(t);return r===e||!Il(r)||qf(r)?!1:Dl(r).position==="fixed"||AS(r,e)}function uM(t,e){const r=e.get(t);if(r)return r;let n=N0(t,[],!1).filter(l=>Il(l)&&am(l)!=="body"),a=null;const i=Dl(t).position==="fixed";let o=i?lu(t):t;for(;Il(o)&&!qf(o);){const l=Dl(o),c=Mw(o);!c&&l.position==="fixed"&&(a=null),(i?!c&&!a:!c&&l.position==="static"&&!!a&&cM.has(a.position)||z0(o)&&!c&&AS(t,o))?n=n.filter(h=>h!==o):a=l,o=lu(o)}return e.set(t,n),n}function hM(t){let{element:e,boundary:r,rootBoundary:n,strategy:a}=t;const o=[...r==="clippingAncestors"?I1(e)?[]:uM(e,this._c):[].concat(r),n],l=o[0],c=o.reduce((u,h)=>{const m=Cj(e,h,a);return u.top=vo(m.top,u.top),u.right=ou(m.right,u.right),u.bottom=ou(m.bottom,u.bottom),u.left=vo(m.left,u.left),u},Cj(e,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function fM(t){const{width:e,height:r}=_S(t);return{width:e,height:r}}function mM(t,e,r){const n=uc(e),a=mc(e),i=r==="fixed",o=vh(t,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=sc(0);function u(){c.x=O1(a)}if(n||!n&&!i)if((am(e)!=="body"||z0(a))&&(l=D1(e)),n){const p=vh(e,!0,i,e);c.x=p.x+e.clientLeft,c.y=p.y+e.clientTop}else a&&u();i&&!n&&a&&u();const h=a&&!n&&!i?SS(a,l):sc(0),m=o.left+l.scrollLeft-c.x-h.x,x=o.top+l.scrollTop-c.y-h.y;return{x:m,y:x,width:o.width,height:o.height}}function vv(t){return Dl(t).position==="static"}function Sj(t,e){if(!uc(t)||Dl(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return mc(t)===r&&(r=r.ownerDocument.body),r}function ES(t,e){const r=jo(t);if(I1(t))return r;if(!uc(t)){let a=lu(t);for(;a&&!qf(a);){if(Il(a)&&!vv(a))return a;a=lu(a)}return r}let n=Sj(t,e);for(;n&&XF(n)&&vv(n);)n=Sj(n,e);return n&&qf(n)&&vv(n)&&!Mw(n)?r:n||tM(t)||r}const pM=async function(t){const e=this.getOffsetParent||ES,r=this.getDimensions,n=await r(t.floating);return{reference:mM(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function xM(t){return Dl(t).direction==="rtl"}const gM={convertOffsetParentRelativeRectToViewportRelativeRect:aM,getDocumentElement:mc,getClippingRect:hM,getOffsetParent:ES,getElementRects:pM,getClientRects:iM,getDimensions:fM,getScale:Of,isElement:Il,isRTL:xM};function kS(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function vM(t,e){let r=null,n;const a=mc(t);function i(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=t.getBoundingClientRect(),{left:h,top:m,width:x,height:p}=u;if(l||e(),!x||!p)return;const y=Qp(m),w=Qp(a.clientWidth-(h+x)),j=Qp(a.clientHeight-(m+p)),C=Qp(h),k={rootMargin:-y+"px "+-w+"px "+-j+"px "+-C+"px",threshold:vo(0,ou(1,c))||1};let P=!0;function O($){const R=$[0].intersectionRatio;if(R!==c){if(!P)return o();R?o(!1,R):n=setTimeout(()=>{o(!1,1e-7)},1e3)}R===1&&!kS(u,t.getBoundingClientRect())&&o(),P=!1}try{r=new IntersectionObserver(O,{...k,root:a.ownerDocument})}catch{r=new IntersectionObserver(O,k)}r.observe(t)}return o(!0),i}function yM(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=Uw(t),h=a||i?[...u?N0(u):[],...N0(e)]:[];h.forEach(C=>{a&&C.addEventListener("scroll",r,{passive:!0}),i&&C.addEventListener("resize",r)});const m=u&&l?vM(u,r):null;let x=-1,p=null;o&&(p=new ResizeObserver(C=>{let[S]=C;S&&S.target===u&&p&&(p.unobserve(e),cancelAnimationFrame(x),x=requestAnimationFrame(()=>{var k;(k=p)==null||k.observe(e)})),r()}),u&&!c&&p.observe(u),p.observe(e));let y,w=c?vh(t):null;c&&j();function j(){const C=vh(t);w&&!kS(w,C)&&r(),w=C,y=requestAnimationFrame(j)}return r(),()=>{var C;h.forEach(S=>{a&&S.removeEventListener("scroll",r),i&&S.removeEventListener("resize",r)}),m?.(),(C=p)==null||C.disconnect(),p=null,c&&cancelAnimationFrame(y)}}const wM=qF,bM=HF,NM=$F,jM=GF,_M=VF,Aj=UF,CM=WF,SM=(t,e,r)=>{const n=new Map,a={platform:gM,...r},i={...a.platform,_c:n};return BF(t,e,{...a,platform:i})};var AM=typeof document<"u",EM=function(){},Nx=AM?N.useLayoutEffect:EM;function t1(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,n,a;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!t1(t[n],e[n]))return!1;return!0}if(a=Object.keys(t),r=a.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(e,a[n]))return!1;for(n=r;n--!==0;){const i=a[n];if(!(i==="_owner"&&t.$$typeof)&&!t1(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function PS(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Ej(t,e){const r=PS(t);return Math.round(e*r)/r}function yv(t){const e=N.useRef(t);return Nx(()=>{e.current=t}),e}function kM(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:n=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[h,m]=N.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[x,p]=N.useState(n);t1(x,n)||p(n);const[y,w]=N.useState(null),[j,C]=N.useState(null),S=N.useCallback(G=>{G!==$.current&&($.current=G,w(G))},[]),k=N.useCallback(G=>{G!==R.current&&(R.current=G,C(G))},[]),P=i||y,O=o||j,$=N.useRef(null),R=N.useRef(null),B=N.useRef(h),U=c!=null,K=yv(c),M=yv(a),q=yv(u),re=N.useCallback(()=>{if(!$.current||!R.current)return;const G={placement:e,strategy:r,middleware:x};M.current&&(G.platform=M.current),SM($.current,R.current,G).then(J=>{const oe={...J,isPositioned:q.current!==!1};ee.current&&!t1(B.current,oe)&&(B.current=oe,U0.flushSync(()=>{m(oe)}))})},[x,e,r,M,q]);Nx(()=>{u===!1&&B.current.isPositioned&&(B.current.isPositioned=!1,m(G=>({...G,isPositioned:!1})))},[u]);const ee=N.useRef(!1);Nx(()=>(ee.current=!0,()=>{ee.current=!1}),[]),Nx(()=>{if(P&&($.current=P),O&&(R.current=O),P&&O){if(K.current)return K.current(P,O,re);re()}},[P,O,re,K,U]);const H=N.useMemo(()=>({reference:$,floating:R,setReference:S,setFloating:k}),[S,k]),se=N.useMemo(()=>({reference:P,floating:O}),[P,O]),ue=N.useMemo(()=>{const G={position:r,left:0,top:0};if(!se.floating)return G;const J=Ej(se.floating,h.x),oe=Ej(se.floating,h.y);return l?{...G,transform:"translate("+J+"px, "+oe+"px)",...PS(se.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:J,top:oe}},[r,l,se.floating,h.x,h.y]);return N.useMemo(()=>({...h,update:re,refs:H,elements:se,floatingStyles:ue}),[h,re,H,se,ue])}const PM=t=>{function e(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:n,padding:a}=typeof t=="function"?t(r):t;return n&&e(n)?n.current!=null?Aj({element:n.current,padding:a}).fn(r):{}:n?Aj({element:n,padding:a}).fn(r):{}}}},TM=(t,e)=>({...wM(t),options:[t,e]}),IM=(t,e)=>({...bM(t),options:[t,e]}),DM=(t,e)=>({...CM(t),options:[t,e]}),OM=(t,e)=>({...NM(t),options:[t,e]}),RM=(t,e)=>({...jM(t),options:[t,e]}),LM=(t,e)=>({..._M(t),options:[t,e]}),FM=(t,e)=>({...PM(t),options:[t,e]});var MM="Arrow",TS=N.forwardRef((t,e)=>{const{children:r,width:n=10,height:a=5,...i}=t;return s.jsx(Pr.svg,{...i,ref:e,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});TS.displayName=MM;var BM=TS,$w="Popper",[IS,pu]=_o($w),[UM,DS]=IS($w),OS=t=>{const{__scopePopper:e,children:r}=t,[n,a]=N.useState(null);return s.jsx(UM,{scope:e,anchor:n,onAnchorChange:a,children:r})};OS.displayName=$w;var RS="PopperAnchor",LS=N.forwardRef((t,e)=>{const{__scopePopper:r,virtualRef:n,...a}=t,i=DS(RS,r),o=N.useRef(null),l=Wr(e,o),c=N.useRef(null);return N.useEffect(()=>{const u=c.current;c.current=n?.current||o.current,u!==c.current&&i.onAnchorChange(c.current)}),n?null:s.jsx(Pr.div,{...a,ref:l})});LS.displayName=RS;var Vw="PopperContent",[$M,VM]=IS(Vw),FS=N.forwardRef((t,e)=>{const{__scopePopper:r,side:n="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:m="partial",hideWhenDetached:x=!1,updatePositionStrategy:p="optimized",onPlaced:y,...w}=t,j=DS(Vw,r),[C,S]=N.useState(null),k=Wr(e,T=>S(T)),[P,O]=N.useState(null),$=Nw(P),R=$?.width??0,B=$?.height??0,U=n+(i!=="center"?"-"+i:""),K=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},M=Array.isArray(u)?u:[u],q=M.length>0,re={padding:K,boundary:M.filter(qM),altBoundary:q},{refs:ee,floatingStyles:H,placement:se,isPositioned:ue,middlewareData:G}=kM({strategy:"fixed",placement:U,whileElementsMounted:(...T)=>yM(...T,{animationFrame:p==="always"}),elements:{reference:j.anchor},middleware:[TM({mainAxis:a+B,alignmentAxis:o}),c&&IM({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?DM():void 0,...re}),c&&OM({...re}),RM({...re,apply:({elements:T,rects:ie,availableWidth:ge,availableHeight:we})=>{const{width:Se,height:Ue}=ie.reference,We=T.floating.style;We.setProperty("--radix-popper-available-width",`${ge}px`),We.setProperty("--radix-popper-available-height",`${we}px`),We.setProperty("--radix-popper-anchor-width",`${Se}px`),We.setProperty("--radix-popper-anchor-height",`${Ue}px`)}}),P&&FM({element:P,padding:l}),HM({arrowWidth:R,arrowHeight:B}),x&&LM({strategy:"referenceHidden",...re})]}),[J,oe]=US(se),Y=Tl(y);wa(()=>{ue&&Y?.()},[ue,Y]);const L=G.arrow?.x,z=G.arrow?.y,V=G.arrow?.centerOffset!==0,[W,Q]=N.useState();return wa(()=>{C&&Q(window.getComputedStyle(C).zIndex)},[C]),s.jsx("div",{ref:ee.setFloating,"data-radix-popper-content-wrapper":"",style:{...H,transform:ue?H.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:W,"--radix-popper-transform-origin":[G.transformOrigin?.x,G.transformOrigin?.y].join(" "),...G.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:s.jsx($M,{scope:r,placedSide:J,onArrowChange:O,arrowX:L,arrowY:z,shouldHideArrow:V,children:s.jsx(Pr.div,{"data-side":J,"data-align":oe,...w,ref:k,style:{...w.style,animation:ue?void 0:"none"}})})})});FS.displayName=Vw;var MS="PopperArrow",zM={top:"bottom",right:"left",bottom:"top",left:"right"},BS=N.forwardRef(function(e,r){const{__scopePopper:n,...a}=e,i=VM(MS,n),o=zM[i.placedSide];return s.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:s.jsx(BM,{...a,ref:r,style:{...a.style,display:"block"}})})});BS.displayName=MS;function qM(t){return t!==null}var HM=t=>({name:"transformOrigin",options:t,fn(e){const{placement:r,rects:n,middlewareData:a}=e,o=a.arrow?.centerOffset!==0,l=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[u,h]=US(r),m={start:"0%",center:"50%",end:"100%"}[h],x=(a.arrow?.x??0)+l/2,p=(a.arrow?.y??0)+c/2;let y="",w="";return u==="bottom"?(y=o?m:`${x}px`,w=`${-c}px`):u==="top"?(y=o?m:`${x}px`,w=`${n.floating.height+c}px`):u==="right"?(y=`${-c}px`,w=o?m:`${p}px`):u==="left"&&(y=`${n.floating.width+c}px`,w=o?m:`${p}px`),{data:{x:y,y:w}}}});function US(t){const[e,r="center"]=t.split("-");return[e,r]}var R1=OS,q0=LS,L1=FS,F1=BS;function WM(t){const e=GM(t),r=N.forwardRef((n,a)=>{const{children:i,...o}=n,l=N.Children.toArray(i),c=l.find(YM);if(c){const u=c.props.children,h=l.map(m=>m===c?N.Children.count(u)>1?N.Children.only(null):N.isValidElement(u)?u.props.children:null:m);return s.jsx(e,{...o,ref:a,children:N.isValidElement(u)?N.cloneElement(u,void 0,h):null})}return s.jsx(e,{...o,ref:a,children:i})});return r.displayName=`${t}.Slot`,r}function GM(t){const e=N.forwardRef((r,n)=>{const{children:a,...i}=r;if(N.isValidElement(a)){const o=ZM(a),l=XM(i,a.props);return a.type!==N.Fragment&&(l.ref=n?fc(n,o):o),N.cloneElement(a,l)}return N.Children.count(a)>1?N.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var KM=Symbol("radix.slottable");function YM(t){return N.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===KM}function XM(t,e){const r={...e};for(const n in e){const a=t[n],i=e[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...t,...r}}function ZM(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var $S=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),JM="VisuallyHidden",VS=N.forwardRef((t,e)=>s.jsx(Pr.span,{...t,ref:e,style:{...$S,...t.style}}));VS.displayName=JM;var QM=VS,eB=[" ","Enter","ArrowUp","ArrowDown"],tB=[" ","Enter"],yh="Select",[M1,B1,rB]=Ow(yh),[im]=_o(yh,[rB,pu]),U1=pu(),[nB,xu]=im(yh),[sB,aB]=im(yh),zS=t=>{const{__scopeSelect:e,children:r,open:n,defaultOpen:a,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:u,name:h,autoComplete:m,disabled:x,required:p,form:y}=t,w=U1(e),[j,C]=N.useState(null),[S,k]=N.useState(null),[P,O]=N.useState(!1),$=P1(u),[R,B]=dc({prop:n,defaultProp:a??!1,onChange:i,caller:yh}),[U,K]=dc({prop:o,defaultProp:l,onChange:c,caller:yh}),M=N.useRef(null),q=j?y||!!j.closest("form"):!0,[re,ee]=N.useState(new Set),H=Array.from(re).map(se=>se.props.value).join(";");return s.jsx(R1,{...w,children:s.jsxs(nB,{required:p,scope:e,trigger:j,onTriggerChange:C,valueNode:S,onValueNodeChange:k,valueNodeHasChildren:P,onValueNodeHasChildrenChange:O,contentId:Ko(),value:U,onValueChange:K,open:R,onOpenChange:B,dir:$,triggerPointerDownPosRef:M,disabled:x,children:[s.jsx(M1.Provider,{scope:e,children:s.jsx(sB,{scope:t.__scopeSelect,onNativeOptionAdd:N.useCallback(se=>{ee(ue=>new Set(ue).add(se))},[]),onNativeOptionRemove:N.useCallback(se=>{ee(ue=>{const G=new Set(ue);return G.delete(se),G})},[]),children:r})}),q?s.jsxs(uA,{"aria-hidden":!0,required:p,tabIndex:-1,name:h,autoComplete:m,value:U,onChange:se=>K(se.target.value),disabled:x,form:y,children:[U===void 0?s.jsx("option",{value:""}):null,Array.from(re)]},H):null]})})};zS.displayName=yh;var qS="SelectTrigger",HS=N.forwardRef((t,e)=>{const{__scopeSelect:r,disabled:n=!1,...a}=t,i=U1(r),o=xu(qS,r),l=o.disabled||n,c=Wr(e,o.onTriggerChange),u=B1(r),h=N.useRef("touch"),[m,x,p]=fA(w=>{const j=u().filter(k=>!k.disabled),C=j.find(k=>k.value===o.value),S=mA(j,w,C);S!==void 0&&o.onValueChange(S.value)}),y=w=>{l||(o.onOpenChange(!0),p()),w&&(o.triggerPointerDownPosRef.current={x:Math.round(w.pageX),y:Math.round(w.pageY)})};return s.jsx(q0,{asChild:!0,...i,children:s.jsx(Pr.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":hA(o.value)?"":void 0,...a,ref:c,onClick:Pt(a.onClick,w=>{w.currentTarget.focus(),h.current!=="mouse"&&y(w)}),onPointerDown:Pt(a.onPointerDown,w=>{h.current=w.pointerType;const j=w.target;j.hasPointerCapture(w.pointerId)&&j.releasePointerCapture(w.pointerId),w.button===0&&w.ctrlKey===!1&&w.pointerType==="mouse"&&(y(w),w.preventDefault())}),onKeyDown:Pt(a.onKeyDown,w=>{const j=m.current!=="";!(w.ctrlKey||w.altKey||w.metaKey)&&w.key.length===1&&x(w.key),!(j&&w.key===" ")&&eB.includes(w.key)&&(y(),w.preventDefault())})})})});HS.displayName=qS;var WS="SelectValue",GS=N.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:a,children:i,placeholder:o="",...l}=t,c=xu(WS,r),{onValueNodeHasChildrenChange:u}=c,h=i!==void 0,m=Wr(e,c.onValueNodeChange);return wa(()=>{u(h)},[u,h]),s.jsx(Pr.span,{...l,ref:m,style:{pointerEvents:"none"},children:hA(c.value)?s.jsx(s.Fragment,{children:o}):i})});GS.displayName=WS;var iB="SelectIcon",KS=N.forwardRef((t,e)=>{const{__scopeSelect:r,children:n,...a}=t;return s.jsx(Pr.span,{"aria-hidden":!0,...a,ref:e,children:n||""})});KS.displayName=iB;var oB="SelectPortal",YS=t=>s.jsx(nm,{asChild:!0,...t});YS.displayName=oB;var wh="SelectContent",XS=N.forwardRef((t,e)=>{const r=xu(wh,t.__scopeSelect),[n,a]=N.useState();if(wa(()=>{a(new DocumentFragment)},[]),!r.open){const i=n;return i?U0.createPortal(s.jsx(ZS,{scope:t.__scopeSelect,children:s.jsx(M1.Slot,{scope:t.__scopeSelect,children:s.jsx("div",{children:t.children})})}),i):null}return s.jsx(JS,{...t,ref:e})});XS.displayName=wh;var _l=10,[ZS,gu]=im(wh),lB="SelectContentImpl",cB=WM("SelectContent.RemoveScroll"),JS=N.forwardRef((t,e)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:m,collisionBoundary:x,collisionPadding:p,sticky:y,hideWhenDetached:w,avoidCollisions:j,...C}=t,S=xu(wh,r),[k,P]=N.useState(null),[O,$]=N.useState(null),R=Wr(e,T=>P(T)),[B,U]=N.useState(null),[K,M]=N.useState(null),q=B1(r),[re,ee]=N.useState(!1),H=N.useRef(!1);N.useEffect(()=>{if(k)return C1(k)},[k]),j1();const se=N.useCallback(T=>{const[ie,...ge]=q().map(Ue=>Ue.ref.current),[we]=ge.slice(-1),Se=document.activeElement;for(const Ue of T)if(Ue===Se||(Ue?.scrollIntoView({block:"nearest"}),Ue===ie&&O&&(O.scrollTop=0),Ue===we&&O&&(O.scrollTop=O.scrollHeight),Ue?.focus(),document.activeElement!==Se))return},[q,O]),ue=N.useCallback(()=>se([B,k]),[se,B,k]);N.useEffect(()=>{re&&ue()},[re,ue]);const{onOpenChange:G,triggerPointerDownPosRef:J}=S;N.useEffect(()=>{if(k){let T={x:0,y:0};const ie=we=>{T={x:Math.abs(Math.round(we.pageX)-(J.current?.x??0)),y:Math.abs(Math.round(we.pageY)-(J.current?.y??0))}},ge=we=>{T.x<=10&&T.y<=10?we.preventDefault():k.contains(we.target)||G(!1),document.removeEventListener("pointermove",ie),J.current=null};return J.current!==null&&(document.addEventListener("pointermove",ie),document.addEventListener("pointerup",ge,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ie),document.removeEventListener("pointerup",ge,{capture:!0})}}},[k,G,J]),N.useEffect(()=>{const T=()=>G(!1);return window.addEventListener("blur",T),window.addEventListener("resize",T),()=>{window.removeEventListener("blur",T),window.removeEventListener("resize",T)}},[G]);const[oe,Y]=fA(T=>{const ie=q().filter(Se=>!Se.disabled),ge=ie.find(Se=>Se.ref.current===document.activeElement),we=mA(ie,T,ge);we&&setTimeout(()=>we.ref.current.focus())}),L=N.useCallback((T,ie,ge)=>{const we=!H.current&&!ge;(S.value!==void 0&&S.value===ie||we)&&(U(T),we&&(H.current=!0))},[S.value]),z=N.useCallback(()=>k?.focus(),[k]),V=N.useCallback((T,ie,ge)=>{const we=!H.current&&!ge;(S.value!==void 0&&S.value===ie||we)&&M(T)},[S.value]),W=n==="popper"?ty:QS,Q=W===ty?{side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:m,collisionBoundary:x,collisionPadding:p,sticky:y,hideWhenDetached:w,avoidCollisions:j}:{};return s.jsx(ZS,{scope:r,content:k,viewport:O,onViewportChange:$,itemRefCallback:L,selectedItem:B,onItemLeave:z,itemTextRefCallback:V,focusSelectedItem:ue,selectedItemText:K,position:n,isPositioned:re,searchRef:oe,children:s.jsx(V0,{as:cB,allowPinchZoom:!0,children:s.jsx($0,{asChild:!0,trapped:S.open,onMountAutoFocus:T=>{T.preventDefault()},onUnmountAutoFocus:Pt(a,T=>{S.trigger?.focus({preventScroll:!0}),T.preventDefault()}),children:s.jsx(rm,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:T=>T.preventDefault(),onDismiss:()=>S.onOpenChange(!1),children:s.jsx(W,{role:"listbox",id:S.contentId,"data-state":S.open?"open":"closed",dir:S.dir,onContextMenu:T=>T.preventDefault(),...C,...Q,onPlaced:()=>ee(!0),ref:R,style:{display:"flex",flexDirection:"column",outline:"none",...C.style},onKeyDown:Pt(C.onKeyDown,T=>{const ie=T.ctrlKey||T.altKey||T.metaKey;if(T.key==="Tab"&&T.preventDefault(),!ie&&T.key.length===1&&Y(T.key),["ArrowUp","ArrowDown","Home","End"].includes(T.key)){let we=q().filter(Se=>!Se.disabled).map(Se=>Se.ref.current);if(["ArrowUp","End"].includes(T.key)&&(we=we.slice().reverse()),["ArrowUp","ArrowDown"].includes(T.key)){const Se=T.target,Ue=we.indexOf(Se);we=we.slice(Ue+1)}setTimeout(()=>se(we)),T.preventDefault()}})})})})})})});JS.displayName=lB;var dB="SelectItemAlignedPosition",QS=N.forwardRef((t,e)=>{const{__scopeSelect:r,onPlaced:n,...a}=t,i=xu(wh,r),o=gu(wh,r),[l,c]=N.useState(null),[u,h]=N.useState(null),m=Wr(e,R=>h(R)),x=B1(r),p=N.useRef(!1),y=N.useRef(!0),{viewport:w,selectedItem:j,selectedItemText:C,focusSelectedItem:S}=o,k=N.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&w&&j&&C){const R=i.trigger.getBoundingClientRect(),B=u.getBoundingClientRect(),U=i.valueNode.getBoundingClientRect(),K=C.getBoundingClientRect();if(i.dir!=="rtl"){const Se=K.left-B.left,Ue=U.left-Se,We=R.left-Ue,be=R.width+We,pe=Math.max(be,B.width),at=window.innerWidth-_l,tt=xj(Ue,[_l,Math.max(_l,at-pe)]);l.style.minWidth=be+"px",l.style.left=tt+"px"}else{const Se=B.right-K.right,Ue=window.innerWidth-U.right-Se,We=window.innerWidth-R.right-Ue,be=R.width+We,pe=Math.max(be,B.width),at=window.innerWidth-_l,tt=xj(Ue,[_l,Math.max(_l,at-pe)]);l.style.minWidth=be+"px",l.style.right=tt+"px"}const M=x(),q=window.innerHeight-_l*2,re=w.scrollHeight,ee=window.getComputedStyle(u),H=parseInt(ee.borderTopWidth,10),se=parseInt(ee.paddingTop,10),ue=parseInt(ee.borderBottomWidth,10),G=parseInt(ee.paddingBottom,10),J=H+se+re+G+ue,oe=Math.min(j.offsetHeight*5,J),Y=window.getComputedStyle(w),L=parseInt(Y.paddingTop,10),z=parseInt(Y.paddingBottom,10),V=R.top+R.height/2-_l,W=q-V,Q=j.offsetHeight/2,T=j.offsetTop+Q,ie=H+se+T,ge=J-ie;if(ie<=V){const Se=M.length>0&&j===M[M.length-1].ref.current;l.style.bottom="0px";const Ue=u.clientHeight-w.offsetTop-w.offsetHeight,We=Math.max(W,Q+(Se?z:0)+Ue+ue),be=ie+We;l.style.height=be+"px"}else{const Se=M.length>0&&j===M[0].ref.current;l.style.top="0px";const We=Math.max(V,H+w.offsetTop+(Se?L:0)+Q)+ge;l.style.height=We+"px",w.scrollTop=ie-V+w.offsetTop}l.style.margin=`${_l}px 0`,l.style.minHeight=oe+"px",l.style.maxHeight=q+"px",n?.(),requestAnimationFrame(()=>p.current=!0)}},[x,i.trigger,i.valueNode,l,u,w,j,C,i.dir,n]);wa(()=>k(),[k]);const[P,O]=N.useState();wa(()=>{u&&O(window.getComputedStyle(u).zIndex)},[u]);const $=N.useCallback(R=>{R&&y.current===!0&&(k(),S?.(),y.current=!1)},[k,S]);return s.jsx(hB,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:$,children:s.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:P},children:s.jsx(Pr.div,{...a,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});QS.displayName=dB;var uB="SelectPopperPosition",ty=N.forwardRef((t,e)=>{const{__scopeSelect:r,align:n="start",collisionPadding:a=_l,...i}=t,o=U1(r);return s.jsx(L1,{...o,...i,ref:e,align:n,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});ty.displayName=uB;var[hB,zw]=im(wh,{}),ry="SelectViewport",eA=N.forwardRef((t,e)=>{const{__scopeSelect:r,nonce:n,...a}=t,i=gu(ry,r),o=zw(ry,r),l=Wr(e,i.onViewportChange),c=N.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),s.jsx(M1.Slot,{scope:r,children:s.jsx(Pr.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Pt(a.onScroll,u=>{const h=u.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:x}=o;if(x?.current&&m){const p=Math.abs(c.current-h.scrollTop);if(p>0){const y=window.innerHeight-_l*2,w=parseFloat(m.style.minHeight),j=parseFloat(m.style.height),C=Math.max(w,j);if(C<y){const S=C+p,k=Math.min(y,S),P=S-k;m.style.height=k+"px",m.style.bottom==="0px"&&(h.scrollTop=P>0?P:0,m.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});eA.displayName=ry;var tA="SelectGroup",[fB,mB]=im(tA),pB=N.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,a=Ko();return s.jsx(fB,{scope:r,id:a,children:s.jsx(Pr.div,{role:"group","aria-labelledby":a,...n,ref:e})})});pB.displayName=tA;var rA="SelectLabel",xB=N.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,a=mB(rA,r);return s.jsx(Pr.div,{id:a.id,...n,ref:e})});xB.displayName=rA;var r1="SelectItem",[gB,nA]=im(r1),sA=N.forwardRef((t,e)=>{const{__scopeSelect:r,value:n,disabled:a=!1,textValue:i,...o}=t,l=xu(r1,r),c=gu(r1,r),u=l.value===n,[h,m]=N.useState(i??""),[x,p]=N.useState(!1),y=Wr(e,S=>c.itemRefCallback?.(S,n,a)),w=Ko(),j=N.useRef("touch"),C=()=>{a||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(gB,{scope:r,value:n,disabled:a,textId:w,isSelected:u,onItemTextChange:N.useCallback(S=>{m(k=>k||(S?.textContent??"").trim())},[]),children:s.jsx(M1.ItemSlot,{scope:r,value:n,disabled:a,textValue:h,children:s.jsx(Pr.div,{role:"option","aria-labelledby":w,"data-highlighted":x?"":void 0,"aria-selected":u&&x,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:y,onFocus:Pt(o.onFocus,()=>p(!0)),onBlur:Pt(o.onBlur,()=>p(!1)),onClick:Pt(o.onClick,()=>{j.current!=="mouse"&&C()}),onPointerUp:Pt(o.onPointerUp,()=>{j.current==="mouse"&&C()}),onPointerDown:Pt(o.onPointerDown,S=>{j.current=S.pointerType}),onPointerMove:Pt(o.onPointerMove,S=>{j.current=S.pointerType,a?c.onItemLeave?.():j.current==="mouse"&&S.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Pt(o.onPointerLeave,S=>{S.currentTarget===document.activeElement&&c.onItemLeave?.()}),onKeyDown:Pt(o.onKeyDown,S=>{c.searchRef?.current!==""&&S.key===" "||(tB.includes(S.key)&&C(),S.key===" "&&S.preventDefault())})})})})});sA.displayName=r1;var Zm="SelectItemText",aA=N.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:a,...i}=t,o=xu(Zm,r),l=gu(Zm,r),c=nA(Zm,r),u=aB(Zm,r),[h,m]=N.useState(null),x=Wr(e,C=>m(C),c.onItemTextChange,C=>l.itemTextRefCallback?.(C,c.value,c.disabled)),p=h?.textContent,y=N.useMemo(()=>s.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:w,onNativeOptionRemove:j}=u;return wa(()=>(w(y),()=>j(y)),[w,j,y]),s.jsxs(s.Fragment,{children:[s.jsx(Pr.span,{id:c.textId,...i,ref:x}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?U0.createPortal(i.children,o.valueNode):null]})});aA.displayName=Zm;var iA="SelectItemIndicator",oA=N.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return nA(iA,r).isSelected?s.jsx(Pr.span,{"aria-hidden":!0,...n,ref:e}):null});oA.displayName=iA;var ny="SelectScrollUpButton",lA=N.forwardRef((t,e)=>{const r=gu(ny,t.__scopeSelect),n=zw(ny,t.__scopeSelect),[a,i]=N.useState(!1),o=Wr(e,n.onScrollButtonChange);return wa(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx(dA,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});lA.displayName=ny;var sy="SelectScrollDownButton",cA=N.forwardRef((t,e)=>{const r=gu(sy,t.__scopeSelect),n=zw(sy,t.__scopeSelect),[a,i]=N.useState(!1),o=Wr(e,n.onScrollButtonChange);return wa(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<u;i(h)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx(dA,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});cA.displayName=sy;var dA=N.forwardRef((t,e)=>{const{__scopeSelect:r,onAutoScroll:n,...a}=t,i=gu("SelectScrollButton",r),o=N.useRef(null),l=B1(r),c=N.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return N.useEffect(()=>()=>c(),[c]),wa(()=>{l().find(h=>h.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[l]),s.jsx(Pr.div,{"aria-hidden":!0,...a,ref:e,style:{flexShrink:0,...a.style},onPointerDown:Pt(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:Pt(a.onPointerMove,()=>{i.onItemLeave?.(),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:Pt(a.onPointerLeave,()=>{c()})})}),vB="SelectSeparator",yB=N.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return s.jsx(Pr.div,{"aria-hidden":!0,...n,ref:e})});yB.displayName=vB;var ay="SelectArrow",wB=N.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,a=U1(r),i=xu(ay,r),o=gu(ay,r);return i.open&&o.position==="popper"?s.jsx(F1,{...a,...n,ref:e}):null});wB.displayName=ay;var bB="SelectBubbleInput",uA=N.forwardRef(({__scopeSelect:t,value:e,...r},n)=>{const a=N.useRef(null),i=Wr(n,a),o=bw(e);return N.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==e&&h){const m=new Event("change",{bubbles:!0});h.call(l,e),l.dispatchEvent(m)}},[o,e]),s.jsx(Pr.select,{...r,style:{...$S,...r.style},ref:i,defaultValue:e})});uA.displayName=bB;function hA(t){return t===""||t===void 0}function fA(t){const e=Tl(t),r=N.useRef(""),n=N.useRef(0),a=N.useCallback(o=>{const l=r.current+o;e(l),(function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))})(l)},[e]),i=N.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return N.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,a,i]}function mA(t,e,r){const a=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=r?t.indexOf(r):-1;let o=NB(t,Math.max(i,0));a.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function NB(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var jB=zS,_B=HS,CB=GS,SB=KS,AB=YS,EB=XS,kB=eA,PB=sA,TB=aA,IB=oA,DB=lA,OB=cA;function oa({...t}){return s.jsx(jB,{"data-slot":"select",...t})}function la({...t}){return s.jsx(CB,{"data-slot":"select-value",...t})}function ca({className:t,size:e="default",children:r,...n}){return s.jsxs(_B,{"data-slot":"select-trigger","data-size":e,className:xr("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n,children:[r,s.jsx(SB,{asChild:!0,children:s.jsx(qx,{className:"size-4 opacity-50"})})]})}function da({className:t,children:e,position:r="popper",...n}){return s.jsx(AB,{children:s.jsxs(EB,{"data-slot":"select-content",className:xr("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[s.jsx(RB,{}),s.jsx(kB,{className:xr("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:e}),s.jsx(LB,{})]})})}function Bt({className:t,children:e,...r}){return s.jsxs(PB,{"data-slot":"select-item",className:xr("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...r,children:[s.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:s.jsx(IB,{children:s.jsx(kl,{className:"size-4"})})}),s.jsx(TB,{children:e})]})}function RB({className:t,...e}){return s.jsx(DB,{"data-slot":"select-scroll-up-button",className:xr("flex cursor-default items-center justify-center py-1",t),...e,children:s.jsx(D9,{className:"size-4"})})}function LB({className:t,...e}){return s.jsx(OB,{"data-slot":"select-scroll-down-button",className:xr("flex cursor-default items-center justify-center py-1",t),...e,children:s.jsx(qx,{className:"size-4"})})}var FB=Symbol("radix.slottable");function MB(t){const e=({children:r})=>s.jsx(s.Fragment,{children:r});return e.displayName=`${t}.Slottable`,e.__radixId=FB,e}var[$1]=_o("Tooltip",[pu]),V1=pu(),pA="TooltipProvider",BB=700,iy="tooltip.open",[UB,qw]=$1(pA),xA=t=>{const{__scopeTooltip:e,delayDuration:r=BB,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:i}=t,o=N.useRef(!0),l=N.useRef(!1),c=N.useRef(0);return N.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),s.jsx(UB,{scope:e,isOpenDelayedRef:o,delayDuration:r,onOpen:N.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:N.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:N.useCallback(u=>{l.current=u},[]),disableHoverableContent:a,children:i})};xA.displayName=pA;var j0="Tooltip",[$B,H0]=$1(j0),gA=t=>{const{__scopeTooltip:e,children:r,open:n,defaultOpen:a,onOpenChange:i,disableHoverableContent:o,delayDuration:l}=t,c=qw(j0,t.__scopeTooltip),u=V1(e),[h,m]=N.useState(null),x=Ko(),p=N.useRef(0),y=o??c.disableHoverableContent,w=l??c.delayDuration,j=N.useRef(!1),[C,S]=dc({prop:n,defaultProp:a??!1,onChange:R=>{R?(c.onOpen(),document.dispatchEvent(new CustomEvent(iy))):c.onClose(),i?.(R)},caller:j0}),k=N.useMemo(()=>C?j.current?"delayed-open":"instant-open":"closed",[C]),P=N.useCallback(()=>{window.clearTimeout(p.current),p.current=0,j.current=!1,S(!0)},[S]),O=N.useCallback(()=>{window.clearTimeout(p.current),p.current=0,S(!1)},[S]),$=N.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{j.current=!0,S(!0),p.current=0},w)},[w,S]);return N.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),s.jsx(R1,{...u,children:s.jsx($B,{scope:e,contentId:x,open:C,stateAttribute:k,trigger:h,onTriggerChange:m,onTriggerEnter:N.useCallback(()=>{c.isOpenDelayedRef.current?$():P()},[c.isOpenDelayedRef,$,P]),onTriggerLeave:N.useCallback(()=>{y?O():(window.clearTimeout(p.current),p.current=0)},[O,y]),onOpen:P,onClose:O,disableHoverableContent:y,children:r})})};gA.displayName=j0;var oy="TooltipTrigger",vA=N.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,a=H0(oy,r),i=qw(oy,r),o=V1(r),l=N.useRef(null),c=Wr(e,l,a.onTriggerChange),u=N.useRef(!1),h=N.useRef(!1),m=N.useCallback(()=>u.current=!1,[]);return N.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),s.jsx(q0,{asChild:!0,...o,children:s.jsx(Pr.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:c,onPointerMove:Pt(t.onPointerMove,x=>{x.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),h.current=!0)}),onPointerLeave:Pt(t.onPointerLeave,()=>{a.onTriggerLeave(),h.current=!1}),onPointerDown:Pt(t.onPointerDown,()=>{a.open&&a.onClose(),u.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:Pt(t.onFocus,()=>{u.current||a.onOpen()}),onBlur:Pt(t.onBlur,a.onClose),onClick:Pt(t.onClick,a.onClose)})})});vA.displayName=oy;var Hw="TooltipPortal",[VB,zB]=$1(Hw,{forceMount:void 0}),yA=t=>{const{__scopeTooltip:e,forceMount:r,children:n,container:a}=t,i=H0(Hw,e);return s.jsx(VB,{scope:e,forceMount:r,children:s.jsx(Qi,{present:r||i.open,children:s.jsx(nm,{asChild:!0,container:a,children:n})})})};yA.displayName=Hw;var Hf="TooltipContent",wA=N.forwardRef((t,e)=>{const r=zB(Hf,t.__scopeTooltip),{forceMount:n=r.forceMount,side:a="top",...i}=t,o=H0(Hf,t.__scopeTooltip);return s.jsx(Qi,{present:n||o.open,children:o.disableHoverableContent?s.jsx(bA,{side:a,...i,ref:e}):s.jsx(qB,{side:a,...i,ref:e})})}),qB=N.forwardRef((t,e)=>{const r=H0(Hf,t.__scopeTooltip),n=qw(Hf,t.__scopeTooltip),a=N.useRef(null),i=Wr(e,a),[o,l]=N.useState(null),{trigger:c,onClose:u}=r,h=a.current,{onPointerInTransitChange:m}=n,x=N.useCallback(()=>{l(null),m(!1)},[m]),p=N.useCallback((y,w)=>{const j=y.currentTarget,C={x:y.clientX,y:y.clientY},S=KB(C,j.getBoundingClientRect()),k=YB(C,S),P=XB(w.getBoundingClientRect()),O=JB([...k,...P]);l(O),m(!0)},[m]);return N.useEffect(()=>()=>x(),[x]),N.useEffect(()=>{if(c&&h){const y=j=>p(j,h),w=j=>p(j,c);return c.addEventListener("pointerleave",y),h.addEventListener("pointerleave",w),()=>{c.removeEventListener("pointerleave",y),h.removeEventListener("pointerleave",w)}}},[c,h,p,x]),N.useEffect(()=>{if(o){const y=w=>{const j=w.target,C={x:w.clientX,y:w.clientY},S=c?.contains(j)||h?.contains(j),k=!ZB(C,o);S?x():k&&(x(),u())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[c,h,o,u,x]),s.jsx(bA,{...t,ref:i})}),[HB,WB]=$1(j0,{isInside:!1}),GB=MB("TooltipContent"),bA=N.forwardRef((t,e)=>{const{__scopeTooltip:r,children:n,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=t,c=H0(Hf,r),u=V1(r),{onClose:h}=c;return N.useEffect(()=>(document.addEventListener(iy,h),()=>document.removeEventListener(iy,h)),[h]),N.useEffect(()=>{if(c.trigger){const m=x=>{x.target?.contains(c.trigger)&&h()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[c.trigger,h]),s.jsx(rm,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:m=>m.preventDefault(),onDismiss:h,children:s.jsxs(L1,{"data-state":c.stateAttribute,...u,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(GB,{children:n}),s.jsx(HB,{scope:r,isInside:!0,children:s.jsx(QM,{id:c.contentId,role:"tooltip",children:a||n})})]})})});wA.displayName=Hf;var NA="TooltipArrow",jA=N.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,a=V1(r);return WB(NA,r).isInside?null:s.jsx(F1,{...a,...n,ref:e})});jA.displayName=NA;function KB(t,e){const r=Math.abs(e.top-t.y),n=Math.abs(e.bottom-t.y),a=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(r,n,a,i)){case i:return"left";case a:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function YB(t,e,r=5){const n=[];switch(e){case"top":n.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":n.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":n.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":n.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return n}function XB(t){const{top:e,right:r,bottom:n,left:a}=t;return[{x:a,y:e},{x:r,y:e},{x:r,y:n},{x:a,y:n}]}function ZB(t,e){const{x:r,y:n}=t;let a=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const l=e[i],c=e[o],u=l.x,h=l.y,m=c.x,x=c.y;h>n!=x>n&&r<(m-u)*(n-h)/(x-h)+u&&(a=!a)}return a}function JB(t){const e=t.slice();return e.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),QB(e)}function QB(t){if(t.length<=1)return t.slice();const e=[];for(let n=0;n<t.length;n++){const a=t[n];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))e.pop();else break}e.push(a)}e.pop();const r=[];for(let n=t.length-1;n>=0;n--){const a=t[n];for(;r.length>=2;){const i=r[r.length-1],o=r[r.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))r.pop();else break}r.push(a)}return r.pop(),e.length===1&&r.length===1&&e[0].x===r[0].x&&e[0].y===r[0].y?e:e.concat(r)}var eU=xA,tU=gA,rU=vA,nU=yA,sU=wA,aU=jA;function hn({delayDuration:t=0,...e}){return s.jsx(eU,{"data-slot":"tooltip-provider",delayDuration:t,...e})}function fn({...t}){return s.jsx(hn,{children:s.jsx(tU,{"data-slot":"tooltip",...t})})}function mn({...t}){return s.jsx(rU,{"data-slot":"tooltip-trigger",...t})}function pn({className:t,sideOffset:e=0,children:r,...n}){return s.jsx(nU,{children:s.jsxs(sU,{"data-slot":"tooltip-content",sideOffset:e,className:xr("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t),...n,children:[r,s.jsx(aU,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}function iU(t,e=[]){let r=[];function n(i,o){const l=N.createContext(o);l.displayName=i+"Context";const c=r.length;r=[...r,o];const u=m=>{const{scope:x,children:p,...y}=m,w=x?.[t]?.[c]||l,j=N.useMemo(()=>y,Object.values(y));return s.jsx(w.Provider,{value:j,children:p})};u.displayName=i+"Provider";function h(m,x){const p=x?.[t]?.[c]||l,y=N.useContext(p);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${m}\` must be used within \`${i}\``)}return[u,h]}const a=()=>{const i=r.map(o=>N.createContext(o));return function(l){const c=l?.[t]||i;return N.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return a.scopeName=t,[n,oU(a,...e)]}function oU(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const m=c(i)[`__scope${u}`];return{...l,...m}},{});return N.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}var lU=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],_A=lU.reduce((t,e)=>{const r=B0(`Primitive.${e}`),n=N.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{}),Ww="Progress",Gw=100,[cU]=iU(Ww),[dU,uU]=cU(Ww),CA=N.forwardRef((t,e)=>{const{__scopeProgress:r,value:n=null,max:a,getValueLabel:i=hU,...o}=t;(a||a===0)&&!kj(a)&&console.error(fU(`${a}`,"Progress"));const l=kj(a)?a:Gw;n!==null&&!Pj(n,l)&&console.error(mU(`${n}`,"Progress"));const c=Pj(n,l)?n:null,u=n1(c)?i(c,l):void 0;return s.jsx(dU,{scope:r,value:c,max:l,children:s.jsx(_A.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":n1(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":EA(c,l),"data-value":c??void 0,"data-max":l,...o,ref:e})})});CA.displayName=Ww;var SA="ProgressIndicator",AA=N.forwardRef((t,e)=>{const{__scopeProgress:r,...n}=t,a=uU(SA,r);return s.jsx(_A.div,{"data-state":EA(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...n,ref:e})});AA.displayName=SA;function hU(t,e){return`${Math.round(t/e*100)}%`}function EA(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function n1(t){return typeof t=="number"}function kj(t){return n1(t)&&!isNaN(t)&&t>0}function Pj(t,e){return n1(t)&&!isNaN(t)&&t<=e&&t>=0}function fU(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Gw}\`.`}function mU(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Gw} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var pU=CA,xU=AA;function kA({className:t,value:e,...r}){return s.jsx(pU,{"data-slot":"progress",className:xr("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",t),...r,children:s.jsx(xU,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})})}function ar({...t}){return s.jsx(Pw,{"data-slot":"dialog",...t})}function gU({...t}){return s.jsx(Tw,{"data-slot":"dialog-portal",...t})}const PA=N.forwardRef(({className:t,...e},r)=>s.jsx(A1,{ref:r,"data-slot":"dialog-overlay",className:xr("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...e}));PA.displayName=A1.displayName;const sr=N.forwardRef(({className:t,children:e,...r},n)=>s.jsxs(gU,{"data-slot":"dialog-portal",children:[s.jsx(PA,{}),s.jsxs(E1,{ref:n,"data-slot":"dialog-content",className:xr("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...r,children:[e,s.jsxs(k1,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[s.jsx(ps,{}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));sr.displayName=E1.displayName;function ir({className:t,...e}){return s.jsx("div",{"data-slot":"dialog-header",className:xr("flex flex-col gap-2 text-center sm:text-left",t),...e})}function _r({className:t,...e}){return s.jsx("div",{"data-slot":"dialog-footer",className:xr("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...e})}function or({className:t,...e}){return s.jsx(Iw,{"data-slot":"dialog-title",className:xr("text-lg leading-none font-semibold",t),...e})}function lr({className:t,...e}){return s.jsx(Dw,{"data-slot":"dialog-description",className:xr("text-muted-foreground text-sm",t),...e})}var vU=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],yU=vU.reduce((t,e)=>{const r=B0(`Primitive.${e}`),n=N.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{}),wU="Separator",Tj="horizontal",bU=["horizontal","vertical"],TA=N.forwardRef((t,e)=>{const{decorative:r,orientation:n=Tj,...a}=t,i=NU(n)?n:Tj,l=r?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return s.jsx(yU.div,{"data-orientation":i,...l,...a,ref:e})});TA.displayName=wU;function NU(t){return bU.includes(t)}var jU=TA;function qr({className:t,orientation:e="horizontal",decorative:r=!0,...n}){return s.jsx(jU,{"data-slot":"separator-root",decorative:r,orientation:e,className:xr("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...n})}async function IA(t){const{data:e,error:r}=await Qe.from("patients").select(`
      id,
      first_name,
      last_name,
      date_of_birth,
      charts:charts (
        id,
        status,
        source,
        created_at,
        created_by,
        finalized_at,
        medications (id)
      )
    `).eq("assigned_clinician_id",t);if(r)throw r;return e}function _U(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}const CU=t=>{switch(t){case"success":return EU;case"info":return PU;case"warning":return kU;case"error":return TU;default:return null}},SU=Array(12).fill(0),AU=({visible:t,className:e})=>pt.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},pt.createElement("div",{className:"sonner-spinner"},SU.map((r,n)=>pt.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),EU=pt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},pt.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),kU=pt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},pt.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),PU=pt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},pt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),TU=pt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},pt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),IU=pt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},pt.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),pt.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),DU=()=>{const[t,e]=pt.useState(document.hidden);return pt.useEffect(()=>{const r=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),t};let ly=1;class OU{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const r=this.subscribers.indexOf(e);this.subscribers.splice(r,1)}),this.publish=e=>{this.subscribers.forEach(r=>r(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var r;const{message:n,...a}=e,i=typeof e?.id=="number"||((r=e.id)==null?void 0:r.length)>0?e.id:ly++,o=this.toasts.find(c=>c.id===i),l=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(c=>c.id===i?(this.publish({...c,...e,id:i,title:n}),{...c,...e,id:i,dismissible:l,title:n}):c):this.addToast({title:n,...a,dismissible:l,id:i}),i},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(r=>r({id:e,dismiss:!0})))):this.toasts.forEach(r=>{this.subscribers.forEach(n=>n({id:r.id,dismiss:!0}))}),e),this.message=(e,r)=>this.create({...r,message:e}),this.error=(e,r)=>this.create({...r,message:e,type:"error"}),this.success=(e,r)=>this.create({...r,type:"success",message:e}),this.info=(e,r)=>this.create({...r,type:"info",message:e}),this.warning=(e,r)=>this.create({...r,type:"warning",message:e}),this.loading=(e,r)=>this.create({...r,type:"loading",message:e}),this.promise=(e,r)=>{if(!r)return;let n;r.loading!==void 0&&(n=this.create({...r,promise:e,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));const a=Promise.resolve(e instanceof Function?e():e);let i=n!==void 0,o;const l=a.then(async u=>{if(o=["resolve",u],pt.isValidElement(u))i=!1,this.create({id:n,type:"default",message:u});else if(LU(u)&&!u.ok){i=!1;const m=typeof r.error=="function"?await r.error(`HTTP error! status: ${u.status}`):r.error,x=typeof r.description=="function"?await r.description(`HTTP error! status: ${u.status}`):r.description,y=typeof m=="object"&&!pt.isValidElement(m)?m:{message:m};this.create({id:n,type:"error",description:x,...y})}else if(u instanceof Error){i=!1;const m=typeof r.error=="function"?await r.error(u):r.error,x=typeof r.description=="function"?await r.description(u):r.description,y=typeof m=="object"&&!pt.isValidElement(m)?m:{message:m};this.create({id:n,type:"error",description:x,...y})}else if(r.success!==void 0){i=!1;const m=typeof r.success=="function"?await r.success(u):r.success,x=typeof r.description=="function"?await r.description(u):r.description,y=typeof m=="object"&&!pt.isValidElement(m)?m:{message:m};this.create({id:n,type:"success",description:x,...y})}}).catch(async u=>{if(o=["reject",u],r.error!==void 0){i=!1;const h=typeof r.error=="function"?await r.error(u):r.error,m=typeof r.description=="function"?await r.description(u):r.description,p=typeof h=="object"&&!pt.isValidElement(h)?h:{message:h};this.create({id:n,type:"error",description:m,...p})}}).finally(()=>{i&&(this.dismiss(n),n=void 0),r.finally==null||r.finally.call(r)}),c=()=>new Promise((u,h)=>l.then(()=>o[0]==="reject"?h(o[1]):u(o[1])).catch(h));return typeof n!="string"&&typeof n!="number"?{unwrap:c}:Object.assign(n,{unwrap:c})},this.custom=(e,r)=>{const n=r?.id||ly++;return this.create({jsx:e(n),id:n,...r}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Hi=new OU,RU=(t,e)=>{const r=e?.id||ly++;return Hi.addToast({title:t,...e,id:r}),r},LU=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",FU=RU,MU=()=>Hi.toasts,BU=()=>Hi.getActiveToasts(),Pe=Object.assign(FU,{success:Hi.success,info:Hi.info,warning:Hi.warning,error:Hi.error,custom:Hi.custom,message:Hi.message,promise:Hi.promise,dismiss:Hi.dismiss,loading:Hi.loading},{getHistory:MU,getToasts:BU});_U("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function ex(t){return t.label!==void 0}const UU=3,$U="24px",VU="16px",Ij=4e3,zU=356,qU=14,HU=45,WU=200;function Jl(...t){return t.filter(Boolean).join(" ")}function GU(t){const[e,r]=t.split("-"),n=[];return e&&n.push(e),r&&n.push(r),n}const KU=t=>{var e,r,n,a,i,o,l,c,u;const{invert:h,toast:m,unstyled:x,interacting:p,setHeights:y,visibleToasts:w,heights:j,index:C,toasts:S,expanded:k,removeToast:P,defaultRichColors:O,closeButton:$,style:R,cancelButtonStyle:B,actionButtonStyle:U,className:K="",descriptionClassName:M="",duration:q,position:re,gap:ee,expandByDefault:H,classNames:se,icons:ue,closeButtonAriaLabel:G="Close toast"}=t,[J,oe]=pt.useState(null),[Y,L]=pt.useState(null),[z,V]=pt.useState(!1),[W,Q]=pt.useState(!1),[T,ie]=pt.useState(!1),[ge,we]=pt.useState(!1),[Se,Ue]=pt.useState(!1),[We,be]=pt.useState(0),[pe,at]=pt.useState(0),tt=pt.useRef(m.duration||q||Ij),Be=pt.useRef(null),ye=pt.useRef(null),st=C===0,Ve=C+1<=w,vt=m.type,ct=m.dismissible!==!1,Kt=m.className||"",ot=m.descriptionClassName||"",Ct=pt.useMemo(()=>j.findIndex(yt=>yt.toastId===m.id)||0,[j,m.id]),qt=pt.useMemo(()=>{var yt;return(yt=m.closeButton)!=null?yt:$},[m.closeButton,$]),Tt=pt.useMemo(()=>m.duration||q||Ij,[m.duration,q]),Et=pt.useRef(0),kt=pt.useRef(0),St=pt.useRef(0),gr=pt.useRef(null),[Rr,xt]=re.split("-"),Ht=pt.useMemo(()=>j.reduce((yt,Lr,Sr)=>Sr>=Ct?yt:yt+Lr.height,0),[j,Ct]),Me=DU(),bt=m.invert||h,Wt=vt==="loading";kt.current=pt.useMemo(()=>Ct*ee+Ht,[Ct,Ht]),pt.useEffect(()=>{tt.current=Tt},[Tt]),pt.useEffect(()=>{V(!0)},[]),pt.useEffect(()=>{const yt=ye.current;if(yt){const Lr=yt.getBoundingClientRect().height;return at(Lr),y(Sr=>[{toastId:m.id,height:Lr,position:m.position},...Sr]),()=>y(Sr=>Sr.filter(Kr=>Kr.toastId!==m.id))}},[y,m.id]),pt.useLayoutEffect(()=>{if(!z)return;const yt=ye.current,Lr=yt.style.height;yt.style.height="auto";const Sr=yt.getBoundingClientRect().height;yt.style.height=Lr,at(Sr),y(Kr=>Kr.find(jt=>jt.toastId===m.id)?Kr.map(jt=>jt.toastId===m.id?{...jt,height:Sr}:jt):[{toastId:m.id,height:Sr,position:m.position},...Kr])},[z,m.title,m.description,y,m.id,m.jsx,m.action,m.cancel]);const It=pt.useCallback(()=>{Q(!0),be(kt.current),y(yt=>yt.filter(Lr=>Lr.toastId!==m.id)),setTimeout(()=>{P(m)},WU)},[m,P,y,kt]);pt.useEffect(()=>{if(m.promise&&vt==="loading"||m.duration===1/0||m.type==="loading")return;let yt;return k||p||Me?(()=>{if(St.current<Et.current){const Kr=new Date().getTime()-Et.current;tt.current=tt.current-Kr}St.current=new Date().getTime()})():(()=>{tt.current!==1/0&&(Et.current=new Date().getTime(),yt=setTimeout(()=>{m.onAutoClose==null||m.onAutoClose.call(m,m),It()},tt.current))})(),()=>clearTimeout(yt)},[k,p,m,vt,Me,It]),pt.useEffect(()=>{m.delete&&(It(),m.onDismiss==null||m.onDismiss.call(m,m))},[It,m.delete]);function Cr(){var yt;if(ue?.loading){var Lr;return pt.createElement("div",{className:Jl(se?.loader,m==null||(Lr=m.classNames)==null?void 0:Lr.loader,"sonner-loader"),"data-visible":vt==="loading"},ue.loading)}return pt.createElement(AU,{className:Jl(se?.loader,m==null||(yt=m.classNames)==null?void 0:yt.loader),visible:vt==="loading"})}const Gr=m.icon||ue?.[vt]||CU(vt);var vr,At;return pt.createElement("li",{tabIndex:0,ref:ye,className:Jl(K,Kt,se?.toast,m==null||(e=m.classNames)==null?void 0:e.toast,se?.default,se?.[vt],m==null||(r=m.classNames)==null?void 0:r[vt]),"data-sonner-toast":"","data-rich-colors":(vr=m.richColors)!=null?vr:O,"data-styled":!(m.jsx||m.unstyled||x),"data-mounted":z,"data-promise":!!m.promise,"data-swiped":Se,"data-removed":W,"data-visible":Ve,"data-y-position":Rr,"data-x-position":xt,"data-index":C,"data-front":st,"data-swiping":T,"data-dismissible":ct,"data-type":vt,"data-invert":bt,"data-swipe-out":ge,"data-swipe-direction":Y,"data-expanded":!!(k||H&&z),"data-testid":m.testId,style:{"--index":C,"--toasts-before":C,"--z-index":S.length-C,"--offset":`${W?We:kt.current}px`,"--initial-height":H?"auto":`${pe}px`,...R,...m.style},onDragEnd:()=>{ie(!1),oe(null),gr.current=null},onPointerDown:yt=>{yt.button!==2&&(Wt||!ct||(Be.current=new Date,be(kt.current),yt.target.setPointerCapture(yt.pointerId),yt.target.tagName!=="BUTTON"&&(ie(!0),gr.current={x:yt.clientX,y:yt.clientY})))},onPointerUp:()=>{var yt,Lr,Sr;if(ge||!ct)return;gr.current=null;const Kr=Number(((yt=ye.current)==null?void 0:yt.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Mr=Number(((Lr=ye.current)==null?void 0:Lr.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),jt=new Date().getTime()-((Sr=Be.current)==null?void 0:Sr.getTime()),Tr=J==="x"?Kr:Mr,Vn=Math.abs(Tr)/jt;if(Math.abs(Tr)>=HU||Vn>.11){be(kt.current),m.onDismiss==null||m.onDismiss.call(m,m),L(J==="x"?Kr>0?"right":"left":Mr>0?"down":"up"),It(),we(!0);return}else{var Fr,Yr;(Fr=ye.current)==null||Fr.style.setProperty("--swipe-amount-x","0px"),(Yr=ye.current)==null||Yr.style.setProperty("--swipe-amount-y","0px")}Ue(!1),ie(!1),oe(null)},onPointerMove:yt=>{var Lr,Sr,Kr;if(!gr.current||!ct||((Lr=window.getSelection())==null?void 0:Lr.toString().length)>0)return;const jt=yt.clientY-gr.current.y,Tr=yt.clientX-gr.current.x;var Vn;const Fr=(Vn=t.swipeDirections)!=null?Vn:GU(re);!J&&(Math.abs(Tr)>1||Math.abs(jt)>1)&&oe(Math.abs(Tr)>Math.abs(jt)?"x":"y");let Yr={x:0,y:0};const $r=yr=>1/(1.5+Math.abs(yr)/20);if(J==="y"){if(Fr.includes("top")||Fr.includes("bottom"))if(Fr.includes("top")&&jt<0||Fr.includes("bottom")&&jt>0)Yr.y=jt;else{const yr=jt*$r(jt);Yr.y=Math.abs(yr)<Math.abs(jt)?yr:jt}}else if(J==="x"&&(Fr.includes("left")||Fr.includes("right")))if(Fr.includes("left")&&Tr<0||Fr.includes("right")&&Tr>0)Yr.x=Tr;else{const yr=Tr*$r(Tr);Yr.x=Math.abs(yr)<Math.abs(Tr)?yr:Tr}(Math.abs(Yr.x)>0||Math.abs(Yr.y)>0)&&Ue(!0),(Sr=ye.current)==null||Sr.style.setProperty("--swipe-amount-x",`${Yr.x}px`),(Kr=ye.current)==null||Kr.style.setProperty("--swipe-amount-y",`${Yr.y}px`)}},qt&&!m.jsx&&vt!=="loading"?pt.createElement("button",{"aria-label":G,"data-disabled":Wt,"data-close-button":!0,onClick:Wt||!ct?()=>{}:()=>{It(),m.onDismiss==null||m.onDismiss.call(m,m)},className:Jl(se?.closeButton,m==null||(n=m.classNames)==null?void 0:n.closeButton)},(At=ue?.close)!=null?At:IU):null,(vt||m.icon||m.promise)&&m.icon!==null&&(ue?.[vt]!==null||m.icon)?pt.createElement("div",{"data-icon":"",className:Jl(se?.icon,m==null||(a=m.classNames)==null?void 0:a.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||Cr():null,m.type!=="loading"?Gr:null):null,pt.createElement("div",{"data-content":"",className:Jl(se?.content,m==null||(i=m.classNames)==null?void 0:i.content)},pt.createElement("div",{"data-title":"",className:Jl(se?.title,m==null||(o=m.classNames)==null?void 0:o.title)},m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title),m.description?pt.createElement("div",{"data-description":"",className:Jl(M,ot,se?.description,m==null||(l=m.classNames)==null?void 0:l.description)},typeof m.description=="function"?m.description():m.description):null),pt.isValidElement(m.cancel)?m.cancel:m.cancel&&ex(m.cancel)?pt.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||B,onClick:yt=>{ex(m.cancel)&&ct&&(m.cancel.onClick==null||m.cancel.onClick.call(m.cancel,yt),It())},className:Jl(se?.cancelButton,m==null||(c=m.classNames)==null?void 0:c.cancelButton)},m.cancel.label):null,pt.isValidElement(m.action)?m.action:m.action&&ex(m.action)?pt.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||U,onClick:yt=>{ex(m.action)&&(m.action.onClick==null||m.action.onClick.call(m.action,yt),!yt.defaultPrevented&&It())},className:Jl(se?.actionButton,m==null||(u=m.classNames)==null?void 0:u.actionButton)},m.action.label):null)};function Dj(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function YU(t,e){const r={};return[t,e].forEach((n,a)=>{const i=a===1,o=i?"--mobile-offset":"--offset",l=i?VU:$U;function c(u){["top","right","bottom","left"].forEach(h=>{r[`${o}-${h}`]=typeof u=="number"?`${u}px`:u})}typeof n=="number"||typeof n=="string"?c(n):typeof n=="object"?["top","right","bottom","left"].forEach(u=>{n[u]===void 0?r[`${o}-${u}`]=l:r[`${o}-${u}`]=typeof n[u]=="number"?`${n[u]}px`:n[u]}):c(l)}),r}const XU=pt.forwardRef(function(e,r){const{id:n,invert:a,position:i="bottom-right",hotkey:o=["altKey","KeyT"],expand:l,closeButton:c,className:u,offset:h,mobileOffset:m,theme:x="light",richColors:p,duration:y,style:w,visibleToasts:j=UU,toastOptions:C,dir:S=Dj(),gap:k=qU,icons:P,containerAriaLabel:O="Notifications"}=e,[$,R]=pt.useState([]),B=pt.useMemo(()=>n?$.filter(z=>z.toasterId===n):$.filter(z=>!z.toasterId),[$,n]),U=pt.useMemo(()=>Array.from(new Set([i].concat(B.filter(z=>z.position).map(z=>z.position)))),[B,i]),[K,M]=pt.useState([]),[q,re]=pt.useState(!1),[ee,H]=pt.useState(!1),[se,ue]=pt.useState(x!=="system"?x:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),G=pt.useRef(null),J=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),oe=pt.useRef(null),Y=pt.useRef(!1),L=pt.useCallback(z=>{R(V=>{var W;return(W=V.find(Q=>Q.id===z.id))!=null&&W.delete||Hi.dismiss(z.id),V.filter(({id:Q})=>Q!==z.id)})},[]);return pt.useEffect(()=>Hi.subscribe(z=>{if(z.dismiss){requestAnimationFrame(()=>{R(V=>V.map(W=>W.id===z.id?{...W,delete:!0}:W))});return}setTimeout(()=>{A6.flushSync(()=>{R(V=>{const W=V.findIndex(Q=>Q.id===z.id);return W!==-1?[...V.slice(0,W),{...V[W],...z},...V.slice(W+1)]:[z,...V]})})})}),[$]),pt.useEffect(()=>{if(x!=="system"){ue(x);return}if(x==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ue("dark"):ue("light")),typeof window>"u")return;const z=window.matchMedia("(prefers-color-scheme: dark)");try{z.addEventListener("change",({matches:V})=>{ue(V?"dark":"light")})}catch{z.addListener(({matches:W})=>{try{ue(W?"dark":"light")}catch(Q){console.error(Q)}})}},[x]),pt.useEffect(()=>{$.length<=1&&re(!1)},[$]),pt.useEffect(()=>{const z=V=>{var W;if(o.every(ie=>V[ie]||V.code===ie)){var T;re(!0),(T=G.current)==null||T.focus()}V.code==="Escape"&&(document.activeElement===G.current||(W=G.current)!=null&&W.contains(document.activeElement))&&re(!1)};return document.addEventListener("keydown",z),()=>document.removeEventListener("keydown",z)},[o]),pt.useEffect(()=>{if(G.current)return()=>{oe.current&&(oe.current.focus({preventScroll:!0}),oe.current=null,Y.current=!1)}},[G.current]),pt.createElement("section",{ref:r,"aria-label":`${O} ${J}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},U.map((z,V)=>{var W;const[Q,T]=z.split("-");return B.length?pt.createElement("ol",{key:z,dir:S==="auto"?Dj():S,tabIndex:-1,ref:G,className:u,"data-sonner-toaster":!0,"data-sonner-theme":se,"data-y-position":Q,"data-x-position":T,style:{"--front-toast-height":`${((W=K[0])==null?void 0:W.height)||0}px`,"--width":`${zU}px`,"--gap":`${k}px`,...w,...YU(h,m)},onBlur:ie=>{Y.current&&!ie.currentTarget.contains(ie.relatedTarget)&&(Y.current=!1,oe.current&&(oe.current.focus({preventScroll:!0}),oe.current=null))},onFocus:ie=>{ie.target instanceof HTMLElement&&ie.target.dataset.dismissible==="false"||Y.current||(Y.current=!0,oe.current=ie.relatedTarget)},onMouseEnter:()=>re(!0),onMouseMove:()=>re(!0),onMouseLeave:()=>{ee||re(!1)},onDragEnd:()=>re(!1),onPointerDown:ie=>{ie.target instanceof HTMLElement&&ie.target.dataset.dismissible==="false"||H(!0)},onPointerUp:()=>H(!1)},B.filter(ie=>!ie.position&&V===0||ie.position===z).map((ie,ge)=>{var we,Se;return pt.createElement(KU,{key:ie.id,icons:P,index:ge,toast:ie,defaultRichColors:p,duration:(we=C?.duration)!=null?we:y,className:C?.className,descriptionClassName:C?.descriptionClassName,invert:a,visibleToasts:j,closeButton:(Se=C?.closeButton)!=null?Se:c,interacting:ee,position:z,style:C?.style,unstyled:C?.unstyled,classNames:C?.classNames,cancelButtonStyle:C?.cancelButtonStyle,actionButtonStyle:C?.actionButtonStyle,closeButtonAriaLabel:C?.closeButtonAriaLabel,removeToast:L,toasts:B.filter(Ue=>Ue.position==ie.position),heights:K.filter(Ue=>Ue.position==ie.position),setHeights:M,expandByDefault:l,gap:k,expanded:q,swipeDirections:e.swipeDirections})})):null}))});var ZU=(t,e,r,n,a,i,o,l)=>{let c=document.documentElement,u=["light","dark"];function h(p){(Array.isArray(t)?t:[t]).forEach(y=>{let w=y==="class",j=w&&i?a.map(C=>i[C]||C):a;w?(c.classList.remove(...j),c.classList.add(i&&i[p]?i[p]:p)):c.setAttribute(y,p)}),m(p)}function m(p){l&&u.includes(p)&&(c.style.colorScheme=p)}function x(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(n)h(n);else try{let p=localStorage.getItem(e)||r,y=o&&p==="system"?x():p;h(y)}catch{}},JU=N.createContext(void 0),QU={setTheme:t=>{},themes:[]},e$=()=>{var t;return(t=N.useContext(JU))!=null?t:QU};N.memo(({forcedTheme:t,storageKey:e,attribute:r,enableSystem:n,enableColorScheme:a,defaultTheme:i,value:o,themes:l,nonce:c,scriptProps:u})=>{let h=JSON.stringify([r,e,i,t,l,o,n,a]).slice(1,-1);return N.createElement("script",{...u,suppressHydrationWarning:!0,nonce:typeof window>"u"?c:"",dangerouslySetInnerHTML:{__html:`(${ZU.toString()})(${h})`}})});const om=({...t})=>{const{theme:e="system"}=e$();return s.jsx(XU,{theme:e,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...t})},Kw=N.createContext({});function Yw(t){const e=N.useRef(null);return e.current===null&&(e.current=t()),e.current}const Xw=typeof window<"u",DA=Xw?N.useLayoutEffect:N.useEffect,z1=N.createContext(null);function Zw(t,e){t.indexOf(e)===-1&&t.push(e)}function Jw(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}const ad=(t,e,r)=>r>e?e:r<t?t:r;let Qw=()=>{};const id={},OA=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function RA(t){return typeof t=="object"&&t!==null}const LA=t=>/^0[^.\s]+$/u.test(t);function eb(t){let e;return()=>(e===void 0&&(e=t()),e)}const Yo=t=>t,t$=(t,e)=>r=>e(t(r)),W0=(...t)=>t.reduce(t$),_0=(t,e,r)=>{const n=e-t;return n===0?1:(r-t)/n};class tb{constructor(){this.subscriptions=[]}add(e){return Zw(this.subscriptions,e),()=>Jw(this.subscriptions,e)}notify(e,r,n){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](e,r,n);else for(let i=0;i<a;i++){const o=this.subscriptions[i];o&&o(e,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ac=t=>t*1e3,Ho=t=>t/1e3;function FA(t,e){return e?t*(1e3/e):0}const MA=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,r$=1e-7,n$=12;function s$(t,e,r,n,a){let i,o,l=0;do o=e+(r-e)/2,i=MA(o,n,a)-t,i>0?r=o:e=o;while(Math.abs(i)>r$&&++l<n$);return o}function G0(t,e,r,n){if(t===e&&r===n)return Yo;const a=i=>s$(i,0,1,t,r);return i=>i===0||i===1?i:MA(a(i),e,n)}const BA=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,UA=t=>e=>1-t(1-e),$A=G0(.33,1.53,.69,.99),rb=UA($A),VA=BA(rb),zA=t=>(t*=2)<1?.5*rb(t):.5*(2-Math.pow(2,-10*(t-1))),nb=t=>1-Math.sin(Math.acos(t)),qA=UA(nb),HA=BA(nb),a$=G0(.42,0,1,1),i$=G0(0,0,.58,1),WA=G0(.42,0,.58,1),o$=t=>Array.isArray(t)&&typeof t[0]!="number",GA=t=>Array.isArray(t)&&typeof t[0]=="number",l$={linear:Yo,easeIn:a$,easeInOut:WA,easeOut:i$,circIn:nb,circInOut:HA,circOut:qA,backIn:rb,backInOut:VA,backOut:$A,anticipate:zA},c$=t=>typeof t=="string",Oj=t=>{if(GA(t)){Qw(t.length===4);const[e,r,n,a]=t;return G0(e,r,n,a)}else if(c$(t))return l$[t];return t},tx=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function d$(t,e){let r=new Set,n=new Set,a=!1,i=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(h){o.has(h)&&(u.schedule(h),t()),h(l)}const u={schedule:(h,m=!1,x=!1)=>{const y=x&&a?r:n;return m&&o.add(h),y.has(h)||y.add(h),h},cancel:h=>{n.delete(h),o.delete(h)},process:h=>{if(l=h,a){i=!0;return}a=!0,[r,n]=[n,r],r.forEach(c),r.clear(),a=!1,i&&(i=!1,u.process(h))}};return u}const u$=40;function KA(t,e){let r=!1,n=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=()=>r=!0,o=tx.reduce((k,P)=>(k[P]=d$(i),k),{}),{setup:l,read:c,resolveKeyframes:u,preUpdate:h,update:m,preRender:x,render:p,postRender:y}=o,w=()=>{const k=id.useManualTiming?a.timestamp:performance.now();r=!1,id.useManualTiming||(a.delta=n?1e3/60:Math.max(Math.min(k-a.timestamp,u$),1)),a.timestamp=k,a.isProcessing=!0,l.process(a),c.process(a),u.process(a),h.process(a),m.process(a),x.process(a),p.process(a),y.process(a),a.isProcessing=!1,r&&e&&(n=!1,t(w))},j=()=>{r=!0,n=!0,a.isProcessing||t(w)};return{schedule:tx.reduce((k,P)=>{const O=o[P];return k[P]=($,R=!1,B=!1)=>(r||j(),O.schedule($,R,B)),k},{}),cancel:k=>{for(let P=0;P<tx.length;P++)o[tx[P]].cancel(k)},state:a,steps:o}}const{schedule:ms,cancel:cu,state:za,steps:wv}=KA(typeof requestAnimationFrame<"u"?requestAnimationFrame:Yo,!0);let jx;function h$(){jx=void 0}const Xi={now:()=>(jx===void 0&&Xi.set(za.isProcessing||id.useManualTiming?za.timestamp:performance.now()),jx),set:t=>{jx=t,queueMicrotask(h$)}},YA=t=>e=>typeof e=="string"&&e.startsWith(t),sb=YA("--"),f$=YA("var(--"),ab=t=>f$(t)?m$.test(t.split("/*")[0].trim()):!1,m$=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,lm={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},C0={...lm,transform:t=>ad(0,1,t)},rx={...lm,default:1},l0=t=>Math.round(t*1e5)/1e5,ib=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function p$(t){return t==null}const x$=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,ob=(t,e)=>r=>!!(typeof r=="string"&&x$.test(r)&&r.startsWith(t)||e&&!p$(r)&&Object.prototype.hasOwnProperty.call(r,e)),XA=(t,e,r)=>n=>{if(typeof n!="string")return n;const[a,i,o,l]=n.match(ib);return{[t]:parseFloat(a),[e]:parseFloat(i),[r]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},g$=t=>ad(0,255,t),bv={...lm,transform:t=>Math.round(g$(t))},lh={test:ob("rgb","red"),parse:XA("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:n=1})=>"rgba("+bv.transform(t)+", "+bv.transform(e)+", "+bv.transform(r)+", "+l0(C0.transform(n))+")"};function v$(t){let e="",r="",n="",a="";return t.length>5?(e=t.substring(1,3),r=t.substring(3,5),n=t.substring(5,7),a=t.substring(7,9)):(e=t.substring(1,2),r=t.substring(2,3),n=t.substring(3,4),a=t.substring(4,5),e+=e,r+=r,n+=n,a+=a),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:a?parseInt(a,16)/255:1}}const cy={test:ob("#"),parse:v$,transform:lh.transform},K0=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Hd=K0("deg"),ic=K0("%"),jr=K0("px"),y$=K0("vh"),w$=K0("vw"),Rj={...ic,parse:t=>ic.parse(t)/100,transform:t=>ic.transform(t*100)},Nf={test:ob("hsl","hue"),parse:XA("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:n=1})=>"hsla("+Math.round(t)+", "+ic.transform(l0(e))+", "+ic.transform(l0(r))+", "+l0(C0.transform(n))+")"},ia={test:t=>lh.test(t)||cy.test(t)||Nf.test(t),parse:t=>lh.test(t)?lh.parse(t):Nf.test(t)?Nf.parse(t):cy.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?lh.transform(t):Nf.transform(t),getAnimatableNone:t=>{const e=ia.parse(t);return e.alpha=0,ia.transform(e)}},b$=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function N$(t){return isNaN(t)&&typeof t=="string"&&(t.match(ib)?.length||0)+(t.match(b$)?.length||0)>0}const ZA="number",JA="color",j$="var",_$="var(",Lj="${}",C$=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function S0(t){const e=t.toString(),r=[],n={color:[],number:[],var:[]},a=[];let i=0;const l=e.replace(C$,c=>(ia.test(c)?(n.color.push(i),a.push(JA),r.push(ia.parse(c))):c.startsWith(_$)?(n.var.push(i),a.push(j$),r.push(c)):(n.number.push(i),a.push(ZA),r.push(parseFloat(c))),++i,Lj)).split(Lj);return{values:r,split:l,indexes:n,types:a}}function QA(t){return S0(t).values}function e8(t){const{split:e,types:r}=S0(t),n=e.length;return a=>{let i="";for(let o=0;o<n;o++)if(i+=e[o],a[o]!==void 0){const l=r[o];l===ZA?i+=l0(a[o]):l===JA?i+=ia.transform(a[o]):i+=a[o]}return i}}const S$=t=>typeof t=="number"?0:ia.test(t)?ia.getAnimatableNone(t):t;function A$(t){const e=QA(t);return e8(t)(e.map(S$))}const du={test:N$,parse:QA,createTransformer:e8,getAnimatableNone:A$};function Nv(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function E$({hue:t,saturation:e,lightness:r,alpha:n}){t/=360,e/=100,r/=100;let a=0,i=0,o=0;if(!e)a=i=o=r;else{const l=r<.5?r*(1+e):r+e-r*e,c=2*r-l;a=Nv(c,l,t+1/3),i=Nv(c,l,t),o=Nv(c,l,t-1/3)}return{red:Math.round(a*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:n}}function s1(t,e){return r=>r>0?e:t}const Cs=(t,e,r)=>t+(e-t)*r,jv=(t,e,r)=>{const n=t*t,a=r*(e*e-n)+n;return a<0?0:Math.sqrt(a)},k$=[cy,lh,Nf],P$=t=>k$.find(e=>e.test(t));function Fj(t){const e=P$(t);if(!e)return!1;let r=e.parse(t);return e===Nf&&(r=E$(r)),r}const Mj=(t,e)=>{const r=Fj(t),n=Fj(e);if(!r||!n)return s1(t,e);const a={...r};return i=>(a.red=jv(r.red,n.red,i),a.green=jv(r.green,n.green,i),a.blue=jv(r.blue,n.blue,i),a.alpha=Cs(r.alpha,n.alpha,i),lh.transform(a))},dy=new Set(["none","hidden"]);function T$(t,e){return dy.has(t)?r=>r<=0?t:e:r=>r>=1?e:t}function I$(t,e){return r=>Cs(t,e,r)}function lb(t){return typeof t=="number"?I$:typeof t=="string"?ab(t)?s1:ia.test(t)?Mj:R$:Array.isArray(t)?t8:typeof t=="object"?ia.test(t)?Mj:D$:s1}function t8(t,e){const r=[...t],n=r.length,a=t.map((i,o)=>lb(i)(i,e[o]));return i=>{for(let o=0;o<n;o++)r[o]=a[o](i);return r}}function D$(t,e){const r={...t,...e},n={};for(const a in r)t[a]!==void 0&&e[a]!==void 0&&(n[a]=lb(t[a])(t[a],e[a]));return a=>{for(const i in n)r[i]=n[i](a);return r}}function O$(t,e){const r=[],n={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const i=e.types[a],o=t.indexes[i][n[i]],l=t.values[o]??0;r[a]=l,n[i]++}return r}const R$=(t,e)=>{const r=du.createTransformer(e),n=S0(t),a=S0(e);return n.indexes.var.length===a.indexes.var.length&&n.indexes.color.length===a.indexes.color.length&&n.indexes.number.length>=a.indexes.number.length?dy.has(t)&&!a.values.length||dy.has(e)&&!n.values.length?T$(t,e):W0(t8(O$(n,a),a.values),r):s1(t,e)};function r8(t,e,r){return typeof t=="number"&&typeof e=="number"&&typeof r=="number"?Cs(t,e,r):lb(t)(t,e)}const L$=t=>{const e=({timestamp:r})=>t(r);return{start:(r=!0)=>ms.update(e,r),stop:()=>cu(e),now:()=>za.isProcessing?za.timestamp:Xi.now()}},n8=(t,e,r=10)=>{let n="";const a=Math.max(Math.round(e/r),2);for(let i=0;i<a;i++)n+=Math.round(t(i/(a-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},a1=2e4;function cb(t){let e=0;const r=50;let n=t.next(e);for(;!n.done&&e<a1;)e+=r,n=t.next(e);return e>=a1?1/0:e}function F$(t,e=100,r){const n=r({...t,keyframes:[0,e]}),a=Math.min(cb(n),a1);return{type:"keyframes",ease:i=>n.next(a*i).value/e,duration:Ho(a)}}const M$=5;function s8(t,e,r){const n=Math.max(e-M$,0);return FA(r-t(n),e-n)}const Os={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},_v=.001;function B$({duration:t=Os.duration,bounce:e=Os.bounce,velocity:r=Os.velocity,mass:n=Os.mass}){let a,i,o=1-e;o=ad(Os.minDamping,Os.maxDamping,o),t=ad(Os.minDuration,Os.maxDuration,Ho(t)),o<1?(a=u=>{const h=u*o,m=h*t,x=h-r,p=uy(u,o),y=Math.exp(-m);return _v-x/p*y},i=u=>{const m=u*o*t,x=m*r+r,p=Math.pow(o,2)*Math.pow(u,2)*t,y=Math.exp(-m),w=uy(Math.pow(u,2),o);return(-a(u)+_v>0?-1:1)*((x-p)*y)/w}):(a=u=>{const h=Math.exp(-u*t),m=(u-r)*t+1;return-_v+h*m},i=u=>{const h=Math.exp(-u*t),m=(r-u)*(t*t);return h*m});const l=5/t,c=$$(a,i,l);if(t=ac(t),isNaN(c))return{stiffness:Os.stiffness,damping:Os.damping,duration:t};{const u=Math.pow(c,2)*n;return{stiffness:u,damping:o*2*Math.sqrt(n*u),duration:t}}}const U$=12;function $$(t,e,r){let n=r;for(let a=1;a<U$;a++)n=n-t(n)/e(n);return n}function uy(t,e){return t*Math.sqrt(1-e*e)}const V$=["duration","bounce"],z$=["stiffness","damping","mass"];function Bj(t,e){return e.some(r=>t[r]!==void 0)}function q$(t){let e={velocity:Os.velocity,stiffness:Os.stiffness,damping:Os.damping,mass:Os.mass,isResolvedFromDuration:!1,...t};if(!Bj(t,z$)&&Bj(t,V$))if(t.visualDuration){const r=t.visualDuration,n=2*Math.PI/(r*1.2),a=n*n,i=2*ad(.05,1,1-(t.bounce||0))*Math.sqrt(a);e={...e,mass:Os.mass,stiffness:a,damping:i}}else{const r=B$(t);e={...e,...r,mass:Os.mass},e.isResolvedFromDuration=!0}return e}function i1(t=Os.visualDuration,e=Os.bounce){const r=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:n,restDelta:a}=r;const i=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],l={done:!1,value:i},{stiffness:c,damping:u,mass:h,duration:m,velocity:x,isResolvedFromDuration:p}=q$({...r,velocity:-Ho(r.velocity||0)}),y=x||0,w=u/(2*Math.sqrt(c*h)),j=o-i,C=Ho(Math.sqrt(c/h)),S=Math.abs(j)<5;n||(n=S?Os.restSpeed.granular:Os.restSpeed.default),a||(a=S?Os.restDelta.granular:Os.restDelta.default);let k;if(w<1){const O=uy(C,w);k=$=>{const R=Math.exp(-w*C*$);return o-R*((y+w*C*j)/O*Math.sin(O*$)+j*Math.cos(O*$))}}else if(w===1)k=O=>o-Math.exp(-C*O)*(j+(y+C*j)*O);else{const O=C*Math.sqrt(w*w-1);k=$=>{const R=Math.exp(-w*C*$),B=Math.min(O*$,300);return o-R*((y+w*C*j)*Math.sinh(B)+O*j*Math.cosh(B))/O}}const P={calculatedDuration:p&&m||null,next:O=>{const $=k(O);if(p)l.done=O>=m;else{let R=O===0?y:0;w<1&&(R=O===0?ac(y):s8(k,O,$));const B=Math.abs(R)<=n,U=Math.abs(o-$)<=a;l.done=B&&U}return l.value=l.done?o:$,l},toString:()=>{const O=Math.min(cb(P),a1),$=n8(R=>P.next(O*R).value,O,30);return O+"ms "+$},toTransition:()=>{}};return P}i1.applyToOptions=t=>{const e=F$(t,100,i1);return t.ease=e.ease,t.duration=ac(e.duration),t.type="keyframes",t};function hy({keyframes:t,velocity:e=0,power:r=.8,timeConstant:n=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:h}){const m=t[0],x={done:!1,value:m},p=B=>l!==void 0&&B<l||c!==void 0&&B>c,y=B=>l===void 0?c:c===void 0||Math.abs(l-B)<Math.abs(c-B)?l:c;let w=r*e;const j=m+w,C=o===void 0?j:o(j);C!==j&&(w=C-m);const S=B=>-w*Math.exp(-B/n),k=B=>C+S(B),P=B=>{const U=S(B),K=k(B);x.done=Math.abs(U)<=u,x.value=x.done?C:K};let O,$;const R=B=>{p(x.value)&&(O=B,$=i1({keyframes:[x.value,y(x.value)],velocity:s8(k,B,x.value),damping:a,stiffness:i,restDelta:u,restSpeed:h}))};return R(0),{calculatedDuration:null,next:B=>{let U=!1;return!$&&O===void 0&&(U=!0,P(B),R(B)),O!==void 0&&B>=O?$.next(B-O):(!U&&P(B),x)}}}function H$(t,e,r){const n=[],a=r||id.mix||r8,i=t.length-1;for(let o=0;o<i;o++){let l=a(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||Yo:e;l=W0(c,l)}n.push(l)}return n}function W$(t,e,{clamp:r=!0,ease:n,mixer:a}={}){const i=t.length;if(Qw(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=H$(e,n,a),c=l.length,u=h=>{if(o&&h<t[0])return e[0];let m=0;if(c>1)for(;m<t.length-2&&!(h<t[m+1]);m++);const x=_0(t[m],t[m+1],h);return l[m](x)};return r?h=>u(ad(t[0],t[i-1],h)):u}function G$(t,e){const r=t[t.length-1];for(let n=1;n<=e;n++){const a=_0(0,e,n);t.push(Cs(r,1,a))}}function K$(t){const e=[0];return G$(e,t.length-1),e}function Y$(t,e){return t.map(r=>r*e)}function X$(t,e){return t.map(()=>e||WA).splice(0,t.length-1)}function c0({duration:t=300,keyframes:e,times:r,ease:n="easeInOut"}){const a=o$(n)?n.map(Oj):Oj(n),i={done:!1,value:e[0]},o=Y$(r&&r.length===e.length?r:K$(e),t),l=W$(o,e,{ease:Array.isArray(a)?a:X$(e,a)});return{calculatedDuration:t,next:c=>(i.value=l(c),i.done=c>=t,i)}}const Z$=t=>t!==null;function db(t,{repeat:e,repeatType:r="loop"},n,a=1){const i=t.filter(Z$),l=a<0||e&&r!=="loop"&&e%2===1?0:i.length-1;return!l||n===void 0?i[l]:n}const J$={decay:hy,inertia:hy,tween:c0,keyframes:c0,spring:i1};function a8(t){typeof t.type=="string"&&(t.type=J$[t.type])}class ub{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,r){return this.finished.then(e,r)}}const Q$=t=>t/100;class hb extends ub{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:r}=this.options;r&&r.updatedAt!==Xi.now()&&this.tick(Xi.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;a8(e);const{type:r=c0,repeat:n=0,repeatDelay:a=0,repeatType:i,velocity:o=0}=e;let{keyframes:l}=e;const c=r||c0;c!==c0&&typeof l[0]!="number"&&(this.mixKeyframes=W0(Q$,r8(l[0],l[1])),l=[0,100]);const u=c({...e,keyframes:l});i==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...l].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=cb(u));const{calculatedDuration:h}=u;this.calculatedDuration=h,this.resolvedDuration=h+a,this.totalDuration=this.resolvedDuration*(n+1)-a,this.generator=u}updateTime(e){const r=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(e,r=!1){const{generator:n,totalDuration:a,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return n.next(0);const{delay:u=0,keyframes:h,repeat:m,repeatType:x,repeatDelay:p,type:y,onUpdate:w,finalKeyframe:j}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-a/this.speed,this.startTime)),r?this.currentTime=e:this.updateTime(e);const C=this.currentTime-u*(this.playbackSpeed>=0?1:-1),S=this.playbackSpeed>=0?C<0:C>a;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let k=this.currentTime,P=n;if(m){const B=Math.min(this.currentTime,a)/l;let U=Math.floor(B),K=B%1;!K&&B>=1&&(K=1),K===1&&U--,U=Math.min(U,m+1),!!(U%2)&&(x==="reverse"?(K=1-K,p&&(K-=p/l)):x==="mirror"&&(P=o)),k=ad(0,1,K)*l}const O=S?{done:!1,value:h[0]}:P.next(k);i&&(O.value=i(O.value));let{done:$}=O;!S&&c!==null&&($=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&$);return R&&y!==hy&&(O.value=db(h,this.options,j,this.speed)),w&&w(O.value),R&&this.finish(),O}then(e,r){return this.finished.then(e,r)}get duration(){return Ho(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Ho(e)}get time(){return Ho(this.currentTime)}set time(e){e=ac(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Xi.now());const r=this.playbackSpeed!==e;this.playbackSpeed=e,r&&(this.time=Ho(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=L$,startTime:r}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=r??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Xi.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function eV(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const ch=t=>t*180/Math.PI,fy=t=>{const e=ch(Math.atan2(t[1],t[0]));return my(e)},tV={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:fy,rotateZ:fy,skewX:t=>ch(Math.atan(t[1])),skewY:t=>ch(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},my=t=>(t=t%360,t<0&&(t+=360),t),Uj=fy,$j=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Vj=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),rV={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:$j,scaleY:Vj,scale:t=>($j(t)+Vj(t))/2,rotateX:t=>my(ch(Math.atan2(t[6],t[5]))),rotateY:t=>my(ch(Math.atan2(-t[2],t[0]))),rotateZ:Uj,rotate:Uj,skewX:t=>ch(Math.atan(t[4])),skewY:t=>ch(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function py(t){return t.includes("scale")?1:0}function xy(t,e){if(!t||t==="none")return py(e);const r=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,a;if(r)n=rV,a=r;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=tV,a=l}if(!a)return py(e);const i=n[e],o=a[1].split(",").map(sV);return typeof i=="function"?i(o):o[i]}const nV=(t,e)=>{const{transform:r="none"}=getComputedStyle(t);return xy(r,e)};function sV(t){return parseFloat(t.trim())}const cm=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],dm=new Set(cm),zj=t=>t===lm||t===jr,aV=new Set(["x","y","z"]),iV=cm.filter(t=>!aV.has(t));function oV(t){const e=[];return iV.forEach(r=>{const n=t.getValue(r);n!==void 0&&(e.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),e}const hh={width:({x:t},{paddingLeft:e="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),height:({y:t},{paddingTop:e="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>xy(e,"x"),y:(t,{transform:e})=>xy(e,"y")};hh.translateX=hh.x;hh.translateY=hh.y;const fh=new Set;let gy=!1,vy=!1,yy=!1;function i8(){if(vy){const t=Array.from(fh).filter(n=>n.needsMeasurement),e=new Set(t.map(n=>n.element)),r=new Map;e.forEach(n=>{const a=oV(n);a.length&&(r.set(n,a),n.render())}),t.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const a=r.get(n);a&&a.forEach(([i,o])=>{n.getValue(i)?.set(o)})}),t.forEach(n=>n.measureEndState()),t.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}vy=!1,gy=!1,fh.forEach(t=>t.complete(yy)),fh.clear()}function o8(){fh.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(vy=!0)})}function lV(){yy=!0,o8(),i8(),yy=!1}class fb{constructor(e,r,n,a,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=r,this.name=n,this.motionValue=a,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(fh.add(this),gy||(gy=!0,ms.read(o8),ms.resolveKeyframes(i8))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:r,element:n,motionValue:a}=this;if(e[0]===null){const i=a?.get(),o=e[e.length-1];if(i!==void 0)e[0]=i;else if(n&&r){const l=n.readValue(r,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),a&&i===void 0&&a.set(e[0])}eV(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),fh.delete(this)}cancel(){this.state==="scheduled"&&(fh.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const cV=t=>t.startsWith("--");function dV(t,e,r){cV(e)?t.style.setProperty(e,r):t.style[e]=r}const uV=eb(()=>window.ScrollTimeline!==void 0),hV={};function fV(t,e){const r=eb(t);return()=>hV[e]??r()}const l8=fV(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Jm=([t,e,r,n])=>`cubic-bezier(${t}, ${e}, ${r}, ${n})`,qj={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Jm([0,.65,.55,1]),circOut:Jm([.55,0,1,.45]),backIn:Jm([.31,.01,.66,-.59]),backOut:Jm([.33,1.53,.69,.99])};function c8(t,e){if(t)return typeof t=="function"?l8()?n8(t,e):"ease-out":GA(t)?Jm(t):Array.isArray(t)?t.map(r=>c8(r,e)||qj.easeOut):qj[t]}function mV(t,e,r,{delay:n=0,duration:a=300,repeat:i=0,repeatType:o="loop",ease:l="easeOut",times:c}={},u=void 0){const h={[e]:r};c&&(h.offset=c);const m=c8(l,a);Array.isArray(m)&&(h.easing=m);const x={delay:n,duration:a,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return u&&(x.pseudoElement=u),t.animate(h,x)}function d8(t){return typeof t=="function"&&"applyToOptions"in t}function pV({type:t,...e}){return d8(t)&&l8()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class xV extends ub{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:r,name:n,keyframes:a,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:l,onComplete:c}=e;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=e,Qw(typeof e.type!="string");const u=pV(e);this.animation=mV(r,n,a,u,i),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const h=db(a,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(h):dV(r,n,h),this.animation.cancel()}c?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Ho(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Ho(e)}get time(){return Ho(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=ac(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:r}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&uV()?(this.animation.timeline=e,Yo):r(this)}}const u8={anticipate:zA,backInOut:VA,circInOut:HA};function gV(t){return t in u8}function vV(t){typeof t.ease=="string"&&gV(t.ease)&&(t.ease=u8[t.ease])}const Hj=10;class yV extends xV{constructor(e){vV(e),a8(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:r,onUpdate:n,onComplete:a,element:i,...o}=this.options;if(!r)return;if(e!==void 0){r.set(e);return}const l=new hb({...o,autoplay:!1}),c=ac(this.finishedTime??this.time);r.setWithVelocity(l.sample(c-Hj).value,l.sample(c).value,Hj),l.stop()}}const Wj=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(du.test(t)||t==="0")&&!t.startsWith("url("));function wV(t){const e=t[0];if(t.length===1)return!0;for(let r=0;r<t.length;r++)if(t[r]!==e)return!0}function bV(t,e,r,n){const a=t[0];if(a===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],o=Wj(a,e),l=Wj(i,e);return!o||!l?!1:wV(t)||(r==="spring"||d8(r))&&n}function wy(t){t.duration=0,t.type="keyframes"}const NV=new Set(["opacity","clipPath","filter","transform"]),jV=eb(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function _V(t){const{motionValue:e,name:r,repeatDelay:n,repeatType:a,damping:i,type:o}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=e.owner.getProps();return jV()&&r&&NV.has(r)&&(r!=="transform"||!u)&&!c&&!n&&a!=="mirror"&&i!==0&&o!=="inertia"}const CV=40;class SV extends ub{constructor({autoplay:e=!0,delay:r=0,type:n="keyframes",repeat:a=0,repeatDelay:i=0,repeatType:o="loop",keyframes:l,name:c,motionValue:u,element:h,...m}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Xi.now();const x={autoplay:e,delay:r,type:n,repeat:a,repeatDelay:i,repeatType:o,name:c,motionValue:u,element:h,...m},p=h?.KeyframeResolver||fb;this.keyframeResolver=new p(l,(y,w,j)=>this.onKeyframesResolved(y,w,x,!j),c,u,h),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,r,n,a){this.keyframeResolver=void 0;const{name:i,type:o,velocity:l,delay:c,isHandoff:u,onUpdate:h}=n;this.resolvedAt=Xi.now(),bV(e,i,o,l)||((id.instantAnimations||!c)&&h?.(db(e,n,r)),e[0]=e[e.length-1],wy(n),n.repeat=0);const x={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>CV?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...n,keyframes:e},p=!u&&_V(x)?new yV({...x,element:x.motionValue.owner.current}):new hb(x);p.finished.then(()=>this.notifyFinished()).catch(Yo),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(e,r){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),lV()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const AV=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function EV(t){const e=AV.exec(t);if(!e)return[,];const[,r,n,a]=e;return[`--${r??n}`,a]}function h8(t,e,r=1){const[n,a]=EV(t);if(!n)return;const i=window.getComputedStyle(e).getPropertyValue(n);if(i){const o=i.trim();return OA(o)?parseFloat(o):o}return ab(a)?h8(a,e,r+1):a}function mb(t,e){return t?.[e]??t?.default??t}const f8=new Set(["width","height","top","left","right","bottom",...cm]),kV={test:t=>t==="auto",parse:t=>t},m8=t=>e=>e.test(t),p8=[lm,jr,ic,Hd,w$,y$,kV],Gj=t=>p8.find(m8(t));function PV(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||LA(t):!0}const TV=new Set(["brightness","contrast","saturate","opacity"]);function IV(t){const[e,r]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=r.match(ib)||[];if(!n)return t;const a=r.replace(n,"");let i=TV.has(e)?1:0;return n!==r&&(i*=100),e+"("+i+a+")"}const DV=/\b([a-z-]*)\(.*?\)/gu,by={...du,getAnimatableNone:t=>{const e=t.match(DV);return e?e.map(IV).join(" "):t}},Kj={...lm,transform:Math.round},OV={rotate:Hd,rotateX:Hd,rotateY:Hd,rotateZ:Hd,scale:rx,scaleX:rx,scaleY:rx,scaleZ:rx,skew:Hd,skewX:Hd,skewY:Hd,distance:jr,translateX:jr,translateY:jr,translateZ:jr,x:jr,y:jr,z:jr,perspective:jr,transformPerspective:jr,opacity:C0,originX:Rj,originY:Rj,originZ:jr},pb={borderWidth:jr,borderTopWidth:jr,borderRightWidth:jr,borderBottomWidth:jr,borderLeftWidth:jr,borderRadius:jr,radius:jr,borderTopLeftRadius:jr,borderTopRightRadius:jr,borderBottomRightRadius:jr,borderBottomLeftRadius:jr,width:jr,maxWidth:jr,height:jr,maxHeight:jr,top:jr,right:jr,bottom:jr,left:jr,padding:jr,paddingTop:jr,paddingRight:jr,paddingBottom:jr,paddingLeft:jr,margin:jr,marginTop:jr,marginRight:jr,marginBottom:jr,marginLeft:jr,backgroundPositionX:jr,backgroundPositionY:jr,...OV,zIndex:Kj,fillOpacity:C0,strokeOpacity:C0,numOctaves:Kj},RV={...pb,color:ia,backgroundColor:ia,outlineColor:ia,fill:ia,stroke:ia,borderColor:ia,borderTopColor:ia,borderRightColor:ia,borderBottomColor:ia,borderLeftColor:ia,filter:by,WebkitFilter:by},x8=t=>RV[t];function g8(t,e){let r=x8(t);return r!==by&&(r=du),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const LV=new Set(["auto","none","0"]);function FV(t,e,r){let n=0,a;for(;n<t.length&&!a;){const i=t[n];typeof i=="string"&&!LV.has(i)&&S0(i).values.length&&(a=t[n]),n++}if(a&&r)for(const i of e)t[i]=g8(r,a)}class MV extends fb{constructor(e,r,n,a,i){super(e,r,n,a,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="string"&&(u=u.trim(),ab(u))){const h=h8(u,r.current);h!==void 0&&(e[c]=h),c===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!f8.has(n)||e.length!==2)return;const[a,i]=e,o=Gj(a),l=Gj(i);if(o!==l)if(zj(o)&&zj(l))for(let c=0;c<e.length;c++){const u=e[c];typeof u=="string"&&(e[c]=parseFloat(u))}else hh[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:r}=this,n=[];for(let a=0;a<e.length;a++)(e[a]===null||PV(e[a]))&&n.push(a);n.length&&FV(e,n,r)}measureInitialState(){const{element:e,unresolvedKeyframes:r,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=hh[n](e.measureViewportBox(),window.getComputedStyle(e.current)),r[0]=this.measuredOrigin;const a=r[r.length-1];a!==void 0&&e.getValue(n,a).jump(a,!1)}measureEndState(){const{element:e,name:r,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const a=e.getValue(r);a&&a.jump(this.measuredOrigin,!1);const i=n.length-1,o=n[i];n[i]=hh[r](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function BV(t,e,r){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let n=document;const a=r?.[t]??n.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t)}const v8=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function y8(t){return RA(t)&&"offsetHeight"in t}const Yj=30,UV=t=>!isNaN(parseFloat(t));class $V{constructor(e,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{const a=Xi.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const i of this.dependents)i.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=r.owner}setCurrent(e){this.current=e,this.updatedAt=Xi.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=UV(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new tb);const n=this.events[e].add(r);return e==="change"?()=>{n(),ms.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,r=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Xi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Yj)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,Yj);return FA(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Wf(t,e){return new $V(t,e)}const{schedule:xb}=KA(queueMicrotask,!1),Cl={x:!1,y:!1};function w8(){return Cl.x||Cl.y}function VV(t){return t==="x"||t==="y"?Cl[t]?null:(Cl[t]=!0,()=>{Cl[t]=!1}):Cl.x||Cl.y?null:(Cl.x=Cl.y=!0,()=>{Cl.x=Cl.y=!1})}function b8(t,e){const r=BV(t),n=new AbortController,a={passive:!0,...e,signal:n.signal};return[r,a,()=>n.abort()]}function Xj(t){return!(t.pointerType==="touch"||w8())}function zV(t,e,r={}){const[n,a,i]=b8(t,r),o=l=>{if(!Xj(l))return;const{target:c}=l,u=e(c,l);if(typeof u!="function"||!c)return;const h=m=>{Xj(m)&&(u(m),c.removeEventListener("pointerleave",h))};c.addEventListener("pointerleave",h,a)};return n.forEach(l=>{l.addEventListener("pointerenter",o,a)}),i}const N8=(t,e)=>e?t===e?!0:N8(t,e.parentElement):!1,gb=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,qV=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function HV(t){return qV.has(t.tagName)||t.tabIndex!==-1}const _x=new WeakSet;function Zj(t){return e=>{e.key==="Enter"&&t(e)}}function Cv(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const WV=(t,e)=>{const r=t.currentTarget;if(!r)return;const n=Zj(()=>{if(_x.has(r))return;Cv(r,"down");const a=Zj(()=>{Cv(r,"up")}),i=()=>Cv(r,"cancel");r.addEventListener("keyup",a,e),r.addEventListener("blur",i,e)});r.addEventListener("keydown",n,e),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),e)};function Jj(t){return gb(t)&&!w8()}function GV(t,e,r={}){const[n,a,i]=b8(t,r),o=l=>{const c=l.currentTarget;if(!Jj(l))return;_x.add(c);const u=e(c,l),h=(p,y)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",x),_x.has(c)&&_x.delete(c),Jj(p)&&typeof u=="function"&&u(p,{success:y})},m=p=>{h(p,c===window||c===document||r.useGlobalTarget||N8(c,p.target))},x=p=>{h(p,!1)};window.addEventListener("pointerup",m,a),window.addEventListener("pointercancel",x,a)};return n.forEach(l=>{(r.useGlobalTarget?window:l).addEventListener("pointerdown",o,a),y8(l)&&(l.addEventListener("focus",u=>WV(u,a)),!HV(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),i}function j8(t){return RA(t)&&"ownerSVGElement"in t}function KV(t){return j8(t)&&t.tagName==="svg"}const hi=t=>!!(t&&t.getVelocity),YV=[...p8,ia,du],XV=t=>YV.find(m8(t)),vb=N.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function Qj(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function ZV(...t){return e=>{let r=!1;const n=t.map(a=>{const i=Qj(a,e);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():Qj(t[a],null)}}}}function JV(...t){return N.useCallback(ZV(...t),t)}class QV extends N.Component{getSnapshotBeforeUpdate(e){const r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){const n=r.offsetParent,a=y8(n)&&n.offsetWidth||0,i=this.props.sizeRef.current;i.height=r.offsetHeight||0,i.width=r.offsetWidth||0,i.top=r.offsetTop,i.left=r.offsetLeft,i.right=a-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function ez({children:t,isPresent:e,anchorX:r,root:n}){const a=N.useId(),i=N.useRef(null),o=N.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=N.useContext(vb),c=JV(i,t?.ref);return N.useInsertionEffect(()=>{const{width:u,height:h,top:m,left:x,right:p}=o.current;if(e||!i.current||!u||!h)return;const y=r==="left"?`left: ${x}`:`right: ${p}`;i.current.dataset.motionPopId=a;const w=document.createElement("style");l&&(w.nonce=l);const j=n??document.head;return j.appendChild(w),w.sheet&&w.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${h}px !important;
            ${y}px !important;
            top: ${m}px !important;
          }
        `),()=>{j.contains(w)&&j.removeChild(w)}},[e]),s.jsx(QV,{isPresent:e,childRef:i,sizeRef:o,children:N.cloneElement(t,{ref:c})})}const tz=({children:t,initial:e,isPresent:r,onExitComplete:n,custom:a,presenceAffectsLayout:i,mode:o,anchorX:l,root:c})=>{const u=Yw(rz),h=N.useId();let m=!0,x=N.useMemo(()=>(m=!1,{id:h,initial:e,isPresent:r,custom:a,onExitComplete:p=>{u.set(p,!0);for(const y of u.values())if(!y)return;n&&n()},register:p=>(u.set(p,!1),()=>u.delete(p))}),[r,u,n]);return i&&m&&(x={...x}),N.useMemo(()=>{u.forEach((p,y)=>u.set(y,!1))},[r]),N.useEffect(()=>{!r&&!u.size&&n&&n()},[r]),o==="popLayout"&&(t=s.jsx(ez,{isPresent:r,anchorX:l,root:c,children:t})),s.jsx(z1.Provider,{value:x,children:t})};function rz(){return new Map}function _8(t=!0){const e=N.useContext(z1);if(e===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:a}=e,i=N.useId();N.useEffect(()=>{if(t)return a(i)},[t]);const o=N.useCallback(()=>t&&n&&n(i),[i,n,t]);return!r&&n?[!1,o]:[!0]}const nx=t=>t.key||"";function e4(t){const e=[];return N.Children.forEach(t,r=>{N.isValidElement(r)&&e.push(r)}),e}const nz=({children:t,custom:e,initial:r=!0,onExitComplete:n,presenceAffectsLayout:a=!0,mode:i="sync",propagate:o=!1,anchorX:l="left",root:c})=>{const[u,h]=_8(o),m=N.useMemo(()=>e4(t),[t]),x=o&&!u?[]:m.map(nx),p=N.useRef(!0),y=N.useRef(m),w=Yw(()=>new Map),[j,C]=N.useState(m),[S,k]=N.useState(m);DA(()=>{p.current=!1,y.current=m;for(let $=0;$<S.length;$++){const R=nx(S[$]);x.includes(R)?w.delete(R):w.get(R)!==!0&&w.set(R,!1)}},[S,x.length,x.join("-")]);const P=[];if(m!==j){let $=[...m];for(let R=0;R<S.length;R++){const B=S[R],U=nx(B);x.includes(U)||($.splice(R,0,B),P.push(B))}return i==="wait"&&P.length&&($=P),k(e4($)),C(m),null}const{forceRender:O}=N.useContext(Kw);return s.jsx(s.Fragment,{children:S.map($=>{const R=nx($),B=o&&!u?!1:m===S||x.includes(R),U=()=>{if(w.has(R))w.set(R,!0);else return;let K=!0;w.forEach(M=>{M||(K=!1)}),K&&(O?.(),k(y.current),o&&h?.(),n&&n())};return s.jsx(tz,{isPresent:B,initial:!p.current||r?void 0:!1,custom:e,presenceAffectsLayout:a,mode:i,root:c,onExitComplete:B?void 0:U,anchorX:l,children:$},R)})})},C8=N.createContext({strict:!1}),t4={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Gf={};for(const t in t4)Gf[t]={isEnabled:e=>t4[t].some(r=>!!e[r])};function sz(t){for(const e in t)Gf[e]={...Gf[e],...t[e]}}const az=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function o1(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||az.has(t)}let S8=t=>!o1(t);function iz(t){typeof t=="function"&&(S8=e=>e.startsWith("on")?!o1(e):t(e))}try{iz(require("@emotion/is-prop-valid").default)}catch{}function oz(t,e,r){const n={};for(const a in t)a==="values"&&typeof t.values=="object"||(S8(a)||r===!0&&o1(a)||!e&&!o1(a)||t.draggable&&a.startsWith("onDrag"))&&(n[a]=t[a]);return n}const q1=N.createContext({});function H1(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function A0(t){return typeof t=="string"||Array.isArray(t)}const yb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],wb=["initial",...yb];function W1(t){return H1(t.animate)||wb.some(e=>A0(t[e]))}function A8(t){return!!(W1(t)||t.variants)}function lz(t,e){if(W1(t)){const{initial:r,animate:n}=t;return{initial:r===!1||A0(r)?r:void 0,animate:A0(n)?n:void 0}}return t.inherit!==!1?e:{}}function cz(t){const{initial:e,animate:r}=lz(t,N.useContext(q1));return N.useMemo(()=>({initial:e,animate:r}),[r4(e),r4(r)])}function r4(t){return Array.isArray(t)?t.join(" "):t}const E0={};function dz(t){for(const e in t)E0[e]=t[e],sb(e)&&(E0[e].isCSSVariable=!0)}function E8(t,{layout:e,layoutId:r}){return dm.has(t)||t.startsWith("origin")||(e||r!==void 0)&&(!!E0[t]||t==="opacity")}const uz={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},hz=cm.length;function fz(t,e,r){let n="",a=!0;for(let i=0;i<hz;i++){const o=cm[i],l=t[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||r){const u=v8(l,pb[o]);if(!c){a=!1;const h=uz[o]||o;n+=`${h}(${u}) `}r&&(e[o]=u)}}return n=n.trim(),r?n=r(e,a?"":n):a&&(n="none"),n}function bb(t,e,r){const{style:n,vars:a,transformOrigin:i}=t;let o=!1,l=!1;for(const c in e){const u=e[c];if(dm.has(c)){o=!0;continue}else if(sb(c)){a[c]=u;continue}else{const h=v8(u,pb[c]);c.startsWith("origin")?(l=!0,i[c]=h):n[c]=h}}if(e.transform||(o||r?n.transform=fz(e,t.transform,r):n.transform&&(n.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:h=0}=i;n.transformOrigin=`${c} ${u} ${h}`}}const Nb=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function k8(t,e,r){for(const n in e)!hi(e[n])&&!E8(n,r)&&(t[n]=e[n])}function mz({transformTemplate:t},e){return N.useMemo(()=>{const r=Nb();return bb(r,e,t),Object.assign({},r.vars,r.style)},[e])}function pz(t,e){const r=t.style||{},n={};return k8(n,r,t),Object.assign(n,mz(t,e)),n}function xz(t,e){const r={},n=pz(t,e);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=n,r}const gz={offset:"stroke-dashoffset",array:"stroke-dasharray"},vz={offset:"strokeDashoffset",array:"strokeDasharray"};function yz(t,e,r=1,n=0,a=!0){t.pathLength=1;const i=a?gz:vz;t[i.offset]=jr.transform(-n);const o=jr.transform(e),l=jr.transform(r);t[i.array]=`${o} ${l}`}function P8(t,{attrX:e,attrY:r,attrScale:n,pathLength:a,pathSpacing:i=1,pathOffset:o=0,...l},c,u,h){if(bb(t,l,u),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:x}=t;m.transform&&(x.transform=m.transform,delete m.transform),(x.transform||m.transformOrigin)&&(x.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),x.transform&&(x.transformBox=h?.transformBox??"fill-box",delete m.transformBox),e!==void 0&&(m.x=e),r!==void 0&&(m.y=r),n!==void 0&&(m.scale=n),a!==void 0&&yz(m,a,i,o,!1)}const T8=()=>({...Nb(),attrs:{}}),I8=t=>typeof t=="string"&&t.toLowerCase()==="svg";function wz(t,e,r,n){const a=N.useMemo(()=>{const i=T8();return P8(i,e,I8(n),t.transformTemplate,t.style),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};k8(i,t.style,t),a.style={...i,...a.style}}return a}const bz=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function jb(t){return typeof t!="string"||t.includes("-")?!1:!!(bz.indexOf(t)>-1||/[A-Z]/u.test(t))}function Nz(t,e,r,{latestValues:n},a,i=!1){const l=(jb(t)?wz:xz)(e,n,a,t),c=oz(e,typeof t=="string",i),u=t!==N.Fragment?{...c,...l,ref:r}:{},{children:h}=e,m=N.useMemo(()=>hi(h)?h.get():h,[h]);return N.createElement(t,{...u,children:m})}function n4(t){const e=[{},{}];return t?.values.forEach((r,n)=>{e[0][n]=r.get(),e[1][n]=r.getVelocity()}),e}function _b(t,e,r,n){if(typeof e=="function"){const[a,i]=n4(n);e=e(r!==void 0?r:t.custom,a,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[a,i]=n4(n);e=e(r!==void 0?r:t.custom,a,i)}return e}function Cx(t){return hi(t)?t.get():t}function jz({scrapeMotionValuesFromProps:t,createRenderState:e},r,n,a){return{latestValues:_z(r,n,a,t),renderState:e()}}function _z(t,e,r,n){const a={},i=n(t,{});for(const x in i)a[x]=Cx(i[x]);let{initial:o,animate:l}=t;const c=W1(t),u=A8(t);e&&u&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let h=r?r.initial===!1:!1;h=h||o===!1;const m=h?l:o;if(m&&typeof m!="boolean"&&!H1(m)){const x=Array.isArray(m)?m:[m];for(let p=0;p<x.length;p++){const y=_b(t,x[p]);if(y){const{transitionEnd:w,transition:j,...C}=y;for(const S in C){let k=C[S];if(Array.isArray(k)){const P=h?k.length-1:0;k=k[P]}k!==null&&(a[S]=k)}for(const S in w)a[S]=w[S]}}}return a}const D8=t=>(e,r)=>{const n=N.useContext(q1),a=N.useContext(z1),i=()=>jz(t,e,n,a);return r?i():Yw(i)};function Cb(t,e,r){const{style:n}=t,a={};for(const i in n)(hi(n[i])||e.style&&hi(e.style[i])||E8(i,t)||r?.getValue(i)?.liveStyle!==void 0)&&(a[i]=n[i]);return a}const Cz=D8({scrapeMotionValuesFromProps:Cb,createRenderState:Nb});function O8(t,e,r){const n=Cb(t,e,r);for(const a in t)if(hi(t[a])||hi(e[a])){const i=cm.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;n[i]=t[a]}return n}const Sz=D8({scrapeMotionValuesFromProps:O8,createRenderState:T8}),Az=Symbol.for("motionComponentSymbol");function jf(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Ez(t,e,r){return N.useCallback(n=>{n&&t.onMount&&t.onMount(n),e&&(n?e.mount(n):e.unmount()),r&&(typeof r=="function"?r(n):jf(r)&&(r.current=n))},[e])}const Sb=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),kz="framerAppearId",R8="data-"+Sb(kz),L8=N.createContext({});function Pz(t,e,r,n,a){const{visualElement:i}=N.useContext(q1),o=N.useContext(C8),l=N.useContext(z1),c=N.useContext(vb).reducedMotion,u=N.useRef(null);n=n||o.renderer,!u.current&&n&&(u.current=n(t,{visualState:e,parent:i,props:r,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const h=u.current,m=N.useContext(L8);h&&!h.projection&&a&&(h.type==="html"||h.type==="svg")&&Tz(u.current,r,a,m);const x=N.useRef(!1);N.useInsertionEffect(()=>{h&&x.current&&h.update(r,l)});const p=r[R8],y=N.useRef(!!p&&!window.MotionHandoffIsComplete?.(p)&&window.MotionHasOptimisedAnimation?.(p));return DA(()=>{h&&(x.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),y.current&&h.animationState&&h.animationState.animateChanges())}),N.useEffect(()=>{h&&(!y.current&&h.animationState&&h.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(p)}),y.current=!1),h.enteringChildren=void 0)}),h}function Tz(t,e,r,n){const{layoutId:a,layout:i,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:u,layoutCrossfade:h}=e;t.projection=new r(t.latestValues,e["data-framer-portal-id"]?void 0:F8(t.parent)),t.projection.setOptions({layoutId:a,layout:i,alwaysMeasureLayout:!!o||l&&jf(l),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:n,crossfade:h,layoutScroll:c,layoutRoot:u})}function F8(t){if(t)return t.options.allowProjection!==!1?t.projection:F8(t.parent)}function Sv(t,{forwardMotionProps:e=!1}={},r,n){r&&sz(r);const a=jb(t)?Sz:Cz;function i(l,c){let u;const h={...N.useContext(vb),...l,layoutId:Iz(l)},{isStatic:m}=h,x=cz(l),p=a(l,m);if(!m&&Xw){Dz();const y=Oz(h);u=y.MeasureLayout,x.visualElement=Pz(t,p,h,n,y.ProjectionNode)}return s.jsxs(q1.Provider,{value:x,children:[u&&x.visualElement?s.jsx(u,{visualElement:x.visualElement,...h}):null,Nz(t,l,Ez(p,x.visualElement,c),p,m,e)]})}i.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=N.forwardRef(i);return o[Az]=t,o}function Iz({layoutId:t}){const e=N.useContext(Kw).id;return e&&t!==void 0?e+"-"+t:t}function Dz(t,e){N.useContext(C8).strict}function Oz(t){const{drag:e,layout:r}=Gf;if(!e&&!r)return{};const n={...e,...r};return{MeasureLayout:e?.isEnabled(t)||r?.isEnabled(t)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function Rz(t,e){if(typeof Proxy>"u")return Sv;const r=new Map,n=(i,o)=>Sv(i,o,t,e),a=(i,o)=>n(i,o);return new Proxy(a,{get:(i,o)=>o==="create"?n:(r.has(o)||r.set(o,Sv(o,void 0,t,e)),r.get(o))})}function M8({top:t,left:e,right:r,bottom:n}){return{x:{min:e,max:r},y:{min:t,max:n}}}function Lz({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Fz(t,e){if(!e)return t;const r=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function Av(t){return t===void 0||t===1}function Ny({scale:t,scaleX:e,scaleY:r}){return!Av(t)||!Av(e)||!Av(r)}function th(t){return Ny(t)||B8(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function B8(t){return s4(t.x)||s4(t.y)}function s4(t){return t&&t!=="0%"}function l1(t,e,r){const n=t-r,a=e*n;return r+a}function a4(t,e,r,n,a){return a!==void 0&&(t=l1(t,a,n)),l1(t,r,n)+e}function jy(t,e=0,r=1,n,a){t.min=a4(t.min,e,r,n,a),t.max=a4(t.max,e,r,n,a)}function U8(t,{x:e,y:r}){jy(t.x,e.translate,e.scale,e.originPoint),jy(t.y,r.translate,r.scale,r.originPoint)}const i4=.999999999999,o4=1.0000000000001;function Mz(t,e,r,n=!1){const a=r.length;if(!a)return;e.x=e.y=1;let i,o;for(let l=0;l<a;l++){i=r[l],o=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Cf(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,U8(t,o)),n&&th(i.latestValues)&&Cf(t,i.latestValues))}e.x<o4&&e.x>i4&&(e.x=1),e.y<o4&&e.y>i4&&(e.y=1)}function _f(t,e){t.min=t.min+e,t.max=t.max+e}function l4(t,e,r,n,a=.5){const i=Cs(t.min,t.max,a);jy(t,e,r,i,n)}function Cf(t,e){l4(t.x,e.x,e.scaleX,e.scale,e.originX),l4(t.y,e.y,e.scaleY,e.scale,e.originY)}function $8(t,e){return M8(Fz(t.getBoundingClientRect(),e))}function Bz(t,e,r){const n=$8(t,r),{scroll:a}=e;return a&&(_f(n.x,a.offset.x),_f(n.y,a.offset.y)),n}const c4=()=>({translate:0,scale:1,origin:0,originPoint:0}),Sf=()=>({x:c4(),y:c4()}),d4=()=>({min:0,max:0}),qs=()=>({x:d4(),y:d4()}),_y={current:null},V8={current:!1};function Uz(){if(V8.current=!0,!!Xw)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>_y.current=t.matches;t.addEventListener("change",e),e()}else _y.current=!1}const $z=new WeakMap;function Vz(t,e,r){for(const n in e){const a=e[n],i=r[n];if(hi(a))t.addValue(n,a);else if(hi(i))t.addValue(n,Wf(a,{owner:t}));else if(i!==a)if(t.hasValue(n)){const o=t.getValue(n);o.liveStyle===!0?o.jump(a):o.hasAnimated||o.set(a)}else{const o=t.getStaticValue(n);t.addValue(n,Wf(o!==void 0?o:a,{owner:t}))}}for(const n in r)e[n]===void 0&&t.removeValue(n);return e}const u4=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class zz{scrapeMotionValuesFromProps(e,r,n){return{}}constructor({parent:e,props:r,presenceContext:n,reducedMotionConfig:a,blockInitialAnimation:i,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=fb,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=Xi.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,ms.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=r.initial?{...c}:{},this.renderState=u,this.parent=e,this.props=r,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=a,this.options=l,this.blockInitialAnimation=!!i,this.isControllingVariants=W1(r),this.isVariantNode=A8(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...m}=this.scrapeMotionValuesFromProps(r,{},this);for(const x in m){const p=m[x];c[x]!==void 0&&hi(p)&&p.set(c[x])}}mount(e){this.current=e,$z.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),V8.current||Uz(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:_y.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),cu(this.notifyUpdate),cu(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const r=this.features[e];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,r){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=dm.has(e);n&&this.onBindTransform&&this.onBindTransform();const a=r.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&ms.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,r)),this.valueSubscriptions.set(e,()=>{a(),i&&i(),r.owner&&r.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Gf){const r=Gf[e];if(!r)continue;const{isEnabled:n,Feature:a}=r;if(!this.features[e]&&a&&n(this.props)&&(this.features[e]=new a(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):qs()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<u4.length;n++){const a=u4[n];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const i="on"+a,o=e[i];o&&(this.propEventSubscriptions[a]=this.on(a,o))}this.prevMotionValues=Vz(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){const n=this.values.get(e);r!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,r),this.values.set(e,r),this.latestValues[e]=r.get())}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&r!==void 0&&(n=Wf(r===null?void 0:r,{owner:this}),this.addValue(e,n)),n}readValue(e,r){let n=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return n!=null&&(typeof n=="string"&&(OA(n)||LA(n))?n=parseFloat(n):!XV(n)&&du.test(r)&&(n=g8(e,r)),this.setBaseTarget(e,hi(n)?n.get():n)),hi(n)?n.get():n}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){const{initial:r}=this.props;let n;if(typeof r=="string"||typeof r=="object"){const i=_b(this.props,r,this.presenceContext?.custom);i&&(n=i[e])}if(r&&n!==void 0)return n;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!hi(a)?a:this.initialValues[e]!==void 0&&n===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new tb),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}scheduleRenderMicrotask(){xb.render(this.render)}}class z8 extends zz{constructor(){super(...arguments),this.KeyframeResolver=MV}sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){return e.style?e.style[r]:void 0}removeValueFromRenderState(e,{vars:r,style:n}){delete r[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;hi(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function q8(t,{style:e,vars:r},n,a){const i=t.style;let o;for(o in e)i[o]=e[o];a?.applyProjectionStyles(i,n);for(o in r)i.setProperty(o,r[o])}function qz(t){return window.getComputedStyle(t)}class Hz extends z8{constructor(){super(...arguments),this.type="html",this.renderInstance=q8}readValueFromInstance(e,r){if(dm.has(r))return this.projection?.isProjecting?py(r):nV(e,r);{const n=qz(e),a=(sb(r)?n.getPropertyValue(r):n[r])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:r}){return $8(e,r)}build(e,r,n){bb(e,r,n.transformTemplate)}scrapeMotionValuesFromProps(e,r,n){return Cb(e,r,n)}}const H8=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Wz(t,e,r,n){q8(t,e,void 0,n);for(const a in e.attrs)t.setAttribute(H8.has(a)?a:Sb(a),e.attrs[a])}class Gz extends z8{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=qs}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(dm.has(r)){const n=x8(r);return n&&n.default||0}return r=H8.has(r)?r:Sb(r),e.getAttribute(r)}scrapeMotionValuesFromProps(e,r,n){return O8(e,r,n)}build(e,r,n){P8(e,r,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,r,n,a){Wz(e,r,n,a)}mount(e){this.isSVGTag=I8(e.tagName),super.mount(e)}}const Kz=(t,e)=>jb(t)?new Gz(e):new Hz(e,{allowProjection:t!==N.Fragment});function Rf(t,e,r){const n=t.getProps();return _b(n,e,r!==void 0?r:n.custom,t)}const Cy=t=>Array.isArray(t);function Yz(t,e,r){t.hasValue(e)?t.getValue(e).set(r):t.addValue(e,Wf(r))}function Xz(t){return Cy(t)?t[t.length-1]||0:t}function Zz(t,e){const r=Rf(t,e);let{transitionEnd:n={},transition:a={},...i}=r||{};i={...i,...n};for(const o in i){const l=Xz(i[o]);Yz(t,o,l)}}function Jz(t){return!!(hi(t)&&t.add)}function Sy(t,e){const r=t.getValue("willChange");if(Jz(r))return r.add(e);if(!r&&id.WillChange){const n=new id.WillChange("auto");t.addValue("willChange",n),n.add(e)}}function W8(t){return t.props[R8]}const Qz=t=>t!==null;function eq(t,{repeat:e,repeatType:r="loop"},n){const a=t.filter(Qz),i=e&&r!=="loop"&&e%2===1?0:a.length-1;return a[i]}const tq={type:"spring",stiffness:500,damping:25,restSpeed:10},rq=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),nq={type:"keyframes",duration:.8},sq={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},aq=(t,{keyframes:e})=>e.length>2?nq:dm.has(t)?t.startsWith("scale")?rq(e[1]):tq:sq;function iq({when:t,delay:e,delayChildren:r,staggerChildren:n,staggerDirection:a,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:u,...h}){return!!Object.keys(h).length}const Ab=(t,e,r,n={},a,i)=>o=>{const l=mb(n,t)||{},c=l.delay||n.delay||0;let{elapsed:u=0}=n;u=u-ac(c);const h={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-u,onUpdate:x=>{e.set(x),l.onUpdate&&l.onUpdate(x)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:i?void 0:a};iq(l)||Object.assign(h,aq(t,h)),h.duration&&(h.duration=ac(h.duration)),h.repeatDelay&&(h.repeatDelay=ac(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let m=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(wy(h),h.delay===0&&(m=!0)),(id.instantAnimations||id.skipAnimations)&&(m=!0,wy(h),h.delay=0),h.allowFlatten=!l.type&&!l.ease,m&&!i&&e.get()!==void 0){const x=eq(h.keyframes,l);if(x!==void 0){ms.update(()=>{h.onUpdate(x),h.onComplete()});return}}return l.isSync?new hb(h):new SV(h)};function oq({protectedKeys:t,needsAnimating:e},r){const n=t.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,n}function G8(t,e,{delay:r=0,transitionOverride:n,type:a}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...l}=e;n&&(i=n);const c=[],u=a&&t.animationState&&t.animationState.getState()[a];for(const h in l){const m=t.getValue(h,t.latestValues[h]??null),x=l[h];if(x===void 0||u&&oq(u,h))continue;const p={delay:r,...mb(i||{},h)},y=m.get();if(y!==void 0&&!m.isAnimating&&!Array.isArray(x)&&x===y&&!p.velocity)continue;let w=!1;if(window.MotionHandoffAnimation){const C=W8(t);if(C){const S=window.MotionHandoffAnimation(C,h,ms);S!==null&&(p.startTime=S,w=!0)}}Sy(t,h),m.start(Ab(h,m,x,t.shouldReduceMotion&&f8.has(h)?{type:!1}:p,t,w));const j=m.animation;j&&c.push(j)}return o&&Promise.all(c).then(()=>{ms.update(()=>{o&&Zz(t,o)})}),c}function K8(t,e,r,n=0,a=1){const i=Array.from(t).sort((u,h)=>u.sortNodePosition(h)).indexOf(e),o=t.size,l=(o-1)*n;return typeof r=="function"?r(i,o):a===1?i*n:l-i*n}function Ay(t,e,r={}){const n=Rf(t,e,r.type==="exit"?t.presenceContext?.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(a=r.transitionOverride);const i=n?()=>Promise.all(G8(t,n,r)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:m}=a;return lq(t,e,c,u,h,m,r)}:()=>Promise.resolve(),{when:l}=a;if(l){const[c,u]=l==="beforeChildren"?[i,o]:[o,i];return c().then(()=>u())}else return Promise.all([i(),o(r.delay)])}function lq(t,e,r=0,n=0,a=0,i=1,o){const l=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),l.push(Ay(c,e,{...o,delay:r+(typeof n=="function"?0:n)+K8(t.variantChildren,c,n,a,i)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(l)}function cq(t,e,r={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const a=e.map(i=>Ay(t,i,r));n=Promise.all(a)}else if(typeof e=="string")n=Ay(t,e,r);else{const a=typeof e=="function"?Rf(t,e,r.custom):e;n=Promise.all(G8(t,a,r))}return n.then(()=>{t.notify("AnimationComplete",e)})}function Y8(t,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}const dq=wb.length;function X8(t){if(!t)return;if(!t.isControllingVariants){const r=t.parent?X8(t.parent)||{}:{};return t.props.initial!==void 0&&(r.initial=t.props.initial),r}const e={};for(let r=0;r<dq;r++){const n=wb[r],a=t.props[n];(A0(a)||a===!1)&&(e[n]=a)}return e}const uq=[...yb].reverse(),hq=yb.length;function fq(t){return e=>Promise.all(e.map(({animation:r,options:n})=>cq(t,r,n)))}function mq(t){let e=fq(t),r=h4(),n=!0;const a=c=>(u,h)=>{const m=Rf(t,h,c==="exit"?t.presenceContext?.custom:void 0);if(m){const{transition:x,transitionEnd:p,...y}=m;u={...u,...y,...p}}return u};function i(c){e=c(t)}function o(c){const{props:u}=t,h=X8(t.parent)||{},m=[],x=new Set;let p={},y=1/0;for(let j=0;j<hq;j++){const C=uq[j],S=r[C],k=u[C]!==void 0?u[C]:h[C],P=A0(k),O=C===c?S.isActive:null;O===!1&&(y=j);let $=k===h[C]&&k!==u[C]&&P;if($&&n&&t.manuallyAnimateOnMount&&($=!1),S.protectedKeys={...p},!S.isActive&&O===null||!k&&!S.prevProp||H1(k)||typeof k=="boolean")continue;const R=pq(S.prevProp,k);let B=R||C===c&&S.isActive&&!$&&P||j>y&&P,U=!1;const K=Array.isArray(k)?k:[k];let M=K.reduce(a(C),{});O===!1&&(M={});const{prevResolvedValues:q={}}=S,re={...q,...M},ee=ue=>{B=!0,x.has(ue)&&(U=!0,x.delete(ue)),S.needsAnimating[ue]=!0;const G=t.getValue(ue);G&&(G.liveStyle=!1)};for(const ue in re){const G=M[ue],J=q[ue];if(p.hasOwnProperty(ue))continue;let oe=!1;Cy(G)&&Cy(J)?oe=!Y8(G,J):oe=G!==J,oe?G!=null?ee(ue):x.add(ue):G!==void 0&&x.has(ue)?ee(ue):S.protectedKeys[ue]=!0}S.prevProp=k,S.prevResolvedValues=M,S.isActive&&(p={...p,...M}),n&&t.blockInitialAnimation&&(B=!1);const H=$&&R;B&&(!H||U)&&m.push(...K.map(ue=>{const G={type:C};if(typeof ue=="string"&&n&&!H&&t.manuallyAnimateOnMount&&t.parent){const{parent:J}=t,oe=Rf(J,ue);if(J.enteringChildren&&oe){const{delayChildren:Y}=oe.transition||{};G.delay=K8(J.enteringChildren,t,Y)}}return{animation:ue,options:G}}))}if(x.size){const j={};if(typeof u.initial!="boolean"){const C=Rf(t,Array.isArray(u.initial)?u.initial[0]:u.initial);C&&C.transition&&(j.transition=C.transition)}x.forEach(C=>{const S=t.getBaseTarget(C),k=t.getValue(C);k&&(k.liveStyle=!0),j[C]=S??null}),m.push({animation:j})}let w=!!m.length;return n&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(w=!1),n=!1,w?e(m):Promise.resolve()}function l(c,u){if(r[c].isActive===u)return Promise.resolve();t.variantChildren?.forEach(m=>m.animationState?.setActive(c,u)),r[c].isActive=u;const h=o(c);for(const m in r)r[m].protectedKeys={};return h}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>r,reset:()=>{r=h4()}}}function pq(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Y8(e,t):!1}function Zu(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function h4(){return{animate:Zu(!0),whileInView:Zu(),whileHover:Zu(),whileTap:Zu(),whileDrag:Zu(),whileFocus:Zu(),exit:Zu()}}class vu{constructor(e){this.isMounted=!1,this.node=e}update(){}}class xq extends vu{constructor(e){super(e),e.animationState||(e.animationState=mq(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();H1(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let gq=0;class vq extends vu{constructor(){super(...arguments),this.id=gq++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const a=this.node.animationState.setActive("exit",!e);r&&!e&&a.then(()=>{r(this.id)})}mount(){const{register:e,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const yq={animation:{Feature:xq},exit:{Feature:vq}};function k0(t,e,r,n={passive:!0}){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r)}function Y0(t){return{point:{x:t.pageX,y:t.pageY}}}const wq=t=>e=>gb(e)&&t(e,Y0(e));function d0(t,e,r,n){return k0(t,e,wq(r),n)}const Z8=1e-4,bq=1-Z8,Nq=1+Z8,J8=.01,jq=0-J8,_q=0+J8;function Ci(t){return t.max-t.min}function Cq(t,e,r){return Math.abs(t-e)<=r}function f4(t,e,r,n=.5){t.origin=n,t.originPoint=Cs(e.min,e.max,t.origin),t.scale=Ci(r)/Ci(e),t.translate=Cs(r.min,r.max,t.origin)-t.originPoint,(t.scale>=bq&&t.scale<=Nq||isNaN(t.scale))&&(t.scale=1),(t.translate>=jq&&t.translate<=_q||isNaN(t.translate))&&(t.translate=0)}function u0(t,e,r,n){f4(t.x,e.x,r.x,n?n.originX:void 0),f4(t.y,e.y,r.y,n?n.originY:void 0)}function m4(t,e,r){t.min=r.min+e.min,t.max=t.min+Ci(e)}function Sq(t,e,r){m4(t.x,e.x,r.x),m4(t.y,e.y,r.y)}function p4(t,e,r){t.min=e.min-r.min,t.max=t.min+Ci(e)}function h0(t,e,r){p4(t.x,e.x,r.x),p4(t.y,e.y,r.y)}function Vo(t){return[t("x"),t("y")]}const Q8=({current:t})=>t?t.ownerDocument.defaultView:null,x4=(t,e)=>Math.abs(t-e);function Aq(t,e){const r=x4(t.x,e.x),n=x4(t.y,e.y);return Math.sqrt(r**2+n**2)}class eE{constructor(e,r,{transformPagePoint:n,contextWindow:a=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=kv(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,y=Aq(x.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!y)return;const{point:w}=x,{timestamp:j}=za;this.history.push({...w,timestamp:j});const{onStart:C,onMove:S}=this.handlers;p||(C&&C(this.lastMoveEvent,x),this.startEvent=this.lastMoveEvent),S&&S(this.lastMoveEvent,x)},this.handlePointerMove=(x,p)=>{this.lastMoveEvent=x,this.lastMoveEventInfo=Ev(p,this.transformPagePoint),ms.update(this.updatePoint,!0)},this.handlePointerUp=(x,p)=>{this.end();const{onEnd:y,onSessionEnd:w,resumeAnimation:j}=this.handlers;if(this.dragSnapToOrigin&&j&&j(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=kv(x.type==="pointercancel"?this.lastMoveEventInfo:Ev(p,this.transformPagePoint),this.history);this.startEvent&&y&&y(x,C),w&&w(x,C)},!gb(e))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=n,this.distanceThreshold=o,this.contextWindow=a||window;const l=Y0(e),c=Ev(l,this.transformPagePoint),{point:u}=c,{timestamp:h}=za;this.history=[{...u,timestamp:h}];const{onSessionStart:m}=r;m&&m(e,kv(c,this.history)),this.removeListeners=W0(d0(this.contextWindow,"pointermove",this.handlePointerMove),d0(this.contextWindow,"pointerup",this.handlePointerUp),d0(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),cu(this.updatePoint)}}function Ev(t,e){return e?{point:e(t.point)}:t}function g4(t,e){return{x:t.x-e.x,y:t.y-e.y}}function kv({point:t},e){return{point:t,delta:g4(t,tE(e)),offset:g4(t,Eq(e)),velocity:kq(e,.1)}}function Eq(t){return t[0]}function tE(t){return t[t.length-1]}function kq(t,e){if(t.length<2)return{x:0,y:0};let r=t.length-1,n=null;const a=tE(t);for(;r>=0&&(n=t[r],!(a.timestamp-n.timestamp>ac(e)));)r--;if(!n)return{x:0,y:0};const i=Ho(a.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const o={x:(a.x-n.x)/i,y:(a.y-n.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Pq(t,{min:e,max:r},n){return e!==void 0&&t<e?t=n?Cs(e,t,n.min):Math.max(t,e):r!==void 0&&t>r&&(t=n?Cs(r,t,n.max):Math.min(t,r)),t}function v4(t,e,r){return{min:e!==void 0?t.min+e:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function Tq(t,{top:e,left:r,bottom:n,right:a}){return{x:v4(t.x,r,a),y:v4(t.y,e,n)}}function y4(t,e){let r=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([r,n]=[n,r]),{min:r,max:n}}function Iq(t,e){return{x:y4(t.x,e.x),y:y4(t.y,e.y)}}function Dq(t,e){let r=.5;const n=Ci(t),a=Ci(e);return a>n?r=_0(e.min,e.max-n,t.min):n>a&&(r=_0(t.min,t.max-a,e.min)),ad(0,1,r)}function Oq(t,e){const r={};return e.min!==void 0&&(r.min=e.min-t.min),e.max!==void 0&&(r.max=e.max-t.min),r}const Ey=.35;function Rq(t=Ey){return t===!1?t=0:t===!0&&(t=Ey),{x:w4(t,"left","right"),y:w4(t,"top","bottom")}}function w4(t,e,r){return{min:b4(t,e),max:b4(t,r)}}function b4(t,e){return typeof t=="number"?t:t[e]||0}const Lq=new WeakMap;class Fq{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=qs(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:r=!1,distanceThreshold:n}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const i=m=>{const{dragSnapToOrigin:x}=this.getProps();x?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(Y0(m).point)},o=(m,x)=>{const{drag:p,dragPropagation:y,onDragStart:w}=this.getProps();if(p&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=VV(p),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=x,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Vo(C=>{let S=this.getAxisMotionValue(C).get()||0;if(ic.test(S)){const{projection:k}=this.visualElement;if(k&&k.layout){const P=k.layout.layoutBox[C];P&&(S=Ci(P)*(parseFloat(S)/100))}}this.originPoint[C]=S}),w&&ms.postRender(()=>w(m,x)),Sy(this.visualElement,"transform");const{animationState:j}=this.visualElement;j&&j.setActive("whileDrag",!0)},l=(m,x)=>{this.latestPointerEvent=m,this.latestPanInfo=x;const{dragPropagation:p,dragDirectionLock:y,onDirectionLock:w,onDrag:j}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:C}=x;if(y&&this.currentDirection===null){this.currentDirection=Mq(C),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",x.point,C),this.updateAxis("y",x.point,C),this.visualElement.render(),j&&j(m,x)},c=(m,x)=>{this.latestPointerEvent=m,this.latestPanInfo=x,this.stop(m,x),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>Vo(m=>this.getAnimationState(m)==="paused"&&this.getAxisMotionValue(m).animation?.play()),{dragSnapToOrigin:h}=this.getProps();this.panSession=new eE(e,{onSessionStart:i,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:n,contextWindow:Q8(this.visualElement)})}stop(e,r){const n=e||this.latestPointerEvent,a=r||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!a||!n)return;const{velocity:o}=a;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&ms.postRender(()=>l(n,a))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(e,r,n){const{drag:a}=this.getProps();if(!n||!sx(e,a,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=Pq(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,a=this.constraints;e&&jf(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&n?this.constraints=Tq(n.layoutBox,e):this.constraints=!1,this.elastic=Rq(r),a!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Vo(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=Oq(n.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!jf(e))return!1;const n=e.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const i=Bz(n,a.root,this.visualElement.getTransformPagePoint());let o=Iq(a.layout.layoutBox,i);if(r){const l=r(Lz(o));this.hasMutatedConstraints=!!l,l&&(o=M8(l))}return o}startAnimation(e){const{drag:r,dragMomentum:n,dragElastic:a,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=Vo(h=>{if(!sx(h,r,this.currentDirection))return;let m=c&&c[h]||{};o&&(m={min:0,max:0});const x=a?200:1e6,p=a?40:1e7,y={type:"inertia",velocity:n?e[h]:0,bounceStiffness:x,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...m};return this.startAxisValueAnimation(h,y)});return Promise.all(u).then(l)}startAxisValueAnimation(e,r){const n=this.getAxisMotionValue(e);return Sy(this.visualElement,e),n.start(Ab(e,n,0,r,this.visualElement,!1))}stopAnimation(){Vo(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Vo(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const r=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),a=n[r];return a||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Vo(r=>{const{drag:n}=this.getProps();if(!sx(r,n,this.currentDirection))return;const{projection:a}=this.visualElement,i=this.getAxisMotionValue(r);if(a&&a.layout){const{min:o,max:l}=a.layout.layoutBox[r];i.set(e[r]-Cs(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!jf(r)||!n||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};Vo(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();a[o]=Dq({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Vo(o=>{if(!sx(o,e,null))return;const l=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];l.set(Cs(c,u,a[o]))})}addListeners(){if(!this.visualElement.current)return;Lq.set(this.visualElement,this);const e=this.visualElement.current,r=d0(e,"pointerdown",c=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();jf(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,i=a.addEventListener("measure",n);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),ms.read(n);const o=k0(window,"resize",()=>this.scalePositionWithinConstraints()),l=a.addEventListener("didUpdate",(({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Vo(h=>{const m=this.getAxisMotionValue(h);m&&(this.originPoint[h]+=c[h].translate,m.set(m.get()+c[h].translate))}),this.visualElement.render())}));return()=>{o(),r(),i(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:a=!1,dragConstraints:i=!1,dragElastic:o=Ey,dragMomentum:l=!0}=e;return{...e,drag:r,dragDirectionLock:n,dragPropagation:a,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function sx(t,e,r){return(e===!0||e===t)&&(r===null||r===t)}function Mq(t,e=10){let r=null;return Math.abs(t.y)>e?r="y":Math.abs(t.x)>e&&(r="x"),r}class Bq extends vu{constructor(e){super(e),this.removeGroupControls=Yo,this.removeListeners=Yo,this.controls=new Fq(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Yo}unmount(){this.removeGroupControls(),this.removeListeners()}}const N4=t=>(e,r)=>{t&&ms.postRender(()=>t(e,r))};class Uq extends vu{constructor(){super(...arguments),this.removePointerDownListener=Yo}onPointerDown(e){this.session=new eE(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Q8(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:n,onPanEnd:a}=this.node.getProps();return{onSessionStart:N4(e),onStart:N4(r),onMove:n,onEnd:(i,o)=>{delete this.session,a&&ms.postRender(()=>a(i,o))}}}mount(){this.removePointerDownListener=d0(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Sx={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function j4(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const $m={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(jr.test(t))t=parseFloat(t);else return t;const r=j4(t,e.target.x),n=j4(t,e.target.y);return`${r}% ${n}%`}},$q={correct:(t,{treeScale:e,projectionDelta:r})=>{const n=t,a=du.parse(t);if(a.length>5)return n;const i=du.createTransformer(t),o=typeof a[0]!="number"?1:0,l=r.x.scale*e.x,c=r.y.scale*e.y;a[0+o]/=l,a[1+o]/=c;const u=Cs(l,c,.5);return typeof a[2+o]=="number"&&(a[2+o]/=u),typeof a[3+o]=="number"&&(a[3+o]/=u),i(a)}};let Pv=!1;class Vq extends N.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n,layoutId:a}=this.props,{projection:i}=e;dz(zq),i&&(r.group&&r.group.add(i),n&&n.register&&a&&n.register(i),Pv&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Sx.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:n,drag:a,isPresent:i}=this.props,{projection:o}=n;return o&&(o.isPresent=i,Pv=!0,a||e.layoutDependency!==r||r===void 0||e.isPresent!==i?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||ms.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),xb.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:a}=e;Pv=!0,a&&(a.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(a),n&&n.deregister&&n.deregister(a))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function rE(t){const[e,r]=_8(),n=N.useContext(Kw);return s.jsx(Vq,{...t,layoutGroup:n,switchLayoutGroup:N.useContext(L8),isPresent:e,safeToRemove:r})}const zq={borderRadius:{...$m,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:$m,borderTopRightRadius:$m,borderBottomLeftRadius:$m,borderBottomRightRadius:$m,boxShadow:$q};function qq(t,e,r){const n=hi(t)?t:Wf(t);return n.start(Ab("",n,e,r)),n.animation}const Hq=(t,e)=>t.depth-e.depth;class Wq{constructor(){this.children=[],this.isDirty=!1}add(e){Zw(this.children,e),this.isDirty=!0}remove(e){Jw(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Hq),this.isDirty=!1,this.children.forEach(e)}}function Gq(t,e){const r=Xi.now(),n=({timestamp:a})=>{const i=a-r;i>=e&&(cu(n),t(i-e))};return ms.setup(n,!0),()=>cu(n)}const nE=["TopLeft","TopRight","BottomLeft","BottomRight"],Kq=nE.length,_4=t=>typeof t=="string"?parseFloat(t):t,C4=t=>typeof t=="number"||jr.test(t);function Yq(t,e,r,n,a,i){a?(t.opacity=Cs(0,r.opacity??1,Xq(n)),t.opacityExit=Cs(e.opacity??1,0,Zq(n))):i&&(t.opacity=Cs(e.opacity??1,r.opacity??1,n));for(let o=0;o<Kq;o++){const l=`border${nE[o]}Radius`;let c=S4(e,l),u=S4(r,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||C4(c)===C4(u)?(t[l]=Math.max(Cs(_4(c),_4(u),n),0),(ic.test(u)||ic.test(c))&&(t[l]+="%")):t[l]=u}(e.rotate||r.rotate)&&(t.rotate=Cs(e.rotate||0,r.rotate||0,n))}function S4(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Xq=sE(0,.5,qA),Zq=sE(.5,.95,Yo);function sE(t,e,r){return n=>n<t?0:n>e?1:r(_0(t,e,n))}function A4(t,e){t.min=e.min,t.max=e.max}function $o(t,e){A4(t.x,e.x),A4(t.y,e.y)}function E4(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function k4(t,e,r,n,a){return t-=e,t=l1(t,1/r,n),a!==void 0&&(t=l1(t,1/a,n)),t}function Jq(t,e=0,r=1,n=.5,a,i=t,o=t){if(ic.test(e)&&(e=parseFloat(e),e=Cs(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=Cs(i.min,i.max,n);t===i&&(l-=e),t.min=k4(t.min,e,r,l,a),t.max=k4(t.max,e,r,l,a)}function P4(t,e,[r,n,a],i,o){Jq(t,e[r],e[n],e[a],e.scale,i,o)}const Qq=["x","scaleX","originX"],eH=["y","scaleY","originY"];function T4(t,e,r,n){P4(t.x,e,Qq,r?r.x:void 0,n?n.x:void 0),P4(t.y,e,eH,r?r.y:void 0,n?n.y:void 0)}function I4(t){return t.translate===0&&t.scale===1}function aE(t){return I4(t.x)&&I4(t.y)}function D4(t,e){return t.min===e.min&&t.max===e.max}function tH(t,e){return D4(t.x,e.x)&&D4(t.y,e.y)}function O4(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function iE(t,e){return O4(t.x,e.x)&&O4(t.y,e.y)}function R4(t){return Ci(t.x)/Ci(t.y)}function L4(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class rH{constructor(){this.members=[]}add(e){Zw(this.members,e),e.scheduleRender()}remove(e){if(Jw(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(a=>e===a);if(r===0)return!1;let n;for(let a=r;a>=0;a--){const i=this.members[a];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(e,r){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,r&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:a}=e.options;a===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:n}=e;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function nH(t,e,r){let n="";const a=t.x.translate/e.x,i=t.y.translate/e.y,o=r?.z||0;if((a||i||o)&&(n=`translate3d(${a}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),r){const{transformPerspective:u,rotate:h,rotateX:m,rotateY:x,skewX:p,skewY:y}=r;u&&(n=`perspective(${u}px) ${n}`),h&&(n+=`rotate(${h}deg) `),m&&(n+=`rotateX(${m}deg) `),x&&(n+=`rotateY(${x}deg) `),p&&(n+=`skewX(${p}deg) `),y&&(n+=`skewY(${y}deg) `)}const l=t.x.scale*e.x,c=t.y.scale*e.y;return(l!==1||c!==1)&&(n+=`scale(${l}, ${c})`),n||"none"}const Tv=["","X","Y","Z"],sH=1e3;let aH=0;function Iv(t,e,r,n){const{latestValues:a}=e;a[t]&&(r[t]=a[t],e.setStaticValue(t,0),n&&(n[t]=0))}function oE(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const r=W8(e);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:a,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(r,"transform",ms,!(a||i))}const{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&oE(n)}function lE({attachResizeListener:t,defaultParent:e,measureScroll:r,checkIsScrollRoot:n,resetTransform:a}){return class{constructor(o={},l=e?.()){this.id=aH++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(lH),this.nodes.forEach(hH),this.nodes.forEach(fH),this.nodes.forEach(cH)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new Wq)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new tb),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=j8(o)&&!KV(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),t){let h,m=0;const x=()=>this.root.updateBlockedByResize=!1;ms.read(()=>{m=window.innerWidth}),t(o,()=>{const p=window.innerWidth;p!==m&&(m=p,this.root.updateBlockedByResize=!0,h&&h(),h=Gq(x,250),Sx.hasAnimatedSinceResize&&(Sx.hasAnimatedSinceResize=!1,this.nodes.forEach(B4)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:m,hasRelativeLayoutChanged:x,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||u.getDefaultTransition()||vH,{onLayoutAnimationStart:w,onLayoutAnimationComplete:j}=u.getProps(),C=!this.targetLayout||!iE(this.targetLayout,p),S=!m&&x;if(this.options.layoutRoot||this.resumeFrom||S||m&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const k={...mb(y,"layout"),onPlay:w,onComplete:j};(u.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k),this.setAnimationOrigin(h,S)}else m||B4(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),cu(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(mH),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&oE(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const m=this.path[h];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(F4);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(M4);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(uH),this.nodes.forEach(iH),this.nodes.forEach(oH)):this.nodes.forEach(M4),this.clearAllSnapshots();const l=Xi.now();za.delta=ad(0,1e3/60,l-za.timestamp),za.timestamp=l,za.isProcessing=!0,wv.update.process(za),wv.preRender.process(za),wv.render.process(za),za.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,xb.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(dH),this.sharedNodes.forEach(pH)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ms.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ms.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ci(this.snapshot.measuredBox.x)&&!Ci(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=qs(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const c=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!a)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!aE(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;o&&this.instance&&(l||th(this.latestValues)||h)&&(a(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),yH(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return qs();const l=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(wH))){const{scroll:u}=this.root;u&&(_f(l.x,u.offset.x),_f(l.y,u.offset.y))}return l}removeElementScroll(o){const l=qs();if($o(l,o),this.scroll?.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:h,options:m}=u;u!==this.root&&h&&m.layoutScroll&&(h.wasRoot&&$o(l,o),_f(l.x,h.offset.x),_f(l.y,h.offset.y))}return l}applyTransform(o,l=!1){const c=qs();$o(c,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];!l&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Cf(c,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),th(h.latestValues)&&Cf(c,h.latestValues)}return th(this.latestValues)&&Cf(c,this.latestValues),c}removeTransform(o){const l=qs();$o(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!th(u.latestValues))continue;Ny(u.latestValues)&&u.updateSnapshot();const h=qs(),m=u.measurePageBox();$o(h,m),T4(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return th(this.latestValues)&&T4(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==za.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:m}=this.options;if(!(!this.layout||!(h||m))){if(this.resolvedRelativeTargetAt=za.timestamp,!this.targetDelta&&!this.relativeTarget){const x=this.getClosestProjectingParent();x&&x.layout&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=qs(),this.relativeTargetOrigin=qs(),h0(this.relativeTargetOrigin,this.layout.layoutBox,x.layout.layoutBox),$o(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=qs(),this.targetWithTransforms=qs()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Sq(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):$o(this.target,this.layout.layoutBox),U8(this.target,this.targetDelta)):$o(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const x=this.getClosestProjectingParent();x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=qs(),this.relativeTargetOrigin=qs(),h0(this.relativeTargetOrigin,this.target,x.target),$o(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Ny(this.parent.latestValues)||B8(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===za.timestamp&&(c=!1),c)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;$o(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,x=this.treeScale.y;Mz(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=qs());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(E4(this.prevProjectionDelta.x,this.projectionDelta.x),E4(this.prevProjectionDelta.y,this.projectionDelta.y)),u0(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==x||!L4(this.projectionDelta.x,this.prevProjectionDelta.x)||!L4(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Sf(),this.projectionDelta=Sf(),this.projectionDeltaWithTransform=Sf()}setAnimationOrigin(o,l=!1){const c=this.snapshot,u=c?c.latestValues:{},h={...this.latestValues},m=Sf();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const x=qs(),p=c?c.source:void 0,y=this.layout?this.layout.source:void 0,w=p!==y,j=this.getStack(),C=!j||j.members.length<=1,S=!!(w&&!C&&this.options.crossfade===!0&&!this.path.some(gH));this.animationProgress=0;let k;this.mixTargetDelta=P=>{const O=P/1e3;U4(m.x,o.x,O),U4(m.y,o.y,O),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(h0(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),xH(this.relativeTarget,this.relativeTargetOrigin,x,O),k&&tH(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=qs()),$o(k,this.relativeTarget)),w&&(this.animationValues=h,Yq(h,u,this.latestValues,O,S,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=O},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(cu(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ms.update(()=>{Sx.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Wf(0)),this.currentAnimation=qq(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(sH),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:h}=o;if(!(!l||!c||!u)){if(this!==o&&this.layout&&u&&cE(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||qs();const m=Ci(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+m;const x=Ci(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+x}$o(l,c),Cf(l,h),u0(this.projectionDeltaWithTransform,this.layoutCorrected,l,h)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new rH),this.sharedNodes.get(o).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&Iv("z",o,u,this.animationValues);for(let h=0;h<Tv.length;h++)Iv(`rotate${Tv[h]}`,o,u,this.animationValues),Iv(`skew${Tv[h]}`,o,u,this.animationValues);o.render();for(const h in u)o.setStaticValue(h,u[h]),this.animationValues&&(this.animationValues[h]=u[h]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Cx(l?.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Cx(l?.pointerEvents)||""),this.hasProjected&&!th(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const h=u.animationValues||u.latestValues;this.applyTransformsToTarget();let m=nH(this.projectionDeltaWithTransform,this.treeScale,h);c&&(m=c(h,m)),o.transform=m;const{x,y:p}=this.projectionDelta;o.transformOrigin=`${x.origin*100}% ${p.origin*100}% 0`,u.animationValues?o.opacity=u===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:o.opacity=u===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const y in E0){if(h[y]===void 0)continue;const{correct:w,applyTo:j,isCSSVariable:C}=E0[y],S=m==="none"?h[y]:w(h[y],u);if(j){const k=j.length;for(let P=0;P<k;P++)o[j[P]]=S}else C?this.options.visualElement.renderState.vars[y]=S:o[y]=S}this.options.layoutId&&(o.pointerEvents=u===this?Cx(l?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(F4),this.root.sharedNodes.clear()}}}function iH(t){t.updateLayout()}function oH(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:n}=t.layout,{animationType:a}=t.options,i=e.source!==t.layout.source;a==="size"?Vo(h=>{const m=i?e.measuredBox[h]:e.layoutBox[h],x=Ci(m);m.min=r[h].min,m.max=m.min+x}):cE(a,e.layoutBox,r)&&Vo(h=>{const m=i?e.measuredBox[h]:e.layoutBox[h],x=Ci(r[h]);m.max=m.min+x,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+x)});const o=Sf();u0(o,r,e.layoutBox);const l=Sf();i?u0(l,t.applyTransform(n,!0),e.measuredBox):u0(l,r,e.layoutBox);const c=!aE(o);let u=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:m,layout:x}=h;if(m&&x){const p=qs();h0(p,e.layoutBox,m.layoutBox);const y=qs();h0(y,r,x.layoutBox),iE(p,y)||(u=!0),h.options.layoutRoot&&(t.relativeTarget=y,t.relativeTargetOrigin=p,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:l,layoutDelta:o,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function lH(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function cH(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function dH(t){t.clearSnapshot()}function F4(t){t.clearMeasurements()}function M4(t){t.isLayoutDirty=!1}function uH(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function B4(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function hH(t){t.resolveTargetDelta()}function fH(t){t.calcProjection()}function mH(t){t.resetSkewAndRotation()}function pH(t){t.removeLeadSnapshot()}function U4(t,e,r){t.translate=Cs(e.translate,0,r),t.scale=Cs(e.scale,1,r),t.origin=e.origin,t.originPoint=e.originPoint}function $4(t,e,r,n){t.min=Cs(e.min,r.min,n),t.max=Cs(e.max,r.max,n)}function xH(t,e,r,n){$4(t.x,e.x,r.x,n),$4(t.y,e.y,r.y,n)}function gH(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const vH={duration:.45,ease:[.4,0,.1,1]},V4=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),z4=V4("applewebkit/")&&!V4("chrome/")?Math.round:Yo;function q4(t){t.min=z4(t.min),t.max=z4(t.max)}function yH(t){q4(t.x),q4(t.y)}function cE(t,e,r){return t==="position"||t==="preserve-aspect"&&!Cq(R4(e),R4(r),.2)}function wH(t){return t!==t.root&&t.scroll?.wasRoot}const bH=lE({attachResizeListener:(t,e)=>k0(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Dv={current:void 0},dE=lE({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Dv.current){const t=new bH({});t.mount(window),t.setOptions({layoutScroll:!0}),Dv.current=t}return Dv.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),NH={pan:{Feature:Uq},drag:{Feature:Bq,ProjectionNode:dE,MeasureLayout:rE}};function H4(t,e,r){const{props:n}=t;t.animationState&&n.whileHover&&t.animationState.setActive("whileHover",r==="Start");const a="onHover"+r,i=n[a];i&&ms.postRender(()=>i(e,Y0(e)))}class jH extends vu{mount(){const{current:e}=this.node;e&&(this.unmount=zV(e,(r,n)=>(H4(this.node,n,"Start"),a=>H4(this.node,a,"End"))))}unmount(){}}class _H extends vu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=W0(k0(this.node.current,"focus",()=>this.onFocus()),k0(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function W4(t,e,r){const{props:n}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&n.whileTap&&t.animationState.setActive("whileTap",r==="Start");const a="onTap"+(r==="End"?"":r),i=n[a];i&&ms.postRender(()=>i(e,Y0(e)))}class CH extends vu{mount(){const{current:e}=this.node;e&&(this.unmount=GV(e,(r,n)=>(W4(this.node,n,"Start"),(a,{success:i})=>W4(this.node,a,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const ky=new WeakMap,Ov=new WeakMap,SH=t=>{const e=ky.get(t.target);e&&e(t)},AH=t=>{t.forEach(SH)};function EH({root:t,...e}){const r=t||document;Ov.has(r)||Ov.set(r,{});const n=Ov.get(r),a=JSON.stringify(e);return n[a]||(n[a]=new IntersectionObserver(AH,{root:t,...e})),n[a]}function kH(t,e,r){const n=EH(e);return ky.set(t,r),n.observe(t),()=>{ky.delete(t),n.unobserve(t)}}const PH={some:0,all:1};class TH extends vu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:n,amount:a="some",once:i}=e,o={root:r?r.current:void 0,rootMargin:n,threshold:typeof a=="number"?a:PH[a]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:m}=this.node.getProps(),x=u?h:m;x&&x(c)};return kH(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some(IH(e,r))&&this.startObserver()}unmount(){}}function IH({viewport:t={}},{viewport:e={}}={}){return r=>t[r]!==e[r]}const DH={inView:{Feature:TH},tap:{Feature:CH},focus:{Feature:_H},hover:{Feature:jH}},OH={layout:{ProjectionNode:dE,MeasureLayout:rE}},RH={...yq,...DH,...NH,...OH},js=Rz(RH,Kz);function er({className:t,...e}){return s.jsx("div",{"data-slot":"card",className:xr("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",t),...e})}function LH({scannedMedications:t,scanType:e,patients:r,onSelectExistingPatient:n,onCreateNewPatient:a,onCancel:i}){const[o,l]=N.useState(""),c=[{id:"1",firstName:"Sarah",lastName:"Johnson",dateOfBirth:"1985-06-15",address:"456 Oak Ave, Springfield, IL 62704"},{id:"2",firstName:"Michael",lastName:"Chen",dateOfBirth:"1972-11-03",address:"789 Pine St, Springfield, IL 62701"},{id:"3",firstName:"Emma",lastName:"Williams",dateOfBirth:"1990-03-22",address:"321 Elm Rd, Springfield, IL 62702"}],u=r&&r.length>0?r:c,h=o?u.filter(x=>x.firstName.toLowerCase().includes(o.toLowerCase())||x.lastName.toLowerCase().includes(o.toLowerCase())):u,m=x=>{if(!x)return"-";const p=new Date,y=new Date(x);let w=p.getFullYear()-y.getFullYear();const j=p.getMonth()-y.getMonth();return(j<0||j===0&&p.getDate()<y.getDate())&&w--,w};return s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col",children:[s.jsxs("div",{className:"p-6 border-b border-slate-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Add Medication To Patient"}),s.jsx("button",{onClick:i,className:"w-10 h-10 rounded-xl hover:bg-slate-100 flex items-center justify-center transition-colors","aria-label":"Close",children:s.jsx(ps,{className:"w-5 h-5 text-slate-600"})})]}),s.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 rounded-xl p-4",children:[s.jsxs("p",{className:"text-sm text-emerald-800",children:[s.jsxs("strong",{children:[t.length," medication",t.length>1?"s":""]})," scanned via ",e]}),s.jsx("div",{className:"mt-2 space-y-1",children:t.map((x,p)=>s.jsxs("div",{className:"text-sm text-emerald-700",children:[" ",x.name||"Unknown medication"," ",x.dosage?`(${x.dosage})`:""]},p))})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[s.jsx(er,{className:"p-5 cursor-pointer hover:shadow-lg hover:border-[#0966CC] transition-all group",onClick:a,children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-[#E0F2FE] flex items-center justify-center group-hover:scale-110 transition-transform",children:s.jsx(Da,{className:"w-6 h-6 text-[#0966CC]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-slate-900 mb-1",children:"Create New Patient Chart"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Start a new patient chart with these scanned medications"})]}),s.jsx(Xr,{className:"w-5 h-5 text-slate-400 group-hover:text-[#0966CC] transition-colors"})]})}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex-1 h-px bg-slate-200"}),s.jsx("span",{className:"text-sm text-slate-500 font-medium",children:"OR"}),s.jsx("div",{className:"flex-1 h-px bg-slate-200"})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-700 uppercase tracking-wide mb-3",children:"Add to Existing Patient"}),s.jsxs("div",{className:"relative mb-4",children:[s.jsx(Zi,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),s.jsx(Ze,{type:"text",placeholder:"Search patients by name...",value:o,onChange:x=>l(x.target.value),className:"pl-10"})]}),s.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:h.length===0?s.jsxs("div",{className:"text-center py-8 text-slate-500",children:[s.jsx(Bn,{className:"w-12 h-12 mx-auto mb-2 text-slate-300"}),s.jsx("p",{className:"text-sm",children:"No patients found"})]}):h.map(x=>s.jsx(er,{className:"p-4 cursor-pointer hover:shadow-md hover:border-[#0966CC] transition-all",onClick:()=>n(x.id),children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center flex-shrink-0",children:s.jsx(Bn,{className:"w-5 h-5 text-slate-600"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("h4",{className:"font-semibold text-slate-900 truncate",children:[x.firstName," ",x.lastName]}),s.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs text-slate-600",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Zo,{className:"w-3 h-3"}),"Age ",m(x.dateOfBirth)]}),x.address&&s.jsxs("span",{className:"flex items-center gap-1 truncate",children:[s.jsx(Jo,{className:"w-3 h-3 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:x.address})]})]})]}),s.jsx(Xr,{className:"w-5 h-5 text-slate-400 flex-shrink-0"})]})},x.id))})]})]}),s.jsx("div",{className:"p-6 border-t border-slate-200",children:s.jsx(de,{onClick:i,variant:"outline",className:"w-full",children:"Cancel"})})]})})}function FH(t,e){var r=Object.setPrototypeOf;r?r(t,e):t.__proto__=e}function MH(t,e){e===void 0&&(e=t.constructor);var r=Error.captureStackTrace;r&&r(t,e)}var BH=(function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(a[o]=i[o])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),UH=(function(t){BH(e,t);function e(r,n){var a=this.constructor,i=t.call(this,r,n)||this;return Object.defineProperty(i,"name",{value:a.name,enumerable:!1,configurable:!0}),FH(i,a.prototype),MH(i),i}return e})(Error),$H=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),eo=(function(t){$H(e,t);function e(r){r===void 0&&(r=void 0);var n=t.call(this,r)||this;return n.message=r,n}return e.prototype.getKind=function(){var r=this.constructor;return r.kind},e.kind="Exception",e})(UH),VH=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),jl=(function(t){VH(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArgumentException",e})(eo),zH=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),fr=(function(t){zH(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e})(eo),qH=(function(){function t(e){if(this.binarizer=e,e===null)throw new fr("Binarizer must be non-null.")}return t.prototype.getWidth=function(){return this.binarizer.getWidth()},t.prototype.getHeight=function(){return this.binarizer.getHeight()},t.prototype.getBlackRow=function(e,r){return this.binarizer.getBlackRow(e,r)},t.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},t.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},t.prototype.crop=function(e,r,n,a){var i=this.binarizer.getLuminanceSource().crop(e,r,n,a);return new t(this.binarizer.createBinarizer(i))},t.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},t.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new t(this.binarizer.createBinarizer(e))},t.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new t(this.binarizer.createBinarizer(e))},t.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},t})(),HH=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),qa=(function(t){HH(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e})(eo),WH=(function(){function t(e){this.source=e}return t.prototype.getLuminanceSource=function(){return this.source},t.prototype.getWidth=function(){return this.source.getWidth()},t.prototype.getHeight=function(){return this.source.getHeight()},t})(),Yn=(function(){function t(){}return t.arraycopy=function(e,r,n,a,i){for(;i--;)n[a++]=e[r++]},t.currentTimeMillis=function(){return Date.now()},t})(),GH=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Eb=(function(t){GH(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e})(eo),KH=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),G4=(function(t){KH(e,t);function e(r,n){r===void 0&&(r=void 0),n===void 0&&(n=void 0);var a=t.call(this,n)||this;return a.index=r,a.message=n,a}return e.kind="ArrayIndexOutOfBoundsException",e})(Eb),YH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ji=(function(){function t(){}return t.fill=function(e,r){for(var n=0,a=e.length;n<a;n++)e[n]=r},t.fillWithin=function(e,r,n,a){t.rangeCheck(e.length,r,n);for(var i=r;i<n;i++)e[i]=a},t.rangeCheck=function(e,r,n){if(r>n)throw new fr("fromIndex("+r+") > toIndex("+n+")");if(r<0)throw new G4(r);if(n>e)throw new G4(n)},t.asList=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e},t.create=function(e,r,n){var a=Array.from({length:e});return a.map(function(i){return Array.from({length:r}).fill(n)})},t.createInt32Array=function(e,r,n){var a=Array.from({length:e});return a.map(function(i){return Int32Array.from({length:r}).fill(n)})},t.equals=function(e,r){if(!e||!r||!e.length||!r.length||e.length!==r.length)return!1;for(var n=0,a=e.length;n<a;n++)if(e[n]!==r[n])return!1;return!0},t.hashCode=function(e){var r,n;if(e===null)return 0;var a=1;try{for(var i=YH(e),o=i.next();!o.done;o=i.next()){var l=o.value;a=31*a+l}}catch(c){r={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a},t.fillUint8Array=function(e,r){for(var n=0;n!==e.length;n++)e[n]=r},t.copyOf=function(e,r){return e.slice(0,r)},t.copyOfUint8Array=function(e,r){if(e.length<=r){var n=new Uint8Array(r);return n.set(e),n}return e.slice(0,r)},t.copyOfRange=function(e,r,n){var a=n-r,i=new Int32Array(a);return Yn.arraycopy(e,r,i,0,a),i},t.binarySearch=function(e,r,n){n===void 0&&(n=t.numberComparator);for(var a=0,i=e.length-1;a<=i;){var o=i+a>>1,l=n(r,e[o]);if(l>0)a=o+1;else if(l<0)i=o-1;else return o}return-a-1},t.numberComparator=function(e,r){return e-r},t})(),Jr=(function(){function t(){}return t.numberOfTrailingZeros=function(e){var r;if(e===0)return 32;var n=31;return r=e<<16,r!==0&&(n-=16,e=r),r=e<<8,r!==0&&(n-=8,e=r),r=e<<4,r!==0&&(n-=4,e=r),r=e<<2,r!==0&&(n-=2,e=r),n-(e<<1>>>31)},t.numberOfLeadingZeros=function(e){if(e===0)return 32;var r=1;return e>>>16||(r+=16,e<<=16),e>>>24||(r+=8,e<<=8),e>>>28||(r+=4,e<<=4),e>>>30||(r+=2,e<<=2),r-=e>>>31,r},t.toHexString=function(e){return e.toString(16)},t.toBinaryString=function(e){return String(parseInt(String(e),2))},t.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},t.truncDivision=function(e,r){return Math.trunc(e/r)},t.parseInt=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t.MIN_VALUE_32_BITS=-2147483648,t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t})(),Oa=(function(){function t(e,r){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,r==null?this.bits=t.makeArray(e):this.bits=r)}return t.prototype.getSize=function(){return this.size},t.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},t.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var r=t.makeArray(e);Yn.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}},t.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},t.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},t.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},t.prototype.getNextSet=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,a=Math.floor(e/32),i=n[a];i&=~((1<<(e&31))-1);for(var o=n.length;i===0;){if(++a===o)return r;i=n[a]}var l=a*32+Jr.numberOfTrailingZeros(i);return l>r?r:l},t.prototype.getNextUnset=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,a=Math.floor(e/32),i=~n[a];i&=~((1<<(e&31))-1);for(var o=n.length;i===0;){if(++a===o)return r;i=~n[a]}var l=a*32+Jr.numberOfTrailingZeros(i);return l>r?r:l},t.prototype.setBulk=function(e,r){this.bits[Math.floor(e/32)]=r},t.prototype.setRange=function(e,r){if(r<e||e<0||r>this.size)throw new fr;if(r!==e){r--;for(var n=Math.floor(e/32),a=Math.floor(r/32),i=this.bits,o=n;o<=a;o++){var l=o>n?0:e&31,c=o<a?31:r&31,u=(2<<c)-(1<<l);i[o]|=u}}},t.prototype.clear=function(){for(var e=this.bits.length,r=this.bits,n=0;n<e;n++)r[n]=0},t.prototype.isRange=function(e,r,n){if(r<e||e<0||r>this.size)throw new fr;if(r===e)return!0;r--;for(var a=Math.floor(e/32),i=Math.floor(r/32),o=this.bits,l=a;l<=i;l++){var c=l>a?0:e&31,u=l<i?31:r&31,h=(2<<u)-(1<<c)&4294967295;if((o[l]&h)!==(n?h:0))return!1}return!0},t.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},t.prototype.appendBits=function(e,r){if(r<0||r>32)throw new fr("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(var n=r;n>0;n--)this.appendBit((e>>n-1&1)===1)},t.prototype.appendBitArray=function(e){var r=e.size;this.ensureCapacity(this.size+r);for(var n=0;n<r;n++)this.appendBit(e.get(n))},t.prototype.xor=function(e){if(this.size!==e.size)throw new fr("Sizes don't match");for(var r=this.bits,n=0,a=r.length;n<a;n++)r[n]^=e.bits[n]},t.prototype.toBytes=function(e,r,n,a){for(var i=0;i<a;i++){for(var o=0,l=0;l<8;l++)this.get(e)&&(o|=1<<7-l),e++;r[n+i]=o}},t.prototype.getBitArray=function(){return this.bits},t.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),n=r+1,a=this.bits,i=0;i<n;i++){var o=a[i];o=o>>1&1431655765|(o&1431655765)<<1,o=o>>2&858993459|(o&858993459)<<2,o=o>>4&252645135|(o&252645135)<<4,o=o>>8&16711935|(o&16711935)<<8,o=o>>16&65535|(o&65535)<<16,e[r-i]=o}if(this.size!==n*32){for(var l=n*32-this.size,c=e[0]>>>l,i=1;i<n;i++){var u=e[i];c|=u<<32-l,e[i-1]=c,c=u>>>l}e[n-1]=c}this.bits=e},t.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.size===r.size&&Ji.equals(this.bits,r.bits)},t.prototype.hashCode=function(){return 31*this.size+Ji.hashCode(this.bits)},t.prototype.toString=function(){for(var e="",r=0,n=this.size;r<n;r++)(r&7)===0&&(e+=" "),e+=this.get(r)?"X":".";return e},t.prototype.clone=function(){return new t(this.size,this.bits.slice())},t})(),Py;(function(t){t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ASSUME_GS1=7]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Py||(Py={}));const ss=Py;var XH=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),_t=(function(t){XH(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e})(eo),ZH=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Pn;(function(t){t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR"})(Pn||(Pn={}));var ya=(function(){function t(e,r,n){for(var a,i,o=[],l=3;l<arguments.length;l++)o[l-3]=arguments[l];this.valueIdentifier=e,this.name=n,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=o,t.VALUE_IDENTIFIER_TO_ECI.set(e,this),t.NAME_TO_ECI.set(n,this);for(var c=this.values,u=0,h=c.length;u!==h;u++){var m=c[u];t.VALUES_TO_ECI.set(m,this)}try{for(var x=ZH(o),p=x.next();!p.done;p=x.next()){var y=p.value;t.NAME_TO_ECI.set(y,this)}}catch(w){a={error:w}}finally{try{p&&!p.done&&(i=x.return)&&i.call(x)}finally{if(a)throw a.error}}}return t.prototype.getValueIdentifier=function(){return this.valueIdentifier},t.prototype.getName=function(){return this.name},t.prototype.getValue=function(){return this.values[0]},t.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new _t("incorect value");var r=t.VALUES_TO_ECI.get(e);if(r===void 0)throw new _t("incorect value");return r},t.getCharacterSetECIByName=function(e){var r=t.NAME_TO_ECI.get(e);if(r===void 0)throw new _t("incorect value");return r},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.getName()===r.getName()},t.VALUE_IDENTIFIER_TO_ECI=new Map,t.VALUES_TO_ECI=new Map,t.NAME_TO_ECI=new Map,t.Cp437=new t(Pn.Cp437,Int32Array.from([0,2]),"Cp437"),t.ISO8859_1=new t(Pn.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),t.ISO8859_2=new t(Pn.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),t.ISO8859_3=new t(Pn.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),t.ISO8859_4=new t(Pn.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),t.ISO8859_5=new t(Pn.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),t.ISO8859_6=new t(Pn.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),t.ISO8859_7=new t(Pn.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),t.ISO8859_8=new t(Pn.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),t.ISO8859_9=new t(Pn.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),t.ISO8859_10=new t(Pn.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),t.ISO8859_11=new t(Pn.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),t.ISO8859_13=new t(Pn.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),t.ISO8859_14=new t(Pn.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),t.ISO8859_15=new t(Pn.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),t.ISO8859_16=new t(Pn.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),t.SJIS=new t(Pn.SJIS,20,"SJIS","Shift_JIS"),t.Cp1250=new t(Pn.Cp1250,21,"Cp1250","windows-1250"),t.Cp1251=new t(Pn.Cp1251,22,"Cp1251","windows-1251"),t.Cp1252=new t(Pn.Cp1252,23,"Cp1252","windows-1252"),t.Cp1256=new t(Pn.Cp1256,24,"Cp1256","windows-1256"),t.UnicodeBigUnmarked=new t(Pn.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),t.UTF8=new t(Pn.UTF8,26,"UTF8","UTF-8"),t.ASCII=new t(Pn.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),t.Big5=new t(Pn.Big5,28,"Big5"),t.GB18030=new t(Pn.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),t.EUC_KR=new t(Pn.EUC_KR,30,"EUC_KR","EUC-KR"),t})(),JH=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Ax=(function(t){JH(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e})(eo),oc=(function(){function t(){}return t.decode=function(e,r){var n=this.encodingName(r);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},t.shouldDecodeOnFallback=function(e){return!t.isBrowser()&&e==="ISO-8859-1"},t.encode=function(e,r){var n=this.encodingName(r);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},t.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},t.encodingName=function(e){return typeof e=="string"?e:e.getName()},t.encodingCharacterSet=function(e){return e instanceof ya?e:ya.getCharacterSetECIByName(e)},t.decodeFallback=function(e,r){var n=this.encodingCharacterSet(r);if(t.isDecodeFallbackSupported(n)){for(var a="",i=0,o=e.length;i<o;i++){var l=e[i].toString(16);l.length<2&&(l="0"+l),a+="%"+l}return decodeURIComponent(a)}if(n.equals(ya.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Ax("Encoding "+this.encodingName(r)+" not supported by fallback.")},t.isDecodeFallbackSupported=function(e){return e.equals(ya.UTF8)||e.equals(ya.ISO8859_1)||e.equals(ya.ASCII)},t.encodeFallback=function(e){for(var r=btoa(unescape(encodeURIComponent(e))),n=r.split(""),a=[],i=0;i<n.length;i++)a.push(n[i].charCodeAt(0));return new Uint8Array(a)},t})(),Gn=(function(){function t(){}return t.castAsNonUtf8Char=function(e,r){r===void 0&&(r=null);var n=r?r.getName():this.ISO88591;return oc.decode(new Uint8Array([e]),n)},t.guessEncoding=function(e,r){if(r!=null&&r.get(ss.CHARACTER_SET)!==void 0)return r.get(ss.CHARACTER_SET).toString();for(var n=e.length,a=!0,i=!0,o=!0,l=0,c=0,u=0,h=0,m=0,x=0,p=0,y=0,w=0,j=0,C=0,S=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,k=0;k<n&&(a||i||o);k++){var P=e[k]&255;o&&(l>0?(P&128)===0?o=!1:l--:(P&128)!==0&&((P&64)===0?o=!1:(l++,(P&32)===0?c++:(l++,(P&16)===0?u++:(l++,(P&8)===0?h++:o=!1))))),a&&(P>127&&P<160?a=!1:P>159&&(P<192||P===215||P===247)&&C++),i&&(m>0?P<64||P===127||P>252?i=!1:m--:P===128||P===160||P>239?i=!1:P>160&&P<224?(x++,y=0,p++,p>w&&(w=p)):P>127?(m++,p=0,y++,y>j&&(j=y)):(p=0,y=0))}return o&&l>0&&(o=!1),i&&m>0&&(i=!1),o&&(S||c+u+h>0)?t.UTF8:i&&(t.ASSUME_SHIFT_JIS||w>=3||j>=3)?t.SHIFT_JIS:a&&i?w===2&&x===2||C*10>=n?t.SHIFT_JIS:t.ISO88591:a?t.ISO88591:i?t.SHIFT_JIS:o?t.UTF8:t.PLATFORM_DEFAULT_ENCODING},t.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var a=-1;function i(l,c,u,h,m,x){if(l==="%%")return"%";if(r[++a]!==void 0){l=h?parseInt(h.substr(1)):void 0;var p=m?parseInt(m.substr(1)):void 0,y;switch(x){case"s":y=r[a];break;case"c":y=r[a][0];break;case"f":y=parseFloat(r[a]).toFixed(l);break;case"p":y=parseFloat(r[a]).toPrecision(l);break;case"e":y=parseFloat(r[a]).toExponential(l);break;case"x":y=parseInt(r[a]).toString(p||16);break;case"d":y=parseFloat(parseInt(r[a],p||10).toPrecision(l)).toFixed(0);break}y=typeof y=="object"?JSON.stringify(y):(+y).toString(p);for(var w=parseInt(u),j=u&&u[0]+""=="0"?"0":" ";y.length<w;)y=c!==void 0?y+j:j+y;return y}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,i)},t.getBytes=function(e,r){return oc.encode(e,r)},t.getCharCode=function(e,r){return r===void 0&&(r=0),e.charCodeAt(r)},t.getCharAt=function(e){return String.fromCharCode(e)},t.SHIFT_JIS=ya.SJIS.getName(),t.GB2312="GB2312",t.ISO88591=ya.ISO8859_1.getName(),t.EUC_JP="EUC_JP",t.UTF8=ya.UTF8.getName(),t.PLATFORM_DEFAULT_ENCODING=t.UTF8,t.ASSUME_SHIFT_JIS=!1,t})(),Fn=(function(){function t(e){e===void 0&&(e=""),this.value=e}return t.prototype.enableDecoding=function(e){return this.encoding=e,this},t.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=Gn.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},t.prototype.appendChars=function(e,r,n){for(var a=r;r<r+n;a++)this.append(e[a]);return this},t.prototype.length=function(){return this.value.length},t.prototype.charAt=function(e){return this.value.charAt(e)},t.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},t.prototype.setCharAt=function(e,r){this.value=this.value.substr(0,e)+r+this.value.substr(e+1)},t.prototype.substring=function(e,r){return this.value.substring(e,r)},t.prototype.setLengthToZero=function(){this.value=""},t.prototype.toString=function(){return this.value},t.prototype.insert=function(e,r){this.value=this.value.substr(0,e)+r+this.value.substr(e+r.length)},t})(),hc=(function(){function t(e,r,n,a){if(this.width=e,this.height=r,this.rowSize=n,this.bits=a,r==null&&(r=e),this.height=r,e<1||r<1)throw new fr("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,a==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return t.parseFromBooleanArray=function(e){for(var r=e.length,n=e[0].length,a=new t(n,r),i=0;i<r;i++)for(var o=e[i],l=0;l<n;l++)o[l]&&a.set(l,i);return a},t.parseFromString=function(e,r,n){if(e===null)throw new fr("stringRepresentation cannot be null");for(var a=new Array(e.length),i=0,o=0,l=-1,c=0,u=0;u<e.length;)if(e.charAt(u)===`
`||e.charAt(u)==="\r"){if(i>o){if(l===-1)l=i-o;else if(i-o!==l)throw new fr("row lengths do not match");o=i,c++}u++}else if(e.substring(u,u+r.length)===r)u+=r.length,a[i]=!0,i++;else if(e.substring(u,u+n.length)===n)u+=n.length,a[i]=!1,i++;else throw new fr("illegal character encountered: "+e.substring(u));if(i>o){if(l===-1)l=i-o;else if(i-o!==l)throw new fr("row lengths do not match");c++}for(var h=new t(l,c),m=0;m<i;m++)a[m]&&h.set(Math.floor(m%l),Math.floor(m/l));return h},t.prototype.get=function(e,r){var n=r*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0},t.prototype.set=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295},t.prototype.unset=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)},t.prototype.flip=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295},t.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new fr("input matrix dimensions do not match");for(var r=new Oa(Math.floor(this.width/32)+1),n=this.rowSize,a=this.bits,i=0,o=this.height;i<o;i++)for(var l=i*n,c=e.getRow(i,r).getBitArray(),u=0;u<n;u++)a[l+u]^=c[u]},t.prototype.clear=function(){for(var e=this.bits,r=e.length,n=0;n<r;n++)e[n]=0},t.prototype.setRegion=function(e,r,n,a){if(r<0||e<0)throw new fr("Left and top must be nonnegative");if(a<1||n<1)throw new fr("Height and width must be at least 1");var i=e+n,o=r+a;if(o>this.height||i>this.width)throw new fr("The region must fit inside the matrix");for(var l=this.rowSize,c=this.bits,u=r;u<o;u++)for(var h=u*l,m=e;m<i;m++)c[h+Math.floor(m/32)]|=1<<(m&31)&4294967295},t.prototype.getRow=function(e,r){r==null||r.getSize()<this.width?r=new Oa(this.width):r.clear();for(var n=this.rowSize,a=this.bits,i=e*n,o=0;o<n;o++)r.setBulk(o*32,a[i+o]);return r},t.prototype.setRow=function(e,r){Yn.arraycopy(r.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},t.prototype.rotate180=function(){for(var e=this.getWidth(),r=this.getHeight(),n=new Oa(e),a=new Oa(e),i=0,o=Math.floor((r+1)/2);i<o;i++)n=this.getRow(i,n),a=this.getRow(r-1-i,a),n.reverse(),a.reverse(),this.setRow(i,a),this.setRow(r-1-i,n)},t.prototype.getEnclosingRectangle=function(){for(var e=this.width,r=this.height,n=this.rowSize,a=this.bits,i=e,o=r,l=-1,c=-1,u=0;u<r;u++)for(var h=0;h<n;h++){var m=a[u*n+h];if(m!==0){if(u<o&&(o=u),u>c&&(c=u),h*32<i){for(var x=0;(m<<31-x&4294967295)===0;)x++;h*32+x<i&&(i=h*32+x)}if(h*32+31>l){for(var x=31;!(m>>>x);)x--;h*32+x>l&&(l=h*32+x)}}}return l<i||c<o?null:Int32Array.from([i,o,l-i+1,c-o+1])},t.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,r=this.bits,n=0;n<r.length&&r[n]===0;)n++;if(n===r.length)return null;for(var a=n/e,i=n%e*32,o=r[n],l=0;(o<<31-l&4294967295)===0;)l++;return i+=l,Int32Array.from([i,a])},t.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,r=this.bits,n=r.length-1;n>=0&&r[n]===0;)n--;if(n<0)return null;for(var a=Math.floor(n/e),i=Math.floor(n%e)*32,o=r[n],l=31;!(o>>>l);)l--;return i+=l,Int32Array.from([i,a])},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRowSize=function(){return this.rowSize},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&Ji.equals(this.bits,r.bits)},t.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+Ji.hashCode(this.bits),e},t.prototype.toString=function(e,r,n){return e===void 0&&(e="X "),r===void 0&&(r="  "),n===void 0&&(n=`
`),this.buildToString(e,r,n)},t.prototype.buildToString=function(e,r,n){for(var a=new Fn,i=0,o=this.height;i<o;i++){for(var l=0,c=this.width;l<c;l++)a.append(this.get(l,i)?e:r);a.append(n)}return a.toString()},t.prototype.clone=function(){return new t(this.width,this.height,this.rowSize,this.bits.slice())},t})(),QH=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),et=(function(t){QH(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e})(eo),eW=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),tW=(function(t){eW(e,t);function e(r){var n=t.call(this,r)||this;return n.luminances=e.EMPTY,n.buckets=new Int32Array(e.LUMINANCE_BUCKETS),n}return e.prototype.getBlackRow=function(r,n){var a=this.getLuminanceSource(),i=a.getWidth();n==null||n.getSize()<i?n=new Oa(i):n.clear(),this.initArrays(i);for(var o=a.getRow(r,this.luminances),l=this.buckets,c=0;c<i;c++)l[(o[c]&255)>>e.LUMINANCE_SHIFT]++;var u=e.estimateBlackPoint(l);if(i<3)for(var c=0;c<i;c++)(o[c]&255)<u&&n.set(c);else for(var h=o[0]&255,m=o[1]&255,c=1;c<i-1;c++){var x=o[c+1]&255;(m*4-h-x)/2<u&&n.set(c),h=m,m=x}return n},e.prototype.getBlackMatrix=function(){var r=this.getLuminanceSource(),n=r.getWidth(),a=r.getHeight(),i=new hc(n,a);this.initArrays(n);for(var o=this.buckets,l=1;l<5;l++)for(var c=Math.floor(a*l/5),u=r.getRow(c,this.luminances),h=Math.floor(n*4/5),m=Math.floor(n/5);m<h;m++){var x=u[m]&255;o[x>>e.LUMINANCE_SHIFT]++}for(var p=e.estimateBlackPoint(o),y=r.getMatrix(),l=0;l<a;l++)for(var w=l*n,m=0;m<n;m++){var x=y[w+m]&255;x<p&&i.set(m,l)}return i},e.prototype.createBinarizer=function(r){return new e(r)},e.prototype.initArrays=function(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));for(var n=this.buckets,a=0;a<e.LUMINANCE_BUCKETS;a++)n[a]=0},e.estimateBlackPoint=function(r){for(var n=r.length,a=0,i=0,o=0,l=0;l<n;l++)r[l]>o&&(i=l,o=r[l]),r[l]>a&&(a=r[l]);for(var c=0,u=0,l=0;l<n;l++){var h=l-i,m=r[l]*h*h;m>u&&(c=l,u=m)}if(i>c){var x=i;i=c,c=x}if(c-i<=n/16)throw new et;for(var p=c-1,y=-1,l=c-1;l>i;l--){var w=l-i,m=w*w*(c-l)*(a-r[l]);m>y&&(p=l,y=m)}return p<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e})(WH),rW=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),nW=(function(t){rW(e,t);function e(r){var n=t.call(this,r)||this;return n.matrix=null,n}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var r=this.getLuminanceSource(),n=r.getWidth(),a=r.getHeight();if(n>=e.MINIMUM_DIMENSION&&a>=e.MINIMUM_DIMENSION){var i=r.getMatrix(),o=n>>e.BLOCK_SIZE_POWER;(n&e.BLOCK_SIZE_MASK)!==0&&o++;var l=a>>e.BLOCK_SIZE_POWER;(a&e.BLOCK_SIZE_MASK)!==0&&l++;var c=e.calculateBlackPoints(i,o,l,n,a),u=new hc(n,a);e.calculateThresholdForBlock(i,o,l,n,a,c,u),this.matrix=u}else this.matrix=t.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(r){return new e(r)},e.calculateThresholdForBlock=function(r,n,a,i,o,l,c){for(var u=o-e.BLOCK_SIZE,h=i-e.BLOCK_SIZE,m=0;m<a;m++){var x=m<<e.BLOCK_SIZE_POWER;x>u&&(x=u);for(var p=e.cap(m,2,a-3),y=0;y<n;y++){var w=y<<e.BLOCK_SIZE_POWER;w>h&&(w=h);for(var j=e.cap(y,2,n-3),C=0,S=-2;S<=2;S++){var k=l[p+S];C+=k[j-2]+k[j-1]+k[j]+k[j+1]+k[j+2]}var P=C/25;e.thresholdBlock(r,w,x,P,i,c)}}},e.cap=function(r,n,a){return r<n?n:r>a?a:r},e.thresholdBlock=function(r,n,a,i,o,l){for(var c=0,u=a*o+n;c<e.BLOCK_SIZE;c++,u+=o)for(var h=0;h<e.BLOCK_SIZE;h++)(r[u+h]&255)<=i&&l.set(n+h,a+c)},e.calculateBlackPoints=function(r,n,a,i,o){for(var l=o-e.BLOCK_SIZE,c=i-e.BLOCK_SIZE,u=new Array(a),h=0;h<a;h++){u[h]=new Int32Array(n);var m=h<<e.BLOCK_SIZE_POWER;m>l&&(m=l);for(var x=0;x<n;x++){var p=x<<e.BLOCK_SIZE_POWER;p>c&&(p=c);for(var y=0,w=255,j=0,C=0,S=m*i+p;C<e.BLOCK_SIZE;C++,S+=i){for(var k=0;k<e.BLOCK_SIZE;k++){var P=r[S+k]&255;y+=P,P<w&&(w=P),P>j&&(j=P)}if(j-w>e.MIN_DYNAMIC_RANGE)for(C++,S+=i;C<e.BLOCK_SIZE;C++,S+=i)for(var k=0;k<e.BLOCK_SIZE;k++)y+=r[S+k]&255}var O=y>>e.BLOCK_SIZE_POWER*2;if(j-w<=e.MIN_DYNAMIC_RANGE&&(O=w/2,h>0&&x>0)){var $=(u[h-1][x]+2*u[h][x-1]+u[h-1][x-1])/4;w<$&&(O=$)}u[h][x]=O}}return u},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e})(tW),G1=(function(){function t(e,r){this.width=e,this.height=r}return t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.isCropSupported=function(){return!1},t.prototype.crop=function(e,r,n,a){throw new Ax("This luminance source does not support cropping.")},t.prototype.isRotateSupported=function(){return!1},t.prototype.rotateCounterClockwise=function(){throw new Ax("This luminance source does not support rotation by 90 degrees.")},t.prototype.rotateCounterClockwise45=function(){throw new Ax("This luminance source does not support rotation by 45 degrees.")},t.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),r=new Fn,n=0;n<this.height;n++){for(var a=this.getRow(n,e),i=0;i<this.width;i++){var o=a[i]&255,l=void 0;o<64?l="#":o<128?l="+":o<192?l=".":l=" ",r.append(l)}r.append(`
`)}return r.toString()},t})(),sW=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),kb=(function(t){sW(e,t);function e(r){var n=t.call(this,r.getWidth(),r.getHeight())||this;return n.delegate=r,n}return e.prototype.getRow=function(r,n){for(var a=this.delegate.getRow(r,n),i=this.getWidth(),o=0;o<i;o++)a[o]=255-(a[o]&255);return a},e.prototype.getMatrix=function(){for(var r=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(n),i=0;i<n;i++)a[i]=255-(r[i]&255);return a},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(r,n,a,i){return new e(this.delegate.crop(r,n,a,i))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e})(G1),aW=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),iW=(function(t){aW(e,t);function e(r){var n=t.call(this,r.width,r.height)||this;return n.canvas=r,n.tempCanvasElement=null,n.buffer=e.makeBufferFromCanvasImageData(r),n}return e.makeBufferFromCanvasImageData=function(r){var n=r.getContext("2d").getImageData(0,0,r.width,r.height);return e.toGrayscaleBuffer(n.data,r.width,r.height)},e.toGrayscaleBuffer=function(r,n,a){for(var i=new Uint8ClampedArray(n*a),o=0,l=0,c=r.length;o<c;o+=4,l++){var u=void 0,h=r[o+3];if(h===0)u=255;else{var m=r[o],x=r[o+1],p=r[o+2];u=306*m+601*x+117*p+512>>10}i[l]=u}return i},e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new fr("Requested row is outside the image: "+r);var a=this.getWidth(),i=r*a;return n===null?n=this.buffer.slice(i,i+a):(n.length<a&&(n=new Uint8ClampedArray(a)),n.set(this.buffer.slice(i,i+a))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,i){return t.prototype.crop.call(this,r,n,a,i),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},e.prototype.rotate=function(r){var n=this.getTempCanvasElement(),a=n.getContext("2d"),i=r*e.DEGREE_TO_RADIANS,o=this.canvas.width,l=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(i))*o+Math.abs(Math.sin(i))*l),u=Math.ceil(Math.abs(Math.sin(i))*o+Math.abs(Math.cos(i))*l);return n.width=c,n.height=u,a.translate(c/2,u/2),a.rotate(i),a.drawImage(this.canvas,o/-2,l/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.prototype.invert=function(){return new kb(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e})(G1),oW=(function(){function t(e,r,n){this.deviceId=e,this.label=r,this.kind="videoinput",this.groupId=n||void 0}return t.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},t})(),ji=function(t,e,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(h){try{u(n.next(h))}catch(m){o(m)}}function c(h){try{u(n.throw(h))}catch(m){o(m)}}function u(h){h.done?i(h.value):a(h.value).then(l,c)}u((n=n.apply(t,e||[])).next())})},_i=function(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(h){return c([u,h])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(i=u[0]&2?a.return:u[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,u[1])).done)return i;switch(a=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(h){u=[6,h],a=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},lW=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},um=(function(){function t(e,r,n){r===void 0&&(r=500),this.reader=e,this.timeBetweenScansMillis=r,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(t.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),t.prototype.listVideoInputDevices=function(){return ji(this,void 0,void 0,function(){var e,r,n,a,i,o,l,c,u,h,m,x;return _i(this,function(p){switch(p.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=p.sent(),r=[];try{for(n=lW(e),a=n.next();!a.done;a=n.next())i=a.value,o=i.kind==="video"?"videoinput":i.kind,o==="videoinput"&&(l=i.deviceId||i.id,c=i.label||"Video device "+(r.length+1),u=i.groupId,h={deviceId:l,label:c,kind:o,groupId:u},r.push(h))}catch(y){m={error:y}}finally{try{a&&!a.done&&(x=n.return)&&x.call(n)}finally{if(m)throw m.error}}return[2,r]}})})},t.prototype.getVideoInputDevices=function(){return ji(this,void 0,void 0,function(){var e;return _i(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=r.sent(),[2,e.map(function(n){return new oW(n.deviceId,n.label)})]}})})},t.prototype.findDeviceById=function(e){return ji(this,void 0,void 0,function(){var r;return _i(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(a){return a.deviceId===e})]:[2,null]}})})},t.prototype.decodeFromInputVideoDevice=function(e,r){return ji(this,void 0,void 0,function(){return _i(this,function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,r){return ji(this,void 0,void 0,function(){var n,a;return _i(this,function(i){switch(i.label){case 0:return this.reset(),e?n={deviceId:{exact:e}}:n={facingMode:"environment"},a={video:n},[4,this.decodeOnceFromConstraints(a,r)];case 1:return[2,i.sent()]}})})},t.prototype.decodeOnceFromConstraints=function(e,r){return ji(this,void 0,void 0,function(){var n;return _i(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=a.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,a.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,r){return ji(this,void 0,void 0,function(){var n,a;return _i(this,function(i){switch(i.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return n=i.sent(),[4,this.decodeOnce(n)];case 2:return a=i.sent(),[2,a]}})})},t.prototype.decodeFromInputVideoDeviceContinuously=function(e,r,n){return ji(this,void 0,void 0,function(){return _i(this,function(a){switch(a.label){case 0:return[4,this.decodeFromVideoDevice(e,r,n)];case 1:return[2,a.sent()]}})})},t.prototype.decodeFromVideoDevice=function(e,r,n){return ji(this,void 0,void 0,function(){var a,i;return _i(this,function(o){switch(o.label){case 0:return e?a={deviceId:{exact:e}}:a={facingMode:"environment"},i={video:a},[4,this.decodeFromConstraints(i,r,n)];case 1:return[2,o.sent()]}})})},t.prototype.decodeFromConstraints=function(e,r,n){return ji(this,void 0,void 0,function(){var a;return _i(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return a=i.sent(),[4,this.decodeFromStream(a,r,n)];case 2:return[2,i.sent()]}})})},t.prototype.decodeFromStream=function(e,r,n){return ji(this,void 0,void 0,function(){var a;return _i(this,function(i){switch(i.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return a=i.sent(),[4,this.decodeContinuously(a,n)];case 2:return[2,i.sent()]}})})},t.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},t.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},t.prototype.attachStreamToVideo=function(e,r){return ji(this,void 0,void 0,function(){var n;return _i(this,function(a){switch(a.label){case 0:return n=this.prepareVideoElement(r),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return a.sent(),[2,n]}})})},t.prototype.playVideoOnLoadAsync=function(e){var r=this;return new Promise(function(n,a){return r.playVideoOnLoad(e,function(){return n()})})},t.prototype.playVideoOnLoad=function(e,r){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",r),this.tryPlayVideo(e)},t.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},t.prototype.tryPlayVideo=function(e){return ji(this,void 0,void 0,function(){return _i(this,function(r){switch(r.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[3,4];case 3:return r.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},t.prototype.getMediaElement=function(e,r){var n=document.getElementById(e);if(!n)throw new jl("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new jl("element with id '"+e+"' must be an "+r+" element");return n},t.prototype.decodeFromImage=function(e,r){if(!e&&!r)throw new jl("either imageElement with a src set or an url must be provided");return r&&!e?this.decodeFromImageUrl(r):this.decodeFromImageElement(e)},t.prototype.decodeFromVideo=function(e,r){if(!e&&!r)throw new jl("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(e)},t.prototype.decodeFromVideoContinuously=function(e,r,n){if(e===void 0&&r===void 0)throw new jl("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrlContinuously(r,n):this.decodeFromVideoElementContinuously(e,n)},t.prototype.decodeFromImageElement=function(e){if(!e)throw new jl("An image element must be provided.");this.reset();var r=this.prepareImageElement(e);this.imageElement=r;var n;return this.isImageLoaded(r)?n=this.decodeOnce(r,!1,!0):n=this._decodeOnLoadImage(r),n},t.prototype.decodeFromVideoElement=function(e){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(r)},t.prototype.decodeFromVideoElementContinuously=function(e,r){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,r)},t.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new jl("A video element must be provided.");this.reset();var r=this.prepareVideoElement(e);return this.videoElement=r,r},t.prototype.decodeFromImageUrl=function(e){if(!e)throw new jl("An URL must be provided.");this.reset();var r=this.prepareImageElement();this.imageElement=r;var n=this._decodeOnLoadImage(r);return r.src=e,n},t.prototype.decodeFromVideoUrl=function(e){if(!e)throw new jl("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),n=this.decodeFromVideoElement(r);return r.src=e,n},t.prototype.decodeFromVideoUrlContinuously=function(e,r){if(!e)throw new jl("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),a=this.decodeFromVideoElementContinuously(n,r);return n.src=e,a},t.prototype._decodeOnLoadImage=function(e){var r=this;return new Promise(function(n,a){r.imageLoadedListener=function(){return r.decodeOnce(e,!1,!0).then(n,a)},e.addEventListener("load",r.imageLoadedListener)})},t.prototype._decodeOnLoadVideo=function(e){return ji(this,void 0,void 0,function(){return _i(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),[4,this.decodeOnce(e)];case 2:return[2,r.sent()]}})})},t.prototype._decodeOnLoadVideoContinuously=function(e,r){return ji(this,void 0,void 0,function(){return _i(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,r),[2]}})})},t.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.prototype.prepareImageElement=function(e){var r;return typeof e>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(r=e),r},t.prototype.prepareVideoElement=function(e){var r;return!e&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(r=e),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},t.prototype.decodeOnce=function(e,r,n){var a=this;r===void 0&&(r=!0),n===void 0&&(n=!0),this._stopAsyncDecode=!1;var i=function(o,l){if(a._stopAsyncDecode){l(new et("Video stream has ended before any code could be detected.")),a._stopAsyncDecode=void 0;return}try{var c=a.decode(e);o(c)}catch(x){var u=r&&x instanceof et,h=x instanceof qa||x instanceof _t,m=h&&n;if(u||m)return setTimeout(i,a._timeBetweenDecodingAttempts,o,l);l(x)}};return new Promise(function(o,l){return i(o,l)})},t.prototype.decodeContinuously=function(e,r){var n=this;this._stopContinuousDecode=!1;var a=function(){if(n._stopContinuousDecode){n._stopContinuousDecode=void 0;return}try{var i=n.decode(e);r(i,null),setTimeout(a,n.timeBetweenScansMillis)}catch(c){r(null,c);var o=c instanceof qa||c instanceof _t,l=c instanceof et;(o||l)&&setTimeout(a,n._timeBetweenDecodingAttempts)}};a()},t.prototype.decode=function(e){var r=this.createBinaryBitmap(e);return this.decodeBitmap(r)},t.prototype._isHTMLVideoElement=function(e){var r=e;return r.videoWidth!==0},t.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);var r=this.getCaptureCanvas(e),n=new iW(r),a=new nW(n);return new qH(a)},t.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var r=this.getCaptureCanvas(e),n=void 0;try{n=r.getContext("2d",{willReadFrequently:!0})}catch{n=r.getContext("2d")}this.captureCanvasContext=n}return this.captureCanvasContext},t.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var r=this.createCaptureCanvas(e);this.captureCanvas=r}return this.captureCanvas},t.prototype.drawFrameOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.drawImageOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},t.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var r=document.createElement("canvas"),n,a;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,a=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,a=e.naturalHeight||e.height)),r.style.width=n+"px",r.style.height=a+"px",r.width=n,r.height=a,r},t.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},t.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},t.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},t.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},t.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},t.prototype.addVideoSource=function(e,r){try{e.srcObject=r}catch{e.src=URL.createObjectURL(r)}},t.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},t})(),to=(function(){function t(e,r,n,a,i,o){n===void 0&&(n=r==null?0:8*r.length),o===void 0&&(o=Yn.currentTimeMillis()),this.text=e,this.rawBytes=r,this.numBits=n,this.resultPoints=a,this.format=i,this.timestamp=o,this.text=e,this.rawBytes=r,n==null?this.numBits=r==null?0:8*r.length:this.numBits=n,this.resultPoints=a,this.format=i,this.resultMetadata=null,o==null?this.timestamp=Yn.currentTimeMillis():this.timestamp=o}return t.prototype.getText=function(){return this.text},t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.getBarcodeFormat=function(){return this.format},t.prototype.getResultMetadata=function(){return this.resultMetadata},t.prototype.putMetadata=function(e,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,r)},t.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},t.prototype.addResultPoints=function(e){var r=this.resultPoints;if(r===null)this.resultPoints=e;else if(e!==null&&e.length>0){var n=new Array(r.length+e.length);Yn.arraycopy(r,0,n,0,r.length),Yn.arraycopy(e,0,n,r.length,e.length),this.resultPoints=n}},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.toString=function(){return this.text},t})(),Ty;(function(t){t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ty||(Ty={}));const Zt=Ty;var Iy;(function(t){t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Iy||(Iy={}));const Ha=Iy;var K1=(function(){function t(e,r,n,a,i,o){i===void 0&&(i=-1),o===void 0&&(o=-1),this.rawBytes=e,this.text=r,this.byteSegments=n,this.ecLevel=a,this.structuredAppendSequenceNumber=i,this.structuredAppendParity=o,this.numBits=e==null?0:8*e.length}return t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.setNumBits=function(e){this.numBits=e},t.prototype.getText=function(){return this.text},t.prototype.getByteSegments=function(){return this.byteSegments},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getErrorsCorrected=function(){return this.errorsCorrected},t.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},t.prototype.getErasures=function(){return this.erasures},t.prototype.setErasures=function(e){this.erasures=e},t.prototype.getOther=function(){return this.other},t.prototype.setOther=function(e){this.other=e},t.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},t.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},t.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},t})(),Qm=(function(){function t(){}return t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new fr;return this.logTable[e]},t.addOrSubtract=function(e,r){return e^r},t})(),ru=(function(){function t(e,r){if(r.length===0)throw new fr;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var a=1;a<n&&r[a]===0;)a++;a===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-a),Yn.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var r=this.coefficients,n;if(e===1){n=0;for(var a=0,i=r.length;a!==i;a++){var o=r[a];n=Qm.addOrSubtract(n,o)}return n}n=r[0];for(var l=r.length,c=this.field,a=1;a<l;a++)n=Qm.addOrSubtract(c.multiply(e,n),r[a]);return n},t.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new fr("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var a=r;r=n,n=a}var i=new Int32Array(n.length),o=n.length-r.length;Yn.arraycopy(n,0,i,0,o);for(var l=o;l<n.length;l++)i[l]=Qm.addOrSubtract(r[l-o],n[l]);return new t(this.field,i)},t.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new fr("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var r=this.coefficients,n=r.length,a=e.coefficients,i=a.length,o=new Int32Array(n+i-1),l=this.field,c=0;c<n;c++)for(var u=r[c],h=0;h<i;h++)o[c+h]=Qm.addOrSubtract(o[c+h],l.multiply(u,a[h]));return new t(l,o)},t.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var r=this.coefficients.length,n=this.field,a=new Int32Array(r),i=this.coefficients,o=0;o<r;o++)a[o]=n.multiply(i[o],e);return new t(n,a)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new fr;if(r===0)return this.field.getZero();for(var n=this.coefficients,a=n.length,i=new Int32Array(a+e),o=this.field,l=0;l<a;l++)i[l]=o.multiply(n[l],r);return new t(o,i)},t.prototype.divide=function(e){if(!this.field.equals(e.field))throw new fr("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new fr("Divide by 0");for(var r=this.field,n=r.getZero(),a=this,i=e.getCoefficient(e.getDegree()),o=r.inverse(i);a.getDegree()>=e.getDegree()&&!a.isZero();){var l=a.getDegree()-e.getDegree(),c=r.multiply(a.getCoefficient(a.getDegree()),o),u=e.multiplyByMonomial(l,c),h=r.buildMonomial(l,c);n=n.addOrSubtract(h),a=a.addOrSubtract(u)}return[n,a]},t.prototype.toString=function(){for(var e="",r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),r===0||n!==1){var a=this.field.log(n);a===0?e+="1":a===1?e+="a":(e+="a^",e+=a)}r!==0&&(r===1?e+="x":(e+="x^",e+=r))}}return e},t})(),cW=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),uE=(function(t){cW(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArithmeticException",e})(eo),dW=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Ki=(function(t){dW(e,t);function e(r,n,a){var i=t.call(this)||this;i.primitive=r,i.size=n,i.generatorBase=a;for(var o=new Int32Array(n),l=1,c=0;c<n;c++)o[c]=l,l*=2,l>=n&&(l^=r,l&=n-1);i.expTable=o;for(var u=new Int32Array(n),c=0;c<n-1;c++)u[o[c]]=c;return i.logTable=u,i.zero=new ru(i,Int32Array.from([0])),i.one=new ru(i,Int32Array.from([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new fr;if(n===0)return this.zero;var a=new Int32Array(r+1);return a[0]=n,new ru(this,a)},e.prototype.inverse=function(r){if(r===0)throw new uE;return this.expTable[this.size-this.logTable[r]-1]},e.prototype.multiply=function(r,n){return r===0||n===0?0:this.expTable[(this.logTable[r]+this.logTable[n])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+Jr.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(r){return r===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e})(Qm),uW=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),ax=(function(t){uW(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReedSolomonException",e})(eo),hW=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),X0=(function(t){hW(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalStateException",e})(eo),Y1=(function(){function t(e){this.field=e}return t.prototype.decode=function(e,r){for(var n=this.field,a=new ru(n,e),i=new Int32Array(r),o=!0,l=0;l<r;l++){var c=a.evaluateAt(n.exp(l+n.getGeneratorBase()));i[i.length-1-l]=c,c!==0&&(o=!1)}if(!o)for(var u=new ru(n,i),h=this.runEuclideanAlgorithm(n.buildMonomial(r,1),u,r),m=h[0],x=h[1],p=this.findErrorLocations(m),y=this.findErrorMagnitudes(x,p),l=0;l<p.length;l++){var w=e.length-1-n.log(p[l]);if(w<0)throw new ax("Bad error location");e[w]=Ki.addOrSubtract(e[w],y[l])}},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var a=e;e=r,r=a}for(var i=this.field,o=e,l=r,c=i.getZero(),u=i.getOne();l.getDegree()>=(n/2|0);){var h=o,m=c;if(o=l,c=u,o.isZero())throw new ax("r_{i-1} was zero");l=h;for(var x=i.getZero(),p=o.getCoefficient(o.getDegree()),y=i.inverse(p);l.getDegree()>=o.getDegree()&&!l.isZero();){var w=l.getDegree()-o.getDegree(),j=i.multiply(l.getCoefficient(l.getDegree()),y);x=x.addOrSubtract(i.buildMonomial(w,j)),l=l.addOrSubtract(o.multiplyByMonomial(w,j))}if(u=x.multiply(c).addOrSubtract(m),l.getDegree()>=o.getDegree())throw new X0("Division algorithm failed to reduce polynomial?")}var C=u.getCoefficient(0);if(C===0)throw new ax("sigmaTilde(0) was zero");var S=i.inverse(C),k=u.multiplyScalar(S),P=l.multiplyScalar(S);return[k,P]},t.prototype.findErrorLocations=function(e){var r=e.getDegree();if(r===1)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(r),a=0,i=this.field,o=1;o<i.getSize()&&a<r;o++)e.evaluateAt(o)===0&&(n[a]=i.inverse(o),a++);if(a!==r)throw new ax("Error locator degree does not match number of roots");return n},t.prototype.findErrorMagnitudes=function(e,r){for(var n=r.length,a=new Int32Array(n),i=this.field,o=0;o<n;o++){for(var l=i.inverse(r[o]),c=1,u=0;u<n;u++)if(o!==u){var h=i.multiply(r[u],l),m=(h&1)===0?h|1:h&-2;c=i.multiply(c,m)}a[o]=i.multiply(e.evaluateAt(l),i.inverse(c)),i.getGeneratorBase()!==0&&(a[o]=i.multiply(a[o],l))}return a},t})(),Va;(function(t){t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY"})(Va||(Va={}));var K4=(function(){function t(){}return t.prototype.decode=function(e){this.ddata=e;var r=e.getBits(),n=this.extractBits(r),a=this.correctBits(n),i=t.convertBoolArrayToByteArray(a),o=t.getEncodedData(a),l=new K1(i,o,null,null);return l.setNumBits(a.length),l},t.highLevelDecode=function(e){return this.getEncodedData(e)},t.getEncodedData=function(e){for(var r=e.length,n=Va.UPPER,a=Va.UPPER,i="",o=0;o<r;)if(a===Va.BINARY){if(r-o<5)break;var l=t.readCode(e,o,5);if(o+=5,l===0){if(r-o<11)break;l=t.readCode(e,o,11)+31,o+=11}for(var c=0;c<l;c++){if(r-o<8){o=r;break}var u=t.readCode(e,o,8);i+=Gn.castAsNonUtf8Char(u),o+=8}a=n}else{var h=a===Va.DIGIT?4:5;if(r-o<h)break;var u=t.readCode(e,o,h);o+=h;var m=t.getCharacter(a,u);m.startsWith("CTRL_")?(n=a,a=t.getTable(m.charAt(5)),m.charAt(6)==="L"&&(n=a)):(i+=m,a=n)}return i},t.getTable=function(e){switch(e){case"L":return Va.LOWER;case"P":return Va.PUNCT;case"M":return Va.MIXED;case"D":return Va.DIGIT;case"B":return Va.BINARY;case"U":default:return Va.UPPER}},t.getCharacter=function(e,r){switch(e){case Va.UPPER:return t.UPPER_TABLE[r];case Va.LOWER:return t.LOWER_TABLE[r];case Va.MIXED:return t.MIXED_TABLE[r];case Va.PUNCT:return t.PUNCT_TABLE[r];case Va.DIGIT:return t.DIGIT_TABLE[r];default:throw new X0("Bad table")}},t.prototype.correctBits=function(e){var r,n;this.ddata.getNbLayers()<=2?(n=6,r=Ki.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,r=Ki.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,r=Ki.AZTEC_DATA_10):(n=12,r=Ki.AZTEC_DATA_12);var a=this.ddata.getNbDatablocks(),i=e.length/n;if(i<a)throw new _t;for(var o=e.length%n,l=new Int32Array(i),c=0;c<i;c++,o+=n)l[c]=t.readCode(e,o,n);try{var u=new Y1(r);u.decode(l,i-a)}catch(j){throw new _t(j)}for(var h=(1<<n)-1,m=0,c=0;c<a;c++){var x=l[c];if(x===0||x===h)throw new _t;(x===1||x===h-1)&&m++}for(var p=new Array(a*n-m),y=0,c=0;c<a;c++){var x=l[c];if(x===1||x===h-1)p.fill(x>1,y,y+n-1),y+=n-1;else for(var w=n-1;w>=0;--w)p[y++]=(x&1<<w)!==0}return p},t.prototype.extractBits=function(e){var r=this.ddata.isCompact(),n=this.ddata.getNbLayers(),a=(r?11:14)+n*4,i=new Int32Array(a),o=new Array(this.totalBitsInLayer(n,r));if(r)for(var l=0;l<i.length;l++)i[l]=l;else for(var c=a+1+2*Jr.truncDivision(Jr.truncDivision(a,2)-1,15),u=a/2,h=Jr.truncDivision(c,2),l=0;l<u;l++){var m=l+Jr.truncDivision(l,15);i[u-l-1]=h-m-1,i[u+l]=h+m+1}for(var l=0,x=0;l<n;l++){for(var p=(n-l)*4+(r?9:12),y=l*2,w=a-1-y,j=0;j<p;j++)for(var C=j*2,S=0;S<2;S++)o[x+C+S]=e.get(i[y+S],i[y+j]),o[x+2*p+C+S]=e.get(i[y+j],i[w-S]),o[x+4*p+C+S]=e.get(i[w-S],i[w-j]),o[x+6*p+C+S]=e.get(i[w-j],i[y+S]);x+=p*8}return o},t.readCode=function(e,r,n){for(var a=0,i=r;i<r+n;i++)a<<=1,e[i]&&(a|=1);return a},t.readByte=function(e,r){var n=e.length-r;return n>=8?t.readCode(e,r,8):t.readCode(e,r,n)<<8-n},t.convertBoolArrayToByteArray=function(e){for(var r=new Uint8Array((e.length+7)/8),n=0;n<r.length;n++)r[n]=t.readByte(e,8*n);return r},t.prototype.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],t.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],t.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],t.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],t.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],t})(),xn=(function(){function t(){}return t.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},t.distance=function(e,r,n,a){var i=e-n,o=r-a;return Math.sqrt(i*i+o*o)},t.sum=function(e){for(var r=0,n=0,a=e.length;n!==a;n++){var i=e[n];r+=i}return r},t})(),Dy=(function(){function t(){}return t.floatToIntBits=function(e){return e},t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t})(),rr=(function(){function t(e,r){this.x=e,this.y=r}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.equals=function(e){if(e instanceof t){var r=e;return this.x===r.x&&this.y===r.y}return!1},t.prototype.hashCode=function(){return 31*Dy.floatToIntBits(this.x)+Dy.floatToIntBits(this.y)},t.prototype.toString=function(){return"("+this.x+","+this.y+")"},t.orderBestPatterns=function(e){var r=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),a=this.distance(e[0],e[2]),i,o,l;if(n>=r&&n>=a?(o=e[0],i=e[1],l=e[2]):a>=n&&a>=r?(o=e[1],i=e[0],l=e[2]):(o=e[2],i=e[0],l=e[1]),this.crossProductZ(i,o,l)<0){var c=i;i=l,l=c}e[0]=i,e[1]=o,e[2]=l},t.distance=function(e,r){return xn.distance(e.x,e.y,r.x,r.y)},t.crossProductZ=function(e,r,n){var a=r.x,i=r.y;return(n.x-a)*(e.y-i)-(n.y-i)*(e.x-a)},t})(),Pb=(function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t})(),fW=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),mW=(function(t){fW(e,t);function e(r,n,a,i,o){var l=t.call(this,r,n)||this;return l.compact=a,l.nbDatablocks=i,l.nbLayers=o,l}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e})(Pb),Oy=(function(){function t(e,r,n,a){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),r==null&&(r=t.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),a==null&&(a=e.getHeight()/2|0);var i=r/2|0;if(this.leftInit=n-i,this.rightInit=n+i,this.upInit=a-i,this.downInit=a+i,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new et}return t.prototype.detect=function(){for(var e=this.leftInit,r=this.rightInit,n=this.upInit,a=this.downInit,i=!1,o=!0,l=!1,c=!1,u=!1,h=!1,m=!1,x=this.width,p=this.height;o;){o=!1;for(var y=!0;(y||!c)&&r<x;)y=this.containsBlackPoint(n,a,r,!1),y?(r++,o=!0,c=!0):c||r++;if(r>=x){i=!0;break}for(var w=!0;(w||!u)&&a<p;)w=this.containsBlackPoint(e,r,a,!0),w?(a++,o=!0,u=!0):u||a++;if(a>=p){i=!0;break}for(var j=!0;(j||!h)&&e>=0;)j=this.containsBlackPoint(n,a,e,!1),j?(e--,o=!0,h=!0):h||e--;if(e<0){i=!0;break}for(var C=!0;(C||!m)&&n>=0;)C=this.containsBlackPoint(e,r,n,!0),C?(n--,o=!0,m=!0):m||n--;if(n<0){i=!0;break}o&&(l=!0)}if(!i&&l){for(var S=r-e,k=null,P=1;k===null&&P<S;P++)k=this.getBlackPointOnSegment(e,a-P,e+P,a);if(k==null)throw new et;for(var O=null,P=1;O===null&&P<S;P++)O=this.getBlackPointOnSegment(e,n+P,e+P,n);if(O==null)throw new et;for(var $=null,P=1;$===null&&P<S;P++)$=this.getBlackPointOnSegment(r,n+P,r-P,n);if($==null)throw new et;for(var R=null,P=1;R===null&&P<S;P++)R=this.getBlackPointOnSegment(r,a-P,r-P,a);if(R==null)throw new et;return this.centerEdges(R,k,$,O)}else throw new et},t.prototype.getBlackPointOnSegment=function(e,r,n,a){for(var i=xn.round(xn.distance(e,r,n,a)),o=(n-e)/i,l=(a-r)/i,c=this.image,u=0;u<i;u++){var h=xn.round(e+u*o),m=xn.round(r+u*l);if(c.get(h,m))return new rr(h,m)}return null},t.prototype.centerEdges=function(e,r,n,a){var i=e.getX(),o=e.getY(),l=r.getX(),c=r.getY(),u=n.getX(),h=n.getY(),m=a.getX(),x=a.getY(),p=t.CORR;return i<this.width/2?[new rr(m-p,x+p),new rr(l+p,c+p),new rr(u-p,h-p),new rr(i+p,o-p)]:[new rr(m+p,x+p),new rr(l+p,c-p),new rr(u-p,h+p),new rr(i-p,o-p)]},t.prototype.containsBlackPoint=function(e,r,n,a){var i=this.image;if(a){for(var o=e;o<=r;o++)if(i.get(o,n))return!0}else for(var l=e;l<=r;l++)if(i.get(n,l))return!0;return!1},t.INIT_SIZE=10,t.CORR=1,t})(),Y4=(function(){function t(){}return t.checkAndNudgePoints=function(e,r){for(var n=e.getWidth(),a=e.getHeight(),i=!0,o=0;o<r.length&&i;o+=2){var l=Math.floor(r[o]),c=Math.floor(r[o+1]);if(l<-1||l>n||c<-1||c>a)throw new et;i=!1,l===-1?(r[o]=0,i=!0):l===n&&(r[o]=n-1,i=!0),c===-1?(r[o+1]=0,i=!0):c===a&&(r[o+1]=a-1,i=!0)}i=!0;for(var o=r.length-2;o>=0&&i;o-=2){var l=Math.floor(r[o]),c=Math.floor(r[o+1]);if(l<-1||l>n||c<-1||c>a)throw new et;i=!1,l===-1?(r[o]=0,i=!0):l===n&&(r[o]=n-1,i=!0),c===-1?(r[o+1]=0,i=!0):c===a&&(r[o+1]=a-1,i=!0)}},t})(),hE=(function(){function t(e,r,n,a,i,o,l,c,u){this.a11=e,this.a21=r,this.a31=n,this.a12=a,this.a22=i,this.a32=o,this.a13=l,this.a23=c,this.a33=u}return t.quadrilateralToQuadrilateral=function(e,r,n,a,i,o,l,c,u,h,m,x,p,y,w,j){var C=t.quadrilateralToSquare(e,r,n,a,i,o,l,c),S=t.squareToQuadrilateral(u,h,m,x,p,y,w,j);return S.times(C)},t.prototype.transformPoints=function(e){for(var r=e.length,n=this.a11,a=this.a12,i=this.a13,o=this.a21,l=this.a22,c=this.a23,u=this.a31,h=this.a32,m=this.a33,x=0;x<r;x+=2){var p=e[x],y=e[x+1],w=i*p+c*y+m;e[x]=(n*p+o*y+u)/w,e[x+1]=(a*p+l*y+h)/w}},t.prototype.transformPointsWithValues=function(e,r){for(var n=this.a11,a=this.a12,i=this.a13,o=this.a21,l=this.a22,c=this.a23,u=this.a31,h=this.a32,m=this.a33,x=e.length,p=0;p<x;p++){var y=e[p],w=r[p],j=i*y+c*w+m;e[p]=(n*y+o*w+u)/j,r[p]=(a*y+l*w+h)/j}},t.squareToQuadrilateral=function(e,r,n,a,i,o,l,c){var u=e-n+i-l,h=r-a+o-c;if(u===0&&h===0)return new t(n-e,i-n,e,a-r,o-a,r,0,0,1);var m=n-i,x=l-i,p=a-o,y=c-o,w=m*y-x*p,j=(u*y-x*h)/w,C=(m*h-u*p)/w;return new t(n-e+j*n,l-e+C*l,e,a-r+j*a,c-r+C*c,r,j,C,1)},t.quadrilateralToSquare=function(e,r,n,a,i,o,l,c){return t.squareToQuadrilateral(e,r,n,a,i,o,l,c).buildAdjoint()},t.prototype.buildAdjoint=function(){return new t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},t.prototype.times=function(e){return new t(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},t})(),pW=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),xW=(function(t){pW(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.sampleGrid=function(r,n,a,i,o,l,c,u,h,m,x,p,y,w,j,C,S,k,P){var O=hE.quadrilateralToQuadrilateral(i,o,l,c,u,h,m,x,p,y,w,j,C,S,k,P);return this.sampleGridWithTransform(r,n,a,O)},e.prototype.sampleGridWithTransform=function(r,n,a,i){if(n<=0||a<=0)throw new et;for(var o=new hc(n,a),l=new Float32Array(2*n),c=0;c<a;c++){for(var u=l.length,h=c+.5,m=0;m<u;m+=2)l[m]=m/2+.5,l[m+1]=h;i.transformPoints(l),Y4.checkAndNudgePoints(r,l);try{for(var m=0;m<u;m+=2)r.get(Math.floor(l[m]),Math.floor(l[m+1]))&&o.set(m/2,c)}catch{throw new et}}return o},e})(Y4),Tb=(function(){function t(){}return t.setGridSampler=function(e){t.gridSampler=e},t.getInstance=function(){return t.gridSampler},t.gridSampler=new xW,t})(),qi=(function(){function t(e,r){this.x=e,this.y=r}return t.prototype.toResultPoint=function(){return new rr(this.getX(),this.getY())},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t})(),gW=(function(){function t(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return t.prototype.detect=function(){return this.detectMirror(!1)},t.prototype.detectMirror=function(e){var r=this.getMatrixCenter(),n=this.getBullsEyeCorners(r);if(e){var a=n[0];n[0]=n[2],n[2]=a}this.extractParameters(n);var i=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),o=this.getMatrixCornerPoints(n);return new mW(i,o,this.compact,this.nbDataBlocks,this.nbLayers)},t.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new et;var r=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],r),this.sampleLine(e[1],e[2],r),this.sampleLine(e[2],e[3],r),this.sampleLine(e[3],e[0],r)]);this.shift=this.getRotation(n,r);for(var a=0,i=0;i<4;i++){var o=n[(this.shift+i)%4];this.compact?(a<<=7,a+=o>>1&127):(a<<=10,a+=(o>>2&992)+(o>>1&31))}var l=this.getCorrectedParameterData(a,this.compact);this.compact?(this.nbLayers=(l>>6)+1,this.nbDataBlocks=(l&63)+1):(this.nbLayers=(l>>11)+1,this.nbDataBlocks=(l&2047)+1)},t.prototype.getRotation=function(e,r){var n=0;e.forEach(function(i,o,l){var c=(i>>r-2<<1)+(i&1);n=(n<<3)+c}),n=((n&1)<<11)+(n>>1);for(var a=0;a<4;a++)if(Jr.bitCount(n^this.EXPECTED_CORNER_BITS[a])<=2)return a;throw new et},t.prototype.getCorrectedParameterData=function(e,r){var n,a;r?(n=7,a=2):(n=10,a=4);for(var i=n-a,o=new Int32Array(n),l=n-1;l>=0;--l)o[l]=e&15,e>>=4;try{var c=new Y1(Ki.AZTEC_PARAM);c.decode(o,i)}catch{throw new et}for(var u=0,l=0;l<a;l++)u=(u<<4)+o[l];return u},t.prototype.getBullsEyeCorners=function(e){var r=e,n=e,a=e,i=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var l=this.getFirstDifferent(r,o,1,-1),c=this.getFirstDifferent(n,o,1,1),u=this.getFirstDifferent(a,o,-1,1),h=this.getFirstDifferent(i,o,-1,-1);if(this.nbCenterLayers>2){var m=this.distancePoint(h,l)*this.nbCenterLayers/(this.distancePoint(i,r)*(this.nbCenterLayers+2));if(m<.75||m>1.25||!this.isWhiteOrBlackRectangle(l,c,u,h))break}r=l,n=c,a=u,i=h,o=!o}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new et;this.compact=this.nbCenterLayers===5;var x=new rr(r.getX()+.5,r.getY()-.5),p=new rr(n.getX()+.5,n.getY()+.5),y=new rr(a.getX()-.5,a.getY()+.5),w=new rr(i.getX()-.5,i.getY()-.5);return this.expandSquare([x,p,y,w],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},t.prototype.getMatrixCenter=function(){var e,r,n,a;try{var i=new Oy(this.image).detect();e=i[0],r=i[1],n=i[2],a=i[3]}catch{var o=this.image.getWidth()/2,l=this.image.getHeight()/2;e=this.getFirstDifferent(new qi(o+7,l-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new qi(o+7,l+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new qi(o-7,l+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new qi(o-7,l-7),!1,-1,-1).toResultPoint()}var c=xn.round((e.getX()+a.getX()+r.getX()+n.getX())/4),u=xn.round((e.getY()+a.getY()+r.getY()+n.getY())/4);try{var i=new Oy(this.image,15,c,u).detect();e=i[0],r=i[1],n=i[2],a=i[3]}catch{e=this.getFirstDifferent(new qi(c+7,u-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new qi(c+7,u+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new qi(c-7,u+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new qi(c-7,u-7),!1,-1,-1).toResultPoint()}return c=xn.round((e.getX()+a.getX()+r.getX()+n.getX())/4),u=xn.round((e.getY()+a.getY()+r.getY()+n.getY())/4),new qi(c,u)},t.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},t.prototype.sampleGrid=function(e,r,n,a,i){var o=Tb.getInstance(),l=this.getDimension(),c=l/2-this.nbCenterLayers,u=l/2+this.nbCenterLayers;return o.sampleGrid(e,l,l,c,c,u,c,u,u,c,u,r.getX(),r.getY(),n.getX(),n.getY(),a.getX(),a.getY(),i.getX(),i.getY())},t.prototype.sampleLine=function(e,r,n){for(var a=0,i=this.distanceResultPoint(e,r),o=i/n,l=e.getX(),c=e.getY(),u=o*(r.getX()-e.getX())/i,h=o*(r.getY()-e.getY())/i,m=0;m<n;m++)this.image.get(xn.round(l+m*u),xn.round(c+m*h))&&(a|=1<<n-m-1);return a},t.prototype.isWhiteOrBlackRectangle=function(e,r,n,a){var i=3;e=new qi(e.getX()-i,e.getY()+i),r=new qi(r.getX()-i,r.getY()-i),n=new qi(n.getX()+i,n.getY()-i),a=new qi(a.getX()+i,a.getY()+i);var o=this.getColor(a,e);if(o===0)return!1;var l=this.getColor(e,r);return l!==o||(l=this.getColor(r,n),l!==o)?!1:(l=this.getColor(n,a),l===o)},t.prototype.getColor=function(e,r){for(var n=this.distancePoint(e,r),a=(r.getX()-e.getX())/n,i=(r.getY()-e.getY())/n,o=0,l=e.getX(),c=e.getY(),u=this.image.get(e.getX(),e.getY()),h=Math.ceil(n),m=0;m<h;m++)l+=a,c+=i,this.image.get(xn.round(l),xn.round(c))!==u&&o++;var x=o/n;return x>.1&&x<.9?0:x<=.1===u?1:-1},t.prototype.getFirstDifferent=function(e,r,n,a){for(var i=e.getX()+n,o=e.getY()+a;this.isValid(i,o)&&this.image.get(i,o)===r;)i+=n,o+=a;for(i-=n,o-=a;this.isValid(i,o)&&this.image.get(i,o)===r;)i+=n;for(i-=n;this.isValid(i,o)&&this.image.get(i,o)===r;)o+=a;return o-=a,new qi(i,o)},t.prototype.expandSquare=function(e,r,n){var a=n/(2*r),i=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),l=(e[0].getX()+e[2].getX())/2,c=(e[0].getY()+e[2].getY())/2,u=new rr(l+a*i,c+a*o),h=new rr(l-a*i,c-a*o);i=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),l=(e[1].getX()+e[3].getX())/2,c=(e[1].getY()+e[3].getY())/2;var m=new rr(l+a*i,c+a*o),x=new rr(l-a*i,c-a*o),p=[u,m,h,x];return p},t.prototype.isValid=function(e,r){return e>=0&&e<this.image.getWidth()&&r>0&&r<this.image.getHeight()},t.prototype.isValidPoint=function(e){var r=xn.round(e.getX()),n=xn.round(e.getY());return this.isValid(r,n)},t.prototype.distancePoint=function(e,r){return xn.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.distanceResultPoint=function(e,r){return xn.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Jr.truncDivision(this.nbLayers-4,8)+1)+15},t})(),Ry=(function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=null,a=new gW(e.getBlackMatrix()),i=null,o=null;try{var l=a.detectMirror(!1);i=l.getPoints(),this.reportFoundResultPoints(r,i),o=new K4().decode(l)}catch(m){n=m}if(o==null)try{var l=a.detectMirror(!0);i=l.getPoints(),this.reportFoundResultPoints(r,i),o=new K4().decode(l)}catch(m){throw n??m}var c=new to(o.getText(),o.getRawBytes(),o.getNumBits(),i,Zt.AZTEC,Yn.currentTimeMillis()),u=o.getByteSegments();u!=null&&c.putMetadata(Ha.BYTE_SEGMENTS,u);var h=o.getECLevel();return h!=null&&c.putMetadata(Ha.ERROR_CORRECTION_LEVEL,h),c},t.prototype.reportFoundResultPoints=function(e,r){if(e!=null){var n=e.get(ss.NEED_RESULT_POINT_CALLBACK);n!=null&&r.forEach(function(a,i,o){n.foundPossibleResultPoint(a)})}},t.prototype.reset=function(){},t})(),vW=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(t){vW(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new Ry,r)||this}return e})(um);var Wa=(function(){function t(){}return t.prototype.decode=function(e,r){try{return this.doDecode(e,r)}catch{var n=r&&r.get(ss.TRY_HARDER)===!0;if(n&&e.isRotateSupported()){var a=e.rotateCounterClockwise(),i=this.doDecode(a,r),o=i.getResultMetadata(),l=270;o!==null&&o.get(Ha.ORIENTATION)===!0&&(l=l+o.get(Ha.ORIENTATION)%360),i.putMetadata(Ha.ORIENTATION,l);var c=i.getResultPoints();if(c!==null)for(var u=a.getHeight(),h=0;h<c.length;h++)c[h]=new rr(u-c[h].getY()-1,c[h].getX());return i}else throw new et}},t.prototype.reset=function(){},t.prototype.doDecode=function(e,r){var n=e.getWidth(),a=e.getHeight(),i=new Oa(n),o=r&&r.get(ss.TRY_HARDER)===!0,l=Math.max(1,a>>(o?8:5)),c;o?c=a:c=15;for(var u=Math.trunc(a/2),h=0;h<c;h++){var m=Math.trunc((h+1)/2),x=(h&1)===0,p=u+l*(x?m:-m);if(p<0||p>=a)break;try{i=e.getBlackRow(p,i)}catch{continue}for(var y=function(S){if(S===1&&(i.reverse(),r&&r.get(ss.NEED_RESULT_POINT_CALLBACK)===!0)){var k=new Map;r.forEach(function($,R){return k.set(R,$)}),k.delete(ss.NEED_RESULT_POINT_CALLBACK),r=k}try{var P=w.decodeRow(p,i,r);if(S===1){P.putMetadata(Ha.ORIENTATION,180);var O=P.getResultPoints();O!==null&&(O[0]=new rr(n-O[0].getX()-1,O[0].getY()),O[1]=new rr(n-O[1].getX()-1,O[1].getY()))}return{value:P}}catch{}},w=this,j=0;j<2;j++){var C=y(j);if(typeof C=="object")return C.value}}throw new et},t.recordPattern=function(e,r,n){for(var a=n.length,i=0;i<a;i++)n[i]=0;var o=e.getSize();if(r>=o)throw new et;for(var l=!e.get(r),c=0,u=r;u<o;){if(e.get(u)!==l)n[c]++;else{if(++c===a)break;n[c]=1,l=!l}u++}if(!(c===a||c===a-1&&u===o))throw new et},t.recordPatternInReverse=function(e,r,n){for(var a=n.length,i=e.get(r);r>0&&a>=0;)e.get(--r)!==i&&(a--,i=!i);if(a>=0)throw new et;t.recordPattern(e,r+1,n)},t.patternMatchVariance=function(e,r,n){for(var a=e.length,i=0,o=0,l=0;l<a;l++)i+=e[l],o+=r[l];if(i<o)return Number.POSITIVE_INFINITY;var c=i/o;n*=c;for(var u=0,h=0;h<a;h++){var m=e[h],x=r[h]*c,p=m>x?m-x:x-m;if(p>n)return Number.POSITIVE_INFINITY;u+=p}return u/i},t})(),yW=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),X4=(function(t){yW(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.findStartPattern=function(r){for(var n=r.getSize(),a=r.getNextSet(0),i=0,o=Int32Array.from([0,0,0,0,0,0]),l=a,c=!1,u=6,h=a;h<n;h++)if(r.get(h)!==c)o[i]++;else{if(i===u-1){for(var m=e.MAX_AVG_VARIANCE,x=-1,p=e.CODE_START_A;p<=e.CODE_START_C;p++){var y=Wa.patternMatchVariance(o,e.CODE_PATTERNS[p],e.MAX_INDIVIDUAL_VARIANCE);y<m&&(m=y,x=p)}if(x>=0&&r.isRange(Math.max(0,l-(h-l)/2),l,!1))return Int32Array.from([l,h,x]);l+=o[0]+o[1],o=o.slice(2,o.length-1),o[i-1]=0,o[i]=0,i--}else i++;o[i]=1,c=!c}throw new et},e.decodeCode=function(r,n,a){Wa.recordPattern(r,a,n);for(var i=e.MAX_AVG_VARIANCE,o=-1,l=0;l<e.CODE_PATTERNS.length;l++){var c=e.CODE_PATTERNS[l],u=this.patternMatchVariance(n,c,e.MAX_INDIVIDUAL_VARIANCE);u<i&&(i=u,o=l)}if(o>=0)return o;throw new et},e.prototype.decodeRow=function(r,n,a){var i=a&&a.get(ss.ASSUME_GS1)===!0,o=e.findStartPattern(n),l=o[2],c=0,u=new Uint8Array(20);u[c++]=l;var h;switch(l){case e.CODE_START_A:h=e.CODE_CODE_A;break;case e.CODE_START_B:h=e.CODE_CODE_B;break;case e.CODE_START_C:h=e.CODE_CODE_C;break;default:throw new _t}for(var m=!1,x=!1,p="",y=o[0],w=o[1],j=Int32Array.from([0,0,0,0,0,0]),C=0,S=0,k=l,P=0,O=!0,$=!1,R=!1;!m;){var B=x;switch(x=!1,C=S,S=e.decodeCode(n,j,w),u[c++]=S,S!==e.CODE_STOP&&(O=!0),S!==e.CODE_STOP&&(P++,k+=P*S),y=w,w+=j.reduce(function(ue,G){return ue+G},0),S){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new _t}switch(h){case e.CODE_CODE_A:if(S<64)R===$?p+=String.fromCharCode(32+S):p+=String.fromCharCode(32+S+128),R=!1;else if(S<96)R===$?p+=String.fromCharCode(S-64):p+=String.fromCharCode(S+64),R=!1;else switch(S!==e.CODE_STOP&&(O=!1),S){case e.CODE_FNC_1:i&&(p.length===0?p+="]C1":p+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!$&&R?($=!0,R=!1):$&&R?($=!1,R=!1):R=!0;break;case e.CODE_SHIFT:x=!0,h=e.CODE_CODE_B;break;case e.CODE_CODE_B:h=e.CODE_CODE_B;break;case e.CODE_CODE_C:h=e.CODE_CODE_C;break;case e.CODE_STOP:m=!0;break}break;case e.CODE_CODE_B:if(S<96)R===$?p+=String.fromCharCode(32+S):p+=String.fromCharCode(32+S+128),R=!1;else switch(S!==e.CODE_STOP&&(O=!1),S){case e.CODE_FNC_1:i&&(p.length===0?p+="]C1":p+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!$&&R?($=!0,R=!1):$&&R?($=!1,R=!1):R=!0;break;case e.CODE_SHIFT:x=!0,h=e.CODE_CODE_A;break;case e.CODE_CODE_A:h=e.CODE_CODE_A;break;case e.CODE_CODE_C:h=e.CODE_CODE_C;break;case e.CODE_STOP:m=!0;break}break;case e.CODE_CODE_C:if(S<100)S<10&&(p+="0"),p+=S;else switch(S!==e.CODE_STOP&&(O=!1),S){case e.CODE_FNC_1:i&&(p.length===0?p+="]C1":p+="");break;case e.CODE_CODE_A:h=e.CODE_CODE_A;break;case e.CODE_CODE_B:h=e.CODE_CODE_B;break;case e.CODE_STOP:m=!0;break}break}B&&(h=h===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var U=w-y;if(w=n.getNextUnset(w),!n.isRange(w,Math.min(n.getSize(),w+(w-y)/2),!1))throw new et;if(k-=P*C,k%103!==C)throw new qa;var K=p.length;if(K===0)throw new et;K>0&&O&&(h===e.CODE_CODE_C?p=p.substring(0,K-2):p=p.substring(0,K-1));for(var M=(o[1]+o[0])/2,q=y+U/2,re=u.length,ee=new Uint8Array(re),H=0;H<re;H++)ee[H]=u[H];var se=[new rr(M,r),new rr(q,r)];return new to(p,ee,0,se,Zt.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e})(Wa),wW=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Rv=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Z4=(function(t){wW(e,t);function e(r,n){r===void 0&&(r=!1),n===void 0&&(n=!1);var a=t.call(this)||this;return a.usingCheckDigit=r,a.extendedMode=n,a.decodeRowResult="",a.counters=new Int32Array(9),a}return e.prototype.decodeRow=function(r,n,a){var i,o,l,c,u=this.counters;u.fill(0),this.decodeRowResult="";var h=e.findAsteriskPattern(n,u),m=n.getNextSet(h[1]),x=n.getSize(),p,y;do{e.recordPattern(n,m,u);var w=e.toNarrowWidePattern(u);if(w<0)throw new et;p=e.patternToChar(w),this.decodeRowResult+=p,y=m;try{for(var j=(i=void 0,Rv(u)),C=j.next();!C.done;C=j.next()){var S=C.value;m+=S}}catch(re){i={error:re}}finally{try{C&&!C.done&&(o=j.return)&&o.call(j)}finally{if(i)throw i.error}}m=n.getNextSet(m)}while(p!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var k=0;try{for(var P=Rv(u),O=P.next();!O.done;O=P.next()){var S=O.value;k+=S}}catch(re){l={error:re}}finally{try{O&&!O.done&&(c=P.return)&&c.call(P)}finally{if(l)throw l.error}}var $=m-y-k;if(m!==x&&$*2<k)throw new et;if(this.usingCheckDigit){for(var R=this.decodeRowResult.length-1,B=0,U=0;U<R;U++)B+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(U));if(this.decodeRowResult.charAt(R)!==e.ALPHABET_STRING.charAt(B%43))throw new qa;this.decodeRowResult=this.decodeRowResult.substring(0,R)}if(this.decodeRowResult.length===0)throw new et;var K;this.extendedMode?K=e.decodeExtended(this.decodeRowResult):K=this.decodeRowResult;var M=(h[1]+h[0])/2,q=y+k/2;return new to(K,null,0,[new rr(M,r),new rr(q,r)],Zt.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(r,n){for(var a=r.getSize(),i=r.getNextSet(0),o=0,l=i,c=!1,u=n.length,h=i;h<a;h++)if(r.get(h)!==c)n[o]++;else{if(o===u-1){if(this.toNarrowWidePattern(n)===e.ASTERISK_ENCODING&&r.isRange(Math.max(0,l-Math.floor((h-l)/2)),l,!1))return[l,h];l+=n[0]+n[1],n.copyWithin(0,2,2+o-1),n[o-1]=0,n[o]=0,o--}else o++;n[o]=1,c=!c}throw new et},e.toNarrowWidePattern=function(r){var n,a,i=r.length,o=0,l;do{var c=2147483647;try{for(var u=(n=void 0,Rv(r)),h=u.next();!h.done;h=u.next()){var m=h.value;m<c&&m>o&&(c=m)}}catch(w){n={error:w}}finally{try{h&&!h.done&&(a=u.return)&&a.call(u)}finally{if(n)throw n.error}}o=c,l=0;for(var x=0,p=0,y=0;y<i;y++){var m=r[y];m>o&&(p|=1<<i-1-y,l++,x+=m)}if(l===3){for(var y=0;y<i&&l>0;y++){var m=r[y];if(m>o&&(l--,m*2>=x))return-1}return p}}while(l>3);return-1},e.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);if(r===e.ASTERISK_ENCODING)return"*";throw new et},e.decodeExtended=function(r){for(var n=r.length,a="",i=0;i<n;i++){var o=r.charAt(i);if(o==="+"||o==="$"||o==="%"||o==="/"){var l=r.charAt(i+1),c="\0";switch(o){case"+":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)+32);else throw new _t;break;case"$":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)-64);else throw new _t;break;case"%":if(l>="A"&&l<="E")c=String.fromCharCode(l.charCodeAt(0)-38);else if(l>="F"&&l<="J")c=String.fromCharCode(l.charCodeAt(0)-11);else if(l>="K"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)+16);else if(l>="P"&&l<="T")c=String.fromCharCode(l.charCodeAt(0)+43);else if(l==="U")c="\0";else if(l==="V")c="@";else if(l==="W")c="`";else if(l==="X"||l==="Y"||l==="Z")c="";else throw new _t;break;case"/":if(l>="A"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)-32);else if(l==="Z")c=":";else throw new _t;break}a+=c,i++}else a+=o}return a},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e})(Wa),bW=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),NW=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},J4=(function(t){bW(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.narrowLineWidth=-1,r}return e.prototype.decodeRow=function(r,n,a){var i,o,l=this.decodeStart(n),c=this.decodeEnd(n),u=new Fn;e.decodeMiddle(n,l[1],c[0],u);var h=u.toString(),m=null;a!=null&&(m=a.get(ss.ALLOWED_LENGTHS)),m==null&&(m=e.DEFAULT_ALLOWED_LENGTHS);var x=h.length,p=!1,y=0;try{for(var w=NW(m),j=w.next();!j.done;j=w.next()){var C=j.value;if(x===C){p=!0;break}C>y&&(y=C)}}catch(P){i={error:P}}finally{try{j&&!j.done&&(o=w.return)&&o.call(w)}finally{if(i)throw i.error}}if(!p&&x>y&&(p=!0),!p)throw new _t;var S=[new rr(l[1],r),new rr(c[0],r)],k=new to(h,null,0,S,Zt.ITF,new Date().getTime());return k},e.decodeMiddle=function(r,n,a,i){var o=new Int32Array(10),l=new Int32Array(5),c=new Int32Array(5);for(o.fill(0),l.fill(0),c.fill(0);n<a;){Wa.recordPattern(r,n,o);for(var u=0;u<5;u++){var h=2*u;l[u]=o[h],c[u]=o[h+1]}var m=e.decodeDigit(l);i.append(m.toString()),m=this.decodeDigit(c),i.append(m.toString()),o.forEach(function(x){n+=x})}},e.prototype.decodeStart=function(r){var n=e.skipWhiteSpace(r),a=e.findGuardPattern(r,n,e.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(r,a[0]),a},e.prototype.validateQuietZone=function(r,n){var a=this.narrowLineWidth*10;a=a<n?a:n;for(var i=n-1;a>0&&i>=0&&!r.get(i);i--)a--;if(a!==0)throw new et},e.skipWhiteSpace=function(r){var n=r.getSize(),a=r.getNextSet(0);if(a===n)throw new et;return a},e.prototype.decodeEnd=function(r){r.reverse();try{var n=e.skipWhiteSpace(r),a=void 0;try{a=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[0])}catch(o){o instanceof et&&(a=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,a[0]);var i=a[0];return a[0]=r.getSize()-a[1],a[1]=r.getSize()-i,a}finally{r.reverse()}},e.findGuardPattern=function(r,n,a){var i=a.length,o=new Int32Array(i),l=r.getSize(),c=!1,u=0,h=n;o.fill(0);for(var m=n;m<l;m++)if(r.get(m)!==c)o[u]++;else{if(u===i-1){if(Wa.patternMatchVariance(o,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[h,m];h+=o[0]+o[1],Yn.arraycopy(o,2,o,0,u-1),o[u-1]=0,o[u]=0,u--}else u++;o[u]=1,c=!c}throw new et},e.decodeDigit=function(r){for(var n=e.MAX_AVG_VARIANCE,a=-1,i=e.PATTERNS.length,o=0;o<i;o++){var l=e.PATTERNS[o],c=Wa.patternMatchVariance(r,l,e.MAX_INDIVIDUAL_VARIANCE);c<n?(n=c,a=o):c===n&&(a=-1)}if(a>=0)return a%10;throw new et},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e})(Wa),jW=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Kf=(function(t){jW(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.decodeRowStringBuffer="",r}return e.findStartGuardPattern=function(r){for(var n=!1,a,i=0,o=Int32Array.from([0,0,0]);!n;){o=Int32Array.from([0,0,0]),a=e.findGuardPattern(r,i,!1,this.START_END_PATTERN,o);var l=a[0];i=a[1];var c=l-(i-l);c>=0&&(n=r.isRange(c,l,!1))}return a},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var a=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===a},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,a=0,i=n-1;i>=0;i-=2){var o=r.charAt(i).charCodeAt(0)-48;if(o<0||o>9)throw new _t;a+=o}a*=3;for(var i=n-2;i>=0;i-=2){var o=r.charAt(i).charCodeAt(0)-48;if(o<0||o>9)throw new _t;a+=o}return(1e3-a)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(r,n,a,i){return this.findGuardPattern(r,n,a,i,new Int32Array(i.length))},e.findGuardPattern=function(r,n,a,i,o){var l=r.getSize();n=a?r.getNextUnset(n):r.getNextSet(n);for(var c=0,u=n,h=i.length,m=a,x=n;x<l;x++)if(r.get(x)!==m)o[c]++;else{if(c===h-1){if(Wa.patternMatchVariance(o,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([u,x]);u+=o[0]+o[1];for(var p=o.slice(2,o.length-1),y=0;y<c-1;y++)o[y]=p[y];o[c-1]=0,o[c]=0,c--}else c++;o[c]=1,m=!m}throw new et},e.decodeDigit=function(r,n,a,i){this.recordPattern(r,a,n);for(var o=this.MAX_AVG_VARIANCE,l=-1,c=i.length,u=0;u<c;u++){var h=i[u],m=Wa.patternMatchVariance(n,h,e.MAX_INDIVIDUAL_VARIANCE);m<o&&(o=m,l=u)}if(l>=0)return l;throw new et},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e})(Wa),_W=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},CW=(function(){function t(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var a=this.decodeRowStringBuffer,i=this.decodeMiddle(r,n,a),o=a.toString(),l=t.parseExtensionString(o),c=[new rr((n[0]+n[1])/2,e),new rr(i,e)],u=new to(o,null,0,c,Zt.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&u.putAllMetadata(l),u},t.prototype.decodeMiddle=function(e,r,n){var a,i,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var l=e.getSize(),c=r[1],u=0,h=0;h<5&&c<l;h++){var m=Kf.decodeDigit(e,o,c,Kf.L_AND_G_PATTERNS);n+=String.fromCharCode(48+m%10);try{for(var x=(a=void 0,_W(o)),p=x.next();!p.done;p=x.next()){var y=p.value;c+=y}}catch(j){a={error:j}}finally{try{p&&!p.done&&(i=x.return)&&i.call(x)}finally{if(a)throw a.error}}m>=10&&(u|=1<<4-h),h!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(n.length!==5)throw new et;var w=this.determineCheckDigit(u);if(t.extensionChecksum(n.toString())!==w)throw new et;return c},t.extensionChecksum=function(e){for(var r=e.length,n=0,a=r-2;a>=0;a-=2)n+=e.charAt(a).charCodeAt(0)-48;n*=3;for(var a=r-1;a>=0;a-=2)n+=e.charAt(a).charCodeAt(0)-48;return n*=3,n%10},t.prototype.determineCheckDigit=function(e){for(var r=0;r<10;r++)if(e===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new et},t.parseExtensionString=function(e){if(e.length!==5)return null;var r=t.parseExtension5String(e);return r==null?null:new Map([[Ha.SUGGESTED_PRICE,r]])},t.parseExtension5String=function(e){var r;switch(e.charAt(0)){case"0":r="";break;case"5":r="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}var n=parseInt(e.substring(1)),a=(n/100).toString(),i=n%100,o=i<10?"0"+i:i.toString();return r+a+"."+o},t})(),SW=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},AW=(function(){function t(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var a=this.decodeRowStringBuffer,i=this.decodeMiddle(r,n,a),o=a.toString(),l=t.parseExtensionString(o),c=[new rr((n[0]+n[1])/2,e),new rr(i,e)],u=new to(o,null,0,c,Zt.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&u.putAllMetadata(l),u},t.prototype.decodeMiddle=function(e,r,n){var a,i,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var l=e.getSize(),c=r[1],u=0,h=0;h<2&&c<l;h++){var m=Kf.decodeDigit(e,o,c,Kf.L_AND_G_PATTERNS);n+=String.fromCharCode(48+m%10);try{for(var x=(a=void 0,SW(o)),p=x.next();!p.done;p=x.next()){var y=p.value;c+=y}}catch(w){a={error:w}}finally{try{p&&!p.done&&(i=x.return)&&i.call(x)}finally{if(a)throw a.error}}m>=10&&(u|=1<<1-h),h!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(n.length!==2)throw new et;if(parseInt(n.toString())%4!==u)throw new et;return c},t.parseExtensionString=function(e){return e.length!==2?null:new Map([[Ha.ISSUE_NUMBER,parseInt(e)]])},t})(),EW=(function(){function t(){}return t.decodeRow=function(e,r,n){var a=Kf.findGuardPattern(r,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var i=new CW;return i.decodeRow(e,r,a)}catch{var o=new AW;return o.decodeRow(e,r,a)}},t.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),t})(),kW=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),va=(function(t){kW(e,t);function e(){var r=t.call(this)||this;r.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(l){return Int32Array.from(l)});for(var n=10;n<20;n++){for(var a=e.L_PATTERNS[n-10],i=new Int32Array(a.length),o=0;o<a.length;o++)i[o]=a[a.length-o-1];e.L_AND_G_PATTERNS[n]=i}return r}return e.prototype.decodeRow=function(r,n,a){var i=e.findStartGuardPattern(n),o=a==null?null:a.get(ss.NEED_RESULT_POINT_CALLBACK);if(o!=null){var l=new rr((i[0]+i[1])/2,r);o.foundPossibleResultPoint(l)}var c=this.decodeMiddle(n,i,this.decodeRowStringBuffer),u=c.rowOffset,h=c.resultString;if(o!=null){var m=new rr(u,r);o.foundPossibleResultPoint(m)}var x=e.decodeEnd(n,u);if(o!=null){var p=new rr((x[0]+x[1])/2,r);o.foundPossibleResultPoint(p)}var y=x[1],w=y+(y-x[0]);if(w>=n.getSize()||!n.isRange(y,w,!1))throw new et;var j=h.toString();if(j.length<8)throw new _t;if(!e.checkChecksum(j))throw new qa;var C=(i[1]+i[0])/2,S=(x[1]+x[0])/2,k=this.getBarcodeFormat(),P=[new rr(C,r),new rr(S,r)],O=new to(j,null,0,P,k,new Date().getTime()),$=0;try{var R=EW.decodeRow(r,n,x[1]);O.putMetadata(Ha.UPC_EAN_EXTENSION,R.getText()),O.putAllMetadata(R.getResultMetadata()),O.addResultPoints(R.getResultPoints()),$=R.getText().length}catch{}var B=a==null?null:a.get(ss.ALLOWED_EAN_EXTENSIONS);if(B!=null){var U=!1;for(var K in B)if($.toString()===K){U=!0;break}if(!U)throw new et}return k===Zt.EAN_13||Zt.UPC_A,O},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var a=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===a},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,a=0,i=n-1;i>=0;i-=2){var o=r.charAt(i).charCodeAt(0)-48;if(o<0||o>9)throw new _t;a+=o}a*=3;for(var i=n-2;i>=0;i-=2){var o=r.charAt(i).charCodeAt(0)-48;if(o<0||o>9)throw new _t;a+=o}return(1e3-a)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e})(Kf),PW=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Q4=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ly=(function(t){PW(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,a){var i,o,l,c,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var h=r.getSize(),m=n[1],x=0,p=0;p<6&&m<h;p++){var y=va.decodeDigit(r,u,m,va.L_AND_G_PATTERNS);a+=String.fromCharCode(48+y%10);try{for(var w=(i=void 0,Q4(u)),j=w.next();!j.done;j=w.next()){var C=j.value;m+=C}}catch(O){i={error:O}}finally{try{j&&!j.done&&(o=w.return)&&o.call(w)}finally{if(i)throw i.error}}y>=10&&(x|=1<<5-p)}a=e.determineFirstDigit(a,x);var S=va.findGuardPattern(r,m,!0,va.MIDDLE_PATTERN,new Int32Array(va.MIDDLE_PATTERN.length).fill(0));m=S[1];for(var p=0;p<6&&m<h;p++){var y=va.decodeDigit(r,u,m,va.L_PATTERNS);a+=String.fromCharCode(48+y);try{for(var k=(l=void 0,Q4(u)),P=k.next();!P.done;P=k.next()){var C=P.value;m+=C}}catch(R){l={error:R}}finally{try{P&&!P.done&&(c=k.return)&&c.call(k)}finally{if(l)throw l.error}}}return{rowOffset:m,resultString:a}},e.prototype.getBarcodeFormat=function(){return Zt.EAN_13},e.determineFirstDigit=function(r,n){for(var a=0;a<10;a++)if(n===this.FIRST_DIGIT_ENCODINGS[a])return r=String.fromCharCode(48+a)+r,r;throw new et},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e})(va),TW=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),e_=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},t_=(function(t){TW(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,a){var i,o,l,c,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var h=r.getSize(),m=n[1],x=0;x<4&&m<h;x++){var p=va.decodeDigit(r,u,m,va.L_PATTERNS);a+=String.fromCharCode(48+p);try{for(var y=(i=void 0,e_(u)),w=y.next();!w.done;w=y.next()){var j=w.value;m+=j}}catch(P){i={error:P}}finally{try{w&&!w.done&&(o=y.return)&&o.call(y)}finally{if(i)throw i.error}}}var C=va.findGuardPattern(r,m,!0,va.MIDDLE_PATTERN,new Int32Array(va.MIDDLE_PATTERN.length).fill(0));m=C[1];for(var x=0;x<4&&m<h;x++){var p=va.decodeDigit(r,u,m,va.L_PATTERNS);a+=String.fromCharCode(48+p);try{for(var S=(l=void 0,e_(u)),k=S.next();!k.done;k=S.next()){var j=k.value;m+=j}}catch($){l={error:$}}finally{try{k&&!k.done&&(c=S.return)&&c.call(S)}finally{if(l)throw l.error}}}return{rowOffset:m,resultString:a}},e.prototype.getBarcodeFormat=function(){return Zt.EAN_8},e})(va),IW=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),r_=(function(t){IW(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.ean13Reader=new Ly,r}return e.prototype.getBarcodeFormat=function(){return Zt.UPC_A},e.prototype.decode=function(r,n){return this.maybeReturnResult(this.ean13Reader.decode(r))},e.prototype.decodeRow=function(r,n,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,n,a))},e.prototype.decodeMiddle=function(r,n,a){return this.ean13Reader.decodeMiddle(r,n,a)},e.prototype.maybeReturnResult=function(r){var n=r.getText();if(n.charAt(0)==="0"){var a=new to(n.substring(1),null,null,r.getResultPoints(),Zt.UPC_A);return r.getResultMetadata()!=null&&a.putAllMetadata(r.getResultMetadata()),a}else throw new et},e.prototype.reset=function(){this.ean13Reader.reset()},e})(va),DW=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),OW=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},n_=(function(t){DW(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=new Int32Array(4),r}return e.prototype.decodeMiddle=function(r,n,a){var i,o,l=this.decodeMiddleCounters.map(function(j){return j});l[0]=0,l[1]=0,l[2]=0,l[3]=0;for(var c=r.getSize(),u=n[1],h=0,m=0;m<6&&u<c;m++){var x=e.decodeDigit(r,l,u,e.L_AND_G_PATTERNS);a+=String.fromCharCode(48+x%10);try{for(var p=(i=void 0,OW(l)),y=p.next();!y.done;y=p.next()){var w=y.value;u+=w}}catch(j){i={error:j}}finally{try{y&&!y.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}x>=10&&(h|=1<<5-m)}return e.determineNumSysAndCheckDigit(new Fn(a),h),u},e.prototype.decodeEnd=function(r,n){return e.findGuardPatternWithoutCounters(r,n,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(r){return va.checkChecksum(e.convertUPCEtoUPCA(r))},e.determineNumSysAndCheckDigit=function(r,n){for(var a=0;a<=1;a++)for(var i=0;i<10;i++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][i]){r.insert(0,"0"+a),r.append("0"+i);return}throw et.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return Zt.UPC_E},e.convertUPCEtoUPCA=function(r){var n=r.slice(1,7).split("").map(function(o){return o.charCodeAt(0)}),a=new Fn;a.append(r.charAt(0));var i=n[5];switch(i){case 0:case 1:case 2:a.appendChars(n,0,2),a.append(i),a.append("0000"),a.appendChars(n,2,3);break;case 3:a.appendChars(n,0,3),a.append("00000"),a.appendChars(n,3,2);break;case 4:a.appendChars(n,0,4),a.append("00000"),a.append(n[4]);break;default:a.appendChars(n,0,5),a.append("0000"),a.append(i);break}return r.length>=8&&a.append(r.charAt(7)),a.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e})(va),RW=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),s_=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Lv=(function(t){RW(e,t);function e(r){var n=t.call(this)||this,a=r==null?null:r.get(ss.POSSIBLE_FORMATS),i=[];return a!=null&&(a.indexOf(Zt.EAN_13)>-1&&i.push(new Ly),a.indexOf(Zt.UPC_A)>-1&&i.push(new r_),a.indexOf(Zt.EAN_8)>-1&&i.push(new t_),a.indexOf(Zt.UPC_E)>-1&&i.push(new n_)),i.length===0&&(i.push(new Ly),i.push(new r_),i.push(new t_),i.push(new n_)),n.readers=i,n}return e.prototype.decodeRow=function(r,n,a){var i,o;try{for(var l=s_(this.readers),c=l.next();!c.done;c=l.next()){var u=c.value;try{var h=u.decodeRow(r,n,a),m=h.getBarcodeFormat()===Zt.EAN_13&&h.getText().charAt(0)==="0",x=a==null?null:a.get(ss.POSSIBLE_FORMATS),p=x==null||x.includes(Zt.UPC_A);if(m&&p){var y=h.getRawBytes(),w=new to(h.getText().substring(1),y,y?y.length:null,h.getResultPoints(),Zt.UPC_A);return w.putAllMetadata(h.getResultMetadata()),w}return h}catch{}}}catch(j){i={error:j}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}throw new et},e.prototype.reset=function(){var r,n;try{for(var a=s_(this.readers),i=a.next();!i.done;i=a.next()){var o=i.value;o.reset()}}catch(l){r={error:l}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},e})(Wa),LW=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),FW=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rh=(function(t){LW(e,t);function e(){var r=t.call(this)||this;return r.decodeFinderCounters=new Int32Array(4),r.dataCharacterCounters=new Int32Array(8),r.oddRoundingErrors=new Array(4),r.evenRoundingErrors=new Array(4),r.oddCounts=new Array(r.dataCharacterCounters.length/2),r.evenCounts=new Array(r.dataCharacterCounters.length/2),r}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(r,n){for(var a=0;a<n.length;a++)if(Wa.patternMatchVariance(r,n[a],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return a;throw new et},e.count=function(r){return xn.sum(new Int32Array(r))},e.increment=function(r,n){for(var a=0,i=n[0],o=1;o<r.length;o++)n[o]>i&&(i=n[o],a=o);r[a]++},e.decrement=function(r,n){for(var a=0,i=n[0],o=1;o<r.length;o++)n[o]<i&&(i=n[o],a=o);r[a]--},e.isFinderPattern=function(r){var n,a,i=r[0]+r[1],o=i+r[2]+r[3],l=i/o;if(l>=e.MIN_FINDER_PATTERN_RATIO&&l<=e.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;try{for(var h=FW(r),m=h.next();!m.done;m=h.next()){var x=m.value;x>u&&(u=x),x<c&&(c=x)}}catch(p){n={error:p}}finally{try{m&&!m.done&&(a=h.return)&&a.call(h)}finally{if(n)throw n.error}}return u<10*c}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e})(Wa),c1=(function(){function t(e,r){this.value=e,this.checksumPortion=r}return t.prototype.getValue=function(){return this.value},t.prototype.getChecksumPortion=function(){return this.checksumPortion},t.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value&&this.checksumPortion===r.checksumPortion},t.prototype.hashCode=function(){return this.value^this.checksumPortion},t})(),fE=(function(){function t(e,r,n,a,i){this.value=e,this.startEnd=r,this.value=e,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new rr(n,i)),this.resultPoints.push(new rr(a,i))}return t.prototype.getValue=function(){return this.value},t.prototype.getStartEnd=function(){return this.startEnd},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.hashCode=function(){return this.value},t})(),MW=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Af=(function(){function t(){}return t.getRSSvalue=function(e,r,n){var a,i,o=0;try{for(var l=MW(e),c=l.next();!c.done;c=l.next()){var u=c.value;o+=u}}catch(S){a={error:S}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(a)throw a.error}}for(var h=0,m=0,x=e.length,p=0;p<x-1;p++){var y=void 0;for(y=1,m|=1<<p;y<e[p];y++,m&=~(1<<p)){var w=t.combins(o-y-1,x-p-2);if(n&&m===0&&o-y-(x-p-1)>=x-p-1&&(w-=t.combins(o-y-(x-p),x-p-2)),x-p-1>1){for(var j=0,C=o-y-(x-p-2);C>r;C--)j+=t.combins(o-y-C-1,x-p-3);w-=j*(x-1-p)}else o-y>r&&w--;h+=w}o-=y}return h},t.combins=function(e,r){var n,a;e-r>r?(a=r,n=e-r):(a=e-r,n=r);for(var i=1,o=1,l=e;l>n;l--)i*=l,o<=a&&(i/=o,o++);for(;o<=a;)i/=o,o++;return i},t})(),BW=(function(){function t(){}return t.buildBitArray=function(e){var r=e.length*2-1;e[e.length-1].getRightChar()==null&&(r-=1);for(var n=12*r,a=new Oa(n),i=0,o=e[0],l=o.getRightChar().getValue(),c=11;c>=0;--c)(l&1<<c)!=0&&a.set(i),i++;for(var c=1;c<e.length;++c){for(var u=e[c],h=u.getLeftChar().getValue(),m=11;m>=0;--m)(h&1<<m)!=0&&a.set(i),i++;if(u.getRightChar()!=null)for(var x=u.getRightChar().getValue(),m=11;m>=0;--m)(x&1<<m)!=0&&a.set(i),i++}return a},t})(),Ju=(function(){function t(e,r){r?this.decodedInformation=null:(this.finished=e,this.decodedInformation=r)}return t.prototype.getDecodedInformation=function(){return this.decodedInformation},t.prototype.isFinished=function(){return this.finished},t})(),Ib=(function(){function t(e){this.newPosition=e}return t.prototype.getNewPosition=function(){return this.newPosition},t})(),UW=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),yl=(function(t){UW(e,t);function e(r,n){var a=t.call(this,r)||this;return a.value=n,a}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e})(Ib),$W=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Qu=(function(t){$W(e,t);function e(r,n,a){var i=t.call(this,r)||this;return a?(i.remaining=!0,i.remainingValue=i.remainingValue):(i.remaining=!1,i.remainingValue=0),i.newString=n,i}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e})(Ib),VW=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),hf=(function(t){VW(e,t);function e(r,n,a){var i=t.call(this,r)||this;if(n<0||n>10||a<0||a>10)throw new _t;return i.firstDigit=n,i.secondDigit=a,i}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e})(Ib),ix=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zW=(function(){function t(){}return t.parseFieldsInGeneralPurpose=function(e){var r,n,a,i,o,l,c,u;if(!e)return null;if(e.length<2)throw new et;var h=e.substring(0,2);try{for(var m=ix(t.TWO_DIGIT_DATA_LENGTH),x=m.next();!x.done;x=m.next()){var p=x.value;if(p[0]===h)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(2,p[2],e):t.processFixedAI(2,p[1],e)}}catch($){r={error:$}}finally{try{x&&!x.done&&(n=m.return)&&n.call(m)}finally{if(r)throw r.error}}if(e.length<3)throw new et;var y=e.substring(0,3);try{for(var w=ix(t.THREE_DIGIT_DATA_LENGTH),j=w.next();!j.done;j=w.next()){var p=j.value;if(p[0]===y)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(3,p[2],e):t.processFixedAI(3,p[1],e)}}catch($){a={error:$}}finally{try{j&&!j.done&&(i=w.return)&&i.call(w)}finally{if(a)throw a.error}}try{for(var C=ix(t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),S=C.next();!S.done;S=C.next()){var p=S.value;if(p[0]===y)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,p[2],e):t.processFixedAI(4,p[1],e)}}catch($){o={error:$}}finally{try{S&&!S.done&&(l=C.return)&&l.call(C)}finally{if(o)throw o.error}}if(e.length<4)throw new et;var k=e.substring(0,4);try{for(var P=ix(t.FOUR_DIGIT_DATA_LENGTH),O=P.next();!O.done;O=P.next()){var p=O.value;if(p[0]===k)return p[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,p[2],e):t.processFixedAI(4,p[1],e)}}catch($){c={error:$}}finally{try{O&&!O.done&&(u=P.return)&&u.call(P)}finally{if(c)throw c.error}}throw new et},t.processFixedAI=function(e,r,n){if(n.length<e)throw new et;var a=n.substring(0,e);if(n.length<e+r)throw new et;var i=n.substring(e,e+r),o=n.substring(e+r),l="("+a+")"+i,c=t.parseFieldsInGeneralPurpose(o);return c==null?l:l+c},t.processVariableAI=function(e,r,n){var a=n.substring(0,e),i;n.length<e+r?i=n.length:i=e+r;var o=n.substring(e,i),l=n.substring(i),c="("+a+")"+o,u=t.parseFieldsInGeneralPurpose(l);return u==null?c:c+u},t.VARIABLE_LENGTH=[],t.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",t.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",t.VARIABLE_LENGTH,20],["22",t.VARIABLE_LENGTH,29],["30",t.VARIABLE_LENGTH,8],["37",t.VARIABLE_LENGTH,8],["90",t.VARIABLE_LENGTH,30],["91",t.VARIABLE_LENGTH,30],["92",t.VARIABLE_LENGTH,30],["93",t.VARIABLE_LENGTH,30],["94",t.VARIABLE_LENGTH,30],["95",t.VARIABLE_LENGTH,30],["96",t.VARIABLE_LENGTH,30],["97",t.VARIABLE_LENGTH,3],["98",t.VARIABLE_LENGTH,30],["99",t.VARIABLE_LENGTH,30]],t.THREE_DIGIT_DATA_LENGTH=[["240",t.VARIABLE_LENGTH,30],["241",t.VARIABLE_LENGTH,30],["242",t.VARIABLE_LENGTH,6],["250",t.VARIABLE_LENGTH,30],["251",t.VARIABLE_LENGTH,30],["253",t.VARIABLE_LENGTH,17],["254",t.VARIABLE_LENGTH,20],["400",t.VARIABLE_LENGTH,30],["401",t.VARIABLE_LENGTH,30],["402",17],["403",t.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",t.VARIABLE_LENGTH,20],["421",t.VARIABLE_LENGTH,15],["422",3],["423",t.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",t.VARIABLE_LENGTH,15],["391",t.VARIABLE_LENGTH,18],["392",t.VARIABLE_LENGTH,15],["393",t.VARIABLE_LENGTH,18],["703",t.VARIABLE_LENGTH,30]],t.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",t.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",t.VARIABLE_LENGTH,20],["8003",t.VARIABLE_LENGTH,30],["8004",t.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",t.VARIABLE_LENGTH,30],["8008",t.VARIABLE_LENGTH,12],["8018",18],["8020",t.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",t.VARIABLE_LENGTH,70],["8200",t.VARIABLE_LENGTH,70]],t})(),Ex=(function(){function t(e){this.buffer=new Fn,this.information=e}return t.prototype.decodeAllCodes=function(e,r){var n=r,a=null;do{var i=this.decodeGeneralPurposeField(n,a),o=zW.parseFieldsInGeneralPurpose(i.getNewString());if(o!=null&&e.append(o),i.isRemaining()?a=""+i.getRemainingValue():a=null,n===i.getNewPosition())break;n=i.getNewPosition()}while(!0);return e.toString()},t.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var r=e;r<e+3;++r)if(this.information.get(r))return!0;return this.information.get(e+3)},t.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var r=this.extractNumericValueFromBitArray(e,4);return r===0?new hf(this.information.getSize(),hf.FNC1,hf.FNC1):new hf(this.information.getSize(),r-1,hf.FNC1)}var n=this.extractNumericValueFromBitArray(e,7),a=(n-8)/11,i=(n-8)%11;return new hf(e+7,a,i)},t.prototype.extractNumericValueFromBitArray=function(e,r){return t.extractNumericValueFromBitArray(this.information,e,r)},t.extractNumericValueFromBitArray=function(e,r,n){for(var a=0,i=0;i<n;++i)e.get(r+i)&&(a|=1<<n-i-1);return a},t.prototype.decodeGeneralPurposeField=function(e,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(e);var n=this.parseBlocks();return n!=null&&n.isRemaining()?new Qu(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new Qu(this.current.getPosition(),this.buffer.toString())},t.prototype.parseBlocks=function(){var e,r;do{var n=this.current.getPosition();this.current.isAlpha()?(r=this.parseAlphaBlock(),e=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),e=r.isFinished()):(r=this.parseNumericBlock(),e=r.isFinished());var a=n!==this.current.getPosition();if(!a&&!e)break}while(!e);return r.getDecodedInformation()},t.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var r=void 0;return e.isSecondDigitFNC1()?r=new Qu(this.current.getPosition(),this.buffer.toString()):r=new Qu(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Ju(!0,r)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var r=new Qu(this.current.getPosition(),this.buffer.toString());return new Ju(!0,r)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Ju(!1)},t.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new Qu(this.current.getPosition(),this.buffer.toString());return new Ju(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Ju(!1)},t.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new Qu(this.current.getPosition(),this.buffer.toString());return new Ju(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Ju(!1)},t.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var a=this.extractNumericValueFromBitArray(e,8);return a>=232&&a<253},t.prototype.decodeIsoIec646=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new yl(e+5,yl.FNC1);if(r>=5&&r<15)return new yl(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new yl(e+7,""+(n+1));if(n>=90&&n<116)return new yl(e+7,""+(n+7));var a=this.extractNumericValueFromBitArray(e,8),i;switch(a){case 232:i="!";break;case 233:i='"';break;case 234:i="%";break;case 235:i="&";break;case 236:i="'";break;case 237:i="(";break;case 238:i=")";break;case 239:i="*";break;case 240:i="+";break;case 241:i=",";break;case 242:i="-";break;case 243:i=".";break;case 244:i="/";break;case 245:i=":";break;case 246:i=";";break;case 247:i="<";break;case 248:i="=";break;case 249:i=">";break;case 250:i="?";break;case 251:i="_";break;case 252:i=" ";break;default:throw new _t}return new yl(e+8,i)},t.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},t.prototype.decodeAlphanumeric=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new yl(e+5,yl.FNC1);if(r>=5&&r<15)return new yl(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new yl(e+6,""+(n+33));var a;switch(n){case 58:a="*";break;case 59:a=",";break;case 60:a="-";break;case 61:a=".";break;case 62:a="/";break;default:throw new X0("Decoding invalid alphanumeric value: "+n)}return new yl(e+6,a)},t.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<5&&r+e<this.information.getSize();++r)if(r===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+r))return!1;return!0},t.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var r=e;r<e+3;++r)if(this.information.get(r))return!1;return!0},t.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<4&&r+e<this.information.getSize();++r)if(this.information.get(e+r))return!1;return!0},t})(),mE=(function(){function t(e){this.information=e,this.generalDecoder=new Ex(e)}return t.prototype.getInformation=function(){return this.information},t.prototype.getGeneralDecoder=function(){return this.generalDecoder},t})(),qW=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),El=(function(t){qW(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedGtin=function(r,n){r.append("(01)");var a=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,n,a)},e.prototype.encodeCompressedGtinWithoutAI=function(r,n,a){for(var i=0;i<4;++i){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*i,10);o/100===0&&r.append("0"),o/10===0&&r.append("0"),r.append(o)}e.appendCheckDigit(r,a)},e.appendCheckDigit=function(r,n){for(var a=0,i=0;i<13;i++){var o=r.charAt(i+n).charCodeAt(0)-48;a+=(i&1)===0?3*o:o}a=10-a%10,a===10&&(a=0),r.append(a)},e.GTIN_SIZE=40,e})(mE),HW=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),WW=(function(t){HW(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new Fn;r.append("(01)");var n=r.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return r.append(a),this.encodeCompressedGtinWithoutAI(r,e.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e})(El),GW=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),KW=(function(t){GW(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new Fn;return this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE)},e.HEADER_SIZE=5,e})(mE),YW=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),kx=(function(t){YW(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedWeight=function(r,n,a){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(n,a);this.addWeightCode(r,i);for(var o=this.checkWeight(i),l=1e5,c=0;c<5;++c)o/l===0&&r.append("0"),l/=10;r.append(o)},e})(El),XW=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),pE=(function(t){XW(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!=e.HEADER_SIZE+kx.GTIN_SIZE+e.WEIGHT_SIZE)throw new et;var r=new Fn;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+kx.GTIN_SIZE,e.WEIGHT_SIZE),r.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e})(kx),ZW=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),JW=(function(t){ZW(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){r.append("(3103)")},e.prototype.checkWeight=function(r){return r},e})(pE),QW=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),eG=(function(t){QW(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){n<1e4?r.append("(3202)"):r.append("(3203)")},e.prototype.checkWeight=function(r){return r<1e4?r:r-1e4},e})(pE),tG=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),rG=(function(t){tG(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+El.GTIN_SIZE)throw new et;var r=new Fn;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+El.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(392"),r.append(n),r.append(")");var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+El.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return r.append(a.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e})(El),nG=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),sG=(function(t){nG(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+El.GTIN_SIZE)throw new et;var r=new Fn;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+El.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(393"),r.append(n),r.append(")");var a=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+El.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);a/100==0&&r.append("0"),a/10==0&&r.append("0"),r.append(a);var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+El.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return r.append(i.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e})(El),aG=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Ud=(function(t){aG(e,t);function e(r,n,a){var i=t.call(this,r)||this;return i.dateCode=a,i.firstAIdigits=n,i}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!=e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new et;var r=new Fn;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(r,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),r.toString()},e.prototype.encodeCompressedDate=function(r,n){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(n,e.DATE_SIZE);if(a!=38400){r.append("("),r.append(this.dateCode),r.append(")");var i=a%32;a/=32;var o=a%12+1;a/=12;var l=a;l/10==0&&r.append("0"),r.append(l),o/10==0&&r.append("0"),r.append(o),i/10==0&&r.append("0"),r.append(i)}},e.prototype.addWeightCode=function(r,n){r.append("("),r.append(this.firstAIdigits),r.append(n/1e5),r.append(")")},e.prototype.checkWeight=function(r){return r%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e})(kx);function iG(t){try{if(t.get(1))return new WW(t);if(!t.get(2))return new KW(t);var e=Ex.extractNumericValueFromBitArray(t,1,4);switch(e){case 4:return new JW(t);case 5:return new eG(t)}var r=Ex.extractNumericValueFromBitArray(t,1,5);switch(r){case 12:return new rG(t);case 13:return new sG(t)}var n=Ex.extractNumericValueFromBitArray(t,1,7);switch(n){case 56:return new Ud(t,"310","11");case 57:return new Ud(t,"320","11");case 58:return new Ud(t,"310","13");case 59:return new Ud(t,"320","13");case 60:return new Ud(t,"310","15");case 61:return new Ud(t,"320","15");case 62:return new Ud(t,"310","17");case 63:return new Ud(t,"320","17")}}catch(a){throw console.log(a),new X0("unknown decoder: "+t)}}var a_=(function(){function t(e,r,n,a){this.leftchar=e,this.rightchar=r,this.finderpattern=n,this.maybeLast=a}return t.prototype.mayBeLast=function(){return this.maybeLast},t.prototype.getLeftChar=function(){return this.leftchar},t.prototype.getRightChar=function(){return this.rightchar},t.prototype.getFinderPattern=function(){return this.finderpattern},t.prototype.mustBeLast=function(){return this.rightchar==null},t.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},t.equals=function(e,r){return e instanceof t?t.equalsOrNull(e.leftchar,r.leftchar)&&t.equalsOrNull(e.rightchar,r.rightchar)&&t.equalsOrNull(e.finderpattern,r.finderpattern):!1},t.equalsOrNull=function(e,r){return e===null?r===null:t.equals(e,r)},t.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},t})(),oG=(function(){function t(e,r,n){this.pairs=e,this.rowNumber=r,this.wasReversed=n}return t.prototype.getPairs=function(){return this.pairs},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.isReversed=function(){return this.wasReversed},t.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},t.prototype.toString=function(){return"{ "+this.pairs+" }"},t.prototype.equals=function(e,r){return e instanceof t?this.checkEqualitity(e,r)&&e.wasReversed===r.wasReversed:!1},t.prototype.checkEqualitity=function(e,r){if(!(!e||!r)){var n;return e.forEach(function(a,i){r.forEach(function(o){a.getLeftChar().getValue()===o.getLeftChar().getValue()&&a.getRightChar().getValue()===o.getRightChar().getValue()&&a.getFinderPatter().getValue()===o.getFinderPatter().getValue()&&(n=!0)})}),n}},t})(),lG=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),$d=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cG=(function(t){lG(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.pairs=new Array(e.MAX_PAIRS),r.rows=new Array,r.startEnd=[2],r}return e.prototype.decodeRow=function(r,n,a){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(r,n))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(r,n))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(r,n){for(var a=!1;!a;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,r))}catch(l){if(l instanceof et){if(!this.pairs.length)throw new et;a=!0}}if(this.checkChecksum())return this.pairs;var i;if(this.rows.length?i=!0:i=!1,this.storeRow(r,!1),i){var o=this.checkRowsBoolean(!1);if(o!=null||(o=this.checkRowsBoolean(!0),o!=null))return o}throw new et},e.prototype.checkRowsBoolean=function(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());var n=null;try{n=this.checkRows(new Array,0)}catch(a){console.log(a)}return r&&(this.rows=this.rows.reverse()),n},e.prototype.checkRows=function(r,n){for(var a,i,o=n;o<this.rows.length;o++){var l=this.rows[o];this.pairs.length=0;try{for(var c=(a=void 0,$d(r)),u=c.next();!u.done;u=c.next()){var h=u.value;this.pairs.push(h.getPairs())}}catch(x){a={error:x}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(a)throw a.error}}if(this.pairs.push(l.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var m=new Array(r);m.push(l);try{return this.checkRows(m,o+1)}catch(x){console.log(x)}}}throw new et},e.isValidSequence=function(r){var n,a;try{for(var i=$d(e.FINDER_PATTERN_SEQUENCES),o=i.next();!o.done;o=i.next()){var l=o.value;if(!(r.length>l.length)){for(var c=!0,u=0;u<r.length;u++)if(r[u].getFinderPattern().getValue()!=l[u]){c=!1;break}if(c)return!0}}}catch(h){n={error:h}}finally{try{o&&!o.done&&(a=i.return)&&a.call(i)}finally{if(n)throw n.error}}return!1},e.prototype.storeRow=function(r,n){for(var a=0,i=!1,o=!1;a<this.rows.length;){var l=this.rows[a];if(l.getRowNumber()>r){o=l.isEquivalent(this.pairs);break}i=l.isEquivalent(this.pairs),a++}o||i||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new oG(this.pairs,r,n)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(r,n){var a,i,o,l,c,u;try{for(var h=$d(n),m=h.next();!m.done;m=h.next()){var x=m.value;if(x.getPairs().length!==r.length){var p=!0;try{for(var y=(o=void 0,$d(x.getPairs())),w=y.next();!w.done;w=y.next()){var j=w.value,C=!1;try{for(var S=(c=void 0,$d(r)),k=S.next();!k.done;k=S.next()){var P=k.value;if(a_.equals(j,P)){C=!0;break}}}catch(O){c={error:O}}finally{try{k&&!k.done&&(u=S.return)&&u.call(S)}finally{if(c)throw c.error}}C||(p=!1)}}catch(O){o={error:O}}finally{try{w&&!w.done&&(l=y.return)&&l.call(y)}finally{if(o)throw o.error}}}}}catch(O){a={error:O}}finally{try{m&&!m.done&&(i=h.return)&&i.call(h)}finally{if(a)throw a.error}}},e.isPartialRow=function(r,n){var a,i,o,l,c,u;try{for(var h=$d(n),m=h.next();!m.done;m=h.next()){var x=m.value,p=!0;try{for(var y=(o=void 0,$d(r)),w=y.next();!w.done;w=y.next()){var j=w.value,C=!1;try{for(var S=(c=void 0,$d(x.getPairs())),k=S.next();!k.done;k=S.next()){var P=k.value;if(j.equals(P)){C=!0;break}}}catch(O){c={error:O}}finally{try{k&&!k.done&&(u=S.return)&&u.call(S)}finally{if(c)throw c.error}}if(!C){p=!1;break}}}catch(O){o={error:O}}finally{try{w&&!w.done&&(l=y.return)&&l.call(y)}finally{if(o)throw o.error}}if(p)return!0}}catch(O){a={error:O}}finally{try{m&&!m.done&&(i=h.return)&&i.call(h)}finally{if(a)throw a.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(r){var n=BW.buildBitArray(r),a=iG(n),i=a.parseInformation(),o=r[0].getFinderPattern().getResultPoints(),l=r[r.length-1].getFinderPattern().getResultPoints(),c=[o[0],o[1],l[0],l[1]];return new to(i,null,null,c,Zt.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var r=this.pairs.get(0),n=r.getLeftChar(),a=r.getRightChar();if(a==null)return!1;for(var i=a.getChecksumPortion(),o=2,l=1;l<this.pairs.size();++l){var c=this.pairs.get(l);i+=c.getLeftChar().getChecksumPortion(),o++;var u=c.getRightChar();u!=null&&(i+=u.getChecksumPortion(),o++)}i%=211;var h=211*(o-4)+i;return h==n.getValue()},e.getNextSecondBar=function(r,n){var a;return r.get(n)?(a=r.getNextUnset(n),a=r.getNextSet(a)):(a=r.getNextSet(n),a=r.getNextUnset(a)),a},e.prototype.retrieveNextPair=function(r,n,a){var i=n.length%2==0;this.startFromEven&&(i=!i);var o,l=!0,c=-1;do this.findNextPair(r,n,c),o=this.parseFoundFinderPattern(r,a,i),o==null?c=e.getNextSecondBar(r,this.startEnd[0]):l=!1;while(l);var u=this.decodeDataCharacter(r,o,i,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new et;var h;try{h=this.decodeDataCharacter(r,o,i,!1)}catch(m){h=null,console.log(m)}return new a_(u,h,o,!0)},e.prototype.isEmptyPair=function(r){return r.length===0},e.prototype.findNextPair=function(r,n,a){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;var o=r.getSize(),l;if(a>=0)l=a;else if(this.isEmptyPair(n))l=0;else{var c=n[n.length-1];l=c.getFinderPattern().getStartEnd()[1]}var u=n.length%2!=0;this.startFromEven&&(u=!u);for(var h=!1;l<o&&(h=!r.get(l),!!h);)l++;for(var m=0,x=l,p=l;p<o;p++)if(r.get(p)!=h)i[m]++;else{if(m==3){if(u&&e.reverseCounters(i),e.isFinderPattern(i)){this.startEnd[0]=x,this.startEnd[1]=p;return}u&&e.reverseCounters(i),x+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,m--}else m++;i[m]=1,h=!h}throw new et},e.reverseCounters=function(r){for(var n=r.length,a=0;a<n/2;++a){var i=r[a];r[a]=r[n-a-1],r[n-a-1]=i}},e.prototype.parseFoundFinderPattern=function(r,n,a){var i,o,l;if(a){for(var c=this.startEnd[0]-1;c>=0&&!r.get(c);)c--;c++,i=this.startEnd[0]-c,o=c,l=this.startEnd[1]}else o=this.startEnd[0],l=r.getNextUnset(this.startEnd[1]+1),i=l-this.startEnd[1];var u=this.getDecodeFinderCounters();Yn.arraycopy(u,0,u,1,u.length-1),u[0]=i;var h;try{h=this.parseFinderValue(u,e.FINDER_PATTERNS)}catch{return null}return new fE(h,[o,l],o,l,n)},e.prototype.decodeDataCharacter=function(r,n,a,i){for(var o=this.getDataCharacterCounters(),l=0;l<o.length;l++)o[l]=0;if(i)e.recordPatternInReverse(r,n.getStartEnd()[0],o);else{e.recordPattern(r,n.getStartEnd()[1],o);for(var c=0,u=o.length-1;c<u;c++,u--){var h=o[c];o[c]=o[u],o[u]=h}}var m=17,x=xn.sum(new Int32Array(o))/m,p=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(x-p)/p>.3)throw new et;for(var y=this.getOddCounts(),w=this.getEvenCounts(),j=this.getOddRoundingErrors(),C=this.getEvenRoundingErrors(),c=0;c<o.length;c++){var S=1*o[c]/x,k=S+.5;if(k<1){if(S<.3)throw new et;k=1}else if(k>8){if(S>8.7)throw new et;k=8}var P=c/2;(c&1)==0?(y[P]=k,j[P]=S-k):(w[P]=k,C[P]=S-k)}this.adjustOddEvenCounts(m);for(var O=4*n.getValue()+(a?0:2)+(i?0:1)-1,$=0,R=0,c=y.length-1;c>=0;c--){if(e.isNotA1left(n,a,i)){var B=e.WEIGHTS[O][2*c];R+=y[c]*B}$+=y[c]}for(var U=0,c=w.length-1;c>=0;c--)if(e.isNotA1left(n,a,i)){var B=e.WEIGHTS[O][2*c+1];U+=w[c]*B}var K=R+U;if(($&1)!=0||$>13||$<4)throw new et;var M=(13-$)/2,q=e.SYMBOL_WIDEST[M],re=9-q,ee=Af.getRSSvalue(y,q,!0),H=Af.getRSSvalue(w,re,!1),se=e.EVEN_TOTAL_SUBSET[M],ue=e.GSUM[M],G=ee*se+H+ue;return new c1(G,K)},e.isNotA1left=function(r,n,a){return!(r.getValue()==0&&n&&a)},e.prototype.adjustOddEvenCounts=function(r){var n=xn.sum(new Int32Array(this.getOddCounts())),a=xn.sum(new Int32Array(this.getEvenCounts())),i=!1,o=!1;n>13?o=!0:n<4&&(i=!0);var l=!1,c=!1;a>13?c=!0:a<4&&(l=!0);var u=n+a-r,h=(n&1)==1,m=(a&1)==0;if(u==1)if(h){if(m)throw new et;o=!0}else{if(!m)throw new et;c=!0}else if(u==-1)if(h){if(m)throw new et;i=!0}else{if(!m)throw new et;l=!0}else if(u==0){if(h){if(!m)throw new et;n<a?(i=!0,c=!0):(o=!0,l=!0)}else if(m)throw new et}else throw new et;if(i){if(o)throw new et;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(c)throw new et;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e})(rh),dG=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),uG=(function(t){dG(e,t);function e(r,n,a){var i=t.call(this,r,n)||this;return i.count=0,i.finderPattern=a,i}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e})(c1),hG=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Fv=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},i_=(function(t){hG(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.possibleLeftPairs=[],r.possibleRightPairs=[],r}return e.prototype.decodeRow=function(r,n,a){var i,o,l,c,u=this.decodePair(n,!1,r,a);e.addOrTally(this.possibleLeftPairs,u),n.reverse();var h=this.decodePair(n,!0,r,a);e.addOrTally(this.possibleRightPairs,h),n.reverse();try{for(var m=Fv(this.possibleLeftPairs),x=m.next();!x.done;x=m.next()){var p=x.value;if(p.getCount()>1)try{for(var y=(l=void 0,Fv(this.possibleRightPairs)),w=y.next();!w.done;w=y.next()){var j=w.value;if(j.getCount()>1&&e.checkChecksum(p,j))return e.constructResult(p,j)}}catch(C){l={error:C}}finally{try{w&&!w.done&&(c=y.return)&&c.call(y)}finally{if(l)throw l.error}}}}catch(C){i={error:C}}finally{try{x&&!x.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}throw new et},e.addOrTally=function(r,n){var a,i;if(n!=null){var o=!1;try{for(var l=Fv(r),c=l.next();!c.done;c=l.next()){var u=c.value;if(u.getValue()===n.getValue()){u.incrementCount(),o=!0;break}}}catch(h){a={error:h}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(a)throw a.error}}o||r.push(n)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(r,n){for(var a=4537077*r.getValue()+n.getValue(),i=new String(a).toString(),o=new Fn,l=13-i.length;l>0;l--)o.append("0");o.append(i);for(var c=0,l=0;l<13;l++){var u=o.charAt(l).charCodeAt(0)-48;c+=(l&1)===0?3*u:u}c=10-c%10,c===10&&(c=0),o.append(c.toString());var h=r.getFinderPattern().getResultPoints(),m=n.getFinderPattern().getResultPoints();return new to(o.toString(),null,0,[h[0],h[1],m[0],m[1]],Zt.RSS_14,new Date().getTime())},e.checkChecksum=function(r,n){var a=(r.getChecksumPortion()+16*n.getChecksumPortion())%79,i=9*r.getFinderPattern().getValue()+n.getFinderPattern().getValue();return i>72&&i--,i>8&&i--,a===i},e.prototype.decodePair=function(r,n,a,i){try{var o=this.findFinderPattern(r,n),l=this.parseFoundFinderPattern(r,a,n,o),c=i==null?null:i.get(ss.NEED_RESULT_POINT_CALLBACK);if(c!=null){var u=(o[0]+o[1])/2;n&&(u=r.getSize()-1-u),c.foundPossibleResultPoint(new rr(u,a))}var h=this.decodeDataCharacter(r,l,!0),m=this.decodeDataCharacter(r,l,!1);return new uG(1597*h.getValue()+m.getValue(),h.getChecksumPortion()+4*m.getChecksumPortion(),l)}catch{return null}},e.prototype.decodeDataCharacter=function(r,n,a){for(var i=this.getDataCharacterCounters(),o=0;o<i.length;o++)i[o]=0;if(a)Wa.recordPatternInReverse(r,n.getStartEnd()[0],i);else{Wa.recordPattern(r,n.getStartEnd()[1]+1,i);for(var l=0,c=i.length-1;l<c;l++,c--){var u=i[l];i[l]=i[c],i[c]=u}}for(var h=a?16:15,m=xn.sum(new Int32Array(i))/h,x=this.getOddCounts(),p=this.getEvenCounts(),y=this.getOddRoundingErrors(),w=this.getEvenRoundingErrors(),l=0;l<i.length;l++){var j=i[l]/m,C=Math.floor(j+.5);C<1?C=1:C>8&&(C=8);var S=Math.floor(l/2);(l&1)===0?(x[S]=C,y[S]=j-C):(p[S]=C,w[S]=j-C)}this.adjustOddEvenCounts(a,h);for(var k=0,P=0,l=x.length-1;l>=0;l--)P*=9,P+=x[l],k+=x[l];for(var O=0,$=0,l=p.length-1;l>=0;l--)O*=9,O+=p[l],$+=p[l];var R=P+3*O;if(a){if((k&1)!==0||k>12||k<4)throw new et;var B=(12-k)/2,U=e.OUTSIDE_ODD_WIDEST[B],K=9-U,M=Af.getRSSvalue(x,U,!1),q=Af.getRSSvalue(p,K,!0),re=e.OUTSIDE_EVEN_TOTAL_SUBSET[B],ee=e.OUTSIDE_GSUM[B];return new c1(M*re+q+ee,R)}else{if(($&1)!==0||$>10||$<4)throw new et;var B=(10-$)/2,U=e.INSIDE_ODD_WIDEST[B],K=9-U,M=Af.getRSSvalue(x,U,!0),q=Af.getRSSvalue(p,K,!1),H=e.INSIDE_ODD_TOTAL_SUBSET[B],ee=e.INSIDE_GSUM[B];return new c1(q*H+M+ee,R)}},e.prototype.findFinderPattern=function(r,n){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var i=r.getSize(),o=!1,l=0;l<i&&(o=!r.get(l),n!==o);)l++;for(var c=0,u=l,h=l;h<i;h++)if(r.get(h)!==o)a[c]++;else{if(c===3){if(rh.isFinderPattern(a))return[u,h];u+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,c--}else c++;a[c]=1,o=!o}throw new et},e.prototype.parseFoundFinderPattern=function(r,n,a,i){for(var o=r.get(i[0]),l=i[0]-1;l>=0&&o!==r.get(l);)l--;l++;var c=i[0]-l,u=this.getDecodeFinderCounters(),h=new Int32Array(u.length);Yn.arraycopy(u,0,h,1,u.length-1),h[0]=c;var m=this.parseFinderValue(h,e.FINDER_PATTERNS),x=l,p=i[1];return a&&(x=r.getSize()-1-x,p=r.getSize()-1-p),new fE(m,[l,i[1]],x,p,n)},e.prototype.adjustOddEvenCounts=function(r,n){var a=xn.sum(new Int32Array(this.getOddCounts())),i=xn.sum(new Int32Array(this.getEvenCounts())),o=!1,l=!1,c=!1,u=!1;r?(a>12?l=!0:a<4&&(o=!0),i>12?u=!0:i<4&&(c=!0)):(a>11?l=!0:a<5&&(o=!0),i>10?u=!0:i<4&&(c=!0));var h=a+i-n,m=(a&1)===(r?1:0),x=(i&1)===1;if(h===1)if(m){if(x)throw new et;l=!0}else{if(!x)throw new et;u=!0}else if(h===-1)if(m){if(x)throw new et;o=!0}else{if(!x)throw new et;c=!0}else if(h===0){if(m){if(!x)throw new et;a<i?(o=!0,u=!0):(l=!0,c=!0)}else if(x)throw new et}else throw new et;if(o){if(l)throw new et;rh.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(l&&rh.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(u)throw new et;rh.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&rh.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e})(rh),fG=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),e0=(function(t){fG(e,t);function e(r){var n=t.call(this)||this;n.readers=[];var a=r?r.get(ss.POSSIBLE_FORMATS):null,i=r&&r.get(ss.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;return a&&((a.includes(Zt.EAN_13)||a.includes(Zt.UPC_A)||a.includes(Zt.EAN_8)||a.includes(Zt.UPC_E))&&n.readers.push(new Lv(r)),a.includes(Zt.CODE_39)&&n.readers.push(new Z4(i)),a.includes(Zt.CODE_128)&&n.readers.push(new X4),a.includes(Zt.ITF)&&n.readers.push(new J4),a.includes(Zt.RSS_14)&&n.readers.push(new i_),a.includes(Zt.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new cG))),n.readers.length===0&&(n.readers.push(new Lv(r)),n.readers.push(new Z4),n.readers.push(new Lv(r)),n.readers.push(new X4),n.readers.push(new J4),n.readers.push(new i_)),n}return e.prototype.decodeRow=function(r,n,a){for(var i=0;i<this.readers.length;i++)try{return this.readers[i].decodeRow(r,n,a)}catch{}throw new et},e.prototype.reset=function(){this.readers.forEach(function(r){return r.reset()})},e})(Wa),mG=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),pG=(function(t){mG(e,t);function e(r,n){return r===void 0&&(r=500),t.call(this,new e0(n),r,n)||this}return e})(um),o_=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Cn=(function(){function t(e,r,n){this.ecCodewords=e,this.ecBlocks=[r],n&&this.ecBlocks.push(n)}return t.prototype.getECCodewords=function(){return this.ecCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t})(),yn=(function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t})(),xG=(function(){function t(e,r,n,a,i,o){var l,c;this.versionNumber=e,this.symbolSizeRows=r,this.symbolSizeColumns=n,this.dataRegionSizeRows=a,this.dataRegionSizeColumns=i,this.ecBlocks=o;var u=0,h=o.getECCodewords(),m=o.getECBlocks();try{for(var x=o_(m),p=x.next();!p.done;p=x.next()){var y=p.value;u+=y.getCount()*(y.getDataCodewords()+h)}}catch(w){l={error:w}}finally{try{p&&!p.done&&(c=x.return)&&c.call(x)}finally{if(l)throw l.error}}this.totalCodewords=u}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},t.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},t.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},t.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t.getVersionForDimensions=function(e,r){var n,a;if((e&1)!==0||(r&1)!==0)throw new _t;try{for(var i=o_(t.VERSIONS),o=i.next();!o.done;o=i.next()){var l=o.value;if(l.symbolSizeRows===e&&l.symbolSizeColumns===r)return l}}catch(c){n={error:c}}finally{try{o&&!o.done&&(a=i.return)&&a.call(i)}finally{if(n)throw n.error}}throw new _t},t.prototype.toString=function(){return""+this.versionNumber},t.buildVersions=function(){return[new t(1,10,10,8,8,new Cn(5,new yn(1,3))),new t(2,12,12,10,10,new Cn(7,new yn(1,5))),new t(3,14,14,12,12,new Cn(10,new yn(1,8))),new t(4,16,16,14,14,new Cn(12,new yn(1,12))),new t(5,18,18,16,16,new Cn(14,new yn(1,18))),new t(6,20,20,18,18,new Cn(18,new yn(1,22))),new t(7,22,22,20,20,new Cn(20,new yn(1,30))),new t(8,24,24,22,22,new Cn(24,new yn(1,36))),new t(9,26,26,24,24,new Cn(28,new yn(1,44))),new t(10,32,32,14,14,new Cn(36,new yn(1,62))),new t(11,36,36,16,16,new Cn(42,new yn(1,86))),new t(12,40,40,18,18,new Cn(48,new yn(1,114))),new t(13,44,44,20,20,new Cn(56,new yn(1,144))),new t(14,48,48,22,22,new Cn(68,new yn(1,174))),new t(15,52,52,24,24,new Cn(42,new yn(2,102))),new t(16,64,64,14,14,new Cn(56,new yn(2,140))),new t(17,72,72,16,16,new Cn(36,new yn(4,92))),new t(18,80,80,18,18,new Cn(48,new yn(4,114))),new t(19,88,88,20,20,new Cn(56,new yn(4,144))),new t(20,96,96,22,22,new Cn(68,new yn(4,174))),new t(21,104,104,24,24,new Cn(56,new yn(6,136))),new t(22,120,120,18,18,new Cn(68,new yn(6,175))),new t(23,132,132,20,20,new Cn(62,new yn(8,163))),new t(24,144,144,22,22,new Cn(62,new yn(8,156),new yn(2,155))),new t(25,8,18,6,16,new Cn(7,new yn(1,5))),new t(26,8,32,6,14,new Cn(11,new yn(1,10))),new t(27,12,26,10,24,new Cn(14,new yn(1,16))),new t(28,12,36,10,16,new Cn(18,new yn(1,22))),new t(29,16,36,14,16,new Cn(24,new yn(1,32))),new t(30,16,48,14,22,new Cn(28,new yn(1,49)))]},t.VERSIONS=t.buildVersions(),t})(),gG=(function(){function t(e){var r=e.getHeight();if(r<8||r>144||(r&1)!==0)throw new _t;this.version=t.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new hc(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return t.prototype.getVersion=function(){return this.version},t.readVersion=function(e){var r=e.getHeight(),n=e.getWidth();return xG.getVersionForDimensions(r,n)},t.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),r=0,n=4,a=0,i=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth(),l=!1,c=!1,u=!1,h=!1;do if(n===i&&a===0&&!l)e[r++]=this.readCorner1(i,o)&255,n-=2,a+=2,l=!0;else if(n===i-2&&a===0&&(o&3)!==0&&!c)e[r++]=this.readCorner2(i,o)&255,n-=2,a+=2,c=!0;else if(n===i+4&&a===2&&(o&7)===0&&!u)e[r++]=this.readCorner3(i,o)&255,n-=2,a+=2,u=!0;else if(n===i-2&&a===0&&(o&7)===4&&!h)e[r++]=this.readCorner4(i,o)&255,n-=2,a+=2,h=!0;else{do n<i&&a>=0&&!this.readMappingMatrix.get(a,n)&&(e[r++]=this.readUtah(n,a,i,o)&255),n-=2,a+=2;while(n>=0&&a<o);n+=1,a+=3;do n>=0&&a<o&&!this.readMappingMatrix.get(a,n)&&(e[r++]=this.readUtah(n,a,i,o)&255),n+=2,a-=2;while(n<i&&a>=0);n+=3,a+=1}while(n<i||a<o);if(r!==this.version.getTotalCodewords())throw new _t;return e},t.prototype.readModule=function(e,r,n,a){return e<0&&(e+=n,r+=4-(n+4&7)),r<0&&(r+=a,e+=4-(a+4&7)),this.readMappingMatrix.set(r,e),this.mappingBitMatrix.get(r,e)},t.prototype.readUtah=function(e,r,n,a){var i=0;return this.readModule(e-2,r-2,n,a)&&(i|=1),i<<=1,this.readModule(e-2,r-1,n,a)&&(i|=1),i<<=1,this.readModule(e-1,r-2,n,a)&&(i|=1),i<<=1,this.readModule(e-1,r-1,n,a)&&(i|=1),i<<=1,this.readModule(e-1,r,n,a)&&(i|=1),i<<=1,this.readModule(e,r-2,n,a)&&(i|=1),i<<=1,this.readModule(e,r-1,n,a)&&(i|=1),i<<=1,this.readModule(e,r,n,a)&&(i|=1),i},t.prototype.readCorner1=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,1,e,r)&&(n|=1),n<<=1,this.readModule(e-1,2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.readCorner2=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-4,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner3=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-3,e,r)&&(n|=1),n<<=1,this.readModule(1,r-2,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner4=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.extractDataRegion=function(e){var r=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==r)throw new fr("Dimension of bitMatrix must match the version size");for(var a=this.version.getDataRegionSizeRows(),i=this.version.getDataRegionSizeColumns(),o=r/a|0,l=n/i|0,c=o*a,u=l*i,h=new hc(u,c),m=0;m<o;++m)for(var x=m*a,p=0;p<l;++p)for(var y=p*i,w=0;w<a;++w)for(var j=m*(a+2)+1+w,C=x+w,S=0;S<i;++S){var k=p*(i+2)+1+S;if(e.get(k,j)){var P=y+S;h.set(P,C)}}return h},t})(),l_=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vG=(function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r){var n,a,i,o,l=r.getECBlocks(),c=0,u=l.getECBlocks();try{for(var h=l_(u),m=h.next();!m.done;m=h.next()){var x=m.value;c+=x.getCount()}}catch(ee){n={error:ee}}finally{try{m&&!m.done&&(a=h.return)&&a.call(h)}finally{if(n)throw n.error}}var p=new Array(c),y=0;try{for(var w=l_(u),j=w.next();!j.done;j=w.next())for(var x=j.value,C=0;C<x.getCount();C++){var S=x.getDataCodewords(),k=l.getECCodewords()+S;p[y++]=new t(S,new Uint8Array(k))}}catch(ee){i={error:ee}}finally{try{j&&!j.done&&(o=w.return)&&o.call(w)}finally{if(i)throw i.error}}for(var P=p[0].codewords.length,O=P-l.getECCodewords(),$=O-1,R=0,C=0;C<$;C++)for(var B=0;B<y;B++)p[B].codewords[C]=e[R++];for(var U=r.getVersionNumber()===24,K=U?8:y,B=0;B<K;B++)p[B].codewords[O-1]=e[R++];for(var M=p[0].codewords.length,C=O;C<M;C++)for(var B=0;B<y;B++){var q=U?(B+8)%y:B,re=U&&q>7?C-1:C;p[q].codewords[re]=e[R++]}if(R!==e.length)throw new fr;return p},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t})(),xE=(function(){function t(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return t.prototype.getBitOffset=function(){return this.bitOffset},t.prototype.getByteOffset=function(){return this.byteOffset},t.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new fr(""+e);var r=0,n=this.bitOffset,a=this.byteOffset,i=this.bytes;if(n>0){var o=8-n,l=e<o?e:o,c=o-l,u=255>>8-l<<c;r=(i[a]&u)>>c,e-=l,n+=l,n===8&&(n=0,a++)}if(e>0){for(;e>=8;)r=r<<8|i[a]&255,a++,e-=8;if(e>0){var c=8-e,u=255>>c<<c;r=r<<e|(i[a]&u)>>c,n+=e}}return this.bitOffset=n,this.byteOffset=a,r},t.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},t})(),ga;(function(t){t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE"})(ga||(ga={}));var yG=(function(){function t(){}return t.decode=function(e){var r=new xE(e),n=new Fn,a=new Fn,i=new Array,o=ga.ASCII_ENCODE;do if(o===ga.ASCII_ENCODE)o=this.decodeAsciiSegment(r,n,a);else{switch(o){case ga.C40_ENCODE:this.decodeC40Segment(r,n);break;case ga.TEXT_ENCODE:this.decodeTextSegment(r,n);break;case ga.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,n);break;case ga.EDIFACT_ENCODE:this.decodeEdifactSegment(r,n);break;case ga.BASE256_ENCODE:this.decodeBase256Segment(r,n,i);break;default:throw new _t}o=ga.ASCII_ENCODE}while(o!==ga.PAD_ENCODE&&r.available()>0);return a.length()>0&&n.append(a.toString()),new K1(e,n.toString(),i.length===0?null:i,null)},t.decodeAsciiSegment=function(e,r,n){var a=!1;do{var i=e.readBits(8);if(i===0)throw new _t;if(i<=128)return a&&(i+=128),r.append(String.fromCharCode(i-1)),ga.ASCII_ENCODE;if(i===129)return ga.PAD_ENCODE;if(i<=229){var o=i-130;o<10&&r.append("0"),r.append(""+o)}else switch(i){case 230:return ga.C40_ENCODE;case 231:return ga.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:a=!0;break;case 236:r.append("[)>05"),n.insert(0,"");break;case 237:r.append("[)>06"),n.insert(0,"");break;case 238:return ga.ANSIX12_ENCODE;case 239:return ga.TEXT_ENCODE;case 240:return ga.EDIFACT_ENCODE;case 241:break;default:if(i!==254||e.available()!==0)throw new _t;break}}while(e.available()>0);return ga.ASCII_ENCODE},t.decodeC40Segment=function(e,r){var n=!1,a=[],i=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),a);for(var l=0;l<3;l++){var c=a[l];switch(i){case 0:if(c<3)i=c+1;else if(c<this.C40_BASIC_SET_CHARS.length){var u=this.C40_BASIC_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else throw new _t;break;case 1:n?(r.append(String.fromCharCode(c+128)),n=!1):r.append(String.fromCharCode(c)),i=0;break;case 2:if(c<this.C40_SHIFT2_SET_CHARS.length){var u=this.C40_SHIFT2_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else switch(c){case 27:r.append("");break;case 30:n=!0;break;default:throw new _t}i=0;break;case 3:n?(r.append(String.fromCharCode(c+224)),n=!1):r.append(String.fromCharCode(c+96)),i=0;break;default:throw new _t}}}while(e.available()>0)},t.decodeTextSegment=function(e,r){var n=!1,a=[],i=0;do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),a);for(var l=0;l<3;l++){var c=a[l];switch(i){case 0:if(c<3)i=c+1;else if(c<this.TEXT_BASIC_SET_CHARS.length){var u=this.TEXT_BASIC_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else throw new _t;break;case 1:n?(r.append(String.fromCharCode(c+128)),n=!1):r.append(String.fromCharCode(c)),i=0;break;case 2:if(c<this.TEXT_SHIFT2_SET_CHARS.length){var u=this.TEXT_SHIFT2_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u)}else switch(c){case 27:r.append("");break;case 30:n=!0;break;default:throw new _t}i=0;break;case 3:if(c<this.TEXT_SHIFT3_SET_CHARS.length){var u=this.TEXT_SHIFT3_SET_CHARS[c];n?(r.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):r.append(u),i=0}else throw new _t;break;default:throw new _t}}}while(e.available()>0)},t.decodeAnsiX12Segment=function(e,r){var n=[];do{if(e.available()===8)return;var a=e.readBits(8);if(a===254)return;this.parseTwoBytes(a,e.readBits(8),n);for(var i=0;i<3;i++){var o=n[i];switch(o){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(o<14)r.append(String.fromCharCode(o+44));else if(o<40)r.append(String.fromCharCode(o+51));else throw new _t;break}}}while(e.available()>0)},t.parseTwoBytes=function(e,r,n){var a=(e<<8)+r-1,i=Math.floor(a/1600);n[0]=i,a-=i*1600,i=Math.floor(a/40),n[1]=i,n[2]=a-i*40},t.decodeEdifactSegment=function(e,r){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var a=e.readBits(6);if(a===31){var i=8-e.getBitOffset();i!==8&&e.readBits(i);return}(a&32)===0&&(a|=64),r.append(String.fromCharCode(a))}}while(e.available()>0)},t.decodeBase256Segment=function(e,r,n){var a=1+e.getByteOffset(),i=this.unrandomize255State(e.readBits(8),a++),o;if(i===0?o=e.available()/8|0:i<250?o=i:o=250*(i-249)+this.unrandomize255State(e.readBits(8),a++),o<0)throw new _t;for(var l=new Uint8Array(o),c=0;c<o;c++){if(e.available()<8)throw new _t;l[c]=this.unrandomize255State(e.readBits(8),a++)}n.push(l);try{r.append(oc.decode(l,Gn.ISO88591))}catch(u){throw new X0("Platform does not support required encoding: "+u.message)}},t.unrandomize255State=function(e,r){var n=149*r%255+1,a=e-n;return a>=0?a:a+256},t.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],t.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t.TEXT_SHIFT2_SET_CHARS=t.C40_SHIFT2_SET_CHARS,t.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],t})(),wG=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bG=(function(){function t(){this.rsDecoder=new Y1(Ki.DATA_MATRIX_FIELD_256)}return t.prototype.decode=function(e){var r,n,a=new gG(e),i=a.getVersion(),o=a.readCodewords(),l=vG.getDataBlocks(o,i),c=0;try{for(var u=wG(l),h=u.next();!h.done;h=u.next()){var m=h.value;c+=m.getNumDataCodewords()}}catch(k){r={error:k}}finally{try{h&&!h.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}for(var x=new Uint8Array(c),p=l.length,y=0;y<p;y++){var w=l[y],j=w.getCodewords(),C=w.getNumDataCodewords();this.correctErrors(j,C);for(var S=0;S<C;S++)x[S*p+y]=j[S]}return yG.decode(x)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new qa}for(var a=0;a<r;a++)e[a]=n[a]},t})(),NG=(function(){function t(e){this.image=e,this.rectangleDetector=new Oy(this.image)}return t.prototype.detect=function(){var e=this.rectangleDetector.detect(),r=this.detectSolid1(e);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new et;r=this.shiftToModuleCenter(r);var n=r[0],a=r[1],i=r[2],o=r[3],l=this.transitionsBetween(n,o)+1,c=this.transitionsBetween(i,o)+1;(l&1)===1&&(l+=1),(c&1)===1&&(c+=1),4*l<7*c&&4*c<7*l&&(l=c=Math.max(l,c));var u=t.sampleGrid(this.image,n,a,i,o,l,c);return new Pb(u,[n,a,i,o])},t.shiftPoint=function(e,r,n){var a=(r.getX()-e.getX())/(n+1),i=(r.getY()-e.getY())/(n+1);return new rr(e.getX()+a,e.getY()+i)},t.moveAway=function(e,r,n){var a=e.getX(),i=e.getY();return a<r?a-=1:a+=1,i<n?i-=1:i+=1,new rr(a,i)},t.prototype.detectSolid1=function(e){var r=e[0],n=e[1],a=e[3],i=e[2],o=this.transitionsBetween(r,n),l=this.transitionsBetween(n,a),c=this.transitionsBetween(a,i),u=this.transitionsBetween(i,r),h=o,m=[i,r,n,a];return h>l&&(h=l,m[0]=r,m[1]=n,m[2]=a,m[3]=i),h>c&&(h=c,m[0]=n,m[1]=a,m[2]=i,m[3]=r),h>u&&(m[0]=a,m[1]=i,m[2]=r,m[3]=n),m},t.prototype.detectSolid2=function(e){var r=e[0],n=e[1],a=e[2],i=e[3],o=this.transitionsBetween(r,i),l=t.shiftPoint(n,a,(o+1)*4),c=t.shiftPoint(a,n,(o+1)*4),u=this.transitionsBetween(l,r),h=this.transitionsBetween(c,i);return u<h?(e[0]=r,e[1]=n,e[2]=a,e[3]=i):(e[0]=n,e[1]=a,e[2]=i,e[3]=r),e},t.prototype.correctTopRight=function(e){var r=e[0],n=e[1],a=e[2],i=e[3],o=this.transitionsBetween(r,i),l=this.transitionsBetween(n,i),c=t.shiftPoint(r,n,(l+1)*4),u=t.shiftPoint(a,n,(o+1)*4);o=this.transitionsBetween(c,i),l=this.transitionsBetween(u,i);var h=new rr(i.getX()+(a.getX()-n.getX())/(o+1),i.getY()+(a.getY()-n.getY())/(o+1)),m=new rr(i.getX()+(r.getX()-n.getX())/(l+1),i.getY()+(r.getY()-n.getY())/(l+1));if(!this.isValid(h))return this.isValid(m)?m:null;if(!this.isValid(m))return h;var x=this.transitionsBetween(c,h)+this.transitionsBetween(u,h),p=this.transitionsBetween(c,m)+this.transitionsBetween(u,m);return x>p?h:m},t.prototype.shiftToModuleCenter=function(e){var r=e[0],n=e[1],a=e[2],i=e[3],o=this.transitionsBetween(r,i)+1,l=this.transitionsBetween(a,i)+1,c=t.shiftPoint(r,n,l*4),u=t.shiftPoint(a,n,o*4);o=this.transitionsBetween(c,i)+1,l=this.transitionsBetween(u,i)+1,(o&1)===1&&(o+=1),(l&1)===1&&(l+=1);var h=(r.getX()+n.getX()+a.getX()+i.getX())/4,m=(r.getY()+n.getY()+a.getY()+i.getY())/4;r=t.moveAway(r,h,m),n=t.moveAway(n,h,m),a=t.moveAway(a,h,m),i=t.moveAway(i,h,m);var x,p;return c=t.shiftPoint(r,n,l*4),c=t.shiftPoint(c,i,o*4),x=t.shiftPoint(n,r,l*4),x=t.shiftPoint(x,a,o*4),u=t.shiftPoint(a,i,l*4),u=t.shiftPoint(u,n,o*4),p=t.shiftPoint(i,a,l*4),p=t.shiftPoint(p,r,o*4),[c,x,u,p]},t.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},t.sampleGrid=function(e,r,n,a,i,o,l){var c=Tb.getInstance();return c.sampleGrid(e,o,l,.5,.5,o-.5,.5,o-.5,l-.5,.5,l-.5,r.getX(),r.getY(),i.getX(),i.getY(),a.getX(),a.getY(),n.getX(),n.getY())},t.prototype.transitionsBetween=function(e,r){var n=Math.trunc(e.getX()),a=Math.trunc(e.getY()),i=Math.trunc(r.getX()),o=Math.trunc(r.getY()),l=Math.abs(o-a)>Math.abs(i-n);if(l){var c=n;n=a,a=c,c=i,i=o,o=c}for(var u=Math.abs(i-n),h=Math.abs(o-a),m=-u/2,x=a<o?1:-1,p=n<i?1:-1,y=0,w=this.image.get(l?a:n,l?n:a),j=n,C=a;j!==i;j+=p){var S=this.image.get(l?C:j,l?j:C);if(S!==w&&(y++,w=S),m+=h,m>0){if(C===o)break;C+=x,m-=u}}return y},t})(),Fy=(function(){function t(){this.decoder=new bG}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n,a;if(r!=null&&r.has(ss.PURE_BARCODE)){var i=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(i),a=t.NO_POINTS}else{var o=new NG(e.getBlackMatrix()).detect();n=this.decoder.decode(o.getBits()),a=o.getPoints()}var l=n.getRawBytes(),c=new to(n.getText(),l,8*l.length,a,Zt.DATA_MATRIX,Yn.currentTimeMillis()),u=n.getByteSegments();u!=null&&c.putMetadata(Ha.BYTE_SEGMENTS,u);var h=n.getECLevel();return h!=null&&c.putMetadata(Ha.ERROR_CORRECTION_LEVEL,h),c},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r==null||n==null)throw new et;var a=this.moduleSize(r,e),i=r[1],o=n[1],l=r[0],c=n[0],u=(c-l+1)/a,h=(o-i+1)/a;if(u<=0||h<=0)throw new et;var m=a/2;i+=m,l+=m;for(var x=new hc(u,h),p=0;p<h;p++)for(var y=i+p*a,w=0;w<u;w++)e.get(l+w*a,y)&&x.set(w,p);return x},t.moduleSize=function(e,r){for(var n=r.getWidth(),a=e[0],i=e[1];a<n&&r.get(a,i);)a++;if(a===n)throw new et;var o=a-e[0];if(o===0)throw new et;return o},t.NO_POINTS=[],t})(),jG=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(t){jG(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new Fy,r)||this}return e})(um);var Ef;(function(t){t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H"})(Ef||(Ef={}));var _G=(function(){function t(e,r,n){this.value=e,this.stringValue=r,this.bits=n,t.FOR_BITS.set(n,this),t.FOR_VALUE.set(e,this)}return t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.fromString=function(e){switch(e){case"L":return t.L;case"M":return t.M;case"Q":return t.Q;case"H":return t.H;default:throw new jl(e+"not available")}},t.prototype.toString=function(){return this.stringValue},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.forBits=function(e){if(e<0||e>=t.FOR_BITS.size)throw new fr;return t.FOR_BITS.get(e)},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.L=new t(Ef.L,"L",1),t.M=new t(Ef.M,"M",0),t.Q=new t(Ef.Q,"Q",3),t.H=new t(Ef.H,"H",2),t})(),CG=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gE=(function(){function t(e){this.errorCorrectionLevel=_G.forBits(e>>3&3),this.dataMask=e&7}return t.numBitsDiffering=function(e,r){return Jr.bitCount(e^r)},t.decodeFormatInformation=function(e,r){var n=t.doDecodeFormatInformation(e,r);return n!==null?n:t.doDecodeFormatInformation(e^t.FORMAT_INFO_MASK_QR,r^t.FORMAT_INFO_MASK_QR)},t.doDecodeFormatInformation=function(e,r){var n,a,i=Number.MAX_SAFE_INTEGER,o=0;try{for(var l=CG(t.FORMAT_INFO_DECODE_LOOKUP),c=l.next();!c.done;c=l.next()){var u=c.value,h=u[0];if(h===e||h===r)return new t(u[1]);var m=t.numBitsDiffering(e,h);m<i&&(o=u[1],i=m),e!==r&&(m=t.numBitsDiffering(r,h),m<i&&(o=u[1],i=m))}}catch(x){n={error:x}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(n)throw n.error}}return i<=3?new t(o):null},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getDataMask=function(){return this.dataMask},t.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask},t.FORMAT_INFO_MASK_QR=21522,t.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],t})(),SG=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Re=(function(){function t(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=r}return t.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},t.prototype.getNumBlocks=function(){var e,r,n=0,a=this.ecBlocks;try{for(var i=SG(a),o=i.next();!o.done;o=i.next()){var l=o.value;n+=l.getCount()}}catch(c){e={error:c}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return n},t.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},t.prototype.getECBlocks=function(){return this.ecBlocks},t})(),fe=(function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t})(),AG=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mh=(function(){function t(e,r){for(var n,a,i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];this.versionNumber=e,this.alignmentPatternCenters=r,this.ecBlocks=i;var l=0,c=i[0].getECCodewordsPerBlock(),u=i[0].getECBlocks();try{for(var h=AG(u),m=h.next();!m.done;m=h.next()){var x=m.value;l+=x.getCount()*(x.getDataCodewords()+c)}}catch(p){n={error:p}}finally{try{m&&!m.done&&(a=h.return)&&a.call(h)}finally{if(n)throw n.error}}this.totalCodewords=l}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},t.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},t.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new _t;try{return this.getVersionForNumber((e-17)/4)}catch{throw new _t}},t.getVersionForNumber=function(e){if(e<1||e>40)throw new fr;return t.VERSIONS[e-1]},t.decodeVersionInformation=function(e){for(var r=Number.MAX_SAFE_INTEGER,n=0,a=0;a<t.VERSION_DECODE_INFO.length;a++){var i=t.VERSION_DECODE_INFO[a];if(i===e)return t.getVersionForNumber(a+7);var o=gE.numBitsDiffering(e,i);o<r&&(n=a+7,r=o)}return r<=3?t.getVersionForNumber(n):null},t.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),r=new hc(e);r.setRegion(0,0,9,9),r.setRegion(e-8,0,8,9),r.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,a=0;a<n;a++)for(var i=this.alignmentPatternCenters[a]-2,o=0;o<n;o++)a===0&&(o===0||o===n-1)||a===n-1&&o===0||r.setRegion(this.alignmentPatternCenters[o]-2,i,5,5);return r.setRegion(6,9,1,e-17),r.setRegion(9,6,e-17,1),this.versionNumber>6&&(r.setRegion(e-11,0,3,6),r.setRegion(0,e-11,6,3)),r},t.prototype.toString=function(){return""+this.versionNumber},t.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),t.VERSIONS=[new t(1,new Int32Array(0),new Re(7,new fe(1,19)),new Re(10,new fe(1,16)),new Re(13,new fe(1,13)),new Re(17,new fe(1,9))),new t(2,Int32Array.from([6,18]),new Re(10,new fe(1,34)),new Re(16,new fe(1,28)),new Re(22,new fe(1,22)),new Re(28,new fe(1,16))),new t(3,Int32Array.from([6,22]),new Re(15,new fe(1,55)),new Re(26,new fe(1,44)),new Re(18,new fe(2,17)),new Re(22,new fe(2,13))),new t(4,Int32Array.from([6,26]),new Re(20,new fe(1,80)),new Re(18,new fe(2,32)),new Re(26,new fe(2,24)),new Re(16,new fe(4,9))),new t(5,Int32Array.from([6,30]),new Re(26,new fe(1,108)),new Re(24,new fe(2,43)),new Re(18,new fe(2,15),new fe(2,16)),new Re(22,new fe(2,11),new fe(2,12))),new t(6,Int32Array.from([6,34]),new Re(18,new fe(2,68)),new Re(16,new fe(4,27)),new Re(24,new fe(4,19)),new Re(28,new fe(4,15))),new t(7,Int32Array.from([6,22,38]),new Re(20,new fe(2,78)),new Re(18,new fe(4,31)),new Re(18,new fe(2,14),new fe(4,15)),new Re(26,new fe(4,13),new fe(1,14))),new t(8,Int32Array.from([6,24,42]),new Re(24,new fe(2,97)),new Re(22,new fe(2,38),new fe(2,39)),new Re(22,new fe(4,18),new fe(2,19)),new Re(26,new fe(4,14),new fe(2,15))),new t(9,Int32Array.from([6,26,46]),new Re(30,new fe(2,116)),new Re(22,new fe(3,36),new fe(2,37)),new Re(20,new fe(4,16),new fe(4,17)),new Re(24,new fe(4,12),new fe(4,13))),new t(10,Int32Array.from([6,28,50]),new Re(18,new fe(2,68),new fe(2,69)),new Re(26,new fe(4,43),new fe(1,44)),new Re(24,new fe(6,19),new fe(2,20)),new Re(28,new fe(6,15),new fe(2,16))),new t(11,Int32Array.from([6,30,54]),new Re(20,new fe(4,81)),new Re(30,new fe(1,50),new fe(4,51)),new Re(28,new fe(4,22),new fe(4,23)),new Re(24,new fe(3,12),new fe(8,13))),new t(12,Int32Array.from([6,32,58]),new Re(24,new fe(2,92),new fe(2,93)),new Re(22,new fe(6,36),new fe(2,37)),new Re(26,new fe(4,20),new fe(6,21)),new Re(28,new fe(7,14),new fe(4,15))),new t(13,Int32Array.from([6,34,62]),new Re(26,new fe(4,107)),new Re(22,new fe(8,37),new fe(1,38)),new Re(24,new fe(8,20),new fe(4,21)),new Re(22,new fe(12,11),new fe(4,12))),new t(14,Int32Array.from([6,26,46,66]),new Re(30,new fe(3,115),new fe(1,116)),new Re(24,new fe(4,40),new fe(5,41)),new Re(20,new fe(11,16),new fe(5,17)),new Re(24,new fe(11,12),new fe(5,13))),new t(15,Int32Array.from([6,26,48,70]),new Re(22,new fe(5,87),new fe(1,88)),new Re(24,new fe(5,41),new fe(5,42)),new Re(30,new fe(5,24),new fe(7,25)),new Re(24,new fe(11,12),new fe(7,13))),new t(16,Int32Array.from([6,26,50,74]),new Re(24,new fe(5,98),new fe(1,99)),new Re(28,new fe(7,45),new fe(3,46)),new Re(24,new fe(15,19),new fe(2,20)),new Re(30,new fe(3,15),new fe(13,16))),new t(17,Int32Array.from([6,30,54,78]),new Re(28,new fe(1,107),new fe(5,108)),new Re(28,new fe(10,46),new fe(1,47)),new Re(28,new fe(1,22),new fe(15,23)),new Re(28,new fe(2,14),new fe(17,15))),new t(18,Int32Array.from([6,30,56,82]),new Re(30,new fe(5,120),new fe(1,121)),new Re(26,new fe(9,43),new fe(4,44)),new Re(28,new fe(17,22),new fe(1,23)),new Re(28,new fe(2,14),new fe(19,15))),new t(19,Int32Array.from([6,30,58,86]),new Re(28,new fe(3,113),new fe(4,114)),new Re(26,new fe(3,44),new fe(11,45)),new Re(26,new fe(17,21),new fe(4,22)),new Re(26,new fe(9,13),new fe(16,14))),new t(20,Int32Array.from([6,34,62,90]),new Re(28,new fe(3,107),new fe(5,108)),new Re(26,new fe(3,41),new fe(13,42)),new Re(30,new fe(15,24),new fe(5,25)),new Re(28,new fe(15,15),new fe(10,16))),new t(21,Int32Array.from([6,28,50,72,94]),new Re(28,new fe(4,116),new fe(4,117)),new Re(26,new fe(17,42)),new Re(28,new fe(17,22),new fe(6,23)),new Re(30,new fe(19,16),new fe(6,17))),new t(22,Int32Array.from([6,26,50,74,98]),new Re(28,new fe(2,111),new fe(7,112)),new Re(28,new fe(17,46)),new Re(30,new fe(7,24),new fe(16,25)),new Re(24,new fe(34,13))),new t(23,Int32Array.from([6,30,54,78,102]),new Re(30,new fe(4,121),new fe(5,122)),new Re(28,new fe(4,47),new fe(14,48)),new Re(30,new fe(11,24),new fe(14,25)),new Re(30,new fe(16,15),new fe(14,16))),new t(24,Int32Array.from([6,28,54,80,106]),new Re(30,new fe(6,117),new fe(4,118)),new Re(28,new fe(6,45),new fe(14,46)),new Re(30,new fe(11,24),new fe(16,25)),new Re(30,new fe(30,16),new fe(2,17))),new t(25,Int32Array.from([6,32,58,84,110]),new Re(26,new fe(8,106),new fe(4,107)),new Re(28,new fe(8,47),new fe(13,48)),new Re(30,new fe(7,24),new fe(22,25)),new Re(30,new fe(22,15),new fe(13,16))),new t(26,Int32Array.from([6,30,58,86,114]),new Re(28,new fe(10,114),new fe(2,115)),new Re(28,new fe(19,46),new fe(4,47)),new Re(28,new fe(28,22),new fe(6,23)),new Re(30,new fe(33,16),new fe(4,17))),new t(27,Int32Array.from([6,34,62,90,118]),new Re(30,new fe(8,122),new fe(4,123)),new Re(28,new fe(22,45),new fe(3,46)),new Re(30,new fe(8,23),new fe(26,24)),new Re(30,new fe(12,15),new fe(28,16))),new t(28,Int32Array.from([6,26,50,74,98,122]),new Re(30,new fe(3,117),new fe(10,118)),new Re(28,new fe(3,45),new fe(23,46)),new Re(30,new fe(4,24),new fe(31,25)),new Re(30,new fe(11,15),new fe(31,16))),new t(29,Int32Array.from([6,30,54,78,102,126]),new Re(30,new fe(7,116),new fe(7,117)),new Re(28,new fe(21,45),new fe(7,46)),new Re(30,new fe(1,23),new fe(37,24)),new Re(30,new fe(19,15),new fe(26,16))),new t(30,Int32Array.from([6,26,52,78,104,130]),new Re(30,new fe(5,115),new fe(10,116)),new Re(28,new fe(19,47),new fe(10,48)),new Re(30,new fe(15,24),new fe(25,25)),new Re(30,new fe(23,15),new fe(25,16))),new t(31,Int32Array.from([6,30,56,82,108,134]),new Re(30,new fe(13,115),new fe(3,116)),new Re(28,new fe(2,46),new fe(29,47)),new Re(30,new fe(42,24),new fe(1,25)),new Re(30,new fe(23,15),new fe(28,16))),new t(32,Int32Array.from([6,34,60,86,112,138]),new Re(30,new fe(17,115)),new Re(28,new fe(10,46),new fe(23,47)),new Re(30,new fe(10,24),new fe(35,25)),new Re(30,new fe(19,15),new fe(35,16))),new t(33,Int32Array.from([6,30,58,86,114,142]),new Re(30,new fe(17,115),new fe(1,116)),new Re(28,new fe(14,46),new fe(21,47)),new Re(30,new fe(29,24),new fe(19,25)),new Re(30,new fe(11,15),new fe(46,16))),new t(34,Int32Array.from([6,34,62,90,118,146]),new Re(30,new fe(13,115),new fe(6,116)),new Re(28,new fe(14,46),new fe(23,47)),new Re(30,new fe(44,24),new fe(7,25)),new Re(30,new fe(59,16),new fe(1,17))),new t(35,Int32Array.from([6,30,54,78,102,126,150]),new Re(30,new fe(12,121),new fe(7,122)),new Re(28,new fe(12,47),new fe(26,48)),new Re(30,new fe(39,24),new fe(14,25)),new Re(30,new fe(22,15),new fe(41,16))),new t(36,Int32Array.from([6,24,50,76,102,128,154]),new Re(30,new fe(6,121),new fe(14,122)),new Re(28,new fe(6,47),new fe(34,48)),new Re(30,new fe(46,24),new fe(10,25)),new Re(30,new fe(2,15),new fe(64,16))),new t(37,Int32Array.from([6,28,54,80,106,132,158]),new Re(30,new fe(17,122),new fe(4,123)),new Re(28,new fe(29,46),new fe(14,47)),new Re(30,new fe(49,24),new fe(10,25)),new Re(30,new fe(24,15),new fe(46,16))),new t(38,Int32Array.from([6,32,58,84,110,136,162]),new Re(30,new fe(4,122),new fe(18,123)),new Re(28,new fe(13,46),new fe(32,47)),new Re(30,new fe(48,24),new fe(14,25)),new Re(30,new fe(42,15),new fe(32,16))),new t(39,Int32Array.from([6,26,54,82,110,138,166]),new Re(30,new fe(20,117),new fe(4,118)),new Re(28,new fe(40,47),new fe(7,48)),new Re(30,new fe(43,24),new fe(22,25)),new Re(30,new fe(10,15),new fe(67,16))),new t(40,Int32Array.from([6,30,58,86,114,142,170]),new Re(30,new fe(19,118),new fe(6,119)),new Re(28,new fe(18,47),new fe(31,48)),new Re(30,new fe(34,24),new fe(34,25)),new Re(30,new fe(20,15),new fe(61,16)))],t})(),Ta;(function(t){t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111"})(Ta||(Ta={}));var c_=(function(){function t(e,r){this.value=e,this.isMasked=r}return t.prototype.unmaskBitMatrix=function(e,r){for(var n=0;n<r;n++)for(var a=0;a<r;a++)this.isMasked(n,a)&&e.flip(a,n)},t.values=new Map([[Ta.DATA_MASK_000,new t(Ta.DATA_MASK_000,function(e,r){return(e+r&1)===0})],[Ta.DATA_MASK_001,new t(Ta.DATA_MASK_001,function(e,r){return(e&1)===0})],[Ta.DATA_MASK_010,new t(Ta.DATA_MASK_010,function(e,r){return r%3===0})],[Ta.DATA_MASK_011,new t(Ta.DATA_MASK_011,function(e,r){return(e+r)%3===0})],[Ta.DATA_MASK_100,new t(Ta.DATA_MASK_100,function(e,r){return(Math.floor(e/2)+Math.floor(r/3)&1)===0})],[Ta.DATA_MASK_101,new t(Ta.DATA_MASK_101,function(e,r){return e*r%6===0})],[Ta.DATA_MASK_110,new t(Ta.DATA_MASK_110,function(e,r){return e*r%6<3})],[Ta.DATA_MASK_111,new t(Ta.DATA_MASK_111,function(e,r){return(e+r+e*r%3&1)===0})]]),t})(),EG=(function(){function t(e){var r=e.getHeight();if(r<21||(r&3)!==1)throw new _t;this.bitMatrix=e}return t.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,r=0;r<6;r++)e=this.copyBit(r,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);for(var a=this.bitMatrix.getHeight(),i=0,o=a-7,n=a-1;n>=o;n--)i=this.copyBit(8,n,i);for(var r=a-8;r<a;r++)i=this.copyBit(r,8,i);if(this.parsedFormatInfo=gE.decodeFormatInformation(e,i),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new _t},t.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),r=Math.floor((e-17)/4);if(r<=6)return mh.getVersionForNumber(r);for(var n=0,a=e-11,i=5;i>=0;i--)for(var o=e-9;o>=a;o--)n=this.copyBit(o,i,n);var l=mh.decodeVersionInformation(n);if(l!==null&&l.getDimensionForVersion()===e)return this.parsedVersion=l,l;n=0;for(var o=5;o>=0;o--)for(var i=e-9;i>=a;i--)n=this.copyBit(o,i,n);if(l=mh.decodeVersionInformation(n),l!==null&&l.getDimensionForVersion()===e)return this.parsedVersion=l,l;throw new _t},t.prototype.copyBit=function(e,r,n){var a=this.isMirror?this.bitMatrix.get(r,e):this.bitMatrix.get(e,r);return a?n<<1|1:n<<1},t.prototype.readCodewords=function(){var e=this.readFormatInformation(),r=this.readVersion(),n=c_.values.get(e.getDataMask()),a=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,a);for(var i=r.buildFunctionPattern(),o=!0,l=new Uint8Array(r.getTotalCodewords()),c=0,u=0,h=0,m=a-1;m>0;m-=2){m===6&&m--;for(var x=0;x<a;x++)for(var p=o?a-1-x:x,y=0;y<2;y++)i.get(m-y,p)||(h++,u<<=1,this.bitMatrix.get(m-y,p)&&(u|=1),h===8&&(l[c++]=u,h=0,u=0));o=!o}if(c!==r.getTotalCodewords())throw new _t;return l},t.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=c_.values[this.parsedFormatInfo.getDataMask()],r=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,r)}},t.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},t.prototype.mirror=function(){for(var e=this.bitMatrix,r=0,n=e.getWidth();r<n;r++)for(var a=r+1,i=e.getHeight();a<i;a++)e.get(r,a)!==e.get(a,r)&&(e.flip(a,r),e.flip(r,a))},t})(),d_=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},kG=(function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r,n){var a,i,o,l;if(e.length!==r.getTotalCodewords())throw new fr;var c=r.getECBlocksForLevel(n),u=0,h=c.getECBlocks();try{for(var m=d_(h),x=m.next();!x.done;x=m.next()){var p=x.value;u+=p.getCount()}}catch(re){a={error:re}}finally{try{x&&!x.done&&(i=m.return)&&i.call(m)}finally{if(a)throw a.error}}var y=new Array(u),w=0;try{for(var j=d_(h),C=j.next();!C.done;C=j.next())for(var p=C.value,S=0;S<p.getCount();S++){var k=p.getDataCodewords(),P=c.getECCodewordsPerBlock()+k;y[w++]=new t(k,new Uint8Array(P))}}catch(re){o={error:re}}finally{try{C&&!C.done&&(l=j.return)&&l.call(j)}finally{if(o)throw o.error}}for(var O=y[0].codewords.length,$=y.length-1;$>=0;){var R=y[$].codewords.length;if(R===O)break;$--}$++;for(var B=O-c.getECCodewordsPerBlock(),U=0,S=0;S<B;S++)for(var K=0;K<w;K++)y[K].codewords[S]=e[U++];for(var K=$;K<w;K++)y[K].codewords[B]=e[U++];for(var M=y[0].codewords.length,S=B;S<M;S++)for(var K=0;K<w;K++){var q=K<$?S:S+1;y[K].codewords[q]=e[U++]}return y},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t})(),zo;(function(t){t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI"})(zo||(zo={}));var rs=(function(){function t(e,r,n,a){this.value=e,this.stringValue=r,this.characterCountBitsForVersions=n,this.bits=a,t.FOR_BITS.set(a,this),t.FOR_VALUE.set(e,this)}return t.forBits=function(e){var r=t.FOR_BITS.get(e);if(r===void 0)throw new fr;return r},t.prototype.getCharacterCountBits=function(e){var r=e.getVersionNumber(),n;return r<=9?n=0:r<=26?n=1:n=2,this.characterCountBitsForVersions[n]},t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.toString=function(){return this.stringValue},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.TERMINATOR=new t(zo.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),t.NUMERIC=new t(zo.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),t.ALPHANUMERIC=new t(zo.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),t.STRUCTURED_APPEND=new t(zo.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),t.BYTE=new t(zo.BYTE,"BYTE",Int32Array.from([8,16,16]),4),t.ECI=new t(zo.ECI,"ECI",Int32Array.from([0,0,0]),7),t.KANJI=new t(zo.KANJI,"KANJI",Int32Array.from([8,10,12]),8),t.FNC1_FIRST_POSITION=new t(zo.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),t.FNC1_SECOND_POSITION=new t(zo.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),t.HANZI=new t(zo.HANZI,"HANZI",Int32Array.from([8,10,12]),13),t})(),PG=(function(){function t(){}return t.decode=function(e,r,n,a){var i=new xE(e),o=new Fn,l=new Array,c=-1,u=-1;try{var h=null,m=!1,x=void 0;do{if(i.available()<4)x=rs.TERMINATOR;else{var p=i.readBits(4);x=rs.forBits(p)}switch(x){case rs.TERMINATOR:break;case rs.FNC1_FIRST_POSITION:case rs.FNC1_SECOND_POSITION:m=!0;break;case rs.STRUCTURED_APPEND:if(i.available()<16)throw new _t;c=i.readBits(8),u=i.readBits(8);break;case rs.ECI:var y=t.parseECIValue(i);if(h=ya.getCharacterSetECIByValue(y),h===null)throw new _t;break;case rs.HANZI:var w=i.readBits(4),j=i.readBits(x.getCharacterCountBits(r));w===t.GB2312_SUBSET&&t.decodeHanziSegment(i,o,j);break;default:var C=i.readBits(x.getCharacterCountBits(r));switch(x){case rs.NUMERIC:t.decodeNumericSegment(i,o,C);break;case rs.ALPHANUMERIC:t.decodeAlphanumericSegment(i,o,C,m);break;case rs.BYTE:t.decodeByteSegment(i,o,C,h,l,a);break;case rs.KANJI:t.decodeKanjiSegment(i,o,C);break;default:throw new _t}break}}while(x!==rs.TERMINATOR)}catch{throw new _t}return new K1(e,o.toString(),l.length===0?null:l,n===null?null:n.toString(),c,u)},t.decodeHanziSegment=function(e,r,n){if(n*13>e.available())throw new _t;for(var a=new Uint8Array(2*n),i=0;n>0;){var o=e.readBits(13),l=o/96<<8&4294967295|o%96;l<959?l+=41377:l+=42657,a[i]=l>>8&255,a[i+1]=l&255,i+=2,n--}try{r.append(oc.decode(a,Gn.GB2312))}catch(c){throw new _t(c)}},t.decodeKanjiSegment=function(e,r,n){if(n*13>e.available())throw new _t;for(var a=new Uint8Array(2*n),i=0;n>0;){var o=e.readBits(13),l=o/192<<8&4294967295|o%192;l<7936?l+=33088:l+=49472,a[i]=l>>8,a[i+1]=l,i+=2,n--}try{r.append(oc.decode(a,Gn.SHIFT_JIS))}catch(c){throw new _t(c)}},t.decodeByteSegment=function(e,r,n,a,i,o){if(8*n>e.available())throw new _t;for(var l=new Uint8Array(n),c=0;c<n;c++)l[c]=e.readBits(8);var u;a===null?u=Gn.guessEncoding(l,o):u=a.getName();try{r.append(oc.decode(l,u))}catch(h){throw new _t(h)}i.push(l)},t.toAlphaNumericChar=function(e){if(e>=t.ALPHANUMERIC_CHARS.length)throw new _t;return t.ALPHANUMERIC_CHARS[e]},t.decodeAlphanumericSegment=function(e,r,n,a){for(var i=r.length();n>1;){if(e.available()<11)throw new _t;var o=e.readBits(11);r.append(t.toAlphaNumericChar(Math.floor(o/45))),r.append(t.toAlphaNumericChar(o%45)),n-=2}if(n===1){if(e.available()<6)throw new _t;r.append(t.toAlphaNumericChar(e.readBits(6)))}if(a)for(var l=i;l<r.length();l++)r.charAt(l)==="%"&&(l<r.length()-1&&r.charAt(l+1)==="%"?r.deleteCharAt(l+1):r.setCharAt(l,""))},t.decodeNumericSegment=function(e,r,n){for(;n>=3;){if(e.available()<10)throw new _t;var a=e.readBits(10);if(a>=1e3)throw new _t;r.append(t.toAlphaNumericChar(Math.floor(a/100))),r.append(t.toAlphaNumericChar(Math.floor(a/10)%10)),r.append(t.toAlphaNumericChar(a%10)),n-=3}if(n===2){if(e.available()<7)throw new _t;var i=e.readBits(7);if(i>=100)throw new _t;r.append(t.toAlphaNumericChar(Math.floor(i/10))),r.append(t.toAlphaNumericChar(i%10))}else if(n===1){if(e.available()<4)throw new _t;var o=e.readBits(4);if(o>=10)throw new _t;r.append(t.toAlphaNumericChar(o))}},t.parseECIValue=function(e){var r=e.readBits(8);if((r&128)===0)return r&127;if((r&192)===128){var n=e.readBits(8);return(r&63)<<8&4294967295|n}if((r&224)===192){var a=e.readBits(16);return(r&31)<<16&4294967295|a}throw new _t},t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.GB2312_SUBSET=1,t})(),vE=(function(){function t(e){this.mirrored=e}return t.prototype.isMirrored=function(){return this.mirrored},t.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var r=e[0];e[0]=e[2],e[2]=r}},t})(),u_=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},TG=(function(){function t(){this.rsDecoder=new Y1(Ki.QR_CODE_FIELD_256)}return t.prototype.decodeBooleanArray=function(e,r){return this.decodeBitMatrix(hc.parseFromBooleanArray(e),r)},t.prototype.decodeBitMatrix=function(e,r){var n=new EG(e),a=null;try{return this.decodeBitMatrixParser(n,r)}catch(o){a=o}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var i=this.decodeBitMatrixParser(n,r);return i.setOther(new vE(!0)),i}catch(o){throw a!==null?a:o}},t.prototype.decodeBitMatrixParser=function(e,r){var n,a,i,o,l=e.readVersion(),c=e.readFormatInformation().getErrorCorrectionLevel(),u=e.readCodewords(),h=kG.getDataBlocks(u,l,c),m=0;try{for(var x=u_(h),p=x.next();!p.done;p=x.next()){var y=p.value;m+=y.getNumDataCodewords()}}catch($){n={error:$}}finally{try{p&&!p.done&&(a=x.return)&&a.call(x)}finally{if(n)throw n.error}}var w=new Uint8Array(m),j=0;try{for(var C=u_(h),S=C.next();!S.done;S=C.next()){var y=S.value,k=y.getCodewords(),P=y.getNumDataCodewords();this.correctErrors(k,P);for(var O=0;O<P;O++)w[j++]=k[O]}}catch($){i={error:$}}finally{try{S&&!S.done&&(o=C.return)&&o.call(C)}finally{if(i)throw i.error}}return PG.decode(w,l,c,r)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new qa}for(var a=0;a<r;a++)e[a]=n[a]},t})(),IG=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),DG=(function(t){IG(e,t);function e(r,n,a){var i=t.call(this,r,n)||this;return i.estimatedModuleSize=a,i}return e.prototype.aboutEquals=function(r,n,a){if(Math.abs(n-this.getY())<=r&&Math.abs(a-this.getX())<=r){var i=Math.abs(r-this.estimatedModuleSize);return i<=1||i<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,a){var i=(this.getX()+n)/2,o=(this.getY()+r)/2,l=(this.estimatedModuleSize+a)/2;return new e(i,o,l)},e})(rr),OG=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},RG=(function(){function t(e,r,n,a,i,o,l){this.image=e,this.startX=r,this.startY=n,this.width=a,this.height=i,this.moduleSize=o,this.resultPointCallback=l,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return t.prototype.find=function(){for(var e=this.startX,r=this.height,n=this.width,a=e+n,i=this.startY+r/2,o=new Int32Array(3),l=this.image,c=0;c<r;c++){var u=i+((c&1)===0?Math.floor((c+1)/2):-Math.floor((c+1)/2));o[0]=0,o[1]=0,o[2]=0;for(var h=e;h<a&&!l.get(h,u);)h++;for(var m=0;h<a;){if(l.get(h,u))if(m===1)o[1]++;else if(m===2){if(this.foundPatternCross(o)){var x=this.handlePossibleCenter(o,u,h);if(x!==null)return x}o[0]=o[2],o[1]=1,o[2]=0,m=1}else o[++m]++;else m===1&&m++,o[m]++;h++}if(this.foundPatternCross(o)){var x=this.handlePossibleCenter(o,u,a);if(x!==null)return x}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new et},t.centerFromEnd=function(e,r){return r-e[2]-e[1]/2},t.prototype.foundPatternCross=function(e){for(var r=this.moduleSize,n=r/2,a=0;a<3;a++)if(Math.abs(r-e[a])>=n)return!1;return!0},t.prototype.crossCheckVertical=function(e,r,n,a){var i=this.image,o=i.getHeight(),l=this.crossCheckStateCount;l[0]=0,l[1]=0,l[2]=0;for(var c=e;c>=0&&i.get(r,c)&&l[1]<=n;)l[1]++,c--;if(c<0||l[1]>n)return NaN;for(;c>=0&&!i.get(r,c)&&l[0]<=n;)l[0]++,c--;if(l[0]>n)return NaN;for(c=e+1;c<o&&i.get(r,c)&&l[1]<=n;)l[1]++,c++;if(c===o||l[1]>n)return NaN;for(;c<o&&!i.get(r,c)&&l[2]<=n;)l[2]++,c++;if(l[2]>n)return NaN;var u=l[0]+l[1]+l[2];return 5*Math.abs(u-a)>=2*a?NaN:this.foundPatternCross(l)?t.centerFromEnd(l,c):NaN},t.prototype.handlePossibleCenter=function(e,r,n){var a,i,o=e[0]+e[1]+e[2],l=t.centerFromEnd(e,n),c=this.crossCheckVertical(r,l,2*e[1],o);if(!isNaN(c)){var u=(e[0]+e[1]+e[2])/3;try{for(var h=OG(this.possibleCenters),m=h.next();!m.done;m=h.next()){var x=m.value;if(x.aboutEquals(u,c,l))return x.combineEstimate(c,l,u)}}catch(y){a={error:y}}finally{try{m&&!m.done&&(i=h.return)&&i.call(h)}finally{if(a)throw a.error}}var p=new DG(l,c,u);this.possibleCenters.push(p),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(p)}return null},t})(),LG=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),FG=(function(t){LG(e,t);function e(r,n,a,i){var o=t.call(this,r,n)||this;return o.estimatedModuleSize=a,o.count=i,i===void 0&&(o.count=1),o}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(r,n,a){if(Math.abs(n-this.getY())<=r&&Math.abs(a-this.getX())<=r){var i=Math.abs(r-this.estimatedModuleSize);return i<=1||i<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,a){var i=this.count+1,o=(this.count*this.getX()+n)/i,l=(this.count*this.getY()+r)/i,c=(this.count*this.estimatedModuleSize+a)/i;return new e(o,l,c,i)},e})(rr),MG=(function(){function t(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t})(),Vm=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},BG=(function(){function t(e,r){this.image=e,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}return t.prototype.getImage=function(){return this.image},t.prototype.getPossibleCenters=function(){return this.possibleCenters},t.prototype.find=function(e){var r=e!=null&&e.get(ss.TRY_HARDER)!==void 0,n=e!=null&&e.get(ss.PURE_BARCODE)!==void 0,a=this.image,i=a.getHeight(),o=a.getWidth(),l=Math.floor(3*i/(4*t.MAX_MODULES));(l<t.MIN_SKIP||r)&&(l=t.MIN_SKIP);for(var c=!1,u=new Int32Array(5),h=l-1;h<i&&!c;h+=l){u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0;for(var m=0,x=0;x<o;x++)if(a.get(x,h))(m&1)===1&&m++,u[m]++;else if((m&1)===0)if(m===4)if(t.foundPatternCross(u)){var p=this.handlePossibleCenter(u,h,x,n);if(p===!0)if(l=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{var y=this.findRowSkip();y>u[2]&&(h+=y-u[2]-l,x=o-1)}else{u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,m=3;continue}m=0,u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0}else u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,m=3;else u[++m]++;else u[m]++;if(t.foundPatternCross(u)){var p=this.handlePossibleCenter(u,h,o,n);p===!0&&(l=u[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}}var w=this.selectBestPatterns();return rr.orderBestPatterns(w),new MG(w)},t.centerFromEnd=function(e,r){return r-e[4]-e[3]-e[2]/2},t.foundPatternCross=function(e){for(var r=0,n=0;n<5;n++){var a=e[n];if(a===0)return!1;r+=a}if(r<7)return!1;var i=r/7,o=i/2;return Math.abs(i-e[0])<o&&Math.abs(i-e[1])<o&&Math.abs(3*i-e[2])<3*o&&Math.abs(i-e[3])<o&&Math.abs(i-e[4])<o},t.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},t.prototype.crossCheckDiagonal=function(e,r,n,a){for(var i=this.getCrossCheckStateCount(),o=0,l=this.image;e>=o&&r>=o&&l.get(r-o,e-o);)i[2]++,o++;if(e<o||r<o)return!1;for(;e>=o&&r>=o&&!l.get(r-o,e-o)&&i[1]<=n;)i[1]++,o++;if(e<o||r<o||i[1]>n)return!1;for(;e>=o&&r>=o&&l.get(r-o,e-o)&&i[0]<=n;)i[0]++,o++;if(i[0]>n)return!1;var c=l.getHeight(),u=l.getWidth();for(o=1;e+o<c&&r+o<u&&l.get(r+o,e+o);)i[2]++,o++;if(e+o>=c||r+o>=u)return!1;for(;e+o<c&&r+o<u&&!l.get(r+o,e+o)&&i[3]<n;)i[3]++,o++;if(e+o>=c||r+o>=u||i[3]>=n)return!1;for(;e+o<c&&r+o<u&&l.get(r+o,e+o)&&i[4]<n;)i[4]++,o++;if(i[4]>=n)return!1;var h=i[0]+i[1]+i[2]+i[3]+i[4];return Math.abs(h-a)<2*a&&t.foundPatternCross(i)},t.prototype.crossCheckVertical=function(e,r,n,a){for(var i=this.image,o=i.getHeight(),l=this.getCrossCheckStateCount(),c=e;c>=0&&i.get(r,c);)l[2]++,c--;if(c<0)return NaN;for(;c>=0&&!i.get(r,c)&&l[1]<=n;)l[1]++,c--;if(c<0||l[1]>n)return NaN;for(;c>=0&&i.get(r,c)&&l[0]<=n;)l[0]++,c--;if(l[0]>n)return NaN;for(c=e+1;c<o&&i.get(r,c);)l[2]++,c++;if(c===o)return NaN;for(;c<o&&!i.get(r,c)&&l[3]<n;)l[3]++,c++;if(c===o||l[3]>=n)return NaN;for(;c<o&&i.get(r,c)&&l[4]<n;)l[4]++,c++;if(l[4]>=n)return NaN;var u=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(u-a)>=2*a?NaN:t.foundPatternCross(l)?t.centerFromEnd(l,c):NaN},t.prototype.crossCheckHorizontal=function(e,r,n,a){for(var i=this.image,o=i.getWidth(),l=this.getCrossCheckStateCount(),c=e;c>=0&&i.get(c,r);)l[2]++,c--;if(c<0)return NaN;for(;c>=0&&!i.get(c,r)&&l[1]<=n;)l[1]++,c--;if(c<0||l[1]>n)return NaN;for(;c>=0&&i.get(c,r)&&l[0]<=n;)l[0]++,c--;if(l[0]>n)return NaN;for(c=e+1;c<o&&i.get(c,r);)l[2]++,c++;if(c===o)return NaN;for(;c<o&&!i.get(c,r)&&l[3]<n;)l[3]++,c++;if(c===o||l[3]>=n)return NaN;for(;c<o&&i.get(c,r)&&l[4]<n;)l[4]++,c++;if(l[4]>=n)return NaN;var u=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(u-a)>=a?NaN:t.foundPatternCross(l)?t.centerFromEnd(l,c):NaN},t.prototype.handlePossibleCenter=function(e,r,n,a){var i=e[0]+e[1]+e[2]+e[3]+e[4],o=t.centerFromEnd(e,n),l=this.crossCheckVertical(r,Math.floor(o),e[2],i);if(!isNaN(l)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(l),e[2],i),!isNaN(o)&&(!a||this.crossCheckDiagonal(Math.floor(l),Math.floor(o),e[2],i)))){for(var c=i/7,u=!1,h=this.possibleCenters,m=0,x=h.length;m<x;m++){var p=h[m];if(p.aboutEquals(c,l,o)){h[m]=p.combineEstimate(l,o,c),u=!0;break}}if(!u){var y=new FG(o,l,c);h.push(y),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(y)}return!0}return!1},t.prototype.findRowSkip=function(){var e,r,n=this.possibleCenters.length;if(n<=1)return 0;var a=null;try{for(var i=Vm(this.possibleCenters),o=i.next();!o.done;o=i.next()){var l=o.value;if(l.getCount()>=t.CENTER_QUORUM)if(a==null)a=l;else return this.hasSkipped=!0,Math.floor((Math.abs(a.getX()-l.getX())-Math.abs(a.getY()-l.getY()))/2)}}catch(c){e={error:c}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return 0},t.prototype.haveMultiplyConfirmedCenters=function(){var e,r,n,a,i=0,o=0,l=this.possibleCenters.length;try{for(var c=Vm(this.possibleCenters),u=c.next();!u.done;u=c.next()){var h=u.value;h.getCount()>=t.CENTER_QUORUM&&(i++,o+=h.getEstimatedModuleSize())}}catch(w){e={error:w}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}if(i<3)return!1;var m=o/l,x=0;try{for(var p=Vm(this.possibleCenters),y=p.next();!y.done;y=p.next()){var h=y.value;x+=Math.abs(h.getEstimatedModuleSize()-m)}}catch(w){n={error:w}}finally{try{y&&!y.done&&(a=p.return)&&a.call(p)}finally{if(n)throw n.error}}return x<=.05*o},t.prototype.selectBestPatterns=function(){var e,r,n,a,i=this.possibleCenters.length;if(i<3)throw new et;var o=this.possibleCenters,l;if(i>3){var c=0,u=0;try{for(var h=Vm(this.possibleCenters),m=h.next();!m.done;m=h.next()){var x=m.value,p=x.getEstimatedModuleSize();c+=p,u+=p*p}}catch(O){e={error:O}}finally{try{m&&!m.done&&(r=h.return)&&r.call(h)}finally{if(e)throw e.error}}l=c/i;var y=Math.sqrt(u/i-l*l);o.sort(function(O,$){var R=Math.abs($.getEstimatedModuleSize()-l),B=Math.abs(O.getEstimatedModuleSize()-l);return R<B?-1:R>B?1:0});for(var w=Math.max(.2*l,y),j=0;j<o.length&&o.length>3;j++){var C=o[j];Math.abs(C.getEstimatedModuleSize()-l)>w&&(o.splice(j,1),j--)}}if(o.length>3){var c=0;try{for(var S=Vm(o),k=S.next();!k.done;k=S.next()){var P=k.value;c+=P.getEstimatedModuleSize()}}catch($){n={error:$}}finally{try{k&&!k.done&&(a=S.return)&&a.call(S)}finally{if(n)throw n.error}}l=c/o.length,o.sort(function($,R){if(R.getCount()===$.getCount()){var B=Math.abs(R.getEstimatedModuleSize()-l),U=Math.abs($.getEstimatedModuleSize()-l);return B<U?1:B>U?-1:0}else return R.getCount()-$.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]},t.CENTER_QUORUM=2,t.MIN_SKIP=3,t.MAX_MODULES=57,t})(),UG=(function(){function t(e){this.image=e}return t.prototype.getImage=function(){return this.image},t.prototype.getResultPointCallback=function(){return this.resultPointCallback},t.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(ss.NEED_RESULT_POINT_CALLBACK);var r=new BG(this.image,this.resultPointCallback),n=r.find(e);return this.processFinderPatternInfo(n)},t.prototype.processFinderPatternInfo=function(e){var r=e.getTopLeft(),n=e.getTopRight(),a=e.getBottomLeft(),i=this.calculateModuleSize(r,n,a);if(i<1)throw new et("No pattern found in proccess finder.");var o=t.computeDimension(r,n,a,i),l=mh.getProvisionalVersionForDimension(o),c=l.getDimensionForVersion()-7,u=null;if(l.getAlignmentPatternCenters().length>0)for(var h=n.getX()-r.getX()+a.getX(),m=n.getY()-r.getY()+a.getY(),x=1-3/c,p=Math.floor(r.getX()+x*(h-r.getX())),y=Math.floor(r.getY()+x*(m-r.getY())),w=4;w<=16;w<<=1)try{u=this.findAlignmentInRegion(i,p,y,w);break}catch(k){if(!(k instanceof et))throw k}var j=t.createTransform(r,n,a,u,o),C=t.sampleGrid(this.image,j,o),S;return u===null?S=[a,r,n]:S=[a,r,n,u],new Pb(C,S)},t.createTransform=function(e,r,n,a,i){var o=i-3.5,l,c,u,h;return a!==null?(l=a.getX(),c=a.getY(),u=o-3,h=u):(l=r.getX()-e.getX()+n.getX(),c=r.getY()-e.getY()+n.getY(),u=o,h=o),hE.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,u,h,3.5,o,e.getX(),e.getY(),r.getX(),r.getY(),l,c,n.getX(),n.getY())},t.sampleGrid=function(e,r,n){var a=Tb.getInstance();return a.sampleGridWithTransform(e,n,n,r)},t.computeDimension=function(e,r,n,a){var i=xn.round(rr.distance(e,r)/a),o=xn.round(rr.distance(e,n)/a),l=Math.floor((i+o)/2)+7;switch(l&3){case 0:l++;break;case 2:l--;break;case 3:throw new et("Dimensions could be not found.")}return l},t.prototype.calculateModuleSize=function(e,r,n){return(this.calculateModuleSizeOneWay(e,r)+this.calculateModuleSizeOneWay(e,n))/2},t.prototype.calculateModuleSizeOneWay=function(e,r){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(r.getX()),Math.floor(r.getY())),a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?a/7:isNaN(a)?n/7:(n+a)/14},t.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,r,n,a){var i=this.sizeOfBlackWhiteBlackRun(e,r,n,a),o=1,l=e-(n-e);l<0?(o=e/(e-l),l=0):l>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(l-e),l=this.image.getWidth()-1);var c=Math.floor(r-(a-r)*o);return o=1,c<0?(o=r/(r-c),c=0):c>=this.image.getHeight()&&(o=(this.image.getHeight()-1-r)/(c-r),c=this.image.getHeight()-1),l=Math.floor(e+(l-e)*o),i+=this.sizeOfBlackWhiteBlackRun(e,r,l,c),i-1},t.prototype.sizeOfBlackWhiteBlackRun=function(e,r,n,a){var i=Math.abs(a-r)>Math.abs(n-e);if(i){var o=e;e=r,r=o,o=n,n=a,a=o}for(var l=Math.abs(n-e),c=Math.abs(a-r),u=-l/2,h=e<n?1:-1,m=r<a?1:-1,x=0,p=n+h,y=e,w=r;y!==p;y+=h){var j=i?w:y,C=i?y:w;if(x===1===this.image.get(j,C)){if(x===2)return xn.distance(y,w,e,r);x++}if(u+=c,u>0){if(w===a)break;w+=m,u-=l}}return x===2?xn.distance(n+h,a,e,r):NaN},t.prototype.findAlignmentInRegion=function(e,r,n,a){var i=Math.floor(a*e),o=Math.max(0,r-i),l=Math.min(this.image.getWidth()-1,r+i);if(l-o<e*3)throw new et("Alignment top exceeds estimated module size.");var c=Math.max(0,n-i),u=Math.min(this.image.getHeight()-1,n+i);if(u-c<e*3)throw new et("Alignment bottom exceeds estimated module size.");var h=new RG(this.image,o,c,l-o,u-c,e,this.resultPointCallback);return h.find()},t})(),My=(function(){function t(){this.decoder=new TG}return t.prototype.getDecoder=function(){return this.decoder},t.prototype.decode=function(e,r){var n,a;if(r!=null&&r.get(ss.PURE_BARCODE)!==void 0){var i=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(i,r),a=t.NO_POINTS}else{var o=new UG(e.getBlackMatrix()).detect(r);n=this.decoder.decodeBitMatrix(o.getBits(),r),a=o.getPoints()}n.getOther()instanceof vE&&n.getOther().applyMirroredCorrection(a);var l=new to(n.getText(),n.getRawBytes(),void 0,a,Zt.QR_CODE,void 0),c=n.getByteSegments();c!==null&&l.putMetadata(Ha.BYTE_SEGMENTS,c);var u=n.getECLevel();return u!==null&&l.putMetadata(Ha.ERROR_CORRECTION_LEVEL,u),n.hasStructuredAppend()&&(l.putMetadata(Ha.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),l.putMetadata(Ha.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),l},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r===null||n===null)throw new et;var a=this.moduleSize(r,e),i=r[1],o=n[1],l=r[0],c=n[0];if(l>=c||i>=o)throw new et;if(o-i!==c-l&&(c=l+(o-i),c>=e.getWidth()))throw new et;var u=Math.round((c-l+1)/a),h=Math.round((o-i+1)/a);if(u<=0||h<=0)throw new et;if(h!==u)throw new et;var m=Math.floor(a/2);i+=m,l+=m;var x=l+Math.floor((u-1)*a)-c;if(x>0){if(x>m)throw new et;l-=x}var p=i+Math.floor((h-1)*a)-o;if(p>0){if(p>m)throw new et;i-=p}for(var y=new hc(u,h),w=0;w<h;w++)for(var j=i+Math.floor(w*a),C=0;C<u;C++)e.get(l+Math.floor(C*a),j)&&y.set(C,w);return y},t.moduleSize=function(e,r){for(var n=r.getHeight(),a=r.getWidth(),i=e[0],o=e[1],l=!0,c=0;i<a&&o<n;){if(l!==r.get(i,o)){if(++c===5)break;l=!l}i++,o++}if(i===a||o===n)throw new et;return(i-e[0])/7},t.NO_POINTS=new Array,t})(),$G=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},an=(function(){function t(){}return t.prototype.PDF417Common=function(){},t.getBitCountSum=function(e){return xn.sum(e)},t.toIntArray=function(e){var r,n;if(e==null||!e.length)return t.EMPTY_INT_ARRAY;var a=new Int32Array(e.length),i=0;try{for(var o=$G(e),l=o.next();!l.done;l=o.next()){var c=l.value;a[i++]=c}}catch(u){r={error:u}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a},t.getCodeword=function(e){var r=Ji.binarySearch(t.SYMBOL_TABLE,e&262143);return r<0?-1:(t.CODEWORD_TABLE[r]-1)%t.NUMBER_OF_CODEWORDS},t.NUMBER_OF_CODEWORDS=929,t.MAX_CODEWORDS_IN_BARCODE=t.NUMBER_OF_CODEWORDS-1,t.MIN_ROWS_IN_BARCODE=3,t.MAX_ROWS_IN_BARCODE=90,t.MODULES_IN_CODEWORD=17,t.MODULES_IN_STOP_PATTERN=18,t.BARS_IN_MODULE=8,t.EMPTY_INT_ARRAY=new Int32Array([]),t.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),t.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),t})(),VG=(function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t})(),zG=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qG=(function(){function t(){}return t.detectMultiple=function(e,r,n){var a=e.getBlackMatrix(),i=t.detect(n,a);return i.length||(a=a.clone(),a.rotate180(),i=t.detect(n,a)),new VG(a,i)},t.detect=function(e,r){for(var n,a,i=new Array,o=0,l=0,c=!1;o<r.getHeight();){var u=t.findVertices(r,o,l);if(u[0]==null&&u[3]==null){if(!c)break;c=!1,l=0;try{for(var h=(n=void 0,zG(i)),m=h.next();!m.done;m=h.next()){var x=m.value;x[1]!=null&&(o=Math.trunc(Math.max(o,x[1].getY()))),x[3]!=null&&(o=Math.max(o,Math.trunc(x[3].getY())))}}catch(p){n={error:p}}finally{try{m&&!m.done&&(a=h.return)&&a.call(h)}finally{if(n)throw n.error}}o+=t.ROW_STEP;continue}if(c=!0,i.push(u),!e)break;u[2]!=null?(l=Math.trunc(u[2].getX()),o=Math.trunc(u[2].getY())):(l=Math.trunc(u[4].getX()),o=Math.trunc(u[4].getY()))}return i},t.findVertices=function(e,r,n){var a=e.getHeight(),i=e.getWidth(),o=new Array(8);return t.copyToResult(o,t.findRowsWithPattern(e,a,i,r,n,t.START_PATTERN),t.INDEXES_START_PATTERN),o[4]!=null&&(n=Math.trunc(o[4].getX()),r=Math.trunc(o[4].getY())),t.copyToResult(o,t.findRowsWithPattern(e,a,i,r,n,t.STOP_PATTERN),t.INDEXES_STOP_PATTERN),o},t.copyToResult=function(e,r,n){for(var a=0;a<n.length;a++)e[n[a]]=r[a]},t.findRowsWithPattern=function(e,r,n,a,i,o){for(var l=new Array(4),c=!1,u=new Int32Array(o.length);a<r;a+=t.ROW_STEP){var h=t.findGuardPattern(e,i,a,n,!1,o,u);if(h!=null){for(;a>0;){var m=t.findGuardPattern(e,i,--a,n,!1,o,u);if(m!=null)h=m;else{a++;break}}l[0]=new rr(h[0],a),l[1]=new rr(h[1],a),c=!0;break}}var x=a+1;if(c){for(var p=0,m=Int32Array.from([Math.trunc(l[0].getX()),Math.trunc(l[1].getX())]);x<r;x++){var h=t.findGuardPattern(e,m[0],x,n,!1,o,u);if(h!=null&&Math.abs(m[0]-h[0])<t.MAX_PATTERN_DRIFT&&Math.abs(m[1]-h[1])<t.MAX_PATTERN_DRIFT)m=h,p=0;else{if(p>t.SKIPPED_ROW_COUNT_MAX)break;p++}}x-=p+1,l[2]=new rr(m[0],x),l[3]=new rr(m[1],x)}return x-a<t.BARCODE_MIN_HEIGHT&&Ji.fill(l,null),l},t.findGuardPattern=function(e,r,n,a,i,o,l){Ji.fillWithin(l,0,l.length,0);for(var c=r,u=0;e.get(c,n)&&c>0&&u++<t.MAX_PIXEL_DRIFT;)c--;for(var h=c,m=0,x=o.length,p=i;h<a;h++){var y=e.get(h,n);if(y!==p)l[m]++;else{if(m===x-1){if(t.patternMatchVariance(l,o,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return new Int32Array([c,h]);c+=l[0]+l[1],Yn.arraycopy(l,2,l,0,m-1),l[m-1]=0,l[m]=0,m--}else m++;l[m]=1,p=!p}}return m===x-1&&t.patternMatchVariance(l,o,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE?new Int32Array([c,h-1]):null},t.patternMatchVariance=function(e,r,n){for(var a=e.length,i=0,o=0,l=0;l<a;l++)i+=e[l],o+=r[l];if(i<o)return 1/0;var c=i/o;n*=c;for(var u=0,h=0;h<a;h++){var m=e[h],x=r[h]*c,p=m>x?m-x:x-m;if(p>n)return 1/0;u+=p}return u/i},t.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),t.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),t.MAX_AVG_VARIANCE=.42,t.MAX_INDIVIDUAL_VARIANCE=.8,t.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),t.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),t.MAX_PIXEL_DRIFT=3,t.MAX_PATTERN_DRIFT=5,t.SKIPPED_ROW_COUNT_MAX=25,t.ROW_STEP=5,t.BARCODE_MIN_HEIGHT=10,t})(),HG=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dh=(function(){function t(e,r){if(r.length===0)throw new fr;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var a=1;a<n&&r[a]===0;)a++;a===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-a),Yn.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){var r,n;if(e===0)return this.getCoefficient(0);if(e===1){var a=0;try{for(var i=HG(this.coefficients),o=i.next();!o.done;o=i.next()){var l=o.value;a=this.field.add(a,l)}}catch(m){r={error:m}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a}for(var c=this.coefficients[0],u=this.coefficients.length,h=1;h<u;h++)c=this.field.add(this.field.multiply(e,c),this.coefficients[h]);return c},t.prototype.add=function(e){if(!this.field.equals(e.field))throw new fr("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var a=r;r=n,n=a}var i=new Int32Array(n.length),o=n.length-r.length;Yn.arraycopy(n,0,i,0,o);for(var l=o;l<n.length;l++)i[l]=this.field.add(r[l-o],n[l]);return new t(this.field,i)},t.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new fr("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},t.prototype.multiply=function(e){return e instanceof t?this.multiplyOther(e):this.multiplyScalar(e)},t.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new fr("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new t(this.field,new Int32Array([0]));for(var r=this.coefficients,n=r.length,a=e.coefficients,i=a.length,o=new Int32Array(n+i-1),l=0;l<n;l++)for(var c=r[l],u=0;u<i;u++)o[l+u]=this.field.add(o[l+u],this.field.multiply(c,a[u]));return new t(this.field,o)},t.prototype.negative=function(){for(var e=this.coefficients.length,r=new Int32Array(e),n=0;n<e;n++)r[n]=this.field.subtract(0,this.coefficients[n]);return new t(this.field,r)},t.prototype.multiplyScalar=function(e){if(e===0)return new t(this.field,new Int32Array([0]));if(e===1)return this;for(var r=this.coefficients.length,n=new Int32Array(r),a=0;a<r;a++)n[a]=this.field.multiply(this.coefficients[a],e);return new t(this.field,n)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new fr;if(r===0)return new t(this.field,new Int32Array([0]));for(var n=this.coefficients.length,a=new Int32Array(n+e),i=0;i<n;i++)a[i]=this.field.multiply(this.coefficients[i],r);return new t(this.field,a)},t.prototype.toString=function(){for(var e=new Fn,r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(r===0||n!==1)&&e.append(n),r!==0&&(r===1?e.append("x"):(e.append("x^"),e.append(r))))}return e.toString()},t})(),WG=(function(){function t(){}return t.prototype.add=function(e,r){return(e+r)%this.modulus},t.prototype.subtract=function(e,r){return(this.modulus+e-r)%this.modulus},t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new fr;return this.logTable[e]},t.prototype.inverse=function(e){if(e===0)throw new uE;return this.expTable[this.modulus-this.logTable[e]-1]},t.prototype.multiply=function(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.modulus-1)]},t.prototype.getSize=function(){return this.modulus},t.prototype.equals=function(e){return e===this},t})(),GG=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),KG=(function(t){GG(e,t);function e(r,n){var a=t.call(this)||this;a.modulus=r,a.expTable=new Int32Array(r),a.logTable=new Int32Array(r);for(var i=1,o=0;o<r;o++)a.expTable[o]=i,i=i*n%r;for(var o=0;o<r-1;o++)a.logTable[a.expTable[o]]=o;return a.zero=new dh(a,new Int32Array([0])),a.one=new dh(a,new Int32Array([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new fr;if(n===0)return this.zero;var a=new Int32Array(r+1);return a[0]=n,new dh(this,a)},e.PDF417_GF=new e(an.NUMBER_OF_CODEWORDS,3),e})(WG),YG=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},XG=(function(){function t(){this.field=KG.PDF417_GF}return t.prototype.decode=function(e,r,n){for(var a,i,o=new dh(this.field,e),l=new Int32Array(r),c=!1,u=r;u>0;u--){var h=o.evaluateAt(this.field.exp(u));l[r-u]=h,h!==0&&(c=!0)}if(!c)return 0;var m=this.field.getOne();if(n!=null)try{for(var x=YG(n),p=x.next();!p.done;p=x.next()){var y=p.value,w=this.field.exp(e.length-1-y),j=new dh(this.field,new Int32Array([this.field.subtract(0,w),1]));m=m.multiply(j)}}catch(B){a={error:B}}finally{try{p&&!p.done&&(i=x.return)&&i.call(x)}finally{if(a)throw a.error}}for(var C=new dh(this.field,l),S=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),C,r),k=S[0],P=S[1],O=this.findErrorLocations(k),$=this.findErrorMagnitudes(P,k,O),u=0;u<O.length;u++){var R=e.length-1-this.field.log(O[u]);if(R<0)throw qa.getChecksumInstance();e[R]=this.field.subtract(e[R],$[u])}return O.length},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var a=e;e=r,r=a}for(var i=e,o=r,l=this.field.getZero(),c=this.field.getOne();o.getDegree()>=Math.round(n/2);){var u=i,h=l;if(i=o,l=c,i.isZero())throw qa.getChecksumInstance();o=u;for(var m=this.field.getZero(),x=i.getCoefficient(i.getDegree()),p=this.field.inverse(x);o.getDegree()>=i.getDegree()&&!o.isZero();){var y=o.getDegree()-i.getDegree(),w=this.field.multiply(o.getCoefficient(o.getDegree()),p);m=m.add(this.field.buildMonomial(y,w)),o=o.subtract(i.multiplyByMonomial(y,w))}c=m.multiply(l).subtract(h).negative()}var j=c.getCoefficient(0);if(j===0)throw qa.getChecksumInstance();var C=this.field.inverse(j),S=c.multiply(C),k=o.multiply(C);return[S,k]},t.prototype.findErrorLocations=function(e){for(var r=e.getDegree(),n=new Int32Array(r),a=0,i=1;i<this.field.getSize()&&a<r;i++)e.evaluateAt(i)===0&&(n[a]=this.field.inverse(i),a++);if(a!==r)throw qa.getChecksumInstance();return n},t.prototype.findErrorMagnitudes=function(e,r,n){for(var a=r.getDegree(),i=new Int32Array(a),o=1;o<=a;o++)i[a-o]=this.field.multiply(o,r.getCoefficient(o));for(var l=new dh(this.field,i),c=n.length,u=new Int32Array(c),o=0;o<c;o++){var h=this.field.inverse(n[o]),m=this.field.subtract(0,e.evaluateAt(h)),x=this.field.inverse(l.evaluateAt(h));u[o]=this.field.multiply(m,x)}return u},t})(),By=(function(){function t(e,r,n,a,i){e instanceof t?this.constructor_2(e):this.constructor_1(e,r,n,a,i)}return t.prototype.constructor_1=function(e,r,n,a,i){var o=r==null||n==null,l=a==null||i==null;if(o&&l)throw new et;o?(r=new rr(0,a.getY()),n=new rr(0,i.getY())):l&&(a=new rr(e.getWidth()-1,r.getY()),i=new rr(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=r,this.bottomLeft=n,this.topRight=a,this.bottomRight=i,this.minX=Math.trunc(Math.min(r.getX(),n.getX())),this.maxX=Math.trunc(Math.max(a.getX(),i.getX())),this.minY=Math.trunc(Math.min(r.getY(),a.getY())),this.maxY=Math.trunc(Math.max(n.getY(),i.getY()))},t.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},t.merge=function(e,r){return e==null?r:r==null?e:new t(e.image,e.topLeft,e.bottomLeft,r.topRight,r.bottomRight)},t.prototype.addMissingRows=function(e,r,n){var a=this.topLeft,i=this.bottomLeft,o=this.topRight,l=this.bottomRight;if(e>0){var c=n?this.topLeft:this.topRight,u=Math.trunc(c.getY()-e);u<0&&(u=0);var h=new rr(c.getX(),u);n?a=h:o=h}if(r>0){var m=n?this.bottomLeft:this.bottomRight,x=Math.trunc(m.getY()+r);x>=this.image.getHeight()&&(x=this.image.getHeight()-1);var p=new rr(m.getX(),x);n?i=p:l=p}return new t(this.image,a,i,o,l)},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getBottomRight=function(){return this.bottomRight},t})(),ZG=(function(){function t(e,r,n,a){this.columnCount=e,this.errorCorrectionLevel=a,this.rowCountUpperPart=r,this.rowCountLowerPart=n,this.rowCount=r+n}return t.prototype.getColumnCount=function(){return this.columnCount},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},t.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},t})(),Db=(function(){function t(){this.buffer=""}return t.form=function(e,r){var n=-1;function a(o,l,c,u,h,m){if(o==="%%")return"%";if(r[++n]!==void 0){o=u?parseInt(u.substr(1)):void 0;var x=h?parseInt(h.substr(1)):void 0,p;switch(m){case"s":p=r[n];break;case"c":p=r[n][0];break;case"f":p=parseFloat(r[n]).toFixed(o);break;case"p":p=parseFloat(r[n]).toPrecision(o);break;case"e":p=parseFloat(r[n]).toExponential(o);break;case"x":p=parseInt(r[n]).toString(x||16);break;case"d":p=parseFloat(parseInt(r[n],x||10).toPrecision(o)).toFixed(0);break}p=typeof p=="object"?JSON.stringify(p):(+p).toString(x);for(var y=parseInt(c),w=c&&c[0]+""=="0"?"0":" ";p.length<y;)p=l!==void 0?p+w:w+p;return p}}var i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(i,a)},t.prototype.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.buffer+=t.form(e,r)},t.prototype.toString=function(){return this.buffer},t})(),JG=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},yE=(function(){function t(e){this.boundingBox=new By(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return t.prototype.getCodewordNearby=function(e){var r=this.getCodeword(e);if(r!=null)return r;for(var n=1;n<t.MAX_NEARBY_DISTANCE;n++){var a=this.imageRowToCodewordIndex(e)-n;if(a>=0&&(r=this.codewords[a],r!=null)||(a=this.imageRowToCodewordIndex(e)+n,a<this.codewords.length&&(r=this.codewords[a],r!=null)))return r}return null},t.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},t.prototype.setCodeword=function(e,r){this.codewords[this.imageRowToCodewordIndex(e)]=r},t.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.getCodewords=function(){return this.codewords},t.prototype.toString=function(){var e,r,n=new Db,a=0;try{for(var i=JG(this.codewords),o=i.next();!o.done;o=i.next()){var l=o.value;if(l==null){n.format("%3d:    |   %n",a++);continue}n.format("%3d: %3d|%3d%n",a++,l.getRowNumber(),l.getValue())}}catch(c){e={error:c}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return n.toString()},t.MAX_NEARBY_DISTANCE=5,t})(),QG=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},eK=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),a,i=[],o;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(l){o={error:l}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i},t0=(function(){function t(){this.values=new Map}return t.prototype.setValue=function(e){e=Math.trunc(e);var r=this.values.get(e);r==null&&(r=0),r++,this.values.set(e,r)},t.prototype.getValue=function(){var e,r,n=-1,a=new Array,i=function(m,x){var p={getKey:function(){return m},getValue:function(){return x}};p.getValue()>n?(n=p.getValue(),a=[],a.push(p.getKey())):p.getValue()===n&&a.push(p.getKey())};try{for(var o=QG(this.values.entries()),l=o.next();!l.done;l=o.next()){var c=eK(l.value,2),u=c[0],h=c[1];i(u,h)}}catch(m){e={error:m}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return an.toIntArray(a)},t.prototype.getConfidence=function(e){return this.values.get(e)},t})(),tK=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Mv=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},h_=(function(t){tK(e,t);function e(r,n){var a=t.call(this,r)||this;return a._isLeft=n,a}return e.prototype.setRowNumbers=function(){var r,n;try{for(var a=Mv(this.getCodewords()),i=a.next();!i.done;i=a.next()){var o=i.value;o?.setRowNumberAsRowIndicatorColumn()}}catch(l){r={error:l}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(r){var n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,r);for(var a=this.getBoundingBox(),i=this._isLeft?a.getTopLeft():a.getTopRight(),o=this._isLeft?a.getBottomLeft():a.getBottomRight(),l=this.imageRowToCodewordIndex(Math.trunc(i.getY())),c=this.imageRowToCodewordIndex(Math.trunc(o.getY())),u=-1,h=1,m=0,x=l;x<c;x++)if(n[x]!=null){var p=n[x],y=p.getRowNumber()-u;if(y===0)m++;else if(y===1)h=Math.max(h,m),m=1,u=p.getRowNumber();else if(y<0||p.getRowNumber()>=r.getRowCount()||y>x)n[x]=null;else{var w=void 0;h>2?w=(h-2)*y:w=y;for(var j=w>=x,C=1;C<=w&&!j;C++)j=n[x-C]!=null;j?n[x]=null:(u=p.getRowNumber(),m=1)}}},e.prototype.getRowHeights=function(){var r,n,a=this.getBarcodeMetadata();if(a==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(a);var i=new Int32Array(a.getRowCount());try{for(var o=Mv(this.getCodewords()),l=o.next();!l.done;l=o.next()){var c=l.value;if(c!=null){var u=c.getRowNumber();if(u>=i.length)continue;i[u]++}}}catch(h){r={error:h}}finally{try{l&&!l.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return i},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(r){for(var n=this.getBoundingBox(),a=this._isLeft?n.getTopLeft():n.getTopRight(),i=this._isLeft?n.getBottomLeft():n.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(a.getY())),l=this.imageRowToCodewordIndex(Math.trunc(i.getY())),c=this.getCodewords(),u=-1,h=o;h<l;h++)if(c[h]!=null){var m=c[h];m.setRowNumberAsRowIndicatorColumn();var x=m.getRowNumber()-u;x===0||(x===1?u=m.getRowNumber():m.getRowNumber()>=r.getRowCount()?c[h]=null:u=m.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var r,n,a=this.getCodewords(),i=new t0,o=new t0,l=new t0,c=new t0;try{for(var u=Mv(a),h=u.next();!h.done;h=u.next()){var m=h.value;if(m!=null){m.setRowNumberAsRowIndicatorColumn();var x=m.getValue()%30,p=m.getRowNumber();switch(this._isLeft||(p+=2),p%3){case 0:o.setValue(x*3+1);break;case 1:c.setValue(x/3),l.setValue(x%3);break;case 2:i.setValue(x+1);break}}}}catch(w){r={error:w}}finally{try{h&&!h.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}if(i.getValue().length===0||o.getValue().length===0||l.getValue().length===0||c.getValue().length===0||i.getValue()[0]<1||o.getValue()[0]+l.getValue()[0]<an.MIN_ROWS_IN_BARCODE||o.getValue()[0]+l.getValue()[0]>an.MAX_ROWS_IN_BARCODE)return null;var y=new ZG(i.getValue()[0],o.getValue()[0],l.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(a,y),y},e.prototype.removeIncorrectCodewords=function(r,n){for(var a=0;a<r.length;a++){var i=r[a];if(r[a]!=null){var o=i.getValue()%30,l=i.getRowNumber();if(l>n.getRowCount()){r[a]=null;continue}switch(this._isLeft||(l+=2),l%3){case 0:o*3+1!==n.getRowCountUpperPart()&&(r[a]=null);break;case 1:(Math.trunc(o/3)!==n.getErrorCorrectionLevel()||o%3!==n.getRowCountLowerPart())&&(r[a]=null);break;case 2:o+1!==n.getColumnCount()&&(r[a]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+t.prototype.toString.call(this)},e})(yE),rK=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nK=(function(){function t(e,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return t.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=an.MAX_CODEWORDS_IN_BARCODE,r;do r=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<r);return this.detectionResultColumns},t.prototype.adjustIndicatorColumnRowNumbers=function(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},t.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var r=1;r<this.barcodeColumnCount+1;r++)for(var n=this.detectionResultColumns[r].getCodewords(),a=0;a<n.length;a++)n[a]!=null&&(n[a].hasValidRowNumber()||this.adjustRowNumbers(r,a,n));return e},t.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},t.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(e[n]!=null&&r[n]!=null&&e[n].getRowNumber()===r[n].getRowNumber())for(var a=1;a<=this.barcodeColumnCount;a++){var i=this.detectionResultColumns[a].getCodewords()[n];i!=null&&(i.setRowNumber(e[n].getRowNumber()),i.hasValidRowNumber()||(this.detectionResultColumns[a].getCodewords()[n]=null))}}},t.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var a=r[n].getRowNumber(),i=0,o=this.barcodeColumnCount+1;o>0&&i<this.ADJUST_ROW_NUMBER_SKIP;o--){var l=this.detectionResultColumns[o].getCodewords()[n];l!=null&&(i=t.adjustRowNumberIfValid(a,i,l),l.hasValidRowNumber()||e++)}return e},t.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,r=this.detectionResultColumns[0].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var a=r[n].getRowNumber(),i=0,o=1;o<this.barcodeColumnCount+1&&i<this.ADJUST_ROW_NUMBER_SKIP;o++){var l=this.detectionResultColumns[o].getCodewords()[n];l!=null&&(i=t.adjustRowNumberIfValid(a,i,l),l.hasValidRowNumber()||e++)}return e},t.adjustRowNumberIfValid=function(e,r,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),r=0):++r),r},t.prototype.adjustRowNumbers=function(e,r,n){var a,i;if(this.detectionResultColumns[e-1]!=null){var o=n[r],l=this.detectionResultColumns[e-1].getCodewords(),c=l;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());var u=new Array(14);u[2]=l[r],u[3]=c[r],r>0&&(u[0]=n[r-1],u[4]=l[r-1],u[5]=c[r-1]),r>1&&(u[8]=n[r-2],u[10]=l[r-2],u[11]=c[r-2]),r<n.length-1&&(u[1]=n[r+1],u[6]=l[r+1],u[7]=c[r+1]),r<n.length-2&&(u[9]=n[r+2],u[12]=l[r+2],u[13]=c[r+2]);try{for(var h=rK(u),m=h.next();!m.done;m=h.next()){var x=m.value;if(t.adjustRowNumber(o,x))return}}catch(p){a={error:p}}finally{try{m&&!m.done&&(i=h.return)&&i.call(h)}finally{if(a)throw a.error}}}},t.adjustRowNumber=function(e,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===e.getBucket()?(e.setRowNumber(r.getRowNumber()),!0):!1},t.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},t.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},t.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},t.prototype.setBoundingBox=function(e){this.boundingBox=e},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.setDetectionResultColumn=function(e,r){this.detectionResultColumns[e]=r},t.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},t.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var r=new Db,n=0;n<e.getCodewords().length;n++){r.format("CW %3d:",n);for(var a=0;a<this.barcodeColumnCount+2;a++){if(this.detectionResultColumns[a]==null){r.format("    |   ");continue}var i=this.detectionResultColumns[a].getCodewords()[n];if(i==null){r.format("    |   ");continue}r.format(" %3d|%3d",i.getRowNumber(),i.getValue())}r.format("%n")}return r.toString()},t})(),sK=(function(){function t(e,r,n,a){this.rowNumber=t.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(r),this.bucket=Math.trunc(n),this.value=Math.trunc(a)}return t.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},t.prototype.isValidRowNumber=function(e){return e!==t.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},t.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},t.prototype.getWidth=function(){return this.endX-this.startX},t.prototype.getStartX=function(){return this.startX},t.prototype.getEndX=function(){return this.endX},t.prototype.getBucket=function(){return this.bucket},t.prototype.getValue=function(){return this.value},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.setRowNumber=function(e){this.rowNumber=e},t.prototype.toString=function(){return this.rowNumber+"|"+this.value},t.BARCODE_ROW_UNKNOWN=-1,t})(),aK=(function(){function t(){}return t.initialize=function(){for(var e=0;e<an.SYMBOL_TABLE.length;e++)for(var r=an.SYMBOL_TABLE[e],n=r&1,a=0;a<an.BARS_IN_MODULE;a++){for(var i=0;(r&1)===n;)i+=1,r>>=1;n=r&1,t.RATIOS_TABLE[e]||(t.RATIOS_TABLE[e]=new Array(an.BARS_IN_MODULE)),t.RATIOS_TABLE[e][an.BARS_IN_MODULE-a-1]=Math.fround(i/an.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},t.getDecodedValue=function(e){var r=t.getDecodedCodewordValue(t.sampleBitCounts(e));return r!==-1?r:t.getClosestDecodedValue(e)},t.sampleBitCounts=function(e){for(var r=xn.sum(e),n=new Int32Array(an.BARS_IN_MODULE),a=0,i=0,o=0;o<an.MODULES_IN_CODEWORD;o++){var l=r/(2*an.MODULES_IN_CODEWORD)+o*r/an.MODULES_IN_CODEWORD;i+e[a]<=l&&(i+=e[a],a++),n[a]++}return n},t.getDecodedCodewordValue=function(e){var r=t.getBitValue(e);return an.getCodeword(r)===-1?-1:r},t.getBitValue=function(e){for(var r=0,n=0;n<e.length;n++)for(var a=0;a<e[n];a++)r=r<<1|(n%2===0?1:0);return Math.trunc(r)},t.getClosestDecodedValue=function(e){var r=xn.sum(e),n=new Array(an.BARS_IN_MODULE);if(r>1)for(var a=0;a<n.length;a++)n[a]=Math.fround(e[a]/r);var i=Dy.MAX_VALUE,o=-1;this.bSymbolTableReady||t.initialize();for(var l=0;l<t.RATIOS_TABLE.length;l++){for(var c=0,u=t.RATIOS_TABLE[l],h=0;h<an.BARS_IN_MODULE;h++){var m=Math.fround(u[h]-n[h]);if(c+=Math.fround(m*m),c>=i)break}c<i&&(i=c,o=an.SYMBOL_TABLE[l])}return o},t.bSymbolTableReady=!1,t.RATIOS_TABLE=new Array(an.SYMBOL_TABLE.length).map(function(e){return new Array(an.BARS_IN_MODULE)}),t})(),iK=(function(){function t(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return t.prototype.getSegmentIndex=function(){return this.segmentIndex},t.prototype.setSegmentIndex=function(e){this.segmentIndex=e},t.prototype.getFileId=function(){return this.fileId},t.prototype.setFileId=function(e){this.fileId=e},t.prototype.getOptionalData=function(){return this.optionalData},t.prototype.setOptionalData=function(e){this.optionalData=e},t.prototype.isLastSegment=function(){return this.lastSegment},t.prototype.setLastSegment=function(e){this.lastSegment=e},t.prototype.getSegmentCount=function(){return this.segmentCount},t.prototype.setSegmentCount=function(e){this.segmentCount=e},t.prototype.getSender=function(){return this.sender||null},t.prototype.setSender=function(e){this.sender=e},t.prototype.getAddressee=function(){return this.addressee||null},t.prototype.setAddressee=function(e){this.addressee=e},t.prototype.getFileName=function(){return this.fileName},t.prototype.setFileName=function(e){this.fileName=e},t.prototype.getFileSize=function(){return this.fileSize},t.prototype.setFileSize=function(e){this.fileSize=e},t.prototype.getChecksum=function(){return this.checksum},t.prototype.setChecksum=function(e){this.checksum=e},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.setTimestamp=function(e){this.timestamp=e},t})(),f_=(function(){function t(){}return t.parseLong=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t})(),oK=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),lK=(function(t){oK(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="NullPointerException",e})(eo),cK=(function(){function t(){}return t.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},t.prototype.writeBytesOffset=function(e,r,n){if(e==null)throw new lK;if(r<0||r>e.length||n<0||r+n>e.length||r+n<0)throw new Eb;if(n===0)return;for(var a=0;a<n;a++)this.write(e[r+a])},t.prototype.flush=function(){},t.prototype.close=function(){},t})(),dK=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),uK=(function(t){dK(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(eo),hK=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),fK=(function(t){hK(e,t);function e(r){r===void 0&&(r=32);var n=t.call(this)||this;if(n.count=0,r<0)throw new fr("Negative initial size: "+r);return n.buf=new Uint8Array(r),n}return e.prototype.ensureCapacity=function(r){r-this.buf.length>0&&this.grow(r)},e.prototype.grow=function(r){var n=this.buf.length,a=n<<1;if(a-r<0&&(a=r),a<0){if(r<0)throw new uK;a=Jr.MAX_VALUE}this.buf=Ji.copyOfUint8Array(this.buf,a)},e.prototype.write=function(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1},e.prototype.writeBytesOffset=function(r,n,a){if(n<0||n>r.length||a<0||n+a-r.length>0)throw new Eb;this.ensureCapacity(this.count+a),Yn.arraycopy(r,n,this.buf,this.count,a),this.count+=a},e.prototype.writeTo=function(r){r.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return Ji.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(r){return new String(this.buf).toString()},e.prototype.toString_number=function(r){return new String(this.buf).toString()},e.prototype.close=function(){},e})(cK),Ln;(function(t){t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Ln||(Ln={}));function wE(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var ox;function Wd(t){if(typeof ox>"u"&&(ox=wE()),ox===null)throw new Error("BigInt is not supported!");return ox(t)}function mK(){var t=[];t[0]=Wd(1);var e=Wd(900);t[1]=e;for(var r=2;r<16;r++)t[r]=t[r-1]*e;return t}var pK=(function(){function t(){}return t.decode=function(e,r){var n=new Fn(""),a=ya.ISO8859_1;n.enableDecoding(a);for(var i=1,o=e[i++],l=new iK;i<e[0];){switch(o){case t.TEXT_COMPACTION_MODE_LATCH:i=t.textCompaction(e,i,n);break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:i=t.byteCompaction(o,e,a,i,n);break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[i++]);break;case t.NUMERIC_COMPACTION_MODE_LATCH:i=t.numericCompaction(e,i,n);break;case t.ECI_CHARSET:ya.getCharacterSetECIByValue(e[i++]);break;case t.ECI_GENERAL_PURPOSE:i+=2;break;case t.ECI_USER_DEFINED:i++;break;case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:i=t.decodeMacroBlock(e,i,l);break;case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:throw new _t;default:i--,i=t.textCompaction(e,i,n);break}if(i<e.length)o=e[i++];else throw _t.getFormatInstance()}if(n.length()===0)throw _t.getFormatInstance();var c=new K1(null,n.toString(),null,r);return c.setOther(l),c},t.decodeMacroBlock=function(e,r,n){if(r+t.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw _t.getFormatInstance();for(var a=new Int32Array(t.NUMBER_OF_SEQUENCE_CODEWORDS),i=0;i<t.NUMBER_OF_SEQUENCE_CODEWORDS;i++,r++)a[i]=e[r];n.setSegmentIndex(Jr.parseInt(t.decodeBase900toBase10(a,t.NUMBER_OF_SEQUENCE_CODEWORDS)));var o=new Fn;r=t.textCompaction(e,r,o),n.setFileId(o.toString());var l=-1;for(e[r]===t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(l=r+1);r<e[0];)switch(e[r]){case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,e[r]){case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new Fn;r=t.textCompaction(e,r+1,c),n.setFileName(c.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var u=new Fn;r=t.textCompaction(e,r+1,u),n.setSender(u.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var h=new Fn;r=t.textCompaction(e,r+1,h),n.setAddressee(h.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var m=new Fn;r=t.numericCompaction(e,r+1,m),n.setSegmentCount(Jr.parseInt(m.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var x=new Fn;r=t.numericCompaction(e,r+1,x),n.setTimestamp(f_.parseLong(x.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var p=new Fn;r=t.numericCompaction(e,r+1,p),n.setChecksum(Jr.parseInt(p.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var y=new Fn;r=t.numericCompaction(e,r+1,y),n.setFileSize(f_.parseLong(y.toString()));break;default:throw _t.getFormatInstance()}break;case t.MACRO_PDF417_TERMINATOR:r++,n.setLastSegment(!0);break;default:throw _t.getFormatInstance()}if(l!==-1){var w=r-l;n.isLastSegment()&&w--,n.setOptionalData(Ji.copyOfRange(e,l,l+w))}return r},t.textCompaction=function(e,r,n){for(var a=new Int32Array((e[0]-r)*2),i=new Int32Array((e[0]-r)*2),o=0,l=!1;r<e[0]&&!l;){var c=e[r++];if(c<t.TEXT_COMPACTION_MODE_LATCH)a[o]=c/30,a[o+1]=c%30,o+=2;else switch(c){case t.TEXT_COMPACTION_MODE_LATCH:a[o++]=t.TEXT_COMPACTION_MODE_LATCH;break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,l=!0;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a[o]=t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=e[r++],i[o]=c,o++;break}}return t.decodeTextCompaction(a,i,o,n),r},t.decodeTextCompaction=function(e,r,n,a){for(var i=Ln.ALPHA,o=Ln.ALPHA,l=0;l<n;){var c=e[l],u="";switch(i){case Ln.ALPHA:if(c<26)u=String.fromCharCode(65+c);else switch(c){case 26:u=" ";break;case t.LL:i=Ln.LOWER;break;case t.ML:i=Ln.MIXED;break;case t.PS:o=i,i=Ln.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:i=Ln.ALPHA;break}break;case Ln.LOWER:if(c<26)u=String.fromCharCode(97+c);else switch(c){case 26:u=" ";break;case t.AS:o=i,i=Ln.ALPHA_SHIFT;break;case t.ML:i=Ln.MIXED;break;case t.PS:o=i,i=Ln.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:i=Ln.ALPHA;break}break;case Ln.MIXED:if(c<t.PL)u=t.MIXED_CHARS[c];else switch(c){case t.PL:i=Ln.PUNCT;break;case 26:u=" ";break;case t.LL:i=Ln.LOWER;break;case t.AL:i=Ln.ALPHA;break;case t.PS:o=i,i=Ln.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:i=Ln.ALPHA;break}break;case Ln.PUNCT:if(c<t.PAL)u=t.PUNCT_CHARS[c];else switch(c){case t.PAL:i=Ln.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:i=Ln.ALPHA;break}break;case Ln.ALPHA_SHIFT:if(i=o,c<26)u=String.fromCharCode(65+c);else switch(c){case 26:u=" ";break;case t.TEXT_COMPACTION_MODE_LATCH:i=Ln.ALPHA;break}break;case Ln.PUNCT_SHIFT:if(i=o,c<t.PAL)u=t.PUNCT_CHARS[c];else switch(c){case t.PAL:i=Ln.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[l]);break;case t.TEXT_COMPACTION_MODE_LATCH:i=Ln.ALPHA;break}break}u!==""&&a.append(u),l++}},t.byteCompaction=function(e,r,n,a,i){var o=new fK,l=0,c=0,u=!1;switch(e){case t.BYTE_COMPACTION_MODE_LATCH:for(var h=new Int32Array(6),m=r[a++];a<r[0]&&!u;)switch(h[l++]=m,c=900*c+m,m=r[a++],m){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:a--,u=!0;break;default:if(l%5===0&&l>0){for(var x=0;x<6;++x)o.write(Number(Wd(c)>>Wd(8*(5-x))));c=0,l=0}break}a===r[0]&&m<t.TEXT_COMPACTION_MODE_LATCH&&(h[l++]=m);for(var p=0;p<l;p++)o.write(h[p]);break;case t.BYTE_COMPACTION_MODE_LATCH_6:for(;a<r[0]&&!u;){var y=r[a++];if(y<t.TEXT_COMPACTION_MODE_LATCH)l++,c=900*c+y;else switch(y){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:a--,u=!0;break}if(l%5===0&&l>0){for(var x=0;x<6;++x)o.write(Number(Wd(c)>>Wd(8*(5-x))));c=0,l=0}}break}return i.append(oc.decode(o.toByteArray(),n)),a},t.numericCompaction=function(e,r,n){for(var a=0,i=!1,o=new Int32Array(t.MAX_NUMERIC_CODEWORDS);r<e[0]&&!i;){var l=e[r++];if(r===e[0]&&(i=!0),l<t.TEXT_COMPACTION_MODE_LATCH)o[a]=l,a++;else switch(l){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,i=!0;break}(a%t.MAX_NUMERIC_CODEWORDS===0||l===t.NUMERIC_COMPACTION_MODE_LATCH||i)&&a>0&&(n.append(t.decodeBase900toBase10(o,a)),a=0)}return r},t.decodeBase900toBase10=function(e,r){for(var n=Wd(0),a=0;a<r;a++)n+=t.EXP900[r-a-1]*Wd(e[a]);var i=n.toString();if(i.charAt(0)!=="1")throw new _t;return i.substring(1)},t.TEXT_COMPACTION_MODE_LATCH=900,t.BYTE_COMPACTION_MODE_LATCH=901,t.NUMERIC_COMPACTION_MODE_LATCH=902,t.BYTE_COMPACTION_MODE_LATCH_6=924,t.ECI_USER_DEFINED=925,t.ECI_GENERAL_PURPOSE=926,t.ECI_CHARSET=927,t.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,t.MACRO_PDF417_TERMINATOR=922,t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,t.MAX_NUMERIC_CODEWORDS=15,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,t.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,t.PL=25,t.LL=27,t.AS=27,t.ML=28,t.AL=28,t.PS=29,t.PAL=29,t.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,t.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",t.EXP900=wE()?mK():[],t.NUMBER_OF_SEQUENCE_CODEWORDS=2,t})(),zm=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xK=(function(){function t(){}return t.decode=function(e,r,n,a,i,o,l){for(var c=new By(e,r,n,a,i),u=null,h=null,m,x=!0;;x=!1){if(r!=null&&(u=t.getRowIndicatorColumn(e,c,r,!0,o,l)),a!=null&&(h=t.getRowIndicatorColumn(e,c,a,!1,o,l)),m=t.merge(u,h),m==null)throw et.getNotFoundInstance();var p=m.getBoundingBox();if(x&&p!=null&&(p.getMinY()<c.getMinY()||p.getMaxY()>c.getMaxY()))c=p;else break}m.setBoundingBox(c);var y=m.getBarcodeColumnCount()+1;m.setDetectionResultColumn(0,u),m.setDetectionResultColumn(y,h);for(var w=u!=null,j=1;j<=y;j++){var C=w?j:y-j;if(m.getDetectionResultColumn(C)===void 0){var S=void 0;C===0||C===y?S=new h_(c,C===0):S=new yE(c),m.setDetectionResultColumn(C,S);for(var k=-1,P=k,O=c.getMinY();O<=c.getMaxY();O++){if(k=t.getStartColumn(m,C,O,w),k<0||k>c.getMaxX()){if(P===-1)continue;k=P}var $=t.detectCodeword(e,c.getMinX(),c.getMaxX(),w,k,O,o,l);$!=null&&(S.setCodeword(O,$),P=k,o=Math.min(o,$.getWidth()),l=Math.max(l,$.getWidth()))}}}return t.createDecoderResult(m)},t.merge=function(e,r){if(e==null&&r==null)return null;var n=t.getBarcodeMetadata(e,r);if(n==null)return null;var a=By.merge(t.adjustBoundingBox(e),t.adjustBoundingBox(r));return new nK(n,a)},t.adjustBoundingBox=function(e){var r,n;if(e==null)return null;var a=e.getRowHeights();if(a==null)return null;var i=t.getMax(a),o=0;try{for(var l=zm(a),c=l.next();!c.done;c=l.next()){var u=c.value;if(o+=i-u,u>0)break}}catch(p){r={error:p}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}for(var h=e.getCodewords(),m=0;o>0&&h[m]==null;m++)o--;for(var x=0,m=a.length-1;m>=0&&(x+=i-a[m],!(a[m]>0));m--);for(var m=h.length-1;x>0&&h[m]==null;m--)x--;return e.getBoundingBox().addMissingRows(o,x,e.isLeft())},t.getMax=function(e){var r,n,a=-1;try{for(var i=zm(e),o=i.next();!o.done;o=i.next()){var l=o.value;a=Math.max(a,l)}}catch(c){r={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a},t.getBarcodeMetadata=function(e,r){var n;if(e==null||(n=e.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();var a;return r==null||(a=r.getBarcodeMetadata())==null?n:n.getColumnCount()!==a.getColumnCount()&&n.getErrorCorrectionLevel()!==a.getErrorCorrectionLevel()&&n.getRowCount()!==a.getRowCount()?null:n},t.getRowIndicatorColumn=function(e,r,n,a,i,o){for(var l=new h_(r,a),c=0;c<2;c++)for(var u=c===0?1:-1,h=Math.trunc(Math.trunc(n.getX())),m=Math.trunc(Math.trunc(n.getY()));m<=r.getMaxY()&&m>=r.getMinY();m+=u){var x=t.detectCodeword(e,0,e.getWidth(),a,h,m,i,o);x!=null&&(l.setCodeword(m,x),a?h=x.getStartX():h=x.getEndX())}return l},t.adjustCodewordCount=function(e,r){var n=r[0][1],a=n.getValue(),i=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-t.getNumberOfECCodeWords(e.getBarcodeECLevel());if(a.length===0){if(i<1||i>an.MAX_CODEWORDS_IN_BARCODE)throw et.getNotFoundInstance();n.setValue(i)}else a[0]!==i&&n.setValue(i)},t.createDecoderResult=function(e){var r=t.createBarcodeMatrix(e);t.adjustCodewordCount(e,r);for(var n=new Array,a=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),i=[],o=new Array,l=0;l<e.getBarcodeRowCount();l++)for(var c=0;c<e.getBarcodeColumnCount();c++){var u=r[l][c+1].getValue(),h=l*e.getBarcodeColumnCount()+c;u.length===0?n.push(h):u.length===1?a[h]=u[0]:(o.push(h),i.push(u))}for(var m=new Array(i.length),x=0;x<m.length;x++)m[x]=i[x];return t.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),a,an.toIntArray(n),an.toIntArray(o),m)},t.createDecoderResultFromAmbiguousValues=function(e,r,n,a,i){for(var o=new Int32Array(a.length),l=100;l-- >0;){for(var c=0;c<o.length;c++)r[a[c]]=i[c][o[c]];try{return t.decodeCodewords(r,e,n)}catch(h){var u=h instanceof qa;if(!u)throw h}if(o.length===0)throw qa.getChecksumInstance();for(var c=0;c<o.length;c++)if(o[c]<i[c].length-1){o[c]++;break}else if(o[c]=0,c===o.length-1)throw qa.getChecksumInstance()}throw qa.getChecksumInstance()},t.createBarcodeMatrix=function(e){for(var r,n,a,i,o=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),l=0;l<o.length;l++)for(var c=0;c<o[l].length;c++)o[l][c]=new t0;var u=0;try{for(var h=zm(e.getDetectionResultColumns()),m=h.next();!m.done;m=h.next()){var x=m.value;if(x!=null)try{for(var p=(a=void 0,zm(x.getCodewords())),y=p.next();!y.done;y=p.next()){var w=y.value;if(w!=null){var j=w.getRowNumber();if(j>=0){if(j>=o.length)continue;o[j][u].setValue(w.getValue())}}}}catch(C){a={error:C}}finally{try{y&&!y.done&&(i=p.return)&&i.call(p)}finally{if(a)throw a.error}}u++}}catch(C){r={error:C}}finally{try{m&&!m.done&&(n=h.return)&&n.call(h)}finally{if(r)throw r.error}}return o},t.isValidBarcodeColumn=function(e,r){return r>=0&&r<=e.getBarcodeColumnCount()+1},t.getStartColumn=function(e,r,n,a){var i,o,l=a?1:-1,c=null;if(t.isValidBarcodeColumn(e,r-l)&&(c=e.getDetectionResultColumn(r-l).getCodeword(n)),c!=null)return a?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(r).getCodewordNearby(n),c!=null)return a?c.getStartX():c.getEndX();if(t.isValidBarcodeColumn(e,r-l)&&(c=e.getDetectionResultColumn(r-l).getCodewordNearby(n)),c!=null)return a?c.getEndX():c.getStartX();for(var u=0;t.isValidBarcodeColumn(e,r-l);){r-=l;try{for(var h=(i=void 0,zm(e.getDetectionResultColumn(r).getCodewords())),m=h.next();!m.done;m=h.next()){var x=m.value;if(x!=null)return(a?x.getEndX():x.getStartX())+l*u*(x.getEndX()-x.getStartX())}}catch(p){i={error:p}}finally{try{m&&!m.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}u++}return a?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},t.detectCodeword=function(e,r,n,a,i,o,l,c){i=t.adjustCodewordStartColumn(e,r,n,a,i,o);var u=t.getModuleBitCount(e,r,n,a,i,o);if(u==null)return null;var h,m=xn.sum(u);if(a)h=i+m;else{for(var x=0;x<u.length/2;x++){var p=u[x];u[x]=u[u.length-1-x],u[u.length-1-x]=p}h=i,i=h-m}if(!t.checkCodewordSkew(m,l,c))return null;var y=aK.getDecodedValue(u),w=an.getCodeword(y);return w===-1?null:new sK(i,h,t.getCodewordBucketNumber(y),w)},t.getModuleBitCount=function(e,r,n,a,i,o){for(var l=i,c=new Int32Array(8),u=0,h=a?1:-1,m=a;(a?l<n:l>=r)&&u<c.length;)e.get(l,o)===m?(c[u]++,l+=h):(u++,m=!m);return u===c.length||l===(a?n:r)&&u===c.length-1?c:null},t.getNumberOfECCodeWords=function(e){return 2<<e},t.adjustCodewordStartColumn=function(e,r,n,a,i,o){for(var l=i,c=a?-1:1,u=0;u<2;u++){for(;(a?l>=r:l<n)&&a===e.get(l,o);){if(Math.abs(i-l)>t.CODEWORD_SKEW_SIZE)return i;l+=c}c=-c,a=!a}return l},t.checkCodewordSkew=function(e,r,n){return r-t.CODEWORD_SKEW_SIZE<=e&&e<=n+t.CODEWORD_SKEW_SIZE},t.decodeCodewords=function(e,r,n){if(e.length===0)throw _t.getFormatInstance();var a=1<<r+1,i=t.correctErrors(e,n,a);t.verifyCodewordCount(e,a);var o=pK.decode(e,""+r);return o.setErrorsCorrected(i),o.setErasures(n.length),o},t.correctErrors=function(e,r,n){if(r!=null&&r.length>n/2+t.MAX_ERRORS||n<0||n>t.MAX_EC_CODEWORDS)throw qa.getChecksumInstance();return t.errorCorrection.decode(e,n,r)},t.verifyCodewordCount=function(e,r){if(e.length<4)throw _t.getFormatInstance();var n=e[0];if(n>e.length)throw _t.getFormatInstance();if(n===0)if(r<e.length)e[0]=e.length-r;else throw _t.getFormatInstance()},t.getBitCountForCodeword=function(e){for(var r=new Int32Array(8),n=0,a=r.length-1;!((e&1)!==n&&(n=e&1,a--,a<0));)r[a]++,e>>=1;return r},t.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},t.getCodewordBucketNumber_number=function(e){return t.getCodewordBucketNumber(t.getBitCountForCodeword(e))},t.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},t.toString=function(e){for(var r=new Db,n=0;n<e.length;n++){r.format("Row %2d: ",n);for(var a=0;a<e[n].length;a++){var i=e[n][a];i.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",i.getValue()[0],i.getConfidence(i.getValue()[0]))}r.format("%n")}return r.toString()},t.CODEWORD_SKEW_SIZE=2,t.MAX_ERRORS=3,t.MAX_EC_CODEWORDS=512,t.errorCorrection=new XG,t})(),gK=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Uy=(function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=t.decode(e,r,!1);if(n==null||n.length===0||n[0]==null)throw et.getNotFoundInstance();return n[0]},t.prototype.decodeMultiple=function(e,r){r===void 0&&(r=null);try{return t.decode(e,r,!0)}catch(n){throw n instanceof _t||n instanceof qa?et.getNotFoundInstance():n}},t.decode=function(e,r,n){var a,i,o=new Array,l=qG.detectMultiple(e,r,n);try{for(var c=gK(l.getPoints()),u=c.next();!u.done;u=c.next()){var h=u.value,m=xK.decode(l.getBits(),h[4],h[5],h[6],h[7],t.getMinCodewordWidth(h),t.getMaxCodewordWidth(h)),x=new to(m.getText(),m.getRawBytes(),void 0,h,Zt.PDF_417);x.putMetadata(Ha.ERROR_CORRECTION_LEVEL,m.getECLevel());var p=m.getOther();p!=null&&x.putMetadata(Ha.PDF417_EXTRA_METADATA,p),o.push(x)}}catch(y){a={error:y}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(a)throw a.error}}return o.map(function(y){return y})},t.getMaxWidth=function(e,r){return e==null||r==null?0:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMinWidth=function(e,r){return e==null||r==null?Jr.MAX_VALUE:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(t.getMaxWidth(e[0],e[4]),t.getMaxWidth(e[6],e[2])*an.MODULES_IN_CODEWORD/an.MODULES_IN_STOP_PATTERN),Math.max(t.getMaxWidth(e[1],e[5]),t.getMaxWidth(e[7],e[3])*an.MODULES_IN_CODEWORD/an.MODULES_IN_STOP_PATTERN)))},t.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(t.getMinWidth(e[0],e[4]),t.getMinWidth(e[6],e[2])*an.MODULES_IN_CODEWORD/an.MODULES_IN_STOP_PATTERN),Math.min(t.getMinWidth(e[1],e[5]),t.getMinWidth(e[7],e[3])*an.MODULES_IN_CODEWORD/an.MODULES_IN_STOP_PATTERN)))},t.prototype.reset=function(){},t})(),vK=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),m_=(function(t){vK(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReaderException",e})(eo),p_=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},yK=(function(){function t(){}return t.prototype.decode=function(e,r){return this.setHints(r),this.decodeInternal(e)},t.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},t.prototype.setHints=function(e){this.hints=e;var r=e!=null&&e.get(ss.TRY_HARDER)!==void 0,n=e==null?null:e.get(ss.POSSIBLE_FORMATS),a=new Array;if(n!=null){var i=n.some(function(o){return o===Zt.UPC_A||o===Zt.UPC_E||o===Zt.EAN_13||o===Zt.EAN_8||o===Zt.CODABAR||o===Zt.CODE_39||o===Zt.CODE_93||o===Zt.CODE_128||o===Zt.ITF||o===Zt.RSS_14||o===Zt.RSS_EXPANDED});i&&!r&&a.push(new e0(e)),n.includes(Zt.QR_CODE)&&a.push(new My),n.includes(Zt.DATA_MATRIX)&&a.push(new Fy),n.includes(Zt.AZTEC)&&a.push(new Ry),n.includes(Zt.PDF_417)&&a.push(new Uy),i&&r&&a.push(new e0(e))}a.length===0&&(r||a.push(new e0(e)),a.push(new My),a.push(new Fy),a.push(new Ry),a.push(new Uy),r&&a.push(new e0(e))),this.readers=a},t.prototype.reset=function(){var e,r;if(this.readers!==null)try{for(var n=p_(this.readers),a=n.next();!a.done;a=n.next()){var i=a.value;i.reset()}}catch(o){e={error:o}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.decodeInternal=function(e){var r,n;if(this.readers===null)throw new m_("No readers where selected, nothing can be read.");try{for(var a=p_(this.readers),i=a.next();!i.done;i=a.next()){var o=i.value;try{return o.decode(e,this.hints)}catch(l){if(l instanceof m_)continue}}}catch(l){r={error:l}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}throw new et("No MultiFormat Readers were able to detect the code.")},t})(),wK=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),bK=(function(t){wK(e,t);function e(r,n){r===void 0&&(r=null),n===void 0&&(n=500);var a=this,i=new yK;return i.setHints(r),a=t.call(this,i,n)||this,a}return e.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},e})(um),NK=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(t){NK(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new Uy,r)||this}return e})(um);var jK=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(t){jK(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new My,r)||this}return e})(um);var $y;(function(t){t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.MIN_SIZE=3]="MIN_SIZE",t[t.MAX_SIZE=4]="MAX_SIZE",t[t.MARGIN=5]="MARGIN",t[t.PDF417_COMPACT=6]="PDF417_COMPACT",t[t.PDF417_COMPACTION=7]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=9]="AZTEC_LAYERS",t[t.QR_VERSION=10]="QR_VERSION"})($y||($y={}));const lx=$y;var bE=(function(){function t(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new ru(e,Int32Array.from([1])))}return t.prototype.buildGenerator=function(e){var r=this.cachedGenerators;if(e>=r.length)for(var n=r[r.length-1],a=this.field,i=r.length;i<=e;i++){var o=n.multiply(new ru(a,Int32Array.from([1,a.exp(i-1+a.getGeneratorBase())])));r.push(o),n=o}return r[e]},t.prototype.encode=function(e,r){if(r===0)throw new fr("No error correction bytes");var n=e.length-r;if(n<=0)throw new fr("No data bytes provided");var a=this.buildGenerator(r),i=new Int32Array(n);Yn.arraycopy(e,0,i,0,n);var o=new ru(this.field,i);o=o.multiplyByMonomial(r,1);for(var l=o.divide(a)[1],c=l.getCoefficients(),u=r-c.length,h=0;h<u;h++)e[n+h]=0;Yn.arraycopy(c,0,e,n+u,c.length)},t})(),r0=(function(){function t(){}return t.applyMaskPenaltyRule1=function(e){return t.applyMaskPenaltyRule1Internal(e,!0)+t.applyMaskPenaltyRule1Internal(e,!1)},t.applyMaskPenaltyRule2=function(e){for(var r=0,n=e.getArray(),a=e.getWidth(),i=e.getHeight(),o=0;o<i-1;o++)for(var l=n[o],c=0;c<a-1;c++){var u=l[c];u===l[c+1]&&u===n[o+1][c]&&u===n[o+1][c+1]&&r++}return t.N2*r},t.applyMaskPenaltyRule3=function(e){for(var r=0,n=e.getArray(),a=e.getWidth(),i=e.getHeight(),o=0;o<i;o++)for(var l=0;l<a;l++){var c=n[o];l+6<a&&c[l]===1&&c[l+1]===0&&c[l+2]===1&&c[l+3]===1&&c[l+4]===1&&c[l+5]===0&&c[l+6]===1&&(t.isWhiteHorizontal(c,l-4,l)||t.isWhiteHorizontal(c,l+7,l+11))&&r++,o+6<i&&n[o][l]===1&&n[o+1][l]===0&&n[o+2][l]===1&&n[o+3][l]===1&&n[o+4][l]===1&&n[o+5][l]===0&&n[o+6][l]===1&&(t.isWhiteVertical(n,l,o-4,o)||t.isWhiteVertical(n,l,o+7,o+11))&&r++}return r*t.N3},t.isWhiteHorizontal=function(e,r,n){r=Math.max(r,0),n=Math.min(n,e.length);for(var a=r;a<n;a++)if(e[a]===1)return!1;return!0},t.isWhiteVertical=function(e,r,n,a){n=Math.max(n,0),a=Math.min(a,e.length);for(var i=n;i<a;i++)if(e[i][r]===1)return!1;return!0},t.applyMaskPenaltyRule4=function(e){for(var r=0,n=e.getArray(),a=e.getWidth(),i=e.getHeight(),o=0;o<i;o++)for(var l=n[o],c=0;c<a;c++)l[c]===1&&r++;var u=e.getHeight()*e.getWidth(),h=Math.floor(Math.abs(r*2-u)*10/u);return h*t.N4},t.getDataMaskBit=function(e,r,n){var a,i;switch(e){case 0:a=n+r&1;break;case 1:a=n&1;break;case 2:a=r%3;break;case 3:a=(n+r)%3;break;case 4:a=Math.floor(n/2)+Math.floor(r/3)&1;break;case 5:i=n*r,a=(i&1)+i%3;break;case 6:i=n*r,a=(i&1)+i%3&1;break;case 7:i=n*r,a=i%3+(n+r&1)&1;break;default:throw new fr("Invalid mask pattern: "+e)}return a===0},t.applyMaskPenaltyRule1Internal=function(e,r){for(var n=0,a=r?e.getHeight():e.getWidth(),i=r?e.getWidth():e.getHeight(),o=e.getArray(),l=0;l<a;l++){for(var c=0,u=-1,h=0;h<i;h++){var m=r?o[l][h]:o[h][l];m===u?c++:(c>=5&&(n+=t.N1+(c-5)),c=1,u=m)}c>=5&&(n+=t.N1+(c-5))}return n},t.N1=3,t.N2=3,t.N3=40,t.N4=10,t})(),_K=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},CK=(function(){function t(e,r){this.width=e,this.height=r;for(var n=new Array(r),a=0;a!==r;a++)n[a]=new Uint8Array(e);this.bytes=n}return t.prototype.getHeight=function(){return this.height},t.prototype.getWidth=function(){return this.width},t.prototype.get=function(e,r){return this.bytes[r][e]},t.prototype.getArray=function(){return this.bytes},t.prototype.setNumber=function(e,r,n){this.bytes[r][e]=n},t.prototype.setBoolean=function(e,r,n){this.bytes[r][e]=n?1:0},t.prototype.clear=function(e){var r,n;try{for(var a=_K(this.bytes),i=a.next();!i.done;i=a.next()){var o=i.value;Ji.fill(o,e)}}catch(l){r={error:l}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;if(this.width!==r.width||this.height!==r.height)return!1;for(var n=0,a=this.height;n<a;++n)for(var i=this.bytes[n],o=r.bytes[n],l=0,c=this.width;l<c;++l)if(i[l]!==o[l])return!1;return!0},t.prototype.toString=function(){for(var e=new Fn,r=0,n=this.height;r<n;++r){for(var a=this.bytes[r],i=0,o=this.width;i<o;++i)switch(a[i]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},t})(),Vy=(function(){function t(){this.maskPattern=-1}return t.prototype.getMode=function(){return this.mode},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getVersion=function(){return this.version},t.prototype.getMaskPattern=function(){return this.maskPattern},t.prototype.getMatrix=function(){return this.matrix},t.prototype.toString=function(){var e=new Fn;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},t.prototype.setMode=function(e){this.mode=e},t.prototype.setECLevel=function(e){this.ecLevel=e},t.prototype.setVersion=function(e){this.version=e},t.prototype.setMaskPattern=function(e){this.maskPattern=e},t.prototype.setMatrix=function(e){this.matrix=e},t.isValidMaskPattern=function(e){return e>=0&&e<t.NUM_MASK_PATTERNS},t.NUM_MASK_PATTERNS=8,t})(),SK=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),ts=(function(t){SK(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="WriterException",e})(eo),x_=(function(){function t(){}return t.clearMatrix=function(e){e.clear(255)},t.buildMatrix=function(e,r,n,a,i){t.clearMatrix(i),t.embedBasicPatterns(n,i),t.embedTypeInfo(r,a,i),t.maybeEmbedVersionInfo(n,i),t.embedDataBits(e,a,i)},t.embedBasicPatterns=function(e,r){t.embedPositionDetectionPatternsAndSeparators(r),t.embedDarkDotAtLeftBottomCorner(r),t.maybeEmbedPositionAdjustmentPatterns(e,r),t.embedTimingPatterns(r)},t.embedTypeInfo=function(e,r,n){var a=new Oa;t.makeTypeInfoBits(e,r,a);for(var i=0,o=a.getSize();i<o;++i){var l=a.get(a.getSize()-1-i),c=t.TYPE_INFO_COORDINATES[i],u=c[0],h=c[1];if(n.setBoolean(u,h,l),i<8){var m=n.getWidth()-i-1,x=8;n.setBoolean(m,x,l)}else{var m=8,x=n.getHeight()-7+(i-8);n.setBoolean(m,x,l)}}},t.maybeEmbedVersionInfo=function(e,r){if(!(e.getVersionNumber()<7)){var n=new Oa;t.makeVersionInfoBits(e,n);for(var a=17,i=0;i<6;++i)for(var o=0;o<3;++o){var l=n.get(a);a--,r.setBoolean(i,r.getHeight()-11+o,l),r.setBoolean(r.getHeight()-11+o,i,l)}}},t.embedDataBits=function(e,r,n){for(var a=0,i=-1,o=n.getWidth()-1,l=n.getHeight()-1;o>0;){for(o===6&&(o-=1);l>=0&&l<n.getHeight();){for(var c=0;c<2;++c){var u=o-c;if(t.isEmpty(n.get(u,l))){var h=void 0;a<e.getSize()?(h=e.get(a),++a):h=!1,r!==255&&r0.getDataMaskBit(r,u,l)&&(h=!h),n.setBoolean(u,l,h)}}l+=i}i=-i,l+=i,o-=2}if(a!==e.getSize())throw new ts("Not all bits consumed: "+a+"/"+e.getSize())},t.findMSBSet=function(e){return 32-Jr.numberOfLeadingZeros(e)},t.calculateBCHCode=function(e,r){if(r===0)throw new fr("0 polynomial");var n=t.findMSBSet(r);for(e<<=n-1;t.findMSBSet(e)>=n;)e^=r<<t.findMSBSet(e)-n;return e},t.makeTypeInfoBits=function(e,r,n){if(!Vy.isValidMaskPattern(r))throw new ts("Invalid mask pattern");var a=e.getBits()<<3|r;n.appendBits(a,5);var i=t.calculateBCHCode(a,t.TYPE_INFO_POLY);n.appendBits(i,10);var o=new Oa;if(o.appendBits(t.TYPE_INFO_MASK_PATTERN,15),n.xor(o),n.getSize()!==15)throw new ts("should not happen but we got: "+n.getSize())},t.makeVersionInfoBits=function(e,r){r.appendBits(e.getVersionNumber(),6);var n=t.calculateBCHCode(e.getVersionNumber(),t.VERSION_INFO_POLY);if(r.appendBits(n,12),r.getSize()!==18)throw new ts("should not happen but we got: "+r.getSize())},t.isEmpty=function(e){return e===255},t.embedTimingPatterns=function(e){for(var r=8;r<e.getWidth()-8;++r){var n=(r+1)%2;t.isEmpty(e.get(r,6))&&e.setNumber(r,6,n),t.isEmpty(e.get(6,r))&&e.setNumber(6,r,n)}},t.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new ts;e.setNumber(8,e.getHeight()-8,1)},t.embedHorizontalSeparationPattern=function(e,r,n){for(var a=0;a<8;++a){if(!t.isEmpty(n.get(e+a,r)))throw new ts;n.setNumber(e+a,r,0)}},t.embedVerticalSeparationPattern=function(e,r,n){for(var a=0;a<7;++a){if(!t.isEmpty(n.get(e,r+a)))throw new ts;n.setNumber(e,r+a,0)}},t.embedPositionAdjustmentPattern=function(e,r,n){for(var a=0;a<5;++a)for(var i=t.POSITION_ADJUSTMENT_PATTERN[a],o=0;o<5;++o)n.setNumber(e+o,r+a,i[o])},t.embedPositionDetectionPattern=function(e,r,n){for(var a=0;a<7;++a)for(var i=t.POSITION_DETECTION_PATTERN[a],o=0;o<7;++o)n.setNumber(e+o,r+a,i[o])},t.embedPositionDetectionPatternsAndSeparators=function(e){var r=t.POSITION_DETECTION_PATTERN[0].length;t.embedPositionDetectionPattern(0,0,e),t.embedPositionDetectionPattern(e.getWidth()-r,0,e),t.embedPositionDetectionPattern(0,e.getWidth()-r,e);var n=8;t.embedHorizontalSeparationPattern(0,n-1,e),t.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),t.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);var a=7;t.embedVerticalSeparationPattern(a,0,e),t.embedVerticalSeparationPattern(e.getHeight()-a-1,0,e),t.embedVerticalSeparationPattern(a,e.getHeight()-a,e)},t.maybeEmbedPositionAdjustmentPatterns=function(e,r){if(!(e.getVersionNumber()<2))for(var n=e.getVersionNumber()-1,a=t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],i=0,o=a.length;i!==o;i++){var l=a[i];if(l>=0)for(var c=0;c!==o;c++){var u=a[c];u>=0&&t.isEmpty(r.get(u,l))&&t.embedPositionAdjustmentPattern(u-2,l-2,r)}}},t.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),t.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),t.VERSION_INFO_POLY=7973,t.TYPE_INFO_POLY=1335,t.TYPE_INFO_MASK_PATTERN=21522,t})(),AK=(function(){function t(e,r){this.dataBytes=e,this.errorCorrectionBytes=r}return t.prototype.getDataBytes=function(){return this.dataBytes},t.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},t})(),g_=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.calculateMaskPenalty=function(e){return r0.applyMaskPenaltyRule1(e)+r0.applyMaskPenaltyRule2(e)+r0.applyMaskPenaltyRule3(e)+r0.applyMaskPenaltyRule4(e)},t.encode=function(e,r,n){n===void 0&&(n=null);var a=t.DEFAULT_BYTE_MODE_ENCODING,i=n!==null&&n.get(lx.CHARACTER_SET)!==void 0;i&&(a=n.get(lx.CHARACTER_SET).toString());var o=this.chooseMode(e,a),l=new Oa;if(o===rs.BYTE&&(i||t.DEFAULT_BYTE_MODE_ENCODING!==a)){var c=ya.getCharacterSetECIByName(a);c!==void 0&&this.appendECI(c,l)}this.appendModeInfo(o,l);var u=new Oa;this.appendBytes(e,o,u,a);var h;if(n!==null&&n.get(lx.QR_VERSION)!==void 0){var m=Number.parseInt(n.get(lx.QR_VERSION).toString(),10);h=mh.getVersionForNumber(m);var x=this.calculateBitsNeeded(o,l,u,h);if(!this.willFit(x,h,r))throw new ts("Data too big for requested version")}else h=this.recommendVersion(r,o,l,u);var p=new Oa;p.appendBitArray(l);var y=o===rs.BYTE?u.getSizeInBytes():e.length;this.appendLengthInfo(y,h,o,p),p.appendBitArray(u);var w=h.getECBlocksForLevel(r),j=h.getTotalCodewords()-w.getTotalECCodewords();this.terminateBits(j,p);var C=this.interleaveWithECBytes(p,h.getTotalCodewords(),j,w.getNumBlocks()),S=new Vy;S.setECLevel(r),S.setMode(o),S.setVersion(h);var k=h.getDimensionForVersion(),P=new CK(k,k),O=this.chooseMaskPattern(C,r,h,P);return S.setMaskPattern(O),x_.buildMatrix(C,r,h,O,P),S.setMatrix(P),S},t.recommendVersion=function(e,r,n,a){var i=this.calculateBitsNeeded(r,n,a,mh.getVersionForNumber(1)),o=this.chooseVersion(i,e),l=this.calculateBitsNeeded(r,n,a,o);return this.chooseVersion(l,e)},t.calculateBitsNeeded=function(e,r,n,a){return r.getSize()+e.getCharacterCountBits(a)+n.getSize()},t.getAlphanumericCode=function(e){return e<t.ALPHANUMERIC_TABLE.length?t.ALPHANUMERIC_TABLE[e]:-1},t.chooseMode=function(e,r){if(r===void 0&&(r=null),ya.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(e))return rs.KANJI;for(var n=!1,a=!1,i=0,o=e.length;i<o;++i){var l=e.charAt(i);if(t.isDigit(l))n=!0;else if(this.getAlphanumericCode(l.charCodeAt(0))!==-1)a=!0;else return rs.BYTE}return a?rs.ALPHANUMERIC:n?rs.NUMERIC:rs.BYTE},t.isOnlyDoubleByteKanji=function(e){var r;try{r=oc.encode(e,ya.SJIS)}catch{return!1}var n=r.length;if(n%2!==0)return!1;for(var a=0;a<n;a+=2){var i=r[a]&255;if((i<129||i>159)&&(i<224||i>235))return!1}return!0},t.chooseMaskPattern=function(e,r,n,a){for(var i=Number.MAX_SAFE_INTEGER,o=-1,l=0;l<Vy.NUM_MASK_PATTERNS;l++){x_.buildMatrix(e,r,n,l,a);var c=this.calculateMaskPenalty(a);c<i&&(i=c,o=l)}return o},t.chooseVersion=function(e,r){for(var n=1;n<=40;n++){var a=mh.getVersionForNumber(n);if(t.willFit(e,a,r))return a}throw new ts("Data too big")},t.willFit=function(e,r,n){var a=r.getTotalCodewords(),i=r.getECBlocksForLevel(n),o=i.getTotalECCodewords(),l=a-o,c=(e+7)/8;return l>=c},t.terminateBits=function(e,r){var n=e*8;if(r.getSize()>n)throw new ts("data bits cannot fit in the QR Code"+r.getSize()+" > "+n);for(var a=0;a<4&&r.getSize()<n;++a)r.appendBit(!1);var i=r.getSize()&7;if(i>0)for(var a=i;a<8;a++)r.appendBit(!1);for(var o=e-r.getSizeInBytes(),a=0;a<o;++a)r.appendBits((a&1)===0?236:17,8);if(r.getSize()!==n)throw new ts("Bits size does not equal capacity")},t.getNumDataBytesAndNumECBytesForBlockID=function(e,r,n,a,i,o){if(a>=n)throw new ts("Block ID too large");var l=e%n,c=n-l,u=Math.floor(e/n),h=u+1,m=Math.floor(r/n),x=m+1,p=u-m,y=h-x;if(p!==y)throw new ts("EC bytes mismatch");if(n!==c+l)throw new ts("RS blocks mismatch");if(e!==(m+p)*c+(x+y)*l)throw new ts("Total bytes mismatch");a<c?(i[0]=m,o[0]=p):(i[0]=x,o[0]=y)},t.interleaveWithECBytes=function(e,r,n,a){var i,o,l,c;if(e.getSizeInBytes()!==n)throw new ts("Number of bits and data bytes does not match");for(var u=0,h=0,m=0,x=new Array,p=0;p<a;++p){var y=new Int32Array(1),w=new Int32Array(1);t.getNumDataBytesAndNumECBytesForBlockID(r,n,a,p,y,w);var j=y[0],C=new Uint8Array(j);e.toBytes(8*u,C,0,j);var S=t.generateECBytes(C,w[0]);x.push(new AK(C,S)),h=Math.max(h,j),m=Math.max(m,S.length),u+=y[0]}if(n!==u)throw new ts("Data bytes does not match offset");for(var k=new Oa,p=0;p<h;++p)try{for(var P=(i=void 0,g_(x)),O=P.next();!O.done;O=P.next()){var $=O.value,C=$.getDataBytes();p<C.length&&k.appendBits(C[p],8)}}catch(K){i={error:K}}finally{try{O&&!O.done&&(o=P.return)&&o.call(P)}finally{if(i)throw i.error}}for(var p=0;p<m;++p)try{for(var R=(l=void 0,g_(x)),B=R.next();!B.done;B=R.next()){var $=B.value,S=$.getErrorCorrectionBytes();p<S.length&&k.appendBits(S[p],8)}}catch(K){l={error:K}}finally{try{B&&!B.done&&(c=R.return)&&c.call(R)}finally{if(l)throw l.error}}if(r!==k.getSizeInBytes())throw new ts("Interleaving error: "+r+" and "+k.getSizeInBytes()+" differ.");return k},t.generateECBytes=function(e,r){for(var n=e.length,a=new Int32Array(n+r),i=0;i<n;i++)a[i]=e[i]&255;new bE(Ki.QR_CODE_FIELD_256).encode(a,r);for(var o=new Uint8Array(r),i=0;i<r;i++)o[i]=a[n+i];return o},t.appendModeInfo=function(e,r){r.appendBits(e.getBits(),4)},t.appendLengthInfo=function(e,r,n,a){var i=n.getCharacterCountBits(r);if(e>=1<<i)throw new ts(e+" is bigger than "+((1<<i)-1));a.appendBits(e,i)},t.appendBytes=function(e,r,n,a){switch(r){case rs.NUMERIC:t.appendNumericBytes(e,n);break;case rs.ALPHANUMERIC:t.appendAlphanumericBytes(e,n);break;case rs.BYTE:t.append8BitBytes(e,n,a);break;case rs.KANJI:t.appendKanjiBytes(e,n);break;default:throw new ts("Invalid mode: "+r)}},t.getDigit=function(e){return e.charCodeAt(0)-48},t.isDigit=function(e){var r=t.getDigit(e);return r>=0&&r<=9},t.appendNumericBytes=function(e,r){for(var n=e.length,a=0;a<n;){var i=t.getDigit(e.charAt(a));if(a+2<n){var o=t.getDigit(e.charAt(a+1)),l=t.getDigit(e.charAt(a+2));r.appendBits(i*100+o*10+l,10),a+=3}else if(a+1<n){var o=t.getDigit(e.charAt(a+1));r.appendBits(i*10+o,7),a+=2}else r.appendBits(i,4),a++}},t.appendAlphanumericBytes=function(e,r){for(var n=e.length,a=0;a<n;){var i=t.getAlphanumericCode(e.charCodeAt(a));if(i===-1)throw new ts;if(a+1<n){var o=t.getAlphanumericCode(e.charCodeAt(a+1));if(o===-1)throw new ts;r.appendBits(i*45+o,11),a+=2}else r.appendBits(i,6),a++}},t.append8BitBytes=function(e,r,n){var a;try{a=oc.encode(e,n)}catch(c){throw new ts(c)}for(var i=0,o=a.length;i!==o;i++){var l=a[i];r.appendBits(l,8)}},t.appendKanjiBytes=function(e,r){var n;try{n=oc.encode(e,ya.SJIS)}catch(m){throw new ts(m)}for(var a=n.length,i=0;i<a;i+=2){var o=n[i]&255,l=n[i+1]&255,c=o<<8&4294967295|l,u=-1;if(c>=33088&&c<=40956?u=c-33088:c>=57408&&c<=60351&&(u=c-49472),u===-1)throw new ts("Invalid byte sequence");var h=(u>>8)*192+(u&255);r.appendBits(h,13)}},t.appendECI=function(e,r){r.appendBits(rs.ECI.getBits(),4),r.appendBits(e.getValue(),8)},t.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),t.DEFAULT_BYTE_MODE_ENCODING=ya.UTF8.getName(),t})();var EK=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(t){EK(e,t);function e(r,n,a,i,o,l,c,u){var h=t.call(this,l,c)||this;if(h.yuvData=r,h.dataWidth=n,h.dataHeight=a,h.left=i,h.top=o,i+l>n||o+c>a)throw new fr("Crop rectangle does not fit within image data.");return u&&h.reverseHorizontal(l,c),h}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new fr("Requested row is outside the image: "+r);var a=this.getWidth();(n==null||n.length<a)&&(n=new Uint8ClampedArray(a));var i=(r+this.top)*this.dataWidth+this.left;return Yn.arraycopy(this.yuvData,i,n,0,a),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.yuvData;var a=r*n,i=new Uint8ClampedArray(a),o=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return Yn.arraycopy(this.yuvData,o,i,0,a),i;for(var l=0;l<n;l++){var c=l*r;Yn.arraycopy(this.yuvData,o,i,c,r),o+=this.dataWidth}return i},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,i){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+n,a,i,!1)},e.prototype.renderThumbnail=function(){for(var r=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(r*n),i=this.yuvData,o=this.top*this.dataWidth+this.left,l=0;l<n;l++){for(var c=l*r,u=0;u<r;u++){var h=i[o+u*e.THUMBNAIL_SCALE_FACTOR]&255;a[c+u]=4278190080|h*65793}o+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return a},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(r,n){for(var a=this.yuvData,i=0,o=this.top*this.dataWidth+this.left;i<n;i++,o+=this.dataWidth)for(var l=o+r/2,c=o,u=o+r-1;c<l;c++,u--){var h=a[c];a[c]=a[u],a[u]=h}},e.prototype.invert=function(){return new kb(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(G1);var kK=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(t){kK(e,t);function e(r,n,a,i,o,l,c){var u=t.call(this,n,a)||this;if(u.dataWidth=i,u.dataHeight=o,u.left=l,u.top=c,r.BYTES_PER_ELEMENT===4){for(var h=n*a,m=new Uint8ClampedArray(h),x=0;x<h;x++){var p=r[x],y=p>>16&255,w=p>>7&510,j=p&255;m[x]=(y+w+j)/4&255}u.luminances=m}else u.luminances=r;if(i===void 0&&(u.dataWidth=n),o===void 0&&(u.dataHeight=a),l===void 0&&(u.left=0),c===void 0&&(u.top=0),u.left+n>u.dataWidth||u.top+a>u.dataHeight)throw new fr("Crop rectangle does not fit within image data.");return u}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new fr("Requested row is outside the image: "+r);var a=this.getWidth();(n==null||n.length<a)&&(n=new Uint8ClampedArray(a));var i=(r+this.top)*this.dataWidth+this.left;return Yn.arraycopy(this.luminances,i,n,0,a),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.luminances;var a=r*n,i=new Uint8ClampedArray(a),o=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return Yn.arraycopy(this.luminances,o,i,0,a),i;for(var l=0;l<n;l++){var c=l*r;Yn.arraycopy(this.luminances,o,i,c,r),o+=this.dataWidth}return i},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,i){return new e(this.luminances,a,i,this.dataWidth,this.dataHeight,this.left+r,this.top+n)},e.prototype.invert=function(){return new kb(this)},e})(G1);var PK=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})();(function(t){PK(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.forName=function(r){return this.getCharacterSetECIByName(r)},e})(ya);(function(){function t(){}return t.ISO_8859_1=ya.ISO8859_1,t})();var TK=(function(){function t(){}return t.prototype.isCompact=function(){return this.compact},t.prototype.setCompact=function(e){this.compact=e},t.prototype.getSize=function(){return this.size},t.prototype.setSize=function(e){this.size=e},t.prototype.getLayers=function(){return this.layers},t.prototype.setLayers=function(e){this.layers=e},t.prototype.getCodeWords=function(){return this.codeWords},t.prototype.setCodeWords=function(e){this.codeWords=e},t.prototype.getMatrix=function(){return this.matrix},t.prototype.setMatrix=function(e){this.matrix=e},t})(),v_=(function(){function t(){}return t.singletonList=function(e){return[e]},t.min=function(e,r){return e.sort(r)[0]},t})(),IK=(function(){function t(e){this.previous=e}return t.prototype.getPrevious=function(){return this.previous},t})(),DK=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Ob=(function(t){DK(e,t);function e(r,n,a){var i=t.call(this,r)||this;return i.value=n,i.bitCount=a,i}return e.prototype.appendTo=function(r,n){r.appendBits(this.value,this.bitCount)},e.prototype.add=function(r,n){return new e(this,r,n)},e.prototype.addBinaryShift=function(r,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,r,n)},e.prototype.toString=function(){var r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+Jr.toBinaryString(r|1<<this.bitCount).substring(1)+">"},e})(IK),OK=(function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)a.hasOwnProperty(i)&&(n[i]=a[i])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),RK=(function(t){OK(e,t);function e(r,n,a){var i=t.call(this,r,0,0)||this;return i.binaryShiftStart=n,i.binaryShiftByteCount=a,i}return e.prototype.appendTo=function(r,n){for(var a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):a===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(n[this.binaryShiftStart+a],8)},e.prototype.addBinaryShift=function(r,n){return new e(this,r,n)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e})(Ob);function LK(t,e,r){return new RK(t,e,r)}function qm(t,e,r){return new Ob(t,e,r)}var FK=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],nu=0,d1=1,Wo=2,NE=3,rc=4,MK=new Ob(null,0,0),Bv=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],BK=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function UK(t){var e,r;try{for(var n=BK(t),a=n.next();!a.done;a=n.next()){var i=a.value;Ji.fill(i,-1)}}catch(o){e={error:o}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return t[nu][rc]=0,t[d1][rc]=0,t[d1][nu]=28,t[NE][rc]=0,t[Wo][rc]=0,t[Wo][nu]=15,t}var jE=UK(Ji.createInt32Array(6,6)),$K=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},VK=(function(){function t(e,r,n,a){this.token=e,this.mode=r,this.binaryShiftByteCount=n,this.bitCount=a}return t.prototype.getMode=function(){return this.mode},t.prototype.getToken=function(){return this.token},t.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},t.prototype.getBitCount=function(){return this.bitCount},t.prototype.latchAndAppend=function(e,r){var n=this.bitCount,a=this.token;if(e!==this.mode){var i=Bv[this.mode][e];a=qm(a,i&65535,i>>16),n+=i>>16}var o=e===Wo?4:5;return a=qm(a,r,o),new t(a,e,0,n+o)},t.prototype.shiftAndAppend=function(e,r){var n=this.token,a=this.mode===Wo?4:5;return n=qm(n,jE[this.mode][e],a),n=qm(n,r,5),new t(n,this.mode,0,this.bitCount+a+5)},t.prototype.addBinaryShiftChar=function(e){var r=this.token,n=this.mode,a=this.bitCount;if(this.mode===rc||this.mode===Wo){var i=Bv[n][nu];r=qm(r,i&65535,i>>16),a+=i>>16,n=nu}var o=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,l=new t(r,n,this.binaryShiftByteCount+1,a+o);return l.binaryShiftByteCount===2078&&(l=l.endBinaryShift(e+1)),l},t.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var r=this.token;return r=LK(r,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new t(r,this.mode,0,this.bitCount)},t.prototype.isBetterThanOrEqualTo=function(e){var r=this.bitCount+(Bv[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?r+=t.calculateBinaryShiftCost(e)-t.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(r+=10),r<=e.bitCount},t.prototype.toBitArray=function(e){for(var r,n,a=[],i=this.endBinaryShift(e.length).token;i!==null;i=i.getPrevious())a.unshift(i);var o=new Oa;try{for(var l=$K(a),c=l.next();!c.done;c=l.next()){var u=c.value;u.appendTo(o,e)}}catch(h){r={error:h}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return o},t.prototype.toString=function(){return Gn.format("%s bits=%d bytes=%d",FK[this.mode],this.bitCount,this.binaryShiftByteCount)},t.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},t.INITIAL_STATE=new t(MK,nu,0,0),t})();function zK(t){var e=Gn.getCharCode(" "),r=Gn.getCharCode("."),n=Gn.getCharCode(",");t[nu][e]=1;for(var a=Gn.getCharCode("Z"),i=Gn.getCharCode("A"),o=i;o<=a;o++)t[nu][o]=o-i+2;t[d1][e]=1;for(var l=Gn.getCharCode("z"),c=Gn.getCharCode("a"),o=c;o<=l;o++)t[d1][o]=o-c+2;t[Wo][e]=1;for(var u=Gn.getCharCode("9"),h=Gn.getCharCode("0"),o=h;o<=u;o++)t[Wo][o]=o-h+2;t[Wo][n]=12,t[Wo][r]=13;for(var m=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],x=0;x<m.length;x++)t[NE][Gn.getCharCode(m[x])]=x;for(var p=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],x=0;x<p.length;x++)Gn.getCharCode(p[x])>0&&(t[rc][Gn.getCharCode(p[x])]=x);return t}var Uv=zK(Ji.createInt32Array(5,256)),cx=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qK=(function(){function t(e){this.text=e}return t.prototype.encode=function(){for(var e=Gn.getCharCode(" "),r=Gn.getCharCode(`
`),n=v_.singletonList(VK.INITIAL_STATE),a=0;a<this.text.length;a++){var i=void 0,o=a+1<this.text.length?this.text[a+1]:0;switch(this.text[a]){case Gn.getCharCode("\r"):i=o===r?2:0;break;case Gn.getCharCode("."):i=o===e?3:0;break;case Gn.getCharCode(","):i=o===e?4:0;break;case Gn.getCharCode(":"):i=o===e?5:0;break;default:i=0}i>0?(n=t.updateStateListForPair(n,a,i),a++):n=this.updateStateListForChar(n,a)}var l=v_.min(n,function(c,u){return c.getBitCount()-u.getBitCount()});return l.toBitArray(this.text)},t.prototype.updateStateListForChar=function(e,r){var n,a,i=[];try{for(var o=cx(e),l=o.next();!l.done;l=o.next()){var c=l.value;this.updateStateForChar(c,r,i)}}catch(u){n={error:u}}finally{try{l&&!l.done&&(a=o.return)&&a.call(o)}finally{if(n)throw n.error}}return t.simplifyStates(i)},t.prototype.updateStateForChar=function(e,r,n){for(var a=this.text[r]&255,i=Uv[e.getMode()][a]>0,o=null,l=0;l<=rc;l++){var c=Uv[l][a];if(c>0){if(o==null&&(o=e.endBinaryShift(r)),!i||l===e.getMode()||l===Wo){var u=o.latchAndAppend(l,c);n.push(u)}if(!i&&jE[e.getMode()][l]>=0){var h=o.shiftAndAppend(l,c);n.push(h)}}}if(e.getBinaryShiftByteCount()>0||Uv[e.getMode()][a]===0){var m=e.addBinaryShiftChar(r);n.push(m)}},t.updateStateListForPair=function(e,r,n){var a,i,o=[];try{for(var l=cx(e),c=l.next();!c.done;c=l.next()){var u=c.value;this.updateStateForPair(u,r,n,o)}}catch(h){a={error:h}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(a)throw a.error}}return this.simplifyStates(o)},t.updateStateForPair=function(e,r,n,a){var i=e.endBinaryShift(r);if(a.push(i.latchAndAppend(rc,n)),e.getMode()!==rc&&a.push(i.shiftAndAppend(rc,n)),n===3||n===4){var o=i.latchAndAppend(Wo,16-n).latchAndAppend(Wo,1);a.push(o)}if(e.getBinaryShiftByteCount()>0){var l=e.addBinaryShiftChar(r).addBinaryShiftChar(r+1);a.push(l)}},t.simplifyStates=function(e){var r,n,a,i,o=[];try{for(var l=cx(e),c=l.next();!c.done;c=l.next()){var u=c.value,h=!0,m=function(j){if(j.isBetterThanOrEqualTo(u))return h=!1,"break";u.isBetterThanOrEqualTo(j)&&(o=o.filter(function(C){return C!==j}))};try{for(var x=(a=void 0,cx(o)),p=x.next();!p.done;p=x.next()){var y=p.value,w=m(y);if(w==="break")break}}catch(j){a={error:j}}finally{try{p&&!p.done&&(i=x.return)&&i.call(x)}finally{if(a)throw a.error}}h&&o.push(u)}}catch(j){r={error:j}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return o},t})(),HK=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.encodeBytes=function(e){return t.encode(e,t.DEFAULT_EC_PERCENT,t.DEFAULT_AZTEC_LAYERS)},t.encode=function(e,r,n){var a=new qK(e).encode(),i=Jr.truncDivision(a.getSize()*r,100)+11,o=a.getSize()+i,l,c,u,h,m;if(n!==t.DEFAULT_AZTEC_LAYERS){if(l=n<0,c=Math.abs(n),c>(l?t.MAX_NB_BITS_COMPACT:t.MAX_NB_BITS))throw new fr(Gn.format("Illegal value %s for layers",n));u=t.totalBitsInLayer(c,l),h=t.WORD_SIZE[c];var x=u-u%h;if(m=t.stuffBits(a,h),m.getSize()+i>x)throw new fr("Data to large for user specified layer");if(l&&m.getSize()>h*64)throw new fr("Data to large for user specified layer")}else{h=0,m=null;for(var p=0;;p++){if(p>t.MAX_NB_BITS)throw new fr("Data too large for an Aztec code");if(l=p<=3,c=l?p+1:p,u=t.totalBitsInLayer(c,l),!(o>u)){(m==null||h!==t.WORD_SIZE[c])&&(h=t.WORD_SIZE[c],m=t.stuffBits(a,h));var x=u-u%h;if(!(l&&m.getSize()>h*64)&&m.getSize()+i<=x)break}}}var y=t.generateCheckWords(m,u,h),w=m.getSize()/h,j=t.generateModeMessage(l,c,w),C=(l?11:14)+c*4,S=new Int32Array(C),k;if(l){k=C;for(var p=0;p<S.length;p++)S[p]=p}else{k=C+1+2*Jr.truncDivision(Jr.truncDivision(C,2)-1,15);for(var P=Jr.truncDivision(C,2),O=Jr.truncDivision(k,2),p=0;p<P;p++){var $=p+Jr.truncDivision(p,15);S[P-p-1]=O-$-1,S[P+p]=O+$+1}}for(var R=new hc(k),p=0,B=0;p<c;p++){for(var U=(c-p)*4+(l?9:12),K=0;K<U;K++)for(var M=K*2,q=0;q<2;q++)y.get(B+M+q)&&R.set(S[p*2+q],S[p*2+K]),y.get(B+U*2+M+q)&&R.set(S[p*2+K],S[C-1-p*2-q]),y.get(B+U*4+M+q)&&R.set(S[C-1-p*2-q],S[C-1-p*2-K]),y.get(B+U*6+M+q)&&R.set(S[C-1-p*2-K],S[p*2+q]);B+=U*8}if(t.drawModeMessage(R,l,k,j),l)t.drawBullsEye(R,Jr.truncDivision(k,2),5);else{t.drawBullsEye(R,Jr.truncDivision(k,2),7);for(var p=0,K=0;p<Jr.truncDivision(C,2)-1;p+=15,K+=16)for(var q=Jr.truncDivision(k,2)&1;q<k;q+=2)R.set(Jr.truncDivision(k,2)-K,q),R.set(Jr.truncDivision(k,2)+K,q),R.set(q,Jr.truncDivision(k,2)-K),R.set(q,Jr.truncDivision(k,2)+K)}var re=new TK;return re.setCompact(l),re.setSize(k),re.setLayers(c),re.setCodeWords(w),re.setMatrix(R),re},t.drawBullsEye=function(e,r,n){for(var a=0;a<n;a+=2)for(var i=r-a;i<=r+a;i++)e.set(i,r-a),e.set(i,r+a),e.set(r-a,i),e.set(r+a,i);e.set(r-n,r-n),e.set(r-n+1,r-n),e.set(r-n,r-n+1),e.set(r+n,r-n),e.set(r+n,r-n+1),e.set(r+n,r+n-1)},t.generateModeMessage=function(e,r,n){var a=new Oa;return e?(a.appendBits(r-1,2),a.appendBits(n-1,6),a=t.generateCheckWords(a,28,4)):(a.appendBits(r-1,5),a.appendBits(n-1,11),a=t.generateCheckWords(a,40,4)),a},t.drawModeMessage=function(e,r,n,a){var i=Jr.truncDivision(n,2);if(r)for(var o=0;o<7;o++){var l=i-3+o;a.get(o)&&e.set(l,i-5),a.get(o+7)&&e.set(i+5,l),a.get(20-o)&&e.set(l,i+5),a.get(27-o)&&e.set(i-5,l)}else for(var o=0;o<10;o++){var l=i-5+o+Jr.truncDivision(o,5);a.get(o)&&e.set(l,i-7),a.get(o+10)&&e.set(i+7,l),a.get(29-o)&&e.set(l,i+7),a.get(39-o)&&e.set(i-7,l)}},t.generateCheckWords=function(e,r,n){var a,i,o=e.getSize()/n,l=new bE(t.getGF(n)),c=Jr.truncDivision(r,n),u=t.bitsToWords(e,n,c);l.encode(u,c-o);var h=r%n,m=new Oa;m.appendBits(0,h);try{for(var x=HK(Array.from(u)),p=x.next();!p.done;p=x.next()){var y=p.value;m.appendBits(y,n)}}catch(w){a={error:w}}finally{try{p&&!p.done&&(i=x.return)&&i.call(x)}finally{if(a)throw a.error}}return m},t.bitsToWords=function(e,r,n){var a=new Int32Array(n),i,o;for(i=0,o=e.getSize()/r;i<o;i++){for(var l=0,c=0;c<r;c++)l|=e.get(i*r+c)?1<<r-c-1:0;a[i]=l}return a},t.getGF=function(e){switch(e){case 4:return Ki.AZTEC_PARAM;case 6:return Ki.AZTEC_DATA_6;case 8:return Ki.AZTEC_DATA_8;case 10:return Ki.AZTEC_DATA_10;case 12:return Ki.AZTEC_DATA_12;default:throw new fr("Unsupported word size "+e)}},t.stuffBits=function(e,r){for(var n=new Oa,a=e.getSize(),i=(1<<r)-2,o=0;o<a;o+=r){for(var l=0,c=0;c<r;c++)(o+c>=a||e.get(o+c))&&(l|=1<<r-1-c);(l&i)===i?(n.appendBits(l&i,r),o--):(l&i)===0?(n.appendBits(l|1,r),o--):n.appendBits(l,r)}return n},t.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.DEFAULT_EC_PERCENT=33,t.DEFAULT_AZTEC_LAYERS=0,t.MAX_NB_BITS=32,t.MAX_NB_BITS_COMPACT=4,t.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),t})();var $v={exports:{}},y_;function WK(){return y_||(y_=1,(function(t){var e=(function(r){var n=Object.prototype,a=n.hasOwnProperty,i=Object.defineProperty||function(J,oe,Y){J[oe]=Y.value},o,l=typeof Symbol=="function"?Symbol:{},c=l.iterator||"@@iterator",u=l.asyncIterator||"@@asyncIterator",h=l.toStringTag||"@@toStringTag";function m(J,oe,Y){return Object.defineProperty(J,oe,{value:Y,enumerable:!0,configurable:!0,writable:!0}),J[oe]}try{m({},"")}catch{m=function(oe,Y,L){return oe[Y]=L}}function x(J,oe,Y,L){var z=oe&&oe.prototype instanceof k?oe:k,V=Object.create(z.prototype),W=new se(L||[]);return i(V,"_invoke",{value:q(J,Y,W)}),V}r.wrap=x;function p(J,oe,Y){try{return{type:"normal",arg:J.call(oe,Y)}}catch(L){return{type:"throw",arg:L}}}var y="suspendedStart",w="suspendedYield",j="executing",C="completed",S={};function k(){}function P(){}function O(){}var $={};m($,c,function(){return this});var R=Object.getPrototypeOf,B=R&&R(R(ue([])));B&&B!==n&&a.call(B,c)&&($=B);var U=O.prototype=k.prototype=Object.create($);P.prototype=O,i(U,"constructor",{value:O,configurable:!0}),i(O,"constructor",{value:P,configurable:!0}),P.displayName=m(O,h,"GeneratorFunction");function K(J){["next","throw","return"].forEach(function(oe){m(J,oe,function(Y){return this._invoke(oe,Y)})})}r.isGeneratorFunction=function(J){var oe=typeof J=="function"&&J.constructor;return oe?oe===P||(oe.displayName||oe.name)==="GeneratorFunction":!1},r.mark=function(J){return Object.setPrototypeOf?Object.setPrototypeOf(J,O):(J.__proto__=O,m(J,h,"GeneratorFunction")),J.prototype=Object.create(U),J},r.awrap=function(J){return{__await:J}};function M(J,oe){function Y(V,W,Q,T){var ie=p(J[V],J,W);if(ie.type==="throw")T(ie.arg);else{var ge=ie.arg,we=ge.value;return we&&typeof we=="object"&&a.call(we,"__await")?oe.resolve(we.__await).then(function(Se){Y("next",Se,Q,T)},function(Se){Y("throw",Se,Q,T)}):oe.resolve(we).then(function(Se){ge.value=Se,Q(ge)},function(Se){return Y("throw",Se,Q,T)})}}var L;function z(V,W){function Q(){return new oe(function(T,ie){Y(V,W,T,ie)})}return L=L?L.then(Q,Q):Q()}i(this,"_invoke",{value:z})}K(M.prototype),m(M.prototype,u,function(){return this}),r.AsyncIterator=M,r.async=function(J,oe,Y,L,z){z===void 0&&(z=Promise);var V=new M(x(J,oe,Y,L),z);return r.isGeneratorFunction(oe)?V:V.next().then(function(W){return W.done?W.value:V.next()})};function q(J,oe,Y){var L=y;return function(V,W){if(L===j)throw new Error("Generator is already running");if(L===C){if(V==="throw")throw W;return G()}for(Y.method=V,Y.arg=W;;){var Q=Y.delegate;if(Q){var T=re(Q,Y);if(T){if(T===S)continue;return T}}if(Y.method==="next")Y.sent=Y._sent=Y.arg;else if(Y.method==="throw"){if(L===y)throw L=C,Y.arg;Y.dispatchException(Y.arg)}else Y.method==="return"&&Y.abrupt("return",Y.arg);L=j;var ie=p(J,oe,Y);if(ie.type==="normal"){if(L=Y.done?C:w,ie.arg===S)continue;return{value:ie.arg,done:Y.done}}else ie.type==="throw"&&(L=C,Y.method="throw",Y.arg=ie.arg)}}}function re(J,oe){var Y=oe.method,L=J.iterator[Y];if(L===o)return oe.delegate=null,Y==="throw"&&J.iterator.return&&(oe.method="return",oe.arg=o,re(J,oe),oe.method==="throw")||Y!=="return"&&(oe.method="throw",oe.arg=new TypeError("The iterator does not provide a '"+Y+"' method")),S;var z=p(L,J.iterator,oe.arg);if(z.type==="throw")return oe.method="throw",oe.arg=z.arg,oe.delegate=null,S;var V=z.arg;if(!V)return oe.method="throw",oe.arg=new TypeError("iterator result is not an object"),oe.delegate=null,S;if(V.done)oe[J.resultName]=V.value,oe.next=J.nextLoc,oe.method!=="return"&&(oe.method="next",oe.arg=o);else return V;return oe.delegate=null,S}K(U),m(U,h,"Generator"),m(U,c,function(){return this}),m(U,"toString",function(){return"[object Generator]"});function ee(J){var oe={tryLoc:J[0]};1 in J&&(oe.catchLoc=J[1]),2 in J&&(oe.finallyLoc=J[2],oe.afterLoc=J[3]),this.tryEntries.push(oe)}function H(J){var oe=J.completion||{};oe.type="normal",delete oe.arg,J.completion=oe}function se(J){this.tryEntries=[{tryLoc:"root"}],J.forEach(ee,this),this.reset(!0)}r.keys=function(J){var oe=Object(J),Y=[];for(var L in oe)Y.push(L);return Y.reverse(),function z(){for(;Y.length;){var V=Y.pop();if(V in oe)return z.value=V,z.done=!1,z}return z.done=!0,z}};function ue(J){if(J){var oe=J[c];if(oe)return oe.call(J);if(typeof J.next=="function")return J;if(!isNaN(J.length)){var Y=-1,L=function z(){for(;++Y<J.length;)if(a.call(J,Y))return z.value=J[Y],z.done=!1,z;return z.value=o,z.done=!0,z};return L.next=L}}return{next:G}}r.values=ue;function G(){return{value:o,done:!0}}return se.prototype={constructor:se,reset:function(J){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(H),!J)for(var oe in this)oe.charAt(0)==="t"&&a.call(this,oe)&&!isNaN(+oe.slice(1))&&(this[oe]=o)},stop:function(){this.done=!0;var J=this.tryEntries[0],oe=J.completion;if(oe.type==="throw")throw oe.arg;return this.rval},dispatchException:function(J){if(this.done)throw J;var oe=this;function Y(T,ie){return V.type="throw",V.arg=J,oe.next=T,ie&&(oe.method="next",oe.arg=o),!!ie}for(var L=this.tryEntries.length-1;L>=0;--L){var z=this.tryEntries[L],V=z.completion;if(z.tryLoc==="root")return Y("end");if(z.tryLoc<=this.prev){var W=a.call(z,"catchLoc"),Q=a.call(z,"finallyLoc");if(W&&Q){if(this.prev<z.catchLoc)return Y(z.catchLoc,!0);if(this.prev<z.finallyLoc)return Y(z.finallyLoc)}else if(W){if(this.prev<z.catchLoc)return Y(z.catchLoc,!0)}else if(Q){if(this.prev<z.finallyLoc)return Y(z.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(J,oe){for(var Y=this.tryEntries.length-1;Y>=0;--Y){var L=this.tryEntries[Y];if(L.tryLoc<=this.prev&&a.call(L,"finallyLoc")&&this.prev<L.finallyLoc){var z=L;break}}z&&(J==="break"||J==="continue")&&z.tryLoc<=oe&&oe<=z.finallyLoc&&(z=null);var V=z?z.completion:{};return V.type=J,V.arg=oe,z?(this.method="next",this.next=z.finallyLoc,S):this.complete(V)},complete:function(J,oe){if(J.type==="throw")throw J.arg;return J.type==="break"||J.type==="continue"?this.next=J.arg:J.type==="return"?(this.rval=this.arg=J.arg,this.method="return",this.next="end"):J.type==="normal"&&oe&&(this.next=oe),S},finish:function(J){for(var oe=this.tryEntries.length-1;oe>=0;--oe){var Y=this.tryEntries[oe];if(Y.finallyLoc===J)return this.complete(Y.completion,Y.afterLoc),H(Y),S}},catch:function(J){for(var oe=this.tryEntries.length-1;oe>=0;--oe){var Y=this.tryEntries[oe];if(Y.tryLoc===J){var L=Y.completion;if(L.type==="throw"){var z=L.arg;H(Y)}return z}}throw new Error("illegal catch attempt")},delegateYield:function(J,oe,Y){return this.delegate={iterator:ue(J),resultName:oe,nextLoc:Y},this.method==="next"&&(this.arg=o),S}},r})(t.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})($v)),$v.exports}var Vv,w_;function Rb(){return w_||(w_=1,Vv=(t,e)=>`${t}-${e}-${Math.random().toString(16).slice(3,8)}`),Vv}var zv,b_;function _E(){if(b_)return zv;b_=1;const t=Rb();let e=0;return zv=({id:r,action:n,payload:a={}})=>{let i=r;return typeof i>"u"&&(i=t("Job",e),e+=1),{id:i,action:n,payload:a}},zv}var Hm={},N_;function Lb(){if(N_)return Hm;N_=1;let t=!1;return Hm.logging=t,Hm.setLogging=e=>{t=e},Hm.log=(...e)=>t?console.log.apply(this,e):null,Hm}var qv,j_;function GK(){if(j_)return qv;j_=1;const t=_E(),{log:e}=Lb(),r=Rb();let n=0;return qv=()=>{const a=r("Scheduler",n),i={},o={};let l=[];n+=1;const c=()=>l.length,u=()=>Object.keys(i).length,h=()=>{if(l.length!==0){const w=Object.keys(i);for(let j=0;j<w.length;j+=1)if(typeof o[w[j]]>"u"){l[0](i[w[j]]);break}}},m=(w,j)=>new Promise((C,S)=>{const k=t({action:w,payload:j});l.push(async P=>{l.shift(),o[P.id]=k;try{C(await P[w].apply(this,[...j,k.id]))}catch(O){S(O)}finally{delete o[P.id],h()}}),e(`[${a}]: Add ${k.id} to JobQueue`),e(`[${a}]: JobQueue length=${l.length}`),h()});return{addWorker:w=>(i[w.id]=w,e(`[${a}]: Add ${w.id}`),e(`[${a}]: Number of workers=${u()}`),h(),w.id),addJob:async(w,...j)=>{if(u()===0)throw Error(`[${a}]: You need to have at least one worker before adding jobs`);return m(w,j)},terminate:async()=>{Object.keys(i).forEach(async w=>{await i[w].terminate()}),l=[]},getQueueLen:c,getNumWorkers:u}},qv}function KK(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Hv,__;function YK(){if(__)return Hv;__=1;function t(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}return Hv=t,Hv}var Wv,C_;function XK(){if(C_)return Wv;C_=1;const t=YK();return Wv=e=>{const r={};return typeof WorkerGlobalScope<"u"?r.type="webworker":t()?r.type="electron":typeof document=="object"?r.type="browser":typeof process=="object"&&typeof KK=="function"&&(r.type="node"),typeof e>"u"?r:r[e]},Wv}var Gv,S_;function ZK(){if(S_)return Gv;S_=1;const e=XK()("type")==="browser"?r=>new URL(r,window.location.href).href:r=>r;return Gv=r=>{const n={...r};return["corePath","workerPath","langPath"].forEach(a=>{r[a]&&(n[a]=e(n[a]))}),n},Gv}var Kv,A_;function JK(){return A_||(A_=1,Kv=t=>{const e=[],r=[],n=[],a=[],i=[];return t.blocks&&t.blocks.forEach(o=>{o.paragraphs.forEach(l=>{l.lines.forEach(c=>{c.words.forEach(u=>{u.symbols.forEach(h=>{i.push({...h,page:t,block:o,paragraph:l,line:c,word:u})}),a.push({...u,page:t,block:o,paragraph:l,line:c})}),n.push({...c,page:t,block:o,paragraph:l})}),r.push({...l,page:t,block:o})}),e.push({...o,page:t})}),{...t,blocks:e,paragraphs:r,lines:n,words:a,symbols:i}}),Kv}var Yv,E_;function CE(){return E_||(E_=1,Yv={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),Yv}const QK="5.1.1",eY={version:QK};var Xv,k_;function tY(){return k_||(k_=1,Xv={workerBlobURL:!0,logger:()=>{}}),Xv}var Zv,P_;function rY(){if(P_)return Zv;P_=1;const t=eY.version;return Zv={...tY(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${t}/dist/worker.min.js`},Zv}var Jv,T_;function nY(){return T_||(T_=1,Jv=({workerPath:t,workerBlobURL:e})=>{let r;if(Blob&&URL&&e){const n=new Blob([`importScripts("${t}");`],{type:"application/javascript"});r=new Worker(URL.createObjectURL(n))}else r=new Worker(t);return r}),Jv}var Qv,I_;function sY(){return I_||(I_=1,Qv=t=>{t.terminate()}),Qv}var e2,D_;function aY(){return D_||(D_=1,e2=(t,e)=>{t.onmessage=({data:r})=>{e(r)}}),e2}var t2,O_;function iY(){return O_||(O_=1,t2=async(t,e)=>{t.postMessage(e)}),t2}var r2,R_;function oY(){if(R_)return r2;R_=1;const t=r=>new Promise((n,a)=>{const i=new FileReader;i.onload=()=>{n(i.result)},i.onerror=({target:{error:{code:o}}})=>{a(Error(`File could not be read! Code=${o}`))},i.readAsArrayBuffer(r)}),e=async r=>{let n=r;if(typeof r>"u")return"undefined";if(typeof r=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(r)?n=atob(r.split(",")[1]).split("").map(a=>a.charCodeAt(0)):n=await(await fetch(r)).arrayBuffer();else if(typeof HTMLElement<"u"&&r instanceof HTMLElement)r.tagName==="IMG"&&(n=await e(r.src)),r.tagName==="VIDEO"&&(n=await e(r.poster)),r.tagName==="CANVAS"&&await new Promise(a=>{r.toBlob(async i=>{n=await t(i),a()})});else if(typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas){const a=await r.convertToBlob();n=await t(a)}else(r instanceof File||r instanceof Blob)&&(n=await t(r));return new Uint8Array(n)};return r2=e,r2}var n2,L_;function lY(){if(L_)return n2;L_=1;const t=rY(),e=nY(),r=sY(),n=aY(),a=iY(),i=oY();return n2={defaultOptions:t,spawnWorker:e,terminateWorker:r,onMessage:n,send:a,loadImage:i},n2}var s2,F_;function SE(){if(F_)return s2;F_=1;const t=ZK(),e=JK(),r=_E(),{log:n}=Lb(),a=Rb(),i=CE(),{defaultOptions:o,spawnWorker:l,terminateWorker:c,onMessage:u,loadImage:h,send:m}=lY();let x=0;return s2=async(p="eng",y=i.LSTM_ONLY,w={},j={})=>{const C=a("Worker",x),{logger:S,errorHandler:k,...P}=t({...o,...w}),O={},$={},R=typeof p=="string"?p.split("+"):p;let B=y,U=j;const K=[i.DEFAULT,i.LSTM_ONLY].includes(y)&&!P.legacyCore;let M,q;const re=new Promise((at,tt)=>{q=at,M=tt}),ee=at=>{M(at.message)};let H=l(P);H.onerror=ee,x+=1;const se=(at,tt)=>{O[at]=tt},ue=(at,tt)=>{$[at]=tt},G=({id:at,action:tt,payload:Be})=>new Promise((ye,st)=>{n(`[${C}]: Start ${at}, action=${tt}`);const Ve=`${tt}-${at}`;se(Ve,ye),ue(Ve,st),m(H,{workerId:C,jobId:at,action:tt,payload:Be})}),J=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),oe=at=>G(r({id:at,action:"load",payload:{options:{lstmOnly:K,corePath:P.corePath,logging:P.logging}}})),Y=(at,tt,Be)=>G(r({id:Be,action:"FS",payload:{method:"writeFile",args:[at,tt]}})),L=(at,tt)=>G(r({id:tt,action:"FS",payload:{method:"readFile",args:[at,{encoding:"utf8"}]}})),z=(at,tt)=>G(r({id:tt,action:"FS",payload:{method:"unlink",args:[at]}})),V=(at,tt,Be)=>G(r({id:Be,action:"FS",payload:{method:at,args:tt}})),W=()=>console.warn("`loadLanguage` is depreciated and should be removed from code (workers now come with language pre-loaded)"),Q=(at,tt)=>G(r({id:tt,action:"loadLanguage",payload:{langs:at,options:{langPath:P.langPath,dataPath:P.dataPath,cachePath:P.cachePath,cacheMethod:P.cacheMethod,gzip:P.gzip,lstmOnly:[i.DEFAULT,i.LSTM_ONLY].includes(B)&&!P.legacyLang}}})),T=()=>console.warn("`initialize` is depreciated and should be removed from code (workers now come pre-initialized)"),ie=(at,tt,Be,ye)=>G(r({id:ye,action:"initialize",payload:{langs:at,oem:tt,config:Be}})),ge=(at="eng",tt,Be,ye)=>{if(K&&[i.TESSERACT_ONLY,i.TESSERACT_LSTM_COMBINED].includes(tt))throw Error("Legacy model requested but code missing.");const st=tt||B;B=st;const Ve=Be||U;U=Ve;const ct=(typeof at=="string"?at.split("+"):at).filter(Kt=>!R.includes(Kt));return R.push(...ct),ct.length>0?Q(ct,ye).then(()=>ie(at,st,Ve,ye)):ie(at,st,Ve,ye)},we=(at={},tt)=>G(r({id:tt,action:"setParameters",payload:{params:at}})),Se=async(at,tt={},Be={blocks:!0,text:!0,hocr:!0,tsv:!0},ye)=>G(r({id:ye,action:"recognize",payload:{image:await h(at),options:tt,output:Be}})),Ue=(at="Tesseract OCR Result",tt=!1,Be)=>(console.log("`getPDF` function is depreciated. `recognize` option `savePDF` should be used instead."),G(r({id:Be,action:"getPDF",payload:{title:at,textonly:tt}}))),We=async(at,tt)=>{if(K)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return G(r({id:tt,action:"detect",payload:{image:await h(at)}}))},be=async()=>(H!==null&&(c(H),H=null),Promise.resolve());u(H,({workerId:at,jobId:tt,status:Be,action:ye,data:st})=>{const Ve=`${ye}-${tt}`;if(Be==="resolve"){n(`[${at}]: Complete ${tt}`);let vt=st;ye==="recognize"?vt=e(st):ye==="getPDF"&&(vt=Array.from({...st,length:Object.keys(st).length})),O[Ve]({jobId:tt,data:vt})}else if(Be==="reject")if($[Ve](st),ye==="load"&&M(st),k)k(st);else throw Error(st);else Be==="progress"&&S({...st,userJobId:tt})});const pe={id:C,worker:H,setResolve:se,setReject:ue,load:J,writeText:Y,readText:L,removeFile:z,FS:V,loadLanguage:W,initialize:T,reinitialize:ge,setParameters:we,recognize:Se,getPDF:Ue,detect:We,terminate:be};return oe().then(()=>Q(p)).then(()=>ie(p,y,j)).then(()=>q(pe)).catch(()=>{}),re},s2}var a2,M_;function cY(){if(M_)return a2;M_=1;const t=SE();return a2={recognize:async(n,a,i)=>{const o=await t(a,1,i);return o.recognize(n).finally(async()=>{await o.terminate()})},detect:async(n,a)=>{const i=await t("osd",0,a);return i.detect(n).finally(async()=>{await i.terminate()})}},a2}var i2,B_;function dY(){return B_||(B_=1,i2={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),i2}var o2,U_;function uY(){return U_||(U_=1,o2={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),o2}var l2,$_;function hY(){if($_)return l2;$_=1,WK();const t=GK(),e=SE(),r=cY(),n=dY(),a=CE(),i=uY(),{setLogging:o}=Lb();return l2={languages:n,OEM:a,PSM:i,createScheduler:t,createWorker:e,setLogging:o,...r},l2}var fY=hY();const mY=g1(fY),Px=!1;function pY(t){const e=t.data,r=t.width,n=t.height;let a=0,i=0;for(let o=1;o<n-1;o++)for(let l=1;l<r-1;l++){const c=(o*r+l)*4,u=e[c],h=e[((o-1)*r+l)*4],m=e[((o+1)*r+l)*4],x=e[(o*r+(l-1))*4],p=e[(o*r+(l+1))*4],y=Math.abs(4*u-h-m-x-p);a+=y,i++}return a/i*10}function xY(t,e,r){const a=t.getImageData(0,0,e,r).data;let i=0,o=0;for(let c=10;c<r-10;c+=10)for(let u=10;u<e-10;u+=10){const h=(c*e+u)*4,m=a[h],x=a[(c*e+(u+1))*4],p=a[((c+1)*e+u)*4];i+=Math.abs(m-x),o+=Math.abs(m-p)}return o/(i+1)>1.2?90:0}function gY(t,e,r){const n=e.data;for(let a=0;a<n.length;a+=4){const i=n[a]*.299+n[a+1]*.587+n[a+2]*.114;n[a]=n[a+1]=n[a+2]=i}switch(r){case"high-contrast":const i=1.0156862745098039;for(let x=0;x<n.length;x+=4)n[x]=Math.min(255,Math.max(0,i*(n[x]-128)+128)),n[x+1]=n[x],n[x+2]=n[x];for(let x=0;x<n.length;x+=4){const p=n[x]>140?255:0;n[x]=n[x+1]=n[x+2]=p}break;case"denoise":const o=new Uint8ClampedArray(n),l=e.width;for(let x=4;x<n.length-4;x+=4){const p=(o[x-4]+o[x]+o[x+4]+o[x-l*4]+o[x+l*4])/5;n[x]=n[x+1]=n[x+2]=p}for(let x=0;x<n.length;x+=4){const p=n[x]>128?255:0;n[x]=n[x+1]=n[x+2]=p}break;case"aggressive":const c=2.5,u=259*(c+255)/(255*(259-c));for(let x=0;x<n.length;x+=4)n[x]=Math.min(255,Math.max(0,u*(n[x]-128)+128)),n[x+1]=n[x],n[x+2]=n[x];for(let x=0;x<n.length;x+=4){const p=n[x]>120?255:0;n[x]=n[x+1]=n[x+2]=p}break;default:const h=1.5,m=259*(h+255)/(255*(259-h));for(let x=0;x<n.length;x+=4)n[x]=m*(n[x]-128)+128,n[x+1]=n[x],n[x+2]=n[x];for(let x=0;x<n.length;x+=4){const p=n[x]>128?255:0;n[x]=n[x+1]=n[x+2]=p}}t.putImageData(e,0,0)}async function vY(t){return new Promise((e,r)=>{const n=document.createElement("canvas"),a=n.getContext("2d"),i=new Image;if(i.onload=()=>{if(!a){r(new Error("Canvas context not available"));return}try{const o=Math.max(i.width,i.height);let l=Math.min(2,2e3/o);l=Math.max(1,l);const c=Math.floor(i.width*l),u=Math.floor(i.height*l);n.width=c,n.height=u,a.drawImage(i,0,0,c,u);const h=xY(a,c,u);let m=!1;if(h!==0){m=!0;const O=document.createElement("canvas"),$=O.getContext("2d");if(!$){r(new Error("Could not get rotated canvas context"));return}h===90||h===270?(O.width=u,O.height=c):(O.width=c,O.height=u),$.translate(O.width/2,O.height/2),$.rotate(h*Math.PI/180),$.drawImage(n,-c/2,-u/2),n.width=O.width,n.height=O.height,a.drawImage(O,0,0)}const x=n.width,p=n.height,y=n.toDataURL("image/png"),w=a.getImageData(0,0,x,p),C=pY(w)<100,S=["standard","high-contrast","denoise","aggressive"],k=[];for(const O of S){const $=document.createElement("canvas"),R=$.getContext("2d");if(!R)continue;$.width=n.width,$.height=n.height,R.drawImage(n,0,0);const B=R.getImageData(0,0,n.width,n.height);gY(R,B,O);const U=R.getImageData(0,0,n.width,n.height);let K=0;const M=U.data;for(let re=4;re<M.length-4;re+=16)Math.abs(M[re]-M[re+4])>200&&K++;const q=$.toDataURL("image/png");k.push({strategy:O,image:q,testScore:K})}k.sort((O,$)=>$.testScore-O.testScore);const P=k[0];e({image:P.image,fullColorImage:y,width:x,height:p,isBlurry:C,rotationCorrected:m,strategy:P.strategy})}catch(o){r(o)}},i.onerror=()=>r(new Error("Failed to load image")),typeof t=="string")i.src=t;else{const o=new FileReader;o.onload=l=>{i.src=l.target?.result},o.onerror=()=>r(new Error("Failed to read image file")),o.readAsDataURL(t)}})}async function yY(t){const e=await mY.createWorker("eng");try{const r=await vY(t),a=(await e.recognize(r.image)).data;let i=[];return a.lines&&Array.isArray(a.lines)&&a.lines.forEach(o=>{o.words&&Array.isArray(o.words)&&o.words.forEach(l=>{l.text&&l.bbox&&i.push({text:l.text,bbox:l.bbox,confidence:l.confidence||0})})}),await e.terminate(),{text:a.text,confidence:a.confidence,preprocessedImage:r.image,previewImage:r.fullColorImage,previewImageWidth:r.width,previewImageHeight:r.height,isBlurry:r.isBlurry,rotationCorrected:r.rotationCorrected,preprocessingStrategy:r.strategy,words:i}}catch(r){throw console.error("OCR failed:",r),await e.terminate(),new Error("Failed to extract text from image")}}function c2(t){const e=t.split(`
`).map(p=>p.trim()).filter(Boolean),r={},n=[/\((\d+(?:\.\d+)?)\s*(?:mg|mcg|g|ml|units?)\)/i,/(\d+(?:\.\d+)?)\s*(?:mg|mcg|g|ml|units?)\b/i];let a=null;for(const p of n){const y=t.match(p);if(y){a=y;const w=y[1]||y[0].match(/\d+(?:\.\d+)?/)?.[0],j=y[0].match(/mg|mcg|g|ml|units?/i)?.[0];r.dosage=`${w} ${j}`;break}}const i=[/take\s+\d+\s+tablet/i,/\b(once|twice|three times?)\s+(?:daily|per day|a day|in the morning|in the evening)/i,/\b(QD|BID|TID|QID|Q\d+H)\b/i,/(?:in the|every)\s+(morning|evening|afternoon|night)/i];for(const p of i){const y=t.match(p);if(y){r.frequency=y[0].trim();break}}const o=[/by\s+(mouth|injection|inhalation)/i,/\b(oral|topical|injection|IV|IM|sublingual|transdermal|inhalation|ophthalmic|otic)\b/i];for(const p of o){const y=t.match(p);if(y){r.route=y[1]||y[0].trim();break}}const l=[/(?:Dr\.|Doctor)\s+([A-Z]\.\s*)?([A-Z][a-z]+\s+[A-Z][a-z]+)/i,/([A-Z][a-z]+\s+[A-Z]\s+[A-Z][a-z]+)\s+(?:MD|RPh|NU|par F)/i];for(const p of l){const y=t.match(p);if(y){r.prescriber=y[0].trim();break}}const c=t.match(/(?:qty|quantity)\s*:?\s*(\d+)/i);c&&(r.quantity=c[1]);const u=t.match(/(?:refills?|no refills)\s*:?\s*(\d+|remaining)/i);u&&(r.refills=u[1]);const h=t.match(/take\s+\d+\s+tablet[^.]*\./i);h&&(r.instructions=h[0].trim());const m=/\b([a-z]+[A-Z][A-Za-z]+)\b/,x=t.match(m);if(x&&x[1]){const p=x[1].trim(),y=p.toLowerCase(),w=r.frequency&&r.frequency.toLowerCase().includes(y),j=r.route&&r.route.toLowerCase().includes(y),C=r.instructions&&r.instructions.toLowerCase().includes(y),S=r.quantity&&y.includes(r.quantity.toLowerCase());!w&&!j&&!C&&!S&&(r.name=p)}if(!r.name&&a&&a.index!==void 0){const p=t.substring(0,a.index).trim(),y=/([A-Z][A-Za-z]+(?:\s+[A-Z]?[A-Za-z]+){0,2})\s*$/i,w=p.match(y);if(w&&w[1]){const j=w[1].trim(),C=j.toLowerCase(),S=r.frequency&&r.frequency.toLowerCase().includes(C),k=r.route&&r.route.toLowerCase().includes(C),P=r.instructions&&r.instructions.toLowerCase().includes(C),O=r.quantity&&C.includes(r.quantity.toLowerCase());!S&&!k&&!P&&!O&&(r.name=j)}}if(!r.name){const p=[/pharmacy/i,/hospital/i,/research/i,/children/i,/jude/i,/\d{3}[-\s]?\d{3}[-\s]?\d{4}/,/^\d+\s+[A-Z][a-z]+\s+(Place|Street|Road|Ave|Dr)/i,/Rx\s*[:#]?\s*\d+/i,/written/i,/filled/i,/test/i,/patient/i,/discard/i,/commonly\s+known/i,/no\s+refills/i,/^take\s+\d+/i,/^by\s+mouth/i,/MRN/i,/mersin/i,/TET/i],y=e.find(w=>{if(!/[A-Za-z]{3,}/.test(w)||w.length<3||w.length>40)return!1;for(const C of p)if(C.test(w))return!1;return(w.match(/[A-Za-z]/g)||[]).length/w.length>.6});y&&(r.name=y.replace(/^\W+|\W+$/g,"").trim())}if(!r.name){const p=t.match(/commonly\s+known\s+as\s+([A-Za-z]+)/i);p&&(r.name=p[1])}return r}function wY(t){const e=(t.match(/Rx\s*[:#]?\s*\d{5,}/gi)||[]).length>1,r=/^[\*]\s/m.test(t),n=/^\d+\.\s+[A-Z]/m.test(t);if(!e&&!r&&!n){const o=c2(t);return o.name||o.dosage||o.frequency?[o]:[]}const a=[];return t.split(/(?:\n\s*\n\s*\n|\d+\.\s+[A-Z])/).forEach(o=>{const l=o.trim();if(l.length>20){const c=c2(l);c.name&&(c.dosage||c.frequency||c.route)&&a.push(c)}}),a.length>0?a:[c2(t)]}function bY(t){let e=0,r=0;return t.name&&(e+=30,r+=30),t.dosage&&(e+=25,r+=25),t.frequency&&(e+=20,r+=20),t.route&&(e+=10,r+=10),t.quantity&&(e+=10,r+=10),t.instructions&&(e+=5,r+=5),r>0?Math.round(e/r*100):0}async function NY(t){const e=t.replace(/\D/g,"");if(e.length<8)return console.log(" UPC too short:",e),null;const r=[e,e.slice(1),e.padStart(13,"0"),e.padStart(14,"0")];console.log(" Trying UPC lookup with variants:",r);for(const n of r)try{const a=`https://world.openfoodfacts.org/api/v2/product/${n}.json`;console.log(" Trying OpenFoodFacts:",a);const i=await fetch(a);if(console.log(" OpenFoodFacts response status:",i.status),i.ok){const o=await i.json();if(console.log(" OpenFoodFacts data:",o),o&&o.product&&o.status===1){const l=o.product;return console.log(" Product found in OpenFoodFacts:",l.product_name),{upc:n,title:l.product_name||l.generic_name||void 0,brand:(l.brands||"").split(",")[0]?.trim()||void 0,categories:(l.categories_tags||[]).map(c=>c.replace("en:","")),imageUrl:l.image_front_small_url||l.image_small_url||void 0}}}}catch(a){console.warn(" OpenFoodFacts lookup failed for variant:",n,a)}for(const n of r)try{const a=`https://api.upcitemdb.com/prod/trial/lookup?upc=${n}`;console.log(" Trying UPCItemDB:",a);const i=await fetch(a);if(console.log(" UPCItemDB response status:",i.status),i.ok){const o=await i.json();if(console.log(" UPCItemDB data:",o),o&&o.items&&o.items.length>0){const l=o.items[0];return console.log(" Product found in UPCItemDB:",l.title),{upc:n,title:l.title||l.description,brand:l.brand,categories:l.category?[l.category]:[],imageUrl:l.images?.[0]}}}}catch(a){console.warn(" UPCItemDB lookup failed for variant:",n,a)}return console.log(" No product found in any UPC database"),null}function jY(t,e,r){new Date().toISOString()}const _Y=(t,e)=>jY();function Fb({onMedicationsScanned:t,onCancel:e}){const[r,n]=N.useState(null),[a,i]=N.useState(""),[o,l]=N.useState(""),[c,u]=N.useState(null),[h,m]=N.useState(!1),[x,p]=N.useState(""),y=N.useRef(null),w=($,R)=>{_Y()},j=async $=>{const R=$.target.files?.[0];if(!R){w();return}w(`File selected: ${R.name}, type: ${R.type}, size: ${R.size} bytes`),p(""),i(""),u(null);const B=new FileReader;B.onload=async U=>{const K=U.target?.result;w(),n(K),await C(K)},B.onerror=U=>{w(),p("Failed to read image file")},B.readAsDataURL(R)},C=async $=>{m(!0),p("");try{w("Creating Image element...");const R=new Image;R.src=$,await new Promise(J=>{R.onload=J}),w(`Image loaded successfully: ${R.width}x${R.height} pixels`);const B=document.createElement("canvas"),U=B.getContext("2d");if(!U)throw new Error("Could not get canvas context");const K=1500;let M=R.width,q=R.height;(M>K||q>K)&&(M>q?(q=q/M*K,M=K):(M=M/q*K,q=K),w(`Scaling image down to: ${Math.round(M)}x${Math.round(q)}`)),B.width=M,B.height=q,U.drawImage(R,0,0,M,q);const re=B.toDataURL("image/jpeg",.95),ee=new Image;ee.src=re,await new Promise(J=>{ee.onload=J}),w("Image preprocessed, attempting barcode detection...");const H=new Map;H.set(ss.TRY_HARDER,!0),H.set(ss.POSSIBLE_FORMATS,[Zt.UPC_A,Zt.UPC_E,Zt.EAN_13,Zt.EAN_8,Zt.CODE_128,Zt.CODE_39]);const se=[];se.push({angle:0,img:ee});const ue=[90,180,270];for(const J of ue){const oe=document.createElement("canvas"),Y=oe.getContext("2d");if(!Y)continue;J===90||J===270?(oe.width=ee.height,oe.height=ee.width):(oe.width=ee.width,oe.height=ee.height),Y.translate(oe.width/2,oe.height/2),Y.rotate(J*Math.PI/180),Y.drawImage(ee,-ee.width/2,-ee.height/2);const L=oe.toDataURL("image/jpeg",.95),z=new Image;z.src=L,await new Promise(V=>{z.onload=V}),se.push({angle:J,img:z})}const G=[{name:"MultiFormat",make:()=>new bK(H)},{name:"UPC/EAN",make:()=>new pG}];for(const{name:J,make:oe}of G)for(const{angle:Y,img:L}of se)try{w(`Trying ${J} reader at ${Y} ...`);const z=oe();z.hints===void 0&&J==="MultiFormat"&&(z.hints=H);const V=await z.decodeFromImageElement(L),W=V.getText(),Q=V.getBarcodeFormat();w(` BARCODE DETECTED with ${J} at ${Y}!`),w(`Format: ${Zt[Q]}`),w(`Raw data: "${W}"`),w(`Length: ${W.length} characters`),i(W),l(Zt[Q]||String(Q)),w("Beginning medication/product lookup flow...");const T=await k(W),ie=[Zt.UPC_A,Zt.UPC_E,Zt.EAN_13,Zt.EAN_8].includes(Q);if(T){w(` FDA medication found: ${T.brand_name||T.generic_name}`),m(!1);return}else if(ie){w("NDC lookup failed. Detected retail barcode format (UPC/EAN), attempting product lookup...");const ge=await NY(W);if(ge){w(` UPC/EAN product found: ${ge.title||ge.brand||"Unnamed"}`);const we={name:ge.title||ge.brand||`Product ${W}`,dosage:"See package",frequency:"As directed",route:"Oral"};p(""),w("Passing scanned product to parent component..."),t([we]),m(!1);return}else w(" UPC/EAN product lookup returned no data."),p("Product found but not in medication database. You can continue with manual entry.")}else w(" No FDA medication found and barcode is not retail format (UPC/EAN)."),p("Medication not found in FDA database. This may be a non-NDC barcode.");m(!1);return}catch(z){w(` ${J} at ${Y} failed: ${z.message||z}`);continue}throw new Error("All barcode readers failed to detect the code")}catch(R){w(),w(`Error: ${R.message||R}`),w(),console.error("Full error:",R),p("No barcode detected in image. Please try another image with a clear barcode.")}finally{m(!1)}},S=$=>{const R=$.replace(/\D/g,"");w(),w(),w(`Digits only: "${R}" (${R.length} digits)`);const B=[];if($.includes("-")){const M=$.split("-");M.length>=2&&B.push(`${M[0]}-${M[1]}`)}if(R.length===12){const M=R.slice(1,12),q=R.slice(1,11);w(),B.push(`${M.slice(0,4)}-${M.slice(4,8)}`),B.push(`${M.slice(0,5)}-${M.slice(5,8)}`),B.push(`${M.slice(0,5)}-${M.slice(5,9)}`),B.push(`${q.slice(0,4)}-${q.slice(4,8)}`),B.push(`${q.slice(0,5)}-${q.slice(5,8)}`),B.push(`${q.slice(0,5)}-${q.slice(5,9)}`),B.push(`0${q.slice(0,4)}-${q.slice(4,8)}`),B.push(`0${q.slice(0,3)}-${q.slice(3,7)}`)}if(R.length===11){w(),B.push(`${R.slice(0,4)}-${R.slice(4,8)}`),B.push(`${R.slice(0,5)}-${R.slice(5,8)}`),B.push(`${R.slice(0,5)}-${R.slice(5,9)}`);const M=R.slice(0,10);B.push(`${M.slice(0,4)}-${M.slice(4,8)}`),B.push(`${M.slice(0,5)}-${M.slice(5,8)}`)}if(R.length===10){const M="0"+R;w(),B.push(`${M.slice(0,4)}-${M.slice(4,8)}`),B.push(`${M.slice(0,5)}-${M.slice(5,8)}`),B.push(`${M.slice(0,5)}-${M.slice(5,9)}`),B.push(`${R.slice(0,4)}-${R.slice(4,8)}`),B.push(`${R.slice(0,5)}-${R.slice(5,8)}`)}R.length===8&&B.push(`${R.slice(0,4)}-${R.slice(4,8)}`),R.length===9&&B.push(`${R.slice(0,5)}-${R.slice(5,9)}`);const U=R.replace(/^0+/,"");U.length>=8&&(B.push(`${U.slice(0,4)}-${U.slice(4,8)}`),B.push(`${U.slice(0,5)}-${U.slice(5,8)}`));const K=[...new Set(B)];return w(),K},k=async $=>{const R=S($);w(`Starting FDA API lookup with ${R.length} format(s)...`);for(let B=0;B<R.length;B++){const U=R[B];try{w(`[${B+1}/${R.length}] Trying: ${U}`);const K=`https://api.fda.gov/drug/ndc.json?search=product_ndc:"${U}"&limit=1`;w(`API URL: ${K}`);const M=await fetch(K);if(w(`Response status: ${M.status} ${M.statusText}`),M.ok){const q=await M.json();if(w(`Response data: ${JSON.stringify(q).substring(0,200)}...`),q.results&&q.results.length>0)return w(` SUCCESS! Found medication: ${q.results[0].brand_name||q.results[0].generic_name}`),u(q.results[0]),q.results[0];w(" No results in response")}else{const q=await M.text();w(` API error: ${q.substring(0,100)}`)}}catch(K){w(` Request failed: ${K.message}`);continue}}return w(),p("Medication not found in FDA database. This may not be an NDC barcode or the medication is not registered."),null},P=()=>{if(!c)return;const $={name:c.brand_name||c.generic_name||"Unknown",dosage:c.active_ingredients?.[0]?.strength||"See package",frequency:"As directed",route:c.route?.[0]||"Oral",image:r||void 0};t([$])},O=()=>{n(null),i(""),u(null),p(""),m(!1)};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50",onClick:e}),s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col overflow-hidden",children:[s.jsxs("div",{className:"bg-gradient-to-r from-emerald-600 to-emerald-700 p-6 relative",children:[s.jsx("button",{onClick:e,className:"absolute top-4 left-4 w-10 h-10 rounded-xl bg-white hover:bg-white/90 flex items-center justify-center transition-colors shadow-sm","aria-label":"Close",children:s.jsx(ps,{className:"w-5 h-5 text-emerald-700"})}),s.jsxs("div",{className:"text-center pt-8",children:[s.jsx("div",{className:"w-16 h-16 rounded-2xl bg-white/20 flex items-center justify-center mx-auto mb-3",children:s.jsx(Ls,{className:"w-8 h-8 text-white"})}),s.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Scan Medication Barcode"}),s.jsx("p",{className:"text-sm text-emerald-50",children:"Take a photo or upload an image of the medication barcode"})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:s.jsxs("div",{className:"space-y-6",children:[!r&&s.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6",children:[s.jsx("input",{ref:y,type:"file",accept:"image/*",capture:"environment",onChange:j,className:"hidden"}),s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsxs(de,{onClick:()=>y.current?.click(),className:"h-14 rounded-xl bg-emerald-600 hover:bg-emerald-700 text-white font-medium",children:[s.jsx(Ls,{className:"w-5 h-5 mr-2"}),"Take Photo"]}),s.jsxs(de,{onClick:()=>{const $=y.current;$&&($.removeAttribute("capture"),$.click())},variant:"outline",className:"h-14 rounded-xl border-2 border-slate-300 hover:bg-slate-50 font-medium",children:[s.jsx(Ei,{className:"w-5 h-5 mr-2"}),"Upload from Gallery"]})]})]}),r&&s.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Scanned Image"}),s.jsx("button",{onClick:O,className:"w-8 h-8 rounded-lg hover:bg-slate-100 flex items-center justify-center transition-colors",children:s.jsx(ps,{className:"w-5 h-5 text-slate-600"})})]}),s.jsx("img",{src:r,alt:"Medication barcode",className:"w-full max-h-96 object-contain rounded-xl bg-slate-50 border border-slate-200"})]}),h&&s.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm p-12 text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-emerald-200 border-t-emerald-600 mx-auto mb-4"}),s.jsx("p",{className:"text-slate-600 font-medium",children:"Scanning barcode..."}),s.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"This may take a few seconds"})]}),x&&!h&&s.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-2xl p-6",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-red-100 flex items-center justify-center flex-shrink-0",children:s.jsx(Kn,{className:"w-5 h-5 text-red-600"})}),s.jsxs("div",{className:"flex-1 space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-red-900 font-semibold mb-1",children:"Medication Not Found"}),s.jsx("p",{className:"text-red-700 text-sm leading-relaxed",children:x})]}),a&&s.jsxs("div",{className:"bg-white p-3 rounded-lg border border-red-200",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wide",children:"Detected Barcode"}),s.jsx("p",{className:"mt-1 font-mono text-sm text-slate-900",children:a})]}),o&&s.jsx("span",{className:"text-xs px-2 py-1 rounded-md bg-slate-100 border border-slate-200 text-slate-600 font-medium",children:o})]}),s.jsxs("p",{className:"mt-2 text-xs text-slate-500",children:["The format ",o||"Unknown"," may be a retail UPC and not an FDA NDC."]})]}),s.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 space-y-2",children:[s.jsx("p",{className:"text-amber-800 text-sm font-medium",children:"Searching multiple databases:"}),s.jsxs("ul",{className:"text-amber-700 text-xs space-y-1 list-disc pl-4",children:[s.jsx("li",{children:"Checking OpenFoodFacts database..."}),s.jsx("li",{children:"Checking UPCItemDB for retail products..."}),s.jsx("li",{children:"Checking Barcode Spider database..."}),s.jsx("li",{children:"Trying multiple barcode format variations..."})]}),s.jsx("p",{className:"text-amber-700 text-xs mt-2",children:"If not found after extensive search, try scanning a different barcode on the package or use OCR scan instead."})]}),s.jsx("div",{className:"flex flex-wrap gap-3",children:s.jsx(de,{onClick:O,className:"h-10 rounded-lg bg-emerald-600 hover:bg-emerald-700 text-white flex-1",children:"Try Another Image"})})]})]})}),a&&!h&&!c&&!x&&s.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-2xl p-6",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-100 flex items-center justify-center flex-shrink-0",children:s.jsx(kl,{className:"w-5 h-5 text-blue-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-blue-900 font-semibold mb-1",children:"Barcode Detected"}),s.jsx("p",{className:"text-blue-700 font-mono text-sm bg-white px-3 py-2 rounded-lg border border-blue-200 mt-2",children:a}),s.jsx("p",{className:"text-blue-600 text-sm mt-2",children:"Looking up medication information..."})]})]})}),c&&s.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[s.jsx("div",{className:"bg-emerald-50 border-b border-emerald-200 p-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-emerald-600 flex items-center justify-center flex-shrink-0",children:s.jsx(kl,{className:"w-6 h-6 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-emerald-900",children:"Medication Found!"}),s.jsx("p",{className:"text-sm text-emerald-700",children:"Review the information below"})]})]})}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wide",children:"Barcode (NDC)"}),s.jsx("p",{className:"mt-1 text-slate-900 font-mono text-sm bg-slate-50 px-3 py-2 rounded-lg",children:a})]}),c.brand_name&&s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wide",children:"Brand Name"}),s.jsx("p",{className:"mt-1 text-lg text-slate-900 font-semibold",children:c.brand_name})]}),c.generic_name&&s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wide",children:"Generic Name"}),s.jsx("p",{className:"mt-1 text-slate-900",children:c.generic_name})]}),c.dosage_form&&s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wide",children:"Dosage Form"}),s.jsx("p",{className:"mt-1 text-slate-900",children:c.dosage_form})]}),c.route&&c.route.length>0&&s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wide",children:"Route"}),s.jsx("p",{className:"mt-1 text-slate-900",children:c.route[0]})]}),c.active_ingredients&&c.active_ingredients.length>0&&s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wide mb-2 block",children:"Active Ingredients"}),s.jsx("div",{className:"space-y-2",children:c.active_ingredients.map(($,R)=>s.jsxs("div",{className:"flex items-center gap-2 text-slate-900 bg-slate-50 px-3 py-2 rounded-lg",children:[s.jsx("span",{className:"text-emerald-600",children:""}),s.jsx("span",{className:"font-medium",children:$.name}),s.jsx("span",{className:"text-slate-500",children:""}),s.jsx("span",{className:"text-slate-700",children:$.strength})]},R))})]}),s.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:s.jsxs("p",{className:"text-xs text-amber-800",children:[s.jsx("strong",{className:"font-semibold",children:"Note:"})," This information is retrieved from the FDA database for reference. Please verify all details and complete dosage and frequency information."]})})]}),s.jsxs("div",{className:"border-t border-slate-200 p-6 flex flex-col sm:flex-row gap-3",children:[s.jsx(de,{onClick:O,variant:"outline",className:"flex-1 h-12 rounded-xl border-2 border-slate-300 hover:bg-slate-50 font-medium",children:"Scan Another"}),s.jsx(de,{onClick:P,className:"flex-1 h-12 rounded-xl bg-emerald-600 hover:bg-emerald-700 text-white font-medium",children:"Add This Medication"})]})]}),!r&&s.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6",children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-700 uppercase tracking-wide mb-4",children:"Tips for Best Results"}),s.jsxs("ul",{className:"space-y-3 text-sm text-slate-600",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-emerald-600 mt-0.5",children:""}),s.jsx("span",{children:"Ensure the barcode is clearly visible and in focus"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-emerald-600 mt-0.5",children:""}),s.jsx("span",{children:"Use good lighting to avoid shadows on the barcode"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-emerald-600 mt-0.5",children:""}),s.jsx("span",{children:"Hold the camera steady and close enough to read the barcode"})]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-emerald-600 mt-0.5",children:""}),s.jsx("span",{children:"Works with NDC (National Drug Code) barcodes on medication bottles"})]})]})]})]})})]})})]})}const CY=vw("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function SY({className:t,variant:e,...r}){return s.jsx("div",{"data-slot":"alert",role:"alert",className:xr(CY({variant:e}),t),...r})}function AY({className:t,...e}){return s.jsx("div",{"data-slot":"alert-description",className:xr("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...e})}var X1="Switch",[EY]=_o(X1),[kY,PY]=EY(X1),AE=N.forwardRef((t,e)=>{const{__scopeSwitch:r,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:u,form:h,...m}=t,[x,p]=N.useState(null),y=Wr(e,k=>p(k)),w=N.useRef(!1),j=x?h||!!x.closest("form"):!0,[C,S]=dc({prop:a,defaultProp:i??!1,onChange:u,caller:X1});return s.jsxs(kY,{scope:r,checked:C,disabled:l,children:[s.jsx(Pr.button,{type:"button",role:"switch","aria-checked":C,"aria-required":o,"data-state":TE(C),"data-disabled":l?"":void 0,disabled:l,value:c,...m,ref:y,onClick:Pt(t.onClick,k=>{S(P=>!P),j&&(w.current=k.isPropagationStopped(),w.current||k.stopPropagation())})}),j&&s.jsx(PE,{control:x,bubbles:!w.current,name:n,value:c,checked:C,required:o,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});AE.displayName=X1;var EE="SwitchThumb",kE=N.forwardRef((t,e)=>{const{__scopeSwitch:r,...n}=t,a=PY(EE,r);return s.jsx(Pr.span,{"data-state":TE(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:e})});kE.displayName=EE;var TY="SwitchBubbleInput",PE=N.forwardRef(({__scopeSwitch:t,control:e,checked:r,bubbles:n=!0,...a},i)=>{const o=N.useRef(null),l=Wr(o,i),c=bw(r),u=Nw(e);return N.useEffect(()=>{const h=o.current;if(!h)return;const m=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(m,"checked").set;if(c!==r&&p){const y=new Event("click",{bubbles:n});p.call(h,r),h.dispatchEvent(y)}},[c,r,n]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:l,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});PE.displayName=TY;function TE(t){return t?"checked":"unchecked"}var IY=AE,DY=kE;function Si({className:t,...e}){return s.jsx(IY,{"data-slot":"switch",className:xr("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-switch-background focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:s.jsx(DY,{"data-slot":"switch-thumb",className:xr("bg-card dark:data-[state=unchecked]:bg-card-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function OY(){const[t,e]=N.useState(!1),[r,n]=N.useState(null),[a,i]=N.useState(null),[o,l]=N.useState([]),c=N.useCallback(async m=>{if(!m){n("No file provided");return}if(!m.type.startsWith("image/")){n("Please provide a valid image file");return}e(!0),n(null),i(null),l([]);try{const x=await yY(m);i(x),console.log(" Raw OCR text:",x.text);const p=wY(x.text);console.log(` Parsed ${p.length} medication(s)`);const y=p.map(w=>({...w,confidence:bY(w)}));l(y),y.forEach((w,j)=>{console.log(`  Medication ${j+1}:`,{name:w.name,dosage:w.dosage,frequency:w.frequency,route:w.route,confidence:w.confidence})})}catch(x){const p=x instanceof Error?x.message:"Failed to process image";n(p),console.error("OCR Error:",x)}finally{e(!1)}},[]),u=N.useCallback(async()=>{try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){n("Camera not supported in this browser");return}const m=document.createElement("input");m.type="file",m.accept="image/*",m.capture="environment",m.onchange=async x=>{const y=x.target.files?.[0];y&&await c(y)},m.click()}catch(m){const x=m instanceof Error?m.message:"Failed to access camera";n(x),console.error("Camera Error:",m)}},[c]),h=N.useCallback(()=>{e(!1),n(null),i(null),l([])},[]);return{isProcessing:t,error:r,ocrResult:a,medications:o,scanImage:c,scanFromCamera:u,reset:h}}function Mb({onMedicationsScanned:t,onCancel:e,modal:r=!1}){const{isProcessing:n,error:a,medications:i,ocrResult:o,scanImage:l,scanFromCamera:c,reset:u}=OY(),[h,m]=N.useState(null),[x,p]=N.useState(!0),[y,w]=N.useState([]),[j,C]=N.useState([]),S=N.useRef(null);N.useEffect(()=>{o?.previewImage&&m(o.previewImage)},[o]),N.useEffect(()=>{if(i.length>0&&o?.words){const K=i[0],M=[],q=[];[{field:"Medication Name",text:K.name,color:"#0966CC"},{field:"Dosage",text:K.dosage,color:"#10B981"},{field:"Frequency",text:K.frequency,color:"#F59E0B"},{field:"Route",text:K.route,color:"#8B5CF6"},{field:"Quantity",text:K.quantity?.toString(),color:"#EC4899"},{field:"Instructions",text:K.instructions,color:"#F97316"},{field:"Prescriber",text:K.prescriber,color:"#06B6D4"}].forEach(({field:ee,text:H,color:se})=>{if(H){M.push({searchText:H,color:se,field:ee});const ue=H.toLowerCase().replace(/[^a-z0-9]/g,"");o.words?.forEach(G=>{const J=G.text.toLowerCase().replace(/[^a-z0-9]/g,"");J&&ue.includes(J)&&q.push({bbox:G.bbox,color:se})})}}),w(M),C(q)}},[i,o]);const k=async K=>{const M=K.target.files?.[0];M&&await l(M)},P=async()=>{await c()},O=()=>{S.current?.click()},$=()=>{if(i.length>0){const K=i.map(M=>({...M,image:h||void 0}));t(K)}},R=()=>{u(),m(null),w([]),C([]),S.current&&(S.current.value="")},B=r?"p-0":"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 p-6",U=s.jsx("div",{className:B,children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Medication OCR Scanner"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Scan medication labels to auto-fill information"})]}),s.jsx(de,{variant:"ghost",size:"icon",onClick:e,className:"text-slate-600 hover:text-slate-900",children:s.jsx(ps,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"space-y-6",children:[!h&&!n&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(er,{className:"p-8 cursor-pointer hover:shadow-lg hover:border-[#0966CC] transition-all group",onClick:P,children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-20 h-20 rounded-2xl bg-[#E0F2FE] flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform",children:s.jsx(Ls,{className:"w-10 h-10 text-[#0966CC]"})}),s.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Take Photo"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Use your camera to scan medication labels"})]})}),s.jsx(er,{className:"p-8 cursor-pointer hover:shadow-lg hover:border-[#10B981] transition-all group",onClick:O,children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-20 h-20 rounded-2xl bg-[#D1FAE5] flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform",children:s.jsx(Ei,{className:"w-10 h-10 text-[#10B981]"})}),s.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Upload Image"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Choose an existing photo from your device"})]})})]}),s.jsx("input",{ref:S,type:"file",accept:"image/*",onChange:k,className:"hidden"}),n&&s.jsx(er,{className:"p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Xd,{className:"w-12 h-12 text-[#0966CC] animate-spin mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Processing Image..."}),s.jsx("p",{className:"text-sm text-slate-600",children:"Extracting medication information using OCR"})]})}),a&&s.jsxs(SY,{variant:"destructive",children:[s.jsx(Kn,{className:"w-4 h-4"}),s.jsx(AY,{children:a})]}),h&&!n&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs(er,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h3",{className:"text-sm font-semibold text-slate-900 flex items-center gap-2",children:[s.jsx(hr,{className:"w-4 h-4"}),"Scanned Image"]}),y.length>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Si,{id:"show-annotations",checked:x,onCheckedChange:p}),s.jsx(Fe,{htmlFor:"show-annotations",className:"text-xs text-slate-600 cursor-pointer flex items-center gap-1",children:x?s.jsxs(s.Fragment,{children:[s.jsx(hs,{className:"w-3 h-3"}),"Annotations"]}):s.jsxs(s.Fragment,{children:[s.jsx(o0,{className:"w-3 h-3"}),"Annotations"]})})]})]}),s.jsxs("div",{className:"relative w-full rounded-lg border border-slate-200 overflow-hidden bg-slate-50",children:[s.jsx("img",{src:h,alt:"Scanned medication",className:"w-full h-auto block"}),x&&j.length>0&&o?.previewImageWidth&&o?.previewImageHeight&&s.jsx("div",{className:"absolute top-0 left-0 w-full h-full",children:j.map((K,M)=>{const q=(K.bbox.x1-K.bbox.x0)/o.previewImageWidth*100,re=(K.bbox.y1-K.bbox.y0)/o.previewImageHeight*100,ee=K.bbox.x0/o.previewImageWidth*100,H=K.bbox.y0/o.previewImageHeight*100;return s.jsx("span",{className:"absolute border-2",style:{backgroundColor:K.color+"40",borderColor:K.color,left:`${ee}%`,top:`${H}%`,width:`${q}%`,height:`${re}%`}},M)})})]}),x&&y.length>0&&s.jsxs("div",{className:"mt-3 p-3 bg-slate-50 rounded-lg border border-slate-200",children:[s.jsx("p",{className:"text-xs font-medium text-slate-700 mb-2",children:"Color Legend:"}),s.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs",children:y.map((K,M)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-sm border",style:{backgroundColor:K.color,borderColor:K.color}}),s.jsx("span",{className:"text-slate-600",children:K.field})]},M))})]}),s.jsxs(de,{variant:"outline",size:"sm",onClick:R,className:"w-full mt-3",children:[s.jsx(ps,{className:"w-4 h-4 mr-2"}),"Scan Different Image"]})]}),s.jsxs(er,{className:"p-4",children:[s.jsxs("h3",{className:"text-sm font-semibold text-slate-900 mb-3 flex items-center gap-2",children:[s.jsx(Hs,{className:"w-4 h-4 text-[#10B981]"}),"Extracted Information"]}),i.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Kn,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),s.jsx("p",{className:"text-sm text-slate-600",children:"No medication information detected. Try a clearer image."})]}):s.jsxs("div",{className:"space-y-4",children:[i.map((K,M)=>s.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 space-y-2 border border-slate-200",children:[K.name&&s.jsxs("div",{children:[s.jsx("span",{className:"text-xs font-medium text-slate-500 block mb-1",children:"Medication Name"}),s.jsx("span",{className:"text-sm font-semibold text-slate-900",children:K.name})]}),K.dosage&&s.jsxs("div",{children:[s.jsx("span",{className:"text-xs font-medium text-slate-500 block mb-1",children:"Dosage"}),s.jsx("span",{className:"text-sm text-slate-900",children:K.dosage})]}),K.frequency&&s.jsxs("div",{children:[s.jsx("span",{className:"text-xs font-medium text-slate-500 block mb-1",children:"Frequency"}),s.jsx("span",{className:"text-sm text-slate-900",children:K.frequency})]}),K.route&&s.jsxs("div",{children:[s.jsx("span",{className:"text-xs font-medium text-slate-500 block mb-1",children:"Route"}),s.jsx("span",{className:"text-sm text-slate-900 capitalize",children:K.route})]}),K.quantity&&s.jsxs("div",{children:[s.jsx("span",{className:"text-xs font-medium text-slate-500 block mb-1",children:"Quantity"}),s.jsx("span",{className:"text-sm text-slate-900",children:K.quantity})]}),K.instructions&&s.jsxs("div",{children:[s.jsx("span",{className:"text-xs font-medium text-slate-500 block mb-1",children:"Instructions"}),s.jsx("span",{className:"text-sm text-slate-900",children:K.instructions})]}),K.confidence!==void 0&&s.jsx("div",{className:"pt-2 border-t border-slate-200",children:s.jsxs(gt,{className:K.confidence>=75?"bg-[#D1FAE5] text-[#10B981] border-[#10B981]":K.confidence>=50?"bg-[#FEF3C7] text-[#F59E0B] border-[#F59E0B]":"bg-[#FEE2E2] text-[#DC2626] border-[#DC2626]",children:[K.confidence,"% Confidence"]})})]},M)),s.jsxs(de,{onClick:$,className:"w-full bg-[#10B981] hover:bg-[#059669] text-white",children:[s.jsx(Hs,{className:"w-4 h-4 mr-2"}),"Use ",i.length," Medication",i.length!==1?"s":"",s.jsx(H2,{className:"w-4 h-4 ml-2"})]})]})]})]}),s.jsxs(er,{className:"p-6 bg-[#E0F2FE] border-[#0966CC]/30",children:[s.jsxs("h4",{className:"text-sm font-semibold text-[#0966CC] mb-2 flex items-center gap-2",children:[s.jsx(Kn,{className:"w-4 h-4"}),"Tips for Best Results"]}),s.jsxs("ul",{className:"text-xs text-slate-700 space-y-1 ml-6 list-disc",children:[s.jsx("li",{children:"Ensure the medication label is clearly visible and in focus"}),s.jsx("li",{children:"Use good lighting - avoid shadows and glare"}),s.jsx("li",{children:"Capture the entire label with medication name, dosage, and instructions"}),s.jsx("li",{children:"Hold the camera steady or use a flat surface"}),s.jsx("li",{children:"Review and edit extracted information before saving"})]})]})]})]})});return r?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50",onClick:e}),s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:s.jsx("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:s.jsx("div",{className:"p-6 overflow-y-auto",children:U})})})]}):U}const RY=t=>{const e=new Date,r=e.getTime()-t.getTime(),n=Math.floor(r/6e4),a=Math.floor(r/36e5),i=Math.floor(r/864e5);if(n<2)return"Just now";if(n<60)return`Edited ${n} min ago`;if(a<24)return`Edited today at ${t.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`;const o=new Date(e);return o.setDate(o.getDate()-1),t.toDateString()===o.toDateString()?"Edited yesterday":i<7?`Edited ${t.toLocaleDateString("en-US",{weekday:"long"})}`:`Edited ${t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`},LY=t=>{switch(t){case"active":return"Active";case"verified_ready":return"Verified Ready";case"pending_review":return"Pending Review";case"delivered_locked":return"Delivered (Locked)";case"needs_reverification":return"Needs Reverification";case"archived":return"Archived";default:return"Active"}},FY=t=>{switch(t){case"bottle_scan":return"Bottle Scan";case"pdf_import":return"PDF Import";case"image_upload":return"Manual Entry";case"empty_chart":return"Manual Entry";default:return"Manual Entry"}};function MY({navigation:t}){const{logout:e,user:r}=Ka(),[n,a]=N.useState([]),[i,o]=N.useState(!0),[l,c]=N.useState(null);N.useEffect(()=>{async function Ke(){o(!0),c(null);try{const Xe=r?.id;if(!Xe){c("Clinician ID not found"),o(!1);return}const cn=(await IA(Xe)||[]).map(dn=>({id:dn.id,name:`${dn.first_name} ${dn.last_name}`,dob:dn.date_of_birth,charts:(dn.charts||[]).map(Dn=>({id:Dn.id,status:LY(Dn.status),type:FY(Dn.source),medicationCount:Array.isArray(Dn.medications)?Dn.medications.length:0,verifiedMedicationCount:Dn.medications.filter(ea=>ea.verified).length,createdDate:Dn.created_at,createdBy:Dn.created_by,finalizedDate:Dn.finalized_at??void 0}))}));console.log("Mapped patient data:",cn),a(cn)}catch(Xe){c(Xe.message||"Failed to fetch patients")}finally{o(!1)}}Ke()},[r?.id]);const[u,h]=N.useState(!1),[m,x]=N.useState(!1),[p,y]=N.useState(""),[w,j]=N.useState([]),[C,S]=N.useState(!1),[k,P]=N.useState(!1),[O,$]=N.useState(!1),[R,B]=N.useState(!1),[U,K]=N.useState("dashboard"),[M,q]=N.useState(""),[re,ee]=N.useState("newest"),[H,se]=N.useState("all"),[ue,G]=N.useState(!1),[J,oe]=N.useState(!0),[Y,L]=N.useState(null),[z,V]=N.useState(null),[W,Q]=N.useState(!1),[T,ie]=N.useState(!1),[ge,we]=N.useState(new Date),[Se,Ue]=N.useState("synced"),[We,be]=N.useState(!1),[pe,at]=N.useState(!1),[tt,Be]=N.useState("anna.clinician@luminous.com"),[ye,st]=N.useState("(555) 123-4567"),[Ve,vt]=N.useState(""),[ct,Kt]=N.useState(""),[ot,Ct]=N.useState(""),[qt,Tt]=N.useState(!1),[Et,kt]=N.useState(!1),[St,gr]=N.useState(!1),[Rr,xt]=N.useState(""),[Ht,Me]=N.useState(!1),[bt,Wt]=N.useState(!1),[It,Cr]=N.useState(!1),[Gr,vr]=N.useState(!1),[At,yt]=N.useState(null),[Lr,Sr]=N.useState({length:!1,upperLower:!1,numberOrSymbol:!1}),Kr=Ke=>({length:Ke.length>=8,upperLower:/[a-z]/.test(Ke)&&/[A-Z]/.test(Ke),numberOrSymbol:/[0-9\W]/.test(Ke)});N.useEffect(()=>{if(!ct){yt(null),Sr({length:!1,upperLower:!1,numberOrSymbol:!1});return}const Ke=Qr(ct);yt(Ke),Sr(Kr(ct))},[ct]);const[Mr,jt]=N.useState([]),[Tr,Vn]=N.useState(null),[Fr,Yr]=N.useState("desc"),$r=n.length,yr=n.reduce((Ke,Xe)=>Ke+(Xe.charts?.filter(cr=>cr.status==="Needs Reverification").length||0),0),wn=n.reduce((Ke,Xe)=>Ke+(Xe.charts?.filter(cr=>cr.status==="Active").length||0),0),Ra=n.reduce((Ke,Xe)=>Ke+(Xe.charts?.filter(cr=>cr.status==="Verified Ready").length||0),0);N.useEffect(()=>{const Ke=()=>{oe(!0),Ue("synced"),Pe.success("Back online - Synced successfully",{duration:3e3})},Xe=()=>{oe(!1),Ue("offline")};return window.addEventListener("online",Ke),window.addEventListener("offline",Xe),()=>{window.removeEventListener("online",Ke),window.removeEventListener("offline",Xe)}},[]),N.useEffect(()=>{yr>0&&be(!0)},[yr]);const La=()=>{e(),t.navigate("Landing")},Ss=(Ke,Xe)=>{t.navigate("ChartDetail",{patientId:Ke,chartId:Xe})},ba=Ke=>{L(Ke.touches[0].clientY)},Xn=Ke=>{if(Y===null)return;Ke.changedTouches[0].clientY-Y>100&&window.scrollY===0&&Fs(),L(null)},Fs=()=>{G(!0),setTimeout(()=>{G(!1)},1e3)},In=Ke=>{P(!1),$(!1),y(Ke),Ke==="Barcode Scan"?h(!0):Ke==="Bottle OCR"?x(!0):Ke==="Import PDF"&&Pe.info("PDF/Image import coming soon")},Na=Ke=>{Mr.includes(Ke)?jt(Mr.filter(Xe=>Xe!==Ke)):jt([...Mr,Ke])},Ms=Ke=>{Tr===Ke?Yr(Fr==="asc"?"desc":"asc"):(Vn(Ke),Yr("desc"))},Fa=()=>{let Ke=[];if(n.forEach(Xe=>{Xe.charts?.forEach(cr=>{Ke.push({patient:Xe,chart:cr})})}),M&&(Ke=Ke.filter(Xe=>Xe.patient.name.toLowerCase().includes(M.toLowerCase()))),H!=="all"&&(Ke=Ke.filter(Xe=>Xe.chart.status===H)),Mr.length>0&&(Ke=Ke.filter(Xe=>Mr.includes(Xe.chart.status))),Tr==="created")Ke.sort((Xe,cr)=>{const cn=new Date(Xe.chart.createdDate).getTime(),dn=new Date(cr.chart.createdDate).getTime();return Fr==="asc"?cn-dn:dn-cn});else if(Tr==="status"){const Xe={"Needs Reverification":0,Active:1,"Verified Ready":2,"Pending Review":3,"Delivered (Locked)":4,Archived:5};Ke.sort((cr,cn)=>{const dn=Xe[cr.chart.status]||999,Dn=Xe[cn.chart.status]||999;return Fr==="asc"?dn-Dn:Dn-dn})}else Ke.sort((Xe,cr)=>{switch(re){case"newest":return new Date(cr.chart.createdDate).getTime()-new Date(Xe.chart.createdDate).getTime();case"oldest":return new Date(Xe.chart.createdDate).getTime()-new Date(cr.chart.createdDate).getTime();case"name-asc":return Xe.patient.name.localeCompare(cr.patient.name);case"name-desc":return cr.patient.name.localeCompare(Xe.patient.name);case"status":const cn={"Needs Reverification":0,Active:1,"Verified Ready":2,"Pending Review":3,"Delivered (Locked)":4,Archived:5};return(cn[Xe.chart.status]||999)-(cn[cr.chart.status]||999);default:return 0}});return Ke},Js=Fa(),Ya=Ke=>{switch(Ke){case"Needs Reverification":return s.jsx(Kn,{className:"w-3.5 h-3.5"});case"Active":return s.jsx(hr,{className:"w-3.5 h-3.5"});case"Verified Ready":return s.jsx(kr,{className:"w-3.5 h-3.5"});case"Delivered (Locked)":return s.jsx(fs,{className:"w-3.5 h-3.5"});case"Archived":return s.jsx(Wi,{className:"w-3.5 h-3.5"});default:return null}},fi=Ke=>{switch(Ke){case"Needs Reverification":return"bg-red-100 text-red-700 border-red-200";case"Active":return"bg-sky-100 text-sky-700 border-sky-200";case"Verified Ready":return"bg-emerald-100 text-emerald-700 border-emerald-200";case"Delivered (Locked)":return"bg-purple-100 text-purple-700 border-purple-200";case"Archived":return"bg-slate-100 text-slate-600 border-slate-200";default:return""}},ze=Ke=>{switch(Ke){case"Needs Reverification":return"Needs Review";case"Verified Ready":return"Verified";case"Delivered (Locked)":return"Locked";default:return Ke}},ft=Ke=>{switch(Ke){case"Needs Reverification":return"Chart awaiting review before medication verification";case"Active":return"Currently in progress";case"Verified Ready":return"All medications verified and ready for delivery";case"Delivered (Locked)":return"Chart has been finalized and locked";case"Archived":return"Chart has been archived";default:return Ke}},gn=()=>s.jsxs("nav",{className:"space-y-1",children:[s.jsxs("button",{onClick:()=>{K("dashboard"),B(!1)},className:`w-full flex items-center justify-between px-3 py-3 rounded-lg transition-colors ${U==="dashboard"?"bg-[#E0F2FE] text-[#0966CC]":"text-[#64748b] hover:bg-[#f8fafc]"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(lc,{className:"w-5 h-5"}),s.jsx("span",{children:"Dashboard"})]}),yr>0&&s.jsx(gt,{className:"bg-[#DC2626] text-white border-0 h-5 min-w-5 px-1.5 flex items-center justify-center",children:yr})]}),s.jsxs("button",{onClick:()=>{K("charts"),B(!1)},className:`w-full flex items-center gap-3 px-3 py-3 rounded-lg transition-colors ${U==="charts"?"bg-[#E0F2FE] text-[#0966CC]":"text-[#64748b] hover:bg-[#f8fafc]"}`,children:[s.jsx(hr,{className:"w-5 h-5"}),s.jsx("span",{children:"My Charts"})]}),s.jsxs("button",{onClick:()=>{K("profile"),B(!1)},className:`w-full flex items-center gap-3 px-3 py-3 rounded-lg transition-colors ${U==="profile"?"bg-[#E0F2FE] text-[#0966CC]":"text-[#64748b] hover:bg-[#f8fafc]"}`,children:[s.jsx(Bn,{className:"w-5 h-5"}),s.jsx("span",{children:"Profile"})]}),s.jsxs("button",{onClick:()=>{K("settings"),B(!1)},className:`w-full flex items-center gap-3 px-3 py-3 rounded-lg transition-colors ${U==="settings"?"bg-[#E0F2FE] text-[#0966CC]":"text-[#64748b] hover:bg-[#f8fafc]"}`,children:[s.jsx(au,{className:"w-5 h-5"}),s.jsx("span",{children:"Settings"})]})]}),Ee=()=>s.jsxs("div",{className:"space-y-6",onTouchStart:ba,onTouchEnd:Xn,children:[ue&&s.jsxs("div",{className:"flex items-center justify-center py-4",children:[s.jsx(Pl,{className:"w-5 h-5 text-[#0966CC] animate-spin"}),s.jsx("span",{className:"ml-2 text-sm text-[#64748b]",children:"Refreshing..."})]}),We&&yr>0&&s.jsx("div",{className:"bg-gradient-to-r from-[#FEF2F2] to-[#FEE2E2] rounded-2xl shadow-sm border border-[#FECACA] p-4",children:s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#DC2626]/10 flex items-center justify-center flex-shrink-0",children:s.jsx(Kn,{className:"w-5 h-5 text-[#DC2626]"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[15px] text-[#991B1B]",children:s.jsxs("span",{className:"font-semibold",children:[yr," chart",yr!==1?"s need":" needs"," review"]})}),s.jsx("p",{className:"text-sm text-[#DC2626]",children:"Patient medication list requires verification before continuing"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(de,{onClick:()=>{V("Needs Reverification"),se("Needs Reverification"),be(!1)},className:"bg-[#DC2626] hover:bg-[#B91C1C] text-white shadow-sm",children:"View Now"}),s.jsx("button",{onClick:()=>be(!1),className:"w-8 h-8 rounded-lg hover:bg-[#FEE2E2] flex items-center justify-center transition-colors","aria-label":"Dismiss banner",children:s.jsx(ps,{className:"w-4 h-4 text-[#DC2626]"})})]})]})}),s.jsxs("div",{className:"bg-gradient-to-r from-sky-50 to-sky-100 rounded-2xl border border-sky-200 px-5 md:px-6 py-4 shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(pO,{className:"w-4 h-4 text-sky-600"}),s.jsx("h3",{className:"text-sm font-semibold text-slate-700",children:"Quick Actions"})]}),s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsx("button",{onClick:()=>t.navigate("NewPatientChart"),className:"flex-1 min-w-[160px] bg-white hover:bg-sky-50 border border-sky-200 rounded-2xl px-4 py-3.5 transition-all text-left group shadow-sm hover:shadow-md hover:ring-1 hover:ring-sky-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-sky-100 flex items-center justify-center group-hover:scale-110 transition-transform",children:s.jsx(Da,{className:"w-5 h-5 text-sky-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-[15px] text-slate-900 mb-0.5",children:"New Chart"}),s.jsx("div",{className:"text-sm text-slate-600",children:"Create patient chart"})]}),s.jsx(Xr,{className:"w-4 h-4 text-slate-400 group-hover:text-sky-600 transition-colors"})]})}),s.jsx("button",{onClick:()=>P(!0),className:"flex-1 min-w-[160px] bg-white hover:bg-emerald-50 border border-emerald-200 rounded-2xl px-4 py-3.5 transition-all text-left group shadow-sm hover:shadow-md hover:ring-1 hover:ring-emerald-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald-100 flex items-center justify-center group-hover:scale-110 transition-transform",children:s.jsx(Ls,{className:"w-5 h-5 text-emerald-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-[15px] text-slate-900 mb-0.5",children:"Scan"}),s.jsx("div",{className:"text-sm text-slate-600",children:"Capture medications"})]}),s.jsx(Xr,{className:"w-4 h-4 text-slate-400 group-hover:text-emerald-600 transition-colors"})]})}),s.jsx("button",{onClick:()=>t.navigate("PatientChartList"),className:"flex-1 min-w-[160px] bg-white hover:bg-sky-50 border border-sky-200 rounded-2xl px-4 py-3.5 transition-all text-left group shadow-sm hover:shadow-md hover:ring-1 hover:ring-sky-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-sky-100 flex items-center justify-center group-hover:scale-110 transition-transform",children:s.jsx(xD,{className:"w-5 h-5 text-sky-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-[15px] text-slate-900 mb-0.5",children:"All Charts"}),s.jsx("div",{className:"text-sm text-slate-600",children:"View full list"})]}),s.jsx(Xr,{className:"w-4 h-4 text-slate-400 group-hover:text-sky-600 transition-colors"})]})})]})]}),s.jsx(Jd,{open:k,onOpenChange:P,children:s.jsxs(Qd,{side:"bottom",className:"h-auto rounded-t-3xl",children:[s.jsxs(eu,{children:[s.jsx(tu,{children:"Choose Scan Method"}),s.jsx(Df,{children:"Select how you want to capture medication information. The system will automatically detect if the patient exists."})]}),s.jsxs("div",{className:"mt-6 space-y-3 pb-6",children:[s.jsx("button",{onClick:()=>{P(!1),t.navigate("NewPatientChart")},className:"w-full bg-white rounded-xl border-2 border-slate-200 p-4 hover:border-sky-400 hover:shadow-md transition-all text-left group",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-14 h-14 rounded-xl bg-sky-100 flex items-center justify-center flex-shrink-0 group-hover:bg-sky-200 transition-colors",children:s.jsx(Da,{className:"w-6 h-6 text-sky-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-slate-900 font-medium mb-1",children:"Manual Entry"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Type patient and medication details manually"})]})]})}),s.jsx("button",{onClick:()=>In("Barcode Scan"),className:"w-full bg-white rounded-xl border-2 border-slate-200 p-4 hover:border-emerald-400 hover:shadow-md transition-all text-left group",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-14 h-14 rounded-xl bg-emerald-100 flex items-center justify-center flex-shrink-0 group-hover:bg-emerald-200 transition-colors",children:s.jsx(i6,{className:"w-6 h-6 text-emerald-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-slate-900 font-medium mb-1",children:"Scan Barcode"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Quick medication lookup via barcode"})]})]})}),s.jsx("button",{onClick:()=>In("Bottle OCR"),className:"w-full bg-white rounded-xl border-2 border-slate-200 p-4 hover:border-violet-400 hover:shadow-md transition-all text-left group",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-14 h-14 rounded-xl bg-violet-100 flex items-center justify-center flex-shrink-0 group-hover:bg-violet-200 transition-colors",children:s.jsx(Ls,{className:"w-6 h-6 text-violet-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-slate-900 font-medium mb-1",children:"Scan Bottle (OCR)"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Capture text from medication bottle labels"})]})]})}),s.jsx("button",{onClick:()=>In("Import PDF"),className:"w-full bg-white rounded-xl border-2 border-slate-200 p-4 hover:border-amber-400 hover:shadow-md transition-all text-left group",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-14 h-14 rounded-xl bg-amber-100 flex items-center justify-center flex-shrink-0 group-hover:bg-amber-200 transition-colors",children:s.jsx(Ei,{className:"w-6 h-6 text-amber-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-slate-900 font-medium mb-1",children:"Import PDF/Image"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Upload discharge summaries or med lists"})]})]})})]})]})}),s.jsx(Jd,{open:O,onOpenChange:$,children:s.jsxs(Qd,{side:"bottom",className:"h-auto rounded-t-3xl",children:[s.jsxs(eu,{children:[s.jsx(tu,{children:"Scan Medication Information"}),s.jsx(Df,{children:"Choose how you want to capture medication data"})]}),s.jsxs("div",{className:"mt-6 space-y-3 pb-6",children:[s.jsx("button",{onClick:()=>In("Barcode Scan"),className:"w-full bg-white rounded-xl border-2 border-slate-200 p-4 hover:border-emerald-400 hover:shadow-md transition-all text-left group",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-14 h-14 rounded-xl bg-emerald-100 flex items-center justify-center flex-shrink-0 group-hover:bg-emerald-200 transition-colors",children:s.jsx(Yx,{className:"w-6 h-6 text-emerald-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-slate-900 font-medium mb-1",children:"Scan Barcode"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Quick medication lookup via barcode"})]})]})}),s.jsx("button",{onClick:()=>In("Bottle OCR"),className:"w-full bg-white rounded-xl border-2 border-slate-200 p-4 hover:border-violet-400 hover:shadow-md transition-all text-left group",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-14 h-14 rounded-xl bg-violet-100 flex items-center justify-center flex-shrink-0 group-hover:bg-violet-200 transition-colors",children:s.jsx(Ls,{className:"w-6 h-6 text-violet-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-slate-900 font-medium mb-1",children:"Scan Bottle (OCR)"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Capture text from medication bottle labels"})]})]})}),s.jsx("button",{onClick:()=>In("Import PDF"),className:"w-full bg-white rounded-xl border-2 border-slate-200 p-4 hover:border-amber-400 hover:shadow-md transition-all text-left group",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-14 h-14 rounded-xl bg-amber-100 flex items-center justify-center flex-shrink-0 group-hover:bg-amber-200 transition-colors",children:s.jsx(Ei,{className:"w-6 h-6 text-amber-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-slate-900 font-medium mb-1",children:"Import PDF/Image"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Upload discharge summaries or med lists"})]})]})})]})]})}),u&&s.jsx(Fb,{onMedicationsScanned:Ke=>{const Xe=Ke.map(cr=>({name:cr.name,dosage:cr.dosage,frequency:cr.frequency,route:cr.route}));h(!1),j(Xe),S(!0)},onCancel:()=>h(!1)}),m&&s.jsx(Mb,{onMedicationsScanned:Ke=>{x(!1),j(Ke),S(!0)},onCancel:()=>x(!1),modal:!0}),C&&s.jsx(LH,{scannedMedications:w,scanType:p,patients:n.map(Ke=>({id:Ke.id,firstName:Ke.name.split(" ")[0]||Ke.name,lastName:Ke.name.split(" ").slice(1).join(" "),dateOfBirth:Ke.dob})),onSelectExistingPatient:Ke=>{const Xe=n.find(cr=>cr.id===Ke);S(!1),Xe&&t.navigate("ChartDetail",{patientId:Xe.id,chartId:Xe.charts[0]?.id,prefillMedications:w})},onCreateNewPatient:()=>{S(!1),t.navigate("NewPatientChart",{scannedMedications:w,scanType:p})},onCancel:()=>S(!1)}),s.jsx("div",{className:"flex items-center justify-end","aria-live":"polite",role:"status",children:s.jsx("div",{className:"flex items-center gap-2",children:Se==="synced"?s.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-[#D1FAE5] text-[#047857]",children:[s.jsx(Hs,{className:"w-3.5 h-3.5"}),s.jsx("span",{className:"text-sm font-medium",children:"Synced just now"})]}):Se==="syncing"?s.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-[#DBEAFE] text-[#0369A1]",children:[s.jsx(Xd,{className:"w-3.5 h-3.5 animate-spin"}),s.jsx("span",{className:"text-sm font-medium",children:"Syncing..."})]}):s.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-[#FEE2E2] text-[#991B1B]",children:[s.jsx(Tf,{className:"w-3.5 h-3.5"}),s.jsx("span",{className:"text-sm font-medium",children:"Offline  3 pending uploads"})]})})}),s.jsxs("div",{className:"mt-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(lc,{className:"w-4 h-4 text-sky-600"}),s.jsx("h3",{className:"text-sm font-semibold text-slate-700",children:"Overview"})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4",children:[s.jsx(hn,{children:s.jsxs(fn,{children:[s.jsx(mn,{asChild:!0,children:s.jsx(js.div,{initial:{scale:1},animate:yr>0?{scale:[1,1.03,1]}:{scale:1},transition:{duration:.3,ease:"easeInOut"},className:"w-full",children:s.jsx("button",{onClick:()=>{V("Needs Reverification"),se("Needs Reverification"),be(!1)},className:"bg-gradient-to-br from-[#FEE2E2] to-[#FECACA] rounded-2xl shadow-sm hover:shadow-lg transition-all p-5 text-left border-l-4 border-[#DC2626] hover:ring-2 hover:ring-[#DC2626]/30 w-full",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-11 h-11 rounded-xl bg-[#DC2626]/10 flex items-center justify-center",children:s.jsx(Kn,{className:"w-5 h-5 text-[#DC2626]"})}),s.jsxs("div",{children:[s.jsx(js.p,{initial:{opacity:.5},animate:{opacity:1},className:"text-2xl text-[#DC2626] font-semibold",children:yr},`count-${yr}`),s.jsx("p",{className:"text-xs font-semibold text-[#991B1B]",children:"Needs Review"})]})]})})},yr)}),s.jsx(pn,{side:"bottom",className:"max-w-xs",children:s.jsx("p",{children:"Patient charts requiring verification of medication list before continuing"})})]})}),s.jsx("button",{onClick:()=>{V("Active"),se("Active")},className:"bg-white rounded-2xl shadow-sm hover:shadow-md transition-all p-5 text-left hover:ring-1 hover:ring-sky-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-11 h-11 rounded-xl bg-[#DBEAFE] flex items-center justify-center",children:s.jsx(hr,{className:"w-5 h-5 text-[#0966CC]"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl text-[#0f172a] font-semibold",children:wn}),s.jsx("p",{className:"text-xs font-semibold text-[#64748b]",children:"Active"})]})]})}),s.jsx("button",{onClick:()=>{V("Verified Ready"),se("Verified Ready")},className:"bg-white rounded-2xl shadow-sm hover:shadow-md transition-all p-5 text-left hover:ring-1 hover:ring-emerald-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-11 h-11 rounded-xl bg-[#D1FAE5] flex items-center justify-center",children:s.jsx(kr,{className:"w-5 h-5 text-[#10B981]"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl text-[#0f172a] font-semibold",children:Ra}),s.jsx("p",{className:"text-xs font-semibold text-[#64748b]",children:"Ready"})]})]})}),s.jsx("div",{className:"bg-white rounded-2xl shadow-sm p-5",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-11 h-11 rounded-xl bg-[#E0F2FE] flex items-center justify-center",children:s.jsx(Rs,{className:"w-5 h-5 text-[#0966CC]"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl text-[#0f172a] font-semibold",children:$r}),s.jsx("p",{className:"text-xs font-semibold text-[#64748b]",children:"Patients"})]})]})})]})]}),z&&s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs(gt,{className:"bg-[#DC2626] text-white border-0 px-3 py-1.5 text-sm flex items-center gap-2",children:[s.jsx(Kn,{className:"w-3.5 h-3.5"}),s.jsxs("span",{children:["Showing: ",z]}),s.jsx("button",{onClick:()=>{V(null),se("all")},className:"ml-1 hover:bg-white/20 rounded-full p-0.5 transition-colors",children:s.jsx(ps,{className:"w-3.5 h-3.5"})})]})}),s.jsx("div",{className:"sticky top-0 z-30 bg-white/95 backdrop-blur-sm py-3 -mx-6 px-6 border-b border-slate-200 shadow-sm",children:s.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm p-4",children:[s.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Zi,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-[#94a3b8]"}),s.jsx(Ze,{id:"dashboard-search",placeholder:"Search by patient name...",value:M,onChange:Ke=>q(Ke.target.value),className:"pl-12 h-11 rounded-xl border border-[#e2e8f0] bg-white focus:bg-white"})]}),s.jsx("div",{className:"w-full md:w-48",children:s.jsxs(oa,{value:H,onValueChange:Ke=>se(Ke),children:[s.jsxs(ca,{className:"h-11 rounded-xl border border-[#e2e8f0] bg-white",children:[s.jsx(Hx,{className:"w-4 h-4 mr-2"}),s.jsx(la,{placeholder:"Filter Status"})]}),s.jsxs(da,{children:[s.jsx(Bt,{value:"all",children:"All Statuses"}),s.jsx(Bt,{value:"Needs Reverification",children:"Needs Reverification"}),s.jsx(Bt,{value:"Active",children:"Active"}),s.jsx(Bt,{value:"Verified Ready",children:"Verified Ready"}),s.jsx(Bt,{value:"Delivered (Locked)",children:"Delivered (Locked)"}),s.jsx(Bt,{value:"Archived",children:"Archived"})]})]})}),s.jsx("div",{className:"w-full md:w-48",children:s.jsxs(oa,{value:re,onValueChange:Ke=>ee(Ke),children:[s.jsxs(ca,{className:"h-11 rounded-xl border border-[#e2e8f0] bg-white",children:[s.jsx(W2,{className:"w-4 h-4 mr-2"}),s.jsx(la,{placeholder:"Sort By"})]}),s.jsxs(da,{children:[s.jsx(Bt,{value:"newest",children:"Newest First"}),s.jsx(Bt,{value:"oldest",children:"Oldest First"}),s.jsx(Bt,{value:"name-asc",children:"Name (A-Z)"}),s.jsx(Bt,{value:"name-desc",children:"Name (Z-A)"}),s.jsx(Bt,{value:"status",children:"Status"})]})]})})]}),(M||H!=="all")&&s.jsxs("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-[#f1f5f9]",children:[s.jsx("span",{className:"text-xs text-[#64748b]",children:"Active filters:"}),M&&s.jsxs(gt,{variant:"outline",className:"bg-[#f8fafc] text-xs",children:['Search: "',M,'"']}),H!=="all"&&s.jsxs(gt,{variant:"outline",className:"bg-[#f8fafc] text-xs",children:["Status: ",H]}),s.jsx("button",{onClick:()=>{q(""),se("all")},className:"ml-auto text-xs text-[#0966CC] hover:underline",children:"Clear all"})]})]})}),Js.filter(Ke=>Ke.chart.status==="Active").length>0&&s.jsxs("div",{className:"bg-gradient-to-br from-[#F0F9FF] to-white rounded-2xl shadow-sm hover:shadow-md p-5 border border-[#DBEAFE] transition-all hover:ring-1 hover:ring-sky-200",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(qN,{className:"w-4 h-4 text-[#0966CC]"}),s.jsx("h3",{className:"text-sm font-semibold text-slate-700",children:"Continue where you left off"})]}),(()=>{const Ke=Js.filter(mi=>mi.chart.status==="Active").sort((mi,Jn)=>new Date(Jn.chart.createdDate).getTime()-new Date(mi.chart.createdDate).getTime())[0];if(!Ke)return null;const Xe=Ke.chart.medicationCount,cr=Ke.chart.verifiedMedicationCount||0,cn=Xe>0?Math.min(cr/Xe*100,100):0,dn=new Date(Ke.chart.createdDate),Dn=RY(dn),ea=Ke.patient.name.split(" ").map(mi=>mi[0]).join("").toUpperCase();return s.jsx("button",{onClick:()=>{Ss(Ke.patient.id,Ke.chart.id)},className:"w-full",children:s.jsxs("div",{className:"flex flex-col md:flex-row items-start gap-4",children:[s.jsx(Xs,{className:"w-12 h-12 border-2 border-sky-200 flex-shrink-0",children:s.jsx(Zs,{className:"bg-gradient-to-br from-[#0966CC] to-[#0C4A6E] text-white",children:ea})}),s.jsxs("div",{className:"flex-1 text-left min-w-0",children:[s.jsx("p",{className:"text-[15px] font-medium text-[#0f172a] mb-1",children:Ke.patient.name}),s.jsxs("div",{className:"flex items-center gap-3 text-sm text-[#64748b] mb-2 flex-wrap",children:[s.jsx("span",{children:Ke.chart.type}),s.jsx("span",{children:""}),s.jsx("span",{children:Dn})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsxs("span",{className:"text-[#64748b]",children:[cr," of ",Xe," meds completed"]}),s.jsxs("span",{className:"font-medium text-[#0966CC]",children:[Math.round(cn),"%"]})]}),s.jsx(kA,{value:cn,className:"h-1.5"})]})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[s.jsxs("div",{className:"px-4 py-2 bg-[#0966CC] hover:bg-[#0C4A6E] text-white rounded-xl text-sm font-medium flex items-center gap-2 shadow-sm transition-colors",children:[s.jsx(qN,{className:"w-3.5 h-3.5"}),s.jsx("span",{children:"Resume"})]}),s.jsx(Xr,{className:"w-5 h-5 text-[#0966CC]"})]})]})})})()]}),s.jsxs("div",{className:"mt-8",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-5",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(hr,{className:"w-5 h-5 text-sky-600"}),s.jsxs("div",{children:[s.jsxs("h2",{className:"text-lg text-slate-900",children:["All Charts (",Js.length,")"]}),s.jsx("p",{className:"text-sm text-slate-600 mt-0.5",children:"Manage and review patient charts"})]})]}),s.jsx("div",{className:"flex items-center gap-2",children:Se==="synced"?s.jsxs("div",{className:"flex items-center gap-1.5 text-emerald-700 text-sm",children:[s.jsx(Hs,{className:"w-4 h-4"}),s.jsx("span",{children:"Synced"})]}):Se==="syncing"?s.jsxs("div",{className:"flex items-center gap-1.5 text-sky-700 text-sm",children:[s.jsx(Xd,{className:"w-4 h-4 animate-spin"}),s.jsx("span",{children:"Syncing..."})]}):s.jsxs("div",{className:"flex items-center gap-1.5 text-amber-700 text-sm",children:[s.jsx(Tf,{className:"w-4 h-4"}),s.jsx("span",{children:"Offline  3 pending uploads"})]})})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-6",children:[s.jsxs(de,{onClick:()=>t.navigate("NewPatientChart"),className:"bg-sky-600 hover:bg-sky-700 text-white shadow-sm",children:[s.jsx(Da,{className:"w-4 h-4 mr-2"}),"New Chart"]}),s.jsxs(de,{onClick:()=>$(!0),variant:"outline",className:"border-violet-200 text-violet-700 hover:bg-violet-50 shadow-sm",children:[s.jsx(Ls,{className:"w-4 h-4 mr-2"}),"Scan"]}),s.jsxs(de,{onClick:()=>In("Import PDF"),variant:"outline",className:"border-amber-200 text-amber-700 hover:bg-amber-50 shadow-sm",children:[s.jsx(xw,{className:"w-4 h-4 mr-2"}),"Import PDF"]})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-5",children:[s.jsx("span",{className:"text-sm text-slate-600 mr-1",children:"Quick filters:"}),["Active","Needs Reverification","Verified Ready","Archived"].map(Ke=>s.jsx("button",{onClick:()=>Na(Ke),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all border ${Mr.includes(Ke)?Ke==="Needs Reverification"?"bg-red-100 border-red-300 text-red-700":Ke==="Active"?"bg-sky-100 border-sky-300 text-sky-700":Ke==="Verified Ready"?"bg-emerald-100 border-emerald-300 text-emerald-700":"bg-slate-100 border-slate-300 text-slate-700":"bg-white border-slate-200 text-slate-600 hover:bg-slate-50"}`,children:Ke==="Needs Reverification"?"Needs Review":Ke},Ke)),Mr.length>0&&s.jsx("button",{onClick:()=>jt([]),className:"text-xs text-sky-600 hover:text-sky-700 font-medium ml-1",children:"Clear all"})]}),Js.length===0&&s.jsxs("div",{className:"bg-white rounded-3xl border border-dashed border-slate-200 p-12 text-center",children:[s.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center mx-auto mb-4",children:M||H!=="all"||Mr.length>0?s.jsx(Zi,{className:"w-8 h-8 text-slate-300"}):s.jsx(hr,{className:"w-8 h-8 text-slate-300"})}),s.jsx("h3",{className:"text-xl text-slate-900 mb-2",children:M||H!=="all"||Mr.length>0?"No charts match your filters":"No patient charts yet"}),s.jsx("p",{className:"text-sm text-slate-600 mb-6 max-w-md mx-auto leading-relaxed",children:M||H!=="all"||Mr.length>0?"Try adjusting status or date range":"Get started by creating your first patient chart."}),!(M||H!=="all"||Mr.length>0)&&s.jsxs(de,{onClick:()=>t.navigate("NewPatientChart"),className:"bg-sky-600 hover:bg-sky-700 text-white shadow-lg shadow-sky-600/20",children:[s.jsx(Da,{className:"w-4 h-4 mr-2"}),"Create new chart"]})]}),W&&s.jsx("div",{className:"space-y-3",children:[1,2,3].map(Ke=>s.jsx("div",{className:"bg-white rounded-2xl shadow-sm p-5 animate-pulse",children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex-1 space-y-3",children:[s.jsx("div",{className:"h-5 bg-[#f1f5f9] rounded w-1/3"}),s.jsx("div",{className:"h-4 bg-[#f1f5f9] rounded w-1/4"}),s.jsx("div",{className:"h-3 bg-[#f1f5f9] rounded w-2/3"})]}),s.jsx("div",{className:"h-10 w-10 bg-[#f1f5f9] rounded-lg"})]})},Ke))}),T&&!W&&s.jsxs("div",{className:"bg-white rounded-3xl border border-dashed border-[#FEE2E2] p-12 text-center",children:[s.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-[#FEE2E2] to-[#FECACA] flex items-center justify-center mx-auto mb-4",children:s.jsx(Kn,{className:"w-8 h-8 text-[#DC2626]"})}),s.jsx("h3",{className:"text-xl text-[#0f172a] mb-2",children:"Unable to load charts"}),s.jsx("p",{className:"text-sm text-[#64748b] mb-6 max-w-md mx-auto leading-relaxed",children:"There was a problem loading your patient charts. Please try again."}),s.jsxs(de,{onClick:()=>{ie(!1),Q(!0),setTimeout(()=>Q(!1),1e3)},className:"bg-[#0966CC] hover:bg-[#0C4A6E] text-white",children:[s.jsx(Pl,{className:"w-4 h-4 mr-2"}),"Retry"]})]}),!W&&!T&&Js.length>0&&s.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[s.jsxs("div",{className:"grid grid-cols-12 gap-4 px-6 py-3 bg-slate-50 border-b border-slate-200 text-xs font-medium text-slate-600",children:[s.jsx("div",{className:"col-span-5",children:"Patient"}),s.jsx("div",{className:"col-span-2 hidden md:block",children:s.jsxs("button",{onClick:()=>Ms("created"),className:"flex items-center gap-1 hover:text-slate-900 transition-colors",children:["Created",Tr==="created"?Fr==="asc"?s.jsx(zx,{className:"w-3.5 h-3.5 text-sky-600"}):s.jsx($x,{className:"w-3.5 h-3.5 text-sky-600"}):s.jsx(Vx,{className:"w-3.5 h-3.5 opacity-30"})]})}),s.jsx("div",{className:"col-span-3 hidden md:block",children:"Medications"}),s.jsx("div",{className:"col-span-2",children:s.jsxs("button",{onClick:()=>Ms("status"),className:"flex items-center gap-1 hover:text-slate-900 transition-colors",children:["Status",Tr==="status"?Fr==="asc"?s.jsx(zx,{className:"w-3.5 h-3.5 text-sky-600"}):s.jsx($x,{className:"w-3.5 h-3.5 text-sky-600"}):s.jsx(Vx,{className:"w-3.5 h-3.5 opacity-30"})]})})]}),s.jsx("div",{className:"divide-y divide-slate-100",children:Js.map(({patient:Ke,chart:Xe},cr)=>{const cn=Ke.name.split(" ").map(dn=>dn[0]).join("").toUpperCase().slice(0,2);return s.jsx(hn,{children:s.jsxs("button",{onClick:()=>Ss(Ke.id,Xe.id),className:`w-full grid grid-cols-12 gap-4 px-6 py-4 text-left transition-all cursor-pointer hover:bg-slate-50 active:scale-[0.998] group ${cr%2===1?"bg-slate-50/50":"bg-white"} ${Xe.status==="Needs Reverification"?"border-l-4 border-l-red-400 pl-5":""}`,children:[s.jsxs("div",{className:"col-span-5 flex items-center gap-3 min-w-0",children:[s.jsx(Xs,{className:"w-10 h-10 border-2 border-slate-200 flex-shrink-0",children:s.jsx(Zs,{className:`text-sm ${Xe.status==="Needs Reverification"?"bg-gradient-to-br from-red-500 to-red-600 text-white":"bg-gradient-to-br from-sky-500 to-sky-600 text-white"}`,children:cn})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("h3",{className:"text-sm font-medium text-slate-900 truncate",children:Ke.name}),s.jsxs("p",{className:"text-xs text-slate-500 mt-0.5",children:["DOB: ",new Date(Ke.dob).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]})]}),s.jsxs("div",{className:"col-span-2 hidden md:flex flex-col justify-center",children:[s.jsx("p",{className:"text-sm text-slate-700",children:new Date(Xe.createdDate).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),s.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:Xe.createdBy})]}),s.jsxs("div",{className:"col-span-3 hidden md:flex flex-col justify-center",children:[s.jsxs("p",{className:"text-sm text-slate-700",children:[Xe.medicationCount," medication",Xe.medicationCount!==1?"s":""]}),s.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:Xe.type})]}),s.jsxs("div",{className:"col-span-2 flex items-center justify-between gap-2",children:[s.jsxs(fn,{children:[s.jsx(mn,{asChild:!0,children:s.jsx("span",{className:"inline-flex",children:s.jsxs(gt,{className:`${fi(Xe.status)} flex items-center gap-1.5 px-2.5 py-1 text-xs font-medium border`,children:[Ya(Xe.status),s.jsx("span",{className:"whitespace-nowrap",children:ze(Xe.status)})]})})}),s.jsx(pn,{side:"left",className:"max-w-xs",children:s.jsx("p",{children:ft(Xe.status)})})]}),s.jsx(Xr,{className:"w-5 h-5 text-slate-300 group-hover:text-sky-600 group-hover:translate-x-0.5 transition-all flex-shrink-0"})]})]})},`${Ke.id}-${Xe.id}`)})})]})]})]}),wt=()=>{at(!0)},nt=()=>{Pe.success("Profile updated successfully"),at(!1)},Qr=Ke=>{let Xe=0;Ke.length>=8&&Xe++,/[a-z]/.test(Ke)&&/[A-Z]/.test(Ke)&&Xe++,/\d/.test(Ke)&&Xe++,/[^a-zA-Z0-9]/.test(Ke)&&Xe++;const cr=["Very Weak","Weak","Fair","Strong"],cn=["text-red-600","text-yellow-600","text-blue-600","text-green-600"];return{score:Xe,label:cr[Xe]||cr[0],color:cn[Xe]||cn[0]}},Zn=async()=>{if(xt(""),Me(!1),!Ve||!ct||!ot){xt("Please fill in all fields");return}if(ct===Ve){xt("New password cannot match current password");return}if(ct!==ot){xt("Passwords do not match");return}if(Qr(ct).score<2){xt("Password is too weak. Please choose a stronger password");return}Wt(!0),setTimeout(()=>{Wt(!1),Me(!0),vt(""),Kt(""),Ct(""),Pe.success("Password updated successfully"),setTimeout(()=>Me(!1),5e3)},1500)},bn=()=>!Ve||!ct||!ot?!1:Qr(ct).score>=2&&ct===ot&&ct!==Ve,Bs=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-white rounded-xl border border-[#e2e8f0] p-8",children:s.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Xs,{className:"w-24 h-24",children:s.jsx(Zs,{className:"bg-gradient-to-br from-[#0966CC] to-[#0C4A6E] text-white text-2xl",children:"AC"})}),s.jsx("button",{className:"absolute bottom-0 right-0 w-8 h-8 rounded-full bg-white shadow-lg flex items-center justify-center hover:bg-slate-50 transition-colors border border-slate-200",children:s.jsx(Ei,{className:"w-4 h-4 text-slate-600"})})]}),s.jsxs("div",{className:"flex-1 text-center md:text-left",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-3 mb-2",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-2xl text-[#0f172a] mb-1",children:["Anna Clinician",s.jsx("span",{className:"text-[#64748b] text-lg ml-2",children:"RN, BSN"})]}),s.jsx("p",{className:"text-sm text-[#64748b] mb-2",children:"she/her"})]}),s.jsxs(de,{onClick:wt,size:"sm",variant:"outline",className:"mx-auto md:mx-0",children:[s.jsx(jh,{className:"w-3.5 h-3.5 mr-1.5"}),"Edit Profile"]})]}),s.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-start gap-2 mb-3",children:[s.jsx(gt,{className:"bg-[#E0F2FE] text-[#0966CC] border-[#BFDBFE]",children:"Registered Nurse"}),s.jsxs(gt,{className:"bg-emerald-100 text-emerald-700 border-emerald-200 flex items-center gap-1",children:[s.jsx(s6,{className:"w-3 h-3"}),"Verified Clinician"]})]}),s.jsxs("p",{className:"text-sm text-[#64748b] flex items-center justify-center md:justify-start gap-2",children:[s.jsx(Ga,{className:"w-3.5 h-3.5"}),"Home Health Services  Luminous Home Health"]}),s.jsx("p",{className:"text-sm text-[#64748b]",children:"Geriatric Medicine"})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-white rounded-xl border border-[#e2e8f0] p-6 text-center",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-[#E0F2FE] flex items-center justify-center mb-3 mx-auto",children:s.jsx(Rs,{className:"w-6 h-6 text-[#0966CC]"})}),s.jsx("p",{className:"text-2xl text-[#0f172a] mb-1",children:$r}),s.jsx("p",{className:"text-sm text-[#64748b]",children:"Patients"})]}),s.jsxs("div",{className:"bg-white rounded-xl border border-[#e2e8f0] p-6 text-center",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-[#DBEAFE] flex items-center justify-center mb-3 mx-auto",children:s.jsx(hr,{className:"w-6 h-6 text-[#0966CC]"})}),s.jsx("p",{className:"text-2xl text-[#0f172a] mb-1",children:n.reduce((Ke,Xe)=>Ke+(Xe.charts?.length||0),0)}),s.jsx("p",{className:"text-sm text-[#64748b]",children:"Charts"})]}),s.jsx(hn,{children:s.jsxs(fn,{children:[s.jsx(mn,{asChild:!0,children:s.jsxs("div",{className:"bg-white rounded-xl border border-[#e2e8f0] p-6 text-center cursor-help",children:[s.jsxs("div",{className:"w-12 h-12 rounded-xl bg-[#D1FAE5] flex items-center justify-center mb-3 mx-auto relative",children:[s.jsx(kr,{className:"w-6 h-6 text-[#10B981]"}),s.jsxs("svg",{className:"absolute inset-0 w-12 h-12 -rotate-90",children:[s.jsx("circle",{cx:"24",cy:"24",r:"20",fill:"none",stroke:"#D1FAE5",strokeWidth:"2.5"}),s.jsx("circle",{cx:"24",cy:"24",r:"20",fill:"none",stroke:"#10B981",strokeWidth:"2.5",strokeDasharray:"123 125.6"})]})]}),s.jsx("p",{className:"text-2xl text-[#0f172a] mb-1",children:"98%"}),s.jsx("p",{className:"text-sm text-[#64748b]",children:"Accuracy"})]})}),s.jsx(pn,{side:"bottom",className:"max-w-xs",children:s.jsx("p",{className:"text-sm",children:"% of medication scans verified correctly on first attempt"})})]})})]}),s.jsx(qr,{}),s.jsxs("div",{className:"bg-white rounded-xl border border-[#e2e8f0] p-6",children:[s.jsx("h3",{className:"text-lg text-[#0f172a] mb-4",children:"Contact Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#E0F2FE] flex items-center justify-center flex-shrink-0",children:s.jsx(Mn,{className:"w-4 h-4 text-[#0966CC]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx(Fe,{className:"text-xs text-[#64748b]",children:"Email"}),s.jsx("p",{className:"text-sm text-[#0f172a] mt-1",children:"anna.clinician@luminous.com"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#E0F2FE] flex items-center justify-center flex-shrink-0",children:s.jsx(Yi,{className:"w-4 h-4 text-[#0966CC]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx(Fe,{className:"text-xs text-[#64748b]",children:"Phone"}),s.jsx("p",{className:"text-sm text-[#0f172a] mt-1",children:"(555) 123-4567"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#E0F2FE] flex items-center justify-center flex-shrink-0",children:s.jsx(Jo,{className:"w-4 h-4 text-[#0966CC]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx(Fe,{className:"text-xs text-[#64748b]",children:"Address"}),s.jsx("p",{className:"text-sm text-[#0f172a] mt-1",children:"123 Medical Plaza, Healthcare City, HC 12345"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#E0F2FE] flex items-center justify-center flex-shrink-0",children:s.jsx(Ga,{className:"w-4 h-4 text-[#0966CC]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx(Fe,{className:"text-xs text-[#64748b]",children:"Agency"}),s.jsx("p",{className:"text-sm text-[#0f172a] mt-1",children:"Luminous Home Health"})]})]})]})]}),s.jsx(qr,{}),s.jsxs("div",{className:"bg-white rounded-xl border border-[#e2e8f0] p-6",children:[s.jsx("h3",{className:"text-lg text-[#0f172a] mb-4",children:"Professional Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#D1FAE5] flex items-center justify-center flex-shrink-0",children:s.jsx(Gi,{className:"w-4 h-4 text-[#10B981]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx(Fe,{className:"text-xs text-[#64748b]",children:"License Number"}),s.jsxs("p",{className:"text-sm text-[#0f172a] mt-1 flex items-center gap-2",children:["RN-987654321",s.jsxs(gt,{className:"bg-emerald-100 text-emerald-700 border-emerald-200 text-xs py-0 px-1.5",children:[s.jsx(kr,{className:"w-3 h-3 mr-0.5"}),"Verified"]})]})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#D1FAE5] flex items-center justify-center flex-shrink-0",children:s.jsx(Gi,{className:"w-4 h-4 text-[#10B981]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx(Fe,{className:"text-xs text-[#64748b]",children:"NPI Number"}),s.jsx("p",{className:"text-sm text-[#0f172a] mt-1",children:"1234567890"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#D1FAE5] flex items-center justify-center flex-shrink-0",children:s.jsx(mw,{className:"w-4 h-4 text-[#10B981]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx(Fe,{className:"text-xs text-[#64748b]",children:"Specialization"}),s.jsx("p",{className:"text-sm text-[#0f172a] mt-1",children:"Geriatric Medicine"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#D1FAE5] flex items-center justify-center flex-shrink-0",children:s.jsx(c6,{className:"w-4 h-4 text-[#10B981]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx(Fe,{className:"text-xs text-[#64748b]",children:"Certifications"}),s.jsxs("div",{className:"flex flex-wrap gap-1.5 mt-1",children:[s.jsx(gt,{variant:"outline",className:"text-xs bg-emerald-50 text-emerald-700 border-emerald-200",children:"WOCN Certified"}),s.jsx(gt,{variant:"outline",className:"text-xs bg-emerald-50 text-emerald-700 border-emerald-200",children:"Geriatrics Specialist"})]})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#D1FAE5] flex items-center justify-center flex-shrink-0",children:s.jsx(Ws,{className:"w-4 h-4 text-[#10B981]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx(Fe,{className:"text-xs text-[#64748b]",children:"Years of Practice"}),s.jsx("p",{className:"text-sm text-[#0f172a] mt-1",children:"8 years"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#D1FAE5] flex items-center justify-center flex-shrink-0",children:s.jsx(Zo,{className:"w-4 h-4 text-[#10B981]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx(Fe,{className:"text-xs text-[#64748b]",children:"Joined"}),s.jsx("p",{className:"text-sm text-[#0f172a] mt-1",children:"January 15, 2024"})]})]})]})]}),s.jsx("div",{className:"bg-gradient-to-r from-slate-50 to-slate-100 rounded-xl p-4 border border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-slate-600",children:[s.jsx(Gi,{className:"w-4 h-4 text-emerald-600"}),s.jsx("span",{className:"font-medium text-emerald-700",children:"HIPAA-Compliant"}),s.jsx("span",{className:"text-slate-400",children:""}),s.jsx("span",{children:"Encrypted"}),s.jsx("span",{className:"text-slate-400",children:""}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse"}),"Secure Session"]})]})}),s.jsxs("div",{className:"text-xs text-slate-500 space-y-1 px-2",children:[s.jsx("p",{children:"Account created: January 2025"}),s.jsx("p",{children:"Last updated: Today at 2:03 PM"})]})]}),ld=()=>{const Ke=Fa();return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm p-4",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Zi,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-[#94a3b8]"}),s.jsx(Ze,{placeholder:"Search by patient name...",value:M,onChange:Xe=>q(Xe.target.value),className:"pl-12 h-11 rounded-xl border border-[#e2e8f0] bg-white focus:bg-white"})]}),s.jsx("div",{className:"w-full md:w-48",children:s.jsxs(oa,{value:H,onValueChange:Xe=>se(Xe),children:[s.jsxs(ca,{className:"h-11 rounded-xl border border-[#e2e8f0] bg-white",children:[s.jsx(Hx,{className:"w-4 h-4 mr-2"}),s.jsx(la,{placeholder:"Filter Status"})]}),s.jsxs(da,{children:[s.jsx(Bt,{value:"all",children:"All Statuses"}),s.jsx(Bt,{value:"Needs Reverification",children:"Needs Reverification"}),s.jsx(Bt,{value:"Active",children:"Active"}),s.jsx(Bt,{value:"Verified Ready",children:"Verified Ready"}),s.jsx(Bt,{value:"Delivered (Locked)",children:"Delivered (Locked)"}),s.jsx(Bt,{value:"Archived",children:"Archived"})]})]})}),s.jsx("div",{className:"w-full md:w-48",children:s.jsxs(oa,{value:re,onValueChange:Xe=>ee(Xe),children:[s.jsxs(ca,{className:"h-11 rounded-xl border border-[#e2e8f0] bg-white",children:[s.jsx(W2,{className:"w-4 h-4 mr-2"}),s.jsx(la,{placeholder:"Sort By"})]}),s.jsxs(da,{children:[s.jsx(Bt,{value:"newest",children:"Newest First"}),s.jsx(Bt,{value:"oldest",children:"Oldest First"}),s.jsx(Bt,{value:"name-asc",children:"Name (A-Z)"}),s.jsx(Bt,{value:"name-desc",children:"Name (Z-A)"}),s.jsx(Bt,{value:"status",children:"Status"})]})]})})]})}),s.jsxs("div",{className:"bg-white rounded-2xl border border-[#e2e8f0] overflow-hidden",children:[s.jsx("div",{className:"p-4 border-b border-[#e2e8f0]",children:s.jsxs("h2",{className:"text-lg text-[#0f172a]",children:["All Charts (",Ke.length,")"]})}),Ke.length===0?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx(hr,{className:"w-12 h-12 text-[#cbd5e1] mx-auto mb-3"}),s.jsx("p",{className:"text-[#64748b]",children:"No charts found"})]}):s.jsx("div",{className:"divide-y divide-[#e2e8f0]",children:Ke.map(({patient:Xe,chart:cr})=>{const cn=Xe.name.split(" ").map(dn=>dn[0]).join("").toUpperCase();return s.jsxs("button",{onClick:()=>t.navigate("ChartDetail",{chartId:cr.id}),className:"w-full p-4 hover:bg-[#f8fafc] transition-colors text-left flex items-center gap-4",children:[s.jsx(Xs,{className:"w-12 h-12 border-2 border-slate-200 flex-shrink-0",children:s.jsx(Zs,{className:`text-sm ${cr.status==="Needs Reverification"?"bg-gradient-to-br from-red-500 to-red-600 text-white":"bg-gradient-to-br from-sky-500 to-sky-600 text-white"}`,children:cn})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"text-sm text-slate-900 truncate",children:Xe.name}),s.jsxs("p",{className:"text-xs text-slate-500",children:["DOB: ",new Date(Xe.dob).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]}),s.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[cr.medicationCount," medication",cr.medicationCount!==1?"s":"","  ",cr.type]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs(gt,{className:`${fi(cr.status)} flex items-center gap-1.5 px-2.5 py-1 text-xs border`,children:[Ya(cr.status),s.jsx("span",{className:"whitespace-nowrap",children:ze(cr.status)})]}),s.jsx(Xr,{className:"w-5 h-5 text-slate-300"})]})]},cr.id)})})]})]})},Qs=()=>{const Ke=[{name:"My Patients",icon:Rs,action:()=>K("dashboard"),color:"#0966CC"},{name:"View All Charts",icon:hr,action:()=>K("charts"),color:"#F59E0B"},{name:"Scan Medications",icon:Yx,action:()=>t.navigate("CaptureSourceSelection"),color:"#8B5CF6"}];return s.jsxs("div",{className:"max-w-4xl space-y-5",children:[s.jsxs("button",{onClick:()=>K("profile"),className:"flex items-center gap-2 text-sm text-[#0966CC] hover:text-[#0C4A6E] transition-colors",children:[s.jsx(ln,{className:"w-4 h-4"}),"Back to Profile"]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm text-[#64748b] mb-3 px-2",children:"QUICK ACTIONS"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:Ke.map((Xe,cr)=>{const cn=Xe.icon;return s.jsxs(de,{onClick:Xe.action,variant:"outline",className:"h-auto p-4 flex items-center justify-start gap-3 hover:border-[#0966CC] hover:bg-[#E0F2FE] transition-colors",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0",style:{backgroundColor:`${Xe.color}20`},children:s.jsx(cn,{className:"w-5 h-5",style:{color:Xe.color}})}),s.jsx("span",{className:"text-sm text-[#0f172a]",children:Xe.name}),s.jsx(Xr,{className:"w-4 h-4 text-[#cbd5e1] ml-auto"})]},cr)})})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm text-[#64748b] mb-3 px-2",children:"SECURITY"}),s.jsx("div",{className:"bg-white rounded-2xl border border-[#e2e8f0] p-5",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#DBEAFE] flex items-center justify-center flex-shrink-0",children:s.jsx(fs,{className:"w-5 h-5 text-[#0966CC]"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-[#0f172a] mb-1",children:"Password"}),s.jsx("p",{className:"text-xs text-[#64748b] mb-2",children:"Last changed 30 days ago"})]})]}),s.jsx(de,{variant:"ghost",size:"sm",onClick:()=>vr(!0),className:"text-[#0966CC] hover:text-[#075985] hover:bg-[#DBEAFE]",children:"Change"})]}),s.jsx(qr,{}),s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#D1FAE5] flex items-center justify-center flex-shrink-0",children:s.jsx(Gi,{className:"w-5 h-5 text-[#10B981]"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("p",{className:"text-sm text-[#0f172a]",children:"Two-Factor Authentication"}),s.jsx(gt,{variant:"outline",className:"border-[#10B981] text-[#10B981] text-xs h-5",children:" Enabled"})]}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"Extra security for your account"})]})]})}),s.jsx(qr,{}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#FEF3C7] flex items-center justify-center flex-shrink-0",children:s.jsx(Jo,{className:"w-5 h-5 text-[#F59E0B]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm text-[#0f172a] mb-1",children:"Last Login"}),s.jsx("p",{className:"text-xs text-[#64748b] mb-1",children:" Phoenix, AZ"}),s.jsx("p",{className:"text-xs text-[#64748b]",children:" Today at 9:42 AM"})]})]})]})})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm text-[#64748b] mb-3 px-2",children:"NOTIFICATIONS"}),s.jsxs("div",{className:"bg-white rounded-2xl border border-[#e2e8f0] overflow-hidden",children:[s.jsx("div",{className:"flex items-center justify-between p-4 border-b border-[#e2e8f0]",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#D1FAE5] flex items-center justify-center",children:s.jsx(Mn,{className:"w-5 h-5 text-[#10B981]"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-[#0f172a]",children:"Email Notifications"}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"Receive email updates"})]})]})}),s.jsx("div",{className:"flex items-center justify-between p-4 border-b border-[#e2e8f0]",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#FEF3C7] flex items-center justify-center",children:s.jsx(xh,{className:"w-5 h-5 text-[#F59E0B]"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-[#0f172a]",children:"Push Notifications"}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"Receive app notifications"})]})]})}),s.jsx("div",{className:"flex items-center justify-between p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#E0F2FE] flex items-center justify-center",children:s.jsx(hr,{className:"w-5 h-5 text-[#0966CC]"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-[#0f172a]",children:"Chart Alerts"}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"Updates on your charts"})]})]})})]})]}),s.jsxs("div",{className:"bg-white rounded-xl border border-[#e2e8f0] p-8",style:{display:"none"},children:[s.jsxs("div",{className:"flex items-start gap-3 mb-6",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-[#E0F2FE] flex items-center justify-center flex-shrink-0",children:s.jsx(fs,{className:"w-6 h-6 text-[#0966CC]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg text-slate-900 mb-1",children:"Change Password"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Update your password regularly for security"})]})]}),s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"current-password",className:"text-sm text-slate-700 mb-2 block",children:"Current Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ze,{id:"current-password",type:qt?"text":"password",value:Ve,onChange:Xe=>{vt(Xe.target.value),xt(""),Me(!1)},placeholder:"Enter current password",className:"h-12 rounded-xl border-2 border-slate-200 bg-slate-50 pr-12 focus:border-sky-500 focus:bg-white transition-colors"}),s.jsx("button",{type:"button",onClick:()=>Tt(!qt),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 transition-colors",children:qt?s.jsx(o0,{className:"w-5 h-5"}):s.jsx(hs,{className:"w-5 h-5"})})]})]}),s.jsx(qr,{className:"my-6"}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"new-password",className:"text-sm text-slate-700 mb-2 block",children:"New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ze,{id:"new-password",type:Et?"text":"password",value:ct,onChange:Xe=>{Kt(Xe.target.value),xt(""),Me(!1)},onFocus:()=>Cr(!0),onBlur:()=>Cr(!1),placeholder:"Enter new password",className:"h-12 rounded-xl border-2 border-slate-200 bg-slate-50 pr-12 focus:border-sky-500 focus:bg-white transition-colors"}),s.jsx("button",{type:"button",onClick:()=>kt(!Et),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 transition-colors",children:Et?s.jsx(o0,{className:"w-5 h-5"}):s.jsx(hs,{className:"w-5 h-5"})})]}),ct&&At&&s.jsxs("div",{className:"mt-3 space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-xs text-slate-600",children:"Password strength:"}),s.jsx("span",{className:`text-xs font-medium ${At.score===0?"text-red-600":At.score===1?"text-yellow-600":At.score===2?"text-blue-600":"text-green-600"}`,children:At.label})]}),s.jsx("div",{className:"flex gap-1.5",children:[0,1,2,3].map(Xe=>s.jsx("div",{className:`h-1.5 flex-1 rounded-full transition-all ${Xe<=At.score?At.color:"bg-slate-200"}`},Xe))})]}),(It||ct)&&s.jsxs("div",{className:"mt-3 p-3 bg-slate-50 rounded-lg border border-slate-200",children:[s.jsx("p",{className:"text-xs text-slate-700 mb-2 font-medium",children:"Must include:"}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[Lr?.length?s.jsx(Hs,{className:"w-3.5 h-3.5 text-emerald-600"}):s.jsx("div",{className:"w-3.5 h-3.5 rounded-full border-2 border-slate-300"}),s.jsx("span",{className:Lr?.length?"text-emerald-700":"text-slate-600",children:"At least 8 characters"})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[Lr?.upperLower?s.jsx(Hs,{className:"w-3.5 h-3.5 text-emerald-600"}):s.jsx("div",{className:"w-3.5 h-3.5 rounded-full border-2 border-slate-300"}),s.jsx("span",{className:Lr?.upperLower?"text-emerald-700":"text-slate-600",children:"Upper & lowercase letters"})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[Lr?.numberOrSymbol?s.jsx(Hs,{className:"w-3.5 h-3.5 text-emerald-600"}):s.jsx("div",{className:"w-3.5 h-3.5 rounded-full border-2 border-slate-300"}),s.jsx("span",{className:Lr?.numberOrSymbol?"text-emerald-700":"text-slate-600",children:"Number or special symbol"})]})]})]})]}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"confirm-password",className:"text-sm text-slate-700 mb-2 block",children:"Confirm New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ze,{id:"confirm-password",type:St?"text":"password",value:ot,onChange:Xe=>{Ct(Xe.target.value),xt(""),Me(!1)},placeholder:"Confirm new password",className:"h-12 rounded-xl border-2 border-slate-200 bg-slate-50 pr-12 focus:border-sky-500 focus:bg-white transition-colors"}),s.jsx("button",{type:"button",onClick:()=>gr(!St),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 transition-colors",children:St?s.jsx(o0,{className:"w-5 h-5"}):s.jsx(hs,{className:"w-5 h-5"})})]}),ot&&ct!==ot&&s.jsxs("p",{className:"text-xs text-red-600 mt-2 flex items-center gap-1",children:[s.jsx(ps,{className:"w-3 h-3"}),"Passwords do not match"]}),ot&&ct===ot&&ct.length>=8&&s.jsxs("p",{className:"text-xs text-emerald-600 mt-2 flex items-center gap-1",children:[s.jsx(Hs,{className:"w-3 h-3"}),"Passwords match"]})]}),s.jsx("div",{className:"pt-2",children:s.jsx(de,{onClick:Zn,disabled:!bn()||bt,className:`h-12 px-6 rounded-xl transition-all ${Ht?"bg-emerald-600 hover:bg-emerald-700":"bg-sky-600 hover:bg-sky-700"} text-white disabled:opacity-50 disabled:cursor-not-allowed`,children:bt?s.jsxs(s.Fragment,{children:[s.jsx(Xd,{className:"w-4 h-4 mr-2 animate-spin"}),"Updating..."]}):Ht?s.jsxs(s.Fragment,{children:[s.jsx(Hs,{className:"w-4 h-4 mr-2"}),"Password Updated"]}):s.jsxs(s.Fragment,{children:[s.jsx(fs,{className:"w-4 h-4 mr-2"}),"Update Password"]})})}),s.jsx("div",{className:"pt-4 border-t border-slate-200",children:s.jsxs("div",{className:"flex items-start gap-2 text-xs text-slate-600",children:[s.jsx(Gi,{className:"w-4 h-4 text-emerald-600 flex-shrink-0 mt-0.5"}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium text-emerald-700",children:"HIPAA-compliant & encrypted:"})," Your password is securely encrypted and never stored in plain text."]})]})})]})]}),s.jsx(ar,{open:Gr,onOpenChange:vr,children:s.jsxs(sr,{children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Change Password"}),s.jsx(lr,{children:"Choose a strong password to keep your account secure"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"current-password-dialog",children:"Current Password"}),s.jsx(Ze,{id:"current-password-dialog",type:"password",value:Ve,onChange:Xe=>vt(Xe.target.value),placeholder:"Enter current password",className:"h-11 rounded-xl"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"new-password-dialog",children:"New Password"}),s.jsx(Ze,{id:"new-password-dialog",type:"password",value:ct,onChange:Xe=>Kt(Xe.target.value),placeholder:"Enter new password",className:"h-11 rounded-xl"}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"Must be at least 8 characters"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"confirm-password-dialog",children:"Confirm New Password"}),s.jsx(Ze,{id:"confirm-password-dialog",type:"password",value:ot,onChange:Xe=>Ct(Xe.target.value),placeholder:"Confirm new password",className:"h-11 rounded-xl"})]})]}),s.jsxs(_r,{children:[s.jsx(de,{variant:"outline",onClick:()=>{vr(!1),vt(""),Kt(""),Ct("")},children:"Cancel"}),s.jsx(de,{className:"bg-[#0966CC] hover:bg-[#075985]",onClick:()=>{if(!Ve||!ct||!ot){Pe.error("Please fill in all fields");return}if(ct!==ot){Pe.error("New passwords do not match");return}if(ct.length<8){Pe.error("Password must be at least 8 characters");return}Pe.success("Password changed successfully!"),vr(!1),vt(""),Kt(""),Ct("")},children:"Update Password"})]})]})})]})};return s.jsxs("div",{className:"h-screen flex bg-[#f8fafc] overflow-hidden",children:[s.jsxs("aside",{className:"hidden md:flex md:flex-col w-64 bg-white border-r border-[#e2e8f0]",children:[s.jsxs("div",{className:"border-b border-[#e2e8f0] p-6",children:[s.jsx("div",{className:"mb-1 text-sm text-[#64748b]",children:r?.agency_name}),s.jsx("div",{className:"text-lg text-[#0f172a]",children:"Clinician Portal"})]}),s.jsx("div",{className:"flex-1 py-4 px-3 overflow-y-auto",children:gn()}),s.jsx("div",{className:"border-t border-[#e2e8f0] p-4",children:s.jsxs(de,{onClick:La,variant:"outline",className:"w-full border-[#DC2626] text-[#DC2626] hover:bg-[#FEE2E2]",children:[s.jsx(su,{className:"w-4 h-4 mr-2"}),"Sign Out"]})})]}),s.jsx(Jd,{open:R,onOpenChange:B,children:s.jsxs(Qd,{side:"left",className:"w-[280px] sm:w-[320px] p-0 flex flex-col",children:[s.jsxs(eu,{className:"border-b border-[#e2e8f0] p-6",children:[s.jsxs(tu,{className:"text-left",children:[s.jsx("div",{className:"mb-1 text-sm text-[#64748b]",children:r?.agency_name}),s.jsx("div",{className:"text-lg text-[#0f172a]",children:"Clinician Portal"})]}),s.jsx(Df,{className:"sr-only",children:"Navigation menu for Clinician Portal"})]}),s.jsx("div",{className:"flex-1 py-4 px-3 overflow-y-auto",children:gn()}),s.jsx("div",{className:"border-t border-[#e2e8f0] p-4",children:s.jsxs(de,{onClick:La,variant:"outline",className:"w-full border-[#DC2626] text-[#DC2626] hover:bg-[#FEE2E2]",children:[s.jsx(su,{className:"w-4 h-4 mr-2"}),"Sign Out"]})})]})}),s.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s.jsx("header",{className:"bg-white border-b border-[#e2e8f0] px-6 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>B(!0),className:"md:hidden w-10 h-10 rounded-xl bg-[#f8fafc] hover:bg-[#f1f5f9] flex items-center justify-center transition-colors",children:s.jsx(b1,{className:"w-5 h-5 text-[#64748b]"})}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-xl text-[#0f172a]",children:[U==="dashboard"&&"Dashboard",U==="charts"&&"My Charts",U==="profile"&&"My Profile",U==="settings"&&"Settings"]}),s.jsxs("p",{className:"text-sm text-[#64748b]",children:[U==="dashboard"&&`Welcome back, ${r?.first_name}!`,U==="charts"&&"View and manage all patient charts",U==="profile"&&"View and manage your profile",U==="settings"&&"Manage your account settings"]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"hidden sm:flex items-center gap-2 px-3 py-1.5 rounded-lg bg-[#f8fafc]",children:J?s.jsxs(s.Fragment,{children:[s.jsx(h6,{className:"w-4 h-4 text-[#10B981]"}),s.jsx("span",{className:"text-xs text-[#10B981]",children:"Online"})]}):s.jsxs(s.Fragment,{children:[s.jsx(Tf,{className:"w-4 h-4 text-[#DC2626]"}),s.jsx("span",{className:"text-xs text-[#DC2626]",children:"Offline"})]})}),s.jsxs("button",{className:"w-10 h-10 rounded-xl bg-[#f8fafc] hover:bg-[#f1f5f9] flex items-center justify-center relative transition-colors",children:[s.jsx(xh,{className:"w-5 h-5 text-[#64748b]"}),s.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 rounded-full bg-[#F59E0B] border-2 border-white"})]})]})]})}),s.jsxs("main",{className:"flex-1 overflow-y-auto p-6",children:[U==="dashboard"&&Ee(),U==="charts"&&ld(),U==="profile"&&Bs(),U==="settings"&&Qs()]})]}),s.jsx(om,{position:"top-right"}),s.jsx(ar,{open:pe,onOpenChange:at,children:s.jsxs(sr,{className:"sm:max-w-md",children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Edit Profile"}),s.jsx(lr,{children:"Update your contact information and preferences."})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"edit-email",children:"Email"}),s.jsx(Ze,{id:"edit-email",type:"email",value:tt,onChange:Ke=>Be(Ke.target.value),className:"h-11 rounded-xl"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"edit-phone",children:"Phone"}),s.jsx(Ze,{id:"edit-phone",type:"tel",value:ye,onChange:Ke=>st(Ke.target.value),className:"h-11 rounded-xl"})]})]}),s.jsxs(_r,{children:[s.jsx(de,{variant:"outline",onClick:()=>at(!1),children:"Cancel"}),s.jsx(de,{onClick:nt,className:"bg-sky-600 hover:bg-sky-700",children:"Save Changes"})]})]})})]})}const BY=t=>{switch(t){case"active":return"Active";case"verified_ready":return"Verified Ready";case"delivered_locked":return"Delivered (Locked)";case"needs_reverification":return"Needs Reverification";case"archived":return"Archived";default:return"Active"}},UY=t=>{switch(t){case"bottle_scan":return"Bottle Scan";case"pdf_import":return"PDF Import";case"image_upload":case"empty_chart":default:return"Manual Entry"}};function $Y({navigation:t}){const{user:e}=Ka(),[r,n]=N.useState([]),[a,i]=N.useState(!0),[o,l]=N.useState(null),[c,u]=N.useState(""),[h,m]=N.useState("newest"),[x,p]=N.useState("all"),[y,w]=N.useState(new Set),[j,C]=N.useState(!1),[S,k]=N.useState([]),[P,O]=N.useState(null),[$,R]=N.useState("desc"),[B,U]=N.useState("synced"),[K,M]=N.useState(!1),q=V=>{S.includes(V)?k(S.filter(W=>W!==V)):k([...S,V])},re=V=>{P===V?R($==="asc"?"desc":"asc"):(O(V),R("desc"))},ee=V=>{M(!1),Pe.info(`${V} feature coming soon`)};N.useEffect(()=>{(async()=>{try{if(!e?.id)return;const Q=(await IA(e.id)||[]).map(T=>({id:T.id,name:`${T.first_name} ${T.last_name}`,dob:T.date_of_birth,charts:(T.charts||[]).map(ie=>({id:ie.id,status:BY(ie.status),type:UY(ie.source),medicationCount:ie.medication_count??0,createdDate:ie.created_at,createdBy:ie.created_by??"Unknown",finalizedDate:ie.finalized_at??void 0}))}));n(Q),l(null)}catch(W){console.error("Error loading patient charts list",W),l(W.message||"Failed to load charts")}finally{i(!1)}})()},[e?.id]);const se=(()=>{let V=[];if(r.forEach(W=>{W.charts.forEach(Q=>{V.push({patient:W,chart:Q,chartKey:`${W.id}-${Q.id}`})})}),c&&(V=V.filter(W=>W.patient.name.toLowerCase().includes(c.toLowerCase()))),x!=="all"&&(V=V.filter(W=>W.chart.status===x)),S.length>0&&(V=V.filter(W=>S.includes(W.chart.status))),P==="created")V.sort((W,Q)=>{const T=new Date(W.chart.createdDate).getTime(),ie=new Date(Q.chart.createdDate).getTime();return $==="asc"?T-ie:ie-T});else if(P==="status"){const W={"Needs Reverification":0,Active:1,"Verified Ready":2,"Delivered (Locked)":3,Archived:4};V.sort((Q,T)=>{const ie=W[Q.chart.status]||999,ge=W[T.chart.status]||999;return $==="asc"?ie-ge:ge-ie})}else V.sort((W,Q)=>{switch(h){case"newest":return new Date(Q.chart.createdDate).getTime()-new Date(W.chart.createdDate).getTime();case"oldest":return new Date(W.chart.createdDate).getTime()-new Date(Q.chart.createdDate).getTime();case"name-asc":return W.patient.name.localeCompare(Q.patient.name);case"name-desc":return Q.patient.name.localeCompare(W.patient.name);case"status":const T={"Needs Reverification":0,Active:1,"Verified Ready":2,"Delivered (Locked)":3,Archived:4};return(T[W.chart.status]||999)-(T[Q.chart.status]||999);default:return 0}});return V})(),ue=V=>{const W=new Set(y);W.has(V)?W.delete(V):W.add(V),w(W)},G=()=>{y.size===se.length?w(new Set):w(new Set(se.map(V=>V.chartKey)))},J=()=>{C(!1),w(new Set)},oe=()=>{alert(`Exporting ${y.size} charts to PDF...`),J()},Y=()=>{alert(`Preparing to email ${y.size} charts...`),J()},L=()=>{confirm(`Are you sure you want to archive ${y.size} charts?`)&&(alert(`Archived ${y.size} charts`),J())},z=(V,W)=>{j||t.navigate("ChartDetail",{patientId:V,chartId:W})};return s.jsxs("div",{className:"h-screen flex flex-col bg-[#f8fafc]",children:[s.jsx("div",{className:"bg-gradient-to-r from-[#0966CC] to-[#0C4A6E] p-5",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("button",{onClick:()=>t.goBack(),className:"w-10 h-10 rounded-xl bg-white/15 hover:bg-white/25 flex items-center justify-center transition-colors",children:s.jsx(ln,{className:"w-5 h-5 text-white"})}),s.jsx("h1",{className:"text-lg text-white",children:"All Patient Charts"}),s.jsx("div",{className:"w-10"})]})}),j&&s.jsx("div",{className:"bg-gradient-to-r from-[#0966CC] to-[#0C4A6E] px-6 py-4 shadow-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:J,className:"text-white hover:text-white/80 transition-colors",children:s.jsx(ps,{className:"w-5 h-5"})}),s.jsxs("span",{className:"text-white",children:[y.size," selected"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(de,{onClick:oe,disabled:y.size===0,size:"sm",className:"bg-white/10 border-0 text-white hover:bg-white/20 backdrop-blur-sm",children:[s.jsx(Ai,{className:"w-4 h-4 mr-2"}),"Export"]}),s.jsxs(de,{onClick:Y,disabled:y.size===0,size:"sm",className:"bg-white/10 border-0 text-white hover:bg-white/20 backdrop-blur-sm",children:[s.jsx(Mn,{className:"w-4 h-4 mr-2"}),"Email"]}),s.jsxs(de,{onClick:L,disabled:y.size===0,size:"sm",className:"bg-white/10 border-0 text-white hover:bg-white/20 backdrop-blur-sm",children:[s.jsx(Wi,{className:"w-4 h-4 mr-2"}),"Archive"]})]})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:s.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-4",children:[s.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Zi,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-[#94a3b8]"}),s.jsx(Ze,{id:"charts-search",placeholder:"Search by patient name...",value:c,onChange:V=>u(V.target.value),className:"pl-12 h-11 rounded-xl border border-[#e2e8f0] bg-white"})]}),s.jsx("div",{className:"w-full md:w-48",children:s.jsxs(oa,{value:x,onValueChange:V=>p(V),children:[s.jsxs(ca,{className:"h-11 rounded-xl border border-[#e2e8f0] bg-white",children:[s.jsx(Hx,{className:"w-4 h-4 mr-2"}),s.jsx(la,{placeholder:"Filter Status"})]}),s.jsxs(da,{children:[s.jsx(Bt,{value:"all",children:"All Statuses"}),s.jsx(Bt,{value:"Needs Reverification",children:"Needs Reverification"}),s.jsx(Bt,{value:"Active",children:"Active"}),s.jsx(Bt,{value:"Verified Ready",children:"Verified Ready"}),s.jsx(Bt,{value:"Delivered (Locked)",children:"Delivered (Locked)"}),s.jsx(Bt,{value:"Archived",children:"Archived"})]})]})}),s.jsx("div",{className:"w-full md:w-48",children:s.jsxs(oa,{value:h,onValueChange:V=>m(V),children:[s.jsxs(ca,{className:"h-11 rounded-xl border border-[#e2e8f0] bg-white",children:[s.jsx(W2,{className:"w-4 h-4 mr-2"}),s.jsx(la,{placeholder:"Sort By"})]}),s.jsxs(da,{children:[s.jsx(Bt,{value:"newest",children:"Newest First"}),s.jsx(Bt,{value:"oldest",children:"Oldest First"}),s.jsx(Bt,{value:"name-asc",children:"Name (A-Z)"}),s.jsx(Bt,{value:"name-desc",children:"Name (Z-A)"}),s.jsx(Bt,{value:"status",children:"Status"})]})]})})]}),(c||x!=="all")&&s.jsxs("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-[#f1f5f9]",children:[s.jsx("span",{className:"text-xs text-[#64748b]",children:"Active filters:"}),c&&s.jsxs(gt,{variant:"outline",className:"bg-[#f8fafc] text-xs",children:['Search: "',c,'"']}),x!=="all"&&s.jsxs(gt,{variant:"outline",className:"bg-[#f8fafc] text-xs",children:["Status: ",x]}),s.jsx("button",{onClick:()=>{u(""),p("all")},className:"ml-auto text-xs text-[#0966CC] hover:underline",children:"Clear all"})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(hr,{className:"w-5 h-5 text-sky-600"}),s.jsxs("div",{children:[s.jsxs("h2",{className:"text-lg text-slate-900",children:["All Charts (",se.length,")"]}),s.jsx("p",{className:"text-sm text-slate-600 mt-0.5",children:"Manage and review patient charts"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[B==="synced"?s.jsxs("div",{className:"flex items-center gap-1.5 text-emerald-700 text-sm",children:[s.jsx(Hs,{className:"w-4 h-4"}),s.jsx("span",{children:"Synced"})]}):B==="syncing"?s.jsxs("div",{className:"flex items-center gap-1.5 text-sky-700 text-sm",children:[s.jsx(Xd,{className:"w-4 h-4 animate-spin"}),s.jsx("span",{children:"Syncing..."})]}):s.jsxs("div",{className:"flex items-center gap-1.5 text-amber-700 text-sm",children:[s.jsx(Tf,{className:"w-4 h-4"}),s.jsx("span",{children:"Offline  3 pending"})]}),s.jsx(de,{onClick:()=>C(!j),variant:j?"default":"outline",className:j?"bg-[#0966CC] hover:bg-[#0C4A6E] text-white":"",children:j?s.jsxs(s.Fragment,{children:[s.jsx(ps,{className:"w-4 h-4 mr-2"}),"Cancel"]}):s.jsxs(s.Fragment,{children:[s.jsx(HN,{className:"w-4 h-4 mr-2"}),"Select"]})})]})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsxs(de,{onClick:()=>t.navigate("NewPatientChart"),className:"bg-sky-600 hover:bg-sky-700 text-white shadow-sm",children:[s.jsx(Da,{className:"w-4 h-4 mr-2"}),"New Chart"]}),s.jsxs(de,{onClick:()=>M(!0),variant:"outline",className:"border-violet-200 text-violet-700 hover:bg-violet-50 shadow-sm",children:[s.jsx(Ls,{className:"w-4 h-4 mr-2"}),"Scan"]}),s.jsxs(de,{onClick:()=>ee("Import PDF"),variant:"outline",className:"border-amber-200 text-amber-700 hover:bg-amber-50 shadow-sm",children:[s.jsx(xw,{className:"w-4 h-4 mr-2"}),"Import PDF"]}),s.jsxs(de,{onClick:()=>Pe.info("Bulk review feature coming soon"),variant:"outline",className:"border-slate-200 text-slate-700 hover:bg-slate-50 shadow-sm",children:[s.jsx(V9,{className:"w-4 h-4 mr-2"}),"Bulk Review"]})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx("span",{className:"text-sm text-slate-600 mr-1",children:"Quick filters:"}),["Active","Needs Reverification","Verified Ready","Archived"].map(V=>s.jsx("button",{onClick:()=>q(V),className:`px-3 py-1.5 rounded-lg text-xs font-medium transition-all border ${S.includes(V)?V==="Needs Reverification"?"bg-red-100 border-red-300 text-red-700":V==="Active"?"bg-sky-100 border-sky-300 text-sky-700":V==="Verified Ready"?"bg-emerald-100 border-emerald-300 text-emerald-700":"bg-slate-100 border-slate-300 text-slate-700":"bg-white border-slate-200 text-slate-600 hover:bg-slate-50"}`,children:V==="Needs Reverification"?"Needs Review":V},V)),S.length>0&&s.jsx("button",{onClick:()=>k([]),className:"text-xs text-sky-600 hover:text-sky-700 font-medium ml-1",children:"Clear all"})]}),j&&s.jsx("div",{className:"bg-gradient-to-br from-[#E0F2FE] to-[#DBEAFE] border-0 rounded-2xl p-4 shadow-sm",children:s.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("button",{onClick:G,className:"flex items-center gap-2 text-[#0966CC] hover:text-[#0C4A6E] transition-colors",children:[y.size===se.length?s.jsx(HN,{className:"w-5 h-5"}):s.jsx(eO,{className:"w-5 h-5"}),s.jsx("span",{className:"text-sm",children:y.size===se.length?"Deselect All":"Select All"})]}),y.size>0&&s.jsxs("span",{className:"text-sm text-[#0966CC]",children:[y.size," of ",se.length," selected"]})]})})}),se.length===0&&s.jsxs("div",{className:"bg-white rounded-3xl border border-dashed border-slate-200 p-12 text-center",children:[s.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center mx-auto mb-4",children:s.jsx(Zi,{className:"w-8 h-8 text-slate-300"})}),s.jsx("h3",{className:"text-xl text-slate-900 mb-2",children:"No charts match your filters"}),s.jsx("p",{className:"text-sm text-slate-600 mb-6 max-w-md mx-auto leading-relaxed",children:"Try adjusting status or date range"}),s.jsxs(de,{onClick:()=>{u(""),p("all"),k([])},className:"bg-sky-600 hover:bg-sky-700 text-white shadow-lg shadow-sky-600/20",children:[s.jsx(ps,{className:"w-4 h-4 mr-2"}),"Clear all filters"]})]}),se.length>0&&s.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[s.jsxs("div",{className:"hidden md:grid md:grid-cols-12 gap-4 px-6 py-3 bg-slate-50 border-b border-slate-200 text-xs font-medium text-slate-600",children:[j&&s.jsx("div",{className:"col-span-1 flex items-center",children:s.jsx(bo,{checked:y.size===se.length&&se.length>0,onCheckedChange:G})}),s.jsx("div",{className:`${j?"col-span-3":"col-span-4"}`,children:"Patient"}),s.jsx("div",{className:"col-span-2",children:s.jsxs("button",{onClick:()=>re("status"),className:"flex items-center gap-1 hover:text-slate-900 transition-colors",children:["Status",P==="status"?$==="asc"?s.jsx(zx,{className:"w-3.5 h-3.5 text-sky-600"}):s.jsx($x,{className:"w-3.5 h-3.5 text-sky-600"}):s.jsx(Vx,{className:"w-3.5 h-3.5 opacity-30"})]})}),s.jsx("div",{className:"col-span-2",children:"Type"}),s.jsx("div",{className:"col-span-1",children:"Meds"}),s.jsx("div",{className:"col-span-2",children:s.jsxs("button",{onClick:()=>re("created"),className:"flex items-center gap-1 hover:text-slate-900 transition-colors",children:["Created",P==="created"?$==="asc"?s.jsx(zx,{className:"w-3.5 h-3.5 text-sky-600"}):s.jsx($x,{className:"w-3.5 h-3.5 text-sky-600"}):s.jsx(Vx,{className:"w-3.5 h-3.5 opacity-30"})]})})]}),s.jsx("div",{className:"divide-y divide-slate-100",children:se.map(({patient:V,chart:W,chartKey:Q},T)=>{const ie=We=>{switch(We){case"Needs Reverification":return s.jsx(Kn,{className:"w-3.5 h-3.5"});case"Active":return s.jsx(hr,{className:"w-3.5 h-3.5"});case"Verified Ready":return s.jsx(kr,{className:"w-3.5 h-3.5"});case"Delivered (Locked)":return s.jsx(fs,{className:"w-3.5 h-3.5"});case"Archived":return s.jsx(Wi,{className:"w-3.5 h-3.5"});default:return null}},ge=We=>{switch(We){case"Needs Reverification":return"bg-red-100 text-red-700 border-red-200";case"Active":return"bg-sky-100 text-sky-700 border-sky-200";case"Verified Ready":return"bg-emerald-100 text-emerald-700 border-emerald-200";case"Delivered (Locked)":return"bg-purple-100 text-purple-700 border-purple-200";case"Archived":return"bg-slate-100 text-slate-600 border-slate-200";default:return""}},we=We=>{switch(We){case"Needs Reverification":return"Needs Review";case"Verified Ready":return"Verified";case"Delivered (Locked)":return"Locked";default:return We}},Se=We=>{switch(We){case"Needs Reverification":return"Chart awaiting review before medication verification";case"Active":return"Currently in progress";case"Verified Ready":return"All medications verified and ready for delivery";case"Delivered (Locked)":return"Chart has been finalized and locked";case"Archived":return"Chart has been archived";default:return We}},Ue=V.name.split(" ").map(We=>We[0]).join("").toUpperCase().slice(0,2);return s.jsxs("div",{className:`group cursor-pointer ${T%2===1?"bg-slate-50/50":"bg-white"} ${W.status==="Needs Reverification"?"border-l-4 border-l-red-400":""}`,onClick:()=>{j?ue(Q):z(V.id,W.id)},children:[s.jsxs("div",{className:"hidden md:grid md:grid-cols-12 gap-4 px-6 py-4 items-center hover:bg-slate-50 active:scale-[0.998] transition-all",children:[j&&s.jsx("div",{className:"col-span-1 flex items-center",children:s.jsx(bo,{checked:y.has(Q),onCheckedChange:()=>ue(Q),onClick:We=>We.stopPropagation()})}),s.jsxs("div",{className:`${j?"col-span-3":"col-span-4"} flex items-center gap-3 min-w-0`,children:[s.jsx(Xs,{className:"w-10 h-10 border-2 border-slate-200 flex-shrink-0",children:s.jsx(Zs,{className:`text-sm ${W.status==="Needs Reverification"?"bg-gradient-to-br from-red-500 to-red-600 text-white":"bg-gradient-to-br from-sky-500 to-sky-600 text-white"}`,children:Ue})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("h3",{className:"text-sm font-medium text-slate-900 truncate",children:V.name}),s.jsxs("p",{className:"text-xs text-slate-500 mt-0.5",children:["DOB: ",new Date(V.dob).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]})]}),s.jsx("div",{className:"col-span-2",children:s.jsx(hn,{children:s.jsxs(fn,{children:[s.jsx(mn,{asChild:!0,children:s.jsx("span",{className:"inline-flex",children:s.jsxs(gt,{className:`${ge(W.status)} flex items-center gap-1.5 px-2.5 py-1 text-xs font-medium border`,children:[ie(W.status),s.jsx("span",{className:"whitespace-nowrap",children:we(W.status)})]})})}),s.jsx(pn,{side:"right",className:"max-w-xs",children:s.jsx("p",{children:Se(W.status)})})]})})}),s.jsx("div",{className:"col-span-2 text-sm text-slate-700",children:W.type}),s.jsx("div",{className:"col-span-1 text-sm text-slate-700",children:W.medicationCount}),s.jsxs("div",{className:"col-span-2 flex items-center justify-between",children:[s.jsx("div",{className:"text-sm text-slate-700",children:new Date(W.createdDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),!j&&s.jsx(Xr,{className:"w-5 h-5 text-slate-300 group-hover:text-sky-600 group-hover:translate-x-0.5 transition-all"})]})]}),s.jsx("div",{className:"md:hidden p-4 hover:bg-slate-50 transition-colors",children:s.jsxs("div",{className:"flex items-start gap-3",children:[j&&s.jsx("div",{className:"pt-1",children:s.jsx(bo,{checked:y.has(Q),onCheckedChange:()=>ue(Q),onClick:We=>We.stopPropagation()})}),s.jsx(Xs,{className:"w-10 h-10 border-2 border-slate-200 flex-shrink-0",children:s.jsx(Zs,{className:`text-sm ${W.status==="Needs Reverification"?"bg-gradient-to-br from-red-500 to-red-600 text-white":"bg-gradient-to-br from-sky-500 to-sky-600 text-white"}`,children:Ue})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-slate-900",children:V.name}),s.jsxs("p",{className:"text-xs text-slate-500 mt-0.5",children:["DOB: ",new Date(V.dob).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]}),s.jsxs(gt,{className:`${ge(W.status)} flex items-center gap-1.5 px-2.5 py-1 text-xs font-medium border flex-shrink-0`,children:[ie(W.status),s.jsx("span",{className:"whitespace-nowrap",children:we(W.status)})]})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs text-slate-500",children:[s.jsx("span",{children:W.type}),s.jsx("span",{children:""}),s.jsxs("span",{children:[W.medicationCount," med",W.medicationCount!==1?"s":""]}),s.jsx("span",{children:""}),s.jsx("span",{children:new Date(W.createdDate).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]})]}),!j&&s.jsx(Xr,{className:"w-5 h-5 text-slate-300 group-hover:text-sky-600 flex-shrink-0 mt-1"})]})})]},Q)})})]})]})}),s.jsx(Jd,{open:K,onOpenChange:M,children:s.jsxs(Qd,{side:"bottom",className:"h-[80vh] sm:h-auto",children:[s.jsxs(eu,{children:[s.jsx(tu,{className:"text-xl",children:"Scan Medication Information"}),s.jsx(Df,{children:"Choose how you want to capture medication data"})]}),s.jsxs("div",{className:"mt-6 space-y-3",children:[s.jsx("button",{onClick:()=>ee("Bottle Scan"),className:"w-full bg-white rounded-xl border-2 border-slate-200 p-4 hover:border-emerald-400 hover:shadow-md transition-all text-left group",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-14 h-14 rounded-xl bg-emerald-100 flex items-center justify-center flex-shrink-0 group-hover:bg-emerald-200 transition-colors",children:s.jsx(Yx,{className:"w-6 h-6 text-emerald-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-slate-900 font-medium mb-1",children:"Scan Barcode"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Quick medication lookup via barcode"})]})]})}),s.jsx("button",{onClick:()=>ee("Bottle OCR"),className:"w-full bg-white rounded-xl border-2 border-slate-200 p-4 hover:border-violet-400 hover:shadow-md transition-all text-left group",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-14 h-14 rounded-xl bg-violet-100 flex items-center justify-center flex-shrink-0 group-hover:bg-violet-200 transition-colors",children:s.jsx(Ls,{className:"w-6 h-6 text-violet-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-slate-900 font-medium mb-1",children:"Scan Bottle (OCR)"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Capture text from medication bottle labels"})]})]})}),s.jsx("button",{onClick:()=>ee("Import PDF"),className:"w-full bg-white rounded-xl border-2 border-slate-200 p-4 hover:border-amber-400 hover:shadow-md transition-all text-left group",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-14 h-14 rounded-xl bg-amber-100 flex items-center justify-center flex-shrink-0 group-hover:bg-amber-200 transition-colors",children:s.jsx(Ei,{className:"w-6 h-6 text-amber-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-slate-900 font-medium mb-1",children:"Import PDF/Image"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Upload discharge summaries or med lists"})]})]})})]})]})})]})}function uu({className:t,...e}){return s.jsx("textarea",{"data-slot":"textarea",className:xr("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...e})}const VY=["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"],zY=t=>{const r=t.replace(/\D/g,"").match(/^(\d{0,3})(\d{0,3})(\d{0,4})$/);if(r){const n=[r[1],r[2],r[3]].filter(Boolean);return n.length===0?"":n.length===1?n[0]:n.length===2?`(${n[0]}) ${n[1]}`:`(${n[0]}) ${n[1]}-${n[2]}`}return t};function qY({navigation:t,route:e}){const r=e?.params?.prefillData,n=e?.params?.scannedMedications,a=e?.params?.scanType,[i,o]=N.useState(r?.firstName||""),[l,c]=N.useState(r?.lastName||""),[u,h]=N.useState(r?.dateOfBirth||""),[m,x]=N.useState(r?.medicalRecordNumber||""),[p,y]=N.useState(""),[w,j]=N.useState(""),[C,S]=N.useState(""),[k,P]=N.useState(""),[O,$]=N.useState(""),[R,B]=N.useState(""),[U,K]=N.useState(""),[M,q]=N.useState({}),[re,ee]=N.useState({}),[H,se]=N.useState(!!r),ue=N.useRef(null),{user:G}=Ka();N.useEffect(()=>{r||ue.current?.focus()},[r]);const J=W=>{y(zY(W))},oe=()=>{const W={};return i.trim()||(W.firstName="First name is required"),l.trim()||(W.lastName="Last name is required"),u||(W.dob="Date of birth is required"),w.trim()||(W.address1="Address is required"),q(W),Object.keys(W).length===0},Y=()=>{oe()&&t.navigate("NewPatientChartMedications",{patientId:"new-patient-id",chartId:"new-chart-id",patient:{first_name:i,last_name:l,dob:u,phone:p,address1:w,address2:C,city:k,state:O,zip_code:R,notes:U},scannedMedications:n,scanType:a})},L=()=>{console.log("Saving as draft..."),t.goBack()},z=W=>{ee({...re,[W]:!0})},V=i&&l&&u&&w;return s.jsxs("div",{className:"h-screen flex flex-col bg-[#f8fafc]",children:[s.jsx("div",{className:"bg-gradient-to-r from-[#0966CC] to-[#0C4A6E] p-5 shadow-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("button",{onClick:()=>t.goBack(),className:"w-10 h-10 rounded-xl bg-white/15 hover:bg-white/25 flex items-center justify-center transition-colors","aria-label":"Back to dashboard",children:s.jsx(ln,{className:"w-5 h-5 text-white"})}),s.jsx("h1",{className:"text-lg text-white",children:"New Patient Chart"}),s.jsx("div",{className:"w-10"})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto pb-24",children:s.jsxs("div",{className:"max-w-2xl mx-auto p-6 space-y-6",children:[s.jsx("div",{className:"bg-white rounded-2xl border border-sky-200 p-5 shadow-sm",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-sky-100 flex items-center justify-center flex-shrink-0",children:s.jsx(Bn,{className:"w-5 h-5 text-sky-600"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-slate-900 mb-1",children:"Patient Information"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Creating new chart  required details first"})]})]})}),H&&a&&s.jsx("div",{className:"bg-gradient-to-r from-emerald-50 to-emerald-100 rounded-2xl shadow-sm border border-emerald-200 p-4",children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald-600 flex items-center justify-center flex-shrink-0",children:s.jsx(kl,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-[15px] text-emerald-900 font-medium",children:[a," Completed"]}),s.jsx("p",{className:"text-sm text-emerald-700",children:"Patient info captured. Please verify and complete remaining fields."})]})]}),s.jsx("button",{onClick:()=>se(!1),className:"w-8 h-8 rounded-lg hover:bg-emerald-200 flex items-center justify-center transition-colors flex-shrink-0","aria-label":"Dismiss banner",children:s.jsx(ln,{className:"w-4 h-4 text-emerald-700 rotate-45"})})]})}),s.jsx("div",{className:"flex items-center gap-2 px-2",children:s.jsxs("span",{className:"text-sm text-slate-600",children:[s.jsx("span",{className:"text-red-500",children:"*"})," Required fields"]})}),s.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[s.jsxs("div",{className:"p-6 space-y-5",children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-700 uppercase tracking-wide",children:"Basic Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[s.jsxs("div",{children:[s.jsxs(Fe,{htmlFor:"firstName",className:"text-slate-700",children:["First Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(Ze,{ref:ue,id:"firstName",value:i,onChange:W=>o(W.target.value),onBlur:()=>z("firstName"),placeholder:"Enter first name",className:`mt-2 h-12 rounded-xl border-2 ${re.firstName&&M.firstName?"border-red-300 bg-red-50 focus:ring-red-200":"border-slate-200 bg-slate-50 focus:ring-sky-200"}`}),re.firstName&&M.firstName&&s.jsxs("p",{className:"text-sm text-red-600 mt-1.5 flex items-center gap-1",children:[s.jsx("span",{className:"w-1 h-1 rounded-full bg-red-600"}),M.firstName]})]}),s.jsxs("div",{children:[s.jsxs(Fe,{htmlFor:"lastName",className:"text-slate-700",children:["Last Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(Ze,{id:"lastName",value:l,onChange:W=>c(W.target.value),onBlur:()=>z("lastName"),placeholder:"Enter last name",className:`mt-2 h-12 rounded-xl border-2 ${re.lastName&&M.lastName?"border-red-300 bg-red-50 focus:ring-red-200":"border-slate-200 bg-slate-50 focus:ring-sky-200"}`}),re.lastName&&M.lastName&&s.jsxs("p",{className:"text-sm text-red-600 mt-1.5 flex items-center gap-1",children:[s.jsx("span",{className:"w-1 h-1 rounded-full bg-red-600"}),M.lastName]})]})]}),s.jsxs("div",{children:[s.jsxs(Fe,{htmlFor:"dob",className:"text-slate-700",children:["Date of Birth ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative mt-2",children:[s.jsx(Zo,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400 pointer-events-none"}),s.jsx(Ze,{id:"dob",type:"date",value:u,onChange:W=>h(W.target.value),onBlur:()=>z("dob"),className:`pl-12 h-12 rounded-xl border-2 ${re.dob&&M.dob?"border-red-300 bg-red-50 focus:ring-red-200":"border-slate-200 bg-slate-50 focus:ring-sky-200"}`})]}),re.dob&&M.dob&&s.jsxs("p",{className:"text-sm text-red-600 mt-1.5 flex items-center gap-1",children:[s.jsx("span",{className:"w-1 h-1 rounded-full bg-red-600"}),M.dob]})]}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"medicalRecordNumber",className:"text-slate-700",children:"Medical Record Number (MRN)"}),s.jsxs("div",{className:"relative mt-2",children:[s.jsx(hr,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400 pointer-events-none"}),s.jsx(Ze,{id:"medicalRecordNumber",value:m,onChange:W=>x(W.target.value),placeholder:"Enter MRN (optional)",className:"pl-12 h-12 rounded-xl border-2 border-slate-200 bg-slate-50 focus:ring-sky-200"})]}),s.jsx("p",{className:"text-xs text-slate-500 mt-1.5",children:"Unique patient identifier from medical records"})]}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"phone",className:"text-slate-700",children:"Phone"}),s.jsxs("div",{className:"relative mt-2",children:[s.jsx(Yi,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400 pointer-events-none"}),s.jsx(Ze,{id:"phone",type:"tel",value:p,onChange:W=>J(W.target.value),placeholder:"(555) 123-4567",maxLength:14,className:"pl-12 h-12 rounded-xl border-2 border-slate-200 bg-slate-50 focus:ring-sky-200"})]}),s.jsx("p",{className:"text-xs text-slate-500 mt-1.5",children:"Format: (555) 123-4567"})]})]}),s.jsxs("div",{className:"pt-6 pb-6 px-6 border-t border-slate-200 space-y-5",children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-700 uppercase tracking-wide",children:"Address"}),s.jsxs("div",{children:[s.jsxs(Fe,{htmlFor:"address1",className:"text-slate-700",children:["Street Address ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative mt-2",children:[s.jsx(Jo,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400 pointer-events-none"}),s.jsx(Ze,{id:"address1",value:w,onChange:W=>j(W.target.value),onBlur:()=>z("address1"),placeholder:"123 Main Street",className:`pl-12 h-12 rounded-xl border-2 ${re.address1&&M.address1?"border-red-300 bg-red-50 focus:ring-red-200":"border-slate-200 bg-slate-50 focus:ring-sky-200"}`})]}),re.address1&&M.address1&&s.jsxs("p",{className:"text-sm text-red-600 mt-1.5 flex items-center gap-1",children:[s.jsx("span",{className:"w-1 h-1 rounded-full bg-red-600"}),M.address1]})]}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"address2",className:"text-slate-700",children:"Address Line 2"}),s.jsx(Ze,{id:"address2",value:C,onChange:W=>S(W.target.value),placeholder:"Apartment, suite, etc. (optional)",className:"mt-2 h-12 rounded-xl border-2 border-slate-200 bg-slate-50 focus:ring-sky-200"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-5",children:[s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"city",className:"text-slate-700",children:"City"}),s.jsx(Ze,{id:"city",value:k,onChange:W=>P(W.target.value),placeholder:"City",className:"mt-2 h-12 rounded-xl border-2 border-slate-200 bg-slate-50 focus:ring-sky-200"})]}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"state",className:"text-slate-700",children:"State"}),s.jsxs(oa,{value:O,onValueChange:$,children:[s.jsx(ca,{className:"mt-2 h-12 rounded-xl border-2 border-slate-200 bg-slate-50 focus:ring-sky-200",children:s.jsx(la,{placeholder:"Select state"})}),s.jsx(da,{className:"max-h-[300px]",children:VY.map(W=>s.jsx(Bt,{value:W,children:W},W))})]})]}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"zipCode",className:"text-slate-700",children:"ZIP Code"}),s.jsx(Ze,{id:"zipCode",value:R,onChange:W=>B(W.target.value.replace(/\D/g,"").slice(0,5)),placeholder:"12345",maxLength:5,className:"mt-2 h-12 rounded-xl border-2 border-slate-200 bg-slate-50 focus:ring-sky-200"})]})]})]}),s.jsxs("div",{className:"pt-6 pb-6 px-6 border-t border-slate-200 space-y-5",children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-700 uppercase tracking-wide",children:"Additional Notes"}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"notes",className:"text-slate-700",children:"Clinical Notes"}),s.jsx(uu,{id:"notes",value:U,onChange:W=>K(W.target.value),placeholder:"Optional notes about this patient (e.g., special considerations, allergies, communication preferences)...",className:"mt-2 min-h-[120px] rounded-xl border-2 border-slate-200 bg-slate-50 focus:ring-sky-200 resize-none"}),s.jsx("p",{className:"text-xs text-slate-500 mt-1.5",children:"Optional field for additional context"})]})]})]})]})}),s.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-slate-200 shadow-lg z-50",children:s.jsxs("div",{className:"max-w-2xl mx-auto px-6 py-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[s.jsxs(de,{onClick:L,variant:"outline",className:"flex-1 h-12 rounded-xl border-2 border-slate-300 hover:bg-slate-50 text-slate-700 font-medium",children:[s.jsx(Q9,{className:"w-4 h-4 mr-2"}),"Save as Draft"]}),s.jsxs(de,{onClick:Y,disabled:!V,className:"flex-1 h-12 rounded-xl bg-sky-600 hover:bg-sky-700 text-white font-medium disabled:opacity-50 disabled:cursor-not-allowed shadow-sm",children:[s.jsx(gw,{className:"w-4 h-4 mr-2"}),"Save & Continue"]})]}),!V&&s.jsx("p",{className:"text-xs text-center text-slate-500 mt-2",children:"Complete required fields to continue"})]})})]})}const HY=["Oral","Topical","Inhalation","Injection","IV","Sublingual","Rectal","Transdermal"],WY=["Once daily","Twice daily","Three times daily","Four times daily","As needed","Every 4 hours","Every 6 hours","Every 8 hours","Every 12 hours","Weekly","Monthly"];function GY({navigation:t,route:e}){const r=e?.params?.scannedMedications||[],n=e?.params?.scanType,[a,i]=N.useState(r.map((V,W)=>({id:`scanned-${W}`,...V}))),[o,l]=N.useState(!1),[c,u]=N.useState(null),[h,m]=N.useState(!1),[x,p]=N.useState(r.length>0),[y,w]=N.useState(!1),[j,C]=N.useState(!1),[S,k]=N.useState(""),[P,O]=N.useState(""),[$,R]=N.useState(""),[B,U]=N.useState(""),[K,M]=N.useState([]),q=V=>{V.target.files&&M(Array.from(V.target.files))},re=()=>{k(""),O(""),R(""),U(""),l(!1),u(null),m(!1)},ee=V=>{m(!1),V==="Barcode"?w(!0):V==="Bottle OCR"?C(!0):alert(`${V} capture will be implemented.`)},H=()=>{m(!1),l(!0)},se=V=>{const W=V.map((Q,T)=>({id:`barcode-${Date.now()}-${T}`,name:Q.name,dosage:Q.dosage,frequency:Q.frequency,route:Q.route}));i([...a,...W]),w(!1)},ue=V=>{const W=V.map((Q,T)=>({id:`ocr-${Date.now()}-${T}`,name:Q.name||"",dosage:Q.dosage||"",frequency:Q.frequency||"",route:Q.route||""}));i([...a,...W]),C(!1)},G=()=>{if(S&&P&&$&&B){const V={id:Date.now().toString(),name:S,dosage:P,frequency:$,route:B};i([...a,V]),re()}},J=()=>{c&&S&&P&&$&&B&&(i(a.map(V=>V.id===c?{...V,name:S,dosage:P,frequency:$,route:B}:V)),re())},oe=V=>{k(V.name),O(V.dosage),R(V.frequency),U(V.route),u(V.id),l(!0)},Y=V=>{i(a.filter(W=>W.id!==V))},L=()=>{t.navigate("NewPatientChartReview",{...e.params,medications:a,attachments:K})},z=()=>{t.navigate("NewPatientChartReview",e.params)};return s.jsxs("div",{className:"h-screen flex flex-col bg-[#f8fafc]",children:[s.jsx("div",{className:"bg-gradient-to-r from-[#0966CC] to-[#0C4A6E] p-5 shadow-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("button",{onClick:()=>t.goBack(),className:"w-10 h-10 rounded-xl bg-white/15 hover:bg-white/25 flex items-center justify-center transition-colors","aria-label":"Back",children:s.jsx(ln,{className:"w-5 h-5 text-white"})}),s.jsx("h1",{className:"text-lg text-white",children:"New Patient Chart"}),s.jsx("div",{className:"w-10"})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto pb-24",children:s.jsxs("div",{className:"max-w-2xl mx-auto p-6 space-y-6",children:[s.jsx("div",{className:"bg-white rounded-2xl border border-sky-200 p-5 shadow-sm",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-sky-100 flex items-center justify-center flex-shrink-0",children:s.jsx(zf,{className:"w-5 h-5 text-sky-600"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-slate-900 mb-1",children:"Current Medications"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Add patient's current medications (optional  can be completed later)"})]})]})}),x&&n&&a.length>0&&s.jsx("div",{className:"bg-gradient-to-r from-emerald-50 to-emerald-100 rounded-2xl shadow-sm border border-emerald-200 p-4",children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald-600 flex items-center justify-center flex-shrink-0",children:s.jsx(kl,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-[15px] text-emerald-900 font-medium",children:[a.length," Medication",a.length>1?"s":""," Captured via ",n]}),s.jsx("p",{className:"text-sm text-emerald-700",children:"Review and verify scanned medications, or add more as needed."})]})]}),s.jsx("button",{onClick:()=>p(!1),className:"w-8 h-8 rounded-lg hover:bg-emerald-200 flex items-center justify-center transition-colors flex-shrink-0","aria-label":"Dismiss banner",children:s.jsx(ps,{className:"w-4 h-4 text-emerald-700"})})]})}),a.length>0&&s.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[s.jsx("div",{className:"p-5 border-b border-slate-200",children:s.jsxs("h3",{className:"text-sm font-semibold text-slate-700 uppercase tracking-wide",children:["Added Medications (",a.length,")"]})}),s.jsx("div",{className:"divide-y divide-slate-200",children:a.map(V=>s.jsx("div",{className:"p-5 hover:bg-slate-50 transition-colors",children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(zf,{className:"w-4 h-4 text-sky-600 flex-shrink-0"}),s.jsx("h4",{className:"text-slate-900 font-medium",children:V.name})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-500",children:"Dosage:"}),s.jsx("p",{className:"text-slate-700 font-medium",children:V.dosage})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-500",children:"Frequency:"}),s.jsx("p",{className:"text-slate-700 font-medium",children:V.frequency})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-500",children:"Route:"}),s.jsx("p",{className:"text-slate-700 font-medium",children:V.route})]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>oe(V),className:"w-9 h-9 rounded-lg bg-slate-100 hover:bg-slate-200 flex items-center justify-center transition-colors",children:s.jsx(DD,{className:"w-4 h-4 text-slate-600"})}),s.jsx("button",{onClick:()=>Y(V.id),className:"w-9 h-9 rounded-lg bg-red-50 hover:bg-red-100 flex items-center justify-center transition-colors",children:s.jsx(iu,{className:"w-4 h-4 text-red-600"})})]})]})},V.id))})]}),s.jsxs("div",{className:"mt-8 bg-white rounded-2xl shadow-sm p-6 border border-slate-200",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-slate-100 flex items-center justify-center",children:s.jsx(F0,{className:"w-5 h-5 text-slate-600"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-sm font-semibold text-slate-900",children:"Attachments"}),s.jsx("p",{className:"text-xs text-slate-500",children:"Optional documents to upload with this chart."})]})]})}),s.jsxs("label",{className:"mt-3 ml-14 bg-[#0966CC] hover:bg-[#0C4A6E] text-white px-4 py-2 rounded-xl cursor-pointer inline-flex items-center",children:[s.jsx(Ei,{className:"w-4 h-4 mr-2"}),"Choose files",s.jsx("input",{type:"file",multiple:!0,className:"hidden",onChange:q})]}),K.length>0&&s.jsx("ul",{className:"mt-4 space-y-2 text-xs text-slate-700",children:K.map((V,W)=>s.jsxs("li",{className:"flex items-center justify-between bg-slate-50 rounded-lg px-3 py-2",children:[s.jsx("span",{className:"truncate max-w-xs",children:V.name}),s.jsxs("span",{className:"text-slate-400 text-[11px]",children:[Math.round(V.size/1024)," KB"]})]},W))})]}),h&&s.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-700 uppercase tracking-wide",children:"Choose Capture Method"}),s.jsx("button",{onClick:()=>m(!1),className:"text-slate-400 hover:text-slate-600",children:""})]}),s.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Select how you want to add medication information"}),s.jsx("button",{onClick:H,className:"w-full bg-white rounded-xl border-2 border-slate-200 p-4 hover:border-sky-400 hover:shadow-md transition-all text-left group",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-14 h-14 rounded-xl bg-sky-100 flex items-center justify-center flex-shrink-0 group-hover:bg-sky-200 transition-colors",children:s.jsx(Da,{className:"w-6 h-6 text-sky-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-slate-900 font-medium mb-1",children:"Manual Entry"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Type medication details manually"})]})]})}),s.jsx("button",{onClick:()=>ee("Barcode"),className:"w-full bg-white rounded-xl border-2 border-slate-200 p-4 hover:border-emerald-400 hover:shadow-md transition-all text-left group",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-14 h-14 rounded-xl bg-emerald-100 flex items-center justify-center flex-shrink-0 group-hover:bg-emerald-200 transition-colors",children:s.jsx(i6,{className:"w-6 h-6 text-emerald-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-slate-900 font-medium mb-1",children:"Scan Barcode"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Scan medication barcode for quick lookup"})]})]})}),s.jsx("button",{onClick:()=>ee("Bottle OCR"),className:"w-full bg-white rounded-xl border-2 border-slate-200 p-4 hover:border-violet-400 hover:shadow-md transition-all text-left group",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-14 h-14 rounded-xl bg-violet-100 flex items-center justify-center flex-shrink-0 group-hover:bg-violet-200 transition-colors",children:s.jsx(Ls,{className:"w-6 h-6 text-violet-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-slate-900 font-medium mb-1",children:"Scan Bottle (OCR)"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Capture text from medication bottle labels"})]})]})}),s.jsx("button",{onClick:()=>ee("Import PDF"),className:"w-full bg-white rounded-xl border-2 border-slate-200 p-4 hover:border-amber-400 hover:shadow-md transition-all text-left group",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-14 h-14 rounded-xl bg-amber-100 flex items-center justify-center flex-shrink-0 group-hover:bg-amber-200 transition-colors",children:s.jsx(Ei,{className:"w-6 h-6 text-amber-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-slate-900 font-medium mb-1",children:"Import PDF/Image"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Upload existing PDF or image files"})]})]})})]})}),o?s.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:s.jsxs("div",{className:"p-6 space-y-5",children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-700 uppercase tracking-wide",children:c?"Edit Medication":"Add Medication"}),s.jsxs("div",{children:[s.jsxs(Fe,{htmlFor:"medName",className:"text-slate-700",children:["Medication Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(Ze,{id:"medName",value:S,onChange:V=>k(V.target.value),placeholder:"e.g., Lisinopril",className:"mt-2 h-12 rounded-xl border-2 border-slate-200 bg-slate-50 focus:ring-sky-200"})]}),s.jsxs("div",{children:[s.jsxs(Fe,{htmlFor:"dosage",className:"text-slate-700",children:["Dosage ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(Ze,{id:"dosage",value:P,onChange:V=>O(V.target.value),placeholder:"e.g., 10mg",className:"mt-2 h-12 rounded-xl border-2 border-slate-200 bg-slate-50 focus:ring-sky-200"})]}),s.jsxs("div",{children:[s.jsxs(Fe,{htmlFor:"frequency",className:"text-slate-700",children:["Frequency ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs(oa,{value:$,onValueChange:R,children:[s.jsx(ca,{className:"mt-2 h-12 rounded-xl border-2 border-slate-200 bg-slate-50 focus:ring-sky-200",children:s.jsx(la,{placeholder:"Select frequency"})}),s.jsx(da,{className:"max-h-[300px]",children:WY.map(V=>s.jsx(Bt,{value:V,children:V},V))})]})]}),s.jsxs("div",{children:[s.jsxs(Fe,{htmlFor:"medRoute",className:"text-slate-700",children:["Route ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs(oa,{value:B,onValueChange:U,children:[s.jsx(ca,{className:"mt-2 h-12 rounded-xl border-2 border-slate-200 bg-slate-50 focus:ring-sky-200",children:s.jsx(la,{placeholder:"Select route"})}),s.jsx(da,{children:HY.map(V=>s.jsx(Bt,{value:V,children:V},V))})]})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx(de,{onClick:re,variant:"outline",className:"flex-1 h-12 rounded-xl border-2 border-slate-300",children:"Cancel"}),s.jsxs(de,{onClick:c?J:G,disabled:!S||!P||!$||!B,className:"flex-1 h-12 rounded-xl bg-sky-600 hover:bg-sky-700 text-white disabled:opacity-50",children:[c?"Update":"Add"," Medication"]})]})]})}):h?null:s.jsx("button",{onClick:()=>m(!0),className:"w-full p-6 bg-white rounded-2xl border-2 border-dashed border-slate-300 hover:border-sky-400 hover:bg-sky-50/50 transition-all group",children:s.jsxs("div",{className:"flex items-center justify-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-slate-100 group-hover:bg-sky-100 flex items-center justify-center transition-colors",children:s.jsx(Da,{className:"w-5 h-5 text-slate-600 group-hover:text-sky-600"})}),s.jsx("span",{className:"text-slate-700 font-medium",children:"Add Medication"})]})}),a.length===0&&!o&&s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-slate-500 text-sm",children:"No medications added yet. You can add them now or skip this step."})})]})}),s.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-slate-200 shadow-lg z-50",children:s.jsx("div",{className:"max-w-2xl mx-auto px-6 py-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[s.jsx(de,{onClick:z,variant:"outline",className:"flex-1 h-12 rounded-xl border-2 border-slate-300 hover:bg-slate-50 text-slate-700 font-medium",children:"Skip for Now"}),s.jsx(de,{onClick:L,className:"flex-1 h-12 rounded-xl bg-sky-600 hover:bg-sky-700 text-white font-medium shadow-sm",children:"Continue to Review"})]})})}),y&&s.jsx(Fb,{onMedicationsScanned:se,onCancel:()=>w(!1)}),j&&s.jsx(Mb,{onMedicationsScanned:ue,onCancel:()=>C(!1),modal:!0})]})}function IE(t){const e="/storage/v1/object/public/chart-documents/",r=t.indexOf(e);return r===-1?null:t.substring(r+e.length)}async function Z1(t){const e=IE(t);if(!e)return console.warn("Could not extract storage path, returning original URL"),t;try{const{data:r,error:n}=await Qe.storage.from("chart-documents").createSignedUrl(e,3600);return n?(console.error("Error creating signed URL:",n),t):r.signedUrl}catch(r){return console.error("Exception creating signed URL:",r),t}}async function Bb(t,e,r,n){const a=t.name.split(".").pop(),i=`${r}/${e}/${crypto.randomUUID()}.${a}`,{data:o,error:l}=await Qe.storage.from("chart-documents").upload(i,t);if(l)throw l;const{data:c}=Qe.storage.from("chart-documents").getPublicUrl(i),u=c.publicUrl,{data:h,error:m}=await Qe.from("documents").insert({chart_id:e,tenant_id:r,file_name:t.name,file_type:t.type,file_url:u,uploaded_by:n,ocr_status:t.type.includes("image")||t.type.includes("pdf")?"pending":null}).select().single();if(m)throw m;return h}async function DE(t){const{data:e,error:r}=await Qe.from("documents").select(`
      *,
      charts!fk_documents_chart (
        id,
        patients!charts_patient_id_fkey (
          id,
          first_name,
          last_name,
          date_of_birth
        )
      )
    `).eq("tenant_id",t).order("created_at",{ascending:!1});if(r)throw console.error("Error fetching documents:",r),r;return(e||[]).map(a=>({...a,chart:a.charts?{id:a.charts.id,patient:a.charts.patients}:void 0}))}async function Ub(t,e){const r=IE(e);r&&await Qe.storage.from("chart-documents").remove([r]);const{error:n}=await Qe.from("documents").delete().eq("id",t);if(n)throw n;return{success:!0}}async function OE(t){const{count:e,error:r}=await Qe.from("documents").select("*",{count:"exact",head:!0}).eq("tenant_id",t);if(r)throw r;const{count:n,error:a}=await Qe.from("documents").select("*",{count:"exact",head:!0}).eq("tenant_id",t).is("chart_id",null);if(a)throw a;const{count:i,error:o}=await Qe.from("documents").select("*",{count:"exact",head:!0}).eq("tenant_id",t).in("ocr_status",["pending","processing"]);if(o)throw o;const{count:l,error:c}=await Qe.from("documents").select("*",{count:"exact",head:!0}).eq("tenant_id",t).eq("ocr_status","failed");if(c)throw c;return{total:e||0,unassigned:n||0,ocrProcessing:i||0,failed:l||0}}const KY=Object.freeze(Object.defineProperty({__proto__:null,deleteDocument:Ub,fetchAllDocuments:DE,getDocumentStats:OE,getSignedDocumentUrl:Z1,uploadDocument:Bb},Symbol.toStringTag,{value:"Module"})),YY=t=>{switch(t){case"Barcode Scan":return"bottle_scan";case"Import PDF":return"pdf_import";case"Bottle OCR":return"image_upload";default:return"empty_chart"}};function XY({navigation:t,route:e}){const{user:r}=Ka(),n=e.params?.scanType,a=e.params?.patient||{first_name:"",last_name:"",dob:"",phone:"",address1:"",address2:"",city:"",state:"",zip_code:"",notes:""},i=e.params?.medications||[],o=e.params?.attachments||[],l=()=>{t.goBack()},c=()=>{t.goBack(),t.goBack()},u=()=>{t.goBack()},h=async()=>{if(!r?.id||!r?.tenant_id){alert("Missing clinician or tenant information. Please sign in again.");return}try{const{data:p,error:y}=await Qe.from("patients").insert({tenant_id:r.tenant_id,first_name:a.first_name,last_name:a.last_name,date_of_birth:a.dob,address_line1:a.address1,address_line2:a.address2||null,city:a.city||null,state:a.state||null,zip_code:a.zip_code||null,phone:a.phone||null,created_by:r.id,assigned_clinician_id:r.id}).select("id").single();if(y||!p){console.error("Error inserting patient:",y),alert("Failed to save patient. Please try again.");return}const w=p.id,j=YY(n),{data:C,error:S}=await Qe.from("charts").insert({tenant_id:r.tenant_id,patient_id:w,status:"active",source:j,created_by:r.id,medication_count:i.length||null}).select("id").single();if(S||!C){console.error("Error inserting chart:",S),alert("Failed to create chart. Please try again.");return}const k=C.id;if(i.length>0){const P=i.map($=>({tenant_id:r.tenant_id,chart_id:k,drug_name:$.name,strength:$.dosage,route:$.route,frequency:$.frequency,prescriber:"Unknown",instructions:null,notes:null,scanned_on:new Date().toISOString(),ocr_confidence:null,verified:!1,changed_after_verify:!1})),{error:O}=await Qe.from("medications").insert(P);if(O)throw O}o&&o.length>0&&await Promise.all(o.map(P=>Bb(P,k,r.tenant_id))),t.navigate("NewPatientChartComplete",{patient:a,patientId:w,chartId:k})}catch(p){console.error("Unexpected error when saving chart:",p),alert("An unexpected error occurred. Please try again.")}},m=p=>p?new Date(p).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Not provided",x=p=>{if(!p)return null;const y=new Date,w=new Date(p);let j=y.getFullYear()-w.getFullYear();const C=y.getMonth()-w.getMonth();return(C<0||C===0&&y.getDate()<w.getDate())&&j--,j};return s.jsxs("div",{className:"h-screen flex flex-col bg-[#f8fafc]",children:[s.jsx("div",{className:"bg-gradient-to-r from-[#0966CC] to-[#0C4A6E] p-5 shadow-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("button",{onClick:l,className:"w-10 h-10 rounded-xl bg-white/15 hover:bg-white/25 flex items-center justify-center transition-colors","aria-label":"Back",children:s.jsx(ln,{className:"w-5 h-5 text-white"})}),s.jsx("h1",{className:"text-lg text-white",children:"New Patient Chart"}),s.jsx("div",{className:"w-10"})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto pb-24",children:s.jsxs("div",{className:"max-w-2xl mx-auto p-6 space-y-6",children:[s.jsx("div",{className:"bg-white rounded-2xl border border-sky-200 p-5 shadow-sm",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-sky-100 flex items-center justify-center flex-shrink-0",children:s.jsx(kl,{className:"w-5 h-5 text-sky-600"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-slate-900 mb-1",children:"Review Patient Chart"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Verify all information before saving to system"})]})]})}),s.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[s.jsxs("div",{className:"p-5 border-b border-slate-200 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-sky-100 flex items-center justify-center",children:s.jsx(Bn,{className:"w-5 h-5 text-sky-600"})}),s.jsx("h3",{className:"text-sm font-semibold text-slate-700 uppercase tracking-wide",children:"Patient Information"})]}),s.jsx("button",{onClick:c,className:"text-sm text-sky-600 hover:text-sky-700 font-medium",children:"Edit"})]}),s.jsxs("div",{className:"p-6 space-y-5",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"text-2xl text-slate-900 font-semibold",children:[a.first_name," ",a.last_name]}),a.dob&&s.jsxs("p",{className:"text-slate-600 mt-1",children:["Age ",x(a.dob),"  DOB: ",m(a.dob)]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5 pt-4 border-t border-slate-200",children:[a.phone&&s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Yi,{className:"w-5 h-5 text-slate-400 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wide mb-1",children:"Phone"}),s.jsx("p",{className:"text-slate-900",children:a.phone})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Jo,{className:"w-5 h-5 text-slate-400 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wide mb-1",children:"Address"}),s.jsx("p",{className:"text-slate-900",children:a.address1}),a.address2&&s.jsx("p",{className:"text-slate-900",children:a.address2}),s.jsxs("p",{className:"text-slate-900",children:[a.city,", ",a.state," ",a.zip_code]})]})]})]}),a.notes&&s.jsxs("div",{className:"pt-4 border-t border-slate-200",children:[s.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wide mb-2",children:"Clinical Notes"}),s.jsx("p",{className:"text-slate-700 bg-slate-50 rounded-lg p-4",children:a.notes})]})]})]}),s.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[s.jsxs("div",{className:"p-5 border-b border-slate-200 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-sky-100 flex items-center justify-center",children:s.jsx(zf,{className:"w-5 h-5 text-sky-600"})}),s.jsx("h3",{className:"text-sm font-semibold text-slate-700 uppercase tracking-wide",children:"Current Medications"})]}),s.jsx("button",{onClick:u,className:"text-sm text-sky-600 hover:text-sky-700 font-medium",children:"Edit"})]}),i.length>0?s.jsx("div",{className:"divide-y divide-slate-200",children:i.map((p,y)=>s.jsx("div",{className:"p-5 hover:bg-slate-50 transition-colors",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-sky-50 flex items-center justify-center flex-shrink-0",children:s.jsx("span",{className:"text-sm font-semibold text-sky-600",children:y+1})}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx("h4",{className:"text-slate-900 font-medium",children:p.name}),s.jsxs("div",{className:"grid grid-cols-3 gap-3 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-500",children:"Dosage:"}),s.jsx("p",{className:"text-slate-700 font-medium",children:p.dosage})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-500",children:"Frequency:"}),s.jsx("p",{className:"text-slate-700 font-medium",children:p.frequency})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-500",children:"Route:"}),s.jsx("p",{className:"text-slate-700 font-medium",children:p.route})]})]})]})]})},p.id))}):s.jsxs("div",{className:"p-8 text-center",children:[s.jsx("p",{className:"text-slate-500",children:"No medications added"}),s.jsx("button",{onClick:u,className:"text-sm text-sky-600 hover:text-sky-700 font-medium mt-2",children:"Add medications"})]})]}),s.jsx("div",{className:"bg-sky-50 border border-sky-200 rounded-2xl p-5",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-sky-600 flex items-center justify-center flex-shrink-0",children:s.jsx("span",{className:"text-white text-xs font-bold",children:"!"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-slate-900 font-medium mb-1",children:"Ready to Save?"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Once saved, this patient chart will be created in the system. You can edit details later from the patient list."})]})]})})]})}),s.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-slate-200 shadow-lg z-50",children:s.jsx("div",{className:"max-w-2xl mx-auto px-6 py-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[s.jsx(de,{onClick:l,variant:"outline",className:"flex-1 h-12 rounded-xl border-2 border-slate-300 hover:bg-slate-50 text-slate-700 font-medium",children:"Back to Medications"}),s.jsxs(de,{onClick:h,className:"flex-1 h-12 rounded-xl bg-green-600 hover:bg-green-700 text-white font-medium shadow-sm",children:[s.jsx(gw,{className:"w-4 h-4 mr-2"}),"Save Patient Chart"]})]})})})]})}function ZY({navigation:t,route:e}){const r=e.params?.patient||{first_name:"Unknown",last_name:"Patient",dob:"N/A"},n=e.params?.chartId,a=e.params?.patientId,i=()=>{t.navigate("ClinicianDashboard")},o=()=>{if(!a||!n){alert("Missing patient or chart information.");return}t.navigate("CaptureSourceSelection",{patientId:a,chartId:n})},l=()=>{t.navigate("PatientChartList")},u=(h=>{if(!h||h==="N/A")return null;const m=new Date,x=new Date(h);if(isNaN(x.getTime()))return null;let p=m.getFullYear()-x.getFullYear();const y=m.getMonth()-x.getMonth();return(y<0||y===0&&m.getDate()<x.getDate())&&p--,p})(r.dob);return s.jsxs("div",{className:"h-screen flex flex-col bg-[#f8fafc]",children:[s.jsx("div",{className:"bg-gradient-to-r from-green-600 to-green-700 p-5 shadow-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"w-10"}),s.jsx("h1",{className:"text-lg text-white",children:"Chart Created"}),s.jsx("div",{className:"w-10"})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:s.jsxs("div",{className:"max-w-2xl mx-auto p-6 space-y-6",children:[s.jsxs("div",{className:"pt-8 pb-6 flex flex-col items-center",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 rounded-full bg-green-100 animate-ping opacity-75"}),s.jsx("div",{className:"relative w-24 h-24 rounded-full bg-gradient-to-br from-green-500 to-green-600 flex items-center justify-center shadow-xl",children:s.jsx(kr,{className:"w-14 h-14 text-white",strokeWidth:2.5})})]}),s.jsx("h2",{className:"text-3xl text-slate-900 font-semibold mt-8 mb-3 text-center",children:"Patient Chart Created!"}),s.jsx("p",{className:"text-slate-600 text-center max-w-md",children:"Successfully created patient chart. You can now add medications through scanning or continue to the dashboard."})]}),s.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[s.jsx("div",{className:"p-5 border-b border-slate-200",children:s.jsx("h3",{className:"text-sm font-semibold text-slate-700 uppercase tracking-wide",children:"Chart Summary"})}),s.jsx("div",{className:"p-6 space-y-4",children:s.jsxs("div",{className:"flex items-start gap-4 p-4 bg-slate-50 rounded-xl",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-sky-100 flex items-center justify-center flex-shrink-0",children:s.jsx(Bn,{className:"w-5 h-5 text-sky-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wide mb-1",children:"Patient Created"}),s.jsxs("p",{className:"text-slate-900 font-medium",children:[r.first_name," ",r.last_name]}),s.jsxs("p",{className:"text-sm text-slate-600 mt-0.5",children:[u!==null?`Age: ${u}  `:null,"DOB: ",r.dob]})]}),s.jsxs("div",{className:"flex items-center gap-1 px-3 py-1 bg-green-100 rounded-full",children:[s.jsx(kr,{className:"w-3 h-3 text-green-700"}),s.jsxs("span",{className:"text-xs font-medium text-green-700",children:["#CHT-",Date.now().toString().slice(-6)]})]})]})})]}),s.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[s.jsx("div",{className:"p-5 border-b border-slate-200",children:s.jsx("h3",{className:"text-sm font-semibold text-slate-700 uppercase tracking-wide",children:"Next Steps"})}),s.jsxs("div",{className:"p-6 space-y-3",children:[s.jsx("button",{onClick:o,className:"w-full p-4 bg-sky-50 hover:bg-sky-100 border-2 border-sky-200 rounded-xl transition-all group text-left",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-sky-600 flex items-center justify-center flex-shrink-0",children:s.jsx(zf,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-slate-900 font-medium group-hover:text-sky-700 transition-colors",children:"Start Medication Capture"}),s.jsx("p",{className:"text-sm text-slate-600 mt-0.5",children:"Scan or manually enter medications"})]}),s.jsx(H2,{className:"w-5 h-5 text-slate-400 group-hover:text-sky-600 transition-colors"})]})}),s.jsx("button",{onClick:l,className:"w-full p-4 bg-slate-50 hover:bg-slate-100 border-2 border-slate-200 rounded-xl transition-all group text-left",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-slate-600 flex items-center justify-center flex-shrink-0",children:s.jsx(Bn,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-slate-900 font-medium group-hover:text-slate-700 transition-colors",children:"View Patient List"}),s.jsx("p",{className:"text-sm text-slate-600 mt-0.5",children:"See all patients and charts"})]}),s.jsx(H2,{className:"w-5 h-5 text-slate-400 group-hover:text-slate-600 transition-colors"})]})})]})]})]})}),s.jsx("div",{className:"bg-white border-t border-slate-200 shadow-lg",children:s.jsx("div",{className:"max-w-2xl mx-auto px-6 py-4",children:s.jsxs(de,{onClick:i,variant:"outline",className:"w-full h-12 rounded-xl border-2 border-slate-300 hover:bg-slate-50 text-slate-700 font-medium",children:[s.jsx(lD,{className:"w-4 h-4 mr-2"}),"Return to Dashboard"]})})})]})}function JY({navigation:t,route:e}){const{patientId:r,chartId:n}=e.params,a=o=>{t.navigate("ChartDetail",{patientId:r,chartId:n,scanType:o})},i=[{id:"bottle",title:"Bottle Photo",description:"Scan medication bottle labels",icon:Ls,color:"from-[#0966CC] to-[#0C4A6E]",bgColor:"bg-[#E0F2FE]",iconColor:"text-[#0966CC]"},{id:"document",title:"Document Scan",description:"Scan paper documents (DC summary, PCP med list, referrals)",icon:Yx,color:"from-[#10B981] to-[#059669]",bgColor:"bg-[#D1FAE5]",iconColor:"text-[#10B981]"},{id:"import",title:"Import PDF/Image",description:"Import a PDF or photo of a document",icon:Ei,color:"from-[#F59E0B] to-[#D97706]",bgColor:"bg-[#FEF3C7]",iconColor:"text-[#F59E0B]"}];return s.jsxs("div",{className:"h-screen flex flex-col bg-[#f8fafc]",children:[s.jsxs("div",{className:"bg-gradient-to-r from-[#0966CC] to-[#0C4A6E] p-5",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("button",{onClick:()=>t.goBack(),className:"w-10 h-10 rounded-xl bg-white/15 hover:bg-white/25 flex items-center justify-center transition-colors",children:s.jsx(ln,{className:"w-5 h-5 text-white"})}),s.jsx("h1",{className:"text-lg text-white",children:"Scan Feature"}),s.jsx("div",{className:"w-10"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 rounded-2xl bg-white/20 flex items-center justify-center mx-auto mb-3",children:s.jsx(hr,{className:"w-8 h-8 text-white"})}),s.jsx("h2",{className:"text-xl text-white mb-2",children:"Luminous Home Health  Anna (Clinician)"}),s.jsx("p",{className:"text-sm text-white/80",children:"New Patient"})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:s.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("h3",{className:"text-xl text-[#0f172a] mb-2",children:"Choose a scan option to begin"}),s.jsx("p",{className:"text-sm text-[#64748b]",children:"Select how you want to capture medication information"})]}),s.jsx("div",{className:"space-y-4",children:i.map(o=>{const l=o.icon;return s.jsx("button",{onClick:()=>a(o.id),className:"w-full bg-white rounded-2xl border-2 border-[#e2e8f0] p-6 hover:border-[#0966CC] hover:shadow-lg transition-all text-left group",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:`w-16 h-16 rounded-xl ${o.bgColor} flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform`,children:s.jsx(l,{className:`w-8 h-8 ${o.iconColor}`})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"text-lg text-[#0f172a] mb-2",children:o.title}),s.jsx("p",{className:"text-sm text-[#64748b]",children:o.description})]})]})},o.id)})}),s.jsx("div",{className:"bg-white rounded-2xl border border-[#e2e8f0] p-6",children:s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",placeholder:"Search charts by patient name...",className:"w-full h-12 pl-12 pr-4 rounded-xl border-2 border-[#e2e8f0] bg-[#f8fafc] text-[#0f172a] placeholder:text-[#94a3b8]"}),s.jsx(hr,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-[#94a3b8]"})]})})]})})]})}var QY=Symbol("radix.slottable");function eX(t){const e=({children:r})=>s.jsx(s.Fragment,{children:r});return e.displayName=`${t}.Slottable`,e.__radixId=QY,e}var RE="AlertDialog",[tX]=_o(RE,[nS]),od=nS(),LE=t=>{const{__scopeAlertDialog:e,...r}=t,n=od(e);return s.jsx(Pw,{...n,...r,modal:!0})};LE.displayName=RE;var rX="AlertDialogTrigger",nX=N.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,a=od(r);return s.jsx(wF,{...a,...n,ref:e})});nX.displayName=rX;var sX="AlertDialogPortal",FE=t=>{const{__scopeAlertDialog:e,...r}=t,n=od(e);return s.jsx(Tw,{...n,...r})};FE.displayName=sX;var aX="AlertDialogOverlay",ME=N.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,a=od(r);return s.jsx(A1,{...a,...n,ref:e})});ME.displayName=aX;var Lf="AlertDialogContent",[iX,oX]=tX(Lf),lX=eX("AlertDialogContent"),BE=N.forwardRef((t,e)=>{const{__scopeAlertDialog:r,children:n,...a}=t,i=od(r),o=N.useRef(null),l=Wr(e,o),c=N.useRef(null);return s.jsx(xF,{contentName:Lf,titleName:UE,docsSlug:"alert-dialog",children:s.jsx(iX,{scope:r,cancelRef:c,children:s.jsxs(E1,{role:"alertdialog",...i,...a,ref:l,onOpenAutoFocus:Pt(a.onOpenAutoFocus,u=>{u.preventDefault(),c.current?.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[s.jsx(lX,{children:n}),s.jsx(dX,{contentRef:o})]})})})});BE.displayName=Lf;var UE="AlertDialogTitle",$E=N.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,a=od(r);return s.jsx(Iw,{...a,...n,ref:e})});$E.displayName=UE;var VE="AlertDialogDescription",zE=N.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,a=od(r);return s.jsx(Dw,{...a,...n,ref:e})});zE.displayName=VE;var cX="AlertDialogAction",qE=N.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,a=od(r);return s.jsx(k1,{...a,...n,ref:e})});qE.displayName=cX;var HE="AlertDialogCancel",WE=N.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,{cancelRef:a}=oX(HE,r),i=od(r),o=Wr(e,a);return s.jsx(k1,{...i,...n,ref:o})});WE.displayName=HE;var dX=({contentRef:t})=>{const e=`\`${Lf}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Lf}\` by passing a \`${VE}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Lf}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return N.useEffect(()=>{document.getElementById(t.current?.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},uX=LE,hX=FE,fX=ME,mX=BE,pX=qE,xX=WE,gX=$E,vX=zE;function Yc({...t}){return s.jsx(uX,{"data-slot":"alert-dialog",...t})}function yX({...t}){return s.jsx(hX,{"data-slot":"alert-dialog-portal",...t})}const GE=N.forwardRef(({className:t,...e},r)=>s.jsx(fX,{ref:r,"data-slot":"alert-dialog-overlay",className:xr("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...e}));GE.displayName="AlertDialogOverlay";function Xc({className:t,...e}){return s.jsxs(yX,{children:[s.jsx(GE,{}),s.jsx(mX,{"data-slot":"alert-dialog-content",className:xr("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...e})]})}function Zc({className:t,...e}){return s.jsx("div",{"data-slot":"alert-dialog-header",className:xr("flex flex-col gap-2 text-center sm:text-left",t),...e})}function Jc({className:t,...e}){return s.jsx("div",{"data-slot":"alert-dialog-footer",className:xr("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...e})}function Qc({className:t,...e}){return s.jsx(gX,{"data-slot":"alert-dialog-title",className:xr("text-lg font-semibold",t),...e})}function ed({className:t,...e}){return s.jsx(vX,{"data-slot":"alert-dialog-description",className:xr("text-muted-foreground text-sm",t),...e})}function td({className:t,...e}){return s.jsx(pX,{className:xr(ww(),t),...e})}function rd({className:t,...e}){return s.jsx(xX,{className:xr(ww({variant:"outline"}),t),...e})}var d2="rovingFocusGroup.onEntryFocus",wX={bubbles:!1,cancelable:!0},Z0="RovingFocusGroup",[zy,KE,bX]=Ow(Z0),[NX,J1]=_o(Z0,[bX]),[jX,_X]=NX(Z0),YE=N.forwardRef((t,e)=>s.jsx(zy.Provider,{scope:t.__scopeRovingFocusGroup,children:s.jsx(zy.Slot,{scope:t.__scopeRovingFocusGroup,children:s.jsx(CX,{...t,ref:e})})}));YE.displayName=Z0;var CX=N.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...m}=t,x=N.useRef(null),p=Wr(e,x),y=P1(i),[w,j]=dc({prop:o,defaultProp:l??null,onChange:c,caller:Z0}),[C,S]=N.useState(!1),k=Tl(u),P=KE(r),O=N.useRef(!1),[$,R]=N.useState(0);return N.useEffect(()=>{const B=x.current;if(B)return B.addEventListener(d2,k),()=>B.removeEventListener(d2,k)},[k]),s.jsx(jX,{scope:r,orientation:n,dir:y,loop:a,currentTabStopId:w,onItemFocus:N.useCallback(B=>j(B),[j]),onItemShiftTab:N.useCallback(()=>S(!0),[]),onFocusableItemAdd:N.useCallback(()=>R(B=>B+1),[]),onFocusableItemRemove:N.useCallback(()=>R(B=>B-1),[]),children:s.jsx(Pr.div,{tabIndex:C||$===0?-1:0,"data-orientation":n,...m,ref:p,style:{outline:"none",...t.style},onMouseDown:Pt(t.onMouseDown,()=>{O.current=!0}),onFocus:Pt(t.onFocus,B=>{const U=!O.current;if(B.target===B.currentTarget&&U&&!C){const K=new CustomEvent(d2,wX);if(B.currentTarget.dispatchEvent(K),!K.defaultPrevented){const M=P().filter(se=>se.focusable),q=M.find(se=>se.active),re=M.find(se=>se.id===w),H=[q,re,...M].filter(Boolean).map(se=>se.ref.current);JE(H,h)}}O.current=!1}),onBlur:Pt(t.onBlur,()=>S(!1))})})}),XE="RovingFocusGroupItem",ZE=N.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:i,children:o,...l}=t,c=Ko(),u=i||c,h=_X(XE,r),m=h.currentTabStopId===u,x=KE(r),{onFocusableItemAdd:p,onFocusableItemRemove:y,currentTabStopId:w}=h;return N.useEffect(()=>{if(n)return p(),()=>y()},[n,p,y]),s.jsx(zy.ItemSlot,{scope:r,id:u,focusable:n,active:a,children:s.jsx(Pr.span,{tabIndex:m?0:-1,"data-orientation":h.orientation,...l,ref:e,onMouseDown:Pt(t.onMouseDown,j=>{n?h.onItemFocus(u):j.preventDefault()}),onFocus:Pt(t.onFocus,()=>h.onItemFocus(u)),onKeyDown:Pt(t.onKeyDown,j=>{if(j.key==="Tab"&&j.shiftKey){h.onItemShiftTab();return}if(j.target!==j.currentTarget)return;const C=EX(j,h.orientation,h.dir);if(C!==void 0){if(j.metaKey||j.ctrlKey||j.altKey||j.shiftKey)return;j.preventDefault();let k=x().filter(P=>P.focusable).map(P=>P.ref.current);if(C==="last")k.reverse();else if(C==="prev"||C==="next"){C==="prev"&&k.reverse();const P=k.indexOf(j.currentTarget);k=h.loop?kX(k,P+1):k.slice(P+1)}setTimeout(()=>JE(k))}}),children:typeof o=="function"?o({isCurrentTabStop:m,hasTabStop:w!=null}):o})})});ZE.displayName=XE;var SX={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function AX(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function EX(t,e,r){const n=AX(t.key,r);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return SX[n]}function JE(t,e=!1){const r=document.activeElement;for(const n of t)if(n===r||(n.focus({preventScroll:e}),document.activeElement!==r))return}function kX(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var QE=YE,ek=ZE;function PX(t){const e=TX(t),r=N.forwardRef((n,a)=>{const{children:i,...o}=n,l=N.Children.toArray(i),c=l.find(DX);if(c){const u=c.props.children,h=l.map(m=>m===c?N.Children.count(u)>1?N.Children.only(null):N.isValidElement(u)?u.props.children:null:m);return s.jsx(e,{...o,ref:a,children:N.isValidElement(u)?N.cloneElement(u,void 0,h):null})}return s.jsx(e,{...o,ref:a,children:i})});return r.displayName=`${t}.Slot`,r}function TX(t){const e=N.forwardRef((r,n)=>{const{children:a,...i}=r;if(N.isValidElement(a)){const o=RX(a),l=OX(i,a.props);return a.type!==N.Fragment&&(l.ref=n?fc(n,o):o),N.cloneElement(a,l)}return N.Children.count(a)>1?N.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var IX=Symbol("radix.slottable");function DX(t){return N.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===IX}function OX(t,e){const r={...e};for(const n in e){const a=t[n],i=e[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...t,...r}}function RX(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var qy=["Enter"," "],LX=["ArrowDown","PageUp","Home"],tk=["ArrowUp","PageDown","End"],FX=[...LX,...tk],MX={ltr:[...qy,"ArrowRight"],rtl:[...qy,"ArrowLeft"]},BX={ltr:["ArrowLeft"],rtl:["ArrowRight"]},J0="Menu",[P0,UX,$X]=Ow(J0),[_h,rk]=_o(J0,[$X,pu,J1]),Q1=pu(),nk=J1(),[VX,Ch]=_h(J0),[zX,Q0]=_h(J0),sk=t=>{const{__scopeMenu:e,open:r=!1,children:n,dir:a,onOpenChange:i,modal:o=!0}=t,l=Q1(e),[c,u]=N.useState(null),h=N.useRef(!1),m=Tl(i),x=P1(a);return N.useEffect(()=>{const p=()=>{h.current=!0,document.addEventListener("pointerdown",y,{capture:!0,once:!0}),document.addEventListener("pointermove",y,{capture:!0,once:!0})},y=()=>h.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",y,{capture:!0}),document.removeEventListener("pointermove",y,{capture:!0})}},[]),s.jsx(R1,{...l,children:s.jsx(VX,{scope:e,open:r,onOpenChange:m,content:c,onContentChange:u,children:s.jsx(zX,{scope:e,onClose:N.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:h,dir:x,modal:o,children:n})})})};sk.displayName=J0;var qX="MenuAnchor",$b=N.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,a=Q1(r);return s.jsx(q0,{...a,...n,ref:e})});$b.displayName=qX;var Vb="MenuPortal",[HX,ak]=_h(Vb,{forceMount:void 0}),ik=t=>{const{__scopeMenu:e,forceMount:r,children:n,container:a}=t,i=Ch(Vb,e);return s.jsx(HX,{scope:e,forceMount:r,children:s.jsx(Qi,{present:r||i.open,children:s.jsx(nm,{asChild:!0,container:a,children:n})})})};ik.displayName=Vb;var Xo="MenuContent",[WX,zb]=_h(Xo),ok=N.forwardRef((t,e)=>{const r=ak(Xo,t.__scopeMenu),{forceMount:n=r.forceMount,...a}=t,i=Ch(Xo,t.__scopeMenu),o=Q0(Xo,t.__scopeMenu);return s.jsx(P0.Provider,{scope:t.__scopeMenu,children:s.jsx(Qi,{present:n||i.open,children:s.jsx(P0.Slot,{scope:t.__scopeMenu,children:o.modal?s.jsx(GX,{...a,ref:e}):s.jsx(KX,{...a,ref:e})})})})}),GX=N.forwardRef((t,e)=>{const r=Ch(Xo,t.__scopeMenu),n=N.useRef(null),a=Wr(e,n);return N.useEffect(()=>{const i=n.current;if(i)return C1(i)},[]),s.jsx(qb,{...t,ref:a,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:Pt(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),KX=N.forwardRef((t,e)=>{const r=Ch(Xo,t.__scopeMenu);return s.jsx(qb,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),YX=PX("MenuContent.ScrollLock"),qb=N.forwardRef((t,e)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:m,onInteractOutside:x,onDismiss:p,disableOutsideScroll:y,...w}=t,j=Ch(Xo,r),C=Q0(Xo,r),S=Q1(r),k=nk(r),P=UX(r),[O,$]=N.useState(null),R=N.useRef(null),B=Wr(e,R,j.onContentChange),U=N.useRef(0),K=N.useRef(""),M=N.useRef(0),q=N.useRef(null),re=N.useRef("right"),ee=N.useRef(0),H=y?V0:N.Fragment,se=y?{as:YX,allowPinchZoom:!0}:void 0,ue=J=>{const oe=K.current+J,Y=P().filter(T=>!T.disabled),L=document.activeElement,z=Y.find(T=>T.ref.current===L)?.textValue,V=Y.map(T=>T.textValue),W=oZ(V,oe,z),Q=Y.find(T=>T.textValue===W)?.ref.current;(function T(ie){K.current=ie,window.clearTimeout(U.current),ie!==""&&(U.current=window.setTimeout(()=>T(""),1e3))})(oe),Q&&setTimeout(()=>Q.focus())};N.useEffect(()=>()=>window.clearTimeout(U.current),[]),j1();const G=N.useCallback(J=>re.current===q.current?.side&&cZ(J,q.current?.area),[]);return s.jsx(WX,{scope:r,searchRef:K,onItemEnter:N.useCallback(J=>{G(J)&&J.preventDefault()},[G]),onItemLeave:N.useCallback(J=>{G(J)||(R.current?.focus(),$(null))},[G]),onTriggerLeave:N.useCallback(J=>{G(J)&&J.preventDefault()},[G]),pointerGraceTimerRef:M,onPointerGraceIntentChange:N.useCallback(J=>{q.current=J},[]),children:s.jsx(H,{...se,children:s.jsx($0,{asChild:!0,trapped:a,onMountAutoFocus:Pt(i,J=>{J.preventDefault(),R.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:s.jsx(rm,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:m,onInteractOutside:x,onDismiss:p,children:s.jsx(QE,{asChild:!0,...k,dir:C.dir,orientation:"vertical",loop:n,currentTabStopId:O,onCurrentTabStopIdChange:$,onEntryFocus:Pt(c,J=>{C.isUsingKeyboardRef.current||J.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(L1,{role:"menu","aria-orientation":"vertical","data-state":jk(j.open),"data-radix-menu-content":"",dir:C.dir,...S,...w,ref:B,style:{outline:"none",...w.style},onKeyDown:Pt(w.onKeyDown,J=>{const Y=J.target.closest("[data-radix-menu-content]")===J.currentTarget,L=J.ctrlKey||J.altKey||J.metaKey,z=J.key.length===1;Y&&(J.key==="Tab"&&J.preventDefault(),!L&&z&&ue(J.key));const V=R.current;if(J.target!==V||!FX.includes(J.key))return;J.preventDefault();const Q=P().filter(T=>!T.disabled).map(T=>T.ref.current);tk.includes(J.key)&&Q.reverse(),aZ(Q)}),onBlur:Pt(t.onBlur,J=>{J.currentTarget.contains(J.target)||(window.clearTimeout(U.current),K.current="")}),onPointerMove:Pt(t.onPointerMove,T0(J=>{const oe=J.target,Y=ee.current!==J.clientX;if(J.currentTarget.contains(oe)&&Y){const L=J.clientX>ee.current?"right":"left";re.current=L,ee.current=J.clientX}}))})})})})})})});ok.displayName=Xo;var XX="MenuGroup",Hb=N.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return s.jsx(Pr.div,{role:"group",...n,ref:e})});Hb.displayName=XX;var ZX="MenuLabel",lk=N.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return s.jsx(Pr.div,{...n,ref:e})});lk.displayName=ZX;var u1="MenuItem",V_="menu.itemSelect",eg=N.forwardRef((t,e)=>{const{disabled:r=!1,onSelect:n,...a}=t,i=N.useRef(null),o=Q0(u1,t.__scopeMenu),l=zb(u1,t.__scopeMenu),c=Wr(e,i),u=N.useRef(!1),h=()=>{const m=i.current;if(!r&&m){const x=new CustomEvent(V_,{bubbles:!0,cancelable:!0});m.addEventListener(V_,p=>n?.(p),{once:!0}),k6(m,x),x.defaultPrevented?u.current=!1:o.onClose()}};return s.jsx(ck,{...a,ref:c,disabled:r,onClick:Pt(t.onClick,h),onPointerDown:m=>{t.onPointerDown?.(m),u.current=!0},onPointerUp:Pt(t.onPointerUp,m=>{u.current||m.currentTarget?.click()}),onKeyDown:Pt(t.onKeyDown,m=>{const x=l.searchRef.current!=="";r||x&&m.key===" "||qy.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});eg.displayName=u1;var ck=N.forwardRef((t,e)=>{const{__scopeMenu:r,disabled:n=!1,textValue:a,...i}=t,o=zb(u1,r),l=nk(r),c=N.useRef(null),u=Wr(e,c),[h,m]=N.useState(!1),[x,p]=N.useState("");return N.useEffect(()=>{const y=c.current;y&&p((y.textContent??"").trim())},[i.children]),s.jsx(P0.ItemSlot,{scope:r,disabled:n,textValue:a??x,children:s.jsx(ek,{asChild:!0,...l,focusable:!n,children:s.jsx(Pr.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:u,onPointerMove:Pt(t.onPointerMove,T0(y=>{n?o.onItemLeave(y):(o.onItemEnter(y),y.defaultPrevented||y.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Pt(t.onPointerLeave,T0(y=>o.onItemLeave(y))),onFocus:Pt(t.onFocus,()=>m(!0)),onBlur:Pt(t.onBlur,()=>m(!1))})})})}),JX="MenuCheckboxItem",dk=N.forwardRef((t,e)=>{const{checked:r=!1,onCheckedChange:n,...a}=t;return s.jsx(pk,{scope:t.__scopeMenu,checked:r,children:s.jsx(eg,{role:"menuitemcheckbox","aria-checked":h1(r)?"mixed":r,...a,ref:e,"data-state":Gb(r),onSelect:Pt(a.onSelect,()=>n?.(h1(r)?!0:!r),{checkForDefaultPrevented:!1})})})});dk.displayName=JX;var uk="MenuRadioGroup",[QX,eZ]=_h(uk,{value:void 0,onValueChange:()=>{}}),hk=N.forwardRef((t,e)=>{const{value:r,onValueChange:n,...a}=t,i=Tl(n);return s.jsx(QX,{scope:t.__scopeMenu,value:r,onValueChange:i,children:s.jsx(Hb,{...a,ref:e})})});hk.displayName=uk;var fk="MenuRadioItem",mk=N.forwardRef((t,e)=>{const{value:r,...n}=t,a=eZ(fk,t.__scopeMenu),i=r===a.value;return s.jsx(pk,{scope:t.__scopeMenu,checked:i,children:s.jsx(eg,{role:"menuitemradio","aria-checked":i,...n,ref:e,"data-state":Gb(i),onSelect:Pt(n.onSelect,()=>a.onValueChange?.(r),{checkForDefaultPrevented:!1})})})});mk.displayName=fk;var Wb="MenuItemIndicator",[pk,tZ]=_h(Wb,{checked:!1}),xk=N.forwardRef((t,e)=>{const{__scopeMenu:r,forceMount:n,...a}=t,i=tZ(Wb,r);return s.jsx(Qi,{present:n||h1(i.checked)||i.checked===!0,children:s.jsx(Pr.span,{...a,ref:e,"data-state":Gb(i.checked)})})});xk.displayName=Wb;var rZ="MenuSeparator",gk=N.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return s.jsx(Pr.div,{role:"separator","aria-orientation":"horizontal",...n,ref:e})});gk.displayName=rZ;var nZ="MenuArrow",vk=N.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,a=Q1(r);return s.jsx(F1,{...a,...n,ref:e})});vk.displayName=nZ;var sZ="MenuSub",[dre,yk]=_h(sZ),n0="MenuSubTrigger",wk=N.forwardRef((t,e)=>{const r=Ch(n0,t.__scopeMenu),n=Q0(n0,t.__scopeMenu),a=yk(n0,t.__scopeMenu),i=zb(n0,t.__scopeMenu),o=N.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,u={__scopeMenu:t.__scopeMenu},h=N.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return N.useEffect(()=>h,[h]),N.useEffect(()=>{const m=l.current;return()=>{window.clearTimeout(m),c(null)}},[l,c]),s.jsx($b,{asChild:!0,...u,children:s.jsx(ck,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":a.contentId,"data-state":jk(r.open),...t,ref:fc(e,a.onTriggerChange),onClick:m=>{t.onClick?.(m),!(t.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:Pt(t.onPointerMove,T0(m=>{i.onItemEnter(m),!m.defaultPrevented&&!t.disabled&&!r.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),h()},100))})),onPointerLeave:Pt(t.onPointerLeave,T0(m=>{h();const x=r.content?.getBoundingClientRect();if(x){const p=r.content?.dataset.side,y=p==="right",w=y?-5:5,j=x[y?"left":"right"],C=x[y?"right":"left"];i.onPointerGraceIntentChange({area:[{x:m.clientX+w,y:m.clientY},{x:j,y:x.top},{x:C,y:x.top},{x:C,y:x.bottom},{x:j,y:x.bottom}],side:p}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(m),m.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Pt(t.onKeyDown,m=>{const x=i.searchRef.current!=="";t.disabled||x&&m.key===" "||MX[n.dir].includes(m.key)&&(r.onOpenChange(!0),r.content?.focus(),m.preventDefault())})})})});wk.displayName=n0;var bk="MenuSubContent",Nk=N.forwardRef((t,e)=>{const r=ak(Xo,t.__scopeMenu),{forceMount:n=r.forceMount,...a}=t,i=Ch(Xo,t.__scopeMenu),o=Q0(Xo,t.__scopeMenu),l=yk(bk,t.__scopeMenu),c=N.useRef(null),u=Wr(e,c);return s.jsx(P0.Provider,{scope:t.__scopeMenu,children:s.jsx(Qi,{present:n||i.open,children:s.jsx(P0.Slot,{scope:t.__scopeMenu,children:s.jsx(qb,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{o.isUsingKeyboardRef.current&&c.current?.focus(),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:Pt(t.onFocusOutside,h=>{h.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Pt(t.onEscapeKeyDown,h=>{o.onClose(),h.preventDefault()}),onKeyDown:Pt(t.onKeyDown,h=>{const m=h.currentTarget.contains(h.target),x=BX[o.dir].includes(h.key);m&&x&&(i.onOpenChange(!1),l.trigger?.focus(),h.preventDefault())})})})})})});Nk.displayName=bk;function jk(t){return t?"open":"closed"}function h1(t){return t==="indeterminate"}function Gb(t){return h1(t)?"indeterminate":t?"checked":"unchecked"}function aZ(t){const e=document.activeElement;for(const r of t)if(r===e||(r.focus(),document.activeElement!==e))return}function iZ(t,e){return t.map((r,n)=>t[(e+n)%t.length])}function oZ(t,e,r){const a=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=r?t.indexOf(r):-1;let o=iZ(t,Math.max(i,0));a.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function lZ(t,e){const{x:r,y:n}=t;let a=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const l=e[i],c=e[o],u=l.x,h=l.y,m=c.x,x=c.y;h>n!=x>n&&r<(m-u)*(n-h)/(x-h)+u&&(a=!a)}return a}function cZ(t,e){if(!e)return!1;const r={x:t.clientX,y:t.clientY};return lZ(r,e)}function T0(t){return e=>e.pointerType==="mouse"?t(e):void 0}var dZ=sk,uZ=$b,hZ=ik,fZ=ok,mZ=Hb,pZ=lk,xZ=eg,gZ=dk,vZ=hk,yZ=mk,wZ=xk,bZ=gk,NZ=vk,jZ=wk,_Z=Nk,tg="DropdownMenu",[CZ]=_o(tg,[rk]),ki=rk(),[SZ,_k]=CZ(tg),Ck=t=>{const{__scopeDropdownMenu:e,children:r,dir:n,open:a,defaultOpen:i,onOpenChange:o,modal:l=!0}=t,c=ki(e),u=N.useRef(null),[h,m]=dc({prop:a,defaultProp:i??!1,onChange:o,caller:tg});return s.jsx(SZ,{scope:e,triggerId:Ko(),triggerRef:u,contentId:Ko(),open:h,onOpenChange:m,onOpenToggle:N.useCallback(()=>m(x=>!x),[m]),modal:l,children:s.jsx(dZ,{...c,open:h,onOpenChange:m,dir:n,modal:l,children:r})})};Ck.displayName=tg;var Sk="DropdownMenuTrigger",Ak=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...a}=t,i=_k(Sk,r),o=ki(r);return s.jsx(uZ,{asChild:!0,...o,children:s.jsx(Pr.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...a,ref:fc(e,i.triggerRef),onPointerDown:Pt(t.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:Pt(t.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});Ak.displayName=Sk;var AZ="DropdownMenuPortal",Ek=t=>{const{__scopeDropdownMenu:e,...r}=t,n=ki(e);return s.jsx(hZ,{...n,...r})};Ek.displayName=AZ;var kk="DropdownMenuContent",Pk=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,a=_k(kk,r),i=ki(r),o=N.useRef(!1);return s.jsx(fZ,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...n,ref:e,onCloseAutoFocus:Pt(t.onCloseAutoFocus,l=>{o.current||a.triggerRef.current?.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:Pt(t.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,h=c.button===2||u;(!a.modal||h)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Pk.displayName=kk;var EZ="DropdownMenuGroup",kZ=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,a=ki(r);return s.jsx(mZ,{...a,...n,ref:e})});kZ.displayName=EZ;var PZ="DropdownMenuLabel",Tk=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,a=ki(r);return s.jsx(pZ,{...a,...n,ref:e})});Tk.displayName=PZ;var TZ="DropdownMenuItem",Ik=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,a=ki(r);return s.jsx(xZ,{...a,...n,ref:e})});Ik.displayName=TZ;var IZ="DropdownMenuCheckboxItem",DZ=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,a=ki(r);return s.jsx(gZ,{...a,...n,ref:e})});DZ.displayName=IZ;var OZ="DropdownMenuRadioGroup",RZ=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,a=ki(r);return s.jsx(vZ,{...a,...n,ref:e})});RZ.displayName=OZ;var LZ="DropdownMenuRadioItem",FZ=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,a=ki(r);return s.jsx(yZ,{...a,...n,ref:e})});FZ.displayName=LZ;var MZ="DropdownMenuItemIndicator",BZ=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,a=ki(r);return s.jsx(wZ,{...a,...n,ref:e})});BZ.displayName=MZ;var UZ="DropdownMenuSeparator",Dk=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,a=ki(r);return s.jsx(bZ,{...a,...n,ref:e})});Dk.displayName=UZ;var $Z="DropdownMenuArrow",VZ=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,a=ki(r);return s.jsx(NZ,{...a,...n,ref:e})});VZ.displayName=$Z;var zZ="DropdownMenuSubTrigger",qZ=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,a=ki(r);return s.jsx(jZ,{...a,...n,ref:e})});qZ.displayName=zZ;var HZ="DropdownMenuSubContent",WZ=N.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,a=ki(r);return s.jsx(_Z,{...a,...n,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});WZ.displayName=HZ;var GZ=Ck,KZ=Ak,YZ=Ek,XZ=Pk,ZZ=Tk,JZ=Ik,QZ=Dk;function Yf({...t}){return s.jsx(GZ,{"data-slot":"dropdown-menu",...t})}function Xf({...t}){return s.jsx(KZ,{"data-slot":"dropdown-menu-trigger",...t})}function Zf({className:t,sideOffset:e=4,...r}){return s.jsx(YZ,{children:s.jsx(XZ,{"data-slot":"dropdown-menu-content",sideOffset:e,className:xr("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...r})})}function on({className:t,inset:e,variant:r="default",...n}){return s.jsx(JZ,{"data-slot":"dropdown-menu-item","data-inset":e,"data-variant":r,className:xr("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n})}function Kb({className:t,inset:e,...r}){return s.jsx(ZZ,{"data-slot":"dropdown-menu-label","data-inset":e,className:xr("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",t),...r})}function Go({className:t,...e}){return s.jsx(QZ,{"data-slot":"dropdown-menu-separator",className:xr("bg-border -mx-1 my-1 h-px",t),...e})}const z_=t=>{switch(t){case"active":return"Active";case"verified_ready":return"Verified Ready";case"pending_review":return"Pending Review";case"delivered_locked":return"Delivered (Locked)";case"needs_reverification":return"Needs Reverification";case"archived":return"Archived";default:return"Active"}};function eJ({navigation:t,route:e}){const[r,n]=N.useState(!1),[a,i]=N.useState(!1),[o,l]=N.useState(!1),[c,u]=N.useState(null),[h,m]=N.useState(!1),[x,p]=N.useState(""),[y,w]=N.useState(!1),[j,C]=N.useState(!1),[S,k]=N.useState(!1),[P,O]=N.useState(!1),[$,R]=N.useState(!1),[B,U]=N.useState(!1),[K,M]=N.useState(""),[q,re]=N.useState(!1),[ee,H]=N.useState(!1),[se,ue]=N.useState(!1),[G,J]=N.useState(!1),[oe,Y]=N.useState(""),[L,z]=N.useState(""),[V,W]=N.useState(""),[Q,T]=N.useState(""),[ie,ge]=N.useState(""),[we,Se]=N.useState(""),[Ue,We]=N.useState(!1),[be,pe]=N.useState([]),[at,tt]=N.useState(!1),[Be,ye]=N.useState(null),[st,Ve]=N.useState([]),[vt,ct]=N.useState(!1),{patientId:Kt,chartId:ot,prefillMedications:Ct}=e.params,{user:qt}=Ka(),[Tt,Et]=N.useState({first_name:"",last_name:"",dob:"",phone:"",address1:"",address2:"",city:"",state:"",zip_code:"",notes:""}),kt=N.useRef(null),St=N.useCallback(async()=>{if(ot){tt(!0),ye(null);try{const{data:ze,error:ft}=await Qe.from("documents").select("*").eq("chart_id",ot).order("created_at",{ascending:!1});if(ft)throw ft;pe(ze||[])}catch(ze){ye(ze.message||"Failed to load documents")}finally{tt(!1)}}},[ot]),gr=N.useCallback(async()=>{if(ot){ct(!0);try{const{data:ze,error:ft}=await Qe.from("chart_review_notes").select(`
          *,
          reviewer:users!chart_review_notes_created_by_fkey (
            first_name,
            last_name,
            email
          )
        `).eq("chart_id",ot).order("created_at",{ascending:!1});if(ft)throw ft;Ve(ze||[])}catch(ze){console.error("Failed to load review notes:",ze)}finally{ct(!1)}}},[ot]),Rr=async ze=>{u(ze),m(!0),w(!0);try{const ft=await Z1(ze.file_url);p(ft)}catch(ft){console.error("Error getting signed URL:",ft),p(ze.file_url)}finally{w(!1)}},[xt,Ht]=N.useState("Active"),[Me,bt]=N.useState([]),[Wt,It]=N.useState(!0),[Cr,Gr]=N.useState(null),vr=Me.some(ze=>!ze.isVerified),At=xt==="Delivered (Locked)"||xt==="Pending Review",[yt,Lr]=N.useState(null),Sr=Me.filter(ze=>ze.isVerified).length,Kr=Me.length,Mr=Kr>0?Sr/Kr*100:0,Tr=xt==="Delivered (Locked)"?{icon:"",text:"Delivered / Locked",classes:"bg-[#E0E7FF] text-[#4F46E5] border-0"}:xt==="Pending Review"?{icon:"",text:"Pending Admin Review",classes:"bg-[#FEF3C7] text-[#F59E0B] border-0"}:vr?{icon:"",text:"Re-Verification Needed",classes:"bg-[#FEF3C7] text-[#92400E] border-0"}:Mr===100?{icon:"",text:"Verified Ready",classes:"bg-[#D1FAE5] text-[#10B981] border-0"}:{icon:"",text:"In Progress",classes:"bg-[#DBEAFE] text-[#0966CC] border-0"};N.useEffect(()=>{(async()=>{try{if(!ot||!Kt)return;const{data:ft,error:gn}=await Qe.from("patients").select("first_name, last_name, date_of_birth").eq("id",Kt).single();if(gn)throw gn;Et(bn=>({...bn,first_name:ft.first_name,last_name:ft.last_name,dob:ft.date_of_birth??""}));const{data:Ee,error:wt}=await Qe.from("charts").select("status").eq("id",ot).single();if(wt)throw wt;Ht(z_(Ee.status)),St(),Ee.status==="needs_reverification"&&gr();const{data:nt,error:Qr}=await Qe.from("medications").select("id, drug_name, strength, route, frequency, prescriber, scanned_on, ocr_confidence, verified").eq("chart_id",ot);if(Qr)throw Qr;const Zn=(nt||[]).map(bn=>({id:bn.id,drugName:bn.drug_name,strength:bn.strength||"",route:bn.route||"",frequency:bn.frequency||"",prescriber:bn.prescriber||"",scannedDate:bn.scanned_on?new Date(bn.scanned_on).toLocaleDateString():"",confidence:bn.ocr_confidence!=null?Math.round(Number(bn.ocr_confidence)*100):0,isVerified:bn.verified}));bt(Zn),Gr(null)}catch(ft){console.error("Error loading chart detail",ft),Gr(ft.message||"Failed to load chart")}finally{It(!1)}})()},[ot,Kt,Ct]),N.useEffect(()=>{(async()=>{if(!(!Ct||!Array.isArray(Ct)))for(const ft of Ct)try{await Yr(ft)}catch(gn){console.error("Failed to save prefilled medication",gn)}})()},[]);const Vn=()=>{Y(""),z(""),W(""),T(""),ge(""),Se(""),i(!0)},Fr=async()=>{if(!oe.trim()){alert("Drug name is required");return}if(!ot||!qt?.tenant_id){alert("Missing chart or tenant information");return}try{We(!0),console.log("Inserting medication from modal");const{data:ze,error:ft}=await Qe.from("medications").insert([{chart_id:ot,tenant_id:qt.tenant_id,drug_name:oe.trim(),strength:L||null,route:V||null,frequency:Q||null,prescriber:ie||null,instructions:null,notes:null,scanned_on:we?new Date(we).toISOString():null,ocr_confidence:.9,verified:!1,changed_after_verify:!1}]).select("*").single();if(console.log("Insert result:",ze,ft),ft)throw ft;bt(gn=>[...gn,{id:ze.id,drugName:ze.drug_name,strength:ze.strength||"",route:ze.route||"",frequency:ze.frequency||"",prescriber:ze.prescriber||"",scannedDate:ze.scanned_on?new Date(ze.scanned_on).toLocaleDateString():"",confidence:ze.ocr_confidence!=null?Math.round(Number(ze.ocr_confidence)*100):0,isVerified:ze.verified}]),Y(""),z(""),W(""),T(""),ge(""),Se(""),i(!1)}catch(ze){console.error("Error inserting medication from modal:",ze),alert(ze.message||"Failed to add medication")}finally{We(!1)}},Yr=async ze=>{if(!ot||!qt?.tenant_id){alert("Missing chart or tenant information");return}try{We(!0);const ft=ze.confidence;let gn=null;typeof ft=="number"&&(gn=ft>1?ft/100:ft);const Ee={chart_id:ot,tenant_id:qt.tenant_id,drug_name:ze.name||ze.drugName||"Unknown",strength:ze.dosage||ze.strength||null,route:ze.route||null,frequency:ze.frequency||null,prescriber:ze.prescriber||null,instructions:ze.instructions||null,notes:null,scanned_on:new Date().toISOString(),ocr_confidence:gn??.8,verified:!1,changed_after_verify:!1,scanned_image:ze.image||null},{data:wt,error:nt}=await Qe.from("medications").insert([Ee]).select("*").single();if(nt)throw nt;bt(Qr=>[...Qr,{id:wt.id,drugName:wt.drug_name,strength:wt.strength||"",route:wt.route||"",frequency:wt.frequency||"",prescriber:wt.prescriber||"",scannedDate:wt.scanned_on?new Date(wt.scanned_on).toLocaleDateString():"",confidence:wt.ocr_confidence!=null?Math.round(Number(wt.ocr_confidence)*100):0,isVerified:wt.verified}]),O(!1),R(!1),alert("Medication added from scan")}catch(ft){console.error("Error inserting scanned medication:",ft),alert(ft.message||"Failed to add scanned medication")}finally{We(!1)}},$r=ze=>ze>=85?{color:"bg-[#10B981]",label:"High",message:"High confidence - AI extraction reliable"}:ze>=70?{color:"bg-[#F59E0B]",label:"Medium",message:"Medium confidence - Manual review recommended"}:{color:"bg-[#DC2626]",label:"Low",message:"Low confidence - Manual verification required"},yr=ze=>{t.navigate("MedicationVerification",{patientId:Kt,chartId:ot,medicationId:ze})},wn=ze=>{t.navigate("MedicationVerification",{patientId:Kt,chartId:ot,medicationId:ze,mode:"edit"})},Ra=async ze=>{if(!(At||!window.confirm("Are you sure you want to remove this medication from the chart?")))try{Lr(ze);const{error:gn}=await Qe.from("medications").delete().eq("id",ze);if(gn)throw gn;bt(Ee=>Ee.filter(wt=>wt.id!==ze))}catch(gn){console.error("Failed to delete medication:",gn),alert(gn.message||"Failed to delete medication")}finally{Lr(null)}},La=()=>{if(vr){alert("Please verify all medications before proceeding to chart summary.");return}t.navigate("ChartSummary",{patientId:Kt,chartId:ot,patient:Tt,medications:Me.map(ze=>({drugName:ze.drugName,strength:ze.strength,route:ze.route,frequency:ze.frequency,prescriber:ze.prescriber,scannedDate:ze.scannedDate}))})},Ss=async ze=>{try{if(tt(!0),!qt?.tenant_id){alert("User tenant ID is missing");return}if(!ot){alert("Chart ID is missing");return}const ft=await Bb(ze,ot,qt.tenant_id,qt.id);pe(gn=>[...gn,ft]),alert("Document uploaded!")}catch(ft){console.error("Upload failed:",ft),alert(ft.message||"Failed to upload document")}finally{tt(!1)}},ba=async ze=>{if(!At)try{tt(!0),await Ub(ze.id,ze.file_url),pe(ft=>ft.filter(gn=>gn.id!==ze.id))}catch(ft){console.error("Delete failed:",ft),alert(ft.message||"Failed to delete document")}finally{tt(!1)}},Xn=()=>{U(!1),K==="pdf"?alert("PDF generated and downloaded"):K==="fax"?C(!0):K==="email"&&k(!0)},Fs=()=>{alert("Fax sent successfully"),C(!1),Ht("Delivered (Locked)")},In=()=>{alert("Email sent successfully"),k(!1),Ht("Delivered (Locked)")},Na=()=>{H(!0)},Ms=()=>{Ht("Archived"),H(!1),alert("Chart archived successfully")},Fa=()=>{ue(!0)},Js=()=>{Ht("Active"),ue(!1),alert("Chart restored to Active status")},Ya=()=>{J(!0)},fi=async()=>{if(J(!1),!ot){alert("Chart ID missing");return}try{const{data:ze,error:ft}=await Qe.from("charts").update({status:"active"}).eq("id",ot).select().single();if(ft)throw ft;Ht(z_(ze.status)),alert("Chart unlocked successfully")}catch(ze){console.error("Failed to unlock chart:",ze),alert(ze.message||"Failed to unlock chart")}};return s.jsx(hn,{children:s.jsxs("div",{className:"h-screen flex flex-col bg-[#f8fafc]",children:[s.jsxs("div",{className:"bg-gradient-to-r from-[#0966CC] to-[#0C4A6E] p-5",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("button",{onClick:()=>t.goBack(),className:"w-10 h-10 rounded-xl bg-white/15 hover:bg-white/25 flex items-center justify-center transition-colors",children:s.jsx(ln,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{className:"flex-1 text-center",children:[s.jsxs("h1",{className:"text-lg text-white",children:[Tt.first_name," ",Tt.last_name]}),s.jsxs("p",{className:"text-sm text-white/80",children:["DOB: ",Tt.dob]})]}),s.jsxs(Yf,{children:[s.jsx(Xf,{asChild:!0,children:s.jsx("button",{className:"w-10 h-10 rounded-xl bg-white/15 hover:bg-white/25 flex items-center justify-center transition-colors",children:s.jsx(R0,{className:"w-5 h-5 text-white"})})}),s.jsxs(Zf,{align:"end",className:"w-56",children:[xt==="Delivered (Locked)"&&s.jsxs(s.Fragment,{children:[s.jsxs(on,{onClick:Ya,className:"cursor-pointer",children:[s.jsx(Gx,{className:"w-4 h-4 mr-2"}),"Unlock Chart"]}),s.jsx(Go,{}),s.jsxs(on,{onClick:Na,className:"cursor-pointer text-amber-600",children:[s.jsx(Wi,{className:"w-4 h-4 mr-2"}),"Archive Chart"]})]}),xt==="Active"&&s.jsxs(on,{onClick:Na,className:"cursor-pointer text-amber-600",children:[s.jsx(Wi,{className:"w-4 h-4 mr-2"}),"Archive Chart"]}),xt==="Verified Ready"&&s.jsxs(on,{onClick:Na,className:"cursor-pointer text-amber-600",children:[s.jsx(Wi,{className:"w-4 h-4 mr-2"}),"Archive Chart"]}),xt==="Needs Reverification"&&s.jsxs(on,{onClick:Na,className:"cursor-pointer text-amber-600",children:[s.jsx(Wi,{className:"w-4 h-4 mr-2"}),"Archive Chart"]}),xt==="Archived"&&s.jsxs(on,{onClick:Fa,className:"cursor-pointer text-green-600",children:[s.jsx(bf,{className:"w-4 h-4 mr-2"}),"Restore to Active"]})]})]})]}),s.jsx("div",{className:"flex justify-center",children:s.jsxs(gt,{className:Tr.classes,children:[Tr.icon," ",Tr.text]})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6 pb-32",children:s.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsxs("button",{onClick:()=>t.goBack(),className:"flex items-center gap-1 text-[#0966CC] hover:text-[#0C4A6E] transition-colors",children:[s.jsx(zN,{className:"w-4 h-4"}),"Back to Charts"]}),s.jsx("span",{className:"text-[#94a3b8]",children:"|"}),s.jsxs("span",{className:"text-[#64748b]",children:["Patient: ",Tt.first_name," ",Tt.last_name]}),s.jsx("span",{className:"text-[#94a3b8]",children:"|"}),s.jsxs("span",{className:"text-[#64748b]",children:["DOB ",Tt.dob]})]}),At&&s.jsxs("div",{className:"bg-sky-50 border-2 border-sky-100 rounded-xl p-4 flex items-start gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-sky-100 flex items-center justify-center flex-shrink-0",children:s.jsx(fs,{className:"w-4 h-4 text-sky-700"})}),s.jsxs("div",{className:"text-slate-700",children:[s.jsx("p",{className:"text-sm font-medium",children:"This chart is locked"}),s.jsx("p",{className:"text-xs text-slate-600",children:"Medications and attachments are read-only after delivery. Use the menu to unlock if corrections are needed."})]})]}),!At&&Kr>0&&s.jsxs("div",{className:"bg-gradient-to-br from-white to-[#f8fafc] rounded-2xl shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-[#E0F2FE] to-[#DBEAFE] flex items-center justify-center",children:s.jsx(w0,{className:"w-6 h-6 text-[#0966CC]"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg text-[#0f172a]",children:"Verification Progress"}),s.jsxs("p",{className:"text-sm text-[#64748b]",children:[Sr," of ",Kr," medications verified"]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-2xl text-[#0f172a]",children:[Math.round(Mr),"%"]}),s.jsx("div",{className:"text-xs text-[#64748b]",children:"Complete"})]})]}),s.jsx(kA,{value:Mr,className:"h-2.5"}),Mr===100&&s.jsxs("div",{className:"mt-4 flex items-center gap-2 text-sm text-[#10B981] bg-[#D1FAE5]/50 rounded-xl px-3 py-2",children:[s.jsx(kr,{className:"w-4 h-4"}),s.jsx("span",{children:"All medications verified! Ready to finalize."})]})]}),vr&&!At&&s.jsx("div",{className:"bg-gradient-to-br from-[#FEF3C7] to-[#FEF9E7] border-0 rounded-2xl shadow-sm p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#F59E0B]/10 flex items-center justify-center flex-shrink-0",children:s.jsx(Kn,{className:"w-5 h-5 text-[#F59E0B]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-[#92400E] mb-1",children:"Verification Required"}),s.jsx("p",{className:"text-sm text-[#92400E]/90 leading-relaxed",children:"Some medications have been changed after verification or need initial verification. All fields must be verified before delivery."})]}),s.jsxs(fn,{children:[s.jsx(mn,{asChild:!0,children:s.jsx("button",{className:"flex-shrink-0",children:s.jsx(Vf,{className:"w-4 h-4 text-[#92400E]/70"})})}),s.jsx(pn,{children:s.jsx("p",{className:"text-xs",children:"AI extraction confidence varies. Values below 85% require manual review for safety."})})]})]})}),xt==="Needs Reverification"&&st.length>0&&s.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 border-2 border-red-300 rounded-2xl shadow-sm p-5",children:[s.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-red-600 flex items-center justify-center flex-shrink-0",children:s.jsx(Kn,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-red-900 font-semibold text-lg mb-1",children:"Chart Returned for Corrections"}),s.jsx("p",{className:"text-sm text-red-800",children:"This chart has been reviewed by an admin and requires changes. Please review the feedback below and make necessary corrections."})]})]}),s.jsx("div",{className:"space-y-3",children:st.map((ze,ft)=>s.jsxs("div",{className:"bg-white rounded-xl p-4 border border-red-200",children:[s.jsx("div",{className:"flex items-start justify-between gap-3 mb-2",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-red-100 flex items-center justify-center",children:s.jsx(Bn,{className:"w-4 h-4 text-red-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-semibold text-slate-900",children:ze.reviewer?`${ze.reviewer.first_name} ${ze.reviewer.last_name}`:"Admin"}),s.jsx("p",{className:"text-xs text-slate-500",children:new Date(ze.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})]})}),s.jsx("p",{className:"text-sm text-slate-700 leading-relaxed whitespace-pre-wrap",children:ze.note})]},ze.id||ft))}),s.jsx("div",{className:"mt-4 pt-4 border-t border-red-200",children:s.jsxs("p",{className:"text-xs text-red-800 flex items-center gap-2",children:[s.jsx(Vf,{className:"w-4 h-4"}),"After making corrections, verify all medications and submit for review again."]})})]}),s.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h2",{className:"text-lg text-[#0f172a]",children:"Medications"}),!At&&s.jsxs(de,{onClick:Vn,disabled:Ue,className:"bg-[#0966CC] hover:bg-[#0C4A6E] text-white",children:[s.jsx(Da,{className:"w-4 h-4 mr-2"}),Ue?"Adding...":"Add Medication"]})]}),s.jsx(qr,{className:"mb-4"}),s.jsx("div",{className:"space-y-3",children:Me.map(ze=>{const ft=$r(ze.confidence);return s.jsx("div",{className:"bg-[#f8fafc] rounded-xl border border-[#e2e8f0] p-4 hover:border-[#cbd5e1] transition-colors",children:s.jsx("div",{className:"flex items-start justify-between gap-4 mb-3",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsxs("h3",{className:"text-[#0f172a]",children:[ze.drugName," ",ze.strength]}),s.jsxs(fn,{children:[s.jsx(mn,{asChild:!0,children:s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${ft.color}`}),s.jsxs("span",{className:"text-xs text-[#64748b]",children:[ze.confidence,"%"]})]})}),s.jsx(pn,{children:s.jsx("p",{className:"text-xs",children:ft.message})})]}),!At&&s.jsxs("div",{className:"flex items-center gap-2",children:[ze.isVerified?s.jsxs(gt,{className:"bg-[#D1FAE5] text-[#10B981] border-[#A7F3D0]",children:[s.jsx(kr,{className:"w-3 h-3 mr-1"}),"Verified"]}):s.jsx(de,{onClick:()=>yr(ze.id),size:"sm",className:"h-7 px-3 bg-[#0966CC] hover:bg-[#0C4A6E] text-white",children:"Verify"}),s.jsx(de,{onClick:()=>wn(ze.id),variant:"ghost",size:"sm",className:"h-7 px-2",children:s.jsx(jh,{className:"w-3.5 h-3.5"})}),s.jsx(de,{onClick:()=>Ra(ze.id),variant:"ghost",size:"sm",title:"Delete medication",disabled:yt===ze.id,className:"h-7 w-7 text-red-500 hover:text-red-600 hover:bg-red-50",children:s.jsx(iu,{className:"w-3.5 h-3.5"})})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-x-4 gap-y-1 text-sm",children:[s.jsxs("div",{className:"pl-3",children:[s.jsx("span",{className:"text-xs text-[#94a3b8]",children:"Route:"})," ",s.jsx("span",{className:"text-[#64748b]",children:ze.route})]}),s.jsxs("div",{className:"pl-3",children:[s.jsx("span",{className:"text-xs text-[#94a3b8]",children:"Frequency:"})," ",s.jsx("span",{className:"text-[#64748b]",children:ze.frequency})]}),s.jsxs("div",{className:"pl-3",children:[s.jsx("span",{className:"text-xs text-[#94a3b8]",children:"Prescriber:"})," ",s.jsx("span",{className:"text-[#64748b]",children:ze.prescriber})]}),s.jsxs("div",{className:"pl-3",children:[s.jsx("span",{className:"text-xs text-[#94a3b8]",children:"Scanned:"})," ",s.jsx("span",{className:"text-[#64748b]",children:ze.scannedDate})]})]})]})})},ze.id)})})]}),s.jsxs("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h2",{className:"text-lg text-[#0f172a]",children:"Attached Documents"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(de,{onClick:St,variant:"ghost",className:"h-9 w-9",title:"Refresh",disabled:at,children:s.jsx(Pl,{className:`w-4 h-4 ${at?"animate-spin":""}`})}),!At&&s.jsxs(de,{onClick:()=>l(!0),variant:"outline",className:"border-[#e2e8f0]",children:[s.jsx(F0,{className:"w-4 h-4 mr-2"}),"Attach"]})]})]}),s.jsx(qr,{className:"mb-4"}),At?be.length===0?s.jsx("p",{className:"text-sm text-[#64748b]",children:"No documents attached"}):null:s.jsx("div",{className:`border-2 border-dashed rounded-xl p-8 transition-colors ${q?"border-[#0966CC] bg-[#E0F2FE]":"border-[#cbd5e1] bg-[#f8fafc]"}`,onDragEnter:ze=>{ze.preventDefault(),re(!0)},onDragLeave:ze=>{ze.preventDefault(),re(!1)},onDragOver:ze=>{ze.preventDefault()},onDrop:async ze=>{ze.preventDefault(),re(!1);const ft=ze.dataTransfer.files?.[0];ft&&Ss(ft)},children:s.jsxs("div",{className:"text-center",children:[s.jsx(Ei,{className:"w-12 h-12 text-[#94a3b8] mx-auto mb-3"}),s.jsxs("p",{className:"text-[#64748b] mb-2",children:[" Drag & drop or"," ",s.jsx("button",{onClick:()=>kt.current?.click(),className:"text-[#0966CC] hover:text-[#0C4A6E] underline",children:"browse files"}),s.jsx("input",{ref:kt,type:"file",accept:"image/*,.pdf",hidden:!0,onChange:ze=>{const ft=ze.target.files?.[0];ft&&Ss(ft)}})]}),s.jsx("p",{className:"text-xs text-[#94a3b8]",children:"Accepted: PDF, JPG, PNG"})]})}),s.jsx("div",{className:"mt-4",children:at?s.jsx("p",{className:"text-sm text-[#64748b]",children:"Loading documents"}):Be?s.jsx("p",{className:"text-sm text-red-600",children:Be}):be.length===0?s.jsx("p",{className:"text-sm text-[#64748b]",children:"No documents attached to this chart yet."}):s.jsx("div",{className:"space-y-3",children:be.map(ze=>s.jsxs("div",{className:"flex items-center justify-between bg-[#f8fafc] border border-[#e2e8f0] rounded-xl px-4 py-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-[#0f172a] font-medium",children:ze.file_name}),s.jsxs("p",{className:"text-xs text-[#64748b]",children:[ze.file_type,"  ",new Date(ze.created_at).toLocaleString()]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(de,{onClick:()=>Rr(ze),variant:"ghost",size:"sm",className:"text-[#0966CC] hover:text-[#0C4A6E] hover:bg-[#E0F2FE]",children:[s.jsx(hs,{className:"w-4 h-4 mr-1"}),"View"]}),!At&&s.jsx(de,{onClick:()=>ba(ze),variant:"ghost",className:"h-9 w-9",title:"Delete",disabled:at,children:s.jsx(iu,{className:"w-4 h-4"})})]})]},ze.id))})})]})]})}),s.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t-2 border-[#e2e8f0] shadow-lg p-4 z-10",children:s.jsx("div",{className:"max-w-4xl mx-auto",children:!At&&Mr===100?s.jsxs("div",{className:"flex gap-3",children:[s.jsxs(de,{onClick:Vn,disabled:Ue,variant:"outline",className:"flex-1 h-12 border-2 border-[#e2e8f0]",children:[s.jsx(Da,{className:"w-4 h-4 mr-2"}),Ue?"Adding...":"Add Medication"]}),s.jsxs(de,{onClick:La,className:"flex-1 h-12 bg-green-600 hover:bg-green-700 text-white",children:[s.jsx(kr,{className:"w-4 h-4 mr-2"}),"Finalize Chart"]})]}):At?s.jsxs(de,{onClick:()=>t.goBack(),variant:"outline",className:"w-full h-12 border-2 border-[#e2e8f0]",children:[s.jsx(zN,{className:"w-4 h-4 mr-2"}),"Back to Charts"]}):s.jsxs("div",{className:"flex gap-3",children:[s.jsxs(de,{onClick:Vn,disabled:Ue,variant:"outline",className:"flex-1 h-12 border-2 border-[#e2e8f0]",children:[s.jsx(Da,{className:"w-4 h-4 mr-2"}),Ue?"Adding...":"Add Medication"]}),s.jsxs(de,{onClick:()=>{alert("Draft saved")},className:"flex-1 h-12 bg-[#0966CC] hover:bg-[#0C4A6E] text-white",children:[s.jsx(gw,{className:"w-4 h-4 mr-2"}),"Save Draft"]})]})})}),s.jsx(ar,{open:a,onOpenChange:i,children:s.jsxs(sr,{className:"sm:max-w-[500px]",children:[s.jsxs(ir,{children:[s.jsx(or,{children:"New Medication"}),s.jsx(lr,{children:"Add a new medication to this chart"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs(de,{onClick:()=>{i(!1),O(!0)},className:"h-12 rounded-xl bg-[#0966CC] hover:bg-[#0C4A6E] text-white",children:[s.jsx(Ls,{className:"w-4 h-4 mr-2"}),"Scan Barcode"]}),s.jsxs(de,{onClick:()=>{i(!1),R(!0)},variant:"outline",className:"h-12 rounded-xl border-2 border-[#e2e8f0]",children:[s.jsx(hr,{className:"w-4 h-4 mr-2"}),"OCR Label"]})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("div",{className:"w-full border-t border-[#e2e8f0]"})}),s.jsx("div",{className:"relative flex justify-center text-xs",children:s.jsx("span",{className:"bg-white px-2 text-[#64748b]",children:"or enter manually"})})]}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"drugName",children:"Drug Name *"}),s.jsx(Ze,{id:"drugName",placeholder:"Enter drug name",className:"mt-2 h-12 rounded-xl border-2 border-[#e2e8f0] bg-[#f8fafc]",value:oe,onChange:ze=>Y(ze.target.value)})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"strength",children:"Strength"}),s.jsx(Ze,{id:"strength",placeholder:"e.g., 500 mg",className:"mt-2 h-12 rounded-xl border-2 border-[#e2e8f0] bg-[#f8fafc]",value:L,onChange:ze=>z(ze.target.value)})]}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"route",children:"Route"}),s.jsx(Ze,{id:"route",placeholder:"e.g., PO",className:"mt-2 h-12 rounded-xl border-2 border-[#e2e8f0] bg-[#f8fafc]",value:V,onChange:ze=>W(ze.target.value)})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"frequency",children:"Frequency"}),s.jsx(Ze,{id:"frequency",placeholder:"e.g., BID",className:"mt-2 h-12 rounded-xl border-2 border-[#e2e8f0] bg-[#f8fafc]",value:Q,onChange:ze=>T(ze.target.value)})]}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"prescriber",children:"Prescriber"}),s.jsx(Ze,{id:"prescriber",placeholder:"Dr. Name",className:"mt-2 h-12 rounded-xl border-2 border-[#e2e8f0] bg-[#f8fafc]",value:ie,onChange:ze=>ge(ze.target.value)})]})]}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"scannedOn",children:"Scanned On"}),s.jsx(Ze,{id:"scannedOn",type:"datetime-local",placeholder:"mm/dd/yyyy --:-- --",className:"mt-2 h-12 rounded-xl border-2 border-[#e2e8f0] bg-[#f8fafc]",value:we,onChange:ze=>Se(ze.target.value)})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(de,{onClick:()=>i(!1),variant:"outline",className:"flex-1 h-12 rounded-xl",children:"Cancel"}),s.jsx(de,{onClick:Fr,disabled:Ue||!oe.trim(),className:"flex-1 h-12 rounded-xl bg-[#0966CC] hover:bg-[#0C4A6E] text-white",children:Ue?"Adding":"Add Medication"})]})]})}),s.jsx(ar,{open:j,onOpenChange:C,children:s.jsxs(sr,{className:"sm:max-w-[500px]",children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Send via Fax"}),s.jsx(lr,{children:"Enter the fax number to send this chart"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"faxNumber",children:"Fax Number *"}),s.jsx(Ze,{id:"faxNumber",type:"tel",placeholder:"(555) 123-4567",className:"mt-2 h-12 rounded-xl border-2 border-[#e2e8f0] bg-[#f8fafc]"})]}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"faxNote",children:"Note (Optional)"}),s.jsx(Ze,{id:"faxNote",placeholder:"Add a note for the recipient",className:"mt-2 h-12 rounded-xl border-2 border-[#e2e8f0] bg-[#f8fafc]"})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(de,{onClick:()=>C(!1),variant:"outline",className:"flex-1 h-12 rounded-xl",children:"Cancel"}),s.jsxs(de,{onClick:Fs,className:"flex-1 h-12 rounded-xl bg-[#10B981] hover:bg-[#059669] text-white",children:[s.jsx(vf,{className:"w-4 h-4 mr-2"}),"Send Fax"]})]})]})}),s.jsx(ar,{open:S,onOpenChange:k,children:s.jsxs(sr,{className:"sm:max-w-[500px]",children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Send via Email"}),s.jsx(lr,{children:"Enter the email address to send this chart"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"emailAddress",children:"Email Address *"}),s.jsx(Ze,{id:"emailAddress",type:"email",placeholder:"recipient@example.com",className:"mt-2 h-12 rounded-xl border-2 border-[#e2e8f0] bg-[#f8fafc]"})]}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"emailSubject",children:"Subject"}),s.jsx(Ze,{id:"emailSubject",defaultValue:`Patient Chart - ${Tt.first_name} ${Tt.last_name}`,className:"mt-2 h-12 rounded-xl border-2 border-[#e2e8f0] bg-[#f8fafc]"})]}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"emailMessage",children:"Message (Optional)"}),s.jsx(Ze,{id:"emailMessage",placeholder:"Add a message",className:"mt-2 h-12 rounded-xl border-2 border-[#e2e8f0] bg-[#f8fafc]"})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(de,{onClick:()=>k(!1),variant:"outline",className:"flex-1 h-12 rounded-xl",children:"Cancel"}),s.jsxs(de,{onClick:In,className:"flex-1 h-12 rounded-xl bg-[#F59E0B] hover:bg-[#D97706] text-white",children:[s.jsx(Mn,{className:"w-4 h-4 mr-2"}),"Send Email"]})]})]})}),s.jsx(ar,{open:o,onOpenChange:l,children:s.jsxs(sr,{className:"sm:max-w-[500px]",children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Attach Document"}),s.jsx(lr,{children:"Choose how you want to capture the document"})]}),s.jsxs("div",{className:"space-y-3 py-4",children:[s.jsx("button",{onClick:()=>{l(!1)},className:"w-full bg-white rounded-xl border-2 border-[#e2e8f0] p-4 hover:border-[#0966CC] hover:shadow-md transition-all text-left group",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-[#E0F2FE] flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform",children:s.jsx(Ls,{className:"w-6 h-6 text-[#0966CC]"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"text-[#0f172a] mb-1",children:"Bottle Photo"}),s.jsx("p",{className:"text-sm text-[#64748b]",children:"Scan medication bottle labels"})]})]})}),s.jsx("button",{onClick:()=>{l(!1)},className:"w-full bg-white rounded-xl border-2 border-[#e2e8f0] p-4 hover:border-[#0966CC] hover:shadow-md transition-all text-left group",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-[#D1FAE5] flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform",children:s.jsx(hr,{className:"w-6 h-6 text-[#10B981]"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"text-[#0f172a] mb-1",children:"Document Scan"}),s.jsx("p",{className:"text-sm text-[#64748b]",children:"Scan paper documents (DC summary, PCP med list, referrals)"})]})]})}),s.jsx("button",{onClick:()=>{l(!1)},className:"w-full bg-white rounded-xl border-2 border-[#e2e8f0] p-4 hover:border-[#0966CC] hover:shadow-md transition-all text-left group",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-[#FEF3C7] flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform",children:s.jsx(Ai,{className:"w-6 h-6 text-[#F59E0B]"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"text-[#0f172a] mb-1",children:"Import PDF/Image"}),s.jsx("p",{className:"text-sm text-[#64748b]",children:"Import a PDF or photo of a document"})]})]})})]})]})}),P&&s.jsx(Fb,{onMedicationsScanned:ze=>{const ft=ze[0];ft?Yr(ft):O(!1)},onCancel:()=>O(!1)}),$&&s.jsx(Mb,{onMedicationsScanned:ze=>{const ft=ze[0];ft?Yr(ft):R(!1)},onCancel:()=>R(!1),modal:!0}),s.jsx(Yc,{open:B,onOpenChange:U,children:s.jsxs(Xc,{children:[s.jsxs(Zc,{children:[s.jsx(Qc,{children:"Confirm Delivery"}),s.jsxs(ed,{children:["Are you sure you want to send this chart?",s.jsx("br",{}),s.jsx("strong",{className:"text-[#92400E]",children:" This chart will be locked after delivery."})]})]}),s.jsxs(Jc,{children:[s.jsx(rd,{className:"h-12 rounded-xl",children:" Cancel"}),s.jsx(td,{onClick:Xn,className:"h-12 rounded-xl bg-[#10B981] hover:bg-[#059669] text-white",children:" Confirm & Deliver"})]})]})}),s.jsx(Yc,{open:ee,onOpenChange:H,children:s.jsxs(Xc,{children:[s.jsxs(Zc,{children:[s.jsx(Qc,{children:"Archive Chart"}),s.jsxs(ed,{children:["Are you sure you want to archive this chart?",s.jsx("br",{}),s.jsx("br",{}),"Archived charts can be restored to Active status at any time."]})]}),s.jsxs(Jc,{children:[s.jsx(rd,{className:"h-12 rounded-xl",children:"Cancel"}),s.jsxs(td,{onClick:Ms,className:"h-12 rounded-xl bg-amber-600 hover:bg-amber-700 text-white",children:[s.jsx(Wi,{className:"w-4 h-4 mr-2"}),"Archive Chart"]})]})]})}),s.jsx(Yc,{open:se,onOpenChange:ue,children:s.jsxs(Xc,{children:[s.jsxs(Zc,{children:[s.jsx(Qc,{children:"Restore Chart"}),s.jsxs(ed,{children:["Are you sure you want to restore this chart to Active status?",s.jsx("br",{}),s.jsx("br",{}),"The chart will be moved from Archived to Active and can be edited again."]})]}),s.jsxs(Jc,{children:[s.jsx(rd,{className:"h-12 rounded-xl",children:"Cancel"}),s.jsxs(td,{onClick:Js,className:"h-12 rounded-xl bg-green-600 hover:bg-green-700 text-white",children:[s.jsx(bf,{className:"w-4 h-4 mr-2"}),"Restore to Active"]})]})]})}),s.jsx(Yc,{open:G,onOpenChange:J,children:s.jsxs(Xc,{children:[s.jsxs(Zc,{children:[s.jsx(Qc,{children:"Unlock Chart"}),s.jsxs(ed,{children:["Are you sure you want to unlock this chart?",s.jsx("br",{}),s.jsx("br",{}),s.jsx("strong",{className:"text-amber-700",children:" Warning:"})," Unlocking will allow the chart to be edited again. This should only be done if corrections are needed."]})]}),s.jsxs(Jc,{children:[s.jsx(rd,{className:"h-12 rounded-xl",children:"Cancel"}),s.jsxs(td,{onClick:fi,className:"h-12 rounded-xl bg-blue-600 hover:bg-blue-700 text-white",children:[s.jsx(Gx,{className:"w-4 h-4 mr-2"}),"Unlock Chart"]})]})]})}),s.jsx(ar,{open:h,onOpenChange:m,children:s.jsxs(sr,{className:"max-w-4xl max-h-[90vh] flex flex-col",children:[s.jsxs(ir,{children:[s.jsx(or,{children:c?.file_name||"Document"}),s.jsxs(lr,{children:[c?.file_type,"  Uploaded ",c?.created_at?new Date(c.created_at).toLocaleString():""]})]}),s.jsx("div",{className:"flex-1 overflow-auto",children:y?s.jsx("div",{className:"flex items-center justify-center p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Pl,{className:"w-8 h-8 text-[#F59E0B] animate-spin mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-[#64748b]",children:"Loading document..."})]})}):c?.file_type?.includes("pdf")?s.jsx("iframe",{src:x,className:"w-full h-[600px] border-0 rounded-lg",title:c.file_name}):s.jsx("div",{className:"flex items-center justify-center p-4",children:s.jsx("img",{src:x,alt:c?.file_name||"Document",className:"max-w-full max-h-[600px] object-contain rounded-lg"})})})]})})]})})}function tJ({navigation:t,route:e}){const{patientId:r,chartId:n,medicationId:a,mode:i}=e.params||{},o=i==="edit",{user:l}=Ka(),[c,u]=N.useState({value:"",isVerified:!1,confidence:90}),[h,m]=N.useState({value:"",isVerified:!1,confidence:85}),[x,p]=N.useState({value:"",isVerified:!1,confidence:90}),[y,w]=N.useState({value:"",isVerified:!1,confidence:80}),[j,C]=N.useState({value:"",isVerified:!1,confidence:80}),[S,k]=N.useState(""),[P,O]=N.useState(null),[$,R]=N.useState(!1),[B,U]=N.useState(null);N.useEffect(()=>{(async()=>{if(a)try{R(!0);const{data:se,error:ue}=await Qe.from("medications").select("drug_name, strength, route, frequency, prescriber, scanned_on, ocr_confidence, verified, scanned_image").eq("id",a).single();if(ue)throw ue;if(!se)return;const G=se.ocr_confidence!=null?Math.round(Number(se.ocr_confidence)*100):90;u({value:se.drug_name??"",isVerified:!!se.verified,confidence:G}),m({value:se.strength??"",isVerified:!!se.verified,confidence:G}),p({value:se.route??"",isVerified:!!se.verified,confidence:G}),w({value:se.frequency??"",isVerified:!!se.verified,confidence:G}),C({value:se.prescriber??"",isVerified:!!se.verified,confidence:G}),k(se.scanned_on?new Date(se.scanned_on).toLocaleString():""),O(se.scanned_image||null),U(null)}catch(se){console.error("Error loading medication",se),U(se.message||"Failed to load medication")}finally{R(!1)}})()},[a]);const K=c.isVerified&&h.isVerified&&x.isVerified&&y.isVerified&&j.isVerified,M=H=>{switch(H){case"drugName":u({...c,isVerified:!0});break;case"strength":m({...h,isVerified:!0});break;case"medicationRoute":p({...x,isVerified:!0});break;case"frequency":w({...y,isVerified:!0});break;case"prescriber":C({...j,isVerified:!0});break}},q=()=>{t.navigate("ClinicianDashboard")},re=async()=>{if(!K){alert("Please verify all fields before saving");return}try{if(R(!0),!n||!l?.tenant_id)throw new Error("Missing chart or tenant information");const H={chart_id:n,tenant_id:l.tenant_id,drug_name:c.value,strength:h.value||null,route:x.value||null,frequency:y.value||null,prescriber:j.value||null,instructions:null,notes:null,scanned_on:S?new Date(S).toISOString():null,ocr_confidence:.9,verified:!0,changed_after_verify:!1,scanned_image:P||null};let se=a;if(a){const{data:ue,error:G}=await Qe.from("medications").update(H).eq("id",a).select("id").single();if(G)throw G;se=ue.id}else{const{data:ue,error:G}=await Qe.from("medications").insert([H]).select("id").single();if(G)throw G;se=ue.id}t.navigate("ChartDetail",{patientId:r,chartId:n})}catch(H){console.error("Error saving medication",H),alert(H.message||"Failed to save medication")}finally{R(!1)}},ee=({label:H,field:se,value:ue,isVerified:G,confidence:J,onChange:oe,onVerify:Y})=>s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx(Fe,{htmlFor:se,children:H}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(gt,{className:J>=90?"bg-[#D1FAE5] text-[#10B981] border-[#A7F3D0]":J>=75?"bg-[#FEF3C7] text-[#F59E0B] border-[#FDE68A]":"bg-[#FEE2E2] text-[#DC2626] border-[#FECACA]",children:[J,"% confidence"]}),G&&s.jsxs(gt,{className:"bg-[#D1FAE5] text-[#10B981] border-[#A7F3D0]",children:[s.jsx(kr,{className:"w-3 h-3 mr-1"}),"Verified"]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ze,{id:se,value:ue,onChange:L=>oe(L.target.value),className:"flex-1 h-12 rounded-xl border-2 border-[#e2e8f0] bg-[#f8fafc]"}),!G&&s.jsx(de,{onClick:Y,className:"bg-[#0966CC] hover:bg-[#0C4A6E] text-white px-6",children:"Verify"})]})]});return s.jsxs("div",{className:"h-screen flex flex-col bg-[#f8fafc]",children:[s.jsx("div",{className:"bg-gradient-to-r from-[#0966CC] to-[#0C4A6E] p-5",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("button",{onClick:()=>t.goBack(),className:"w-10 h-10 rounded-xl bg-white/15 hover:bg-white/25 flex items-center justify-center transition-colors",children:s.jsx(ln,{className:"w-5 h-5 text-white"})}),s.jsx("h1",{className:"text-lg text-white",children:o?"Edit Medication":"Verify Medication"}),s.jsxs(de,{onClick:q,variant:"ghost",size:"sm",className:"h-9 px-3 rounded-xl bg-white/10 hover:bg-white/20 text-white text-sm font-medium flex items-center gap-1",children:[s.jsx(ps,{className:"w-4 h-4"}),"Exit"]})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:s.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[!K&&s.jsx("div",{className:"bg-[#FEF3C7] border-2 border-[#FDE68A] rounded-xl p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(go,{className:"w-5 h-5 text-[#F59E0B] flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-[#92400E] mb-1",children:"Field Verification Required"}),s.jsx("p",{className:"text-sm text-[#92400E]",children:'Please review and verify each field. Click "Verify" on each field after confirming the information is correct.'})]})]})}),s.jsxs("div",{className:"bg-white rounded-xl border border-[#e2e8f0] p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg text-[#0f172a]",children:"Scanned Image"}),s.jsxs(gt,{className:"bg-[#E0F2FE] text-[#0966CC] border-[#BFDBFE]",children:[s.jsx(Ls,{className:"w-3 h-3 mr-1"}),S]})]}),P?s.jsx("div",{className:"rounded-xl border-2 border-[#e2e8f0] overflow-hidden bg-[#f8fafc]",children:s.jsx("img",{src:P,alt:"Scanned medication",className:"w-full h-auto"})}):s.jsx("div",{className:"aspect-video bg-[#f8fafc] rounded-xl border-2 border-dashed border-[#e2e8f0] flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Ls,{className:"w-12 h-12 text-[#cbd5e1] mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-[#64748b]",children:"No scanned image available"})]})})]}),s.jsxs("div",{className:"bg-white rounded-xl border border-[#e2e8f0] p-6",children:[s.jsx("h2",{className:"text-lg text-[#0f172a] mb-4",children:"Medication Information"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(ee,{label:"Drug Name",field:"drugName",value:c.value,isVerified:c.isVerified,confidence:c.confidence,onChange:H=>u({...c,value:H,isVerified:!1}),onVerify:()=>M("drugName")}),s.jsx(ee,{label:"Strength",field:"strength",value:h.value,isVerified:h.isVerified,confidence:h.confidence,onChange:H=>m({...h,value:H,isVerified:!1}),onVerify:()=>M("strength")}),s.jsx(ee,{label:"Route",field:"medicationRoute",value:x.value,isVerified:x.isVerified,confidence:x.confidence,onChange:H=>p({...x,value:H,isVerified:!1}),onVerify:()=>M("medicationRoute")}),s.jsx(ee,{label:"Frequency",field:"frequency",value:y.value,isVerified:y.isVerified,confidence:y.confidence,onChange:H=>w({...y,value:H,isVerified:!1}),onVerify:()=>M("frequency")}),s.jsx(ee,{label:"Prescriber",field:"prescriber",value:j.value,isVerified:j.isVerified,confidence:j.confidence,onChange:H=>C({...j,value:H,isVerified:!1}),onVerify:()=>M("prescriber")})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(de,{onClick:()=>t.goBack(),variant:"outline",className:"flex-1 h-12 rounded-xl border-2 border-[#e2e8f0]",children:"Cancel"}),s.jsxs(de,{onClick:re,className:"flex-1 h-12 rounded-xl bg-[#0966CC] hover:bg-[#0C4A6E] text-white",disabled:!K,children:[s.jsx(kr,{className:"w-4 h-4 mr-2"}),"Save ",K?"":"(Verify All Fields)"]})]})]})})]})}function rJ({navigation:t,route:e}){const{patient:r,medications:n=[],patientId:a,chartId:i}=e.params||{},o={first_name:"",last_name:"",dob:"",phone:"",address1:"",address2:"",city:"",state:"",zip_code:"",notes:"",...r||{}},l=()=>{t.goBack()},c=()=>{t.navigate("ClinicianDashboard")},u=()=>{t.navigate("ChartDelivery",{patient:o,patientId:a,chartId:i,medications:n})},h=x=>x?new Date(x).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Not provided",m=x=>{if(!x)return null;const p=new Date,y=new Date(x);let w=p.getFullYear()-y.getFullYear();const j=p.getMonth()-y.getMonth();return(j<0||j===0&&p.getDate()<y.getDate())&&w--,w};return s.jsxs("div",{className:"h-screen flex flex-col bg-[#f8fafc]",children:[s.jsx("div",{className:"bg-gradient-to-r from-[#0966CC] to-[#0C4A6E] p-5 shadow-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("button",{onClick:l,className:"w-10 h-10 rounded-xl bg-white/15 hover:bg-white/25 flex items-center justify-center transition-colors","aria-label":"Back",children:s.jsx(ln,{className:"w-5 h-5 text-white"})}),s.jsx("h1",{className:"text-lg text-white",children:"Chart Summary"}),s.jsxs(de,{onClick:c,variant:"ghost",size:"sm",className:"h-9 px-3 rounded-xl bg-white/10 hover:bg-white/20 text-white text-sm font-medium flex items-center gap-1",children:[s.jsx(ps,{className:"w-4 h-4"}),"Exit"]})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto pb-24",children:s.jsxs("div",{className:"max-w-2xl mx-auto p-6 space-y-6",children:[s.jsx("div",{className:"bg-white rounded-2xl border border-sky-200 p-5 shadow-sm",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-sky-100 flex items-center justify-center flex-shrink-0",children:s.jsx(kr,{className:"w-5 h-5 text-sky-600"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-slate-900 mb-1",children:"Review Complete Chart"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Please confirm all information is correct before proceeding to delivery"})]})]})}),s.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[s.jsx("div",{className:"p-5 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-sky-100 flex items-center justify-center",children:s.jsx(Bn,{className:"w-5 h-5 text-sky-600"})}),s.jsx("h3",{className:"text-sm font-semibold text-slate-700 uppercase tracking-wide",children:"Patient Information"})]})}),s.jsxs("div",{className:"p-6",children:[s.jsxs("h4",{className:"text-2xl text-slate-900 font-semibold mb-2",children:[o.first_name," ",o.last_name]}),o.dob&&s.jsxs("p",{className:"text-slate-600",children:["Age ",m(o.dob),"  DOB: ",h(o.dob)]})]})]}),s.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[s.jsxs("div",{className:"p-5 border-b border-slate-200 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-green-100 flex items-center justify-center",children:s.jsx(zf,{className:"w-5 h-5 text-green-600"})}),s.jsx("h3",{className:"text-sm font-semibold text-slate-700 uppercase tracking-wide",children:"Verified Medications"})]}),s.jsxs(gt,{className:"bg-[#D1FAE5] text-[#10B981] border-[#A7F3D0]",children:[s.jsx(kr,{className:"w-3 h-3 mr-1"}),n?.length||0," Medications"]})]}),s.jsx("div",{className:"divide-y divide-slate-200",children:n?.map((x,p)=>s.jsx("div",{className:"p-6 hover:bg-slate-50 transition-colors",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-sky-50 flex items-center justify-center flex-shrink-0",children:s.jsx("span",{className:"text-sm font-semibold text-sky-600",children:p+1})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"mb-3",children:s.jsxs("h4",{className:"text-lg text-slate-900 font-semibold",children:[x.drugName," ",x.strength]})}),s.jsx(qr,{className:"my-3"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wide mb-1",children:"Drug Name"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:"text-sm text-slate-900 font-medium",children:x.drugName}),s.jsx(kr,{className:"w-3.5 h-3.5 text-green-600"})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wide mb-1",children:"Strength"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:"text-sm text-slate-900 font-medium",children:x.strength}),s.jsx(kr,{className:"w-3.5 h-3.5 text-green-600"})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wide mb-1",children:"Route"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:"text-sm text-slate-900 font-medium",children:x.route}),s.jsx(kr,{className:"w-3.5 h-3.5 text-green-600"})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wide mb-1",children:"Frequency"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:"text-sm text-slate-900 font-medium",children:x.frequency}),s.jsx(kr,{className:"w-3.5 h-3.5 text-green-600"})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wide mb-1",children:"Prescriber"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:"text-sm text-slate-900 font-medium",children:x.prescriber}),s.jsx(kr,{className:"w-3.5 h-3.5 text-green-600"})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wide mb-1",children:"Scanned Date"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Zo,{className:"w-3.5 h-3.5 text-slate-400"}),s.jsx("p",{className:"text-sm text-slate-900 font-medium",children:x.scannedDate})]})]})]})]})]})},p))})]}),s.jsx("div",{className:"bg-sky-50 border border-sky-200 rounded-2xl p-5",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-sky-600 flex items-center justify-center flex-shrink-0",children:s.jsx("span",{className:"text-white text-xs font-bold",children:"!"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-slate-900 font-medium mb-1",children:"Confirm Complete Chart"}),s.jsxs("p",{className:"text-sm text-slate-600",children:["By proceeding, you confirm that all ",n?.length||0," medication(s) have been reviewed and are accurate. Next, you'll select delivery options."]})]})]})})]})}),s.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-slate-200 shadow-lg z-50",children:s.jsx("div",{className:"max-w-2xl mx-auto px-6 py-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[s.jsxs(de,{onClick:l,variant:"outline",className:"flex-1 h-12 rounded-xl border-2 border-slate-300 hover:bg-slate-50 text-slate-700 font-medium",children:[s.jsx(ln,{className:"w-4 h-4 mr-2"}),"Back to Chart"]}),s.jsxs(de,{onClick:u,className:"flex-1 h-12 rounded-xl bg-green-600 hover:bg-green-700 text-white font-medium shadow-sm",children:[s.jsx(kr,{className:"w-4 h-4 mr-2"}),"Confirm & Continue to Delivery"]})]})})})]})}const nJ="modulepreload",sJ=function(t){return"/luminousrehab-demo/"+t},q_={},f0=function(e,r,n){let a=Promise.resolve();if(r&&r.length>0){let o=function(u){return Promise.all(u.map(h=>Promise.resolve(h).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=l?.nonce||l?.getAttribute("nonce");a=o(r.map(u=>{if(u=sJ(u),u in q_)return;q_[u]=!0;const h=u.endsWith(".css"),m=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${m}`))return;const x=document.createElement("link");if(x.rel=h?"stylesheet":nJ,h||(x.as="script"),x.crossOrigin="",x.href=u,c&&x.setAttribute("nonce",c),document.head.appendChild(x),h)return new Promise((p,y)=>{x.addEventListener("load",p),x.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};function Tn(t){"@babel/helpers - typeof";return Tn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tn(t)}var Ol=Uint8Array,No=Uint16Array,Yb=Int32Array,Xb=new Ol([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Zb=new Ol([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),H_=new Ol([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ok=function(t,e){for(var r=new No(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var a=new Yb(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)a[i]=i-r[n]<<5|n;return{b:r,r:a}},Rk=Ok(Xb,2),aJ=Rk.b,Hy=Rk.r;aJ[28]=258,Hy[258]=28;var iJ=Ok(Zb,0),W_=iJ.r,Wy=new No(32768);for(var ns=0;ns<32768;++ns){var Vd=(ns&43690)>>1|(ns&21845)<<1;Vd=(Vd&52428)>>2|(Vd&13107)<<2,Vd=(Vd&61680)>>4|(Vd&3855)<<4,Wy[ns]=((Vd&65280)>>8|(Vd&255)<<8)>>1}var m0=(function(t,e,r){for(var n=t.length,a=0,i=new No(e);a<n;++a)t[a]&&++i[t[a]-1];var o=new No(e);for(a=1;a<e;++a)o[a]=o[a-1]+i[a-1]<<1;var l;if(r){l=new No(1<<e);var c=15-e;for(a=0;a<n;++a)if(t[a])for(var u=a<<4|t[a],h=e-t[a],m=o[t[a]-1]++<<h,x=m|(1<<h)-1;m<=x;++m)l[Wy[m]>>c]=u}else for(l=new No(n),a=0;a<n;++a)t[a]&&(l[a]=Wy[o[t[a]-1]++]>>15-t[a]);return l}),bh=new Ol(288);for(var ns=0;ns<144;++ns)bh[ns]=8;for(var ns=144;ns<256;++ns)bh[ns]=9;for(var ns=256;ns<280;++ns)bh[ns]=7;for(var ns=280;ns<288;++ns)bh[ns]=8;var f1=new Ol(32);for(var ns=0;ns<32;++ns)f1[ns]=5;var oJ=m0(bh,9,0),lJ=m0(f1,5,0),Lk=function(t){return(t+7)/8|0},cJ=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new Ol(t.subarray(e,r))},Hc=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},Wm=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},u2=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var a=r.length,i=r.slice();if(!a)return{t:Mk,l:0};if(a==1){var o=new Ol(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(O,$){return O.f-$.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],u=0,h=1,m=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};h!=a-1;)l=r[r[u].f<r[m].f?u++:m++],c=r[u!=h&&r[u].f<r[m].f?u++:m++],r[h++]={s:-1,f:l.f+c.f,l,r:c};for(var x=i[0].s,n=1;n<a;++n)i[n].s>x&&(x=i[n].s);var p=new No(x+1),y=Gy(r[h-1],p,0);if(y>e){var n=0,w=0,j=y-e,C=1<<j;for(i.sort(function($,R){return p[R.s]-p[$.s]||$.f-R.f});n<a;++n){var S=i[n].s;if(p[S]>e)w+=C-(1<<y-p[S]),p[S]=e;else break}for(w>>=j;w>0;){var k=i[n].s;p[k]<e?w-=1<<e-p[k]++-1:++n}for(;n>=0&&w;--n){var P=i[n].s;p[P]==e&&(--p[P],++w)}y=e}return{t:new Ol(p),l:y}},Gy=function(t,e,r){return t.s==-1?Math.max(Gy(t.l,e,r+1),Gy(t.r,e,r+1)):e[t.s]=r},G_=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new No(++e),n=0,a=t[0],i=1,o=function(c){r[n++]=c},l=1;l<=e;++l)if(t[l]==a&&l!=e)++i;else{if(!a&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(a),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(a);i=1,a=t[l]}return{c:r.subarray(0,n),n:e}},Gm=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},Fk=function(t,e,r){var n=r.length,a=Lk(e+2);t[a]=n&255,t[a+1]=n>>8,t[a+2]=t[a]^255,t[a+3]=t[a+1]^255;for(var i=0;i<n;++i)t[a+i+4]=r[i];return(a+4+n)*8},K_=function(t,e,r,n,a,i,o,l,c,u,h){Hc(e,h++,r),++a[256];for(var m=u2(a,15),x=m.t,p=m.l,y=u2(i,15),w=y.t,j=y.l,C=G_(x),S=C.c,k=C.n,P=G_(w),O=P.c,$=P.n,R=new No(19),B=0;B<S.length;++B)++R[S[B]&31];for(var B=0;B<O.length;++B)++R[O[B]&31];for(var U=u2(R,7),K=U.t,M=U.l,q=19;q>4&&!K[H_[q-1]];--q);var re=u+5<<3,ee=Gm(a,bh)+Gm(i,f1)+o,H=Gm(a,x)+Gm(i,w)+o+14+3*q+Gm(R,K)+2*R[16]+3*R[17]+7*R[18];if(c>=0&&re<=ee&&re<=H)return Fk(e,h,t.subarray(c,c+u));var se,ue,G,J;if(Hc(e,h,1+(H<ee)),h+=2,H<ee){se=m0(x,p,0),ue=x,G=m0(w,j,0),J=w;var oe=m0(K,M,0);Hc(e,h,k-257),Hc(e,h+5,$-1),Hc(e,h+10,q-4),h+=14;for(var B=0;B<q;++B)Hc(e,h+3*B,K[H_[B]]);h+=3*q;for(var Y=[S,O],L=0;L<2;++L)for(var z=Y[L],B=0;B<z.length;++B){var V=z[B]&31;Hc(e,h,oe[V]),h+=K[V],V>15&&(Hc(e,h,z[B]>>5&127),h+=z[B]>>12)}}else se=oJ,ue=bh,G=lJ,J=f1;for(var B=0;B<l;++B){var W=n[B];if(W>255){var V=W>>18&31;Wm(e,h,se[V+257]),h+=ue[V+257],V>7&&(Hc(e,h,W>>23&31),h+=Xb[V]);var Q=W&31;Wm(e,h,G[Q]),h+=J[Q],Q>3&&(Wm(e,h,W>>5&8191),h+=Zb[Q])}else Wm(e,h,se[W]),h+=ue[W]}return Wm(e,h,se[256]),h+ue[256]},dJ=new Yb([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Mk=new Ol(0),uJ=function(t,e,r,n,a,i){var o=i.z||t.length,l=new Ol(n+o+5*(1+Math.ceil(o/7e3))+a),c=l.subarray(n,l.length-a),u=i.l,h=(i.r||0)&7;if(e){h&&(c[0]=i.r>>3);for(var m=dJ[e-1],x=m>>13,p=m&8191,y=(1<<r)-1,w=i.p||new No(32768),j=i.h||new No(y+1),C=Math.ceil(r/3),S=2*C,k=function(be){return(t[be]^t[be+1]<<C^t[be+2]<<S)&y},P=new Yb(25e3),O=new No(288),$=new No(32),R=0,B=0,U=i.i||0,K=0,M=i.w||0,q=0;U+2<o;++U){var re=k(U),ee=U&32767,H=j[re];if(w[ee]=H,j[re]=ee,M<=U){var se=o-U;if((R>7e3||K>24576)&&(se>423||!u)){h=K_(t,c,0,P,O,$,B,K,q,U-q,h),K=R=B=0,q=U;for(var ue=0;ue<286;++ue)O[ue]=0;for(var ue=0;ue<30;++ue)$[ue]=0}var G=2,J=0,oe=p,Y=ee-H&32767;if(se>2&&re==k(U-Y))for(var L=Math.min(x,se)-1,z=Math.min(32767,U),V=Math.min(258,se);Y<=z&&--oe&&ee!=H;){if(t[U+G]==t[U+G-Y]){for(var W=0;W<V&&t[U+W]==t[U+W-Y];++W);if(W>G){if(G=W,J=Y,W>L)break;for(var Q=Math.min(Y,W-2),T=0,ue=0;ue<Q;++ue){var ie=U-Y+ue&32767,ge=w[ie],we=ie-ge&32767;we>T&&(T=we,H=ie)}}}ee=H,H=w[ee],Y+=ee-H&32767}if(J){P[K++]=268435456|Hy[G]<<18|W_[J];var Se=Hy[G]&31,Ue=W_[J]&31;B+=Xb[Se]+Zb[Ue],++O[257+Se],++$[Ue],M=U+G,++R}else P[K++]=t[U],++O[t[U]]}}for(U=Math.max(U,M);U<o;++U)P[K++]=t[U],++O[t[U]];h=K_(t,c,u,P,O,$,B,K,q,U-q,h),u||(i.r=h&7|c[h/8|0]<<3,h-=7,i.h=j,i.p=w,i.i=U,i.w=M)}else{for(var U=i.w||0;U<o+u;U+=65535){var We=U+65535;We>=o&&(c[h/8|0]=u,We=o),h=Fk(c,h+1,t.subarray(U,We))}i.i=o}return cJ(l,0,n+Lk(h)+a)},Bk=function(){var t=1,e=0;return{p:function(r){for(var n=t,a=e,i=r.length|0,o=0;o!=i;){for(var l=Math.min(o+2655,i);o<l;++o)a+=n+=r[o];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}t=n,e=a},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},hJ=function(t,e,r,n,a){if(!a&&(a={l:1},e.dictionary)){var i=e.dictionary.subarray(-32768),o=new Ol(i.length+t.length);o.set(i),o.set(t,i.length),t=o,a.w=i.length}return uJ(t,e.level==null?6:e.level,e.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,a)},Uk=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},fJ=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var a=Bk();a.p(e.dictionary),Uk(t,2,a.d())}};function Ky(t,e){e||(e={});var r=Bk();r.p(t);var n=hJ(t,e,e.dictionary?6:2,4);return fJ(n,e),Uk(n,n.length-4,r.d()),n}var mJ=typeof TextDecoder<"u"&&new TextDecoder,pJ=0;try{mJ.decode(Mk,{stream:!0}),pJ=1}catch{}function xJ(t){if(Array.isArray(t))return t}function gJ(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(h){u=!0,a=h}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Y_(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function vJ(t,e){if(t){if(typeof t=="string")return Y_(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Y_(t,e):void 0}}function yJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X_(t,e){return xJ(t)||gJ(t,e)||vJ(t,e)||yJ()}function Z_(t,e="utf8"){return new TextDecoder(e).decode(t)}const wJ=new TextEncoder;function bJ(t){return wJ.encode(t)}const NJ=1024*8,jJ=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),h2={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Jb{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=NJ,r={}){let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const a=r.offset?r.offset>>>0:0,i=e.byteLength-a;let o=a;(ArrayBuffer.isView(e)||e instanceof Jb)&&(e.byteLength!==e.buffer.byteLength&&(o=e.byteOffset+a),e=e.buffer),n?this.lastWrittenByte=i:this.lastWrittenByte=0,this.buffer=e,this.length=i,this.byteLength=i,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,i),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,a=new Uint8Array(n);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,r){const n=h2[r].BYTES_PER_ELEMENT*e,a=this.byteOffset+this.offset,i=this.buffer.slice(a,a+n);if(this.littleEndian===jJ&&r!=="uint8"&&r!=="int8"){const l=new Uint8Array(this.buffer.slice(a,a+n));l.reverse();const c=new h2[r](l.buffer);return this.offset+=n,c.reverse(),c}const o=new h2[r](i);return this.offset+=n,o}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let r="";for(let n=0;n<e;n++)r+=this.readChar();return r}readUtf8(e=1){return Z_(this.readBytes(e))}decodeText(e=1,r="utf8"){return Z_(this.readBytes(e),r)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let r=0;r<e.length;r++)this._data.setUint8(this.offset++,e[r]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let r=0;r<e.length;r++)this.writeUint8(e.charCodeAt(r));return this}writeUtf8(e){return this.writeBytes(bJ(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function hm(t){let e=t.length;for(;--e>=0;)t[e]=0}const _J=3,CJ=258,$k=29,SJ=256,AJ=SJ+1+$k,Vk=30,EJ=512,kJ=new Array((AJ+2)*2);hm(kJ);const PJ=new Array(Vk*2);hm(PJ);const TJ=new Array(EJ);hm(TJ);const IJ=new Array(CJ-_J+1);hm(IJ);const DJ=new Array($k);hm(DJ);const OJ=new Array(Vk);hm(OJ);const RJ=(t,e,r,n)=>{let a=t&65535|0,i=t>>>16&65535|0,o=0;for(;r!==0;){o=r>2e3?2e3:r,r-=o;do a=a+e[n++]|0,i=i+a|0;while(--o);a%=65521,i%=65521}return a|i<<16|0};var Yy=RJ;const LJ=()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e},FJ=new Uint32Array(LJ()),MJ=(t,e,r,n)=>{const a=FJ,i=n+r;t^=-1;for(let o=n;o<i;o++)t=t>>>8^a[(t^e[o])&255];return t^-1};var Ql=MJ,Xy={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},zk={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const BJ=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var UJ=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)BJ(r,n)&&(t[n]=r[n])}}return t},$J=t=>{let e=0;for(let n=0,a=t.length;n<a;n++)e+=t[n].length;const r=new Uint8Array(e);for(let n=0,a=0,i=t.length;n<i;n++){let o=t[n];r.set(o,a),a+=o.length}return r},qk={assign:UJ,flattenChunks:$J};let Hk=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Hk=!1}const I0=new Uint8Array(256);for(let t=0;t<256;t++)I0[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;I0[254]=I0[254]=1;var VJ=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,r,n,a,i,o=t.length,l=0;for(a=0;a<o;a++)r=t.charCodeAt(a),(r&64512)===55296&&a+1<o&&(n=t.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),l+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(l),i=0,a=0;i<l;a++)r=t.charCodeAt(a),(r&64512)===55296&&a+1<o&&(n=t.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),r<128?e[i++]=r:r<2048?(e[i++]=192|r>>>6,e[i++]=128|r&63):r<65536?(e[i++]=224|r>>>12,e[i++]=128|r>>>6&63,e[i++]=128|r&63):(e[i++]=240|r>>>18,e[i++]=128|r>>>12&63,e[i++]=128|r>>>6&63,e[i++]=128|r&63);return e};const zJ=(t,e)=>{if(e<65534&&t.subarray&&Hk)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r};var qJ=(t,e)=>{const r=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let n,a;const i=new Array(r*2);for(a=0,n=0;n<r;){let o=t[n++];if(o<128){i[a++]=o;continue}let l=I0[o];if(l>4){i[a++]=65533,n+=l-1;continue}for(o&=l===2?31:l===3?15:7;l>1&&n<r;)o=o<<6|t[n++]&63,l--;if(l>1){i[a++]=65533;continue}o<65536?i[a++]=o:(o-=65536,i[a++]=55296|o>>10&1023,i[a++]=56320|o&1023)}return zJ(i,a)},HJ=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let r=e-1;for(;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+I0[t[r]]>e?r:e},Zy={string2buf:VJ,buf2string:qJ,utf8border:HJ};function WJ(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var GJ=WJ;const dx=16209,KJ=16191;var YJ=function(e,r){let n,a,i,o,l,c,u,h,m,x,p,y,w,j,C,S,k,P,O,$,R,B,U,K;const M=e.state;n=e.next_in,U=e.input,a=n+(e.avail_in-5),i=e.next_out,K=e.output,o=i-(r-e.avail_out),l=i+(e.avail_out-257),c=M.dmax,u=M.wsize,h=M.whave,m=M.wnext,x=M.window,p=M.hold,y=M.bits,w=M.lencode,j=M.distcode,C=(1<<M.lenbits)-1,S=(1<<M.distbits)-1;e:do{y<15&&(p+=U[n++]<<y,y+=8,p+=U[n++]<<y,y+=8),k=w[p&C];t:for(;;){if(P=k>>>24,p>>>=P,y-=P,P=k>>>16&255,P===0)K[i++]=k&65535;else if(P&16){O=k&65535,P&=15,P&&(y<P&&(p+=U[n++]<<y,y+=8),O+=p&(1<<P)-1,p>>>=P,y-=P),y<15&&(p+=U[n++]<<y,y+=8,p+=U[n++]<<y,y+=8),k=j[p&S];r:for(;;){if(P=k>>>24,p>>>=P,y-=P,P=k>>>16&255,P&16){if($=k&65535,P&=15,y<P&&(p+=U[n++]<<y,y+=8,y<P&&(p+=U[n++]<<y,y+=8)),$+=p&(1<<P)-1,$>c){e.msg="invalid distance too far back",M.mode=dx;break e}if(p>>>=P,y-=P,P=i-o,$>P){if(P=$-P,P>h&&M.sane){e.msg="invalid distance too far back",M.mode=dx;break e}if(R=0,B=x,m===0){if(R+=u-P,P<O){O-=P;do K[i++]=x[R++];while(--P);R=i-$,B=K}}else if(m<P){if(R+=u+m-P,P-=m,P<O){O-=P;do K[i++]=x[R++];while(--P);if(R=0,m<O){P=m,O-=P;do K[i++]=x[R++];while(--P);R=i-$,B=K}}}else if(R+=m-P,P<O){O-=P;do K[i++]=x[R++];while(--P);R=i-$,B=K}for(;O>2;)K[i++]=B[R++],K[i++]=B[R++],K[i++]=B[R++],O-=3;O&&(K[i++]=B[R++],O>1&&(K[i++]=B[R++]))}else{R=i-$;do K[i++]=K[R++],K[i++]=K[R++],K[i++]=K[R++],O-=3;while(O>2);O&&(K[i++]=K[R++],O>1&&(K[i++]=K[R++]))}}else if((P&64)===0){k=j[(k&65535)+(p&(1<<P)-1)];continue r}else{e.msg="invalid distance code",M.mode=dx;break e}break}}else if((P&64)===0){k=w[(k&65535)+(p&(1<<P)-1)];continue t}else if(P&32){M.mode=KJ;break e}else{e.msg="invalid literal/length code",M.mode=dx;break e}break}}while(n<a&&i<l);O=y>>3,n-=O,y-=O<<3,p&=(1<<y)-1,e.next_in=n,e.next_out=i,e.avail_in=n<a?5+(a-n):5-(n-a),e.avail_out=i<l?257+(l-i):257-(i-l),M.hold=p,M.bits=y};const ff=15,J_=852,Q_=592,e3=0,f2=1,t3=2,XJ=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),ZJ=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),JJ=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),QJ=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),eQ=(t,e,r,n,a,i,o,l)=>{const c=l.bits;let u=0,h=0,m=0,x=0,p=0,y=0,w=0,j=0,C=0,S=0,k,P,O,$,R,B=null,U;const K=new Uint16Array(ff+1),M=new Uint16Array(ff+1);let q=null,re,ee,H;for(u=0;u<=ff;u++)K[u]=0;for(h=0;h<n;h++)K[e[r+h]]++;for(p=c,x=ff;x>=1&&K[x]===0;x--);if(p>x&&(p=x),x===0)return a[i++]=1<<24|64<<16|0,a[i++]=1<<24|64<<16|0,l.bits=1,0;for(m=1;m<x&&K[m]===0;m++);for(p<m&&(p=m),j=1,u=1;u<=ff;u++)if(j<<=1,j-=K[u],j<0)return-1;if(j>0&&(t===e3||x!==1))return-1;for(M[1]=0,u=1;u<ff;u++)M[u+1]=M[u]+K[u];for(h=0;h<n;h++)e[r+h]!==0&&(o[M[e[r+h]]++]=h);if(t===e3?(B=q=o,U=20):t===f2?(B=XJ,q=ZJ,U=257):(B=JJ,q=QJ,U=0),S=0,h=0,u=m,R=i,y=p,w=0,O=-1,C=1<<p,$=C-1,t===f2&&C>J_||t===t3&&C>Q_)return 1;for(;;){re=u-w,o[h]+1<U?(ee=0,H=o[h]):o[h]>=U?(ee=q[o[h]-U],H=B[o[h]-U]):(ee=96,H=0),k=1<<u-w,P=1<<y,m=P;do P-=k,a[R+(S>>w)+P]=re<<24|ee<<16|H|0;while(P!==0);for(k=1<<u-1;S&k;)k>>=1;if(k!==0?(S&=k-1,S+=k):S=0,h++,--K[u]===0){if(u===x)break;u=e[r+o[h]]}if(u>p&&(S&$)!==O){for(w===0&&(w=p),R+=m,y=u-w,j=1<<y;y+w<x&&(j-=K[y+w],!(j<=0));)y++,j<<=1;if(C+=1<<y,t===f2&&C>J_||t===t3&&C>Q_)return 1;O=S&$,a[O]=p<<24|y<<16|R-i|0}}return S!==0&&(a[R+S]=u-w<<24|64<<16|0),l.bits=p,0};var p0=eQ;const tQ=0,Wk=1,Gk=2,{Z_FINISH:r3,Z_BLOCK:rQ,Z_TREES:ux,Z_OK:Nh,Z_STREAM_END:nQ,Z_NEED_DICT:sQ,Z_STREAM_ERROR:Qo,Z_DATA_ERROR:Kk,Z_MEM_ERROR:Yk,Z_BUF_ERROR:aQ,Z_DEFLATED:n3}=zk,rg=16180,s3=16181,a3=16182,i3=16183,o3=16184,l3=16185,c3=16186,d3=16187,u3=16188,h3=16189,m1=16190,Wc=16191,m2=16192,f3=16193,p2=16194,m3=16195,p3=16196,x3=16197,g3=16198,hx=16199,fx=16200,v3=16201,y3=16202,w3=16203,b3=16204,N3=16205,x2=16206,j3=16207,_3=16208,us=16209,Xk=16210,Zk=16211,iQ=852,oQ=592,lQ=15,cQ=lQ,C3=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function dQ(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Sh=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<rg||e.mode>Zk?1:0},Jk=t=>{if(Sh(t))return Qo;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=rg,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(iQ),e.distcode=e.distdyn=new Int32Array(oQ),e.sane=1,e.back=-1,Nh},Qk=t=>{if(Sh(t))return Qo;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,Jk(t)},e7=(t,e)=>{let r;if(Sh(t))return Qo;const n=t.state;return e<0?(r=0,e=-e):(r=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Qo:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,Qk(t))},t7=(t,e)=>{if(!t)return Qo;const r=new dQ;t.state=r,r.strm=t,r.window=null,r.mode=rg;const n=e7(t,e);return n!==Nh&&(t.state=null),n},uQ=t=>t7(t,cQ);let S3=!0,g2,v2;const hQ=t=>{if(S3){g2=new Int32Array(512),v2=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(p0(Wk,t.lens,0,288,g2,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;p0(Gk,t.lens,0,32,v2,0,t.work,{bits:5}),S3=!1}t.lencode=g2,t.lenbits=9,t.distcode=v2,t.distbits=5},r7=(t,e,r,n)=>{let a;const i=t.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(e.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):(a=i.wsize-i.wnext,a>n&&(a=n),i.window.set(e.subarray(r-n,r-n+a),i.wnext),n-=a,n?(i.window.set(e.subarray(r-n,r),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0},fQ=(t,e)=>{let r,n,a,i,o,l,c,u,h,m,x,p,y,w,j=0,C,S,k,P,O,$,R,B;const U=new Uint8Array(4);let K,M;const q=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Sh(t)||!t.output||!t.input&&t.avail_in!==0)return Qo;r=t.state,r.mode===Wc&&(r.mode=m2),o=t.next_out,a=t.output,c=t.avail_out,i=t.next_in,n=t.input,l=t.avail_in,u=r.hold,h=r.bits,m=l,x=c,B=Nh;e:for(;;)switch(r.mode){case rg:if(r.wrap===0){r.mode=m2;break}for(;h<16;){if(l===0)break e;l--,u+=n[i++]<<h,h+=8}if(r.wrap&2&&u===35615){r.wbits===0&&(r.wbits=15),r.check=0,U[0]=u&255,U[1]=u>>>8&255,r.check=Ql(r.check,U,2,0),u=0,h=0,r.mode=s3;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((u&255)<<8)+(u>>8))%31){t.msg="incorrect header check",r.mode=us;break}if((u&15)!==n3){t.msg="unknown compression method",r.mode=us;break}if(u>>>=4,h-=4,R=(u&15)+8,r.wbits===0&&(r.wbits=R),R>15||R>r.wbits){t.msg="invalid window size",r.mode=us;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=u&512?h3:Wc,u=0,h=0;break;case s3:for(;h<16;){if(l===0)break e;l--,u+=n[i++]<<h,h+=8}if(r.flags=u,(r.flags&255)!==n3){t.msg="unknown compression method",r.mode=us;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=us;break}r.head&&(r.head.text=u>>8&1),r.flags&512&&r.wrap&4&&(U[0]=u&255,U[1]=u>>>8&255,r.check=Ql(r.check,U,2,0)),u=0,h=0,r.mode=a3;case a3:for(;h<32;){if(l===0)break e;l--,u+=n[i++]<<h,h+=8}r.head&&(r.head.time=u),r.flags&512&&r.wrap&4&&(U[0]=u&255,U[1]=u>>>8&255,U[2]=u>>>16&255,U[3]=u>>>24&255,r.check=Ql(r.check,U,4,0)),u=0,h=0,r.mode=i3;case i3:for(;h<16;){if(l===0)break e;l--,u+=n[i++]<<h,h+=8}r.head&&(r.head.xflags=u&255,r.head.os=u>>8),r.flags&512&&r.wrap&4&&(U[0]=u&255,U[1]=u>>>8&255,r.check=Ql(r.check,U,2,0)),u=0,h=0,r.mode=o3;case o3:if(r.flags&1024){for(;h<16;){if(l===0)break e;l--,u+=n[i++]<<h,h+=8}r.length=u,r.head&&(r.head.extra_len=u),r.flags&512&&r.wrap&4&&(U[0]=u&255,U[1]=u>>>8&255,r.check=Ql(r.check,U,2,0)),u=0,h=0}else r.head&&(r.head.extra=null);r.mode=l3;case l3:if(r.flags&1024&&(p=r.length,p>l&&(p=l),p&&(r.head&&(R=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(i,i+p),R)),r.flags&512&&r.wrap&4&&(r.check=Ql(r.check,n,p,i)),l-=p,i+=p,r.length-=p),r.length))break e;r.length=0,r.mode=c3;case c3:if(r.flags&2048){if(l===0)break e;p=0;do R=n[i+p++],r.head&&R&&r.length<65536&&(r.head.name+=String.fromCharCode(R));while(R&&p<l);if(r.flags&512&&r.wrap&4&&(r.check=Ql(r.check,n,p,i)),l-=p,i+=p,R)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=d3;case d3:if(r.flags&4096){if(l===0)break e;p=0;do R=n[i+p++],r.head&&R&&r.length<65536&&(r.head.comment+=String.fromCharCode(R));while(R&&p<l);if(r.flags&512&&r.wrap&4&&(r.check=Ql(r.check,n,p,i)),l-=p,i+=p,R)break e}else r.head&&(r.head.comment=null);r.mode=u3;case u3:if(r.flags&512){for(;h<16;){if(l===0)break e;l--,u+=n[i++]<<h,h+=8}if(r.wrap&4&&u!==(r.check&65535)){t.msg="header crc mismatch",r.mode=us;break}u=0,h=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=Wc;break;case h3:for(;h<32;){if(l===0)break e;l--,u+=n[i++]<<h,h+=8}t.adler=r.check=C3(u),u=0,h=0,r.mode=m1;case m1:if(r.havedict===0)return t.next_out=o,t.avail_out=c,t.next_in=i,t.avail_in=l,r.hold=u,r.bits=h,sQ;t.adler=r.check=1,r.mode=Wc;case Wc:if(e===rQ||e===ux)break e;case m2:if(r.last){u>>>=h&7,h-=h&7,r.mode=x2;break}for(;h<3;){if(l===0)break e;l--,u+=n[i++]<<h,h+=8}switch(r.last=u&1,u>>>=1,h-=1,u&3){case 0:r.mode=f3;break;case 1:if(hQ(r),r.mode=hx,e===ux){u>>>=2,h-=2;break e}break;case 2:r.mode=p3;break;case 3:t.msg="invalid block type",r.mode=us}u>>>=2,h-=2;break;case f3:for(u>>>=h&7,h-=h&7;h<32;){if(l===0)break e;l--,u+=n[i++]<<h,h+=8}if((u&65535)!==(u>>>16^65535)){t.msg="invalid stored block lengths",r.mode=us;break}if(r.length=u&65535,u=0,h=0,r.mode=p2,e===ux)break e;case p2:r.mode=m3;case m3:if(p=r.length,p){if(p>l&&(p=l),p>c&&(p=c),p===0)break e;a.set(n.subarray(i,i+p),o),l-=p,i+=p,c-=p,o+=p,r.length-=p;break}r.mode=Wc;break;case p3:for(;h<14;){if(l===0)break e;l--,u+=n[i++]<<h,h+=8}if(r.nlen=(u&31)+257,u>>>=5,h-=5,r.ndist=(u&31)+1,u>>>=5,h-=5,r.ncode=(u&15)+4,u>>>=4,h-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=us;break}r.have=0,r.mode=x3;case x3:for(;r.have<r.ncode;){for(;h<3;){if(l===0)break e;l--,u+=n[i++]<<h,h+=8}r.lens[q[r.have++]]=u&7,u>>>=3,h-=3}for(;r.have<19;)r.lens[q[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,K={bits:r.lenbits},B=p0(tQ,r.lens,0,19,r.lencode,0,r.work,K),r.lenbits=K.bits,B){t.msg="invalid code lengths set",r.mode=us;break}r.have=0,r.mode=g3;case g3:for(;r.have<r.nlen+r.ndist;){for(;j=r.lencode[u&(1<<r.lenbits)-1],C=j>>>24,S=j>>>16&255,k=j&65535,!(C<=h);){if(l===0)break e;l--,u+=n[i++]<<h,h+=8}if(k<16)u>>>=C,h-=C,r.lens[r.have++]=k;else{if(k===16){for(M=C+2;h<M;){if(l===0)break e;l--,u+=n[i++]<<h,h+=8}if(u>>>=C,h-=C,r.have===0){t.msg="invalid bit length repeat",r.mode=us;break}R=r.lens[r.have-1],p=3+(u&3),u>>>=2,h-=2}else if(k===17){for(M=C+3;h<M;){if(l===0)break e;l--,u+=n[i++]<<h,h+=8}u>>>=C,h-=C,R=0,p=3+(u&7),u>>>=3,h-=3}else{for(M=C+7;h<M;){if(l===0)break e;l--,u+=n[i++]<<h,h+=8}u>>>=C,h-=C,R=0,p=11+(u&127),u>>>=7,h-=7}if(r.have+p>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=us;break}for(;p--;)r.lens[r.have++]=R}}if(r.mode===us)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=us;break}if(r.lenbits=9,K={bits:r.lenbits},B=p0(Wk,r.lens,0,r.nlen,r.lencode,0,r.work,K),r.lenbits=K.bits,B){t.msg="invalid literal/lengths set",r.mode=us;break}if(r.distbits=6,r.distcode=r.distdyn,K={bits:r.distbits},B=p0(Gk,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,K),r.distbits=K.bits,B){t.msg="invalid distances set",r.mode=us;break}if(r.mode=hx,e===ux)break e;case hx:r.mode=fx;case fx:if(l>=6&&c>=258){t.next_out=o,t.avail_out=c,t.next_in=i,t.avail_in=l,r.hold=u,r.bits=h,YJ(t,x),o=t.next_out,a=t.output,c=t.avail_out,i=t.next_in,n=t.input,l=t.avail_in,u=r.hold,h=r.bits,r.mode===Wc&&(r.back=-1);break}for(r.back=0;j=r.lencode[u&(1<<r.lenbits)-1],C=j>>>24,S=j>>>16&255,k=j&65535,!(C<=h);){if(l===0)break e;l--,u+=n[i++]<<h,h+=8}if(S&&(S&240)===0){for(P=C,O=S,$=k;j=r.lencode[$+((u&(1<<P+O)-1)>>P)],C=j>>>24,S=j>>>16&255,k=j&65535,!(P+C<=h);){if(l===0)break e;l--,u+=n[i++]<<h,h+=8}u>>>=P,h-=P,r.back+=P}if(u>>>=C,h-=C,r.back+=C,r.length=k,S===0){r.mode=N3;break}if(S&32){r.back=-1,r.mode=Wc;break}if(S&64){t.msg="invalid literal/length code",r.mode=us;break}r.extra=S&15,r.mode=v3;case v3:if(r.extra){for(M=r.extra;h<M;){if(l===0)break e;l--,u+=n[i++]<<h,h+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,h-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=y3;case y3:for(;j=r.distcode[u&(1<<r.distbits)-1],C=j>>>24,S=j>>>16&255,k=j&65535,!(C<=h);){if(l===0)break e;l--,u+=n[i++]<<h,h+=8}if((S&240)===0){for(P=C,O=S,$=k;j=r.distcode[$+((u&(1<<P+O)-1)>>P)],C=j>>>24,S=j>>>16&255,k=j&65535,!(P+C<=h);){if(l===0)break e;l--,u+=n[i++]<<h,h+=8}u>>>=P,h-=P,r.back+=P}if(u>>>=C,h-=C,r.back+=C,S&64){t.msg="invalid distance code",r.mode=us;break}r.offset=k,r.extra=S&15,r.mode=w3;case w3:if(r.extra){for(M=r.extra;h<M;){if(l===0)break e;l--,u+=n[i++]<<h,h+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,h-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=us;break}r.mode=b3;case b3:if(c===0)break e;if(p=x-c,r.offset>p){if(p=r.offset-p,p>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=us;break}p>r.wnext?(p-=r.wnext,y=r.wsize-p):y=r.wnext-p,p>r.length&&(p=r.length),w=r.window}else w=a,y=o-r.offset,p=r.length;p>c&&(p=c),c-=p,r.length-=p;do a[o++]=w[y++];while(--p);r.length===0&&(r.mode=fx);break;case N3:if(c===0)break e;a[o++]=r.length,c--,r.mode=fx;break;case x2:if(r.wrap){for(;h<32;){if(l===0)break e;l--,u|=n[i++]<<h,h+=8}if(x-=c,t.total_out+=x,r.total+=x,r.wrap&4&&x&&(t.adler=r.check=r.flags?Ql(r.check,a,x,o-x):Yy(r.check,a,x,o-x)),x=c,r.wrap&4&&(r.flags?u:C3(u))!==r.check){t.msg="incorrect data check",r.mode=us;break}u=0,h=0}r.mode=j3;case j3:if(r.wrap&&r.flags){for(;h<32;){if(l===0)break e;l--,u+=n[i++]<<h,h+=8}if(r.wrap&4&&u!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=us;break}u=0,h=0}r.mode=_3;case _3:B=nQ;break e;case us:B=Kk;break e;case Xk:return Yk;case Zk:default:return Qo}return t.next_out=o,t.avail_out=c,t.next_in=i,t.avail_in=l,r.hold=u,r.bits=h,(r.wsize||x!==t.avail_out&&r.mode<us&&(r.mode<x2||e!==r3))&&r7(t,t.output,t.next_out,x-t.avail_out),m-=t.avail_in,x-=t.avail_out,t.total_in+=m,t.total_out+=x,r.total+=x,r.wrap&4&&x&&(t.adler=r.check=r.flags?Ql(r.check,a,x,t.next_out-x):Yy(r.check,a,x,t.next_out-x)),t.data_type=r.bits+(r.last?64:0)+(r.mode===Wc?128:0)+(r.mode===hx||r.mode===p2?256:0),(m===0&&x===0||e===r3)&&B===Nh&&(B=aQ),B},mQ=t=>{if(Sh(t))return Qo;let e=t.state;return e.window&&(e.window=null),t.state=null,Nh},pQ=(t,e)=>{if(Sh(t))return Qo;const r=t.state;return(r.wrap&2)===0?Qo:(r.head=e,e.done=!1,Nh)},xQ=(t,e)=>{const r=e.length;let n,a,i;return Sh(t)||(n=t.state,n.wrap!==0&&n.mode!==m1)?Qo:n.mode===m1&&(a=1,a=Yy(a,e,r,0),a!==n.check)?Kk:(i=r7(t,e,r,r),i?(n.mode=Xk,Yk):(n.havedict=1,Nh))};var gQ=Qk,vQ=e7,yQ=Jk,wQ=uQ,bQ=t7,NQ=fQ,jQ=mQ,_Q=pQ,CQ=xQ,SQ="pako inflate (from Nodeca project)",Kc={inflateReset:gQ,inflateReset2:vQ,inflateResetKeep:yQ,inflateInit:wQ,inflateInit2:bQ,inflate:NQ,inflateEnd:jQ,inflateGetHeader:_Q,inflateSetDictionary:CQ,inflateInfo:SQ};function AQ(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var EQ=AQ;const n7=Object.prototype.toString,{Z_NO_FLUSH:kQ,Z_FINISH:PQ,Z_OK:D0,Z_STREAM_END:y2,Z_NEED_DICT:w2,Z_STREAM_ERROR:TQ,Z_DATA_ERROR:A3,Z_MEM_ERROR:IQ}=zk;function ep(t){this.options=qk.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new GJ,this.strm.avail_out=0;let r=Kc.inflateInit2(this.strm,e.windowBits);if(r!==D0)throw new Error(Xy[r]);if(this.header=new EQ,Kc.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Zy.string2buf(e.dictionary):n7.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=Kc.inflateSetDictionary(this.strm,e.dictionary),r!==D0)))throw new Error(Xy[r])}ep.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,a=this.options.dictionary;let i,o,l;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?PQ:kQ,n7.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),i=Kc.inflate(r,o),i===w2&&a&&(i=Kc.inflateSetDictionary(r,a),i===D0?i=Kc.inflate(r,o):i===A3&&(i=w2));r.avail_in>0&&i===y2&&r.state.wrap>0&&t[r.next_in]!==0;)Kc.inflateReset(r),i=Kc.inflate(r,o);switch(i){case TQ:case A3:case w2:case IQ:return this.onEnd(i),this.ended=!0,!1}if(l=r.avail_out,r.next_out&&(r.avail_out===0||i===y2))if(this.options.to==="string"){let c=Zy.utf8border(r.output,r.next_out),u=r.next_out-c,h=Zy.buf2string(r.output,c);r.next_out=u,r.avail_out=n-u,u&&r.output.set(r.output.subarray(c,c+u),0),this.onData(h)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(i===D0&&l===0)){if(i===y2)return i=Kc.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};ep.prototype.onData=function(t){this.chunks.push(t)};ep.prototype.onEnd=function(t){t===D0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=qk.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function DQ(t,e){const r=new ep(e);if(r.push(t),r.err)throw r.msg||Xy[r.err];return r.result}var OQ=ep,RQ=DQ,LQ={Inflate:OQ,inflate:RQ};const{Inflate:FQ,inflate:MQ}=LQ;var E3=FQ,BQ=MQ;const s7=[];for(let t=0;t<256;t++){let e=t;for(let r=0;r<8;r++)e&1?e=3988292384^e>>>1:e=e>>>1;s7[t]=e}const k3=4294967295;function UQ(t,e,r){let n=t;for(let a=0;a<r;a++)n=s7[(n^e[a])&255]^n>>>8;return n}function $Q(t,e){return(UQ(k3,t,e)^k3)>>>0}function P3(t,e,r){const n=t.readUint32(),a=$Q(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(a!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${a}`)}function a7(t,e,r){for(let n=0;n<r;n++)e[n]=t[n]}function i7(t,e,r,n){let a=0;for(;a<n;a++)e[a]=t[a];for(;a<r;a++)e[a]=t[a]+e[a-n]&255}function o7(t,e,r,n){let a=0;if(r.length===0)for(;a<n;a++)e[a]=t[a];else for(;a<n;a++)e[a]=t[a]+r[a]&255}function l7(t,e,r,n,a){let i=0;if(r.length===0){for(;i<a;i++)e[i]=t[i];for(;i<n;i++)e[i]=t[i]+(e[i-a]>>1)&255}else{for(;i<a;i++)e[i]=t[i]+(r[i]>>1)&255;for(;i<n;i++)e[i]=t[i]+(e[i-a]+r[i]>>1)&255}}function c7(t,e,r,n,a){let i=0;if(r.length===0){for(;i<a;i++)e[i]=t[i];for(;i<n;i++)e[i]=t[i]+e[i-a]&255}else{for(;i<a;i++)e[i]=t[i]+r[i]&255;for(;i<n;i++)e[i]=t[i]+VQ(e[i-a],r[i],r[i-a])&255}}function VQ(t,e,r){const n=t+e-r,a=Math.abs(n-t),i=Math.abs(n-e),o=Math.abs(n-r);return a<=i&&a<=o?t:i<=o?e:r}function zQ(t,e,r,n,a,i){switch(t){case 0:a7(e,r,a);break;case 1:i7(e,r,a,i);break;case 2:o7(e,r,n,a);break;case 3:l7(e,r,n,a,i);break;case 4:c7(e,r,n,a,i);break;default:throw new Error(`Unsupported filter: ${t}`)}}const qQ=new Uint16Array([255]),HQ=new Uint8Array(qQ.buffer),WQ=HQ[0]===255;function GQ(t){const{data:e,width:r,height:n,channels:a,depth:i}=t,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],l=Math.ceil(i/8)*a,c=new Uint8Array(n*r*l);let u=0;for(let h=0;h<7;h++){const m=o[h],x=Math.ceil((r-m.x)/m.xStep),p=Math.ceil((n-m.y)/m.yStep);if(x<=0||p<=0)continue;const y=x*l,w=new Uint8Array(y);for(let j=0;j<p;j++){const C=e[u++],S=e.subarray(u,u+y);u+=y;const k=new Uint8Array(y);zQ(C,S,k,w,y,l),w.set(k);for(let P=0;P<x;P++){const O=m.x+P*m.xStep,$=m.y+j*m.yStep;if(!(O>=r||$>=n))for(let R=0;R<l;R++)c[($*r+O)*l+R]=k[P*l+R]}}}if(i===16){const h=new Uint16Array(c.buffer);if(WQ)for(let m=0;m<h.length;m++)h[m]=KQ(h[m]);return h}else return c}function KQ(t){return(t&255)<<8|t>>8&255}const YQ=new Uint16Array([255]),XQ=new Uint8Array(YQ.buffer),ZQ=XQ[0]===255,JQ=new Uint8Array(0);function T3(t){const{data:e,width:r,height:n,channels:a,depth:i}=t,o=Math.ceil(i/8)*a,l=Math.ceil(i/8*a*r),c=new Uint8Array(n*l);let u=JQ,h=0,m,x;for(let p=0;p<n;p++){switch(m=e.subarray(h+1,h+1+l),x=c.subarray(p*l,(p+1)*l),e[h]){case 0:a7(m,x,l);break;case 1:i7(m,x,l,o);break;case 2:o7(m,x,u,l);break;case 3:l7(m,x,u,l,o);break;case 4:c7(m,x,u,l,o);break;default:throw new Error(`Unsupported filter: ${e[h]}`)}u=x,h+=l+1}if(i===16){const p=new Uint16Array(c.buffer);if(ZQ)for(let y=0;y<p.length;y++)p[y]=QQ(p[y]);return p}else return c}function QQ(t){return(t&255)<<8|t>>8&255}const Tx=Uint8Array.of(137,80,78,71,13,10,26,10);function I3(t){if(!eee(t.readBytes(Tx.length)))throw new Error("wrong PNG signature")}function eee(t){if(t.length<Tx.length)return!1;for(let e=0;e<Tx.length;e++)if(t[e]!==Tx[e])return!1;return!0}const tee="tEXt",ree=0,d7=new TextDecoder("latin1");function nee(t){if(aee(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const see=/^[\u0000-\u00FF]*$/;function aee(t){if(!see.test(t))throw new Error("invalid latin1 text")}function iee(t,e,r){const n=u7(e);t[n]=oee(e,r-n.length-1)}function u7(t){for(t.mark();t.readByte()!==ree;);const e=t.offset;t.reset();const r=d7.decode(t.readBytes(e-t.offset-1));return t.skip(1),nee(r),r}function oee(t,e){return d7.decode(t.readBytes(e))}const xo={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},b2={UNKNOWN:-1,DEFLATE:0},D3={UNKNOWN:-1,ADAPTIVE:0},N2={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},mx={NONE:0,BACKGROUND:1,PREVIOUS:2},j2={SOURCE:0,OVER:1};class lee extends Jb{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,r={}){super(e);const{checkCrc:n=!1}=r;this._checkCrc=n,this._inflator=new E3,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=b2.UNKNOWN,this._filterMethod=D3.UNKNOWN,this._interlaceMethod=N2.UNKNOWN,this._colorType=xo.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(I3(this);!this._end;){const e=this.readUint32(),r=this.readChars(4);this.decodeChunk(e,r)}return this.decodeImage(),this._png}decodeApng(){for(I3(this);!this._end;){const e=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(e,r)}return this.decodeApngImage(),this._apng}decodeChunk(e,r){const n=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case tee:iee(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-n!==e)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?P3(this,e+4,r):this.skip(4)}decodeApngChunk(e,r){const n=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,r),this.offset=n+e;break}if(this.offset-n!==e)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?P3(this,e+4,r):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=cee(this.readUint8());const r=this.readUint8();this._colorType=r;let n;switch(r){case xo.GREYSCALE:n=1;break;case xo.TRUECOLOUR:n=3;break;case xo.INDEXED_COLOUR:n=1;break;case xo.GREYSCALE_ALPHA:n=2;break;case xo.TRUECOLOUR_ALPHA:n=4;break;case xo.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=n,this._compressionMethod=this.readUint8(),this._compressionMethod!==b2.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const r=e/3;this._hasPalette=!0;const n=[];this._palette=n;for(let a=0;a<r;a++)n.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const r=e,n=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,n,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let r=e,n=this.offset+this.byteOffset;if(n+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,n,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case xo.GREYSCALE:case xo.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let r=0;r<e/2;r++)this._transparency[r]=this.readUint16();break}case xo.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let r=0;for(;r<e;r++){const n=this.readByte();this._palette[r].push(n)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case xo.UNKNOWN:case xo.GREYSCALE_ALPHA:case xo.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const r=u7(this),n=this.readUint8();if(n!==b2.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${n}`);const a=this.readBytes(e-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:BQ(a)}}decodepHYs(){const e=this.readUint32(),r=this.readUint32(),n=this.readByte();this._png.resolution={x:e,y:r,unit:n}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const r={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},n=this._frames.at(e);if(n){if(n.data=T3({data:n.data,width:n.width,height:n.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||n.xOffset===0&&n.yOffset===0&&n.width===this._png.width&&n.height===this._png.height)r.data=n.data;else{const a=this._apng.frames.at(e-1);this.disposeFrame(n,a,r),this.addFrameDataToCanvas(r,n)}this._apng.frames.push(r)}}return this._apng}disposeFrame(e,r,n){switch(e.disposeOp){case mx.NONE:break;case mx.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let i=0;i<this._png.width;i++){const o=(a*e.width+i)*this._png.channels;for(let l=0;l<this._png.channels;l++)n.data[o+l]=0}break;case mx.PREVIOUS:n.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,r){const n=1<<this._png.depth,a=(i,o)=>{const l=((i+r.yOffset)*this._png.width+r.xOffset+o)*this._png.channels,c=(i*r.width+o)*this._png.channels;return{index:l,frameIndex:c}};switch(r.blendOp){case j2.SOURCE:for(let i=0;i<r.height;i++)for(let o=0;o<r.width;o++){const{index:l,frameIndex:c}=a(i,o);for(let u=0;u<this._png.channels;u++)e.data[l+u]=r.data[c+u]}break;case j2.OVER:for(let i=0;i<r.height;i++)for(let o=0;o<r.width;o++){const{index:l,frameIndex:c}=a(i,o);for(let u=0;u<this._png.channels;u++){const h=r.data[c+this._png.channels-1]/n,m=u%(this._png.channels-1)===0?1:r.data[c+u],x=Math.floor(h*m+(1-h)*e.data[l+u]);e.data[l+u]+=x}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==D3.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===N2.NO_INTERLACE)this._png.data=T3({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===N2.ADAM7)this._png.data=GQ({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,r=this._frames.at(-1);r?r.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:mx.NONE,blendOp:j2.SOURCE,data:e}),this._inflator=new E3,this._writingDataChunks=!1}}function cee(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var O3;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(O3||(O3={}));function dee(t,e){return new lee(t,e).decode()}var Er=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function _2(){Er.console&&typeof Er.console.log=="function"&&Er.console.log.apply(Er.console,arguments)}var $n={log:_2,warn:function(t){Er.console&&(typeof Er.console.warn=="function"?Er.console.warn.apply(Er.console,arguments):_2.call(null,arguments))},error:function(t){Er.console&&(typeof Er.console.error=="function"?Er.console.error.apply(Er.console,arguments):_2(t))}};function C2(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){nh(n.response,e,r)},n.onerror=function(){$n.error("could not download file")},n.send()}function R3(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function px(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var nh=Er.saveAs||((typeof window>"u"?"undefined":Tn(window))!=="object"||window!==Er?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=Er.URL||Er.webkitURL,a=document.createElement("a");e=e||t.name||"download",a.download=e,a.rel="noopener",typeof t=="string"?(a.href=t,a.origin!==location.origin?R3(a.href)?C2(t,e,r):px(a,a.target="_blank"):px(a)):(a.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){px(a)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(R3(t))C2(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){px(n)})}else navigator.msSaveOrOpenBlob((function(a,i){return i===void 0?i={autoBom:!1}:Tn(i)!=="object"&&($n.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a})(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return C2(t,e,r);var a=t.type==="application/octet-stream",i=/constructor/i.test(Er.HTMLElement)||Er.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||a&&i)&&(typeof FileReader>"u"?"undefined":Tn(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var h=l.result;h=o?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=h:location=h,n=null},l.readAsDataURL(t)}else{var c=Er.URL||Er.webkitURL,u=c.createObjectURL(t);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function h7(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,i=r[n].process,o=a.exec(t);o&&(e=i(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+l+c+u}}var Ix=Er.atob.bind(Er),L3=Er.btoa.bind(Er);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function S2(t,e){var r=t[0],n=t[1],a=t[2],i=t[3];r=oi(r,n,a,i,e[0],7,-680876936),i=oi(i,r,n,a,e[1],12,-389564586),a=oi(a,i,r,n,e[2],17,606105819),n=oi(n,a,i,r,e[3],22,-1044525330),r=oi(r,n,a,i,e[4],7,-176418897),i=oi(i,r,n,a,e[5],12,1200080426),a=oi(a,i,r,n,e[6],17,-1473231341),n=oi(n,a,i,r,e[7],22,-45705983),r=oi(r,n,a,i,e[8],7,1770035416),i=oi(i,r,n,a,e[9],12,-1958414417),a=oi(a,i,r,n,e[10],17,-42063),n=oi(n,a,i,r,e[11],22,-1990404162),r=oi(r,n,a,i,e[12],7,1804603682),i=oi(i,r,n,a,e[13],12,-40341101),a=oi(a,i,r,n,e[14],17,-1502002290),r=li(r,n=oi(n,a,i,r,e[15],22,1236535329),a,i,e[1],5,-165796510),i=li(i,r,n,a,e[6],9,-1069501632),a=li(a,i,r,n,e[11],14,643717713),n=li(n,a,i,r,e[0],20,-373897302),r=li(r,n,a,i,e[5],5,-701558691),i=li(i,r,n,a,e[10],9,38016083),a=li(a,i,r,n,e[15],14,-660478335),n=li(n,a,i,r,e[4],20,-405537848),r=li(r,n,a,i,e[9],5,568446438),i=li(i,r,n,a,e[14],9,-1019803690),a=li(a,i,r,n,e[3],14,-187363961),n=li(n,a,i,r,e[8],20,1163531501),r=li(r,n,a,i,e[13],5,-1444681467),i=li(i,r,n,a,e[2],9,-51403784),a=li(a,i,r,n,e[7],14,1735328473),r=ci(r,n=li(n,a,i,r,e[12],20,-1926607734),a,i,e[5],4,-378558),i=ci(i,r,n,a,e[8],11,-2022574463),a=ci(a,i,r,n,e[11],16,1839030562),n=ci(n,a,i,r,e[14],23,-35309556),r=ci(r,n,a,i,e[1],4,-1530992060),i=ci(i,r,n,a,e[4],11,1272893353),a=ci(a,i,r,n,e[7],16,-155497632),n=ci(n,a,i,r,e[10],23,-1094730640),r=ci(r,n,a,i,e[13],4,681279174),i=ci(i,r,n,a,e[0],11,-358537222),a=ci(a,i,r,n,e[3],16,-722521979),n=ci(n,a,i,r,e[6],23,76029189),r=ci(r,n,a,i,e[9],4,-640364487),i=ci(i,r,n,a,e[12],11,-421815835),a=ci(a,i,r,n,e[15],16,530742520),r=di(r,n=ci(n,a,i,r,e[2],23,-995338651),a,i,e[0],6,-198630844),i=di(i,r,n,a,e[7],10,1126891415),a=di(a,i,r,n,e[14],15,-1416354905),n=di(n,a,i,r,e[5],21,-57434055),r=di(r,n,a,i,e[12],6,1700485571),i=di(i,r,n,a,e[3],10,-1894986606),a=di(a,i,r,n,e[10],15,-1051523),n=di(n,a,i,r,e[1],21,-2054922799),r=di(r,n,a,i,e[8],6,1873313359),i=di(i,r,n,a,e[15],10,-30611744),a=di(a,i,r,n,e[6],15,-1560198380),n=di(n,a,i,r,e[13],21,1309151649),r=di(r,n,a,i,e[4],6,-145523070),i=di(i,r,n,a,e[11],10,-1120210379),a=di(a,i,r,n,e[2],15,718787259),n=di(n,a,i,r,e[9],21,-343485551),t[0]=Yd(r,t[0]),t[1]=Yd(n,t[1]),t[2]=Yd(a,t[2]),t[3]=Yd(i,t[3])}function ng(t,e,r,n,a,i){return e=Yd(Yd(e,t),Yd(n,i)),Yd(e<<a|e>>>32-a,r)}function oi(t,e,r,n,a,i,o){return ng(e&r|~e&n,t,e,a,i,o)}function li(t,e,r,n,a,i,o){return ng(e&n|r&~n,t,e,a,i,o)}function ci(t,e,r,n,a,i,o){return ng(e^r^n,t,e,a,i,o)}function di(t,e,r,n,a,i,o){return ng(r^(e|~n),t,e,a,i,o)}function f7(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)S2(n,uee(t.substring(e-64,e)));t=t.substring(e-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)a[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(a[e>>2]|=128<<(e%4<<3),e>55)for(S2(n,a),e=0;e<16;e++)a[e]=0;return a[14]=8*r,S2(n,a),n}function uee(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}var F3="0123456789abcdef".split("");function hee(t){for(var e="",r=0;r<4;r++)e+=F3[t>>8*r+4&15]+F3[t>>8*r&15];return e}function fee(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Jy(t){return f7(t).map(fee).join("")}var mee=(function(t){for(var e=0;e<t.length;e++)t[e]=hee(t[e]);return t.join("")})(f7("hello"))!="5d41402abc4b2a76b9719d911017c592";function Yd(t,e){if(mee){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Qy(t,e){var r,n,a,i;if(t!==r){for(var o=(a=t,i=1+(256/t.length|0),new Array(i+1).join(a)),l=[],c=0;c<256;c++)l[c]=c;var u=0;for(c=0;c<256;c++){var h=l[c];u=(u+h+o.charCodeAt(c))%256,l[c]=l[u],l[u]=h}r=t,n=l}else l=n;var m=e.length,x=0,p=0,y="";for(c=0;c<m;c++)p=(p+(h=l[x=(x+1)%256]))%256,l[x]=l[p],l[p]=h,o=l[(l[x]+l[p])%256],y+=String.fromCharCode(e.charCodeAt(c)^o);return y}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var M3={print:4,modify:8,copy:16,"annot-forms":32};function yf(t,e,r,n){this.v=1,this.r=2;var a=192;t.forEach(function(l){if(M3.perm!==void 0)throw new Error("Invalid permission: "+l);a+=M3[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(e+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^a)),this.encryptionKey=Jy(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=Qy(this.encryptionKey,this.padding)}function wf(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var a=t.charCodeAt(n);e+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):t[n]}return e}function B3(t){if(Tn(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var i=Math.random().toString(35);return e[r][i]=[n,!!a],i},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var i in e[r]){var o=e[r][i];try{o[0].apply(t,n)}catch(l){Er.console&&$n.error("jsPDF PubSub Error",l.message,l)}o[1]&&a.push(i)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function p1(t){if(!(this instanceof p1))return new p1(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function m7(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function ih(t,e,r,n,a){if(!(this instanceof ih))return new ih(t,e,r,n,a);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,m7.call(this,n,a)}function kf(t,e,r,n,a){if(!(this instanceof kf))return new kf(t,e,r,n,a);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,m7.call(this,n,a)}function tr(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],i=arguments[3],o=[],l=1,c=16,u="S",h=null;Tn(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,a=t.format||a,i=t.compress||t.compressPdf||i,(h=t.encryption||null)!==null&&(h.userPassword=h.userPassword||"",h.ownerPassword=h.ownerPassword||"",h.userPermissions=h.userPermissions||[]),l=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(c=t.floatPrecision),u=t.defaultPathOperation||"S"),o=t.filters||(i===!0?["FlateEncode"]:o),n=n||"mm",r=(""+(r||"P")).toLowerCase();var m=t.putOnlyUsedFonts||!1,x={},p={internal:{},__private__:{}};p.__private__.PubSub=B3;var y="1.3",w=p.__private__.getPdfVersion=function(){return y};p.__private__.setPdfVersion=function(A){y=A};var j={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return j};var C=p.__private__.getPageFormat=function(A){return j[A]};a=a||"a4";var S="compat",k="advanced",P=S;function O(){this.saveGraphicsState(),pe(new jt(kt,0,0,-kt,0,Oi()*kt).toString()+" cm"),this.setFontSize(this.getFontSize()/kt),u="n",P=k}function $(){this.restoreGraphicsState(),u="S",P=S}var R=p.__private__.combineFontStyleAndFontWeight=function(A,Z){if(A=="bold"&&Z=="normal"||A=="bold"&&Z==400||A=="normal"&&Z=="italic"||A=="bold"&&Z=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Z&&(A=Z==400||Z==="normal"?A==="italic"?"italic":"normal":Z!=700&&Z!=="bold"||A!=="normal"?(Z==700?"bold":Z)+""+A:"bold"),A};p.advancedAPI=function(A){var Z=P===S;return Z&&O.call(this),typeof A!="function"||(A(this),Z&&$.call(this)),this},p.compatAPI=function(A){var Z=P===k;return Z&&$.call(this),typeof A!="function"||(A(this),Z&&O.call(this)),this},p.isAdvancedAPI=function(){return P===k};var B,U=function(A){if(P!==k)throw new Error(A+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},K=p.roundToPrecision=p.__private__.roundToPrecision=function(A,Z){var xe=e||Z;if(isNaN(A)||isNaN(xe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return A.toFixed(xe).replace(/0+$/,"")};B=p.hpf=p.__private__.hpf=typeof c=="number"?function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return K(A,c)}:c==="smart"?function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return K(A,A>-1&&A<1?16:5)}:function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return K(A,16)};var M=p.f2=p.__private__.f2=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.f2");return K(A,2)},q=p.__private__.f3=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.f3");return K(A,3)},re=p.scale=p.__private__.scale=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.scale");return P===S?A*kt:P===k?A:void 0},ee=function(A){return re((function(Z){return P===S?Oi()-Z:P===k?Z:void 0})(A))};p.__private__.setPrecision=p.setPrecision=function(A){typeof parseInt(A,10)=="number"&&(e=parseInt(A,10))};var H,se="00000000000000000000000000000000",ue=p.__private__.getFileId=function(){return se},G=p.__private__.setFileId=function(A){return se=A!==void 0&&/^[a-fA-F0-9]{32}$/.test(A)?A.toUpperCase():se.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),h!==null&&(Jn=new yf(h.userPermissions,h.userPassword,h.ownerPassword,se)),se};p.setFileId=function(A){return G(A),this},p.getFileId=function(){return ue()};var J=p.__private__.convertDateToPDFDate=function(A){var Z=A.getTimezoneOffset(),xe=Z<0?"+":"-",Ne=Math.floor(Math.abs(Z/60)),ke=Math.abs(Z%60),Ye=[xe,V(Ne),"'",V(ke),"'"].join("");return["D:",A.getFullYear(),V(A.getMonth()+1),V(A.getDate()),V(A.getHours()),V(A.getMinutes()),V(A.getSeconds()),Ye].join("")},oe=p.__private__.convertPDFDateToDate=function(A){var Z=parseInt(A.substr(2,4),10),xe=parseInt(A.substr(6,2),10)-1,Ne=parseInt(A.substr(8,2),10),ke=parseInt(A.substr(10,2),10),Ye=parseInt(A.substr(12,2),10),it=parseInt(A.substr(14,2),10);return new Date(Z,xe,Ne,ke,Ye,it,0)},Y=p.__private__.setCreationDate=function(A){var Z;if(A===void 0&&(A=new Date),A instanceof Date)Z=J(A);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(A))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Z=A}return H=Z},L=p.__private__.getCreationDate=function(A){var Z=H;return A==="jsDate"&&(Z=oe(H)),Z};p.setCreationDate=function(A){return Y(A),this},p.getCreationDate=function(A){return L(A)};var z,V=p.__private__.padd2=function(A){return("0"+parseInt(A)).slice(-2)},W=p.__private__.padd2Hex=function(A){return("00"+(A=A.toString())).substr(A.length)},Q=0,T=[],ie=[],ge=0,we=[],Se=[],Ue=!1,We=ie;p.__private__.setCustomOutputDestination=function(A){Ue=!0,We=A};var be=function(A){Ue||(We=A)};p.__private__.resetCustomOutputDestination=function(){Ue=!1,We=ie};var pe=p.__private__.out=function(A){return A=A.toString(),ge+=A.length+1,We.push(A),We},at=p.__private__.write=function(A){return pe(arguments.length===1?A.toString():Array.prototype.join.call(arguments," "))},tt=p.__private__.getArrayBuffer=function(A){for(var Z=A.length,xe=new ArrayBuffer(Z),Ne=new Uint8Array(xe);Z--;)Ne[Z]=A.charCodeAt(Z);return xe},Be=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Be};var ye=t.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(A){return ye=P===k?A/kt:A,this};var st,Ve=p.__private__.getFontSize=p.getFontSize=function(){return P===S?ye:ye*kt},vt=t.R2L||!1;p.__private__.setR2L=p.setR2L=function(A){return vt=A,this},p.__private__.getR2L=p.getR2L=function(){return vt};var ct,Kt=p.__private__.setZoomMode=function(A){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(A))st=A;else if(isNaN(A)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(A)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+A+'" is not recognized.');st=A}else st=parseInt(A,10)};p.__private__.getZoomMode=function(){return st};var ot,Ct=p.__private__.setPageMode=function(A){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(A)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+A+'" is not recognized.');ct=A};p.__private__.getPageMode=function(){return ct};var qt=p.__private__.setLayoutMode=function(A){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(A)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+A+'" is not recognized.');ot=A};p.__private__.getLayoutMode=function(){return ot},p.__private__.setDisplayMode=p.setDisplayMode=function(A,Z,xe){return Kt(A),qt(Z),Ct(xe),this};var Tt={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(A){if(Object.keys(Tt).indexOf(A)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Tt[A]},p.__private__.getDocumentProperties=function(){return Tt},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(A){for(var Z in Tt)Tt.hasOwnProperty(Z)&&A[Z]&&(Tt[Z]=A[Z]);return this},p.__private__.setDocumentProperty=function(A,Z){if(Object.keys(Tt).indexOf(A)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Tt[A]=Z};var Et,kt,St,gr,Rr,xt={},Ht={},Me=[],bt={},Wt={},It={},Cr={},Gr=null,vr=0,At=[],yt=new B3(p),Lr=t.hotfixes||[],Sr={},Kr={},Mr=[],jt=function A(Z,xe,Ne,ke,Ye,it){if(!(this instanceof A))return new A(Z,xe,Ne,ke,Ye,it);isNaN(Z)&&(Z=1),isNaN(xe)&&(xe=0),isNaN(Ne)&&(Ne=0),isNaN(ke)&&(ke=1),isNaN(Ye)&&(Ye=0),isNaN(it)&&(it=0),this._matrix=[Z,xe,Ne,ke,Ye,it]};Object.defineProperty(jt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(A){this._matrix[0]=A}}),Object.defineProperty(jt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(A){this._matrix[1]=A}}),Object.defineProperty(jt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(A){this._matrix[2]=A}}),Object.defineProperty(jt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(A){this._matrix[3]=A}}),Object.defineProperty(jt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(A){this._matrix[4]=A}}),Object.defineProperty(jt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(A){this._matrix[5]=A}}),Object.defineProperty(jt.prototype,"a",{get:function(){return this._matrix[0]},set:function(A){this._matrix[0]=A}}),Object.defineProperty(jt.prototype,"b",{get:function(){return this._matrix[1]},set:function(A){this._matrix[1]=A}}),Object.defineProperty(jt.prototype,"c",{get:function(){return this._matrix[2]},set:function(A){this._matrix[2]=A}}),Object.defineProperty(jt.prototype,"d",{get:function(){return this._matrix[3]},set:function(A){this._matrix[3]=A}}),Object.defineProperty(jt.prototype,"e",{get:function(){return this._matrix[4]},set:function(A){this._matrix[4]=A}}),Object.defineProperty(jt.prototype,"f",{get:function(){return this._matrix[5]},set:function(A){this._matrix[5]=A}}),Object.defineProperty(jt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(jt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(jt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(jt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),jt.prototype.join=function(A){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(B).join(A)},jt.prototype.multiply=function(A){var Z=A.sx*this.sx+A.shy*this.shx,xe=A.sx*this.shy+A.shy*this.sy,Ne=A.shx*this.sx+A.sy*this.shx,ke=A.shx*this.shy+A.sy*this.sy,Ye=A.tx*this.sx+A.ty*this.shx+this.tx,it=A.tx*this.shy+A.ty*this.sy+this.ty;return new jt(Z,xe,Ne,ke,Ye,it)},jt.prototype.decompose=function(){var A=this.sx,Z=this.shy,xe=this.shx,Ne=this.sy,ke=this.tx,Ye=this.ty,it=Math.sqrt(A*A+Z*Z),Ft=(A/=it)*xe+(Z/=it)*Ne;xe-=A*Ft,Ne-=Z*Ft;var Yt=Math.sqrt(xe*xe+Ne*Ne);return Ft/=Yt,A*(Ne/=Yt)<Z*(xe/=Yt)&&(A=-A,Z=-Z,Ft=-Ft,it=-it),{scale:new jt(it,0,0,Yt,0,0),translate:new jt(1,0,0,1,ke,Ye),rotate:new jt(A,Z,-Z,A,0,0),skew:new jt(1,0,Ft,1,0,0)}},jt.prototype.toString=function(A){return this.join(" ")},jt.prototype.inversed=function(){var A=this.sx,Z=this.shy,xe=this.shx,Ne=this.sy,ke=this.tx,Ye=this.ty,it=1/(A*Ne-Z*xe),Ft=Ne*it,Yt=-Z*it,wr=-xe*it,br=A*it;return new jt(Ft,Yt,wr,br,-Ft*ke-wr*Ye,-Yt*ke-br*Ye)},jt.prototype.applyToPoint=function(A){var Z=A.x*this.sx+A.y*this.shx+this.tx,xe=A.x*this.shy+A.y*this.sy+this.ty;return new ko(Z,xe)},jt.prototype.applyToRectangle=function(A){var Z=this.applyToPoint(A),xe=this.applyToPoint(new ko(A.x+A.w,A.y+A.h));return new wc(Z.x,Z.y,xe.x-Z.x,xe.y-Z.y)},jt.prototype.clone=function(){var A=this.sx,Z=this.shy,xe=this.shx,Ne=this.sy,ke=this.tx,Ye=this.ty;return new jt(A,Z,xe,Ne,ke,Ye)},p.Matrix=jt;var Tr=p.matrixMult=function(A,Z){return Z.multiply(A)},Vn=new jt(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=Vn;var Fr=function(A,Z){if(!Wt[A]){var xe=(Z instanceof ih?"Sh":"P")+(Object.keys(bt).length+1).toString(10);Z.id=xe,Wt[A]=xe,bt[xe]=Z,yt.publish("addPattern",Z)}};p.ShadingPattern=ih,p.TilingPattern=kf,p.addShadingPattern=function(A,Z){return U("addShadingPattern()"),Fr(A,Z),this},p.beginTilingPattern=function(A){U("beginTilingPattern()"),Ti(A.boundingBox[0],A.boundingBox[1],A.boundingBox[2]-A.boundingBox[0],A.boundingBox[3]-A.boundingBox[1],A.matrix)},p.endTilingPattern=function(A,Z){U("endTilingPattern()"),Z.stream=Se[z].join(`
`),Fr(A,Z),yt.publish("endTilingPattern",Z),Mr.pop().restore()};var Yr,$r=p.__private__.newObject=function(){var A=yr();return wn(A,!0),A},yr=p.__private__.newObjectDeferred=function(){return Q++,T[Q]=function(){return ge},Q},wn=function(A,Z){return Z=typeof Z=="boolean"&&Z,T[A]=ge,Z&&pe(A+" 0 obj"),A},Ra=p.__private__.newAdditionalObject=function(){var A={objId:yr(),content:""};return we.push(A),A},La=yr(),Ss=yr(),ba=p.__private__.decodeColorString=function(A){var Z=A.split(" ");if(Z.length!==2||Z[1]!=="g"&&Z[1]!=="G")Z.length!==5||Z[4]!=="k"&&Z[4]!=="K"||(Z=[(1-Z[0])*(1-Z[3]),(1-Z[1])*(1-Z[3]),(1-Z[2])*(1-Z[3]),"r"]);else{var xe=parseFloat(Z[0]);Z=[xe,xe,xe,"r"]}for(var Ne="#",ke=0;ke<3;ke++)Ne+=("0"+Math.floor(255*parseFloat(Z[ke])).toString(16)).slice(-2);return Ne},Xn=p.__private__.encodeColorString=function(A){var Z;typeof A=="string"&&(A={ch1:A});var xe=A.ch1,Ne=A.ch2,ke=A.ch3,Ye=A.ch4,it=A.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof xe=="string"&&xe.charAt(0)!=="#"){var Ft=new h7(xe);if(Ft.ok)xe=Ft.toHex();else if(!/^\d*\.?\d*$/.test(xe))throw new Error('Invalid color "'+xe+'" passed to jsPDF.encodeColorString.')}if(typeof xe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(xe)&&(xe="#"+xe[1]+xe[1]+xe[2]+xe[2]+xe[3]+xe[3]),typeof xe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(xe)){var Yt=parseInt(xe.substr(1),16);xe=Yt>>16&255,Ne=Yt>>8&255,ke=255&Yt}if(Ne===void 0||Ye===void 0&&xe===Ne&&Ne===ke)Z=typeof xe=="string"?xe+" "+it[0]:A.precision===2?M(xe/255)+" "+it[0]:q(xe/255)+" "+it[0];else if(Ye===void 0||Tn(Ye)==="object"){if(Ye&&!isNaN(Ye.a)&&Ye.a===0)return["1.","1.","1.",it[1]].join(" ");Z=typeof xe=="string"?[xe,Ne,ke,it[1]].join(" "):A.precision===2?[M(xe/255),M(Ne/255),M(ke/255),it[1]].join(" "):[q(xe/255),q(Ne/255),q(ke/255),it[1]].join(" ")}else Z=typeof xe=="string"?[xe,Ne,ke,Ye,it[2]].join(" "):A.precision===2?[M(xe),M(Ne),M(ke),M(Ye),it[2]].join(" "):[q(xe),q(Ne),q(ke),q(Ye),it[2]].join(" ");return Z},Fs=p.__private__.getFilters=function(){return o},In=p.__private__.putStream=function(A){var Z=(A=A||{}).data||"",xe=A.filters||Fs(),Ne=A.alreadyAppliedFilters||[],ke=A.addLength1||!1,Ye=Z.length,it=A.objectId,Ft=function(Us){return Us};if(h!==null&&it===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");h!==null&&(Ft=Jn.encryptor(it,0));var Yt={};xe===!0&&(xe=["FlateEncode"]);var wr=A.additionalKeyValues||[],br=(Yt=tr.API.processDataByFilters!==void 0?tr.API.processDataByFilters(Z,xe):{data:Z,reverseChain:[]}).reverseChain+(Array.isArray(Ne)?Ne.join(" "):Ne.toString());if(Yt.data.length!==0&&(wr.push({key:"Length",value:Yt.data.length}),ke===!0&&wr.push({key:"Length1",value:Ye})),br.length!=0)if(br.split("/").length-1==1)wr.push({key:"Filter",value:br});else{wr.push({key:"Filter",value:"["+br+"]"});for(var en=0;en<wr.length;en+=1)if(wr[en].key==="DecodeParms"){for(var Qn=[],As=0;As<Yt.reverseChain.split("/").length-1;As+=1)Qn.push("null");Qn.push(wr[en].value),wr[en].value="["+Qn.join(" ")+"]"}}pe("<<");for(var On=0;On<wr.length;On++)pe("/"+wr[On].key+" "+wr[On].value);pe(">>"),Yt.data.length!==0&&(pe("stream"),pe(Ft(Yt.data)),pe("endstream"))},Na=p.__private__.putPage=function(A){var Z=A.number,xe=A.data,Ne=A.objId,ke=A.contentsObjId;wn(Ne,!0),pe("<</Type /Page"),pe("/Parent "+A.rootDictionaryObjId+" 0 R"),pe("/Resources "+A.resourceDictionaryObjId+" 0 R"),pe("/MediaBox ["+parseFloat(B(A.mediaBox.bottomLeftX))+" "+parseFloat(B(A.mediaBox.bottomLeftY))+" "+B(A.mediaBox.topRightX)+" "+B(A.mediaBox.topRightY)+"]"),A.cropBox!==null&&pe("/CropBox ["+B(A.cropBox.bottomLeftX)+" "+B(A.cropBox.bottomLeftY)+" "+B(A.cropBox.topRightX)+" "+B(A.cropBox.topRightY)+"]"),A.bleedBox!==null&&pe("/BleedBox ["+B(A.bleedBox.bottomLeftX)+" "+B(A.bleedBox.bottomLeftY)+" "+B(A.bleedBox.topRightX)+" "+B(A.bleedBox.topRightY)+"]"),A.trimBox!==null&&pe("/TrimBox ["+B(A.trimBox.bottomLeftX)+" "+B(A.trimBox.bottomLeftY)+" "+B(A.trimBox.topRightX)+" "+B(A.trimBox.topRightY)+"]"),A.artBox!==null&&pe("/ArtBox ["+B(A.artBox.bottomLeftX)+" "+B(A.artBox.bottomLeftY)+" "+B(A.artBox.topRightX)+" "+B(A.artBox.topRightY)+"]"),typeof A.userUnit=="number"&&A.userUnit!==1&&pe("/UserUnit "+A.userUnit),yt.publish("putPage",{objId:Ne,pageContext:At[Z],pageNumber:Z,page:xe}),pe("/Contents "+ke+" 0 R"),pe(">>"),pe("endobj");var Ye=xe.join(`
`);return P===k&&(Ye+=`
Q`),wn(ke,!0),In({data:Ye,filters:Fs(),objectId:ke}),pe("endobj"),Ne},Ms=p.__private__.putPages=function(){var A,Z,xe=[];for(A=1;A<=vr;A++)At[A].objId=yr(),At[A].contentsObjId=yr();for(A=1;A<=vr;A++)xe.push(Na({number:A,data:Se[A],objId:At[A].objId,contentsObjId:At[A].contentsObjId,mediaBox:At[A].mediaBox,cropBox:At[A].cropBox,bleedBox:At[A].bleedBox,trimBox:At[A].trimBox,artBox:At[A].artBox,userUnit:At[A].userUnit,rootDictionaryObjId:La,resourceDictionaryObjId:Ss}));wn(La,!0),pe("<</Type /Pages");var Ne="/Kids [";for(Z=0;Z<vr;Z++)Ne+=xe[Z]+" 0 R ";pe(Ne+"]"),pe("/Count "+vr),pe(">>"),pe("endobj"),yt.publish("postPutPages")},Fa=function(A){yt.publish("putFont",{font:A,out:pe,newObject:$r,putStream:In}),A.isAlreadyPutted!==!0&&(A.objectNumber=$r(),pe("<<"),pe("/Type /Font"),pe("/BaseFont /"+wf(A.postScriptName)),pe("/Subtype /Type1"),typeof A.encoding=="string"&&pe("/Encoding /"+A.encoding),pe("/FirstChar 32"),pe("/LastChar 255"),pe(">>"),pe("endobj"))},Js=function(A){A.objectNumber=$r();var Z=[];Z.push({key:"Type",value:"/XObject"}),Z.push({key:"Subtype",value:"/Form"}),Z.push({key:"BBox",value:"["+[B(A.x),B(A.y),B(A.x+A.width),B(A.y+A.height)].join(" ")+"]"}),Z.push({key:"Matrix",value:"["+A.matrix.toString()+"]"});var xe=A.pages[1].join(`
`);In({data:xe,additionalKeyValues:Z,objectId:A.objectNumber}),pe("endobj")},Ya=function(A,Z){Z||(Z=21);var xe=$r(),Ne=(function(it,Ft){var Yt,wr=[],br=1/(Ft-1);for(Yt=0;Yt<1;Yt+=br)wr.push(Yt);if(wr.push(1),it[0].offset!=0){var en={offset:0,color:it[0].color};it.unshift(en)}if(it[it.length-1].offset!=1){var Qn={offset:1,color:it[it.length-1].color};it.push(Qn)}for(var As="",On=0,Us=0;Us<wr.length;Us++){for(Yt=wr[Us];Yt>it[On+1].offset;)On++;var xs=it[On].offset,ua=(Yt-xs)/(it[On+1].offset-xs),Ri=it[On].color,Za=it[On+1].color;As+=W(Math.round((1-ua)*Ri[0]+ua*Za[0]).toString(16))+W(Math.round((1-ua)*Ri[1]+ua*Za[1]).toString(16))+W(Math.round((1-ua)*Ri[2]+ua*Za[2]).toString(16))}return As.trim()})(A.colors,Z),ke=[];ke.push({key:"FunctionType",value:"0"}),ke.push({key:"Domain",value:"[0.0 1.0]"}),ke.push({key:"Size",value:"["+Z+"]"}),ke.push({key:"BitsPerSample",value:"8"}),ke.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ke.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),In({data:Ne,additionalKeyValues:ke,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:xe}),pe("endobj"),A.objectNumber=$r(),pe("<< /ShadingType "+A.type),pe("/ColorSpace /DeviceRGB");var Ye="/Coords ["+B(parseFloat(A.coords[0]))+" "+B(parseFloat(A.coords[1]))+" ";A.type===2?Ye+=B(parseFloat(A.coords[2]))+" "+B(parseFloat(A.coords[3])):Ye+=B(parseFloat(A.coords[2]))+" "+B(parseFloat(A.coords[3]))+" "+B(parseFloat(A.coords[4]))+" "+B(parseFloat(A.coords[5])),pe(Ye+="]"),A.matrix&&pe("/Matrix ["+A.matrix.toString()+"]"),pe("/Function "+xe+" 0 R"),pe("/Extend [true true]"),pe(">>"),pe("endobj")},fi=function(A,Z){var xe=yr(),Ne=$r();Z.push({resourcesOid:xe,objectOid:Ne}),A.objectNumber=Ne;var ke=[];ke.push({key:"Type",value:"/Pattern"}),ke.push({key:"PatternType",value:"1"}),ke.push({key:"PaintType",value:"1"}),ke.push({key:"TilingType",value:"1"}),ke.push({key:"BBox",value:"["+A.boundingBox.map(B).join(" ")+"]"}),ke.push({key:"XStep",value:B(A.xStep)}),ke.push({key:"YStep",value:B(A.yStep)}),ke.push({key:"Resources",value:xe+" 0 R"}),A.matrix&&ke.push({key:"Matrix",value:"["+A.matrix.toString()+"]"}),In({data:A.stream,additionalKeyValues:ke,objectId:A.objectNumber}),pe("endobj")},ze=function(A){for(var Z in A.objectNumber=$r(),pe("<<"),A)switch(Z){case"opacity":pe("/ca "+M(A[Z]));break;case"stroke-opacity":pe("/CA "+M(A[Z]))}pe(">>"),pe("endobj")},ft=function(A){wn(A.resourcesOid,!0),pe("<<"),pe("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var Z in pe("/Font <<"),xt)xt.hasOwnProperty(Z)&&(m===!1||m===!0&&x.hasOwnProperty(Z))&&pe("/"+Z+" "+xt[Z].objectNumber+" 0 R");pe(">>")})(),(function(){if(Object.keys(bt).length>0){for(var Z in pe("/Shading <<"),bt)bt.hasOwnProperty(Z)&&bt[Z]instanceof ih&&bt[Z].objectNumber>=0&&pe("/"+Z+" "+bt[Z].objectNumber+" 0 R");yt.publish("putShadingPatternDict"),pe(">>")}})(),(function(Z){if(Object.keys(bt).length>0){for(var xe in pe("/Pattern <<"),bt)bt.hasOwnProperty(xe)&&bt[xe]instanceof p.TilingPattern&&bt[xe].objectNumber>=0&&bt[xe].objectNumber<Z&&pe("/"+xe+" "+bt[xe].objectNumber+" 0 R");yt.publish("putTilingPatternDict"),pe(">>")}})(A.objectOid),(function(){if(Object.keys(It).length>0){var Z;for(Z in pe("/ExtGState <<"),It)It.hasOwnProperty(Z)&&It[Z].objectNumber>=0&&pe("/"+Z+" "+It[Z].objectNumber+" 0 R");yt.publish("putGStateDict"),pe(">>")}})(),(function(){for(var Z in pe("/XObject <<"),Sr)Sr.hasOwnProperty(Z)&&Sr[Z].objectNumber>=0&&pe("/"+Z+" "+Sr[Z].objectNumber+" 0 R");yt.publish("putXobjectDict"),pe(">>")})(),pe(">>"),pe("endobj")},gn=function(A){Ht[A.fontName]=Ht[A.fontName]||{},Ht[A.fontName][A.fontStyle]=A.id},Ee=function(A,Z,xe,Ne,ke){var Ye={id:"F"+(Object.keys(xt).length+1).toString(10),postScriptName:A,fontName:Z,fontStyle:xe,encoding:Ne,isStandardFont:ke||!1,metadata:{}};return yt.publish("addFont",{font:Ye,instance:this}),xt[Ye.id]=Ye,gn(Ye),Ye.id},wt=p.__private__.pdfEscape=p.pdfEscape=function(A,Z){return(function(xe,Ne){var ke,Ye,it,Ft,Yt,wr,br,en,Qn;if(it=(Ne=Ne||{}).sourceEncoding||"Unicode",Yt=Ne.outputEncoding,(Ne.autoencode||Yt)&&xt[Et].metadata&&xt[Et].metadata[it]&&xt[Et].metadata[it].encoding&&(Ft=xt[Et].metadata[it].encoding,!Yt&&xt[Et].encoding&&(Yt=xt[Et].encoding),!Yt&&Ft.codePages&&(Yt=Ft.codePages[0]),typeof Yt=="string"&&(Yt=Ft[Yt]),Yt)){for(br=!1,wr=[],ke=0,Ye=xe.length;ke<Ye;ke++)(en=Yt[xe.charCodeAt(ke)])?wr.push(String.fromCharCode(en)):wr.push(xe[ke]),wr[ke].charCodeAt(0)>>8&&(br=!0);xe=wr.join("")}for(ke=xe.length;br===void 0&&ke!==0;)xe.charCodeAt(ke-1)>>8&&(br=!0),ke--;if(!br)return xe;for(wr=Ne.noBOM?[]:[254,255],ke=0,Ye=xe.length;ke<Ye;ke++){if((Qn=(en=xe.charCodeAt(ke))>>8)>>8)throw new Error("Character at position "+ke+" of string '"+xe+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");wr.push(Qn),wr.push(en-(Qn<<8))}return String.fromCharCode.apply(void 0,wr)})(A,Z).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},nt=p.__private__.beginPage=function(A){Se[++vr]=[],At[vr]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(A[0]),topRightY:Number(A[1])}},bn(vr),be(Se[z])},Qr=function(A,Z){var xe,Ne,ke;switch(r=Z||r,typeof A=="string"&&(xe=C(A.toLowerCase()),Array.isArray(xe)&&(Ne=xe[0],ke=xe[1])),Array.isArray(A)&&(Ne=A[0]*kt,ke=A[1]*kt),isNaN(Ne)&&(Ne=a[0],ke=a[1]),(Ne>14400||ke>14400)&&($n.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Ne=Math.min(14400,Ne),ke=Math.min(14400,ke)),a=[Ne,ke],r.substr(0,1)){case"l":ke>Ne&&(a=[ke,Ne]);break;case"p":Ne>ke&&(a=[ke,Ne])}nt(a),vc(Pi),pe(yc),ju!==0&&pe(ju+" J"),_u!==0&&pe(_u+" j"),yt.publish("addPage",{pageNumber:vr})},Zn=function(A){A>0&&A<=vr&&(Se.splice(A,1),At.splice(A,1),vr--,z>vr&&(z=vr),this.setPage(z))},bn=function(A){A>0&&A<=vr&&(z=A)},Bs=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return Se.length-1},ld=function(A,Z,xe){var Ne,ke=void 0;return xe=xe||{},A=A!==void 0?A:xt[Et].fontName,Z=Z!==void 0?Z:xt[Et].fontStyle,Ne=A.toLowerCase(),Ht[Ne]!==void 0&&Ht[Ne][Z]!==void 0?ke=Ht[Ne][Z]:Ht[A]!==void 0&&Ht[A][Z]!==void 0?ke=Ht[A][Z]:xe.disableWarning===!1&&$n.warn("Unable to look up font label for font '"+A+"', '"+Z+"'. Refer to getFontList() for available fonts."),ke||xe.noFallback||(ke=Ht.times[Z])==null&&(ke=Ht.times.normal),ke},Qs=p.__private__.putInfo=function(){var A=$r(),Z=function(Ne){return Ne};for(var xe in h!==null&&(Z=Jn.encryptor(A,0)),pe("<<"),pe("/Producer ("+wt(Z("jsPDF "+tr.version))+")"),Tt)Tt.hasOwnProperty(xe)&&Tt[xe]&&pe("/"+xe.substr(0,1).toUpperCase()+xe.substr(1)+" ("+wt(Z(Tt[xe]))+")");pe("/CreationDate ("+wt(Z(H))+")"),pe(">>"),pe("endobj")},Ke=p.__private__.putCatalog=function(A){var Z=(A=A||{}).rootDictionaryObjId||La;switch($r(),pe("<<"),pe("/Type /Catalog"),pe("/Pages "+Z+" 0 R"),st||(st="fullwidth"),st){case"fullwidth":pe("/OpenAction [3 0 R /FitH null]");break;case"fullheight":pe("/OpenAction [3 0 R /FitV null]");break;case"fullpage":pe("/OpenAction [3 0 R /Fit]");break;case"original":pe("/OpenAction [3 0 R /XYZ null null 1]");break;default:var xe=""+st;xe.substr(xe.length-1)==="%"&&(st=parseInt(st)/100),typeof st=="number"&&pe("/OpenAction [3 0 R /XYZ null null "+M(st)+"]")}switch(ot||(ot="continuous"),ot){case"continuous":pe("/PageLayout /OneColumn");break;case"single":pe("/PageLayout /SinglePage");break;case"two":case"twoleft":pe("/PageLayout /TwoColumnLeft");break;case"tworight":pe("/PageLayout /TwoColumnRight")}ct&&pe("/PageMode /"+ct),yt.publish("putCatalog"),pe(">>"),pe("endobj")},Xe=p.__private__.putTrailer=function(){pe("trailer"),pe("<<"),pe("/Size "+(Q+1)),pe("/Root "+Q+" 0 R"),pe("/Info "+(Q-1)+" 0 R"),h!==null&&pe("/Encrypt "+Jn.oid+" 0 R"),pe("/ID [ <"+se+"> <"+se+"> ]"),pe(">>")},cr=p.__private__.putHeader=function(){pe("%PDF-"+y),pe("%")},cn=p.__private__.putXRef=function(){var A="0000000000";pe("xref"),pe("0 "+(Q+1)),pe("0000000000 65535 f ");for(var Z=1;Z<=Q;Z++)typeof T[Z]=="function"?pe((A+T[Z]()).slice(-10)+" 00000 n "):T[Z]!==void 0?pe((A+T[Z]).slice(-10)+" 00000 n "):pe("0000000000 00000 n ")},dn=p.__private__.buildDocument=function(){var A;Q=0,ge=0,ie=[],T=[],we=[],La=yr(),Ss=yr(),be(ie),yt.publish("buildDocument"),cr(),Ms(),(function(){yt.publish("putAdditionalObjects");for(var xe=0;xe<we.length;xe++){var Ne=we[xe];wn(Ne.objId,!0),pe(Ne.content),pe("endobj")}yt.publish("postPutAdditionalObjects")})(),A=[],(function(){for(var xe in xt)xt.hasOwnProperty(xe)&&(m===!1||m===!0&&x.hasOwnProperty(xe))&&Fa(xt[xe])})(),(function(){var xe;for(xe in It)It.hasOwnProperty(xe)&&ze(It[xe])})(),(function(){for(var xe in Sr)Sr.hasOwnProperty(xe)&&Js(Sr[xe])})(),(function(xe){var Ne;for(Ne in bt)bt.hasOwnProperty(Ne)&&(bt[Ne]instanceof ih?Ya(bt[Ne]):bt[Ne]instanceof kf&&fi(bt[Ne],xe))})(A),yt.publish("putResources"),A.forEach(ft),ft({resourcesOid:Ss,objectOid:Number.MAX_SAFE_INTEGER}),yt.publish("postPutResources"),h!==null&&(Jn.oid=$r(),pe("<<"),pe("/Filter /Standard"),pe("/V "+Jn.v),pe("/R "+Jn.r),pe("/U <"+Jn.toHexString(Jn.U)+">"),pe("/O <"+Jn.toHexString(Jn.O)+">"),pe("/P "+Jn.P),pe(">>"),pe("endobj")),Qs(),Ke();var Z=ge;return cn(),Xe(),pe("startxref"),pe(""+Z),pe("%%EOF"),be(Se[z]),ie.join(`
`)},Dn=p.__private__.getBlob=function(A){return new Blob([tt(A)],{type:"application/pdf"})},ea=p.output=p.__private__.output=(Yr=function(A,Z){switch(typeof(Z=Z||{})=="string"?Z={filename:Z}:Z.filename=Z.filename||"generated.pdf",A){case void 0:return dn();case"save":p.save(Z.filename);break;case"arraybuffer":return tt(dn());case"blob":return Dn(dn());case"bloburi":case"bloburl":if(Er.URL!==void 0&&typeof Er.URL.createObjectURL=="function")return Er.URL&&Er.URL.createObjectURL(Dn(dn()))||void 0;$n.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var xe="",Ne=dn();try{xe=L3(Ne)}catch{xe=L3(unescape(encodeURIComponent(Ne)))}return"data:application/pdf;filename="+Z.filename+";base64,"+xe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Er)==="[object Window]"){var ke="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ye=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Z.pdfObjectUrl&&(ke=Z.pdfObjectUrl,Ye="");var it='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ke+'"'+Ye+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Z)+");<\/script></body></html>",Ft=Er.open();return Ft!==null&&Ft.document.write(it),Ft}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Er)==="[object Window]"){var Yt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Z.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Z.filename+'" width="500px" height="400px" /></body></html>',wr=Er.open();if(wr!==null){wr.document.write(Yt);var br=this;wr.document.documentElement.querySelector("#pdfViewer").onload=function(){wr.document.title=Z.filename,wr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(br.output("bloburl"))}}return wr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Er)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var en='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Z)+'"></iframe></body></html>',Qn=Er.open();if(Qn!==null&&(Qn.document.write(en),Qn.document.title=Z.filename),Qn||typeof safari>"u")return Qn;break;case"datauri":case"dataurl":return Er.document.location.href=this.output("datauristring",Z);default:return null}},Yr.foo=function(){try{return Yr.apply(this,arguments)}catch(xe){var A=xe.stack||"";~A.indexOf(" at ")&&(A=A.split(" at ")[1]);var Z="Error in function "+A.split(`
`)[0].split("<")[0]+": "+xe.message;if(!Er.console)throw new Error(Z);Er.console.error(Z,xe),Er.alert&&alert(Z)}},Yr.foo.bar=Yr,Yr.foo),mi=function(A){return Array.isArray(Lr)===!0&&Lr.indexOf(A)>-1};switch(n){case"pt":kt=1;break;case"mm":kt=72/25.4;break;case"cm":kt=72/2.54;break;case"in":kt=72;break;case"px":kt=mi("px_scaling")==1?.75:96/72;break;case"pc":case"em":kt=12;break;case"ex":kt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);kt=n}var Jn=null;Y(),G();var xc=p.__private__.getPageInfo=p.getPageInfo=function(A){if(isNaN(A)||A%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:At[A].objId,pageNumber:A,pageContext:At[A]}},Eh=p.__private__.getPageInfoByObjId=function(A){if(isNaN(A)||A%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Z in At)if(At[Z].objId===A)break;return xc(Z)},wu=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:At[z].objId,pageNumber:z,pageContext:At[z]}};p.addPage=function(){return Qr.apply(this,arguments),this},p.setPage=function(){return bn.apply(this,arguments),be.call(this,Se[z]),this},p.insertPage=function(A){return this.addPage(),this.movePage(z,A),this},p.movePage=function(A,Z){var xe,Ne;if(A>Z){xe=Se[A],Ne=At[A];for(var ke=A;ke>Z;ke--)Se[ke]=Se[ke-1],At[ke]=At[ke-1];Se[Z]=xe,At[Z]=Ne,this.setPage(Z)}else if(A<Z){xe=Se[A],Ne=At[A];for(var Ye=A;Ye<Z;Ye++)Se[Ye]=Se[Ye+1],At[Ye]=At[Ye+1];Se[Z]=xe,At[Z]=Ne,this.setPage(Z)}return this},p.deletePage=function(){return Zn.apply(this,arguments),this},p.__private__.text=p.text=function(A,Z,xe,Ne,ke){var Ye,it,Ft,Yt,wr,br,en,Qn,As,On=(Ne=Ne||{}).scope||this;if(typeof A=="number"&&typeof Z=="number"&&(typeof xe=="string"||Array.isArray(xe))){var Us=xe;xe=Z,Z=A,A=Us}if(arguments[3]instanceof jt==0?(Ft=arguments[4],Yt=arguments[5],Tn(en=arguments[3])==="object"&&en!==null||(typeof Ft=="string"&&(Yt=Ft,Ft=null),typeof en=="string"&&(Yt=en,en=null),typeof en=="number"&&(Ft=en,en=null),Ne={flags:en,angle:Ft,align:Yt})):(U("The transform parameter of text() with a Matrix value"),As=ke),isNaN(Z)||isNaN(xe)||A==null)throw new Error("Invalid arguments passed to jsPDF.text");if(A.length===0)return On;var xs,ua="",Ri=typeof Ne.lineHeightFactor=="number"?Ne.lineHeightFactor:Xa,Za=On.internal.scaleFactor;function Dh(tn){return tn=tn.split("	").join(Array(Ne.TabLen||9).join(" ")),wt(tn,en)}function Ml(tn){for(var Nn,os=tn.concat(),Es=[],lo=os.length;lo--;)typeof(Nn=os.shift())=="string"?Es.push(Nn):Array.isArray(tn)&&(Nn.length===1||Nn[1]===void 0&&Nn[2]===void 0)?Es.push(Nn[0]):Es.push([Nn[0],Nn[1],Nn[2]]);return Es}function jc(tn,Nn){var os;if(typeof tn=="string")os=Nn(tn)[0];else if(Array.isArray(tn)){for(var Es,lo,ku=tn.concat(),yd=[],cl=ku.length;cl--;)typeof(Es=ku.shift())=="string"?yd.push(Nn(Es)[0]):Array.isArray(Es)&&typeof Es[0]=="string"&&(lo=Nn(Es[0],Es[1],Es[2]),yd.push([lo[0],lo[1],lo[2]]));os=yd}return os}var Bl=!1,_c=!0;if(typeof A=="string")Bl=!0;else if(Array.isArray(A)){var Ul=A.concat();it=[];for(var Cc,_a=Ul.length;_a--;)(typeof(Cc=Ul.shift())!="string"||Array.isArray(Cc)&&typeof Cc[0]!="string")&&(_c=!1);Bl=_c}if(Bl===!1)throw new Error('Type of text must be string or Array. "'+A+'" is not recognized.');typeof A=="string"&&(A=A.match(/[\r?\n]/)?A.split(/\r\n|\r|\n/g):[A]);var Sc=ye/On.internal.scaleFactor,Ac=Sc*(Ri-1);switch(Ne.baseline){case"bottom":xe-=Ac;break;case"top":xe+=Sc-Ac;break;case"hanging":xe+=Sc-2*Ac;break;case"middle":xe+=Sc/2-Ac}if((br=Ne.maxWidth||0)>0&&(typeof A=="string"?A=On.splitTextToSize(A,br):Object.prototype.toString.call(A)==="[object Array]"&&(A=A.reduce(function(tn,Nn){return tn.concat(On.splitTextToSize(Nn,br))},[]))),Ye={text:A,x:Z,y:xe,options:Ne,mutex:{pdfEscape:wt,activeFontKey:Et,fonts:xt,activeFontSize:ye}},yt.publish("preProcessText",Ye),A=Ye.text,Ft=(Ne=Ye.options).angle,As instanceof jt==0&&Ft&&typeof Ft=="number"){Ft*=Math.PI/180,Ne.rotationDirection===0&&(Ft=-Ft),P===k&&(Ft=-Ft);var Au=Math.cos(Ft),Eu=Math.sin(Ft);As=new jt(Au,Eu,-Eu,Au,0,0)}else Ft&&Ft instanceof jt&&(As=Ft);P!==k||As||(As=Vn),(wr=Ne.charSpace||ao)!==void 0&&(ua+=B(re(wr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Qn=Ne.horizontalScale)!==void 0&&(ua+=B(100*Qn)+` Tz
`),Ne.lang;var as=-1,io=Ne.renderingMode!==void 0?Ne.renderingMode:Ne.stroke,Po=On.internal.getCurrentPageInfo().pageContext;switch(io){case 0:case!1:case"fill":as=0;break;case 1:case!0:case"stroke":as=1;break;case 2:case"fillThenStroke":as=2;break;case 3:case"invisible":as=3;break;case 4:case"fillAndAddForClipping":as=4;break;case 5:case"strokeAndAddPathForClipping":as=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":as=6;break;case 7:case"addToPathForClipping":as=7}var Oh=Po.usedRenderingMode!==void 0?Po.usedRenderingMode:-1;as!==-1?ua+=as+` Tr
`:Oh!==-1&&(ua+=`0 Tr
`),as!==-1&&(Po.usedRenderingMode=as),Yt=Ne.align||"left";var xi,$l=ye*Ri,pd=On.internal.pageSize.getWidth(),xd=xt[Et];wr=Ne.charSpace||ao,br=Ne.maxWidth||0,en=Object.assign({autoencode:!0,noBOM:!0},Ne.flags);var al=[],Li=function(tn){return On.getStringUnitWidth(tn,{font:xd,charSpace:wr,fontSize:ye,doKerning:!1})*ye/Za};if(Object.prototype.toString.call(A)==="[object Array]"){var gi;it=Ml(A),Yt!=="left"&&(xi=it.map(Li));var vi,Vl=0;if(Yt==="right"){Z-=xi[0],A=[],_a=it.length;for(var To=0;To<_a;To++)To===0?(vi=pi(Z),gi=rl(xe)):(vi=re(Vl-xi[To]),gi=-$l),A.push([it[To],vi,gi]),Vl=xi[To]}else if(Yt==="center"){Z-=xi[0]/2,A=[],_a=it.length;for(var il=0;il<_a;il++)il===0?(vi=pi(Z),gi=rl(xe)):(vi=re((Vl-xi[il])/2),gi=-$l),A.push([it[il],vi,gi]),Vl=xi[il]}else if(Yt==="left"){A=[],_a=it.length;for(var ol=0;ol<_a;ol++)A.push(it[ol])}else if(Yt==="justify"&&xd.encoding==="Identity-H"){A=[],_a=it.length,br=br!==0?br:pd;for(var Io=0,gs=0;gs<_a;gs++)if(gi=gs===0?rl(xe):-$l,vi=gs===0?pi(Z):Io,gs<_a-1){var Ec=re((br-xi[gs])/(it[gs].split(" ").length-1)),Do=it[gs].split(" ");A.push([Do[0]+" ",vi,gi]),Io=0;for(var oo=1;oo<Do.length;oo++){var kc=(Li(Do[oo-1]+" "+Do[oo])-Li(Do[oo]))*Za+Ec;oo==Do.length-1?A.push([Do[oo],kc,0]):A.push([Do[oo]+" ",kc,0]),Io-=kc}}else A.push([it[gs],vi,gi]);A.push(["",Io,0])}else{if(Yt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(A=[],_a=it.length,br=br!==0?br:pd,gs=0;gs<_a;gs++){gi=gs===0?rl(xe):-$l,vi=gs===0?pi(Z):0;var Pc=it[gs].split(" ").length-1,gd=Pc>0?(br-xi[gs])/Pc:0;gs<_a-1?al.push(B(re(gd))):al.push(0),A.push([it[gs],vi,gi])}}}(typeof Ne.R2L=="boolean"?Ne.R2L:vt)===!0&&(A=jc(A,function(tn,Nn,os){return[tn.split("").reverse().join(""),Nn,os]})),Ye={text:A,x:Z,y:xe,options:Ne,mutex:{pdfEscape:wt,activeFontKey:Et,fonts:xt,activeFontSize:ye}},yt.publish("postProcessText",Ye),A=Ye.text,xs=Ye.mutex.isHex||!1;var vd=xt[Et].encoding;vd!=="WinAnsiEncoding"&&vd!=="StandardEncoding"||(A=jc(A,function(tn,Nn,os){return[Dh(tn),Nn,os]})),it=Ml(A),A=[];for(var ll,zl,ql,Tc=Array.isArray(it[0])?1:0,Hl="",Ic=function(tn,Nn,os){var Es="";return os instanceof jt?(os=typeof Ne.angle=="number"?Tr(os,new jt(1,0,0,1,tn,Nn)):Tr(new jt(1,0,0,1,tn,Nn),os),P===k&&(os=Tr(new jt(1,0,0,-1,0,0),os)),Es=os.join(" ")+` Tm
`):Es=B(tn)+" "+B(Nn)+` Td
`,Es},is=0;is<it.length;is++){switch(Hl="",Tc){case 1:ql=(xs?"<":"(")+it[is][0]+(xs?">":")"),ll=parseFloat(it[is][1]),zl=parseFloat(it[is][2]);break;case 0:ql=(xs?"<":"(")+it[is]+(xs?">":")"),ll=pi(Z),zl=rl(xe)}al!==void 0&&al[is]!==void 0&&(Hl=al[is]+` Tw
`),is===0?A.push(Hl+Ic(ll,zl,As)+ql):Tc===0?A.push(Hl+ql):Tc===1&&A.push(Hl+Ic(ll,zl,As)+ql)}A=Tc===0?A.join(` Tj
T* `):A.join(` Tj
`),A+=` Tj
`;var Ja=`BT
/`;return Ja+=Et+" "+ye+` Tf
`,Ja+=B(ye*Ri)+` TL
`,Ja+=so+`
`,Ja+=ua,Ja+=A,pe(Ja+="ET"),x[Et]=!0,On};var gc=p.__private__.clip=p.clip=function(A){return pe(A==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return gc("evenodd")},p.__private__.discardPath=p.discardPath=function(){return pe("n"),this};var Co=p.__private__.isValidStyle=function(A){var Z=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(A)!==-1&&(Z=!0),Z};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(A){return Co(A)&&(u=A),this};var cd=p.__private__.getStyle=p.getStyle=function(A){var Z=u;switch(A){case"D":case"S":Z="S";break;case"F":Z="f";break;case"FD":case"DF":Z="B";break;case"f":case"f*":case"B":case"B*":Z=A}return Z},Zr=p.close=function(){return pe("h"),this};p.stroke=function(){return pe("S"),this},p.fill=function(A){return el("f",A),this},p.fillEvenOdd=function(A){return el("f*",A),this},p.fillStroke=function(A){return el("B",A),this},p.fillStrokeEvenOdd=function(A){return el("B*",A),this};var el=function(A,Z){Tn(Z)==="object"?kh(Z,A):pe(A)},dd=function(A){A===null||P===k&&A===void 0||(A=cd(A),pe(A))};function bu(A,Z,xe,Ne,ke){var Ye=new kf(Z||this.boundingBox,xe||this.xStep,Ne||this.yStep,this.gState,ke||this.matrix);Ye.stream=this.stream;var it=A+"$$"+this.cloneIndex+++"$$";return Fr(it,Ye),Ye}var kh=function(A,Z){var xe=Wt[A.key],Ne=bt[xe];if(Ne instanceof ih)pe("q"),pe(Ph(Z)),Ne.gState&&p.setGState(Ne.gState),pe(A.matrix.toString()+" cm"),pe("/"+xe+" sh"),pe("Q");else if(Ne instanceof kf){var ke=new jt(1,0,0,-1,0,Oi());A.matrix&&(ke=ke.multiply(A.matrix||Vn),xe=bu.call(Ne,A.key,A.boundingBox,A.xStep,A.yStep,ke).id),pe("q"),pe("/Pattern cs"),pe("/"+xe+" scn"),Ne.gState&&p.setGState(Ne.gState),pe(Z),pe("Q")}},Ph=function(A){switch(A){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},ud=p.moveTo=function(A,Z){return pe(B(re(A))+" "+B(ee(Z))+" m"),this},tl=p.lineTo=function(A,Z){return pe(B(re(A))+" "+B(ee(Z))+" l"),this},no=p.curveTo=function(A,Z,xe,Ne,ke,Ye){return pe([B(re(A)),B(ee(Z)),B(re(xe)),B(ee(Ne)),B(re(ke)),B(ee(Ye)),"c"].join(" ")),this};p.__private__.line=p.line=function(A,Z,xe,Ne,ke){if(isNaN(A)||isNaN(Z)||isNaN(xe)||isNaN(Ne)||!Co(ke))throw new Error("Invalid arguments passed to jsPDF.line");return P===S?this.lines([[xe-A,Ne-Z]],A,Z,[1,1],ke||"S"):this.lines([[xe-A,Ne-Z]],A,Z,[1,1]).stroke()},p.__private__.lines=p.lines=function(A,Z,xe,Ne,ke,Ye){var it,Ft,Yt,wr,br,en,Qn,As,On,Us,xs,ua;if(typeof A=="number"&&(ua=xe,xe=Z,Z=A,A=ua),Ne=Ne||[1,1],Ye=Ye||!1,isNaN(Z)||isNaN(xe)||!Array.isArray(A)||!Array.isArray(Ne)||!Co(ke)||typeof Ye!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(ud(Z,xe),it=Ne[0],Ft=Ne[1],wr=A.length,Us=Z,xs=xe,Yt=0;Yt<wr;Yt++)(br=A[Yt]).length===2?(Us=br[0]*it+Us,xs=br[1]*Ft+xs,tl(Us,xs)):(en=br[0]*it+Us,Qn=br[1]*Ft+xs,As=br[2]*it+Us,On=br[3]*Ft+xs,Us=br[4]*it+Us,xs=br[5]*Ft+xs,no(en,Qn,As,On,Us,xs));return Ye&&Zr(),dd(ke),this},p.path=function(A){for(var Z=0;Z<A.length;Z++){var xe=A[Z],Ne=xe.c;switch(xe.op){case"m":ud(Ne[0],Ne[1]);break;case"l":tl(Ne[0],Ne[1]);break;case"c":no.apply(this,Ne);break;case"h":Zr()}}return this},p.__private__.rect=p.rect=function(A,Z,xe,Ne,ke){if(isNaN(A)||isNaN(Z)||isNaN(xe)||isNaN(Ne)||!Co(ke))throw new Error("Invalid arguments passed to jsPDF.rect");return P===S&&(Ne=-Ne),pe([B(re(A)),B(ee(Z)),B(re(xe)),B(re(Ne)),"re"].join(" ")),dd(ke),this},p.__private__.triangle=p.triangle=function(A,Z,xe,Ne,ke,Ye,it){if(isNaN(A)||isNaN(Z)||isNaN(xe)||isNaN(Ne)||isNaN(ke)||isNaN(Ye)||!Co(it))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[xe-A,Ne-Z],[ke-xe,Ye-Ne],[A-ke,Z-Ye]],A,Z,[1,1],it,!0),this},p.__private__.roundedRect=p.roundedRect=function(A,Z,xe,Ne,ke,Ye,it){if(isNaN(A)||isNaN(Z)||isNaN(xe)||isNaN(Ne)||isNaN(ke)||isNaN(Ye)||!Co(it))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ft=4/3*(Math.SQRT2-1);return ke=Math.min(ke,.5*xe),Ye=Math.min(Ye,.5*Ne),this.lines([[xe-2*ke,0],[ke*Ft,0,ke,Ye-Ye*Ft,ke,Ye],[0,Ne-2*Ye],[0,Ye*Ft,-ke*Ft,Ye,-ke,Ye],[2*ke-xe,0],[-ke*Ft,0,-ke,-Ye*Ft,-ke,-Ye],[0,2*Ye-Ne],[0,-Ye*Ft,ke*Ft,-Ye,ke,-Ye]],A+ke,Z,[1,1],it,!0),this},p.__private__.ellipse=p.ellipse=function(A,Z,xe,Ne,ke){if(isNaN(A)||isNaN(Z)||isNaN(xe)||isNaN(Ne)||!Co(ke))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ye=4/3*(Math.SQRT2-1)*xe,it=4/3*(Math.SQRT2-1)*Ne;return ud(A+xe,Z),no(A+xe,Z-it,A+Ye,Z-Ne,A,Z-Ne),no(A-Ye,Z-Ne,A-xe,Z-it,A-xe,Z),no(A-xe,Z+it,A-Ye,Z+Ne,A,Z+Ne),no(A+Ye,Z+Ne,A+xe,Z+it,A+xe,Z),dd(ke),this},p.__private__.circle=p.circle=function(A,Z,xe,Ne){if(isNaN(A)||isNaN(Z)||isNaN(xe)||!Co(Ne))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(A,Z,xe,xe,Ne)},p.setFont=function(A,Z,xe){return xe&&(Z=R(Z,xe)),Et=ld(A,Z,{disableWarning:!1}),this};var So=p.__private__.getFont=p.getFont=function(){return xt[ld.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var A,Z,xe={};for(A in Ht)if(Ht.hasOwnProperty(A))for(Z in xe[A]=[],Ht[A])Ht[A].hasOwnProperty(Z)&&xe[A].push(Z);return xe},p.addFont=function(A,Z,xe,Ne,ke){var Ye=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ye.indexOf(arguments[3])!==-1?ke=arguments[3]:arguments[3]&&Ye.indexOf(arguments[3])==-1&&(xe=R(xe,Ne)),Ee.call(this,A,Z,xe,ke=ke||"Identity-H")};var Xa,Pi=t.lineWidth||.200025,mr=p.__private__.getLineWidth=p.getLineWidth=function(){return Pi},vc=p.__private__.setLineWidth=p.setLineWidth=function(A){return Pi=A,pe(B(re(A))+" w"),this};p.__private__.setLineDash=tr.API.setLineDash=tr.API.setLineDashPattern=function(A,Z){if(A=A||[],Z=Z||0,isNaN(Z)||!Array.isArray(A))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return A=A.map(function(xe){return B(re(xe))}).join(" "),Z=B(re(Z)),pe("["+A+"] "+Z+" d"),this};var Ao=p.__private__.getLineHeight=p.getLineHeight=function(){return ye*Xa};p.__private__.getLineHeight=p.getLineHeight=function(){return ye*Xa};var mm=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(A){return typeof(A=A||1.15)=="number"&&(Xa=A),this},Th=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return Xa};mm(t.lineHeight);var pi=p.__private__.getHorizontalCoordinate=function(A){return re(A)},rl=p.__private__.getVerticalCoordinate=function(A){return P===k?A:At[z].mediaBox.topRightY-At[z].mediaBox.bottomLeftY-re(A)},Ih=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(A){return B(pi(A))},hd=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(A){return B(rl(A))},yc=t.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return ba(yc)},p.__private__.setStrokeColor=p.setDrawColor=function(A,Z,xe,Ne){return yc=Xn({ch1:A,ch2:Z,ch3:xe,ch4:Ne,pdfColorType:"draw",precision:2}),pe(yc),this};var Nu=t.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return ba(Nu)},p.__private__.setFillColor=p.setFillColor=function(A,Z,xe,Ne){return Nu=Xn({ch1:A,ch2:Z,ch3:xe,ch4:Ne,pdfColorType:"fill",precision:2}),pe(Nu),this};var so=t.textColor||"0 g",Eo=p.__private__.getTextColor=p.getTextColor=function(){return ba(so)};p.__private__.setTextColor=p.setTextColor=function(A,Z,xe,Ne){return so=Xn({ch1:A,ch2:Z,ch3:xe,ch4:Ne,pdfColorType:"text",precision:3}),this};var ao=t.charSpace,fd=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(ao||0)};p.__private__.setCharSpace=p.setCharSpace=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ao=A,this};var ju=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(A){var Z=p.CapJoinStyles[A];if(Z===void 0)throw new Error("Line cap style of '"+A+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ju=Z,pe(Z+" J"),this};var _u=0;p.__private__.setLineJoin=p.setLineJoin=function(A){var Z=p.CapJoinStyles[A];if(Z===void 0)throw new Error("Line join style of '"+A+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return _u=Z,pe(Z+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(A){if(A=A||0,isNaN(A))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return pe(B(re(A))+" M"),this},p.GState=p1,p.setGState=function(A){(A=typeof A=="string"?It[Cr[A]]:nl(null,A)).equals(Gr)||(pe("/"+A.id+" gs"),Gr=A)};var nl=function(A,Z){if(!A||!Cr[A]){var xe=!1;for(var Ne in It)if(It.hasOwnProperty(Ne)&&It[Ne].equals(Z)){xe=!0;break}if(xe)Z=It[Ne];else{var ke="GS"+(Object.keys(It).length+1).toString(10);It[ke]=Z,Z.id=ke}return A&&(Cr[A]=Z.id),yt.publish("addGState",Z),Z}};p.addGState=function(A,Z){return nl(A,Z),this},p.saveGraphicsState=function(){return pe("q"),Me.push({key:Et,size:ye,color:so}),this},p.restoreGraphicsState=function(){pe("Q");var A=Me.pop();return Et=A.key,ye=A.size,so=A.color,Gr=null,this},p.setCurrentTransformationMatrix=function(A){return pe(A.toString()+" cm"),this},p.comment=function(A){return pe("#"+A),this};var ko=function(A,Z){var xe=A||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return xe},set:function(Ye){isNaN(Ye)||(xe=parseFloat(Ye))}});var Ne=Z||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ne},set:function(Ye){isNaN(Ye)||(Ne=parseFloat(Ye))}});var ke="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ke},set:function(Ye){ke=Ye.toString()}}),this},wc=function(A,Z,xe,Ne){ko.call(this,A,Z),this.type="rect";var ke=xe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ke},set:function(it){isNaN(it)||(ke=parseFloat(it))}});var Ye=Ne||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ye},set:function(it){isNaN(it)||(Ye=parseFloat(it))}}),this},bc=function(){this.page=vr,this.currentPage=z,this.pages=Se.slice(0),this.pagesContext=At.slice(0),this.x=St,this.y=gr,this.matrix=Rr,this.width=Nc(z),this.height=Ii(z),this.outputDestination=We,this.id="",this.objectNumber=-1};bc.prototype.restore=function(){vr=this.page,z=this.currentPage,At=this.pagesContext,Se=this.pages,St=this.x,gr=this.y,Rr=this.matrix,Cu(z,this.width),Di(z,this.height),We=this.outputDestination};var Ti=function(A,Z,xe,Ne,ke){Mr.push(new bc),vr=z=0,Se=[],St=A,gr=Z,Rr=ke,nt([xe,Ne])};for(var sl in p.beginFormObject=function(A,Z,xe,Ne,ke){return Ti(A,Z,xe,Ne,ke),this},p.endFormObject=function(A){return(function(Z){if(Kr[Z])Mr.pop().restore();else{var xe=new bc,Ne="Xo"+(Object.keys(Sr).length+1).toString(10);xe.id=Ne,Kr[Z]=Ne,Sr[Ne]=xe,yt.publish("addFormObject",xe),Mr.pop().restore()}})(A),this},p.doFormObject=function(A,Z){var xe=Sr[Kr[A]];return pe("q"),pe(Z.toString()+" cm"),pe("/"+xe.id+" Do"),pe("Q"),this},p.getFormObject=function(A){var Z=Sr[Kr[A]];return{x:Z.x,y:Z.y,width:Z.width,height:Z.height,matrix:Z.matrix}},p.save=function(A,Z){return A=A||"generated.pdf",(Z=Z||{}).returnPromise=Z.returnPromise||!1,Z.returnPromise===!1?(nh(Dn(dn()),A),typeof nh.unload=="function"&&Er.setTimeout&&setTimeout(nh.unload,911),this):new Promise(function(xe,Ne){try{var ke=nh(Dn(dn()),A);typeof nh.unload=="function"&&Er.setTimeout&&setTimeout(nh.unload,911),xe(ke)}catch(Ye){Ne(Ye.message)}})},tr.API)tr.API.hasOwnProperty(sl)&&(sl==="events"&&tr.API.events.length?(function(A,Z){var xe,Ne,ke;for(ke=Z.length-1;ke!==-1;ke--)xe=Z[ke][0],Ne=Z[ke][1],A.subscribe.apply(A,[xe].concat(typeof Ne=="function"?[Ne]:Ne))})(yt,tr.API.events):p[sl]=tr.API[sl]);function Nc(A){return At[A].mediaBox.topRightX-At[A].mediaBox.bottomLeftX}function Cu(A,Z){At[A].mediaBox.topRightX=Z+At[A].mediaBox.bottomLeftX}function Ii(A){return At[A].mediaBox.topRightY-At[A].mediaBox.bottomLeftY}function Di(A,Z){At[A].mediaBox.topRightY=Z+At[A].mediaBox.bottomLeftY}var Su=p.getPageWidth=function(A){return Nc(A=A||z)/kt},ja=p.setPageWidth=function(A,Z){Cu(A,Z*kt)},Oi=p.getPageHeight=function(A){return Ii(A=A||z)/kt},md=p.setPageHeight=function(A,Z){Di(A,Z*kt)};return p.internal={pdfEscape:wt,getStyle:cd,getFont:So,getFontSize:Ve,getCharSpace:fd,getTextColor:Eo,getLineHeight:Ao,getLineHeightFactor:Th,getLineWidth:mr,write:at,getHorizontalCoordinate:pi,getVerticalCoordinate:rl,getCoordinateString:Ih,getVerticalCoordinateString:hd,collections:{},newObject:$r,newAdditionalObject:Ra,newObjectDeferred:yr,newObjectDeferredBegin:wn,getFilters:Fs,putStream:In,events:yt,scaleFactor:kt,pageSize:{getWidth:function(){return Su(z)},setWidth:function(A){ja(z,A)},getHeight:function(){return Oi(z)},setHeight:function(A){md(z,A)}},encryptionOptions:h,encryption:Jn,getEncryptor:function(A){return h!==null?Jn.encryptor(A,0):function(Z){return Z}},output:ea,getNumberOfPages:Bs,pages:Se,out:pe,f2:M,f3:q,getPageInfo:xc,getPageInfoByObjId:Eh,getCurrentPageInfo:wu,getPDFVersion:w,Point:ko,Rectangle:wc,Matrix:jt,hasHotfix:mi},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return Su(z)},set:function(A){ja(z,A)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Oi(z)},set:function(A){md(z,A)},enumerable:!0,configurable:!0}),function(A){for(var Z=0,xe=Be.length;Z<xe;Z++){var Ne=Ee.call(this,A[Z][0],A[Z][1],A[Z][2],Be[Z][3],!0);m===!1&&(x[Ne]=!0);var ke=A[Z][0].split("-");gn({id:Ne,fontName:ke[0],fontStyle:ke[1]||""})}yt.publish("addFonts",{fonts:xt,dictionary:Ht})}.call(p,Be),Et="F1",Qr(a,r),yt.publish("initialized"),p}yf.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},yf.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},yf.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},yf.prototype.processOwnerPassword=function(t,e){return Qy(Jy(e).substr(0,5),t)},yf.prototype.encryptor=function(t,e){var r=Jy(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return Qy(r,n)}},p1.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||Tn(t)!==Tn(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},tr.API={events:[]},tr.version="3.0.3";var Ds=tr.API,Qb=1,Ah=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},mf=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Or=function(t){return t.toFixed(2)},zd=function(t){return t.toFixed(5)};Ds.__acroform__={};var ro=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},U3=function(t){return t*Qb},ec=function(t){var e=new x7,r=zt.internal.getHeight(t)||0,n=zt.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Or(n)),Number(Or(r))],e},pee=Ds.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},xee=Ds.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},gee=Ds.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Gs=Ds.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return gee(t,e-1)},Ks=Ds.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return pee(t,e-1)},Ys=Ds.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return xee(t,e-1)},vee=Ds.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,a=t[0],i=t[1],o=t[2],l=t[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=n(i+l)||0,c.upperRight_X=r(a+o)||0,c.upperRight_Y=n(i)||0,[Number(Or(c.lowerLeft_X)),Number(Or(c.lowerLeft_Y)),Number(Or(c.upperRight_X)),Number(Or(c.upperRight_Y))]},yee=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=ew(t,r),a=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+a+" "+Or(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var i=ec(t);return i.scope=t.scope,i.stream=e.join(`
`),i}},ew=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},a=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");a=t.multiline?a.map(function(M){return M.split(`
`)}):a.map(function(M){return[M]});var i=r,o=zt.internal.getHeight(t)||0;o=o<0?-o:o;var l=zt.internal.getWidth(t)||0;l=l<0?-l:l;var c=function(M,q,re){if(M+1<a.length){var ee=q+" "+a[M+1][0];return xx(ee,t,re).width<=l-4}return!1};i++;e:for(;i>0;){e="",i--;var u,h,m=xx("3",t,i).height,x=t.multiline?o-i:(o-m)/2,p=x+=2,y=0,w=0,j=0;if(i<=0){e=`(...) Tj
`,e+="% Width of Text: "+xx(e,t,i=12).width+", FieldWidth:"+l+`
`;break}for(var C="",S=0,k=0;k<a.length;k++)if(a.hasOwnProperty(k)){var P=!1;if(a[k].length!==1&&j!==a[k].length-1){if((m+2)*(S+2)+2>o)continue e;C+=a[k][j],P=!0,w=k,k--}else{C=(C+=a[k][j]+" ").substr(C.length-1)==" "?C.substr(0,C.length-1):C;var O=parseInt(k),$=c(O,C,i),R=k>=a.length-1;if($&&!R){C+=" ",j=0;continue}if($||R){if(R)w=O;else if(t.multiline&&(m+2)*(S+2)+2>o)continue e}else{if(!t.multiline||(m+2)*(S+2)+2>o)continue e;w=O}}for(var B="",U=y;U<=w;U++){var K=a[U];if(t.multiline){if(U===w){B+=K[j]+" ",j=(j+1)%K.length;continue}if(U===y){B+=K[K.length-1]+" ";continue}}B+=K[0]+" "}switch(B=B.substr(B.length-1)==" "?B.substr(0,B.length-1):B,h=xx(B,t,i).width,t.textAlign){case"right":u=l-h-2;break;case"center":u=(l-h)/2;break;default:u=2}e+=Or(u)+" "+Or(p)+` Td
`,e+="("+Ah(B)+`) Tj
`,e+=-Or(u)+` 0 Td
`,p=-(i+2),h=0,y=P?w:w+1,S++,C=""}break}return n.text=e,n.fontSize=i,n},xx=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),a=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},wee={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},bee=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},Nee=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Ll.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(wee)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Qb=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new g7,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var i=n[a];i.objId=void 0,i.hasAnnotation&&bee(i,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,a){var i=!n;for(var o in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var l=n[o],c=[],u=l.Rect;if(l.Rect&&(l.Rect=vee(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=zt.createDefaultAppearanceStream(l),Tn(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=u,l.hasAppearanceStream&&!l.appearanceStreamContent){var h=yee(l);c.push({key:"AP",value:"<</N "+h+">>"}),a.internal.acroformPlugin.xForms.push(h)}if(l.appearanceStreamContent){var m="";for(var x in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(x)){var p=l.appearanceStreamContent[x];if(m+="/"+x+" ",m+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var o in p)if(p.hasOwnProperty(o)){var y=p[o];typeof y=="function"&&(y=y.call(a,l)),m+="/"+o+" "+y+" ",a.internal.acroformPlugin.xForms.indexOf(y)>=0||a.internal.acroformPlugin.xForms.push(y)}}else typeof(y=p)=="function"&&(y=y.call(a,l)),m+="/"+o+" "+y,a.internal.acroformPlugin.xForms.indexOf(y)>=0||a.internal.acroformPlugin.xForms.push(y);m+=">>"}c.push({key:"AP",value:`<<
`+m+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:l.objId}),a.internal.out("endobj")}i&&(function(w,j){for(var C in w)if(w.hasOwnProperty(C)){var S=C,k=w[C];j.internal.newObjectDeferredBegin(k.objId,!0),Tn(k)==="object"&&typeof k.putStream=="function"&&k.putStream(),delete w[S]}})(a.internal.acroformPlugin.xForms,a)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},p7=Ds.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(o){return o};if(Array.isArray(t)){for(var a="[",i=0;i<t.length;i++)switch(i!==0&&(a+=" "),Tn(t[i])){case"boolean":case"number":case"object":a+=t[i].toString();break;case"string":t[i].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),a+="("+Ah(n(t[i].toString()))+")"):a+=t[i].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},A2=function(t,e,r){var n=function(a){return a};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),"("+Ah(n(t))+")"},nc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};nc.prototype.toString=function(){return this.objId+" 0 R"},nc.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},nc.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],a=this[n];a&&(Array.isArray(a)?t.push({key:n,value:p7(a,this.objId,this.scope)}):a instanceof nc?(a.scope=this.scope,t.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&t.push({key:n,value:a}))}return t};var x7=function(){nc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};ro(x7,nc);var g7=function(){nc.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Ah(r(t))+")"}},set:function(r){t=r}})};ro(g7,nc);var Ll=function t(){nc.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(C){if(isNaN(C))throw new Error('Invalid value "'+C+'" for attribute F supplied.');e=C}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Gs(e,3)},set:function(C){C?this.F=Ks(e,3):this.F=Ys(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(C){if(isNaN(C))throw new Error('Invalid value "'+C+'" for attribute Ff supplied.');r=C}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(C){n=C!==void 0?C:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(C){n[0]=C}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(C){n[1]=C}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(C){n[2]=C}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(C){n[3]=C}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(C){switch(C){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=C;break;default:throw new Error('Invalid value "'+C+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof x1)return;i="FieldObject"+t.FieldNum++}var C=function(S){return S};return this.scope&&(C=this.scope.internal.getEncryptor(this.objId)),"("+Ah(C(i))+")"},set:function(C){i=C.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(C){i=C}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(C){o=C}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(C){l=C}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(C){c=C}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/Qb:u},set:function(C){u=C}});var h="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return h},set:function(C){h=C}});var m="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!m||this instanceof x1||this instanceof ph))return A2(m,this.objId,this.scope)},set:function(C){C=C.toString(),m=C}});var x=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof Ia==0?A2(x,this.objId,this.scope):x},set:function(C){C=C.toString(),x=this instanceof Ia==0?C.substr(0,1)==="("?mf(C.substr(1,C.length-2)):mf(C):C}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ia==1?mf(x.substr(1,x.length-1)):x},set:function(C){C=C.toString(),x=this instanceof Ia==1?"/"+C:C}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(C){this.V=C}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Ia==0?A2(p,this.objId,this.scope):p},set:function(C){C=C.toString(),p=this instanceof Ia==0?C.substr(0,1)==="("?mf(C.substr(1,C.length-2)):mf(C):C}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ia==1?mf(p.substr(1,p.length-1)):p},set:function(C){C=C.toString(),p=this instanceof Ia==1?"/"+C:C}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var y,w=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return w},set:function(C){C=!!C,w=C}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(y)return y},set:function(C){y=C}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,1)},set:function(C){C?this.Ff=Ks(this.Ff,1):this.Ff=Ys(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,2)},set:function(C){C?this.Ff=Ks(this.Ff,2):this.Ff=Ys(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,3)},set:function(C){C?this.Ff=Ks(this.Ff,3):this.Ff=Ys(this.Ff,3)}});var j=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(j!==null)return j},set:function(C){if([0,1,2].indexOf(C)===-1)throw new Error('Invalid value "'+C+'" for attribute Q supplied.');j=C}}),Object.defineProperty(this,"textAlign",{get:function(){var C;switch(j){case 0:default:C="left";break;case 1:C="center";break;case 2:C="right"}return C},configurable:!0,enumerable:!0,set:function(C){switch(C){case"right":case 2:j=2;break;case"center":case 1:j=1;break;default:j=0}}})};ro(Ll,nc);var Ff=function(){Ll.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return p7(e,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=(function(i,o,l){l||(l=1);for(var c,u=[];c=o.exec(i);)u.push(c[l]);return u})(n,/\((.*?)\)/g)),e=a}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,18)},set:function(r){r?this.Ff=Ks(this.Ff,18):this.Ff=Ys(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Ks(this.Ff,19):this.Ff=Ys(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,20)},set:function(r){r?(this.Ff=Ks(this.Ff,20),e.sort()):this.Ff=Ys(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,22)},set:function(r){r?this.Ff=Ks(this.Ff,22):this.Ff=Ys(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,23)},set:function(r){r?this.Ff=Ks(this.Ff,23):this.Ff=Ys(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,27)},set:function(r){r?this.Ff=Ks(this.Ff,27):this.Ff=Ys(this.Ff,27)}}),this.hasAppearanceStream=!1};ro(Ff,Ll);var Mf=function(){Ff.call(this),this.fontName="helvetica",this.combo=!1};ro(Mf,Ff);var Bf=function(){Mf.call(this),this.combo=!0};ro(Bf,Mf);var Dx=function(){Bf.call(this),this.edit=!0};ro(Dx,Bf);var Ia=function(){Ll.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,15)},set:function(r){r?this.Ff=Ks(this.Ff,15):this.Ff=Ys(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,16)},set:function(r){r?this.Ff=Ks(this.Ff,16):this.Ff=Ys(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,17)},set:function(r){r?this.Ff=Ks(this.Ff,17):this.Ff=Ys(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,26)},set:function(r){r?this.Ff=Ks(this.Ff,26):this.Ff=Ys(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,a=[];for(n in a.push("<<"),e)a.push("/"+n+" ("+Ah(r(e[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){Tn(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};ro(Ia,Ll);var Ox=function(){Ia.call(this),this.pushButton=!0};ro(Ox,Ia);var Uf=function(){Ia.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};ro(Uf,Ia);var x1=function(){var t,e;Ll.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(a){e=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),n)o.push("/"+i+" ("+Ah(a(n[i]))+")");return o.push(">>"),o.join(`
`)},set:function(a){Tn(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=zt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ro(x1,Ll),Uf.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},Uf.prototype.createOption=function(t){var e=new x1;return e.Parent=this,e.optionName=t,this.Kids.push(e),jee.call(this.scope,e),e};var Rx=function(){Ia.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=zt.CheckBox.createAppearanceStream()};ro(Rx,Ia);var ph=function(){Ll.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,13)},set:function(e){e?this.Ff=Ks(this.Ff,13):this.Ff=Ys(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,21)},set:function(e){e?this.Ff=Ks(this.Ff,21):this.Ff=Ys(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,23)},set:function(e){e?this.Ff=Ks(this.Ff,23):this.Ff=Ys(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,24)},set:function(e){e?this.Ff=Ks(this.Ff,24):this.Ff=Ys(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,25)},set:function(e){e?this.Ff=Ks(this.Ff,25):this.Ff=Ys(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,26)},set:function(e){e?this.Ff=Ks(this.Ff,26):this.Ff=Ys(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ro(ph,Ll);var Lx=function(){ph.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,14)},set:function(t){t?this.Ff=Ks(this.Ff,14):this.Ff=Ys(this.Ff,14)}}),this.password=!0};ro(Lx,ph);var zt={CheckBox:{createAppearanceStream:function(){return{N:{On:zt.CheckBox.YesNormal},D:{On:zt.CheckBox.YesPushDown,Off:zt.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=ec(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,a=t.scope.__private__.encodeColorString(t.color),i=ew(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+Or(zt.internal.getWidth(t))+" "+Or(zt.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Or(i.fontSize)+" Tf "+a),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=ec(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),a=[],i=zt.internal.getHeight(t),o=zt.internal.getWidth(t),l=ew(t,t.caption);return a.push("1 g"),a.push("0 0 "+Or(o)+" "+Or(i)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+Or(o-1)+" "+Or(i-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+Or(l.fontSize)+" Tf "+n),a.push(l.text),a.push("ET"),a.push("Q"),e.stream=a.join(`
`),e},OffPushDown:function(t){var e=ec(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Or(zt.internal.getWidth(t))+" "+Or(zt.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:zt.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=zt.RadioButton.Circle.YesNormal,e.D[t]=zt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=ec(t);e.scope=t.scope;var r=[],n=zt.internal.getWidth(t)<=zt.internal.getHeight(t)?zt.internal.getWidth(t)/4:zt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=zt.internal.Bezier_C,i=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+zd(zt.internal.getWidth(t)/2)+" "+zd(zt.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=ec(t);e.scope=t.scope;var r=[],n=zt.internal.getWidth(t)<=zt.internal.getHeight(t)?zt.internal.getWidth(t)/4:zt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*zt.internal.Bezier_C).toFixed(5)),o=Number((n*zt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+zd(zt.internal.getWidth(t)/2)+" "+zd(zt.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+zd(zt.internal.getWidth(t)/2)+" "+zd(zt.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=ec(t);e.scope=t.scope;var r=[],n=zt.internal.getWidth(t)<=zt.internal.getHeight(t)?zt.internal.getWidth(t)/4:zt.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*zt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+zd(zt.internal.getWidth(t)/2)+" "+zd(zt.internal.getHeight(t)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:zt.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=zt.RadioButton.Cross.YesNormal,e.D[t]=zt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=ec(t);e.scope=t.scope;var r=[],n=zt.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+Or(zt.internal.getWidth(t)-2)+" "+Or(zt.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Or(n.x1.x)+" "+Or(n.x1.y)+" m"),r.push(Or(n.x2.x)+" "+Or(n.x2.y)+" l"),r.push(Or(n.x4.x)+" "+Or(n.x4.y)+" m"),r.push(Or(n.x3.x)+" "+Or(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=ec(t);e.scope=t.scope;var r=zt.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+Or(zt.internal.getWidth(t))+" "+Or(zt.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Or(zt.internal.getWidth(t)-2)+" "+Or(zt.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Or(r.x1.x)+" "+Or(r.x1.y)+" m"),n.push(Or(r.x2.x)+" "+Or(r.x2.y)+" l"),n.push(Or(r.x4.x)+" "+Or(r.x4.y)+" m"),n.push(Or(r.x3.x)+" "+Or(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=ec(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Or(zt.internal.getWidth(t))+" "+Or(zt.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};zt.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=zt.internal.getWidth(t),r=zt.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},zt.internal.getWidth=function(t){var e=0;return Tn(t)==="object"&&(e=U3(t.Rect[2])),e},zt.internal.getHeight=function(t){var e=0;return Tn(t)==="object"&&(e=U3(t.Rect[3])),e};var jee=Ds.addField=function(t){if(Nee(this,t),!(t instanceof Ll))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Ds.AcroFormChoiceField=Ff,Ds.AcroFormListBox=Mf,Ds.AcroFormComboBox=Bf,Ds.AcroFormEditBox=Dx,Ds.AcroFormButton=Ia,Ds.AcroFormPushButton=Ox,Ds.AcroFormRadioButton=Uf,Ds.AcroFormCheckBox=Rx,Ds.AcroFormTextField=ph,Ds.AcroFormPasswordField=Lx,Ds.AcroFormAppearance=zt,Ds.AcroForm={ChoiceField:Ff,ListBox:Mf,ComboBox:Bf,EditBox:Dx,Button:Ia,PushButton:Ox,RadioButton:Uf,CheckBox:Rx,TextField:ph,PasswordField:Lx,Appearance:zt},tr.AcroForm={ChoiceField:Ff,ListBox:Mf,ComboBox:Bf,EditBox:Dx,Button:Ia,PushButton:Ox,RadioButton:Uf,CheckBox:Rx,TextField:ph,PasswordField:Lx,Appearance:zt};tr.AcroForm;function v7(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){var e="addImage_";t.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=t.__addimage__.getImageFileTypeByImageData=function(M,q){var re,ee,H,se,ue,G=r;if((q=q||r)==="RGBA"||M.data!==void 0&&M.data instanceof Uint8ClampedArray&&"height"in M&&"width"in M)return"RGBA";if($(M))for(ue in n)for(H=n[ue],re=0;re<H.length;re+=1){for(se=!0,ee=0;ee<H[re].length;ee+=1)if(H[re][ee]!==void 0&&H[re][ee]!==M[ee]){se=!1;break}if(se===!0){G=ue;break}}else for(ue in n)for(H=n[ue],re=0;re<H.length;re+=1){for(se=!0,ee=0;ee<H[re].length;ee+=1)if(H[re][ee]!==void 0&&H[re][ee]!==M.charCodeAt(ee)){se=!1;break}if(se===!0){G=ue;break}}return G===r&&q!==r&&(G=q),G},i=function M(q){for(var re=this.internal.write,ee=this.internal.putStream,H=(0,this.internal.getFilters)();H.indexOf("FlateEncode")!==-1;)H.splice(H.indexOf("FlateEncode"),1);q.objectId=this.internal.newObject();var se=[];if(se.push({key:"Type",value:"/XObject"}),se.push({key:"Subtype",value:"/Image"}),se.push({key:"Width",value:q.width}),se.push({key:"Height",value:q.height}),q.colorSpace===C.INDEXED?se.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(q.palette.length/3-1)+" "+("sMask"in q&&q.sMask!==void 0?q.objectId+2:q.objectId+1)+" 0 R]"}):(se.push({key:"ColorSpace",value:"/"+q.colorSpace}),q.colorSpace===C.DEVICE_CMYK&&se.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),se.push({key:"BitsPerComponent",value:q.bitsPerComponent}),"decodeParameters"in q&&q.decodeParameters!==void 0&&se.push({key:"DecodeParms",value:"<<"+q.decodeParameters+">>"}),"transparency"in q&&Array.isArray(q.transparency)&&q.transparency.length>0){for(var ue="",G=0,J=q.transparency.length;G<J;G++)ue+=q.transparency[G]+" "+q.transparency[G]+" ";se.push({key:"Mask",value:"["+ue+"]"})}q.sMask!==void 0&&se.push({key:"SMask",value:q.objectId+1+" 0 R"});var oe=q.filter!==void 0?["/"+q.filter]:void 0;if(ee({data:q.data,additionalKeyValues:se,alreadyAppliedFilters:oe,objectId:q.objectId}),re("endobj"),"sMask"in q&&q.sMask!==void 0){var Y,L=(Y=q.sMaskBitsPerComponent)!==null&&Y!==void 0?Y:q.bitsPerComponent,z={width:q.width,height:q.height,colorSpace:"DeviceGray",bitsPerComponent:L,data:q.sMask};"filter"in q&&(z.decodeParameters="/Predictor ".concat(q.predictor," /Colors 1 /BitsPerComponent ").concat(L," /Columns ").concat(q.width),z.filter=q.filter),M.call(this,z)}if(q.colorSpace===C.INDEXED){var V=this.internal.newObject();ee({data:B(new Uint8Array(q.palette)),objectId:V}),re("endobj")}},o=function(){var M=this.internal.collections[e+"images"];for(var q in M)i.call(this,M[q])},l=function(){var M,q=this.internal.collections[e+"images"],re=this.internal.write;for(var ee in q)re("/I"+(M=q[ee]).index,M.objectId,"0","R")},c=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",l))},u=function(){var M=this.internal.collections[e+"images"];return c.call(this),M},h=function(){return Object.keys(this.internal.collections[e+"images"]).length},m=function(M){return typeof t["process"+M.toUpperCase()]=="function"},x=function(M){return Tn(M)==="object"&&M.nodeType===1},p=function(M,q){if(M.nodeName==="IMG"&&M.hasAttribute("src")){var re=""+M.getAttribute("src");if(re.indexOf("data:image/")===0)return Ix(unescape(re).split("base64,").pop());var ee=t.loadFile(re,!0);if(ee!==void 0)return ee}if(M.nodeName==="CANVAS"){if(M.width===0||M.height===0)throw new Error("Given canvas must have data. Canvas width: "+M.width+", height: "+M.height);var H;switch(q){case"PNG":H="image/png";break;case"WEBP":H="image/webp";break;default:H="image/jpeg"}return Ix(M.toDataURL(H,1).split("base64,").pop())}},y=function(M){var q=this.internal.collections[e+"images"];if(q){for(var re in q)if(M===q[re].alias)return q[re]}},w=function(M,q,re){return M||q||(M=-96,q=-96),M<0&&(M=-1*re.width*72/M/this.internal.scaleFactor),q<0&&(q=-1*re.height*72/q/this.internal.scaleFactor),M===0&&(M=q*re.width/re.height),q===0&&(q=M*re.height/re.width),[M,q]},j=function(M,q,re,ee,H,se){var ue=w.call(this,re,ee,H),G=this.internal.getCoordinateString,J=this.internal.getVerticalCoordinateString,oe=u.call(this);if(re=ue[0],ee=ue[1],oe[H.index]=H,se){se*=Math.PI/180;var Y=Math.cos(se),L=Math.sin(se),z=function(W){return W.toFixed(4)},V=[z(Y),z(L),z(-1*L),z(Y),0,0,"cm"]}this.internal.write("q"),se?(this.internal.write([1,"0","0",1,G(M),J(q+ee),"cm"].join(" ")),this.internal.write(V.join(" ")),this.internal.write([G(re),"0","0",G(ee),"0","0","cm"].join(" "))):this.internal.write([G(re),"0","0",G(ee),G(M),J(q+ee),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+H.index+" Do"),this.internal.write("Q")},C=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var S=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},k=t.__addimage__.sHashCode=function(M){var q,re,ee=0;if(typeof M=="string")for(re=M.length,q=0;q<re;q++)ee=(ee<<5)-ee+M.charCodeAt(q),ee|=0;else if($(M))for(re=M.byteLength/2,q=0;q<re;q++)ee=(ee<<5)-ee+M[q],ee|=0;return ee},P=t.__addimage__.validateStringAsBase64=function(M){(M=M||"").toString().trim();var q=!0;return M.length===0&&(q=!1),M.length%4!=0&&(q=!1),/^[A-Za-z0-9+/]+$/.test(M.substr(0,M.length-2))===!1&&(q=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(M.substr(-2))===!1&&(q=!1),q},O=t.__addimage__.extractImageFromDataUrl=function(M){if(M==null||!(M=M.trim()).startsWith("data:"))return null;var q=M.indexOf(",");return q<0?null:M.substring(0,q).trim().endsWith("base64")?M.substring(q+1):null};t.__addimage__.isArrayBuffer=function(M){return M instanceof ArrayBuffer};var $=t.__addimage__.isArrayBufferView=function(M){return M instanceof Int8Array||M instanceof Uint8Array||M instanceof Uint8ClampedArray||M instanceof Int16Array||M instanceof Uint16Array||M instanceof Int32Array||M instanceof Uint32Array||M instanceof Float32Array||M instanceof Float64Array},R=t.__addimage__.binaryStringToUint8Array=function(M){for(var q=M.length,re=new Uint8Array(q),ee=0;ee<q;ee++)re[ee]=M.charCodeAt(ee);return re},B=t.__addimage__.arrayBufferToBinaryString=function(M){for(var q="",re=$(M)?M:new Uint8Array(M),ee=0;ee<re.length;ee+=8192)q+=String.fromCharCode.apply(null,re.subarray(ee,ee+8192));return q};t.addImage=function(){var M,q,re,ee,H,se,ue,G,J;if(typeof arguments[1]=="number"?(q=r,re=arguments[1],ee=arguments[2],H=arguments[3],se=arguments[4],ue=arguments[5],G=arguments[6],J=arguments[7]):(q=arguments[1],re=arguments[2],ee=arguments[3],H=arguments[4],se=arguments[5],ue=arguments[6],G=arguments[7],J=arguments[8]),Tn(M=arguments[0])==="object"&&!x(M)&&"imageData"in M){var oe=M;M=oe.imageData,q=oe.format||q||r,re=oe.x||re||0,ee=oe.y||ee||0,H=oe.w||oe.width||H,se=oe.h||oe.height||se,ue=oe.alias||ue,G=oe.compression||G,J=oe.rotation||oe.angle||J}var Y=this.internal.getFilters();if(G===void 0&&Y.indexOf("FlateEncode")!==-1&&(G="SLOW"),isNaN(re)||isNaN(ee))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var L=U.call(this,M,q,ue,G);return j.call(this,re,ee,H,se,L,J),this};var U=function(M,q,re,ee){var H,se,ue;if(typeof M=="string"&&a(M)===r){M=unescape(M);var G=K(M,!1);(G!==""||(G=t.loadFile(M,!0))!==void 0)&&(M=G)}if(x(M)&&(M=p(M,q)),q=a(M,q),!m(q))throw new Error("addImage does not support files of type '"+q+"', please ensure that a plugin for '"+q+"' support is added.");if(((ue=re)==null||ue.length===0)&&(re=(function(J){return typeof J=="string"||$(J)?k(J):$(J.data)?k(J.data):null})(M)),(H=y.call(this,re))||(M instanceof Uint8Array||q==="RGBA"||(se=M,M=R(M)),H=this["process"+q.toUpperCase()](M,h.call(this),re,(function(J){return J&&typeof J=="string"&&(J=J.toUpperCase()),J in t.image_compression?J:S.NONE})(ee),se)),!H)throw new Error("An unknown error occurred whilst processing the image.");return H},K=t.__addimage__.convertBase64ToBinaryString=function(M,q){q=typeof q!="boolean"||q;var re,ee="";if(typeof M=="string"){var H;re=(H=O(M))!==null&&H!==void 0?H:M;try{ee=Ix(re)}catch(se){if(q)throw P(re)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+se.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ee};t.getImageProperties=function(M){var q,re,ee="";if(x(M)&&(M=p(M)),typeof M=="string"&&a(M)===r&&((ee=K(M,!1))===""&&(ee=t.loadFile(M)||""),M=ee),re=a(M),!m(re))throw new Error("addImage does not support files of type '"+re+"', please ensure that a plugin for '"+re+"' support is added.");if(M instanceof Uint8Array||(M=R(M)),!(q=this["process"+re.toUpperCase()](M)))throw new Error("An unknown error occurred whilst processing the image");return q.fileType=re,q}})(tr.API),(function(t){var e=function(r){if(r!==void 0&&r!="")return!0};tr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,a,i,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,h=!1,m=0;m<u.length&&!h;m++)switch((n=u[m]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(h=!0);break;case"reference":case"text":case"freetext":h=!0}if(h!=0){this.internal.write("/Annots [");for(var x=0;x<u.length;x++){n=u[x];var p=this.internal.pdfEscape,y=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var w=this.internal.newAdditionalObject(),j=this.internal.newAdditionalObject(),C=this.internal.getEncryptor(w.objId),S=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+p(C(n.contents))+")",i+=" /Popup "+j.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+p(C(S))+") >>",w.content=i;var k=w.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+o(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+k,n.open&&(i+=" /Open true"),i+=" >>",j.content=i,this.internal.write(w.objId,"0 R",j.objId,"0 R");break;case"freetext":a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var P=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+p(y(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+P+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var O=this.annotations._nameMap[n.options.name];n.options.pageNumber=O.page,n.options.top=O.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+p(y(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;default:var $=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+$+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,a,i,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+a),h:u(n+i)},options:o,type:"link"})},t.textWithLink=function(r,n,a,i){var o,l,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var h=this.splitTextToSize(r,l).length;o=Math.ceil(u*h)}else l=c,o=u;return this.text(r,n,a,i),a+=.2*u,i.align==="center"&&(n-=c/2),i.align==="right"&&(n-=c),this.link(n,a-u,l,o,i),c},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}})(tr.API),(function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];t.__arabicParser__={};var i=t.__arabicParser__.isInArabicSubstitutionA=function(w){return e[w.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(w){return typeof w=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(w)},l=t.__arabicParser__.isArabicEndLetter=function(w){return o(w)&&i(w)&&e[w.charCodeAt(0)].length<=2},c=t.__arabicParser__.isArabicAlfLetter=function(w){return o(w)&&a.indexOf(w.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(w){return o(w)&&i(w)&&e[w.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(w){return o(w)&&i(w)&&e[w.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(w){return o(w)&&i(w)&&e[w.charCodeAt(0)].length>=3};var h=t.__arabicParser__.arabicLetterHasMedialForm=function(w){return o(w)&&i(w)&&e[w.charCodeAt(0)].length==4},m=t.__arabicParser__.resolveLigatures=function(w){var j=0,C=r,S="",k=0;for(j=0;j<w.length;j+=1)C[w.charCodeAt(j)]!==void 0?(k++,typeof(C=C[w.charCodeAt(j)])=="number"&&(S+=String.fromCharCode(C),C=r,k=0),j===w.length-1&&(C=r,S+=w.charAt(j-(k-1)),j-=k-1,k=0)):(C=r,S+=w.charAt(j-k),j-=k,k=0);return S};t.__arabicParser__.isArabicDiacritic=function(w){return w!==void 0&&n[w.charCodeAt(0)]!==void 0};var x=t.__arabicParser__.getCorrectForm=function(w,j,C){return o(w)?i(w)===!1?-1:!u(w)||!o(j)&&!o(C)||!o(C)&&l(j)||l(w)&&!o(j)||l(w)&&c(j)||l(w)&&l(j)?0:h(w)&&o(j)&&!l(j)&&o(C)&&u(C)?3:l(w)||!o(C)?1:2:-1},p=function(w){var j=0,C=0,S=0,k="",P="",O="",$=(w=w||"").split("\\s+"),R=[];for(j=0;j<$.length;j+=1){for(R.push(""),C=0;C<$[j].length;C+=1)k=$[j][C],P=$[j][C-1],O=$[j][C+1],o(k)?(S=x(k,P,O),R[j]+=S!==-1?String.fromCharCode(e[k.charCodeAt(0)][S]):k):R[j]+=k;R[j]=m(R[j])}return R.join(" ")},y=t.__arabicParser__.processArabic=t.processArabic=function(){var w,j=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,C=[];if(Array.isArray(j)){var S=0;for(C=[],S=0;S<j.length;S+=1)Array.isArray(j[S])?C.push([p(j[S][0]),j[S][1],j[S][2]]):C.push([p(j[S])]);w=C}else w=p(j);return typeof arguments[0]=="string"?w:(arguments[0].text=w,arguments[0])};t.events.push(["preProcessText",y])})(tr.API),tr.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(tr.API),(function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(w){c=w}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(w){u=w}});var h=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return h},set:function(w){h=w}});var m=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return m},set:function(w){m=w}});var x=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return x},set:function(w){x=w}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(w){p=w}});var y=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return y},set:function(w){y=w}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},t.getTextDimensions=function(c,u){n.call(this);var h=(u=u||{}).fontSize||this.getFontSize(),m=u.font||this.getFont(),x=u.scaleFactor||this.internal.scaleFactor,p=0,y=0,w=0,j=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var C=u.maxWidth;C>0?typeof c=="string"?c=this.splitTextToSize(c,C):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(k,P){return k.concat(j.splitTextToSize(P,C))},[])):c=Array.isArray(c)?c:[c];for(var S=0;S<c.length;S++)p<(w=this.getStringUnitWidth(c[S],{font:m})*h)&&(p=w);return p!==0&&(y=c.length),{w:p/=x,h:Math.max((y*h*this.getLineHeightFactor()-h*(this.getLineHeightFactor()-1))/x,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,h=this.internal.__cell__.padding,m=this.internal.__cell__.margins||e,x=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+m.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=m.top,p&&x&&(this.printHeaderRow(c.lineNumber,!0),c.y+=x[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-h,c.y+h,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+h,{align:"center",baseline:"top",maxWidth:c.width-h-h}):this.text(c.text,c.x+h,c.y+h,{align:"left",baseline:"top",maxWidth:c.width-h-h})),this.internal.__cell__.lastCell=c,this};t.table=function(c,u,h,m,x){if(n.call(this),!h)throw new Error("No data for PDF table.");var p,y,w,j,C=[],S=[],k=[],P={},O={},$=[],R=[],B=(x=x||{}).autoSize||!1,U=x.printHeaders!==!1,K=x.css&&x.css["font-size"]!==void 0?16*x.css["font-size"]:x.fontSize||12,M=x.margins||Object.assign({width:this.getPageWidth()},e),q=typeof x.padding=="number"?x.padding:3,re=x.headerBackgroundColor||"#c8c8c8",ee=x.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=U,this.internal.__cell__.margins=M,this.internal.__cell__.table_font_size=K,this.internal.__cell__.padding=q,this.internal.__cell__.headerBackgroundColor=re,this.internal.__cell__.headerTextColor=ee,this.setFontSize(K),m==null)S=C=Object.keys(h[0]),k=C.map(function(){return"left"});else if(Array.isArray(m)&&Tn(m[0])==="object")for(C=m.map(function(oe){return oe.name}),S=m.map(function(oe){return oe.prompt||oe.name||""}),k=m.map(function(oe){return oe.align||"left"}),p=0;p<m.length;p+=1)O[m[p].name]=.7499990551181103*m[p].width;else Array.isArray(m)&&typeof m[0]=="string"&&(S=C=m,k=C.map(function(){return"left"}));if(B||Array.isArray(m)&&typeof m[0]=="string")for(p=0;p<C.length;p+=1){for(P[j=C[p]]=h.map(function(oe){return oe[j]}),this.setFont(void 0,"bold"),$.push(this.getTextDimensions(S[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),y=P[j],this.setFont(void 0,"normal"),w=0;w<y.length;w+=1)$.push(this.getTextDimensions(y[w],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);O[j]=Math.max.apply(null,$)+q+q,$=[]}if(U){var H={};for(p=0;p<C.length;p+=1)H[C[p]]={},H[C[p]].text=S[p],H[C[p]].align=k[p];var se=l.call(this,H,O);R=C.map(function(oe){return new i(c,u,O[oe],se,H[oe].text,void 0,H[oe].align)}),this.setTableHeaderRow(R),this.printHeaderRow(1,!1)}var ue=m.reduce(function(oe,Y){return oe[Y.name]=Y.align,oe},{});for(p=0;p<h.length;p+=1){"rowStart"in x&&x.rowStart instanceof Function&&x.rowStart({row:p,data:h[p]},this);var G=l.call(this,h[p],O);for(w=0;w<C.length;w+=1){var J=h[p][C[w]];"cellStart"in x&&x.cellStart instanceof Function&&x.cellStart({row:p,col:w,data:J},this),o.call(this,new i(c,u,O[C[w]],G,J,p+2,ue[C[w]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var l=function(c,u){var h=this.internal.__cell__.padding,m=this.internal.__cell__.table_font_size,x=this.internal.scaleFactor;return Object.keys(c).map(function(p){var y=c[p];return this.splitTextToSize(y.hasOwnProperty("text")?y.text:y,u[p]-h-h)},this).map(function(p){return this.getLineHeightFactor()*p.length*m/x+h+h},this).reduce(function(p,y){return Math.max(p,y)},0)};t.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},t.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var h;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var m=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(m[0],m[1],m[2],m[3],void 0,-1)}this.setFont(void 0,"bold");for(var x=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){h=this.internal.__cell__.tableHeaderRow[p].clone(),u&&(h.y=this.internal.__cell__.margins.top||0,x.push(h)),h.lineNumber=c;var y=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,h),this.setTextColor(y)}x.length>0&&this.setTableHeaderRow(x),this.setFont(void 0,"normal"),r=!1}})(tr.API);var y7={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},w7=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],tw=v7(w7),b7=[100,200,300,400,500,600,700,800,900],_ee=v7(b7);function E2(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=(function(i){return y7[i=i||"normal"]?i:"normal"})(t.style),n=(function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400})(t.weight),a=(function(i){return typeof tw[i=i||"normal"]=="number"?i:"normal"})(t.stretch);return{family:e,style:r,weight:n,stretch:a,src:t.src||[],ref:t.ref||{name:e,style:[a,r,n].join(" ")}}}function $3(t,e,r,n){var a;for(a=r;a>=0&&a<e.length;a+=n)if(t[e[a]])return t[e[a]];for(a=r;a>=0&&a<e.length;a-=n)if(t[e[a]])return t[e[a]]}var Cee={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},V3={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function z3(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function q3(t){return t.trimLeft()}function See(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function Aee(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var gx,H3,W3,pf,vx,G3,K3,Y3,k2=["times"];function X3(t,e,r,n,a){var i=4,o=J3;switch(a){case tr.API.image_compression.FAST:i=1,o=Z3;break;case tr.API.image_compression.MEDIUM:i=6,o=Q3;break;case tr.API.image_compression.SLOW:i=9,o=eC}t=(function(c,u,h,m){for(var x,p=c.length/u,y=new Uint8Array(c.length+p),w=[Eee,Z3,J3,Q3,eC],j=0;j<p;j+=1){var C=j*u,S=c.subarray(C,C+u);if(m)y.set(m(S,h,x),C+j);else{for(var k=w.length,P=[],O=0;O<k;O+=1)P[O]=w[O](S,h,x);var $=Pee(P.concat());y.set(P[$],C+j)}x=S}return y})(t,e,Math.ceil(r*n/8),o);var l=Ky(t,{level:i});return tr.API.__addimage__.arrayBufferToBinaryString(l)}function Eee(t){var e=Array.apply([],t);return e.unshift(0),e}function Z3(t,e){var r=t.length,n=[];n[0]=1;for(var a=0;a<r;a+=1){var i=t[a-e]||0;n[a+1]=t[a]-i+256&255}return n}function J3(t,e,r){var n=t.length,a=[];a[0]=2;for(var i=0;i<n;i+=1){var o=r&&r[i]||0;a[i+1]=t[i]-o+256&255}return a}function Q3(t,e,r){var n=t.length,a=[];a[0]=3;for(var i=0;i<n;i+=1){var o=t[i-e]||0,l=r&&r[i]||0;a[i+1]=t[i]+256-(o+l>>>1)&255}return a}function eC(t,e,r){var n=t.length,a=[];a[0]=4;for(var i=0;i<n;i+=1){var o=kee(t[i-e]||0,r&&r[i]||0,r&&r[i-e]||0);a[i+1]=t[i]-o+256&255}return a}function kee(t,e,r){if(t===e&&e===r)return t;var n=Math.abs(e-r),a=Math.abs(t-r),i=Math.abs(t+e-r-r);return n<=a&&n<=i?t:a<=i?e:r}function Pee(t){var e=t.map(function(r){return r.reduce(function(n,a){return n+Math.abs(a)},0)});return e.indexOf(Math.min.apply(null,e))}function P2(t,e,r){var n=e*r,a=Math.floor(n/8),i=16-(n-8*a+r),o=(1<<r)-1;return N7(t,a)>>i&o}function tC(t,e,r,n){var a=r*n,i=Math.floor(a/8),o=16-(a-8*i+n),l=(1<<n)-1,c=(e&l)<<o;(function(u,h,m){if(h+1<u.byteLength)u.setUint16(h,m,!1);else{var x=m>>8&255;u.setUint8(h,x)}})(t,i,N7(t,i)&~(l<<o)&65535|c)}function N7(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function Tee(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,a=t[e++],i=a>>7,o=1<<1+(7&a);t[e++],t[e++];var l=null,c=null;i&&(l=e,c=o,e+=3*o);var u=!0,h=[],m=0,x=null,p=0,y=null;for(this.width=r,this.height=n;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,y=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((M=t[e++])>=0))throw Error("Invalid block size");if(M===0)break;e+=M}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var w=t[e++];m=t[e++]|t[e++]<<8,x=t[e++],1&w||(x=null),p=w>>2&7,e++;break;case 254:for(;;){if(!((M=t[e++])>=0))throw Error("Invalid block size");if(M===0)break;e+=M}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var j=t[e++]|t[e++]<<8,C=t[e++]|t[e++]<<8,S=t[e++]|t[e++]<<8,k=t[e++]|t[e++]<<8,P=t[e++],O=P>>6&1,$=1<<1+(7&P),R=l,B=c,U=!1;P>>7&&(U=!0,R=e,B=$,e+=3*$);var K=e;for(e++;;){var M;if(!((M=t[e++])>=0))throw Error("Invalid block size");if(M===0)break;e+=M}h.push({x:j,y:C,width:S,height:k,has_local_palette:U,palette_offset:R,palette_size:B,data_offset:K,data_length:e-K,transparent_index:x,interlaced:!!O,delay:m,disposal:p});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return y},this.frameInfo=function(q){if(q<0||q>=h.length)throw new Error("Frame index out of range.");return h[q]},this.decodeAndBlitFrameBGRA=function(q,re){var ee=this.frameInfo(q),H=ee.width*ee.height,se=new Uint8Array(H);rC(t,ee.data_offset,se,H);var ue=ee.palette_offset,G=ee.transparent_index;G===null&&(G=256);var J=ee.width,oe=r-J,Y=J,L=4*(ee.y*r+ee.x),z=4*((ee.y+ee.height)*r+ee.x),V=L,W=4*oe;ee.interlaced===!0&&(W+=4*r*7);for(var Q=8,T=0,ie=se.length;T<ie;++T){var ge=se[T];if(Y===0&&(Y=J,(V+=W)>=z&&(W=4*oe+4*r*(Q-1),V=L+(J+oe)*(Q<<1),Q>>=1)),ge===G)V+=4;else{var we=t[ue+3*ge],Se=t[ue+3*ge+1],Ue=t[ue+3*ge+2];re[V++]=Ue,re[V++]=Se,re[V++]=we,re[V++]=255}--Y}},this.decodeAndBlitFrameRGBA=function(q,re){var ee=this.frameInfo(q),H=ee.width*ee.height,se=new Uint8Array(H);rC(t,ee.data_offset,se,H);var ue=ee.palette_offset,G=ee.transparent_index;G===null&&(G=256);var J=ee.width,oe=r-J,Y=J,L=4*(ee.y*r+ee.x),z=4*((ee.y+ee.height)*r+ee.x),V=L,W=4*oe;ee.interlaced===!0&&(W+=4*r*7);for(var Q=8,T=0,ie=se.length;T<ie;++T){var ge=se[T];if(Y===0&&(Y=J,(V+=W)>=z&&(W=4*oe+4*r*(Q-1),V=L+(J+oe)*(Q<<1),Q>>=1)),ge===G)V+=4;else{var we=t[ue+3*ge],Se=t[ue+3*ge+1],Ue=t[ue+3*ge+2];re[V++]=we,re[V++]=Se,re[V++]=Ue,re[V++]=255}--Y}}}function rC(t,e,r,n){for(var a=t[e++],i=1<<a,o=i+1,l=o+1,c=a+1,u=(1<<c)-1,h=0,m=0,x=0,p=t[e++],y=new Int32Array(4096),w=null;;){for(;h<16&&p!==0;)m|=t[e++]<<h,h+=8,p===1?p=t[e++]:--p;if(h<c)break;var j=m&u;if(m>>=c,h-=c,j!==i){if(j===o)break;for(var C=j<l?j:w,S=0,k=C;k>i;)k=y[k]>>8,++S;var P=k;if(x+S+(C!==j?1:0)>n)return void $n.log("Warning, gif stream longer than expected.");r[x++]=P;var O=x+=S;for(C!==j&&(r[x++]=P),k=C;S--;)k=y[k],r[--O]=255&k,k>>=8;w!==null&&l<4096&&(y[l++]=w<<8|P,l>=u+1&&c<12&&(++c,u=u<<1|1)),w=j}else l=o+1,u=(1<<(c=a+1))-1,w=null}return x!==n&&$n.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function T2(t){var e,r,n,a,i,o=Math.floor,l=new Array(64),c=new Array(64),u=new Array(64),h=new Array(64),m=new Array(65535),x=new Array(65535),p=new Array(64),y=new Array(64),w=[],j=0,C=7,S=new Array(64),k=new Array(64),P=new Array(64),O=new Array(256),$=new Array(2048),R=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],B=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],U=[0,1,2,3,4,5,6,7,8,9,10,11],K=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],M=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],q=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],re=[0,1,2,3,4,5,6,7,8,9,10,11],ee=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],H=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function se(L,z){for(var V=0,W=0,Q=new Array,T=1;T<=16;T++){for(var ie=1;ie<=L[T];ie++)Q[z[W]]=[],Q[z[W]][0]=V,Q[z[W]][1]=T,W++,V++;V*=2}return Q}function ue(L){for(var z=L[0],V=L[1]-1;V>=0;)z&1<<V&&(j|=1<<C),V--,--C<0&&(j==255?(G(255),G(0)):G(j),C=7,j=0)}function G(L){w.push(L)}function J(L){G(L>>8&255),G(255&L)}function oe(L,z,V,W,Q){for(var T,ie=Q[0],ge=Q[240],we=(function(ye,st){var Ve,vt,ct,Kt,ot,Ct,qt,Tt,Et,kt,St=0;for(Et=0;Et<8;++Et){Ve=ye[St],vt=ye[St+1],ct=ye[St+2],Kt=ye[St+3],ot=ye[St+4],Ct=ye[St+5],qt=ye[St+6];var gr=Ve+(Tt=ye[St+7]),Rr=Ve-Tt,xt=vt+qt,Ht=vt-qt,Me=ct+Ct,bt=ct-Ct,Wt=Kt+ot,It=Kt-ot,Cr=gr+Wt,Gr=gr-Wt,vr=xt+Me,At=xt-Me;ye[St]=Cr+vr,ye[St+4]=Cr-vr;var yt=.707106781*(At+Gr);ye[St+2]=Gr+yt,ye[St+6]=Gr-yt;var Lr=.382683433*((Cr=It+bt)-(At=Ht+Rr)),Sr=.5411961*Cr+Lr,Kr=1.306562965*At+Lr,Mr=.707106781*(vr=bt+Ht),jt=Rr+Mr,Tr=Rr-Mr;ye[St+5]=Tr+Sr,ye[St+3]=Tr-Sr,ye[St+1]=jt+Kr,ye[St+7]=jt-Kr,St+=8}for(St=0,Et=0;Et<8;++Et){Ve=ye[St],vt=ye[St+8],ct=ye[St+16],Kt=ye[St+24],ot=ye[St+32],Ct=ye[St+40],qt=ye[St+48];var Vn=Ve+(Tt=ye[St+56]),Fr=Ve-Tt,Yr=vt+qt,$r=vt-qt,yr=ct+Ct,wn=ct-Ct,Ra=Kt+ot,La=Kt-ot,Ss=Vn+Ra,ba=Vn-Ra,Xn=Yr+yr,Fs=Yr-yr;ye[St]=Ss+Xn,ye[St+32]=Ss-Xn;var In=.707106781*(Fs+ba);ye[St+16]=ba+In,ye[St+48]=ba-In;var Na=.382683433*((Ss=La+wn)-(Fs=$r+Fr)),Ms=.5411961*Ss+Na,Fa=1.306562965*Fs+Na,Js=.707106781*(Xn=wn+$r),Ya=Fr+Js,fi=Fr-Js;ye[St+40]=fi+Ms,ye[St+24]=fi-Ms,ye[St+8]=Ya+Fa,ye[St+56]=Ya-Fa,St++}for(Et=0;Et<64;++Et)kt=ye[Et]*st[Et],p[Et]=kt>0?kt+.5|0:kt-.5|0;return p})(L,z),Se=0;Se<64;++Se)y[R[Se]]=we[Se];var Ue=y[0]-V;V=y[0],Ue==0?ue(W[0]):(ue(W[x[T=32767+Ue]]),ue(m[T]));for(var We=63;We>0&&y[We]==0;)We--;if(We==0)return ue(ie),V;for(var be,pe=1;pe<=We;){for(var at=pe;y[pe]==0&&pe<=We;)++pe;var tt=pe-at;if(tt>=16){be=tt>>4;for(var Be=1;Be<=be;++Be)ue(ge);tt&=15}T=32767+y[pe],ue(Q[(tt<<4)+x[T]]),ue(m[T]),pe++}return We!=63&&ue(ie),V}function Y(L){L=Math.min(Math.max(L,1),100),i!=L&&((function(z){for(var V=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],W=0;W<64;W++){var Q=o((V[W]*z+50)/100);Q=Math.min(Math.max(Q,1),255),l[R[W]]=Q}for(var T=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ie=0;ie<64;ie++){var ge=o((T[ie]*z+50)/100);ge=Math.min(Math.max(ge,1),255),c[R[ie]]=ge}for(var we=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Se=0,Ue=0;Ue<8;Ue++)for(var We=0;We<8;We++)u[Se]=1/(l[R[Se]]*we[Ue]*we[We]*8),h[Se]=1/(c[R[Se]]*we[Ue]*we[We]*8),Se++})(L<50?Math.floor(5e3/L):Math.floor(200-2*L)),i=L)}this.encode=function(L,z){z&&Y(z),w=new Array,j=0,C=7,J(65496),J(65504),J(16),G(74),G(70),G(73),G(70),G(0),G(1),G(1),G(0),J(1),J(1),G(0),G(0),(function(){J(65499),J(132),G(0);for(var vt=0;vt<64;vt++)G(l[vt]);G(1);for(var ct=0;ct<64;ct++)G(c[ct])})(),(function(vt,ct){J(65472),J(17),G(8),J(ct),J(vt),G(3),G(1),G(17),G(0),G(2),G(17),G(1),G(3),G(17),G(1)})(L.width,L.height),(function(){J(65476),J(418),G(0);for(var vt=0;vt<16;vt++)G(B[vt+1]);for(var ct=0;ct<=11;ct++)G(U[ct]);G(16);for(var Kt=0;Kt<16;Kt++)G(K[Kt+1]);for(var ot=0;ot<=161;ot++)G(M[ot]);G(1);for(var Ct=0;Ct<16;Ct++)G(q[Ct+1]);for(var qt=0;qt<=11;qt++)G(re[qt]);G(17);for(var Tt=0;Tt<16;Tt++)G(ee[Tt+1]);for(var Et=0;Et<=161;Et++)G(H[Et])})(),J(65498),J(12),G(3),G(1),G(0),G(2),G(17),G(3),G(17),G(0),G(63),G(0);var V=0,W=0,Q=0;j=0,C=7,this.encode.displayName="_encode_";for(var T,ie,ge,we,Se,Ue,We,be,pe,at=L.data,tt=L.width,Be=L.height,ye=4*tt,st=0;st<Be;){for(T=0;T<ye;){for(Se=ye*st+T,We=-1,be=0,pe=0;pe<64;pe++)Ue=Se+(be=pe>>3)*ye+(We=4*(7&pe)),st+be>=Be&&(Ue-=ye*(st+1+be-Be)),T+We>=ye&&(Ue-=T+We-ye+4),ie=at[Ue++],ge=at[Ue++],we=at[Ue++],S[pe]=($[ie]+$[ge+256|0]+$[we+512|0]>>16)-128,k[pe]=($[ie+768|0]+$[ge+1024|0]+$[we+1280|0]>>16)-128,P[pe]=($[ie+1280|0]+$[ge+1536|0]+$[we+1792|0]>>16)-128;V=oe(S,u,V,e,n),W=oe(k,h,W,r,a),Q=oe(P,h,Q,r,a),T+=32}st+=8}if(C>=0){var Ve=[];Ve[1]=C+1,Ve[0]=(1<<C+1)-1,ue(Ve)}return J(65497),new Uint8Array(w)},t=t||50,(function(){for(var L=String.fromCharCode,z=0;z<256;z++)O[z]=L(z)})(),e=se(B,U),r=se(q,re),n=se(K,M),a=se(ee,H),(function(){for(var L=1,z=2,V=1;V<=15;V++){for(var W=L;W<z;W++)x[32767+W]=V,m[32767+W]=[],m[32767+W][1]=V,m[32767+W][0]=W;for(var Q=-(z-1);Q<=-L;Q++)x[32767+Q]=V,m[32767+Q]=[],m[32767+Q][1]=V,m[32767+Q][0]=z-1+Q;L<<=1,z<<=1}})(),(function(){for(var L=0;L<256;L++)$[L]=19595*L,$[L+256|0]=38470*L,$[L+512|0]=7471*L+32768,$[L+768|0]=-11059*L,$[L+1024|0]=-21709*L,$[L+1280|0]=32768*L+8421375,$[L+1536|0]=-27439*L,$[L+1792|0]=-5329*L})(),Y(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function wl(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function nC(t){function e(U){if(!U)throw Error("assert :P")}function r(U,K,M){for(var q=0;4>q;q++)if(U[K+q]!=M.charCodeAt(q))return!0;return!1}function n(U,K,M,q,re){for(var ee=0;ee<re;ee++)U[K+ee]=M[q+ee]}function a(U,K,M,q){for(var re=0;re<q;re++)U[K+re]=M}function i(U){return new Int32Array(U)}function o(U,K){for(var M=[],q=0;q<U;q++)M.push(new K);return M}function l(U,K){var M=[];return(function q(re,ee,H){for(var se=H[ee],ue=0;ue<se&&(re.push(H.length>ee+1?[]:new K),!(H.length<ee+1));ue++)q(re[ue],ee+1,H)})(M,0,U),M}var c=function(){var U=this;function K(v,_){for(var I=1<<_-1>>>0;v&I;)I>>>=1;return I?(v&I-1)+I:v}function M(v,_,I,F,X){e(!(F%I));do v[_+(F-=I)]=X;while(0<F)}function q(v,_,I,F,X){if(e(2328>=X),512>=X)var ne=i(512);else if((ne=i(X))==null)return 0;return(function(ae,le,ce,he,je,Ie){var me,Ce,Te=le,Ge=1<<ce,Oe=i(16),qe=i(16);for(e(je!=0),e(he!=null),e(ae!=null),e(0<ce),Ce=0;Ce<je;++Ce){if(15<he[Ce])return 0;++Oe[he[Ce]]}if(Oe[0]==je)return 0;for(qe[1]=0,me=1;15>me;++me){if(Oe[me]>1<<me)return 0;qe[me+1]=qe[me]+Oe[me]}for(Ce=0;Ce<je;++Ce)me=he[Ce],0<he[Ce]&&(Ie[qe[me]++]=Ce);if(qe[15]==1)return(he=new re).g=0,he.value=Ie[0],M(ae,Te,1,Ge,he),Ge;var He,Je=-1,rt=Ge-1,Xt=0,Ot=1,Ir=1,Mt=1<<ce;for(Ce=0,me=1,je=2;me<=ce;++me,je<<=1){if(Ot+=Ir<<=1,0>(Ir-=Oe[me]))return 0;for(;0<Oe[me];--Oe[me])(he=new re).g=me,he.value=Ie[Ce++],M(ae,Te+Xt,je,Mt,he),Xt=K(Xt,me)}for(me=ce+1,je=2;15>=me;++me,je<<=1){if(Ot+=Ir<<=1,0>(Ir-=Oe[me]))return 0;for(;0<Oe[me];--Oe[me]){if(he=new re,(Xt&rt)!=Je){for(Te+=Mt,He=1<<(Je=me)-ce;15>Je&&!(0>=(He-=Oe[Je]));)++Je,He<<=1;Ge+=Mt=1<<(He=Je-ce),ae[le+(Je=Xt&rt)].g=He+ce,ae[le+Je].value=Te-le-Je}he.g=me-ce,he.value=Ie[Ce++],M(ae,Te+(Xt>>ce),je,Mt,he),Xt=K(Xt,me)}}return Ot!=2*qe[15]-1?0:Ge})(v,_,I,F,X,ne)}function re(){this.value=this.g=0}function ee(){this.value=this.g=0}function H(){this.G=o(5,re),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Li,ee)}function se(v,_,I,F){e(v!=null),e(_!=null),e(2147483648>F),v.Ca=254,v.I=0,v.b=-8,v.Ka=0,v.oa=_,v.pa=I,v.Jd=_,v.Yc=I+F,v.Zc=4<=F?I+F-4+1:I,ie(v)}function ue(v,_){for(var I=0;0<_--;)I|=we(v,128)<<_;return I}function G(v,_){var I=ue(v,_);return ge(v)?-I:I}function J(v,_,I,F){var X,ne=0;for(e(v!=null),e(_!=null),e(4294967288>F),v.Sb=F,v.Ra=0,v.u=0,v.h=0,4<F&&(F=4),X=0;X<F;++X)ne+=_[I+X]<<8*X;v.Ra=ne,v.bb=F,v.oa=_,v.pa=I}function oe(v){for(;8<=v.u&&v.bb<v.Sb;)v.Ra>>>=8,v.Ra+=v.oa[v.pa+v.bb]<<Vl-8>>>0,++v.bb,v.u-=8;W(v)&&(v.h=1,v.u=0)}function Y(v,_){if(e(0<=_),!v.h&&_<=vi){var I=V(v)&gi[_];return v.u+=_,oe(v),I}return v.h=1,v.u=0}function L(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function z(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function V(v){return v.Ra>>>(v.u&Vl-1)>>>0}function W(v){return e(v.bb<=v.Sb),v.h||v.bb==v.Sb&&v.u>Vl}function Q(v,_){v.u=_,v.h=W(v)}function T(v){v.u>=To&&(e(v.u>=To),oe(v))}function ie(v){e(v!=null&&v.oa!=null),v.pa<v.Zc?(v.I=(v.oa[v.pa++]|v.I<<8)>>>0,v.b+=8):(e(v!=null&&v.oa!=null),v.pa<v.Yc?(v.b+=8,v.I=v.oa[v.pa++]|v.I<<8):v.Ka?v.b=0:(v.I<<=8,v.b+=8,v.Ka=1))}function ge(v){return ue(v,1)}function we(v,_){var I=v.Ca;0>v.b&&ie(v);var F=v.b,X=I*_>>>8,ne=(v.I>>>F>X)+0;for(ne?(I-=X,v.I-=X+1<<F>>>0):I=X+1,F=I,X=0;256<=F;)X+=8,F>>=8;return F=7^X+il[F],v.b-=F,v.Ca=(I<<F)-1,ne}function Se(v,_,I){v[_+0]=I>>24&255,v[_+1]=I>>16&255,v[_+2]=I>>8&255,v[_+3]=255&I}function Ue(v,_){return v[_+0]|v[_+1]<<8}function We(v,_){return Ue(v,_)|v[_+2]<<16}function be(v,_){return Ue(v,_)|Ue(v,_+2)<<16}function pe(v,_){var I=1<<_;return e(v!=null),e(0<_),v.X=i(I),v.X==null?0:(v.Mb=32-_,v.Xa=_,1)}function at(v,_){e(v!=null),e(_!=null),e(v.Xa==_.Xa),n(_.X,0,v.X,0,1<<_.Xa)}function tt(){this.X=[],this.Xa=this.Mb=0}function Be(v,_,I,F){e(I!=null),e(F!=null);var X=I[0],ne=F[0];return X==0&&(X=(v*ne+_/2)/_),ne==0&&(ne=(_*X+v/2)/v),0>=X||0>=ne?0:(I[0]=X,F[0]=ne,1)}function ye(v,_){return v+(1<<_)-1>>>_}function st(v,_){return((4278255360&v)+(4278255360&_)>>>0&4278255360)+((16711935&v)+(16711935&_)>>>0&16711935)>>>0}function Ve(v,_){U[_]=function(I,F,X,ne,ae,le,ce){var he;for(he=0;he<ae;++he){var je=U[v](le[ce+he-1],X,ne+he);le[ce+he]=st(I[F+he],je)}}}function vt(){this.ud=this.hd=this.jd=0}function ct(v,_){return((4278124286&(v^_))>>>1)+(v&_)>>>0}function Kt(v){return 0<=v&&256>v?v:0>v?0:255<v?255:void 0}function ot(v,_){return Kt(v+(v-_+.5>>1))}function Ct(v,_,I){return Math.abs(_-I)-Math.abs(v-I)}function qt(v,_,I,F,X,ne,ae){for(F=ne[ae-1],I=0;I<X;++I)ne[ae+I]=F=st(v[_+I],F)}function Tt(v,_,I,F,X){var ne;for(ne=0;ne<I;++ne){var ae=v[_+ne],le=ae>>8&255,ce=16711935&(ce=(ce=16711935&ae)+((le<<16)+le));F[X+ne]=(4278255360&ae)+ce>>>0}}function Et(v,_){_.jd=255&v,_.hd=v>>8&255,_.ud=v>>16&255}function kt(v,_,I,F,X,ne){var ae;for(ae=0;ae<F;++ae){var le=_[I+ae],ce=le>>>8,he=le,je=255&(je=(je=le>>>16)+((v.jd<<24>>24)*(ce<<24>>24)>>>5));he=255&(he=(he+=(v.hd<<24>>24)*(ce<<24>>24)>>>5)+((v.ud<<24>>24)*(je<<24>>24)>>>5)),X[ne+ae]=(4278255360&le)+(je<<16)+he}}function St(v,_,I,F,X){U[_]=function(ne,ae,le,ce,he,je,Ie,me,Ce){for(ce=Ie;ce<me;++ce)for(Ie=0;Ie<Ce;++Ie)he[je++]=X(le[F(ne[ae++])])},U[v]=function(ne,ae,le,ce,he,je,Ie){var me=8>>ne.b,Ce=ne.Ea,Te=ne.K[0],Ge=ne.w;if(8>me)for(ne=(1<<ne.b)-1,Ge=(1<<me)-1;ae<le;++ae){var Oe,qe=0;for(Oe=0;Oe<Ce;++Oe)Oe&ne||(qe=F(ce[he++])),je[Ie++]=X(Te[qe&Ge]),qe>>=me}else U["VP8LMapColor"+I](ce,he,Te,Ge,je,Ie,ae,le,Ce)}}function gr(v,_,I,F,X){for(I=_+I;_<I;){var ne=v[_++];F[X++]=ne>>16&255,F[X++]=ne>>8&255,F[X++]=255&ne}}function Rr(v,_,I,F,X){for(I=_+I;_<I;){var ne=v[_++];F[X++]=ne>>16&255,F[X++]=ne>>8&255,F[X++]=255&ne,F[X++]=ne>>24&255}}function xt(v,_,I,F,X){for(I=_+I;_<I;){var ne=(ae=v[_++])>>16&240|ae>>12&15,ae=240&ae|ae>>28&15;F[X++]=ne,F[X++]=ae}}function Ht(v,_,I,F,X){for(I=_+I;_<I;){var ne=(ae=v[_++])>>16&248|ae>>13&7,ae=ae>>5&224|ae>>3&31;F[X++]=ne,F[X++]=ae}}function Me(v,_,I,F,X){for(I=_+I;_<I;){var ne=v[_++];F[X++]=255&ne,F[X++]=ne>>8&255,F[X++]=ne>>16&255}}function bt(v,_,I,F,X,ne){if(ne==0)for(I=_+I;_<I;)Se(F,((ne=v[_++])[0]>>24|ne[1]>>8&65280|ne[2]<<8&16711680|ne[3]<<24)>>>0),X+=32;else n(F,X,v,_,I)}function Wt(v,_){U[_][0]=U[v+"0"],U[_][1]=U[v+"1"],U[_][2]=U[v+"2"],U[_][3]=U[v+"3"],U[_][4]=U[v+"4"],U[_][5]=U[v+"5"],U[_][6]=U[v+"6"],U[_][7]=U[v+"7"],U[_][8]=U[v+"8"],U[_][9]=U[v+"9"],U[_][10]=U[v+"10"],U[_][11]=U[v+"11"],U[_][12]=U[v+"12"],U[_][13]=U[v+"13"],U[_][14]=U[v+"0"],U[_][15]=U[v+"0"]}function It(v){return v==Nd||v==Rc||v==Ou||v==Ru}function Cr(){this.eb=[],this.size=this.A=this.fb=0}function Gr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function vr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Cr,this.f.kb=new Gr,this.sd=null}function At(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function yt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Lr(v){return alert("todo:WebPSamplerProcessPlane"),v.T}function Sr(v,_){var I=v.T,F=_.ba.f.RGBA,X=F.eb,ne=F.fb+v.ka*F.A,ae=ei[_.ba.S],le=v.y,ce=v.O,he=v.f,je=v.N,Ie=v.ea,me=v.W,Ce=_.cc,Te=_.dc,Ge=_.Mc,Oe=_.Nc,qe=v.ka,He=v.ka+v.T,Je=v.U,rt=Je+1>>1;for(qe==0?ae(le,ce,null,null,he,je,Ie,me,he,je,Ie,me,X,ne,null,null,Je):(ae(_.ec,_.fc,le,ce,Ce,Te,Ge,Oe,he,je,Ie,me,X,ne-F.A,X,ne,Je),++I);qe+2<He;qe+=2)Ce=he,Te=je,Ge=Ie,Oe=me,je+=v.Rc,me+=v.Rc,ne+=2*F.A,ae(le,(ce+=2*v.fa)-v.fa,le,ce,Ce,Te,Ge,Oe,he,je,Ie,me,X,ne-F.A,X,ne,Je);return ce+=v.fa,v.j+He<v.o?(n(_.ec,_.fc,le,ce,Je),n(_.cc,_.dc,he,je,rt),n(_.Mc,_.Nc,Ie,me,rt),I--):1&He||ae(le,ce,null,null,he,je,Ie,me,he,je,Ie,me,X,ne+F.A,null,null,Je),I}function Kr(v,_,I){var F=v.F,X=[v.J];if(F!=null){var ne=v.U,ae=_.ba.S,le=ae==Du||ae==Ou;_=_.ba.f.RGBA;var ce=[0],he=v.ka;ce[0]=v.T,v.Kb&&(he==0?--ce[0]:(--he,X[0]-=v.width),v.j+v.ka+v.T==v.o&&(ce[0]=v.o-v.j-he));var je=_.eb;he=_.fb+he*_.A,v=Tu(F,X[0],v.width,ne,ce,je,he+(le?0:3),_.A),e(I==ce),v&&It(ae)&&Oc(je,he,le,ne,ce,_.A)}return 0}function Mr(v){var _=v.ma,I=_.ba.S,F=11>I,X=I==Wl||I==Iu||I==Du||I==Sn||I==12||It(I);if(_.memory=null,_.Ib=null,_.Jb=null,_.Nd=null,!pd(_.Oa,v,X?11:12))return 0;if(X&&It(I)&&Dh(),v.da)alert("todo:use_scaling");else{if(F){if(_.Ib=Lr,v.Kb){if(I=v.U+1>>1,_.memory=i(v.U+2*I),_.memory==null)return 0;_.ec=_.memory,_.fc=0,_.cc=_.ec,_.dc=_.fc+v.U,_.Mc=_.cc,_.Nc=_.dc+I,_.Ib=Sr,Dh()}}else alert("todo:EmitYUV");X&&(_.Jb=Kr,F&&Ri())}if(F&&!ha){for(v=0;256>v;++v)ti[v]=89858*(v-128)+co>>dl,ri[v]=-22014*(v-128)+co,Sd[v]=-45773*(v-128),Bc[v]=113618*(v-128)+co>>dl;for(v=vn;v<jn;++v)_=76283*(v-16)+co>>dl,$h[v-vn]=as(_,255),op[v-vn]=as(_+8>>4,15);ha=1}return 1}function jt(v){var _=v.ma,I=v.U,F=v.T;return e(!(1&v.ka)),0>=I||0>=F?0:(I=_.Ib(v,_),_.Jb!=null&&_.Jb(v,_,I),_.Dc+=I,1)}function Tr(v){v.ma.memory=null}function Vn(v,_,I,F){return Y(v,8)!=47?0:(_[0]=Y(v,14)+1,I[0]=Y(v,14)+1,F[0]=Y(v,1),Y(v,3)!=0?0:!v.h)}function Fr(v,_){if(4>v)return v+1;var I=v-2>>1;return(2+(1&v)<<I)+Y(_,I)+1}function Yr(v,_){return 120<_?_-120:1<=(I=((I=og[_-1])>>4)*v+(8-(15&I)))?I:1;var I}function $r(v,_,I){var F=V(I),X=v[_+=255&F].g-8;return 0<X&&(Q(I,I.u+8),F=V(I),_+=v[_].value,_+=F&(1<<X)-1),Q(I,I.u+v[_].g),v[_].value}function yr(v,_,I){return I.g+=v.g,I.value+=v.value<<_>>>0,e(8>=I.g),v.g}function wn(v,_,I){var F=v.xc;return e((_=F==0?0:v.vc[v.md*(I>>F)+(_>>F)])<v.Wb),v.Ya[_]}function Ra(v,_,I,F){var X=v.ab,ne=v.c*_,ae=v.C;_=ae+_;var le=I,ce=F;for(F=v.Ta,I=v.Ua;0<X--;){var he=v.gc[X],je=ae,Ie=_,me=le,Ce=ce,Te=(ce=F,le=I,he.Ea);switch(e(je<Ie),e(Ie<=he.nc),he.hc){case 2:gs(me,Ce,(Ie-je)*Te,ce,le);break;case 0:var Ge=je,Oe=Ie,qe=ce,He=le,Je=(Mt=he).Ea;Ge==0&&(ol(me,Ce,null,null,1,qe,He),qt(me,Ce+1,0,0,Je-1,qe,He+1),Ce+=Je,He+=Je,++Ge);for(var rt=1<<Mt.b,Xt=rt-1,Ot=ye(Je,Mt.b),Ir=Mt.K,Mt=Mt.w+(Ge>>Mt.b)*Ot;Ge<Oe;){var Vr=Ir,ls=Mt,Dr=1;for(Io(me,Ce,qe,He-Je,1,qe,He);Dr<Je;){var Rt=(Dr&~Xt)+rt;Rt>Je&&(Rt=Je),(0,Pc[Vr[ls++]>>8&15])(me,Ce+ +Dr,qe,He+Dr-Je,Rt-Dr,qe,He+Dr),Dr=Rt}Ce+=Je,He+=Je,++Ge&Xt||(Mt+=Ot)}Ie!=he.nc&&n(ce,le-Te,ce,le+(Ie-je-1)*Te,Te);break;case 1:for(Te=me,Oe=Ce,Je=(me=he.Ea)-(He=me&~(qe=(Ce=1<<he.b)-1)),Ge=ye(me,he.b),rt=he.K,he=he.w+(je>>he.b)*Ge;je<Ie;){for(Xt=rt,Ot=he,Ir=new vt,Mt=Oe+He,Vr=Oe+me;Oe<Mt;)Et(Xt[Ot++],Ir),gd(Ir,Te,Oe,Ce,ce,le),Oe+=Ce,le+=Ce;Oe<Vr&&(Et(Xt[Ot++],Ir),gd(Ir,Te,Oe,Je,ce,le),Oe+=Je,le+=Je),++je&qe||(he+=Ge)}break;case 3:if(me==ce&&Ce==le&&0<he.b){for(Oe=ce,me=Te=le+(Ie-je)*Te-(He=(Ie-je)*ye(he.Ea,he.b)),Ce=ce,qe=le,Ge=[],He=(Je=He)-1;0<=He;--He)Ge[He]=Ce[qe+He];for(He=Je-1;0<=He;--He)Oe[me+He]=Ge[He];Ec(he,je,Ie,ce,Te,ce,le)}else Ec(he,je,Ie,me,Ce,ce,le)}le=F,ce=I}ce!=I&&n(F,I,le,ce,ne)}function La(v,_){var I=v.V,F=v.Ba+v.c*v.C,X=_-v.C;if(e(_<=v.l.o),e(16>=X),0<X){var ne=v.l,ae=v.Ta,le=v.Ua,ce=ne.width;if(Ra(v,X,I,F),X=le=[le],e((I=v.C)<(F=_)),e(ne.v<ne.va),F>ne.o&&(F=ne.o),I<ne.j){var he=ne.j-I;I=ne.j,X[0]+=he*ce}if(I>=F?I=0:(X[0]+=4*ne.v,ne.ka=I-ne.j,ne.U=ne.va-ne.v,ne.T=F-I,I=1),I){if(le=le[0],11>(I=v.ca).S){var je=I.f.RGBA,Ie=(F=I.S,X=ne.U,ne=ne.T,he=je.eb,je.A),me=ne;for(je=je.fb+v.Ma*je.A;0<me--;){var Ce=ae,Te=le,Ge=X,Oe=he,qe=je;switch(F){case Fh:vd(Ce,Te,Ge,Oe,qe);break;case Wl:ll(Ce,Te,Ge,Oe,qe);break;case Nd:ll(Ce,Te,Ge,Oe,qe),Oc(Oe,qe,0,Ge,1,0);break;case rp:Tc(Ce,Te,Ge,Oe,qe);break;case Iu:bt(Ce,Te,Ge,Oe,qe,1);break;case Rc:bt(Ce,Te,Ge,Oe,qe,1),Oc(Oe,qe,0,Ge,1,0);break;case Du:bt(Ce,Te,Ge,Oe,qe,0);break;case Ou:bt(Ce,Te,Ge,Oe,qe,0),Oc(Oe,qe,1,Ge,1,0);break;case Sn:zl(Ce,Te,Ge,Oe,qe);break;case Ru:zl(Ce,Te,Ge,Oe,qe),xm(Oe,qe,Ge,1,0);break;case Mh:ql(Ce,Te,Ge,Oe,qe);break;default:e(0)}le+=ce,je+=Ie}v.Ma+=ne}else alert("todo:EmitRescaledRowsYUVA");e(v.Ma<=I.height)}}v.C=_,e(v.C<=v.i)}function Ss(v){var _;if(0<v.ua)return 0;for(_=0;_<v.Wb;++_){var I=v.Ya[_].G,F=v.Ya[_].H;if(0<I[1][F[1]+0].g||0<I[2][F[2]+0].g||0<I[3][F[3]+0].g)return 0}return 1}function ba(v,_,I,F,X,ne){if(v.Z!=0){var ae=v.qd,le=v.rd;for(e(Ca[v.Z]!=null);_<I;++_)Ca[v.Z](ae,le,F,X,F,X,ne),ae=F,le=X,X+=ne;v.qd=ae,v.rd=le}}function Xn(v,_){var I=v.l.ma,F=I.Z==0||I.Z==1?v.l.j:v.C;if(F=v.C<F?F:v.C,e(_<=v.l.o),_>F){var X=v.l.width,ne=I.ca,ae=I.tb+X*F,le=v.V,ce=v.Ba+v.c*F,he=v.gc;e(v.ab==1),e(he[0].hc==3),oo(he[0],F,_,le,ce,ne,ae),ba(I,F,_,ne,ae,X)}v.C=v.Ma=_}function Fs(v,_,I,F,X,ne,ae){var le=v.$/F,ce=v.$%F,he=v.m,je=v.s,Ie=I+v.$,me=Ie;X=I+F*X;var Ce=I+F*ne,Te=280+je.ua,Ge=v.Pb?le:16777216,Oe=0<je.ua?je.Wa:null,qe=je.wc,He=Ie<Ce?wn(je,ce,le):null;e(v.C<ne),e(Ce<=X);var Je=!1;e:for(;;){for(;Je||Ie<Ce;){var rt=0;if(le>=Ge){var Xt=Ie-I;e((Ge=v).Pb),Ge.wd=Ge.m,Ge.xd=Xt,0<Ge.s.ua&&at(Ge.s.Wa,Ge.s.vb),Ge=le+Uh}if(ce&qe||(He=wn(je,ce,le)),e(He!=null),He.Qb&&(_[Ie]=He.qb,Je=!0),!Je)if(T(he),He.jc){rt=he,Xt=_;var Ot=Ie,Ir=He.pd[V(rt)&Li-1];e(He.jc),256>Ir.g?(Q(rt,rt.u+Ir.g),Xt[Ot]=Ir.value,rt=0):(Q(rt,rt.u+Ir.g-256),e(256<=Ir.value),rt=Ir.value),rt==0&&(Je=!0)}else rt=$r(He.G[0],He.H[0],he);if(he.h)break;if(Je||256>rt){if(!Je)if(He.nd)_[Ie]=(He.qb|rt<<8)>>>0;else{if(T(he),Je=$r(He.G[1],He.H[1],he),T(he),Xt=$r(He.G[2],He.H[2],he),Ot=$r(He.G[3],He.H[3],he),he.h)break;_[Ie]=(Ot<<24|Je<<16|rt<<8|Xt)>>>0}if(Je=!1,++Ie,++ce>=F&&(ce=0,++le,ae!=null&&le<=ne&&!(le%16)&&ae(v,le),Oe!=null))for(;me<Ie;)rt=_[me++],Oe.X[(506832829*rt&4294967295)>>>Oe.Mb]=rt}else if(280>rt){if(rt=Fr(rt-256,he),Xt=$r(He.G[4],He.H[4],he),T(he),Xt=Yr(F,Xt=Fr(Xt,he)),he.h)break;if(Ie-I<Xt||X-Ie<rt)break e;for(Ot=0;Ot<rt;++Ot)_[Ie+Ot]=_[Ie+Ot-Xt];for(Ie+=rt,ce+=rt;ce>=F;)ce-=F,++le,ae!=null&&le<=ne&&!(le%16)&&ae(v,le);if(e(Ie<=X),ce&qe&&(He=wn(je,ce,le)),Oe!=null)for(;me<Ie;)rt=_[me++],Oe.X[(506832829*rt&4294967295)>>>Oe.Mb]=rt}else{if(!(rt<Te))break e;for(Je=rt-280,e(Oe!=null);me<Ie;)rt=_[me++],Oe.X[(506832829*rt&4294967295)>>>Oe.Mb]=rt;rt=Ie,e(!(Je>>>(Xt=Oe).Xa)),_[rt]=Xt.X[Je],Je=!0}Je||e(he.h==W(he))}if(v.Pb&&he.h&&Ie<X)e(v.m.h),v.a=5,v.m=v.wd,v.$=v.xd,0<v.s.ua&&at(v.s.vb,v.s.Wa);else{if(he.h)break e;ae?.(v,le>ne?ne:le),v.a=0,v.$=Ie-I}return 1}return v.a=3,0}function In(v){e(v!=null),v.vc=null,v.yc=null,v.Ya=null;var _=v.Wa;_!=null&&(_.X=null),v.vb=null,e(v!=null)}function Na(){var v=new Yt;return v==null?null:(v.a=0,v.xb=_d,Wt("Predictor","VP8LPredictors"),Wt("Predictor","VP8LPredictors_C"),Wt("PredictorAdd","VP8LPredictorsAdd"),Wt("PredictorAdd","VP8LPredictorsAdd_C"),gs=Tt,gd=kt,vd=gr,ll=Rr,zl=xt,ql=Ht,Tc=Me,U.VP8LMapColor32b=Do,U.VP8LMapColor8b=kc,v)}function Ms(v,_,I,F,X){var ne=1,ae=[v],le=[_],ce=F.m,he=F.s,je=null,Ie=0;e:for(;;){if(I)for(;ne&&Y(ce,1);){var me=ae,Ce=le,Te=F,Ge=1,Oe=Te.m,qe=Te.gc[Te.ab],He=Y(Oe,2);if(Te.Oc&1<<He)ne=0;else{switch(Te.Oc|=1<<He,qe.hc=He,qe.Ea=me[0],qe.nc=Ce[0],qe.K=[null],++Te.ab,e(4>=Te.ab),He){case 0:case 1:qe.b=Y(Oe,3)+2,Ge=Ms(ye(qe.Ea,qe.b),ye(qe.nc,qe.b),0,Te,qe.K),qe.K=qe.K[0];break;case 3:var Je,rt=Y(Oe,8)+1,Xt=16<rt?0:4<rt?1:2<rt?2:3;if(me[0]=ye(qe.Ea,Xt),qe.b=Xt,Je=Ge=Ms(rt,1,0,Te,qe.K)){var Ot,Ir=rt,Mt=qe,Vr=1<<(8>>Mt.b),ls=i(Vr);if(ls==null)Je=0;else{var Dr=Mt.K[0],Rt=Mt.w;for(ls[0]=Mt.K[0][0],Ot=1;Ot<1*Ir;++Ot)ls[Ot]=st(Dr[Rt+Ot],ls[Ot-1]);for(;Ot<4*Vr;++Ot)ls[Ot]=0;Mt.K[0]=null,Mt.K[0]=ls,Je=1}}Ge=Je;break;case 2:break;default:e(0)}ne=Ge}}if(ae=ae[0],le=le[0],ne&&Y(ce,1)&&!(ne=1<=(Ie=Y(ce,4))&&11>=Ie)){F.a=3;break e}var Nt;if(Nt=ne)t:{var vs,pr,Br,Rn=F,ta=ae,ks=le,es=Ie,$s=I,ra=Rn.m,zn=Rn.s,Hr=[null],rn=1,qn=0,nn=sp[es];r:for(;;){if($s&&Y(ra,1)){var cs=Y(ra,3)+2,ds=ye(ta,cs),An=ye(ks,cs),Sa=ds*An;if(!Ms(ds,An,0,Rn,Hr))break r;for(Hr=Hr[0],zn.xc=cs,vs=0;vs<Sa;++vs){var _n=Hr[vs]>>8&65535;Hr[vs]=_n,_n>=rn&&(rn=_n+1)}}if(ra.h)break r;for(pr=0;5>pr;++pr){var En=Lc[pr];!pr&&0<es&&(En+=1<<es),qn<En&&(qn=En)}var Ps=o(rn*nn,re),fa=rn,ni=o(fa,H);if(ni==null)var ys=null;else e(65536>=fa),ys=ni;var ws=i(qn);if(ys==null||ws==null||Ps==null){Rn.a=1;break r}var Aa=Ps;for(vs=Br=0;vs<rn;++vs){var kn=ys[vs],Ea=kn.G,Bi=kn.H,uo=0,na=1,bs=0;for(pr=0;5>pr;++pr){En=Lc[pr],Ea[pr]=Aa,Bi[pr]=Br,!pr&&0<es&&(En+=1<<es);s:{var Yl,hl=En,Ad=Rn,Lo=ws,cp=Aa,Em=Br,Un=0,ho=Ad.m,km=Y(ho,1);if(a(Lo,0,0,hl),km){var Pm=Y(ho,1)+1,Vh=Y(ho,1),zh=Y(ho,Vh==0?1:8);Lo[zh]=1,Pm==2&&(Lo[zh=Y(ho,8)]=1);var Fo=1}else{var Hn=i(19),Ts=Y(ho,4)+4;if(19<Ts){Ad.a=3;var Ns=0;break s}for(Yl=0;Yl<Ts;++Yl)Hn[ig[Yl]]=Y(ho,3);var Ed=void 0,fl=void 0,kd=Ad,hg=Hn,Vs=hl,qh=Lo,Uu=0,Mo=kd.m,fo=8,yi=o(128,re);n:for(;q(yi,0,7,hg,19);){if(Y(Mo,1)){var $u=2+2*Y(Mo,3);if((Ed=2+Y(Mo,$u))>Vs)break n}else Ed=Vs;for(fl=0;fl<Vs&&Ed--;){T(Mo);var Hh=yi[0+(127&V(Mo))];Q(Mo,Mo.u+Hh.g);var Xl=Hh.value;if(16>Xl)qh[fl++]=Xl,Xl!=0&&(fo=Xl);else{var dp=Xl==16,Tm=Xl-16,up=Bh[Tm],Im=Y(Mo,Lu[Tm])+up;if(fl+Im>Vs)break n;for(var hp=dp?fo:0;0<Im--;)qh[fl++]=hp}}Uu=1;break n}Uu||(kd.a=3),Fo=Uu}(Fo=Fo&&!ho.h)&&(Un=q(cp,Em,8,Lo,hl)),Fo&&Un!=0?Ns=Un:(Ad.a=3,Ns=0)}if(Ns==0)break r;if(na&&np[pr]==1&&(na=Aa[Br].g==0),uo+=Aa[Br].g,Br+=Ns,3>=pr){var Pd,Wh=ws[0];for(Pd=1;Pd<En;++Pd)ws[Pd]>Wh&&(Wh=ws[Pd]);bs+=Wh}}if(kn.nd=na,kn.Qb=0,na&&(kn.qb=(Ea[3][Bi[3]+0].value<<24|Ea[1][Bi[1]+0].value<<16|Ea[2][Bi[2]+0].value)>>>0,uo==0&&256>Ea[0][Bi[0]+0].value&&(kn.Qb=1,kn.qb+=Ea[0][Bi[0]+0].value<<8)),kn.jc=!kn.Qb&&6>bs,kn.jc){var Vu,wi=kn;for(Vu=0;Vu<Li;++Vu){var ml=Vu,mo=wi.pd[ml],$c=wi.G[0][wi.H[0]+ml];256<=$c.value?(mo.g=$c.g+256,mo.value=$c.value):(mo.g=0,mo.value=0,ml>>=yr($c,8,mo),ml>>=yr(wi.G[1][wi.H[1]+ml],16,mo),ml>>=yr(wi.G[2][wi.H[2]+ml],0,mo),yr(wi.G[3][wi.H[3]+ml],24,mo))}}}zn.vc=Hr,zn.Wb=rn,zn.Ya=ys,zn.yc=Ps,Nt=1;break t}Nt=0}if(!(ne=Nt)){F.a=3;break e}if(0<Ie){if(he.ua=1<<Ie,!pe(he.Wa,Ie)){F.a=1,ne=0;break e}}else he.ua=0;var Gh=F,Kh=ae,fp=le,Yh=Gh.s,Xh=Yh.xc;if(Gh.c=Kh,Gh.i=fp,Yh.md=ye(Kh,Xh),Yh.wc=Xh==0?-1:(1<<Xh)-1,I){F.xb=Ro;break e}if((je=i(ae*le))==null){F.a=1,ne=0;break e}ne=(ne=Fs(F,je,0,ae,le,le,null))&&!ce.h;break e}return ne?(X!=null?X[0]=je:(e(je==null),e(I)),F.$=0,I||In(he)):In(he),ne}function Fa(v,_){var I=v.c*v.i,F=I+_+16*_;return e(v.c<=_),v.V=i(F),v.V==null?(v.Ta=null,v.Ua=0,v.a=1,0):(v.Ta=v.V,v.Ua=v.Ba+I+_,1)}function Js(v,_){var I=v.C,F=_-I,X=v.V,ne=v.Ba+v.c*I;for(e(_<=v.l.o);0<F;){var ae=16<F?16:F,le=v.l.ma,ce=v.l.width,he=ce*ae,je=le.ca,Ie=le.tb+ce*I,me=v.Ta,Ce=v.Ua;Ra(v,ae,X,ne),gm(me,Ce,je,Ie,he),ba(le,I,I+ae,je,Ie,ce),F-=ae,X+=ae*v.c,I+=ae}e(I==_),v.C=v.Ma=_}function Ya(){this.ub=this.yd=this.td=this.Rb=0}function fi(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function ze(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function ft(){this.Yb=(function(){var v=[];return(function _(I,F,X){for(var ne=X[F],ae=0;ae<ne&&(I.push(X.length>F+1?[]:0),!(X.length<F+1));ae++)_(I[ae],F+1,X)})(v,0,[3,11]),v})()}function gn(){this.jb=i(3),this.Wc=l([4,8],ft),this.Xc=l([4,17],ft)}function Ee(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function wt(){this.ld=this.La=this.dd=this.tc=0}function nt(){this.Na=this.la=0}function Qr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Zn(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function bn(){this.uc=this.M=this.Nb=0,this.wa=Array(new wt),this.Y=0,this.ya=Array(new Zn),this.aa=0,this.l=new Qs}function Bs(){this.y=i(16),this.f=i(8),this.ea=i(8)}function ld(){this.cb=this.a=0,this.sc="",this.m=new L,this.Od=new Ya,this.Kc=new fi,this.ed=new Ee,this.Qa=new ze,this.Ic=this.$c=this.Aa=0,this.D=new bn,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,L),this.ia=0,this.pb=o(4,Qr),this.Pa=new gn,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Bs),this.Hd=0,this.rb=Array(new nt),this.sb=0,this.wa=Array(new wt),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Zn),this.L=this.aa=0,this.gd=l([4,2],wt),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Qs(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ke(){var v=new ld;return v!=null&&(v.a=0,v.sc="OK",v.cb=0,v.Xb=0,Fc||(Fc=dn)),v}function Xe(v,_,I){return v.a==0&&(v.a=_,v.sc=I,v.cb=0),0}function cr(v,_,I){return 3<=I&&v[_+0]==157&&v[_+1]==1&&v[_+2]==42}function cn(v,_){if(v==null)return 0;if(v.a=0,v.sc="OK",_==null)return Xe(v,2,"null VP8Io passed to VP8GetHeaders()");var I=_.data,F=_.w,X=_.ha;if(4>X)return Xe(v,7,"Truncated header.");var ne=I[F+0]|I[F+1]<<8|I[F+2]<<16,ae=v.Od;if(ae.Rb=!(1&ne),ae.td=ne>>1&7,ae.yd=ne>>4&1,ae.ub=ne>>5,3<ae.td)return Xe(v,3,"Incorrect keyframe parameters.");if(!ae.yd)return Xe(v,4,"Frame not displayable.");F+=3,X-=3;var le=v.Kc;if(ae.Rb){if(7>X)return Xe(v,7,"cannot parse picture header");if(!cr(I,F,X))return Xe(v,3,"Bad code word");le.c=16383&(I[F+4]<<8|I[F+3]),le.Td=I[F+4]>>6,le.i=16383&(I[F+6]<<8|I[F+5]),le.Ud=I[F+6]>>6,F+=7,X-=7,v.za=le.c+15>>4,v.Ub=le.i+15>>4,_.width=le.c,_.height=le.i,_.Da=0,_.j=0,_.v=0,_.va=_.width,_.o=_.height,_.da=0,_.ib=_.width,_.hb=_.height,_.U=_.width,_.T=_.height,a((ne=v.Pa).jb,0,255,ne.jb.length),e((ne=v.Qa)!=null),ne.Cb=0,ne.Bb=0,ne.Fb=1,a(ne.Zb,0,0,ne.Zb.length),a(ne.Lb,0,0,ne.Lb)}if(ae.ub>X)return Xe(v,7,"bad partition length");se(ne=v.m,I,F,ae.ub),F+=ae.ub,X-=ae.ub,ae.Rb&&(le.Ld=ge(ne),le.Kd=ge(ne)),le=v.Qa;var ce,he=v.Pa;if(e(ne!=null),e(le!=null),le.Cb=ge(ne),le.Cb){if(le.Bb=ge(ne),ge(ne)){for(le.Fb=ge(ne),ce=0;4>ce;++ce)le.Zb[ce]=ge(ne)?G(ne,7):0;for(ce=0;4>ce;++ce)le.Lb[ce]=ge(ne)?G(ne,6):0}if(le.Bb)for(ce=0;3>ce;++ce)he.jb[ce]=ge(ne)?ue(ne,8):255}else le.Bb=0;if(ne.Ka)return Xe(v,3,"cannot parse segment header");if((le=v.ed).zd=ge(ne),le.Tb=ue(ne,6),le.wb=ue(ne,3),le.Pc=ge(ne),le.Pc&&ge(ne)){for(he=0;4>he;++he)ge(ne)&&(le.vd[he]=G(ne,6));for(he=0;4>he;++he)ge(ne)&&(le.od[he]=G(ne,6))}if(v.L=le.Tb==0?0:le.zd?1:2,ne.Ka)return Xe(v,3,"cannot parse filter header");var je=X;if(X=ce=F,F=ce+je,le=je,v.Xb=(1<<ue(v.m,2))-1,je<3*(he=v.Xb))I=7;else{for(ce+=3*he,le-=3*he,je=0;je<he;++je){var Ie=I[X+0]|I[X+1]<<8|I[X+2]<<16;Ie>le&&(Ie=le),se(v.Jc[+je],I,ce,Ie),ce+=Ie,le-=Ie,X+=3}se(v.Jc[+he],I,ce,le),I=ce<F?0:5}if(I!=0)return Xe(v,I,"cannot parse partitions");for(I=ue(ce=v.m,7),X=ge(ce)?G(ce,4):0,F=ge(ce)?G(ce,4):0,le=ge(ce)?G(ce,4):0,he=ge(ce)?G(ce,4):0,ce=ge(ce)?G(ce,4):0,je=v.Qa,Ie=0;4>Ie;++Ie){if(je.Cb){var me=je.Zb[Ie];je.Fb||(me+=I)}else{if(0<Ie){v.pb[Ie]=v.pb[0];continue}me=I}var Ce=v.pb[Ie];Ce.Sc[0]=jd[as(me+X,127)],Ce.Sc[1]=Fu[as(me+0,127)],Ce.Eb[0]=2*jd[as(me+F,127)],Ce.Eb[1]=101581*Fu[as(me+le,127)]>>16,8>Ce.Eb[1]&&(Ce.Eb[1]=8),Ce.Qc[0]=jd[as(me+he,117)],Ce.Qc[1]=Fu[as(me+ce,127)],Ce.lc=me+ce}if(!ae.Rb)return Xe(v,4,"Not a key frame.");for(ge(ne),ae=v.Pa,I=0;4>I;++I){for(X=0;8>X;++X)for(F=0;3>F;++F)for(le=0;11>le;++le)he=we(ne,cg[I][X][F][le])?ue(ne,8):ip[I][X][F][le],ae.Wc[I][X].Yb[F][le]=he;for(X=0;17>X;++X)ae.Xc[I][X]=ae.Wc[I][Cm[X]]}return v.kc=ge(ne),v.kc&&(v.Bd=ue(ne,8)),v.cb=1}function dn(v,_,I,F,X,ne,ae){var le=_[X].Yb[I];for(I=0;16>X;++X){if(!we(v,le[I+0]))return X;for(;!we(v,le[I+1]);)if(le=_[++X].Yb[0],I=0,X==16)return 16;var ce=_[X+1].Yb;if(we(v,le[I+2])){var he=v,je=0;if(we(he,(me=le)[(Ie=I)+3]))if(we(he,me[Ie+6])){for(le=0,Ie=2*(je=we(he,me[Ie+8]))+(me=we(he,me[Ie+9+je])),je=0,me=jm[Ie];me[le];++le)je+=je+we(he,me[le]);je+=3+(8<<Ie)}else we(he,me[Ie+7])?(je=7+2*we(he,165),je+=we(he,145)):je=5+we(he,159);else je=we(he,me[Ie+4])?3+we(he,me[Ie+5]):2;le=ce[2]}else je=1,le=ce[1];ce=ae+_m[X],0>(he=v).b&&ie(he);var Ie,me=he.b,Ce=(Ie=he.Ca>>1)-(he.I>>me)>>31;--he.b,he.Ca+=Ce,he.Ca|=1,he.I-=(Ie+1&Ce)<<me,ne[ce]=((je^Ce)-Ce)*F[(0<X)+0]}return 16}function Dn(v){var _=v.rb[v.sb-1];_.la=0,_.Na=0,a(v.zc,0,0,v.zc.length),v.ja=0}function ea(v,_,I,F,X){X=v[_+I+32*F]+(X>>3),v[_+I+32*F]=-256&X?0>X?0:255:X}function mi(v,_,I,F,X,ne){ea(v,_,0,I,F+X),ea(v,_,1,I,F+ne),ea(v,_,2,I,F-ne),ea(v,_,3,I,F-X)}function Jn(v){return(20091*v>>16)+v}function xc(v,_,I,F){var X,ne=0,ae=i(16);for(X=0;4>X;++X){var le=v[_+0]+v[_+8],ce=v[_+0]-v[_+8],he=(35468*v[_+4]>>16)-Jn(v[_+12]),je=Jn(v[_+4])+(35468*v[_+12]>>16);ae[ne+0]=le+je,ae[ne+1]=ce+he,ae[ne+2]=ce-he,ae[ne+3]=le-je,ne+=4,_++}for(X=ne=0;4>X;++X)le=(v=ae[ne+0]+4)+ae[ne+8],ce=v-ae[ne+8],he=(35468*ae[ne+4]>>16)-Jn(ae[ne+12]),ea(I,F,0,0,le+(je=Jn(ae[ne+4])+(35468*ae[ne+12]>>16))),ea(I,F,1,0,ce+he),ea(I,F,2,0,ce-he),ea(I,F,3,0,le-je),ne++,F+=32}function Eh(v,_,I,F){var X=v[_+0]+4,ne=35468*v[_+4]>>16,ae=Jn(v[_+4]),le=35468*v[_+1]>>16;mi(I,F,0,X+ae,v=Jn(v[_+1]),le),mi(I,F,1,X+ne,v,le),mi(I,F,2,X-ne,v,le),mi(I,F,3,X-ae,v,le)}function wu(v,_,I,F,X){xc(v,_,I,F),X&&xc(v,_+16,I,F+4)}function gc(v,_,I,F){Ic(v,_+0,I,F,1),Ic(v,_+32,I,F+128,1)}function Co(v,_,I,F){var X;for(v=v[_+0]+4,X=0;4>X;++X)for(_=0;4>_;++_)ea(I,F,_,X,v)}function cd(v,_,I,F){v[_+0]&&tn(v,_+0,I,F),v[_+16]&&tn(v,_+16,I,F+4),v[_+32]&&tn(v,_+32,I,F+128),v[_+48]&&tn(v,_+48,I,F+128+4)}function Zr(v,_,I,F){var X,ne=i(16);for(X=0;4>X;++X){var ae=v[_+0+X]+v[_+12+X],le=v[_+4+X]+v[_+8+X],ce=v[_+4+X]-v[_+8+X],he=v[_+0+X]-v[_+12+X];ne[0+X]=ae+le,ne[8+X]=ae-le,ne[4+X]=he+ce,ne[12+X]=he-ce}for(X=0;4>X;++X)ae=(v=ne[0+4*X]+3)+ne[3+4*X],le=ne[1+4*X]+ne[2+4*X],ce=ne[1+4*X]-ne[2+4*X],he=v-ne[3+4*X],I[F+0]=ae+le>>3,I[F+16]=he+ce>>3,I[F+32]=ae-le>>3,I[F+48]=he-ce>>3,F+=64}function el(v,_,I){var F,X=_-32,ne=Ma,ae=255-v[X-1];for(F=0;F<I;++F){var le,ce=ne,he=ae+v[_-1];for(le=0;le<I;++le)v[_+le]=ce[he+v[X+le]];_+=32}}function dd(v,_){el(v,_,4)}function bu(v,_){el(v,_,8)}function kh(v,_){el(v,_,16)}function Ph(v,_){var I;for(I=0;16>I;++I)n(v,_+32*I,v,_-32,16)}function ud(v,_){var I;for(I=16;0<I;--I)a(v,_,v[_-1],16),_+=32}function tl(v,_,I){var F;for(F=0;16>F;++F)a(_,I+32*F,v,16)}function no(v,_){var I,F=16;for(I=0;16>I;++I)F+=v[_-1+32*I]+v[_+I-32];tl(F>>5,v,_)}function So(v,_){var I,F=8;for(I=0;16>I;++I)F+=v[_-1+32*I];tl(F>>4,v,_)}function Xa(v,_){var I,F=8;for(I=0;16>I;++I)F+=v[_+I-32];tl(F>>4,v,_)}function Pi(v,_){tl(128,v,_)}function mr(v,_,I){return v+2*_+I+2>>2}function vc(v,_){var I,F=_-32;for(F=new Uint8Array([mr(v[F-1],v[F+0],v[F+1]),mr(v[F+0],v[F+1],v[F+2]),mr(v[F+1],v[F+2],v[F+3]),mr(v[F+2],v[F+3],v[F+4])]),I=0;4>I;++I)n(v,_+32*I,F,0,F.length)}function Ao(v,_){var I=v[_-1],F=v[_-1+32],X=v[_-1+64],ne=v[_-1+96];Se(v,_+0,16843009*mr(v[_-1-32],I,F)),Se(v,_+32,16843009*mr(I,F,X)),Se(v,_+64,16843009*mr(F,X,ne)),Se(v,_+96,16843009*mr(X,ne,ne))}function mm(v,_){var I,F=4;for(I=0;4>I;++I)F+=v[_+I-32]+v[_-1+32*I];for(F>>=3,I=0;4>I;++I)a(v,_+32*I,F,4)}function Th(v,_){var I=v[_-1+0],F=v[_-1+32],X=v[_-1+64],ne=v[_-1-32],ae=v[_+0-32],le=v[_+1-32],ce=v[_+2-32],he=v[_+3-32];v[_+0+96]=mr(F,X,v[_-1+96]),v[_+1+96]=v[_+0+64]=mr(I,F,X),v[_+2+96]=v[_+1+64]=v[_+0+32]=mr(ne,I,F),v[_+3+96]=v[_+2+64]=v[_+1+32]=v[_+0+0]=mr(ae,ne,I),v[_+3+64]=v[_+2+32]=v[_+1+0]=mr(le,ae,ne),v[_+3+32]=v[_+2+0]=mr(ce,le,ae),v[_+3+0]=mr(he,ce,le)}function pi(v,_){var I=v[_+1-32],F=v[_+2-32],X=v[_+3-32],ne=v[_+4-32],ae=v[_+5-32],le=v[_+6-32],ce=v[_+7-32];v[_+0+0]=mr(v[_+0-32],I,F),v[_+1+0]=v[_+0+32]=mr(I,F,X),v[_+2+0]=v[_+1+32]=v[_+0+64]=mr(F,X,ne),v[_+3+0]=v[_+2+32]=v[_+1+64]=v[_+0+96]=mr(X,ne,ae),v[_+3+32]=v[_+2+64]=v[_+1+96]=mr(ne,ae,le),v[_+3+64]=v[_+2+96]=mr(ae,le,ce),v[_+3+96]=mr(le,ce,ce)}function rl(v,_){var I=v[_-1+0],F=v[_-1+32],X=v[_-1+64],ne=v[_-1-32],ae=v[_+0-32],le=v[_+1-32],ce=v[_+2-32],he=v[_+3-32];v[_+0+0]=v[_+1+64]=ne+ae+1>>1,v[_+1+0]=v[_+2+64]=ae+le+1>>1,v[_+2+0]=v[_+3+64]=le+ce+1>>1,v[_+3+0]=ce+he+1>>1,v[_+0+96]=mr(X,F,I),v[_+0+64]=mr(F,I,ne),v[_+0+32]=v[_+1+96]=mr(I,ne,ae),v[_+1+32]=v[_+2+96]=mr(ne,ae,le),v[_+2+32]=v[_+3+96]=mr(ae,le,ce),v[_+3+32]=mr(le,ce,he)}function Ih(v,_){var I=v[_+0-32],F=v[_+1-32],X=v[_+2-32],ne=v[_+3-32],ae=v[_+4-32],le=v[_+5-32],ce=v[_+6-32],he=v[_+7-32];v[_+0+0]=I+F+1>>1,v[_+1+0]=v[_+0+64]=F+X+1>>1,v[_+2+0]=v[_+1+64]=X+ne+1>>1,v[_+3+0]=v[_+2+64]=ne+ae+1>>1,v[_+0+32]=mr(I,F,X),v[_+1+32]=v[_+0+96]=mr(F,X,ne),v[_+2+32]=v[_+1+96]=mr(X,ne,ae),v[_+3+32]=v[_+2+96]=mr(ne,ae,le),v[_+3+64]=mr(ae,le,ce),v[_+3+96]=mr(le,ce,he)}function hd(v,_){var I=v[_-1+0],F=v[_-1+32],X=v[_-1+64],ne=v[_-1+96];v[_+0+0]=I+F+1>>1,v[_+2+0]=v[_+0+32]=F+X+1>>1,v[_+2+32]=v[_+0+64]=X+ne+1>>1,v[_+1+0]=mr(I,F,X),v[_+3+0]=v[_+1+32]=mr(F,X,ne),v[_+3+32]=v[_+1+64]=mr(X,ne,ne),v[_+3+64]=v[_+2+64]=v[_+0+96]=v[_+1+96]=v[_+2+96]=v[_+3+96]=ne}function yc(v,_){var I=v[_-1+0],F=v[_-1+32],X=v[_-1+64],ne=v[_-1+96],ae=v[_-1-32],le=v[_+0-32],ce=v[_+1-32],he=v[_+2-32];v[_+0+0]=v[_+2+32]=I+ae+1>>1,v[_+0+32]=v[_+2+64]=F+I+1>>1,v[_+0+64]=v[_+2+96]=X+F+1>>1,v[_+0+96]=ne+X+1>>1,v[_+3+0]=mr(le,ce,he),v[_+2+0]=mr(ae,le,ce),v[_+1+0]=v[_+3+32]=mr(I,ae,le),v[_+1+32]=v[_+3+64]=mr(F,I,ae),v[_+1+64]=v[_+3+96]=mr(X,F,I),v[_+1+96]=mr(ne,X,F)}function Nu(v,_){var I;for(I=0;8>I;++I)n(v,_+32*I,v,_-32,8)}function so(v,_){var I;for(I=0;8>I;++I)a(v,_,v[_-1],8),_+=32}function Eo(v,_,I){var F;for(F=0;8>F;++F)a(_,I+32*F,v,8)}function ao(v,_){var I,F=8;for(I=0;8>I;++I)F+=v[_+I-32]+v[_-1+32*I];Eo(F>>4,v,_)}function fd(v,_){var I,F=4;for(I=0;8>I;++I)F+=v[_+I-32];Eo(F>>3,v,_)}function ju(v,_){var I,F=4;for(I=0;8>I;++I)F+=v[_-1+32*I];Eo(F>>3,v,_)}function _u(v,_){Eo(128,v,_)}function nl(v,_,I){var F=v[_-I],X=v[_+0],ne=3*(X-F)+Oo[1020+v[_-2*I]-v[_+I]],ae=bd[112+(ne+4>>3)];v[_-I]=Ma[255+F+bd[112+(ne+3>>3)]],v[_+0]=Ma[255+X-ae]}function ko(v,_,I,F){var X=v[_+0],ne=v[_+I];return Fi[255+v[_-2*I]-v[_-I]]>F||Fi[255+ne-X]>F}function wc(v,_,I,F){return 4*Fi[255+v[_-I]-v[_+0]]+Fi[255+v[_-2*I]-v[_+I]]<=F}function bc(v,_,I,F,X){var ne=v[_-3*I],ae=v[_-2*I],le=v[_-I],ce=v[_+0],he=v[_+I],je=v[_+2*I],Ie=v[_+3*I];return 4*Fi[255+le-ce]+Fi[255+ae-he]>F?0:Fi[255+v[_-4*I]-ne]<=X&&Fi[255+ne-ae]<=X&&Fi[255+ae-le]<=X&&Fi[255+Ie-je]<=X&&Fi[255+je-he]<=X&&Fi[255+he-ce]<=X}function Ti(v,_,I,F){var X=2*F+1;for(F=0;16>F;++F)wc(v,_+F,I,X)&&nl(v,_+F,I)}function sl(v,_,I,F){var X=2*F+1;for(F=0;16>F;++F)wc(v,_+F*I,1,X)&&nl(v,_+F*I,1)}function Nc(v,_,I,F){var X;for(X=3;0<X;--X)Ti(v,_+=4*I,I,F)}function Cu(v,_,I,F){var X;for(X=3;0<X;--X)sl(v,_+=4,I,F)}function Ii(v,_,I,F,X,ne,ae,le){for(ne=2*ne+1;0<X--;){if(bc(v,_,I,ne,ae))if(ko(v,_,I,le))nl(v,_,I);else{var ce=v,he=_,je=I,Ie=ce[he-2*je],me=ce[he-je],Ce=ce[he+0],Te=ce[he+je],Ge=ce[he+2*je],Oe=27*(He=Oo[1020+3*(Ce-me)+Oo[1020+Ie-Te]])+63>>7,qe=18*He+63>>7,He=9*He+63>>7;ce[he-3*je]=Ma[255+ce[he-3*je]+He],ce[he-2*je]=Ma[255+Ie+qe],ce[he-je]=Ma[255+me+Oe],ce[he+0]=Ma[255+Ce-Oe],ce[he+je]=Ma[255+Te-qe],ce[he+2*je]=Ma[255+Ge-He]}_+=F}}function Di(v,_,I,F,X,ne,ae,le){for(ne=2*ne+1;0<X--;){if(bc(v,_,I,ne,ae))if(ko(v,_,I,le))nl(v,_,I);else{var ce=v,he=_,je=I,Ie=ce[he-je],me=ce[he+0],Ce=ce[he+je],Te=bd[112+(4+(Ge=3*(me-Ie))>>3)],Ge=bd[112+(Ge+3>>3)],Oe=Te+1>>1;ce[he-2*je]=Ma[255+ce[he-2*je]+Oe],ce[he-je]=Ma[255+Ie+Ge],ce[he+0]=Ma[255+me-Te],ce[he+je]=Ma[255+Ce-Oe]}_+=F}}function Su(v,_,I,F,X,ne){Ii(v,_,I,1,16,F,X,ne)}function ja(v,_,I,F,X,ne){Ii(v,_,1,I,16,F,X,ne)}function Oi(v,_,I,F,X,ne){var ae;for(ae=3;0<ae;--ae)Di(v,_+=4*I,I,1,16,F,X,ne)}function md(v,_,I,F,X,ne){var ae;for(ae=3;0<ae;--ae)Di(v,_+=4,1,I,16,F,X,ne)}function A(v,_,I,F,X,ne,ae,le){Ii(v,_,X,1,8,ne,ae,le),Ii(I,F,X,1,8,ne,ae,le)}function Z(v,_,I,F,X,ne,ae,le){Ii(v,_,1,X,8,ne,ae,le),Ii(I,F,1,X,8,ne,ae,le)}function xe(v,_,I,F,X,ne,ae,le){Di(v,_+4*X,X,1,8,ne,ae,le),Di(I,F+4*X,X,1,8,ne,ae,le)}function Ne(v,_,I,F,X,ne,ae,le){Di(v,_+4,1,X,8,ne,ae,le),Di(I,F+4,1,X,8,ne,ae,le)}function ke(){this.ba=new vr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new yt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ye(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function it(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Ft(){this.ua=0,this.Wa=new tt,this.vb=new tt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new H,this.yc=new re}function Yt(){this.xb=this.a=0,this.l=new Qs,this.ca=new vr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new z,this.Pb=0,this.wd=new z,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Ft,this.ab=0,this.gc=o(4,it),this.Oc=0}function wr(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Qs,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function br(v,_,I,F,X,ne,ae){for(v=v==null?0:v[_+0],_=0;_<ae;++_)X[ne+_]=v+I[F+_]&255,v=X[ne+_]}function en(v,_,I,F,X,ne,ae){var le;if(v==null)br(null,null,I,F,X,ne,ae);else for(le=0;le<ae;++le)X[ne+le]=v[_+le]+I[F+le]&255}function Qn(v,_,I,F,X,ne,ae){if(v==null)br(null,null,I,F,X,ne,ae);else{var le,ce=v[_+0],he=ce,je=ce;for(le=0;le<ae;++le)he=je+(ce=v[_+le])-he,je=I[F+le]+(-256&he?0>he?0:255:he)&255,he=ce,X[ne+le]=je}}function As(v,_,I,F){var X=_.width,ne=_.o;if(e(v!=null&&_!=null),0>I||0>=F||I+F>ne)return null;if(!v.Cc){if(v.ga==null){var ae;if(v.ga=new wr,(ae=v.ga==null)||(ae=_.width*_.o,e(v.Gb.length==0),v.Gb=i(ae),v.Uc=0,v.Gb==null?ae=0:(v.mb=v.Gb,v.nb=v.Uc,v.rc=null,ae=1),ae=!ae),!ae){ae=v.ga;var le=v.Fa,ce=v.P,he=v.qc,je=v.mb,Ie=v.nb,me=ce+1,Ce=he-1,Te=ae.l;if(e(le!=null&&je!=null&&_!=null),Ca[0]=null,Ca[1]=br,Ca[2]=en,Ca[3]=Qn,ae.ca=je,ae.tb=Ie,ae.c=_.width,ae.i=_.height,e(0<ae.c&&0<ae.i),1>=he)_=0;else if(ae.$a=3&le[ce+0],ae.Z=le[ce+0]>>2&3,ae.Lc=le[ce+0]>>4&3,ce=le[ce+0]>>6&3,0>ae.$a||1<ae.$a||4<=ae.Z||1<ae.Lc||ce)_=0;else if(Te.put=jt,Te.ac=Mr,Te.bc=Tr,Te.ma=ae,Te.width=_.width,Te.height=_.height,Te.Da=_.Da,Te.v=_.v,Te.va=_.va,Te.j=_.j,Te.o=_.o,ae.$a)e:{e(ae.$a==1),_=Na();t:for(;;){if(_==null){_=0;break e}if(e(ae!=null),ae.mc=_,_.c=ae.c,_.i=ae.i,_.l=ae.l,_.l.ma=ae,_.l.width=ae.c,_.l.height=ae.i,_.a=0,J(_.m,le,me,Ce),!Ms(ae.c,ae.i,1,_,null)||(_.ab==1&&_.gc[0].hc==3&&Ss(_.s)?(ae.ic=1,le=_.c*_.i,_.Ta=null,_.Ua=0,_.V=i(le),_.Ba=0,_.V==null?(_.a=1,_=0):_=1):(ae.ic=0,_=Fa(_,ae.c)),!_))break t;_=1;break e}ae.mc=null,_=0}else _=Ce>=ae.c*ae.i;ae=!_}if(ae)return null;v.ga.Lc!=1?v.Ga=0:F=ne-I}e(v.ga!=null),e(I+F<=ne);e:{if(_=(le=v.ga).c,ne=le.l.o,le.$a==0){if(me=v.rc,Ce=v.Vc,Te=v.Fa,ce=v.P+1+I*_,he=v.mb,je=v.nb+I*_,e(ce<=v.P+v.qc),le.Z!=0)for(e(Ca[le.Z]!=null),ae=0;ae<F;++ae)Ca[le.Z](me,Ce,Te,ce,he,je,_),me=he,Ce=je,je+=_,ce+=_;else for(ae=0;ae<F;++ae)n(he,je,Te,ce,_),me=he,Ce=je,je+=_,ce+=_;v.rc=me,v.Vc=Ce}else{if(e(le.mc!=null),_=I+F,e((ae=le.mc)!=null),e(_<=ae.i),ae.C>=_)_=1;else if(le.ic||Ri(),le.ic){le=ae.V,me=ae.Ba,Ce=ae.c;var Ge=ae.i,Oe=(Te=1,ce=ae.$/Ce,he=ae.$%Ce,je=ae.m,Ie=ae.s,ae.$),qe=Ce*Ge,He=Ce*_,Je=Ie.wc,rt=Oe<He?wn(Ie,he,ce):null;e(Oe<=qe),e(_<=Ge),e(Ss(Ie));t:for(;;){for(;!je.h&&Oe<He;){if(he&Je||(rt=wn(Ie,he,ce)),e(rt!=null),T(je),256>(Ge=$r(rt.G[0],rt.H[0],je)))le[me+Oe]=Ge,++Oe,++he>=Ce&&(he=0,++ce<=_&&!(ce%16)&&Xn(ae,ce));else{if(!(280>Ge)){Te=0;break t}Ge=Fr(Ge-256,je);var Xt,Ot=$r(rt.G[4],rt.H[4],je);if(T(je),!(Oe>=(Ot=Yr(Ce,Ot=Fr(Ot,je)))&&qe-Oe>=Ge)){Te=0;break t}for(Xt=0;Xt<Ge;++Xt)le[me+Oe+Xt]=le[me+Oe+Xt-Ot];for(Oe+=Ge,he+=Ge;he>=Ce;)he-=Ce,++ce<=_&&!(ce%16)&&Xn(ae,ce);Oe<He&&he&Je&&(rt=wn(Ie,he,ce))}e(je.h==W(je))}Xn(ae,ce>_?_:ce);break t}!Te||je.h&&Oe<qe?(Te=0,ae.a=je.h?5:3):ae.$=Oe,_=Te}else _=Fs(ae,ae.V,ae.Ba,ae.c,ae.i,_,Js);if(!_){F=0;break e}}I+F>=ne&&(v.Cc=1),F=1}if(!F)return null;if(v.Cc&&((F=v.ga)!=null&&(F.mc=null),v.ga=null,0<v.Ga))return alert("todo:WebPDequantizeLevels"),null}return v.nb+I*X}function On(v,_,I,F,X,ne){for(;0<X--;){var ae,le=v,ce=_+(I?1:0),he=v,je=_+(I?0:3);for(ae=0;ae<F;++ae){var Ie=he[je+4*ae];Ie!=255&&(Ie*=32897,le[ce+4*ae+0]=le[ce+4*ae+0]*Ie>>23,le[ce+4*ae+1]=le[ce+4*ae+1]*Ie>>23,le[ce+4*ae+2]=le[ce+4*ae+2]*Ie>>23)}_+=ne}}function Us(v,_,I,F,X){for(;0<F--;){var ne;for(ne=0;ne<I;++ne){var ae=v[_+2*ne+0],le=15&(he=v[_+2*ne+1]),ce=4369*le,he=(240&he|he>>4)*ce>>16;v[_+2*ne+0]=(240&ae|ae>>4)*ce>>16&240|(15&ae|ae<<4)*ce>>16>>4&15,v[_+2*ne+1]=240&he|le}_+=X}}function xs(v,_,I,F,X,ne,ae,le){var ce,he,je=255;for(he=0;he<X;++he){for(ce=0;ce<F;++ce){var Ie=v[_+ce];ne[ae+4*ce]=Ie,je&=Ie}_+=I,ae+=le}return je!=255}function ua(v,_,I,F,X){var ne;for(ne=0;ne<X;++ne)I[F+ne]=v[_+ne]>>8}function Ri(){Oc=On,xm=Us,Tu=xs,gm=ua}function Za(v,_,I){U[v]=function(F,X,ne,ae,le,ce,he,je,Ie,me,Ce,Te,Ge,Oe,qe,He,Je){var rt,Xt=Je-1>>1,Ot=le[ce+0]|he[je+0]<<16,Ir=Ie[me+0]|Ce[Te+0]<<16;e(F!=null);var Mt=3*Ot+Ir+131074>>2;for(_(F[X+0],255&Mt,Mt>>16,Ge,Oe),ne!=null&&(Mt=3*Ir+Ot+131074>>2,_(ne[ae+0],255&Mt,Mt>>16,qe,He)),rt=1;rt<=Xt;++rt){var Vr=le[ce+rt]|he[je+rt]<<16,ls=Ie[me+rt]|Ce[Te+rt]<<16,Dr=Ot+Vr+Ir+ls+524296,Rt=Dr+2*(Vr+Ir)>>3;Mt=Rt+Ot>>1,Ot=(Dr=Dr+2*(Ot+ls)>>3)+Vr>>1,_(F[X+2*rt-1],255&Mt,Mt>>16,Ge,Oe+(2*rt-1)*I),_(F[X+2*rt-0],255&Ot,Ot>>16,Ge,Oe+(2*rt-0)*I),ne!=null&&(Mt=Dr+Ir>>1,Ot=Rt+ls>>1,_(ne[ae+2*rt-1],255&Mt,Mt>>16,qe,He+(2*rt-1)*I),_(ne[ae+2*rt+0],255&Ot,Ot>>16,qe,He+(2*rt+0)*I)),Ot=Vr,Ir=ls}1&Je||(Mt=3*Ot+Ir+131074>>2,_(F[X+Je-1],255&Mt,Mt>>16,Ge,Oe+(Je-1)*I),ne!=null&&(Mt=3*Ir+Ot+131074>>2,_(ne[ae+Je-1],255&Mt,Mt>>16,qe,He+(Je-1)*I)))}}function Dh(){ei[Fh]=dg,ei[Wl]=Gl,ei[rp]=ug,ei[Iu]=Cd,ei[Du]=Mc,ei[Sn]=Mu,ei[Mh]=Sm,ei[Nd]=Gl,ei[Rc]=Cd,ei[Ou]=Mc,ei[Ru]=Mu}function Ml(v){return v&-16384?0>v?0:255:v>>Kl}function jc(v,_){return Ml((19077*v>>8)+(26149*_>>8)-14234)}function Bl(v,_,I){return Ml((19077*v>>8)-(6419*_>>8)-(13320*I>>8)+8708)}function _c(v,_){return Ml((19077*v>>8)+(33050*_>>8)-17685)}function Ul(v,_,I,F,X){F[X+0]=jc(v,I),F[X+1]=Bl(v,_,I),F[X+2]=_c(v,_)}function Cc(v,_,I,F,X){F[X+0]=_c(v,_),F[X+1]=Bl(v,_,I),F[X+2]=jc(v,I)}function _a(v,_,I,F,X){var ne=Bl(v,_,I);_=ne<<3&224|_c(v,_)>>3,F[X+0]=248&jc(v,I)|ne>>5,F[X+1]=_}function Sc(v,_,I,F,X){var ne=240&_c(v,_)|15;F[X+0]=240&jc(v,I)|Bl(v,_,I)>>4,F[X+1]=ne}function Ac(v,_,I,F,X){F[X+0]=255,Ul(v,_,I,F,X+1)}function Au(v,_,I,F,X){Cc(v,_,I,F,X),F[X+3]=255}function Eu(v,_,I,F,X){Ul(v,_,I,F,X),F[X+3]=255}function as(v,_){return 0>v?0:v>_?_:v}function io(v,_,I){U[v]=function(F,X,ne,ae,le,ce,he,je,Ie){for(var me=je+(-2&Ie)*I;je!=me;)_(F[X+0],ne[ae+0],le[ce+0],he,je),_(F[X+1],ne[ae+0],le[ce+0],he,je+I),X+=2,++ae,++ce,je+=2*I;1&Ie&&_(F[X+0],ne[ae+0],le[ce+0],he,je)}}function Po(v,_,I){return I==0?v==0?_==0?6:5:_==0?4:0:I}function Oh(v,_,I,F,X){switch(v>>>30){case 3:Ic(_,I,F,X,0);break;case 2:is(_,I,F,X);break;case 1:tn(_,I,F,X)}}function xi(v,_){var I,F,X=_.M,ne=_.Nb,ae=v.oc,le=v.pc+40,ce=v.oc,he=v.pc+584,je=v.oc,Ie=v.pc+600;for(I=0;16>I;++I)ae[le+32*I-1]=129;for(I=0;8>I;++I)ce[he+32*I-1]=129,je[Ie+32*I-1]=129;for(0<X?ae[le-1-32]=ce[he-1-32]=je[Ie-1-32]=129:(a(ae,le-32-1,127,21),a(ce,he-32-1,127,9),a(je,Ie-32-1,127,9)),F=0;F<v.za;++F){var me=_.ya[_.aa+F];if(0<F){for(I=-1;16>I;++I)n(ae,le+32*I-4,ae,le+32*I+12,4);for(I=-1;8>I;++I)n(ce,he+32*I-4,ce,he+32*I+4,4),n(je,Ie+32*I-4,je,Ie+32*I+4,4)}var Ce=v.Gd,Te=v.Hd+F,Ge=me.ad,Oe=me.Hc;if(0<X&&(n(ae,le-32,Ce[Te].y,0,16),n(ce,he-32,Ce[Te].f,0,8),n(je,Ie-32,Ce[Te].ea,0,8)),me.Za){var qe=ae,He=le-32+16;for(0<X&&(F>=v.za-1?a(qe,He,Ce[Te].y[15],4):n(qe,He,Ce[Te+1].y,0,4)),I=0;4>I;I++)qe[He+128+I]=qe[He+256+I]=qe[He+384+I]=qe[He+0+I];for(I=0;16>I;++I,Oe<<=2)qe=ae,He=le+Am[I],Mi[me.Ob[I]](qe,He),Oh(Oe,Ge,16*+I,qe,He)}else if(qe=Po(F,X,me.Ob[0]),Ba[qe](ae,le),Oe!=0)for(I=0;16>I;++I,Oe<<=2)Oh(Oe,Ge,16*+I,ae,le+Am[I]);for(I=me.Gc,qe=Po(F,X,me.Dd),Qa[qe](ce,he),Qa[qe](je,Ie),Oe=Ge,qe=ce,He=he,255&(me=0|I)&&(170&me?Ja(Oe,256,qe,He):Nn(Oe,256,qe,He)),me=je,Oe=Ie,255&(I>>=8)&&(170&I?Ja(Ge,320,me,Oe):Nn(Ge,320,me,Oe)),X<v.Ub-1&&(n(Ce[Te].y,0,ae,le+480,16),n(Ce[Te].f,0,ce,he+224,8),n(Ce[Te].ea,0,je,Ie+224,8)),I=8*ne*v.B,Ce=v.sa,Te=v.ta+16*F+16*ne*v.R,Ge=v.qa,me=v.ra+8*F+I,Oe=v.Ha,qe=v.Ia+8*F+I,I=0;16>I;++I)n(Ce,Te+I*v.R,ae,le+32*I,16);for(I=0;8>I;++I)n(Ge,me+I*v.B,ce,he+32*I,8),n(Oe,qe+I*v.B,je,Ie+32*I,8)}}function $l(v,_,I,F,X,ne,ae,le,ce){var he=[0],je=[0],Ie=0,me=ce!=null?ce.kd:0,Ce=ce??new Ye;if(v==null||12>I)return 7;Ce.data=v,Ce.w=_,Ce.ha=I,_=[_],I=[I],Ce.gb=[Ce.gb];e:{var Te=_,Ge=I,Oe=Ce.gb;if(e(v!=null),e(Ge!=null),e(Oe!=null),Oe[0]=0,12<=Ge[0]&&!r(v,Te[0],"RIFF")){if(r(v,Te[0]+8,"WEBP")){Oe=3;break e}var qe=be(v,Te[0]+4);if(12>qe||4294967286<qe){Oe=3;break e}if(me&&qe>Ge[0]-8){Oe=7;break e}Oe[0]=qe,Te[0]+=12,Ge[0]-=12}Oe=0}if(Oe!=0)return Oe;for(qe=0<Ce.gb[0],I=I[0];;){e:{var He=v;Ge=_,Oe=I;var Je=he,rt=je,Xt=Te=[0];if((Mt=Ie=[Ie])[0]=0,8>Oe[0])Oe=7;else{if(!r(He,Ge[0],"VP8X")){if(be(He,Ge[0]+4)!=10){Oe=3;break e}if(18>Oe[0]){Oe=7;break e}var Ot=be(He,Ge[0]+8),Ir=1+We(He,Ge[0]+12);if(2147483648<=Ir*(He=1+We(He,Ge[0]+15))){Oe=3;break e}Xt!=null&&(Xt[0]=Ot),Je!=null&&(Je[0]=Ir),rt!=null&&(rt[0]=He),Ge[0]+=18,Oe[0]-=18,Mt[0]=1}Oe=0}}if(Ie=Ie[0],Te=Te[0],Oe!=0)return Oe;if(Ge=!!(2&Te),!qe&&Ie)return 3;if(ne!=null&&(ne[0]=!!(16&Te)),ae!=null&&(ae[0]=Ge),le!=null&&(le[0]=0),ae=he[0],Te=je[0],Ie&&Ge&&ce==null){Oe=0;break}if(4>I){Oe=7;break}if(qe&&Ie||!qe&&!Ie&&!r(v,_[0],"ALPH")){I=[I],Ce.na=[Ce.na],Ce.P=[Ce.P],Ce.Sa=[Ce.Sa];e:{Ot=v,Oe=_,qe=I;var Mt=Ce.gb;Je=Ce.na,rt=Ce.P,Xt=Ce.Sa,Ir=22,e(Ot!=null),e(qe!=null),He=Oe[0];var Vr=qe[0];for(e(Je!=null),e(Xt!=null),Je[0]=null,rt[0]=null,Xt[0]=0;;){if(Oe[0]=He,qe[0]=Vr,8>Vr){Oe=7;break e}var ls=be(Ot,He+4);if(4294967286<ls){Oe=3;break e}var Dr=8+ls+1&-2;if(Ir+=Dr,0<Mt&&Ir>Mt){Oe=3;break e}if(!r(Ot,He,"VP8 ")||!r(Ot,He,"VP8L")){Oe=0;break e}if(Vr[0]<Dr){Oe=7;break e}r(Ot,He,"ALPH")||(Je[0]=Ot,rt[0]=He+8,Xt[0]=ls),He+=Dr,Vr-=Dr}}if(I=I[0],Ce.na=Ce.na[0],Ce.P=Ce.P[0],Ce.Sa=Ce.Sa[0],Oe!=0)break}I=[I],Ce.Ja=[Ce.Ja],Ce.xa=[Ce.xa];e:if(Mt=v,Oe=_,qe=I,Je=Ce.gb[0],rt=Ce.Ja,Xt=Ce.xa,Ot=Oe[0],He=!r(Mt,Ot,"VP8 "),Ir=!r(Mt,Ot,"VP8L"),e(Mt!=null),e(qe!=null),e(rt!=null),e(Xt!=null),8>qe[0])Oe=7;else{if(He||Ir){if(Mt=be(Mt,Ot+4),12<=Je&&Mt>Je-12){Oe=3;break e}if(me&&Mt>qe[0]-8){Oe=7;break e}rt[0]=Mt,Oe[0]+=8,qe[0]-=8,Xt[0]=Ir}else Xt[0]=5<=qe[0]&&Mt[Ot+0]==47&&!(Mt[Ot+4]>>5),rt[0]=qe[0];Oe=0}if(I=I[0],Ce.Ja=Ce.Ja[0],Ce.xa=Ce.xa[0],_=_[0],Oe!=0)break;if(4294967286<Ce.Ja)return 3;if(le==null||Ge||(le[0]=Ce.xa?2:1),ae=[ae],Te=[Te],Ce.xa){if(5>I){Oe=7;break}le=ae,me=Te,Ge=ne,v==null||5>I?v=0:5<=I&&v[_+0]==47&&!(v[_+4]>>5)?(qe=[0],Mt=[0],Je=[0],J(rt=new z,v,_,I),Vn(rt,qe,Mt,Je)?(le!=null&&(le[0]=qe[0]),me!=null&&(me[0]=Mt[0]),Ge!=null&&(Ge[0]=Je[0]),v=1):v=0):v=0}else{if(10>I){Oe=7;break}le=Te,v==null||10>I||!cr(v,_+3,I-3)?v=0:(me=v[_+0]|v[_+1]<<8|v[_+2]<<16,Ge=16383&(v[_+7]<<8|v[_+6]),v=16383&(v[_+9]<<8|v[_+8]),1&me||3<(me>>1&7)||!(me>>4&1)||me>>5>=Ce.Ja||!Ge||!v?v=0:(ae&&(ae[0]=Ge),le&&(le[0]=v),v=1))}if(!v||(ae=ae[0],Te=Te[0],Ie&&(he[0]!=ae||je[0]!=Te)))return 3;ce!=null&&(ce[0]=Ce,ce.offset=_-ce.w,e(4294967286>_-ce.w),e(ce.offset==ce.ha-I));break}return Oe==0||Oe==7&&Ie&&ce==null?(ne!=null&&(ne[0]|=Ce.na!=null&&0<Ce.na.length),F!=null&&(F[0]=ae),X!=null&&(X[0]=Te),0):Oe}function pd(v,_,I){var F=_.width,X=_.height,ne=0,ae=0,le=F,ce=X;if(_.Da=v!=null&&0<v.Da,_.Da&&(le=v.cd,ce=v.bd,ne=v.v,ae=v.j,11>I||(ne&=-2,ae&=-2),0>ne||0>ae||0>=le||0>=ce||ne+le>F||ae+ce>X))return 0;if(_.v=ne,_.j=ae,_.va=ne+le,_.o=ae+ce,_.U=le,_.T=ce,_.da=v!=null&&0<v.da,_.da){if(!Be(le,ce,I=[v.ib],ne=[v.hb]))return 0;_.ib=I[0],_.hb=ne[0]}return _.ob=v!=null&&v.ob,_.Kb=v==null||!v.Sd,_.da&&(_.ob=_.ib<3*F/4&&_.hb<3*X/4,_.Kb=0),1}function xd(v){if(v==null)return 2;if(11>v.S){var _=v.f.RGBA;_.fb+=(v.height-1)*_.A,_.A=-_.A}else _=v.f.kb,v=v.height,_.O+=(v-1)*_.fa,_.fa=-_.fa,_.N+=(v-1>>1)*_.Ab,_.Ab=-_.Ab,_.W+=(v-1>>1)*_.Db,_.Db=-_.Db,_.F!=null&&(_.J+=(v-1)*_.lb,_.lb=-_.lb);return 0}function al(v,_,I,F){if(F==null||0>=v||0>=_)return 2;if(I!=null){if(I.Da){var X=I.cd,ne=I.bd,ae=-2&I.v,le=-2&I.j;if(0>ae||0>le||0>=X||0>=ne||ae+X>v||le+ne>_)return 2;v=X,_=ne}if(I.da){if(!Be(v,_,X=[I.ib],ne=[I.hb]))return 2;v=X[0],_=ne[0]}}F.width=v,F.height=_;e:{var ce=F.width,he=F.height;if(v=F.S,0>=ce||0>=he||!(v>=Fh&&13>v))v=2;else{if(0>=F.Rd&&F.sd==null){ae=ne=X=_=0;var je=(le=ce*Bu[v])*he;if(11>v||(ne=(he+1)/2*(_=(ce+1)/2),v==12&&(ae=(X=ce)*he)),(he=i(je+2*ne+ae))==null){v=1;break e}F.sd=he,11>v?((ce=F.f.RGBA).eb=he,ce.fb=0,ce.A=le,ce.size=je):((ce=F.f.kb).y=he,ce.O=0,ce.fa=le,ce.Fd=je,ce.f=he,ce.N=0+je,ce.Ab=_,ce.Cd=ne,ce.ea=he,ce.W=0+je+ne,ce.Db=_,ce.Ed=ne,v==12&&(ce.F=he,ce.J=0+je+2*ne),ce.Tc=ae,ce.lb=X)}if(_=1,X=F.S,ne=F.width,ae=F.height,X>=Fh&&13>X)if(11>X)v=F.f.RGBA,_&=(le=Math.abs(v.A))*(ae-1)+ne<=v.size,_&=le>=ne*Bu[X],_&=v.eb!=null;else{v=F.f.kb,le=(ne+1)/2,je=(ae+1)/2,ce=Math.abs(v.fa),he=Math.abs(v.Ab);var Ie=Math.abs(v.Db),me=Math.abs(v.lb),Ce=me*(ae-1)+ne;_&=ce*(ae-1)+ne<=v.Fd,_&=he*(je-1)+le<=v.Cd,_=(_&=Ie*(je-1)+le<=v.Ed)&ce>=ne&he>=le&Ie>=le,_&=v.y!=null,_&=v.f!=null,_&=v.ea!=null,X==12&&(_&=me>=ne,_&=Ce<=v.Tc,_&=v.F!=null)}else _=0;v=_?0:2}}return v!=0||I!=null&&I.fd&&(v=xd(F)),v}var Li=64,gi=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],vi=24,Vl=32,To=8,il=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ve("Predictor0","PredictorAdd0"),U.Predictor0=function(){return 4278190080},U.Predictor1=function(v){return v},U.Predictor2=function(v,_,I){return _[I+0]},U.Predictor3=function(v,_,I){return _[I+1]},U.Predictor4=function(v,_,I){return _[I-1]},U.Predictor5=function(v,_,I){return ct(ct(v,_[I+1]),_[I+0])},U.Predictor6=function(v,_,I){return ct(v,_[I-1])},U.Predictor7=function(v,_,I){return ct(v,_[I+0])},U.Predictor8=function(v,_,I){return ct(_[I-1],_[I+0])},U.Predictor9=function(v,_,I){return ct(_[I+0],_[I+1])},U.Predictor10=function(v,_,I){return ct(ct(v,_[I-1]),ct(_[I+0],_[I+1]))},U.Predictor11=function(v,_,I){var F=_[I+0];return 0>=Ct(F>>24&255,v>>24&255,(_=_[I-1])>>24&255)+Ct(F>>16&255,v>>16&255,_>>16&255)+Ct(F>>8&255,v>>8&255,_>>8&255)+Ct(255&F,255&v,255&_)?F:v},U.Predictor12=function(v,_,I){var F=_[I+0];return(Kt((v>>24&255)+(F>>24&255)-((_=_[I-1])>>24&255))<<24|Kt((v>>16&255)+(F>>16&255)-(_>>16&255))<<16|Kt((v>>8&255)+(F>>8&255)-(_>>8&255))<<8|Kt((255&v)+(255&F)-(255&_)))>>>0},U.Predictor13=function(v,_,I){var F=_[I-1];return(ot((v=ct(v,_[I+0]))>>24&255,F>>24&255)<<24|ot(v>>16&255,F>>16&255)<<16|ot(v>>8&255,F>>8&255)<<8|ot(255&v,255&F))>>>0};var ol=U.PredictorAdd0;U.PredictorAdd1=qt,Ve("Predictor2","PredictorAdd2"),Ve("Predictor3","PredictorAdd3"),Ve("Predictor4","PredictorAdd4"),Ve("Predictor5","PredictorAdd5"),Ve("Predictor6","PredictorAdd6"),Ve("Predictor7","PredictorAdd7"),Ve("Predictor8","PredictorAdd8"),Ve("Predictor9","PredictorAdd9"),Ve("Predictor10","PredictorAdd10"),Ve("Predictor11","PredictorAdd11"),Ve("Predictor12","PredictorAdd12"),Ve("Predictor13","PredictorAdd13");var Io=U.PredictorAdd2;St("ColorIndexInverseTransform","MapARGB","32b",function(v){return v>>8&255},function(v){return v}),St("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(v){return v},function(v){return v>>8&255});var gs,Ec=U.ColorIndexInverseTransform,Do=U.MapARGB,oo=U.VP8LColorIndexInverseTransformAlpha,kc=U.MapAlpha,Pc=U.VP8LPredictorsAdd=[];Pc.length=16,(U.VP8LPredictors=[]).length=16,(U.VP8LPredictorsAdd_C=[]).length=16,(U.VP8LPredictors_C=[]).length=16;var gd,vd,ll,zl,ql,Tc,Hl,Ic,is,Ja,tn,Nn,os,Es,lo,ku,yd,cl,Rh,wd,Lh,pm,Pu,Dc,Oc,xm,Tu,gm,vm=i(511),ym=i(2041),wm=i(225),bm=i(767),Nm=0,Oo=ym,bd=wm,Ma=bm,Fi=vm,Fh=0,Wl=1,rp=2,Iu=3,Du=4,Sn=5,Mh=6,Nd=7,Rc=8,Ou=9,Ru=10,Lu=[2,3,7],Bh=[3,3,11],Lc=[280,256,256,256,40],np=[0,1,1,1,0],ig=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],og=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],sp=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Uh=8,jd=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Fu=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Fc=null,jm=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],_m=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],ap=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],ip=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],lg=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],cg=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Cm=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ba=[],Mi=[],Qa=[],Ro=1,_d=2,Ca=[],ei=[];Za("UpsampleRgbLinePair",Ul,3),Za("UpsampleBgrLinePair",Cc,3),Za("UpsampleRgbaLinePair",Eu,4),Za("UpsampleBgraLinePair",Au,4),Za("UpsampleArgbLinePair",Ac,4),Za("UpsampleRgba4444LinePair",Sc,2),Za("UpsampleRgb565LinePair",_a,2);var dg=U.UpsampleRgbLinePair,ug=U.UpsampleBgrLinePair,Gl=U.UpsampleRgbaLinePair,Cd=U.UpsampleBgraLinePair,Mc=U.UpsampleArgbLinePair,Mu=U.UpsampleRgba4444LinePair,Sm=U.UpsampleRgb565LinePair,dl=16,co=1<<dl-1,vn=-227,jn=482,Kl=6,ha=0,ti=i(256),Bc=i(256),Sd=i(256),ri=i(256),$h=i(jn-vn),op=i(jn-vn);io("YuvToRgbRow",Ul,3),io("YuvToBgrRow",Cc,3),io("YuvToRgbaRow",Eu,4),io("YuvToBgraRow",Au,4),io("YuvToArgbRow",Ac,4),io("YuvToRgba4444Row",Sc,2),io("YuvToRgb565Row",_a,2);var Am=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Uc=[0,2,8],lp=[8,7,6,4,4,2,2,2,1,1,1,1],ul=1;this.WebPDecodeRGBA=function(v,_,I,F,X){var ne=Wl,ae=new ke,le=new vr;ae.ba=le,le.S=ne,le.width=[le.width],le.height=[le.height];var ce=le.width,he=le.height,je=new At;if(je==null||v==null)var Ie=2;else e(je!=null),Ie=$l(v,_,I,je.width,je.height,je.Pd,je.Qd,je.format,null);if(Ie!=0?ce=0:(ce!=null&&(ce[0]=je.width[0]),he!=null&&(he[0]=je.height[0]),ce=1),ce){le.width=le.width[0],le.height=le.height[0],F!=null&&(F[0]=le.width),X!=null&&(X[0]=le.height);e:{if(F=new Qs,(X=new Ye).data=v,X.w=_,X.ha=I,X.kd=1,_=[0],e(X!=null),((v=$l(X.data,X.w,X.ha,null,null,null,_,null,X))==0||v==7)&&_[0]&&(v=4),(_=v)==0){if(e(ae!=null),F.data=X.data,F.w=X.w+X.offset,F.ha=X.ha-X.offset,F.put=jt,F.ac=Mr,F.bc=Tr,F.ma=ae,X.xa){if((v=Na())==null){ae=1;break e}if((function(me,Ce){var Te=[0],Ge=[0],Oe=[0];t:for(;;){if(me==null)return 0;if(Ce==null)return me.a=2,0;if(me.l=Ce,me.a=0,J(me.m,Ce.data,Ce.w,Ce.ha),!Vn(me.m,Te,Ge,Oe)){me.a=3;break t}if(me.xb=_d,Ce.width=Te[0],Ce.height=Ge[0],!Ms(Te[0],Ge[0],1,me,null))break t;return 1}return e(me.a!=0),0})(v,F)){if(F=(_=al(F.width,F.height,ae.Oa,ae.ba))==0){t:{F=v;r:for(;;){if(F==null){F=0;break t}if(e(F.s.yc!=null),e(F.s.Ya!=null),e(0<F.s.Wb),e((I=F.l)!=null),e((X=I.ma)!=null),F.xb!=0){if(F.ca=X.ba,F.tb=X.tb,e(F.ca!=null),!pd(X.Oa,I,Iu)){F.a=2;break r}if(!Fa(F,I.width)||I.da)break r;if((I.da||It(F.ca.S))&&Ri(),11>F.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),F.ca.f.kb.F!=null&&Ri()),F.Pb&&0<F.s.ua&&F.s.vb.X==null&&!pe(F.s.vb,F.s.Wa.Xa)){F.a=1;break r}F.xb=0}if(!Fs(F,F.V,F.Ba,F.c,F.i,I.o,La))break r;X.Dc=F.Ma,F=1;break t}e(F.a!=0),F=0}F=!F}F&&(_=v.a)}else _=v.a}else{if((v=new Ke)==null){ae=1;break e}if(v.Fa=X.na,v.P=X.P,v.qc=X.Sa,cn(v,F)){if((_=al(F.width,F.height,ae.Oa,ae.ba))==0){if(v.Aa=0,I=ae.Oa,e((X=v)!=null),I!=null){if(0<(ce=0>(ce=I.Md)?0:100<ce?255:255*ce/100)){for(he=je=0;4>he;++he)12>(Ie=X.pb[he]).lc&&(Ie.ia=ce*lp[0>Ie.lc?0:Ie.lc]>>3),je|=Ie.ia;je&&(alert("todo:VP8InitRandom"),X.ia=1)}X.Ga=I.Id,100<X.Ga?X.Ga=100:0>X.Ga&&(X.Ga=0)}(function(me,Ce){if(me==null)return 0;if(Ce==null)return Xe(me,2,"NULL VP8Io parameter in VP8Decode().");if(!me.cb&&!cn(me,Ce))return 0;if(e(me.cb),Ce.ac==null||Ce.ac(Ce)){Ce.ob&&(me.L=0);var Te=Uc[me.L];if(me.L==2?(me.yb=0,me.zb=0):(me.yb=Ce.v-Te>>4,me.zb=Ce.j-Te>>4,0>me.yb&&(me.yb=0),0>me.zb&&(me.zb=0)),me.Va=Ce.o+15+Te>>4,me.Hb=Ce.va+15+Te>>4,me.Hb>me.za&&(me.Hb=me.za),me.Va>me.Ub&&(me.Va=me.Ub),0<me.L){var Ge=me.ed;for(Te=0;4>Te;++Te){var Oe;if(me.Qa.Cb){var qe=me.Qa.Lb[Te];me.Qa.Fb||(qe+=Ge.Tb)}else qe=Ge.Tb;for(Oe=0;1>=Oe;++Oe){var He=me.gd[Te][Oe],Je=qe;if(Ge.Pc&&(Je+=Ge.vd[0],Oe&&(Je+=Ge.od[0])),0<(Je=0>Je?0:63<Je?63:Je)){var rt=Je;0<Ge.wb&&(rt=4<Ge.wb?rt>>2:rt>>1)>9-Ge.wb&&(rt=9-Ge.wb),1>rt&&(rt=1),He.dd=rt,He.tc=2*Je+rt,He.ld=40<=Je?2:15<=Je?1:0}else He.tc=0;He.La=Oe}}}Te=0}else Xe(me,6,"Frame setup failed"),Te=me.a;if(Te=Te==0){if(Te){me.$c=0,0<me.Aa||(me.Ic=ul);t:{Te=me.Ic,Ge=4*(rt=me.za);var Xt=32*rt,Ot=rt+1,Ir=0<me.L?rt*(0<me.Aa?2:1):0,Mt=(me.Aa==2?2:1)*rt;if((He=Ge+832+(Oe=3*(16*Te+Uc[me.L])/2*Xt)+(qe=me.Fa!=null&&0<me.Fa.length?me.Kc.c*me.Kc.i:0))!=He)Te=0;else{if(He>me.Vb){if(me.Vb=0,me.Ec=i(He),me.Fc=0,me.Ec==null){Te=Xe(me,1,"no memory during frame initialization.");break t}me.Vb=He}He=me.Ec,Je=me.Fc,me.Ac=He,me.Bc=Je,Je+=Ge,me.Gd=o(Xt,Bs),me.Hd=0,me.rb=o(Ot+1,nt),me.sb=1,me.wa=Ir?o(Ir,wt):null,me.Y=0,me.D.Nb=0,me.D.wa=me.wa,me.D.Y=me.Y,0<me.Aa&&(me.D.Y+=rt),e(!0),me.oc=He,me.pc=Je,Je+=832,me.ya=o(Mt,Zn),me.aa=0,me.D.ya=me.ya,me.D.aa=me.aa,me.Aa==2&&(me.D.aa+=rt),me.R=16*rt,me.B=8*rt,rt=(Xt=Uc[me.L])*me.R,Xt=Xt/2*me.B,me.sa=He,me.ta=Je+rt,me.qa=me.sa,me.ra=me.ta+16*Te*me.R+Xt,me.Ha=me.qa,me.Ia=me.ra+8*Te*me.B+Xt,me.$c=0,Je+=Oe,me.mb=qe?He:null,me.nb=qe?Je:null,e(Je+qe<=me.Fc+me.Vb),Dn(me),a(me.Ac,me.Bc,0,Ge),Te=1}}if(Te){if(Ce.ka=0,Ce.y=me.sa,Ce.O=me.ta,Ce.f=me.qa,Ce.N=me.ra,Ce.ea=me.Ha,Ce.Vd=me.Ia,Ce.fa=me.R,Ce.Rc=me.B,Ce.F=null,Ce.J=0,!Nm){for(Te=-255;255>=Te;++Te)vm[255+Te]=0>Te?-Te:Te;for(Te=-1020;1020>=Te;++Te)ym[1020+Te]=-128>Te?-128:127<Te?127:Te;for(Te=-112;112>=Te;++Te)wm[112+Te]=-16>Te?-16:15<Te?15:Te;for(Te=-255;510>=Te;++Te)bm[255+Te]=0>Te?0:255<Te?255:Te;Nm=1}Hl=Zr,Ic=wu,Ja=gc,tn=Co,Nn=cd,is=Eh,os=Su,Es=ja,lo=A,ku=Z,yd=Oi,cl=md,Rh=xe,wd=Ne,Lh=Ti,pm=sl,Pu=Nc,Dc=Cu,Mi[0]=mm,Mi[1]=dd,Mi[2]=vc,Mi[3]=Ao,Mi[4]=Th,Mi[5]=rl,Mi[6]=pi,Mi[7]=Ih,Mi[8]=yc,Mi[9]=hd,Ba[0]=no,Ba[1]=kh,Ba[2]=Ph,Ba[3]=ud,Ba[4]=So,Ba[5]=Xa,Ba[6]=Pi,Qa[0]=ao,Qa[1]=bu,Qa[2]=Nu,Qa[3]=so,Qa[4]=ju,Qa[5]=fd,Qa[6]=_u,Te=1}else Te=0}Te&&(Te=(function(Vr,ls){for(Vr.M=0;Vr.M<Vr.Va;++Vr.M){var Dr,Rt=Vr.Jc[Vr.M&Vr.Xb],Nt=Vr.m,vs=Vr;for(Dr=0;Dr<vs.za;++Dr){var pr=Nt,Br=vs,Rn=Br.Ac,ta=Br.Bc+4*Dr,ks=Br.zc,es=Br.ya[Br.aa+Dr];if(Br.Qa.Bb?es.$b=we(pr,Br.Pa.jb[0])?2+we(pr,Br.Pa.jb[2]):we(pr,Br.Pa.jb[1]):es.$b=0,Br.kc&&(es.Ad=we(pr,Br.Bd)),es.Za=!we(pr,145)+0,es.Za){var $s=es.Ob,ra=0;for(Br=0;4>Br;++Br){var zn,Hr=ks[0+Br];for(zn=0;4>zn;++zn){Hr=lg[Rn[ta+zn]][Hr];for(var rn=ap[we(pr,Hr[0])];0<rn;)rn=ap[2*rn+we(pr,Hr[rn])];Hr=-rn,Rn[ta+zn]=Hr}n($s,ra,Rn,ta,4),ra+=4,ks[0+Br]=Hr}}else Hr=we(pr,156)?we(pr,128)?1:3:we(pr,163)?2:0,es.Ob[0]=Hr,a(Rn,ta,Hr,4),a(ks,0,Hr,4);es.Dd=we(pr,142)?we(pr,114)?we(pr,183)?1:3:2:0}if(vs.m.Ka)return Xe(Vr,7,"Premature end-of-partition0 encountered.");for(;Vr.ja<Vr.za;++Vr.ja){if(vs=Rt,pr=(Nt=Vr).rb[Nt.sb-1],Rn=Nt.rb[Nt.sb+Nt.ja],Dr=Nt.ya[Nt.aa+Nt.ja],ta=Nt.kc?Dr.Ad:0)pr.la=Rn.la=0,Dr.Za||(pr.Na=Rn.Na=0),Dr.Hc=0,Dr.Gc=0,Dr.ia=0;else{var qn,nn;if(pr=Rn,Rn=vs,ta=Nt.Pa.Xc,ks=Nt.ya[Nt.aa+Nt.ja],es=Nt.pb[ks.$b],Br=ks.ad,$s=0,ra=Nt.rb[Nt.sb-1],Hr=zn=0,a(Br,$s,0,384),ks.Za)var cs=0,ds=ta[3];else{rn=i(16);var An=pr.Na+ra.Na;if(An=Fc(Rn,ta[1],An,es.Eb,0,rn,0),pr.Na=ra.Na=(0<An)+0,1<An)Hl(rn,0,Br,$s);else{var Sa=rn[0]+3>>3;for(rn=0;256>rn;rn+=16)Br[$s+rn]=Sa}cs=1,ds=ta[0]}var _n=15&pr.la,En=15&ra.la;for(rn=0;4>rn;++rn){var Ps=1&En;for(Sa=nn=0;4>Sa;++Sa)_n=_n>>1|(Ps=(An=Fc(Rn,ds,An=Ps+(1&_n),es.Sc,cs,Br,$s))>cs)<<7,nn=nn<<2|(3<An?3:1<An?2:Br[$s+0]!=0),$s+=16;_n>>=4,En=En>>1|Ps<<7,zn=(zn<<8|nn)>>>0}for(ds=_n,cs=En>>4,qn=0;4>qn;qn+=2){for(nn=0,_n=pr.la>>4+qn,En=ra.la>>4+qn,rn=0;2>rn;++rn){for(Ps=1&En,Sa=0;2>Sa;++Sa)An=Ps+(1&_n),_n=_n>>1|(Ps=0<(An=Fc(Rn,ta[2],An,es.Qc,0,Br,$s)))<<3,nn=nn<<2|(3<An?3:1<An?2:Br[$s+0]!=0),$s+=16;_n>>=2,En=En>>1|Ps<<5}Hr|=nn<<4*qn,ds|=_n<<4<<qn,cs|=(240&En)<<qn}pr.la=ds,ra.la=cs,ks.Hc=zn,ks.Gc=Hr,ks.ia=43690&Hr?0:es.ia,ta=!(zn|Hr)}if(0<Nt.L&&(Nt.wa[Nt.Y+Nt.ja]=Nt.gd[Dr.$b][Dr.Za],Nt.wa[Nt.Y+Nt.ja].La|=!ta),vs.Ka)return Xe(Vr,7,"Premature end-of-file encountered.")}if(Dn(Vr),Nt=ls,vs=1,Dr=(Rt=Vr).D,pr=0<Rt.L&&Rt.M>=Rt.zb&&Rt.M<=Rt.Va,Rt.Aa==0)t:{if(Dr.M=Rt.M,Dr.uc=pr,xi(Rt,Dr),vs=1,Dr=(nn=Rt.D).Nb,pr=(Hr=Uc[Rt.L])*Rt.R,Rn=Hr/2*Rt.B,rn=16*Dr*Rt.R,Sa=8*Dr*Rt.B,ta=Rt.sa,ks=Rt.ta-pr+rn,es=Rt.qa,Br=Rt.ra-Rn+Sa,$s=Rt.Ha,ra=Rt.Ia-Rn+Sa,En=(_n=nn.M)==0,zn=_n>=Rt.Va-1,Rt.Aa==2&&xi(Rt,nn),nn.uc)for(Ps=(An=Rt).D.M,e(An.D.uc),nn=An.yb;nn<An.Hb;++nn){cs=nn,ds=Ps;var fa=(ni=(bs=An).D).Nb;qn=bs.R;var ni=ni.wa[ni.Y+cs],ys=bs.sa,ws=bs.ta+16*fa*qn+16*cs,Aa=ni.dd,kn=ni.tc;if(kn!=0)if(e(3<=kn),bs.L==1)0<cs&&pm(ys,ws,qn,kn+4),ni.La&&Dc(ys,ws,qn,kn),0<ds&&Lh(ys,ws,qn,kn+4),ni.La&&Pu(ys,ws,qn,kn);else{var Ea=bs.B,Bi=bs.qa,uo=bs.ra+8*fa*Ea+8*cs,na=bs.Ha,bs=bs.Ia+8*fa*Ea+8*cs;fa=ni.ld,0<cs&&(Es(ys,ws,qn,kn+4,Aa,fa),ku(Bi,uo,na,bs,Ea,kn+4,Aa,fa)),ni.La&&(cl(ys,ws,qn,kn,Aa,fa),wd(Bi,uo,na,bs,Ea,kn,Aa,fa)),0<ds&&(os(ys,ws,qn,kn+4,Aa,fa),lo(Bi,uo,na,bs,Ea,kn+4,Aa,fa)),ni.La&&(yd(ys,ws,qn,kn,Aa,fa),Rh(Bi,uo,na,bs,Ea,kn,Aa,fa))}}if(Rt.ia&&alert("todo:DitherRow"),Nt.put!=null){if(nn=16*_n,_n=16*(_n+1),En?(Nt.y=Rt.sa,Nt.O=Rt.ta+rn,Nt.f=Rt.qa,Nt.N=Rt.ra+Sa,Nt.ea=Rt.Ha,Nt.W=Rt.Ia+Sa):(nn-=Hr,Nt.y=ta,Nt.O=ks,Nt.f=es,Nt.N=Br,Nt.ea=$s,Nt.W=ra),zn||(_n-=Hr),_n>Nt.o&&(_n=Nt.o),Nt.F=null,Nt.J=null,Rt.Fa!=null&&0<Rt.Fa.length&&nn<_n&&(Nt.J=As(Rt,Nt,nn,_n-nn),Nt.F=Rt.mb,Nt.F==null&&Nt.F.length==0)){vs=Xe(Rt,3,"Could not decode alpha data.");break t}nn<Nt.j&&(Hr=Nt.j-nn,nn=Nt.j,e(!(1&Hr)),Nt.O+=Rt.R*Hr,Nt.N+=Rt.B*(Hr>>1),Nt.W+=Rt.B*(Hr>>1),Nt.F!=null&&(Nt.J+=Nt.width*Hr)),nn<_n&&(Nt.O+=Nt.v,Nt.N+=Nt.v>>1,Nt.W+=Nt.v>>1,Nt.F!=null&&(Nt.J+=Nt.v),Nt.ka=nn-Nt.j,Nt.U=Nt.va-Nt.v,Nt.T=_n-nn,vs=Nt.put(Nt))}Dr+1!=Rt.Ic||zn||(n(Rt.sa,Rt.ta-pr,ta,ks+16*Rt.R,pr),n(Rt.qa,Rt.ra-Rn,es,Br+8*Rt.B,Rn),n(Rt.Ha,Rt.Ia-Rn,$s,ra+8*Rt.B,Rn))}if(!vs)return Xe(Vr,6,"Output aborted.")}return 1})(me,Ce)),Ce.bc!=null&&Ce.bc(Ce),Te&=1}return Te?(me.cb=0,Te):0})(v,F)||(_=v.a)}}else _=v.a}_==0&&ae.Oa!=null&&ae.Oa.fd&&(_=xd(ae.ba))}ae=_}ne=ae!=0?null:11>ne?le.f.RGBA.eb:le.f.kb.y}else ne=null;return ne};var Bu=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(U,K){for(var M="",q=0;q<4;q++)M+=String.fromCharCode(U[K++]);return M}function h(U,K){return U[K+0]|U[K+1]<<8}function m(U,K){return(U[K+0]|U[K+1]<<8|U[K+2]<<16)>>>0}function x(U,K){return(U[K+0]|U[K+1]<<8|U[K+2]<<16|U[K+3]<<24)>>>0}new c;var p=[0],y=[0],w=[],j=new c,C=t,S=(function(U,K){var M={},q=0,re=!1,ee=0,H=0;if(M.frames=[],!(function(L,z){for(var V=0;V<4;V++)if(L[z+V]!="RIFF".charCodeAt(V))return!0;return!1})(U,K)){for(x(U,K+=4),K+=8;K<U.length;){var se=u(U,K),ue=x(U,K+=4);K+=4;var G=ue+(1&ue);switch(se){case"VP8 ":case"VP8L":M.frames[q]===void 0&&(M.frames[q]={}),(Y=M.frames[q]).src_off=re?H:K-8,Y.src_size=ee+ue+8,q++,re&&(re=!1,ee=0,H=0);break;case"VP8X":(Y=M.header={}).feature_flags=U[K];var J=K+4;Y.canvas_width=1+m(U,J),J+=3,Y.canvas_height=1+m(U,J),J+=3;break;case"ALPH":re=!0,ee=G+8,H=K-8;break;case"ANIM":(Y=M.header).bgcolor=x(U,K),J=K+4,Y.loop_count=h(U,J),J+=2;break;case"ANMF":var oe,Y;(Y=M.frames[q]={}).offset_x=2*m(U,K),K+=3,Y.offset_y=2*m(U,K),K+=3,Y.width=1+m(U,K),K+=3,Y.height=1+m(U,K),K+=3,Y.duration=m(U,K),K+=3,oe=U[K++],Y.dispose=1&oe,Y.blend=oe>>1&1}se!="ANMF"&&(K+=G)}return M}})(C,0);S.response=C,S.rgbaoutput=!0,S.dataurl=!1;var k=S.header?S.header:null,P=S.frames?S.frames:null;if(k){k.loop_counter=k.loop_count,p=[k.canvas_height],y=[k.canvas_width];for(var O=0;O<P.length&&P[O].blend!=0;O++);}var $=P[0],R=j.WebPDecodeRGBA(C,$.src_off,$.src_size,y,p);$.rgba=R,$.imgwidth=y[0],$.imgheight=p[0];for(var B=0;B<y[0]*p[0]*4;B++)w[B]=R[B];return this.width=y,this.height=p,this.data=w,this}(function(t){var e,r,n,a,i,o,l,c,u,h=function(L){return L=L||{},this.isStrokeTransparent=L.isStrokeTransparent||!1,this.strokeOpacity=L.strokeOpacity||1,this.strokeStyle=L.strokeStyle||"#000000",this.fillStyle=L.fillStyle||"#000000",this.isFillTransparent=L.isFillTransparent||!1,this.fillOpacity=L.fillOpacity||1,this.font=L.font||"10px sans-serif",this.textBaseline=L.textBaseline||"alphabetic",this.textAlign=L.textAlign||"left",this.lineWidth=L.lineWidth||1,this.lineJoin=L.lineJoin||"miter",this.lineCap=L.lineCap||"butt",this.path=L.path||[],this.transform=L.transform!==void 0?L.transform.clone():new c,this.globalCompositeOperation=L.globalCompositeOperation||"normal",this.globalAlpha=L.globalAlpha||1,this.clip_path=L.clip_path||[],this.currentPoint=L.currentPoint||new o,this.miterLimit=L.miterLimit||10,this.lastPoint=L.lastPoint||new o,this.lineDashOffset=L.lineDashOffset||0,this.lineDash=L.lineDash||[],this.margin=L.margin||[0,0,0,0],this.prevPageLastElemOffset=L.prevPageLastElemOffset||0,this.ignoreClearRect=typeof L.ignoreClearRect!="boolean"||L.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new m(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,u=new h}]);var m=function(L){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var z=L;Object.defineProperty(this,"pdf",{get:function(){return z}});var V=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return V},set:function(be){V=!!be}});var W=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return W},set:function(be){W=!!be}});var Q=0;Object.defineProperty(this,"posX",{get:function(){return Q},set:function(be){isNaN(be)||(Q=be)}});var T=0;Object.defineProperty(this,"posY",{get:function(){return T},set:function(be){isNaN(be)||(T=be)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(be){var pe;typeof be=="number"?pe=[be,be,be,be]:((pe=new Array(4))[0]=be[0],pe[1]=be.length>=2?be[1]:pe[0],pe[2]=be.length>=3?be[2]:pe[0],pe[3]=be.length>=4?be[3]:pe[1]),u.margin=pe}});var ie=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ie},set:function(be){ie=be}});var ge=0;Object.defineProperty(this,"lastBreak",{get:function(){return ge},set:function(be){ge=be}});var we=[];Object.defineProperty(this,"pageBreaks",{get:function(){return we},set:function(be){we=be}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(be){be instanceof h&&(u=be)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(be){u.path=be}});var Se=[];Object.defineProperty(this,"ctxStack",{get:function(){return Se},set:function(be){Se=be}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(be){var pe;pe=x(be),this.ctx.fillStyle=pe.style,this.ctx.isFillTransparent=pe.a===0,this.ctx.fillOpacity=pe.a,this.pdf.setFillColor(pe.r,pe.g,pe.b,{a:pe.a}),this.pdf.setTextColor(pe.r,pe.g,pe.b,{a:pe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(be){var pe=x(be);this.ctx.strokeStyle=pe.style,this.ctx.isStrokeTransparent=pe.a===0,this.ctx.strokeOpacity=pe.a,pe.a===0?this.pdf.setDrawColor(255,255,255):(pe.a,this.pdf.setDrawColor(pe.r,pe.g,pe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(be){["butt","round","square"].indexOf(be)!==-1&&(this.ctx.lineCap=be,this.pdf.setLineCap(be))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(be){isNaN(be)||(this.ctx.lineWidth=be,this.pdf.setLineWidth(be))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(be){["bevel","round","miter"].indexOf(be)!==-1&&(this.ctx.lineJoin=be,this.pdf.setLineJoin(be))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(be){isNaN(be)||(this.ctx.miterLimit=be,this.pdf.setMiterLimit(be))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(be){this.ctx.textBaseline=be}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(be){["right","end","center","left","start"].indexOf(be)!==-1&&(this.ctx.textAlign=be)}});var Ue=null,We=null;Object.defineProperty(this,"fontFaces",{get:function(){return We},set:function(be){Ue=null,We=be}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(be){var pe;if(this.ctx.font=be,(pe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(be))!==null){var at=pe[1];pe[2];var tt=pe[3],Be=pe[4];pe[5];var ye=pe[6],st=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Be)[2];Be=Math.floor(st==="px"?parseFloat(Be)*this.pdf.internal.scaleFactor:st==="em"?parseFloat(Be)*this.pdf.getFontSize():parseFloat(Be)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Be);var Ve=(function(kt){var St,gr,Rr=[],xt=kt.trim();if(xt==="")return k2;if(xt in V3)return[V3[xt]];for(;xt!=="";){switch(gr=null,St=(xt=q3(xt)).charAt(0)){case'"':case"'":gr=See(xt.substring(1),St);break;default:gr=Aee(xt)}if(gr===null||(Rr.push(gr[0]),(xt=q3(gr[1]))!==""&&xt.charAt(0)!==","))return k2;xt=xt.replace(/^,/,"")}return Rr})(ye);if(this.fontFaces){var vt=(function(kt,St){if(Ue===null){var gr=(function(Rr){var xt=[];return Object.keys(Rr).forEach(function(Ht){Rr[Ht].forEach(function(Me){var bt=null;switch(Me){case"bold":bt={family:Ht,weight:"bold"};break;case"italic":bt={family:Ht,style:"italic"};break;case"bolditalic":bt={family:Ht,weight:"bold",style:"italic"};break;case"":case"normal":bt={family:Ht}}bt!==null&&(bt.ref={name:Ht,style:Me},xt.push(bt))})}),xt})(kt.getFontList());Ue=(function(Rr){for(var xt={},Ht=0;Ht<Rr.length;++Ht){var Me=E2(Rr[Ht]),bt=Me.family,Wt=Me.stretch,It=Me.style,Cr=Me.weight;xt[bt]=xt[bt]||{},xt[bt][Wt]=xt[bt][Wt]||{},xt[bt][Wt][It]=xt[bt][Wt][It]||{},xt[bt][Wt][It][Cr]=Me}return xt})(gr.concat(St))}return Ue})(this.pdf,this.fontFaces),ct=Ve.map(function(kt){return{family:kt,stretch:"normal",weight:tt,style:at}}),Kt=(function(kt,St,gr){for(var Rr=(gr=gr||{}).defaultFontFamily||"times",xt=Object.assign({},Cee,gr.genericFontFamilies||{}),Ht=null,Me=null,bt=0;bt<St.length;++bt)if(xt[(Ht=E2(St[bt])).family]&&(Ht.family=xt[Ht.family]),kt.hasOwnProperty(Ht.family)){Me=kt[Ht.family];break}if(!(Me=Me||kt[Rr]))throw new Error("Could not find a font-family for the rule '"+z3(Ht)+"' and default family '"+Rr+"'.");if(Me=(function(Wt,It){if(It[Wt])return It[Wt];var Cr=tw[Wt],Gr=Cr<=tw.normal?-1:1,vr=$3(It,w7,Cr,Gr);if(!vr)throw new Error("Could not find a matching font-stretch value for "+Wt);return vr})(Ht.stretch,Me),Me=(function(Wt,It){if(It[Wt])return It[Wt];for(var Cr=y7[Wt],Gr=0;Gr<Cr.length;++Gr)if(It[Cr[Gr]])return It[Cr[Gr]];throw new Error("Could not find a matching font-style for "+Wt)})(Ht.style,Me),!(Me=(function(Wt,It){if(It[Wt])return It[Wt];if(Wt===400&&It[500])return It[500];if(Wt===500&&It[400])return It[400];var Cr=_ee[Wt],Gr=$3(It,b7,Cr,Wt<400?-1:1);if(!Gr)throw new Error("Could not find a matching font-weight for value "+Wt);return Gr})(Ht.weight,Me)))throw new Error("Failed to resolve a font for the rule '"+z3(Ht)+"'.");return Me})(vt,ct);this.pdf.setFont(Kt.ref.name,Kt.ref.style)}else{var ot="";(tt==="bold"||parseInt(tt,10)>=700||at==="bold")&&(ot="bold"),at==="italic"&&(ot+="italic"),ot.length===0&&(ot="normal");for(var Ct="",qt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Tt=0;Tt<Ve.length;Tt++){if(this.pdf.internal.getFont(Ve[Tt],ot,{noFallback:!0,disableWarning:!0})!==void 0){Ct=Ve[Tt];break}if(ot==="bolditalic"&&this.pdf.internal.getFont(Ve[Tt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ct=Ve[Tt],ot="bold";else if(this.pdf.internal.getFont(Ve[Tt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ct=Ve[Tt],ot="normal";break}}if(Ct===""){for(var Et=0;Et<Ve.length;Et++)if(qt[Ve[Et]]){Ct=qt[Ve[Et]];break}}Ct=Ct===""?"Times":Ct,this.pdf.setFont(Ct,ot)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(be){this.ctx.globalCompositeOperation=be}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(be){this.ctx.globalAlpha=be}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(be){this.ctx.lineDashOffset=be,Y.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(be){this.ctx.lineDash=be,Y.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(be){this.ctx.ignoreClearRect=!!be}})};m.prototype.setLineDash=function(L){this.lineDash=L},m.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},m.prototype.fill=function(){P.call(this,"fill",!1)},m.prototype.stroke=function(){P.call(this,"stroke",!1)},m.prototype.beginPath=function(){this.path=[{type:"begin"}]},m.prototype.moveTo=function(L,z){if(isNaN(L)||isNaN(z))throw $n.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var V=this.ctx.transform.applyToPoint(new o(L,z));this.path.push({type:"mt",x:V.x,y:V.y}),this.ctx.lastPoint=new o(L,z)},m.prototype.closePath=function(){var L=new o(0,0),z=0;for(z=this.path.length-1;z!==-1;z--)if(this.path[z].type==="begin"&&Tn(this.path[z+1])==="object"&&typeof this.path[z+1].x=="number"){L=new o(this.path[z+1].x,this.path[z+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(L.x,L.y)},m.prototype.lineTo=function(L,z){if(isNaN(L)||isNaN(z))throw $n.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var V=this.ctx.transform.applyToPoint(new o(L,z));this.path.push({type:"lt",x:V.x,y:V.y}),this.ctx.lastPoint=new o(V.x,V.y)},m.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),P.call(this,null,!0)},m.prototype.quadraticCurveTo=function(L,z,V,W){if(isNaN(V)||isNaN(W)||isNaN(L)||isNaN(z))throw $n.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Q=this.ctx.transform.applyToPoint(new o(V,W)),T=this.ctx.transform.applyToPoint(new o(L,z));this.path.push({type:"qct",x1:T.x,y1:T.y,x:Q.x,y:Q.y}),this.ctx.lastPoint=new o(Q.x,Q.y)},m.prototype.bezierCurveTo=function(L,z,V,W,Q,T){if(isNaN(Q)||isNaN(T)||isNaN(L)||isNaN(z)||isNaN(V)||isNaN(W))throw $n.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ie=this.ctx.transform.applyToPoint(new o(Q,T)),ge=this.ctx.transform.applyToPoint(new o(L,z)),we=this.ctx.transform.applyToPoint(new o(V,W));this.path.push({type:"bct",x1:ge.x,y1:ge.y,x2:we.x,y2:we.y,x:ie.x,y:ie.y}),this.ctx.lastPoint=new o(ie.x,ie.y)},m.prototype.arc=function(L,z,V,W,Q,T){if(isNaN(L)||isNaN(z)||isNaN(V)||isNaN(W)||isNaN(Q))throw $n.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(T=!!T,!this.ctx.transform.isIdentity){var ie=this.ctx.transform.applyToPoint(new o(L,z));L=ie.x,z=ie.y;var ge=this.ctx.transform.applyToPoint(new o(0,V)),we=this.ctx.transform.applyToPoint(new o(0,0));V=Math.sqrt(Math.pow(ge.x-we.x,2)+Math.pow(ge.y-we.y,2))}Math.abs(Q-W)>=2*Math.PI&&(W=0,Q=2*Math.PI),this.path.push({type:"arc",x:L,y:z,radius:V,startAngle:W,endAngle:Q,counterclockwise:T})},m.prototype.arcTo=function(L,z,V,W,Q){throw new Error("arcTo not implemented.")},m.prototype.rect=function(L,z,V,W){if(isNaN(L)||isNaN(z)||isNaN(V)||isNaN(W))throw $n.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(L,z),this.lineTo(L+V,z),this.lineTo(L+V,z+W),this.lineTo(L,z+W),this.lineTo(L,z),this.lineTo(L+V,z),this.lineTo(L,z)},m.prototype.fillRect=function(L,z,V,W){if(isNaN(L)||isNaN(z)||isNaN(V)||isNaN(W))throw $n.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var Q={};this.lineCap!=="butt"&&(Q.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Q.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(L,z,V,W),this.fill(),Q.hasOwnProperty("lineCap")&&(this.lineCap=Q.lineCap),Q.hasOwnProperty("lineJoin")&&(this.lineJoin=Q.lineJoin)}},m.prototype.strokeRect=function(L,z,V,W){if(isNaN(L)||isNaN(z)||isNaN(V)||isNaN(W))throw $n.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");y.call(this)||(this.beginPath(),this.rect(L,z,V,W),this.stroke())},m.prototype.clearRect=function(L,z,V,W){if(isNaN(L)||isNaN(z)||isNaN(V)||isNaN(W))throw $n.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(L,z,V,W))},m.prototype.save=function(L){L=typeof L!="boolean"||L;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,V=0;V<this.pdf.internal.getNumberOfPages();V++)this.pdf.setPage(V+1),this.pdf.internal.out("q");if(this.pdf.setPage(z),L){this.ctx.fontSize=this.pdf.internal.getFontSize();var W=new h(this.ctx);this.ctxStack.push(this.ctx),this.ctx=W}},m.prototype.restore=function(L){L=typeof L!="boolean"||L;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,V=0;V<this.pdf.internal.getNumberOfPages();V++)this.pdf.setPage(V+1),this.pdf.internal.out("Q");this.pdf.setPage(z),L&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},m.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var x=function(L){var z,V,W,Q;if(L.isCanvasGradient===!0&&(L=L.getColor()),!L)return{r:0,g:0,b:0,a:0,style:L};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(L))z=0,V=0,W=0,Q=0;else{var T=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(L);if(T!==null)z=parseInt(T[1]),V=parseInt(T[2]),W=parseInt(T[3]),Q=1;else if((T=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(L))!==null)z=parseInt(T[1]),V=parseInt(T[2]),W=parseInt(T[3]),Q=parseFloat(T[4]);else{if(Q=1,typeof L=="string"&&L.charAt(0)!=="#"){var ie=new h7(L);L=ie.ok?ie.toHex():"#000000"}L.length===4?(z=L.substring(1,2),z+=z,V=L.substring(2,3),V+=V,W=L.substring(3,4),W+=W):(z=L.substring(1,3),V=L.substring(3,5),W=L.substring(5,7)),z=parseInt(z,16),V=parseInt(V,16),W=parseInt(W,16)}}return{r:z,g:V,b:W,a:Q,style:L}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},y=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};m.prototype.fillText=function(L,z,V,W){if(isNaN(z)||isNaN(V)||typeof L!="string")throw $n.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(W=isNaN(W)?void 0:W,!p.call(this)){var Q=G(this.ctx.transform.rotation),T=this.ctx.transform.scaleX;q.call(this,{text:L,x:z,y:V,scale:T,angle:Q,align:this.textAlign,maxWidth:W})}},m.prototype.strokeText=function(L,z,V,W){if(isNaN(z)||isNaN(V)||typeof L!="string")throw $n.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!y.call(this)){W=isNaN(W)?void 0:W;var Q=G(this.ctx.transform.rotation),T=this.ctx.transform.scaleX;q.call(this,{text:L,x:z,y:V,scale:T,renderingMode:"stroke",angle:Q,align:this.textAlign,maxWidth:W})}},m.prototype.measureText=function(L){if(typeof L!="string")throw $n.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var z=this.pdf,V=this.pdf.internal.scaleFactor,W=z.internal.getFontSize(),Q=z.getStringUnitWidth(L)*W/z.internal.scaleFactor;return new function(T){var ie=(T=T||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ie}}),this}({width:Q*=Math.round(96*V/72*1e4)/1e4})},m.prototype.scale=function(L,z){if(isNaN(L)||isNaN(z))throw $n.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var V=new c(L,0,0,z,0,0);this.ctx.transform=this.ctx.transform.multiply(V)},m.prototype.rotate=function(L){if(isNaN(L))throw $n.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var z=new c(Math.cos(L),Math.sin(L),-Math.sin(L),Math.cos(L),0,0);this.ctx.transform=this.ctx.transform.multiply(z)},m.prototype.translate=function(L,z){if(isNaN(L)||isNaN(z))throw $n.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var V=new c(1,0,0,1,L,z);this.ctx.transform=this.ctx.transform.multiply(V)},m.prototype.transform=function(L,z,V,W,Q,T){if(isNaN(L)||isNaN(z)||isNaN(V)||isNaN(W)||isNaN(Q)||isNaN(T))throw $n.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ie=new c(L,z,V,W,Q,T);this.ctx.transform=this.ctx.transform.multiply(ie)},m.prototype.setTransform=function(L,z,V,W,Q,T){L=isNaN(L)?1:L,z=isNaN(z)?0:z,V=isNaN(V)?0:V,W=isNaN(W)?1:W,Q=isNaN(Q)?0:Q,T=isNaN(T)?0:T,this.ctx.transform=new c(L,z,V,W,Q,T)};var w=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};m.prototype.drawImage=function(L,z,V,W,Q,T,ie,ge,we){var Se=this.pdf.getImageProperties(L),Ue=1,We=1,be=1,pe=1;W!==void 0&&ge!==void 0&&(be=ge/W,pe=we/Q,Ue=Se.width/W*ge/W,We=Se.height/Q*we/Q),T===void 0&&(T=z,ie=V,z=0,V=0),W!==void 0&&ge===void 0&&(ge=W,we=Q),W===void 0&&ge===void 0&&(ge=Se.width,we=Se.height);for(var at,tt=this.ctx.transform.decompose(),Be=G(tt.rotate.shx),ye=new c,st=(ye=(ye=(ye=ye.multiply(tt.translate)).multiply(tt.skew)).multiply(tt.scale)).applyToRectangle(new l(T-z*be,ie-V*pe,W*Ue,Q*We)),Ve=j.call(this,st),vt=[],ct=0;ct<Ve.length;ct+=1)vt.indexOf(Ve[ct])===-1&&vt.push(Ve[ct]);if(k(vt),this.autoPaging)for(var Kt=vt[0],ot=vt[vt.length-1],Ct=Kt;Ct<ot+1;Ct++){this.pdf.setPage(Ct);var qt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Tt=Ct===1?this.posY+this.margin[0]:this.margin[0],Et=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],kt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],St=Ct===1?0:Et+(Ct-2)*kt;if(this.ctx.clip_path.length!==0){var gr=this.path;at=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(at,this.posX+this.margin[3],-St+Tt+this.ctx.prevPageLastElemOffset),O.call(this,"fill",!0),this.path=gr}var Rr=JSON.parse(JSON.stringify(st));Rr=S([Rr],this.posX+this.margin[3],-St+Tt+this.ctx.prevPageLastElemOffset)[0];var xt=(Ct>Kt||Ct<ot)&&w.call(this);xt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],qt,kt,null).clip().discardPath()),this.pdf.addImage(L,"JPEG",Rr.x,Rr.y,Rr.w,Rr.h,null,null,Be),xt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(L,"JPEG",st.x,st.y,st.w,st.h,null,null,Be)};var j=function(L,z,V){var W=[];z=z||this.pdf.internal.pageSize.width,V=V||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Q=this.posY+this.ctx.prevPageLastElemOffset;switch(L.type){default:case"mt":case"lt":W.push(Math.floor((L.y+Q)/V)+1);break;case"arc":W.push(Math.floor((L.y+Q-L.radius)/V)+1),W.push(Math.floor((L.y+Q+L.radius)/V)+1);break;case"qct":var T=J(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x,L.y);W.push(Math.floor((T.y+Q)/V)+1),W.push(Math.floor((T.y+T.h+Q)/V)+1);break;case"bct":var ie=oe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x2,L.y2,L.x,L.y);W.push(Math.floor((ie.y+Q)/V)+1),W.push(Math.floor((ie.y+ie.h+Q)/V)+1);break;case"rect":W.push(Math.floor((L.y+Q)/V)+1),W.push(Math.floor((L.y+L.h+Q)/V)+1)}for(var ge=0;ge<W.length;ge+=1)for(;this.pdf.internal.getNumberOfPages()<W[ge];)C.call(this);return W},C=function(){var L=this.fillStyle,z=this.strokeStyle,V=this.font,W=this.lineCap,Q=this.lineWidth,T=this.lineJoin;this.pdf.addPage(),this.fillStyle=L,this.strokeStyle=z,this.font=V,this.lineCap=W,this.lineWidth=Q,this.lineJoin=T},S=function(L,z,V){for(var W=0;W<L.length;W++)switch(L[W].type){case"bct":L[W].x2+=z,L[W].y2+=V;case"qct":L[W].x1+=z,L[W].y1+=V;default:L[W].x+=z,L[W].y+=V}return L},k=function(L){return L.sort(function(z,V){return z-V})},P=function(L,z){for(var V,W,Q=this.fillStyle,T=this.strokeStyle,ie=this.lineCap,ge=this.lineWidth,we=Math.abs(ge*this.ctx.transform.scaleX),Se=this.lineJoin,Ue=JSON.parse(JSON.stringify(this.path)),We=JSON.parse(JSON.stringify(this.path)),be=[],pe=0;pe<We.length;pe++)if(We[pe].x!==void 0)for(var at=j.call(this,We[pe]),tt=0;tt<at.length;tt+=1)be.indexOf(at[tt])===-1&&be.push(at[tt]);for(var Be=0;Be<be.length;Be++)for(;this.pdf.internal.getNumberOfPages()<be[Be];)C.call(this);if(k(be),this.autoPaging)for(var ye=be[0],st=be[be.length-1],Ve=ye;Ve<st+1;Ve++){this.pdf.setPage(Ve),this.fillStyle=Q,this.strokeStyle=T,this.lineCap=ie,this.lineWidth=we,this.lineJoin=Se;var vt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ct=Ve===1?this.posY+this.margin[0]:this.margin[0],Kt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ot=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ct=Ve===1?0:Kt+(Ve-2)*ot;if(this.ctx.clip_path.length!==0){var qt=this.path;V=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(V,this.posX+this.margin[3],-Ct+ct+this.ctx.prevPageLastElemOffset),O.call(this,L,!0),this.path=qt}if(W=JSON.parse(JSON.stringify(Ue)),this.path=S(W,this.posX+this.margin[3],-Ct+ct+this.ctx.prevPageLastElemOffset),z===!1||Ve===0){var Tt=(Ve>ye||Ve<st)&&w.call(this);Tt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],vt,ot,null).clip().discardPath()),O.call(this,L,z),Tt&&this.pdf.restoreGraphicsState()}this.lineWidth=ge}else this.lineWidth=we,O.call(this,L,z),this.lineWidth=ge;this.path=Ue},O=function(L,z){if((L!=="stroke"||z||!y.call(this))&&(L==="stroke"||z||!p.call(this))){for(var V,W,Q=[],T=this.path,ie=0;ie<T.length;ie++){var ge=T[ie];switch(ge.type){case"begin":Q.push({begin:!0});break;case"close":Q.push({close:!0});break;case"mt":Q.push({start:ge,deltas:[],abs:[]});break;case"lt":var we=Q.length;if(T[ie-1]&&!isNaN(T[ie-1].x)&&(V=[ge.x-T[ie-1].x,ge.y-T[ie-1].y],we>0)){for(;we>=0;we--)if(Q[we-1].close!==!0&&Q[we-1].begin!==!0){Q[we-1].deltas.push(V),Q[we-1].abs.push(ge);break}}break;case"bct":V=[ge.x1-T[ie-1].x,ge.y1-T[ie-1].y,ge.x2-T[ie-1].x,ge.y2-T[ie-1].y,ge.x-T[ie-1].x,ge.y-T[ie-1].y],Q[Q.length-1].deltas.push(V);break;case"qct":var Se=T[ie-1].x+2/3*(ge.x1-T[ie-1].x),Ue=T[ie-1].y+2/3*(ge.y1-T[ie-1].y),We=ge.x+2/3*(ge.x1-ge.x),be=ge.y+2/3*(ge.y1-ge.y),pe=ge.x,at=ge.y;V=[Se-T[ie-1].x,Ue-T[ie-1].y,We-T[ie-1].x,be-T[ie-1].y,pe-T[ie-1].x,at-T[ie-1].y],Q[Q.length-1].deltas.push(V);break;case"arc":Q.push({deltas:[],abs:[],arc:!0}),Array.isArray(Q[Q.length-1].abs)&&Q[Q.length-1].abs.push(ge)}}W=z?null:L==="stroke"?"stroke":"fill";for(var tt=!1,Be=0;Be<Q.length;Be++)if(Q[Be].arc)for(var ye=Q[Be].abs,st=0;st<ye.length;st++){var Ve=ye[st];Ve.type==="arc"?B.call(this,Ve.x,Ve.y,Ve.radius,Ve.startAngle,Ve.endAngle,Ve.counterclockwise,void 0,z,!tt):re.call(this,Ve.x,Ve.y),tt=!0}else if(Q[Be].close===!0)this.pdf.internal.out("h"),tt=!1;else if(Q[Be].begin!==!0){var vt=Q[Be].start.x,ct=Q[Be].start.y;ee.call(this,Q[Be].deltas,vt,ct),tt=!0}W&&U.call(this,W),z&&K.call(this)}},$=function(L){var z=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,V=z*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return L-V;case"top":return L+z-V;case"hanging":return L+z-2*V;case"middle":return L+z/2-V;default:return L}},R=function(L){return L+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};m.prototype.createLinearGradient=function(){var L=function(){};return L.colorStops=[],L.addColorStop=function(z,V){this.colorStops.push([z,V])},L.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},L.isCanvasGradient=!0,L},m.prototype.createPattern=function(){return this.createLinearGradient()},m.prototype.createRadialGradient=function(){return this.createLinearGradient()};var B=function(L,z,V,W,Q,T,ie,ge,we){for(var Se=se.call(this,V,W,Q,T),Ue=0;Ue<Se.length;Ue++){var We=Se[Ue];Ue===0&&(we?M.call(this,We.x1+L,We.y1+z):re.call(this,We.x1+L,We.y1+z)),H.call(this,L,z,We.x2,We.y2,We.x3,We.y3,We.x4,We.y4)}ge?K.call(this):U.call(this,ie)},U=function(L){switch(L){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},K=function(){this.pdf.clip(),this.pdf.discardPath()},M=function(L,z){this.pdf.internal.out(r(L)+" "+n(z)+" m")},q=function(L){var z;switch(L.align){case"right":case"end":z="right";break;case"center":z="center";break;default:z="left"}var V=this.pdf.getTextDimensions(L.text),W=$.call(this,L.y),Q=R.call(this,W)-V.h,T=this.ctx.transform.applyToPoint(new o(L.x,W)),ie=this.ctx.transform.decompose(),ge=new c;ge=(ge=(ge=ge.multiply(ie.translate)).multiply(ie.skew)).multiply(ie.scale);for(var we,Se,Ue,We=this.ctx.transform.applyToRectangle(new l(L.x,W,V.w,V.h)),be=ge.applyToRectangle(new l(L.x,Q,V.w,V.h)),pe=j.call(this,be),at=[],tt=0;tt<pe.length;tt+=1)at.indexOf(pe[tt])===-1&&at.push(pe[tt]);if(k(at),this.autoPaging)for(var Be=at[0],ye=at[at.length-1],st=Be;st<ye+1;st++){this.pdf.setPage(st);var Ve=st===1?this.posY+this.margin[0]:this.margin[0],vt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ct=this.pdf.internal.pageSize.height-this.margin[2],Kt=ct-this.margin[0],ot=this.pdf.internal.pageSize.width-this.margin[1],Ct=ot-this.margin[3],qt=st===1?0:vt+(st-2)*Kt;if(this.ctx.clip_path.length!==0){var Tt=this.path;we=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(we,this.posX+this.margin[3],-1*qt+Ve),O.call(this,"fill",!0),this.path=Tt}var Et=S([JSON.parse(JSON.stringify(be))],this.posX+this.margin[3],-qt+Ve+this.ctx.prevPageLastElemOffset)[0];L.scale>=.01&&(Se=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Se*L.scale),Ue=this.lineWidth,this.lineWidth=Ue*L.scale);var kt=this.autoPaging!=="text";if(kt||Et.y+Et.h<=ct){if(kt||Et.y>=Ve&&Et.x<=ot){var St=kt?L.text:this.pdf.splitTextToSize(L.text,L.maxWidth||ot-Et.x)[0],gr=S([JSON.parse(JSON.stringify(We))],this.posX+this.margin[3],-qt+Ve+this.ctx.prevPageLastElemOffset)[0],Rr=kt&&(st>Be||st<ye)&&w.call(this);Rr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ct,Kt,null).clip().discardPath()),this.pdf.text(St,gr.x,gr.y,{angle:L.angle,align:z,renderingMode:L.renderingMode}),Rr&&this.pdf.restoreGraphicsState()}}else Et.y<ct&&(this.ctx.prevPageLastElemOffset+=ct-Et.y);L.scale>=.01&&(this.pdf.setFontSize(Se),this.lineWidth=Ue)}else L.scale>=.01&&(Se=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Se*L.scale),Ue=this.lineWidth,this.lineWidth=Ue*L.scale),this.pdf.text(L.text,T.x+this.posX,T.y+this.posY,{angle:L.angle,align:z,renderingMode:L.renderingMode,maxWidth:L.maxWidth}),L.scale>=.01&&(this.pdf.setFontSize(Se),this.lineWidth=Ue)},re=function(L,z,V,W){V=V||0,W=W||0,this.pdf.internal.out(r(L+V)+" "+n(z+W)+" l")},ee=function(L,z,V){return this.pdf.lines(L,z,V,null,null)},H=function(L,z,V,W,Q,T,ie,ge){this.pdf.internal.out([e(a(V+L)),e(i(W+z)),e(a(Q+L)),e(i(T+z)),e(a(ie+L)),e(i(ge+z)),"c"].join(" "))},se=function(L,z,V,W){for(var Q=2*Math.PI,T=Math.PI/2;z>V;)z-=Q;var ie=Math.abs(V-z);ie<Q&&W&&(ie=Q-ie);for(var ge=[],we=W?-1:1,Se=z;ie>1e-5;){var Ue=Se+we*Math.min(ie,T);ge.push(ue.call(this,L,Se,Ue)),ie-=Math.abs(Ue-Se),Se=Ue}return ge},ue=function(L,z,V){var W=(V-z)/2,Q=L*Math.cos(W),T=L*Math.sin(W),ie=Q,ge=-T,we=ie*ie+ge*ge,Se=we+ie*Q+ge*T,Ue=4/3*(Math.sqrt(2*we*Se)-Se)/(ie*T-ge*Q),We=ie-Ue*ge,be=ge+Ue*ie,pe=We,at=-be,tt=W+z,Be=Math.cos(tt),ye=Math.sin(tt);return{x1:L*Math.cos(z),y1:L*Math.sin(z),x2:We*Be-be*ye,y2:We*ye+be*Be,x3:pe*Be-at*ye,y3:pe*ye+at*Be,x4:L*Math.cos(V),y4:L*Math.sin(V)}},G=function(L){return 180*L/Math.PI},J=function(L,z,V,W,Q,T){var ie=L+.5*(V-L),ge=z+.5*(W-z),we=Q+.5*(V-Q),Se=T+.5*(W-T),Ue=Math.min(L,Q,ie,we),We=Math.max(L,Q,ie,we),be=Math.min(z,T,ge,Se),pe=Math.max(z,T,ge,Se);return new l(Ue,be,We-Ue,pe-be)},oe=function(L,z,V,W,Q,T,ie,ge){var we,Se,Ue,We,be,pe,at,tt,Be,ye,st,Ve,vt,ct,Kt=V-L,ot=W-z,Ct=Q-V,qt=T-W,Tt=ie-Q,Et=ge-T;for(Se=0;Se<41;Se++)Be=(at=(Ue=L+(we=Se/40)*Kt)+we*((be=V+we*Ct)-Ue))+we*(be+we*(Q+we*Tt-be)-at),ye=(tt=(We=z+we*ot)+we*((pe=W+we*qt)-We))+we*(pe+we*(T+we*Et-pe)-tt),Se==0?(st=Be,Ve=ye,vt=Be,ct=ye):(st=Math.min(st,Be),Ve=Math.min(Ve,ye),vt=Math.max(vt,Be),ct=Math.max(ct,ye));return new l(Math.round(st),Math.round(Ve),Math.round(vt-st),Math.round(ct-Ve))},Y=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var L,z,V=(L=this.ctx.lineDash,z=this.ctx.lineDashOffset,JSON.stringify({lineDash:L,lineDashOffset:z}));this.prevLineDash!==V&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=V)}}})(tr.API),(function(t){var e=function(o){var l,c,u,h,m,x,p,y,w,j;for(c=[],u=0,h=(o+=l="\0\0\0\0".slice(o.length%4||4)).length;h>u;u+=4)(m=(o.charCodeAt(u)<<24)+(o.charCodeAt(u+1)<<16)+(o.charCodeAt(u+2)<<8)+o.charCodeAt(u+3))!==0?(x=(m=((m=((m=((m=(m-(j=m%85))/85)-(w=m%85))/85)-(y=m%85))/85)-(p=m%85))/85)%85,c.push(x+33,p+33,y+33,w+33,j+33)):c.push(122);return(function(C,S){for(var k=S;k>0;k--)C.pop()})(c,l.length),String.fromCharCode.apply(String,c)+"~>"},r=function(o){var l,c,u,h,m,x=String,p="length",y=255,w="charCodeAt",j="slice",C="replace";for(o[j](-2),o=o[j](0,-2)[C](/\s/g,"")[C]("z","!!!!!"),u=[],h=0,m=(o+=l="uuuuu"[j](o[p]%5||5))[p];m>h;h+=5)c=52200625*(o[w](h)-33)+614125*(o[w](h+1)-33)+7225*(o[w](h+2)-33)+85*(o[w](h+3)-33)+(o[w](h+4)-33),u.push(y&c>>24,y&c>>16,y&c>>8,y&c);return(function(S,k){for(var P=k;P>0;P--)S.pop()})(u,l[p]),x.fromCharCode.apply(x,u)},n=function(o){return o.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(o){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),l.test(o)===!1)return"";for(var c="",u=0;u<o.length;u+=2)c+=String.fromCharCode("0x"+(o[u]+o[u+1]));return c},i=function(o){for(var l=new Uint8Array(o.length),c=o.length;c--;)l[c]=o.charCodeAt(c);return(l=Ky(l)).reduce(function(u,h){return u+String.fromCharCode(h)},"")};t.processDataByFilters=function(o,l){var c=0,u=o||"",h=[];for(typeof(l=l||[])=="string"&&(l=[l]),c=0;c<l.length;c+=1)switch(l[c]){case"ASCII85Decode":case"/ASCII85Decode":u=r(u),h.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=e(u),h.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=a(u),h.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=n(u),h.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=i(u),h.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[c]+'" is not implemented')}return{data:u,reverseChain:h.reverse().join(" ")}}})(tr.API),(function(t){t.loadFile=function(e,r,n){return(function(a,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=(function(c,u,h){var m=new XMLHttpRequest,x=0,p=function(y){var w=y.length,j=[],C=String.fromCharCode;for(x=0;x<w;x+=1)j.push(C(255&y.charCodeAt(x)));return j.join("")};if(m.open("GET",c,!u),m.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(m.onload=function(){m.status===200?h(p(this.responseText)):h(void 0)}),m.send(null),u&&m.status===200)return p(m.responseText)})(a,i,o)}catch{}return l})(e,r,n)},t.loadImageFile=t.loadFile})(tr.API),(function(t){function e(){return(Er.html2canvas?Promise.resolve(Er.html2canvas):f0(()=>import("./html2canvas.esm-B0tyYwQk.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function r(){return(Er.DOMPurify?Promise.resolve(Er.DOMPurify):f0(()=>import("./purify.es-B6FQ9oRL.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var n=function(l){var c=Tn(l);return c==="undefined"?"undefined":c==="string"||l instanceof String?"string":c==="number"||l instanceof Number?"number":c==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":c==="object"?"object":"unknown"},a=function(l,c){var u=document.createElement(l);for(var h in c.className&&(u.className=c.className),c.innerHTML&&c.dompurify&&(u.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)u.style[h]=c.style[h];return u},i=function l(c,u){for(var h=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),m=c.firstChild;m;m=m.nextSibling)u!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||h.appendChild(l(m,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(h.width=c.width,h.height=c.height,h.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(h.value=c.value),h.addEventListener("load",function(){h.scrollTop=c.scrollTop,h.scrollLeft=c.scrollLeft},!0)),h},o=function l(c){var u=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),h=l.convert(Promise.resolve(),u);return(h=h.setProgress(1,l,1,[l])).set(c)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(l,c){return l.__proto__=c||o.prototype,l},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(l,c){return this.then(function(){switch(c=c||(function(u){switch(n(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(l),c){case"string":return this.then(r).then(function(u){return this.set({src:a("div",{innerHTML:l,dompurify:u})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},o.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=i(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,c(this.prop.container,u)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(e).then(function(c){var u=this.opt.jsPDF,h=this.opt.fontFaces,m=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,x=Object.assign({async:!0,allowTaint:!0,scale:m,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete x.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=h,h)for(var p=0;p<h.length;++p){var y=h[p],w=y.src.find(function(j){return j.format==="truetype"});w&&u.addFont(w.url,y.ref.name,y.ref.style)}return x.windowHeight=x.windowHeight||0,x.windowHeight=x.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):x.windowHeight,u.context2d.save(!0),c(this.prop.container,x)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(l,c,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(l,c):this.outputPdf(l,c)},o.prototype.outputPdf=function(l,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,c)})},o.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},o.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(l){if(n(l)!=="object")return this;var c=Object.keys(l||{}).map(function(u){if(u in o.template.prop)return function(){this.prop[u]=l[u]};switch(u){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[u]=l[u]}}},this);return this.then(function(){return this.thenList(c)})},o.prototype.get=function(l,c){return this.then(function(){var u=l in o.template.prop?this.prop[l]:this.opt[l];return c?c(u):u})},o.prototype.setMargin=function(l){return this.then(function(){switch(n(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},o.prototype.setPageSize=function(l){function c(u,h){return Math.floor(u*h/72*96)}return this.then(function(){(l=l||tr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:c(l.inner.width,l.k),height:c(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},o.prototype.setProgress=function(l,c,u,h){return l!=null&&(this.progress.val=l),c!=null&&(this.progress.state=c),u!=null&&(this.progress.n=u),h!=null&&(this.progress.stack=h),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(l,c,u,h){return this.setProgress(l?this.progress.val+l:null,c||null,u?this.progress.n+u:null,h?this.progress.stack.concat(h):null)},o.prototype.then=function(l,c){var u=this;return this.thenCore(l,c,function(h,m){return u.updateProgress(null,null,1,[h]),Promise.prototype.then.call(this,function(x){return u.updateProgress(null,h),x}).then(h,m).then(function(x){return u.updateProgress(1),x})})},o.prototype.thenCore=function(l,c,u){u=u||Promise.prototype.then;var h=this;l&&(l=l.bind(h)),c&&(c=c.bind(h));var m=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?h:o.convert(Object.assign({},h),Promise.prototype),x=u.call(m,l,c);return o.convert(x,h.__proto__)},o.prototype.thenExternal=function(l,c){return Promise.prototype.then.call(this,l,c)},o.prototype.thenList=function(l){var c=this;return l.forEach(function(u){c=c.thenCore(u)}),c},o.prototype.catch=function(l){l&&(l=l.bind(this));var c=Promise.prototype.catch.call(this,l);return o.convert(c,this)},o.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},o.prototype.error=function(l){return this.then(function(){throw new Error(l)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,tr.getPageSize=function(l,c,u){if(Tn(l)==="object"){var h=l;l=h.orientation,c=h.unit||c,u=h.format||u}c=c||"mm",u=u||"a4",l=(""+(l||"P")).toLowerCase();var m,x=(""+u).toLowerCase(),p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":m=1;break;case"mm":m=72/25.4;break;case"cm":m=72/2.54;break;case"in":m=72;break;case"px":m=.75;break;case"pc":case"em":m=12;break;case"ex":m=6;break;default:throw"Invalid unit: "+c}var y,w=0,j=0;if(p.hasOwnProperty(x))w=p[x][1]/m,j=p[x][0]/m;else try{w=u[1],j=u[0]}catch{throw new Error("Invalid format: "+u)}if(l==="p"||l==="portrait")l="p",j>w&&(y=j,j=w,w=y);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",w>j&&(y=j,j=w,w=y)}return{width:j,height:w,unit:c,k:m,orientation:l}},t.html=function(l,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(E2):null;var u=new o(c);return c.worker?u:u.from(l).doCallback()}})(tr.API),tr.API.addJS=function(t){return W3=t,this.internal.events.subscribe("postPutResources",function(){gx=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(gx+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),H3=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+W3+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){gx!==void 0&&H3!==void 0&&this.internal.out("/Names <</JavaScript "+gx+" 0 R>>")}),this},(function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),i=0;i<a.length;i++){var o=a[i],l=n.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,h=[];for(i=0;i<u;i++){var m=r.internal.newObject();h.push(m);var x=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+x.objId+" 0 R /XYZ null null null]>> endobj")}var p=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<h.length;i++)r.internal.write("(page_"+(i+1)+")"+h[i]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+p+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,i){var o={title:a,options:i,children:[]};return n==null&&(n=this.root),n.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var o=n.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var i=0;i<a.children.length;i++)n.count++,this.count_r(n,a.children[i]);return n.count}}])})(tr.API),(function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,a,i,o,l){var c,u=this.decode.DCT_DECODE,h=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,c=(function(m){for(var x,p=256*m.charCodeAt(4)+m.charCodeAt(5),y=m.length,w={width:0,height:0,numcomponents:1},j=4;j<y;j+=2){if(j+=p,e.indexOf(m.charCodeAt(j+1))!==-1){x=256*m.charCodeAt(j+5)+m.charCodeAt(j+6),w={width:256*m.charCodeAt(j+7)+m.charCodeAt(j+8),height:x,numcomponents:m.charCodeAt(j+9)};break}p=256*m.charCodeAt(j+2)+m.charCodeAt(j+3)}return w})(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),c.numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}h={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:u,index:n,alias:a}}return h}})(tr.API),tr.API.processPNG=function(t,e,r,n){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var a,i=dee(t,{checkCrc:!0}),o=i.width,l=i.height,c=i.channels,u=i.palette,h=i.depth;a=u&&c===1?(function(B){for(var U=B.width,K=B.height,M=B.data,q=B.palette,re=B.depth,ee=!1,H=[],se=[],ue=void 0,G=!1,J=0,oe=0;oe<q.length;oe++){var Y=X_(q[oe],4),L=Y[0],z=Y[1],V=Y[2],W=Y[3];H.push(L,z,V),W!=null&&(W===0?(J++,se.length<1&&se.push(oe)):W<255&&(G=!0))}if(G||J>1){ee=!0,se=void 0;var Q=U*K;ue=new Uint8Array(Q);for(var T=new DataView(M.buffer),ie=0;ie<Q;ie++){var ge=P2(T,ie,re),we=X_(q[ge],4)[3];ue[ie]=we}}else J===0&&(se=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:ee?8:void 0,colorBytes:M,alphaBytes:ue,needSMask:ee,palette:H,mask:se}})(i):c===2||c===4?(function(B){for(var U=B.data,K=B.width,M=B.height,q=B.channels,re=B.depth,ee=q===2?"DeviceGray":"DeviceRGB",H=q-1,se=K*M,ue=H,G=se*ue,J=1*se,oe=Math.ceil(G*re/8),Y=Math.ceil(J*re/8),L=new Uint8Array(oe),z=new Uint8Array(Y),V=new DataView(U.buffer),W=new DataView(L.buffer),Q=new DataView(z.buffer),T=!1,ie=0;ie<se;ie++){for(var ge=ie*q,we=0;we<ue;we++)tC(W,P2(V,ge+we,re),ie*ue+we,re);var Se=P2(V,ge+ue,re);Se<(1<<re)-1&&(T=!0),tC(Q,Se,1*ie,re)}return{colorSpace:ee,colorsPerPixel:H,sMaskBitsPerComponent:T?re:void 0,colorBytes:L,alphaBytes:z,needSMask:T}})(i):(function(B){var U=B.data,K=B.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:K,colorsPerPixel:K==="DeviceGray"?1:3,colorBytes:U instanceof Uint16Array?(function(M){for(var q=M.length,re=new Uint8Array(2*q),ee=new DataView(re.buffer,re.byteOffset,re.byteLength),H=0;H<q;H++)ee.setUint16(2*H,M[H],!1);return re})(U):U,needSMask:!1}})(i);var m,x,p,y=a,w=y.colorSpace,j=y.colorsPerPixel,C=y.sMaskBitsPerComponent,S=y.colorBytes,k=y.alphaBytes,P=y.needSMask,O=y.palette,$=y.mask,R=null;return n!==tr.API.image_compression.NONE&&typeof Ky=="function"?(R=(function(B){var U;switch(B){case tr.API.image_compression.FAST:U=11;break;case tr.API.image_compression.MEDIUM:U=13;break;case tr.API.image_compression.SLOW:U=14;break;default:U=12}return U})(n),m=this.decode.FLATE_DECODE,x="/Predictor ".concat(R," /Colors ").concat(j," /BitsPerComponent ").concat(h," /Columns ").concat(o),t=X3(S,Math.ceil(o*j*h/8),j,h,n),P&&(p=X3(k,Math.ceil(o*C/8),1,C,n))):(m=void 0,x=void 0,t=S,P&&(p=k)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(p&&this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),{alias:r,data:t,index:e,filter:m,decodeParameters:x,transparency:$,palette:O,sMask:p,predictor:R,width:o,height:l,bitsPerComponent:h,sMaskBitsPerComponent:C,colorSpace:w}}},(function(t){t.processGIF89A=function(e,r,n,a){var i=new Tee(e),o=i.width,l=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:o,height:l},h=new T2(100).encode(u,100);return t.processJPEG.call(this,h,r,n,a)},t.processGIF87A=t.processGIF89A})(tr.API),wl.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:a,green:n,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},wl.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){$n.log("bit decode error:"+r)}},wl.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,a=0;a<e;a++)for(var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var c=this.palette[i>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},wl.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<t;a++){var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*a*4,l=i>>4,c=15&i,u=this.palette[l];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*a+1>=this.width)break;u=this.palette[c],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},wl.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*n;if(a<this.palette.length){var o=this.palette[a];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}t!==0&&(this.pos+=4-t)}},wl.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&e)/e*255|0,l=(i>>5&e)/e*255|0,c=(i>>10&e)/e*255|0,u=i>>15?255:0,h=n*this.width*4+4*a;this.data[h]=c,this.data[h+1]=l,this.data[h+2]=o,this.data[h+3]=u}this.pos+=t}},wl.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&e)/e*255|0,c=(o>>5&r)/r*255|0,u=(o>>11)/e*255|0,h=a*this.width*4+4*i;this.data[h]=u,this.data[h+1]=c,this.data[h+2]=l,this.data[h+3]=255}this.pos+=t}},wl.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*r;this.data[o]=i,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},wl.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*r;this.data[l]=i,this.data[l+1]=a,this.data[l+2]=n,this.data[l+3]=o}},wl.prototype.getData=function(){return this.data},(function(t){t.processBMP=function(e,r,n,a){var i=new wl(e,!1),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},u=new T2(100).encode(c,100);return t.processJPEG.call(this,u,r,n,a)}})(tr.API),nC.prototype.getData=function(){return this.data},(function(t){t.processWEBP=function(e,r,n,a){var i=new nC(e),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},u=new T2(100).encode(c,100);return t.processJPEG.call(this,u,r,n,a)}})(tr.API),tr.API.processRGBA=function(t,e,r){for(var n=t.data,a=n.length,i=new Uint8Array(a/4*3),o=new Uint8Array(a/4),l=0,c=0,u=0;u<a;u+=4){var h=n[u],m=n[u+1],x=n[u+2],p=n[u+3];i[l++]=h,i[l++]=m,i[l++]=x,o[c++]=p}var y=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:y,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},tr.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},pf=tr.API,vx=pf.getCharWidthsArray=function(t,e){var r,n,a=(e=e||{}).font||this.internal.getFont(),i=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),l=e.widths?e.widths:a.metadata.Unicode.widths,c=l.fof?l.fof:1,u=e.kerning?e.kerning:a.metadata.Unicode.kerning,h=u.fof?u.fof:1,m=e.doKerning!==!1,x=0,p=t.length,y=0,w=l[0]||c,j=[];for(r=0;r<p;r++)n=t.charCodeAt(r),typeof a.metadata.widthOfString=="function"?j.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+o*(1e3/i)||0)/1e3):(x=m&&Tn(u[n])==="object"&&!isNaN(parseInt(u[n][y],10))?u[n][y]/h:0,j.push((l[n]||w)/c+x)),y=n;return j},G3=pf.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),a=e.charSpace||this.internal.getCharSpace();return pf.processArabic&&(t=pf.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,a)/r:vx.apply(this,arguments).reduce(function(i,o){return i+o},0)},K3=function(t,e,r,n){for(var a=[],i=0,o=t.length,l=0;i!==o&&l+e[i]<r;)l+=e[i],i++;a.push(t.slice(0,i));var c=i;for(l=0;i!==o;)l+e[i]>n&&(a.push(t.slice(c,i)),l=0,c=i),l+=e[i],i++;return c!==i&&a.push(t.slice(c,i)),a},Y3=function(t,e,r){r||(r={});var n,a,i,o,l,c,u,h=[],m=[h],x=r.textIndent||0,p=0,y=0,w=t.split(" "),j=vx.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?w[0].length+2:r.lineIndent||0){var C=Array(c).join(" "),S=[];w.map(function(P){(P=P.split(/\s*\n/)).length>1?S=S.concat(P.map(function(O,$){return($&&O.length?`
`:"")+O})):S.push(P[0])}),w=S,c=G3.apply(this,[C,r])}for(i=0,o=w.length;i<o;i++){var k=0;if(n=w[i],c&&n[0]==`
`&&(n=n.substr(1),k=1),x+p+(y=(a=vx.apply(this,[n,r])).reduce(function(P,O){return P+O},0))>e||k){if(y>e){for(l=K3.apply(this,[n,a,e-(x+p),e]),h.push(l.shift()),h=[l.pop()];l.length;)m.push([l.shift()]);y=a.slice(n.length-(h[0]?h[0].length:0)).reduce(function(P,O){return P+O},0)}else h=[n];m.push(h),x=y+c,p=j}else h.push(n),x+=p+y,p=j}return u=c?function(P,O){return(O?C:"")+P.join(" ")}:function(P){return P.join(" ")},m.map(u)},pf.splitTextToSize=function(t,e,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),i=function(h){if(h.widths&&h.kerning)return{widths:h.widths,kerning:h.kerning};var m=this.internal.getFont(h.fontName,h.fontStyle),x="Unicode";return m.metadata[x]?{widths:m.metadata[x].widths||{0:1},kerning:m.metadata[x].kerning||{}}:{font:m.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/a;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,i.lineIndent=r.lineIndent;var l,c,u=[];for(l=0,c=n.length;l<c;l++)u=u.concat(Y3.apply(this,[n[l],o,i]));return u},(function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",r="klmnopqrstuvwxyz",n={},a={},i=0;i<16;i++)n[r[i]]=e[i],a[e[i]]=r[i];var o=function(x){return"0x"+parseInt(x,10).toString(16)},l=t.__fontmetrics__.compress=function(x){var p,y,w,j,C=["{"];for(var S in x){if(p=x[S],isNaN(parseInt(S,10))?y="'"+S+"'":(S=parseInt(S,10),y=(y=o(S).slice(2)).slice(0,-1)+a[y.slice(-1)]),typeof p=="number")p<0?(w=o(p).slice(3),j="-"):(w=o(p).slice(2),j=""),w=j+w.slice(0,-1)+a[w.slice(-1)];else{if(Tn(p)!=="object")throw new Error("Don't know what to do with value type "+Tn(p)+".");w=l(p)}C.push(y+w)}return C.push("}"),C.join("")},c=t.__fontmetrics__.uncompress=function(x){if(typeof x!="string")throw new Error("Invalid argument passed to uncompress.");for(var p,y,w,j,C={},S=1,k=C,P=[],O="",$="",R=x.length-1,B=1;B<R;B+=1)(j=x[B])=="'"?p?(w=p.join(""),p=void 0):p=[]:p?p.push(j):j=="{"?(P.push([k,w]),k={},w=void 0):j=="}"?((y=P.pop())[0][y[1]]=k,w=void 0,k=y[0]):j=="-"?S=-1:w===void 0?n.hasOwnProperty(j)?(O+=n[j],w=parseInt(O,16)*S,S=1,O=""):O+=j:n.hasOwnProperty(j)?($+=n[j],k[w]=parseInt($,16)*S,S=1,w=void 0,$=""):$+=j;return C},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},h={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},m={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(x){var p=x.font,y=m.Unicode[p.postScriptName];y&&(p.metadata.Unicode={},p.metadata.Unicode.widths=y.widths,p.metadata.Unicode.kerning=y.kerning);var w=h.Unicode[p.postScriptName];w&&(p.metadata.Unicode.encoding=w,p.encoding=w.codePages[0])}])})(tr.API),(function(t){var e=function(r){for(var n=r.length,a=new Uint8Array(n),i=0;i<n;i++)a[i]=r.charCodeAt(i);return a};t.API.events.push(["addFont",function(r){var n=void 0,a=r.font,i=r.instance;if(!a.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=i.existsFileInVFS(a.postScriptName)===!1?i.loadFile(a.postScriptName):i.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?e(l):e(Ix(l)),o.metadata=t.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(a,n)}}])})(tr),tr.API.addSvgAsImage=function(t,e,r,n,a,i,o,l){if(isNaN(e)||isNaN(r))throw $n.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(a))throw $n.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=n,c.height=a;var u=c.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,c.width,c.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return(Er.canvg?Promise.resolve(Er.canvg):f0(()=>import("./index.es-DMndquZw.js"),[])).catch(function(x){return Promise.reject(new Error("Could not load canvg: "+x))}).then(function(x){return x.default?x.default:x}).then(function(x){return x.fromString(u,t,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(x){return x.render(h)}).then(function(){m.addImage(c.toDataURL("image/jpeg",1),e,r,n,a,o,l)})},tr.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(e,r);return this},tr.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,a,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],u=0,h=0,m=0;function x(y,w){var j,C=!1;for(j=0;j<y.length;j+=1)y[j]===w&&(C=!0);return C}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var p=l.length;for(m=0;m<p;m+=1)r[l[m]].value=r[l[m]].defaultValue,r[l[m]].explicitSet=!1}if(Tn(t)==="object"){for(a in t)if(i=t[a],x(l,a)&&i!==void 0){if(r[a].type==="boolean"&&typeof i=="boolean")r[a].value=i;else if(r[a].type==="name"&&x(r[a].valueSet,i))r[a].value=i;else if(r[a].type==="integer"&&Number.isInteger(i))r[a].value=i;else if(r[a].type==="array"){for(u=0;u<i.length;u+=1)if(n=!0,i[u].length===1&&typeof i[u][0]=="number")c.push(String(i[u]-1));else if(i[u].length>1){for(h=0;h<i[u].length;h+=1)typeof i[u][h]!="number"&&(n=!1);n===!0&&c.push([i[u][0]-1,i[u][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var y,w=[];for(y in r)r[y].explicitSet===!0&&(r[y].type==="name"?w.push("/"+y+" /"+r[y].value):w.push("/"+y+" "+r[y].value));w.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+w.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},(function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=i.length+o.length+l.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+i+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}})(tr.API),(function(t){var e=t.API,r=e.pdfEscape16=function(i,o){for(var l,c=o.metadata.Unicode.widths,u=["","0","00","000","0000"],h=[""],m=0,x=i.length;m<x;++m){if(l=o.metadata.characterToGlyph(i.charCodeAt(m)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=i.charCodeAt(m),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return h.join("");l=l.toString(16),h.push(u[4-l.length],l)}return h.join("")},n=function(i){var o,l,c,u,h,m,x;for(h=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],m=0,x=(l=Object.keys(i).sort(function(p,y){return p-y})).length;m<x;m++)o=l[m],c.length>=100&&(h+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(u=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+u+">"));return c.length&&(h+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),h+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,u=o.newObject,h=o.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="Identity-H"){for(var m=l.metadata.Unicode.widths,x=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),p="",y=0;y<x.length;y++)p+=String.fromCharCode(x[y]);var w=u();h({data:p,addLength1:!0,objectId:w}),c("endobj");var j=u();h({data:n(l.metadata.toUnicode),addLength1:!0,objectId:j}),c("endobj");var C=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+wf(l.fontName)),c("/FontFile2 "+w+" 0 R"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var S=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+wf(l.fontName)),c("/FontDescriptor "+C+" 0 R"),c("/W "+t.API.PDFObject.convert(m)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+j+" 0 R"),c("/BaseFont /"+wf(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+S+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]),e.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,u=o.newObject,h=o.putStream;if(l.metadata instanceof t.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var m=l.metadata.rawData,x="",p=0;p<m.length;p++)x+=String.fromCharCode(m[p]);var y=u();h({data:x,addLength1:!0,objectId:y}),c("endobj");var w=u();h({data:n(l.metadata.toUnicode),addLength1:!0,objectId:w}),c("endobj");var j=u();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+y+" 0 R"),c("/Flags 96"),c("/FontBBox "+t.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+wf(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=u();for(var C=0;C<l.metadata.hmtx.widths.length;C++)l.metadata.hmtx.widths[C]=parseInt(l.metadata.hmtx.widths[C]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+w+" 0 R/BaseFont/"+wf(l.fontName)+"/FontDescriptor "+j+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]);var a=function(i){var o,l=i.text||"",c=i.x,u=i.y,h=i.options||{},m=i.mutex||{},x=m.pdfEscape,p=m.activeFontKey,y=m.fonts,w=p,j="",C=0,S="",k=y[w].encoding;if(y[w].encoding!=="Identity-H")return{text:l,x:c,y:u,options:h,mutex:m};for(S=l,w=p,Array.isArray(l)&&(S=l[0]),C=0;C<S.length;C+=1)y[w].metadata.hasOwnProperty("cmap")&&(o=y[w].metadata.cmap.unicode.codeMap[S[C].charCodeAt(0)]),o||S[C].charCodeAt(0)<256&&y[w].metadata.hasOwnProperty("Unicode")?j+=S[C]:j+="";var P="";return parseInt(w.slice(1))<14||k==="WinAnsiEncoding"?P=x(j,w).split("").map(function(O){return O.charCodeAt(0).toString(16)}).join(""):k==="Identity-H"&&(P=r(j,y[w])),m.isHex=!0,{text:P,x:c,y:u,options:h,mutex:m}};e.events.push(["postProcessText",function(i){var o=i.text||"",l=[],c={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?l.push([a(Object.assign({},c,{text:o[u][0]})).text,o[u][1],o[u][2]]):l.push(a(Object.assign({},c,{text:o[u]})).text);i.text=l}else i.text=a(Object.assign({},c,{text:o})).text}])})(tr),(function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}})(tr.API),(function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var a,i,o,l,c,u,h,m=e,x=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],y={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},w={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},j=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],C=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),S=!1,k=0;this.__bidiEngine__={};var P=function(M){var q=M.charCodeAt(),re=q>>8,ee=w[re];return ee!==void 0?m[256*ee+(255&q)]:re===252||re===253?"AL":C.test(re)?"L":re===8?"R":"N"},O=function(M){for(var q,re=0;re<M.length;re++){if((q=P(M.charAt(re)))==="L")return!1;if(q==="R")return!0}return!1},$=function(M,q,re,ee){var H,se,ue,G,J=q[ee];switch(J){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":S=!1;break;case"N":case"AN":break;case"EN":S&&(J="AN");break;case"AL":S=!0,J="R";break;case"WS":case"BN":J="N";break;case"CS":ee<1||ee+1>=q.length||(H=re[ee-1])!=="EN"&&H!=="AN"||(se=q[ee+1])!=="EN"&&se!=="AN"?J="N":S&&(se="AN"),J=se===H?se:"N";break;case"ES":J=(H=ee>0?re[ee-1]:"B")==="EN"&&ee+1<q.length&&q[ee+1]==="EN"?"EN":"N";break;case"ET":if(ee>0&&re[ee-1]==="EN"){J="EN";break}if(S){J="N";break}for(ue=ee+1,G=q.length;ue<G&&q[ue]==="ET";)ue++;J=ue<G&&q[ue]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(G=q.length,ue=ee+1;ue<G&&q[ue]==="NSM";)ue++;if(ue<G){var oe=M[ee],Y=oe>=1425&&oe<=2303||oe===64286;if(H=q[ue],Y&&(H==="R"||H==="AL")){J="R";break}}}J=ee<1||(H=q[ee-1])==="B"?"N":re[ee-1];break;case"B":S=!1,a=!0,J=k;break;case"S":i=!0,J="N"}return J},R=function(M,q,re){var ee=M.split("");return re&&B(ee,re,{hiLevel:k}),ee.reverse(),q&&q.reverse(),ee.join("")},B=function(M,q,re){var ee,H,se,ue,G,J=-1,oe=M.length,Y=0,L=[],z=k?p:x,V=[];for(S=!1,a=!1,i=!1,H=0;H<oe;H++)V[H]=P(M[H]);for(se=0;se<oe;se++){if(G=Y,L[se]=$(M,V,L,se),ee=240&(Y=z[G][y[L[se]]]),Y&=15,q[se]=ue=z[Y][5],ee>0)if(ee===16){for(H=J;H<se;H++)q[H]=1;J=-1}else J=-1;if(z[Y][6])J===-1&&(J=se);else if(J>-1){for(H=J;H<se;H++)q[H]=ue;J=-1}V[se]==="B"&&(q[se]=0),re.hiLevel|=ue}i&&(function(W,Q,T){for(var ie=0;ie<T;ie++)if(W[ie]==="S"){Q[ie]=k;for(var ge=ie-1;ge>=0&&W[ge]==="WS";ge--)Q[ge]=k}})(V,q,oe)},U=function(M,q,re,ee,H){if(!(H.hiLevel<M)){if(M===1&&k===1&&!a)return q.reverse(),void(re&&re.reverse());for(var se,ue,G,J,oe=q.length,Y=0;Y<oe;){if(ee[Y]>=M){for(G=Y+1;G<oe&&ee[G]>=M;)G++;for(J=Y,ue=G-1;J<ue;J++,ue--)se=q[J],q[J]=q[ue],q[ue]=se,re&&(se=re[J],re[J]=re[ue],re[ue]=se);Y=G}Y++}}},K=function(M,q,re){var ee=M.split(""),H={hiLevel:k};return re||(re=[]),B(ee,re,H),(function(se,ue,G){if(G.hiLevel!==0&&h)for(var J,oe=0;oe<se.length;oe++)ue[oe]===1&&(J=j.indexOf(se[oe]))>=0&&(se[oe]=j[J+1])})(ee,re,H),U(2,ee,q,re,H),U(1,ee,q,re,H),ee.join("")};return this.__bidiEngine__.doBidiReorder=function(M,q,re){if((function(H,se){if(se)for(var ue=0;ue<H.length;ue++)se[ue]=ue;l===void 0&&(l=O(H)),u===void 0&&(u=O(H))})(M,q),o||!c||u)if(o&&c&&l^u)k=l?1:0,M=R(M,q,re);else if(!o&&c&&u)k=l?1:0,M=K(M,q,re),M=R(M,q);else if(!o||l||c||u){if(o&&!c&&l^u)M=R(M,q),l?(k=0,M=K(M,q,re)):(k=1,M=K(M,q,re),M=R(M,q));else if(o&&l&&!c&&u)k=1,M=K(M,q,re),M=R(M,q);else if(!o&&!c&&l^u){var ee=h;l?(k=1,M=K(M,q,re),k=0,h=!1,M=K(M,q,re),h=ee):(k=0,M=K(M,q,re),M=R(M,q),k=1,h=!1,M=K(M,q,re),h=ee,M=R(M,q))}}else k=0,M=K(M,q,re);else k=l?1:0,M=K(M,q,re);return M},this.__bidiEngine__.setOptions=function(M){M&&(o=M.isInputVisual,c=M.isOutputVisual,l=M.isInputRtl,u=M.isOutputRtl,h=M.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var a=n.text;n.x,n.y;var i=n.options||{};n.mutex,i.lang;var o=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(a)==="[object Array]"){var l=0;for(o=[],l=0;l<a.length;l+=1)Object.prototype.toString.call(a[l])==="[object Array]"?o.push([r.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):o.push([r.doBidiReorder(a[l])]);n.text=o}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])})(tr),tr.API.TTFFont=(function(){function t(e){var r;if(this.rawData=e,r=this.contents=new hu(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new Wee(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new Iee(this.contents),this.head=new Oee(this),this.name=new Bee(this),this.cmap=new j7(this),this.toUnicode={},this.hhea=new Ree(this),this.maxp=new Uee(this),this.hmtx=new $ee(this),this.post=new Fee(this),this.os2=new Lee(this),this.loca=new Hee(this),this.glyf=new Vee(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,a,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var o,l,c,u;for(u=[],o=0,l=(c=this.bbox).length;o<l;o++)e=c[o],u.push(Math.round(e*this.scaleFactor));return u}.call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),32768&(r=a>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var a,i,o,l;for(o=0,i=0,l=(e=""+e).length;0<=l?i<l:i>l;i=0<=l?++i:--i)a=e.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return o*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t})();var Fl,hu=(function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,a;for(a=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(e.charCodeAt(r)));return a},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,a,i,o,l,c;return e=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^i)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*a+16777216*i+65536*o+256*l+c},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,a,i;for(i=[],n=0,a=e.length;n<a;n++)r=e[n],i.push(this.writeByte(r));return i},t})(),Iee=(function(){var t;function e(r){var n,a,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,i=this.tableCount;0<=i?a<i:a>i;a=0<=i?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,a,i,o,l,c,u,h,m,x,p,y,w;for(w in p=Object.keys(r).length,c=Math.log(2),m=16*Math.floor(Math.log(p)/c),o=Math.floor(m/c),h=16*p-m,(a=new hu).writeInt(this.scalarType),a.writeShort(p),a.writeShort(m),a.writeShort(o),a.writeShort(h),i=16*p,u=a.pos+i,l=null,y=[],r)for(x=r[w],a.writeString(w),a.writeInt(t(x)),a.writeInt(u),a.writeInt(x.length),y=y.concat(x),w==="head"&&(l=u),u+=x.length;u%4;)y.push(0),u++;return a.write(y),n=2981146554-t(a.data),a.pos=l+8,a.writeUInt32(n),a.data},t=function(r){var n,a,i,o;for(r=_7.call(r);r.length%4;)r.push(0);for(i=new hu(r),a=0,n=0,o=r.length;n<o;n=n+=4)a+=i.readUInt32();return 4294967295&a},e})(),Dee={}.hasOwnProperty,pc=function(t,e){for(var r in e)Dee.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Fl=(function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t})();var Oee=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return pc(t,Fl),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var r;return(r=new hu).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(e),r.writeShort(this.glyphDataFormat),r.data},t})(),sC=(function(){function t(e,r){var n,a,i,o,l,c,u,h,m,x,p,y,w,j,C,S,k;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),m=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(p=e.readUInt16(),x=p/2,e.pos+=6,i=(function(){var P,O;for(O=[],c=P=0;0<=x?P<x:P>x;c=0<=x?++P:--P)O.push(e.readUInt16());return O})(),e.pos+=2,w=(function(){var P,O;for(O=[],c=P=0;0<=x?P<x:P>x;c=0<=x?++P:--P)O.push(e.readUInt16());return O})(),u=(function(){var P,O;for(O=[],c=P=0;0<=x?P<x:P>x;c=0<=x?++P:--P)O.push(e.readUInt16());return O})(),h=(function(){var P,O;for(O=[],c=P=0;0<=x?P<x:P>x;c=0<=x?++P:--P)O.push(e.readUInt16());return O})(),a=(this.length-e.pos+this.offset)/2,l=(function(){var P,O;for(O=[],c=P=0;0<=a?P<a:P>a;c=0<=a?++P:--P)O.push(e.readUInt16());return O})(),c=C=0,k=i.length;C<k;c=++C)for(j=i[c],n=S=y=w[c];y<=j?S<=j:S>=j;n=y<=j?++S:--S)h[c]===0?o=n+u[c]:(o=l[h[c]/2+(n-y)-(x-c)]||0)!==0&&(o+=u[c]),this.codeMap[n]=65535&o}e.pos=m}return t.encode=function(e,r){var n,a,i,o,l,c,u,h,m,x,p,y,w,j,C,S,k,P,O,$,R,B,U,K,M,q,re,ee,H,se,ue,G,J,oe,Y,L,z,V,W,Q,T,ie,ge,we,Se,Ue;switch(ee=new hu,o=Object.keys(e).sort(function(We,be){return We-be}),r){case"macroman":for(w=0,j=(function(){var We=[];for(y=0;y<256;++y)We.push(0);return We})(),S={0:0},i={},H=0,J=o.length;H<J;H++)S[ge=e[a=o[H]]]==null&&(S[ge]=++w),i[a]={old:e[a],new:S[e[a]]},j[a]=S[e[a]];return ee.writeUInt16(1),ee.writeUInt16(0),ee.writeUInt32(12),ee.writeUInt16(0),ee.writeUInt16(262),ee.writeUInt16(0),ee.write(j),{charMap:i,subtable:ee.data,maxGlyphID:w+1};case"unicode":for(q=[],m=[],k=0,S={},n={},C=u=null,se=0,oe=o.length;se<oe;se++)S[O=e[a=o[se]]]==null&&(S[O]=++k),n[a]={old:O,new:S[O]},l=S[O]-a,C!=null&&l===u||(C&&m.push(C),q.push(a),u=l),C=a;for(C&&m.push(C),m.push(65535),q.push(65535),K=2*(U=q.length),B=2*Math.pow(Math.log(U)/Math.LN2,2),x=Math.log(B/2)/Math.LN2,R=2*U-B,c=[],$=[],p=[],y=ue=0,Y=q.length;ue<Y;y=++ue){if(M=q[y],h=m[y],M===65535){c.push(0),$.push(0);break}if(M-(re=n[M].new)>=32768)for(c.push(0),$.push(2*(p.length+U-y)),a=G=M;M<=h?G<=h:G>=h;a=M<=h?++G:--G)p.push(n[a].new);else c.push(re-M),$.push(0)}for(ee.writeUInt16(3),ee.writeUInt16(1),ee.writeUInt32(12),ee.writeUInt16(4),ee.writeUInt16(16+8*U+2*p.length),ee.writeUInt16(0),ee.writeUInt16(K),ee.writeUInt16(B),ee.writeUInt16(x),ee.writeUInt16(R),T=0,L=m.length;T<L;T++)a=m[T],ee.writeUInt16(a);for(ee.writeUInt16(0),ie=0,z=q.length;ie<z;ie++)a=q[ie],ee.writeUInt16(a);for(we=0,V=c.length;we<V;we++)l=c[we],ee.writeUInt16(l);for(Se=0,W=$.length;Se<W;Se++)P=$[Se],ee.writeUInt16(P);for(Ue=0,Q=p.length;Ue<Q;Ue++)w=p[Ue],ee.writeUInt16(w);return{charMap:n,subtable:ee.data,maxGlyphID:k+1}}},t})(),j7=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return pc(t,Fl),t.prototype.tag="cmap",t.prototype.parse=function(e){var r,n,a;for(e.pos=this.offset,this.version=e.readUInt16(),a=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=a?n<a:n>a;n=0<=a?++n:--n)r=new sC(e,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(e,r){var n,a;return r==null&&(r="macroman"),n=sC.encode(e,r),(a=new hu).writeUInt16(0),a.writeUInt16(1),n.table=a.data.concat(n.subtable),n},t})(),Ree=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return pc(t,Fl),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t})(),Lee=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return pc(t,Fl),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var r,n;for(n=[],r=0;r<10;++r)n.push(e.readByte());return n})(),this.charRange=(function(){var r,n;for(n=[],r=0;r<4;++r)n.push(e.readInt());return n})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(e.readInt());return n})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t})(),Fee=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return pc(t,Fl),t.prototype.tag="post",t.prototype.parse=function(e){var r,n,a;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(n=e.readUInt16(),this.glyphNameIndex=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],a=[];e.pos<this.offset+this.length;)r=e.readByte(),a.push(this.names.push(e.readString(r)));return a;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=function(){var o,l,c;for(c=[],i=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;i=0<=l?++o:--o)c.push(e.readUInt32());return c}.call(this)}},t})(),Mee=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Bee=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return pc(t,Fl),t.prototype.tag="name",t.prototype.parse=function(e){var r,n,a,i,o,l,c,u,h,m,x;for(e.pos=this.offset,e.readShort(),r=e.readShort(),l=e.readShort(),n=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+l+e.readShort()});for(c={},i=h=0,m=n.length;h<m;i=++h)a=n[i],e.pos=a.offset,u=e.readString(a.length),o=new Mee(u,a),c[x=a.nameID]==null&&(c[x]=[]),c[a.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},t})(),Uee=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return pc(t,Fl),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t})(),$ee=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return pc(t,Fl),t.prototype.tag="hmtx",t.prototype.parse=function(e){var r,n,a,i,o,l,c;for(e.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var u,h;for(h=[],r=u=0;0<=a?u<a:u>a;r=0<=a?++u:--u)h.push(e.readInt16());return h})(),this.widths=function(){var u,h,m,x;for(x=[],u=0,h=(m=this.metrics).length;u<h;u++)i=m[u],x.push(i.advance);return x}.call(this),n=this.widths[this.widths.length-1],c=[],r=o=0;0<=a?o<a:o>a;r=0<=a?++o:--o)c.push(this.widths.push(n));return c},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t})(),_7=[].slice,Vee=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return pc(t,Fl),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var r,n,a,i,o,l,c,u,h,m;return e in this.cache?this.cache[e]:(i=this.file.loca,r=this.file.contents,n=i.indexOf(e),(a=i.lengthOf(e))===0?this.cache[e]=null:(r.pos=this.offset+n,o=(l=new hu(r.read(a))).readShort(),u=l.readShort(),m=l.readShort(),c=l.readShort(),h=l.readShort(),this.cache[e]=o===-1?new qee(l,u,m,c,h):new zee(l,o,u,m,c,h),this.cache[e]))},t.prototype.encode=function(e,r,n){var a,i,o,l,c;for(o=[],i=[],l=0,c=r.length;l<c;l++)a=e[r[l]],i.push(o.length),a&&(o=o.concat(a.encode(n)));return i.push(o.length),{table:o,offsets:i}},t})(),zee=(function(){function t(e,r,n,a,i,o){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=i,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t})(),qee=(function(){function t(e,r,n,a,i){var o,l;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new hu(_7.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t})(),Hee=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return pc(t,Fl),t.prototype.tag="loca",t.prototype.parse=function(e){var r,n;return e.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?function(){var a,i;for(i=[],n=0,a=this.length;n<a;n+=2)i.push(2*e.readUInt16());return i}.call(this):function(){var a,i;for(i=[],n=0,a=this.length;n<a;n+=4)i.push(e.readUInt32());return i}.call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,r){for(var n=new Uint32Array(this.offsets.length),a=0,i=0,o=0;o<n.length;++o)if(n[o]=a,i<r.length&&r[i]==o){++i,n[o]=a;var l=this.offsets[o],c=this.offsets[o+1]-l;c>0&&(a+=c)}for(var u=new Array(4*n.length),h=0;h<n.length;++h)u[4*h+3]=255&n[h],u[4*h+2]=(65280&n[h])>>8,u[4*h+1]=(16711680&n[h])>>16,u[4*h]=(4278190080&n[h])>>24;return u},t})(),Wee=(function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,a,i;for(r in a=this.font.cmap.tables[0].codeMap,e={},i=this.subset)n=i[r],e[r]=a[n];return e},t.prototype.glyphsFor=function(e){var r,n,a,i,o,l,c;for(a={},o=0,l=e.length;o<l;o++)a[i=e[o]]=this.font.glyf.glyphFor(i);for(i in r=[],a)(n=a[i])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(i in c=this.glyphsFor(r))n=c[i],a[i]=n;return a},t.prototype.encode=function(e,r){var n,a,i,o,l,c,u,h,m,x,p,y,w,j,C;for(a in n=j7.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),p={0:0},C=n.charMap)p[(c=C[a]).old]=c.new;for(y in x=n.maxGlyphID,o)y in p||(p[y]=x++);return h=(function(S){var k,P;for(k in P={},S)P[S[k]]=k;return P})(p),m=Object.keys(h).sort(function(S,k){return S-k}),w=(function(){var S,k,P;for(P=[],S=0,k=m.length;S<k;S++)l=m[S],P.push(h[l]);return P})(),i=this.font.glyf.encode(o,w,p),u=this.font.loca.encode(i.offsets,w),j={cmap:this.font.cmap.raw(),glyf:i.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(j["OS/2"]=this.font.os2.raw()),this.font.directory.encode(j)},t})();tr.API.PDFObject=(function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,a,i,o;if(Array.isArray(r))return"["+(function(){var l,c,u;for(u=[],l=0,c=r.length;l<c;l++)n=r[l],u.push(e.convert(n));return u})().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r?.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in i=["<<"],r)o=r[a],i.push("/"+a+" "+e.convert(o));return i.push(">>"),i.join(`
`)}return""+r},e})();function Gee({navigation:t,route:e}){const{patientId:r,chartId:n,medications:a}=e.params,{user:i}=Ka(),o=e.params.patient||{},l=o.first_name||o.last_name?`${o.first_name||""} ${o.last_name||""}`.trim():o.name||"Unknown Patient",c=o.dob||o.date_of_birth||"",[u,h]=N.useState({pdf:!1,fax:!1,email:!1,print:!1}),[m,x]=N.useState(!1),[p,y]=N.useState(!1),[w,j]=N.useState(!1),[C,S]=N.useState(""),[k,P]=N.useState(""),[O,$]=N.useState(""),[R,B]=N.useState(""),[U,K]=N.useState({pdf:!1,fax:!1,email:!1,print:!1}),M=()=>{t.goBack()},q=()=>{t.navigate("ClinicianDashboard")},re=Q=>{h(T=>({...T,[Q]:!T[Q]}))},ee=()=>{u.fax&&x(!0)},H=()=>{u.email&&y(!0)},se=async()=>{const Q=new tr({unit:"pt",format:"letter"}),T=48,ie=Q.internal.pageSize.getWidth(),ge=Q.internal.pageSize.getHeight(),we=ie-T*2;let Se=T;const Ue=ye=>{Se+ye>ge-T&&(Q.addPage(),Se=T)};Q.setFillColor(9,102,204),Q.rect(0,0,ie,56,"F"),Q.setFont("helvetica","bold"),Q.setTextColor(255,255,255),Q.setFontSize(16),Q.text("Luminous Rehab - Patient Chart",T,36),Q.setTextColor(0,0,0),Se=72,Q.setFont("helvetica","bold"),Q.setFontSize(14),Q.text("Patient Information",T,Se),Se+=16,Q.setFont("helvetica","normal"),Q.setFontSize(12);const We=c?new Date(c).toLocaleDateString():"";Q.text(`Name: ${l}`,T,Se),Se+=16,Q.text(`DOB: ${We}`,T,Se),Se+=16,n&&(Q.text(`Chart ID: ${n}`,T,Se),Se+=16);const be=new Date().toLocaleString();Q.text(`Generated: ${be}`,T,Se),Se+=24,Q.setFont("helvetica","bold"),Q.setFontSize(13),Ue(24),Q.text("Medications",T,Se),Se+=12;const pe=[{key:"drug",label:"Drug",w:180},{key:"strength",label:"Strength",w:60},{key:"route",label:"Route",w:50},{key:"frequency",label:"Frequency",w:60},{key:"prescriber",label:"Prescriber",w:90},{key:"scanned",label:"Scanned",w:56},{key:"verified",label:"",w:20}];Ue(28),Q.setFillColor(241,245,249),Q.rect(T,Se,we,24,"F"),Q.setFont("helvetica","bold"),Q.setFontSize(11);let at=T;pe.forEach(ye=>{Q.text(ye.label,at+4,Se+16),at+=ye.w}),Se+=28,Q.setFont("helvetica","normal"),Q.setFontSize(10);const tt=14;return(Array.isArray(a)?a:[]).forEach(ye=>{const Ve=[String(ye.drugName||""),String(ye.strength||""),String(ye.route||""),String(ye.frequency||""),String(ye.prescriber||""),String(ye.scannedDate||""),typeof ye.isVerified=="boolean"?ye.isVerified?"Yes":"No":"Yes"].map((ot,Ct)=>Q.splitTextToSize(ot,pe[Ct].w-6)),vt=Math.max(...Ve.map(ot=>ot.length||1)),ct=Math.max(tt,vt*tt);Ue(ct+4),Q.setFillColor(252,252,253),Q.rect(T,Se-2,we,ct+4,"F");let Kt=T;Ve.forEach((ot,Ct)=>{const qt=Se+tt;ot.forEach((Tt,Et)=>{Q.text(Tt,Kt+3,qt+Et*tt-tt)}),Kt+=pe[Ct].w}),Se+=ct+6}),Q.output("blob")},ue=async()=>{if(!u.pdf)return;const Q=await se(),T=URL.createObjectURL(Q),ie=document.createElement("a");ie.href=T,ie.download=`chart-${n||"export"}.pdf`,ie.click(),URL.revokeObjectURL(T),K(ge=>({...ge,pdf:!0}))},G=async()=>{if(!u.print)return;const Q=await se(),T=URL.createObjectURL(Q),ie=document.createElement("iframe");ie.style.position="fixed",ie.style.right="0",ie.style.bottom="0",ie.style.width="0",ie.style.height="0",ie.style.border="0",ie.src=T,document.body.appendChild(ie);let ge=!1;ie.onload=()=>{try{ie.contentWindow?.focus(),ie.contentWindow?.print(),ge=!0}catch(we){console.error("Print failed",we)}finally{setTimeout(()=>{document.body.removeChild(ie),URL.revokeObjectURL(T)},1e3)}},setTimeout(()=>{if(!ge)try{window.open(T,"_blank")?.focus()}catch(we){console.error("Fallback print open failed",we)}},1800),K(we=>({...we,print:!0}))},J=async Q=>{if(!i?.tenant_id||!n)throw new Error("Missing tenant or chart");const T=`${i.tenant_id}/${n}/exports/chart-${Date.now()}.pdf`,{error:ie}=await Qe.storage.from("chart-documents").upload(T,Q,{contentType:"application/pdf"});if(ie)throw ie;const{data:ge}=Qe.storage.from("chart-documents").getPublicUrl(T);return ge.publicUrl},oe=async()=>{if(!C){alert("Please enter a fax number");return}try{const Q=await se(),T=await J(Q);alert(`Fax queued to ${C}. PDF: ${T}`),K(ie=>({...ie,fax:!0}))}catch(Q){console.error("Fax failed",Q),alert(Q.message||"Failed to prepare fax");return}finally{x(!1)}},Y=async()=>{if(!k){alert("Please enter an email address");return}try{const Q=await se(),T=await J(Q),ie=encodeURIComponent(`Patient Chart - ${l}`),ge=encodeURIComponent(`Please find the chart PDF here:
${T}${R?`

${R}`:""}`);window.location.href=`mailto:${encodeURIComponent(k)}?subject=${ie}&body=${ge}`,K(we=>({...we,email:!0}))}catch(Q){console.error("Email failed",Q),alert(Q.message||"Failed to prepare email");return}finally{y(!1)}},L=()=>{if(!(u.pdf||u.fax||u.email)){alert("Please select at least one delivery method");return}if(!((!u.pdf||U.pdf)&&(!u.fax||U.fax)&&(!u.email||U.email))){alert("Please complete all selected delivery methods before finalizing");return}j(!0)},z=async()=>{if(j(!1),!i?.id||!i?.tenant_id||!n){alert("Missing chart or user context");return}try{const Q={status:"pending_review",finalized_at:new Date().toISOString(),finalized_by:i.id},{error:T}=await Qe.from("charts").update(Q).eq("id",n);if(T){console.error("Error submitting chart for review:",T),alert(`Failed to submit chart: ${T.message||"Unknown error"}`);return}alert("Chart has been submitted for agency admin review"),t.navigate("ClinicianDashboard")}catch(Q){console.error("Unexpected error finalizing chart:",Q),alert("Unexpected error while finalizing chart")}},V=u.pdf||u.fax||u.email||u.print,W=(!u.pdf||U.pdf)&&(!u.fax||U.fax)&&(!u.email||U.email)&&(!u.print||U.print);return s.jsxs("div",{className:"h-screen flex flex-col bg-[#f8fafc]",children:[s.jsx("div",{className:"bg-gradient-to-r from-[#0966CC] to-[#0C4A6E] p-5 shadow-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("button",{onClick:M,className:"w-10 h-10 rounded-xl bg-white/15 hover:bg-white/25 flex items-center justify-center transition-colors","aria-label":"Back",children:s.jsx(ln,{className:"w-5 h-5 text-white"})}),s.jsx("h1",{className:"text-lg text-white",children:"Chart Delivery"}),s.jsxs(de,{onClick:q,variant:"ghost",size:"sm",className:"h-9 px-3 rounded-xl bg-white/10 hover:bg-white/20 text-white text-sm font-medium flex items-center gap-1",children:[s.jsx(ps,{className:"w-4 h-4"}),"Exit"]})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto pb-24",children:s.jsxs("div",{className:"max-w-2xl mx-auto p-6 space-y-6",children:[s.jsx("div",{className:"bg-white rounded-2xl border border-sky-200 p-5 shadow-sm",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-sky-100 flex items-center justify-center flex-shrink-0",children:s.jsx(Mn,{className:"w-5 h-5 text-sky-600"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-slate-900 mb-1",children:"Select Delivery Methods"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Choose one or more ways to deliver this chart. After delivery, the chart will be sent to your agency admin for approval."})]})]})}),s.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 p-5 shadow-sm",children:s.jsxs("div",{className:"flex items-center justify-between max-w-md mx-auto",children:[s.jsxs("div",{className:"flex flex-col items-center gap-2 flex-1",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-green-600 flex items-center justify-center shadow-sm",children:s.jsx("span",{className:"text-white font-semibold",children:""})}),s.jsx("span",{className:"text-xs text-slate-700 font-medium text-center",children:"Verify All"})]}),s.jsx(Xr,{className:"w-5 h-5 text-slate-300 flex-shrink-0 -mt-6"}),s.jsxs("div",{className:"flex flex-col items-center gap-2 flex-1",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-green-600 flex items-center justify-center shadow-sm",children:s.jsx("span",{className:"text-white font-semibold",children:""})}),s.jsx("span",{className:"text-xs text-slate-700 font-medium text-center",children:"Review"})]}),s.jsx(Xr,{className:"w-5 h-5 text-slate-300 flex-shrink-0 -mt-6"}),s.jsxs("div",{className:"flex flex-col items-center gap-2 flex-1",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-sky-600 flex items-center justify-center shadow-sm",children:s.jsx("span",{className:"text-white font-semibold",children:"3"})}),s.jsx("span",{className:"text-xs text-slate-700 font-medium text-center",children:"Delivery"})]}),s.jsx(Xr,{className:"w-5 h-5 text-slate-300 flex-shrink-0 -mt-6"}),s.jsxs("div",{className:"flex flex-col items-center gap-2 flex-1",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-200 flex items-center justify-center",children:s.jsx("span",{className:"text-slate-500 font-semibold",children:"4"})}),s.jsx("span",{className:"text-xs text-slate-500 text-center",children:"Admin Approval"})]})]})}),s.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wide mb-1",children:"Patient"}),s.jsx("p",{className:"text-slate-900 font-semibold",children:l}),s.jsxs("p",{className:"text-sm text-slate-600",children:["DOB: ",c]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wide mb-1",children:"Medications"}),s.jsxs("p",{className:"text-slate-900 font-semibold",children:[a?.length||0," Items"]}),s.jsx("p",{className:"text-sm text-slate-600",children:"All verified"})]})]})}),s.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[s.jsxs("div",{className:"p-5 border-b border-slate-200",children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-700 uppercase tracking-wide",children:"Delivery Methods"}),s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Select one or multiple delivery options"})]}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsx("div",{className:`border-2 rounded-xl p-5 transition-all ${u.print?"border-slate-500 bg-slate-50":"border-slate-200 bg-white"}`,children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx(bo,{id:"print",checked:u.print,onCheckedChange:()=>re("print"),className:"mt-1"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("label",{htmlFor:"print",className:"flex items-center gap-3 cursor-pointer",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-slate-100 flex items-center justify-center flex-shrink-0",children:s.jsx(vf,{className:"w-5 h-5 text-slate-700"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-slate-900 font-medium",children:"Print"}),s.jsx("p",{className:"text-sm text-slate-600 mt-0.5",children:"Open print dialog with chart PDF"})]}),U.print&&s.jsx(kr,{className:"w-5 h-5 text-green-600"})]}),u.print&&!U.print&&s.jsxs(de,{onClick:G,className:"mt-3 ml-14 bg-[#0966CC] hover:bg-[#0C4A6E] text-white",size:"sm","aria-label":"Open print dialog",children:[s.jsx(vf,{className:"w-4 h-4 mr-2"}),"Open Print Dialog"]})]})]})}),s.jsx("div",{className:`border-2 rounded-xl p-5 transition-all ${u.pdf?"border-sky-500 bg-sky-50":"border-slate-200 bg-white"}`,children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx(bo,{id:"pdf",checked:u.pdf,onCheckedChange:()=>re("pdf"),className:"mt-1"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("label",{htmlFor:"pdf",className:"flex items-center gap-3 cursor-pointer",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-sky-100 flex items-center justify-center flex-shrink-0",children:s.jsx(Ai,{className:"w-5 h-5 text-sky-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-slate-900 font-medium",children:"Save as PDF"}),s.jsx("p",{className:"text-sm text-slate-600 mt-0.5",children:"Download chart as PDF document"})]}),U.pdf&&s.jsx(kr,{className:"w-5 h-5 text-green-600"})]}),u.pdf&&!U.pdf&&s.jsxs(de,{onClick:ue,className:"mt-3 ml-14 bg-sky-600 hover:bg-sky-700 text-white",size:"sm",children:[s.jsx(Ai,{className:"w-4 h-4 mr-2"}),"Generate PDF"]})]})]})}),s.jsx("div",{className:`border-2 rounded-xl p-5 transition-all ${u.fax?"border-green-500 bg-green-50":"border-slate-200 bg-white"}`,children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx(bo,{id:"fax",checked:u.fax,onCheckedChange:()=>re("fax"),className:"mt-1"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("label",{htmlFor:"fax",className:"flex items-center gap-3 cursor-pointer",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-100 flex items-center justify-center flex-shrink-0",children:s.jsx(vf,{className:"w-5 h-5 text-green-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-slate-900 font-medium",children:"Send via Fax"}),s.jsx("p",{className:"text-sm text-slate-600 mt-0.5",children:"Fax chart to a recipient"})]}),U.fax&&s.jsx(kr,{className:"w-5 h-5 text-green-600"})]}),u.fax&&!U.fax&&s.jsxs(de,{onClick:ee,className:"mt-3 ml-14 bg-green-600 hover:bg-green-700 text-white",size:"sm",children:[s.jsx(vf,{className:"w-4 h-4 mr-2"}),"Configure Fax"]})]})]})}),s.jsx("div",{className:`border-2 rounded-xl p-5 transition-all ${u.email?"border-amber-500 bg-amber-50":"border-slate-200 bg-white"}`,children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx(bo,{id:"email",checked:u.email,onCheckedChange:()=>re("email"),className:"mt-1"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("label",{htmlFor:"email",className:"flex items-center gap-3 cursor-pointer",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-amber-100 flex items-center justify-center flex-shrink-0",children:s.jsx(Mn,{className:"w-5 h-5 text-amber-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-slate-900 font-medium",children:"Send via Email"}),s.jsx("p",{className:"text-sm text-slate-600 mt-0.5",children:"Email chart to a recipient"})]}),U.email&&s.jsx(kr,{className:"w-5 h-5 text-green-600"})]}),u.email&&!U.email&&s.jsxs(de,{onClick:H,className:"mt-3 ml-14 bg-amber-600 hover:bg-amber-700 text-white",size:"sm",children:[s.jsx(Mn,{className:"w-4 h-4 mr-2"}),"Configure Email"]})]})]})})]})]}),s.jsx("div",{className:"bg-sky-50 border border-sky-200 rounded-2xl p-5",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsx(Kn,{className:"w-5 h-5 text-sky-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-slate-900 font-medium mb-1",children:"Requires Admin Approval"}),s.jsx("p",{className:"text-sm text-slate-600",children:"After finalizing delivery, this chart will be sent to your agency admin for final approval. Make sure all information is correct and all selected delivery methods are completed."})]})]})})]})}),s.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-slate-200 shadow-lg z-50",children:s.jsx("div",{className:"max-w-2xl mx-auto px-6 py-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[s.jsxs(de,{onClick:M,variant:"outline",className:"flex-1 h-12 rounded-xl border-2 border-slate-300 hover:bg-slate-50 text-slate-700 font-medium",children:[s.jsx(ln,{className:"w-4 h-4 mr-2"}),"Back to Summary"]}),s.jsxs(de,{onClick:L,disabled:!V||!W,className:"flex-1 h-12 rounded-xl bg-green-600 hover:bg-green-700 text-white font-medium shadow-sm disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(kr,{className:"w-4 h-4 mr-2"}),"Submit for Approval"]})]})})}),s.jsx(ar,{open:m,onOpenChange:x,children:s.jsxs(sr,{className:"sm:max-w-[500px]",children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Send via Fax"}),s.jsx(lr,{children:"Enter the fax number to send this chart"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"faxNumber",children:"Fax Number *"}),s.jsx(Ze,{id:"faxNumber",type:"tel",placeholder:"(555) 123-4567",value:C,onChange:Q=>S(Q.target.value),className:"mt-2 h-12 rounded-xl border-2 border-[#e2e8f0] bg-[#f8fafc]"})]}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"faxNote",children:"Note (Optional)"}),s.jsx(Ze,{id:"faxNote",placeholder:"Add a note for the recipient",value:O,onChange:Q=>$(Q.target.value),className:"mt-2 h-12 rounded-xl border-2 border-[#e2e8f0] bg-[#f8fafc]"})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(de,{onClick:()=>x(!1),variant:"outline",className:"flex-1 h-12 rounded-xl",children:"Cancel"}),s.jsxs(de,{onClick:oe,className:"flex-1 h-12 rounded-xl bg-green-600 hover:bg-green-700 text-white",children:[s.jsx(vf,{className:"w-4 h-4 mr-2"}),"Send Fax"]})]})]})}),s.jsx(ar,{open:p,onOpenChange:y,children:s.jsxs(sr,{className:"sm:max-w-[500px]",children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Send via Email"}),s.jsx(lr,{children:"Enter the email address to send this chart"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"emailAddress",children:"Email Address *"}),s.jsx(Ze,{id:"emailAddress",type:"email",placeholder:"recipient@example.com",value:k,onChange:Q=>P(Q.target.value),className:"mt-2 h-12 rounded-xl border-2 border-[#e2e8f0] bg-[#f8fafc]"})]}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"emailSubject",children:"Subject"}),s.jsx(Ze,{id:"emailSubject",defaultValue:`Patient Chart - ${l}`,className:"mt-2 h-12 rounded-xl border-2 border-[#e2e8f0] bg-[#f8fafc]"})]}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"emailMessage",children:"Message (Optional)"}),s.jsx(Ze,{id:"emailMessage",placeholder:"Add a message",value:R,onChange:Q=>B(Q.target.value),className:"mt-2 h-12 rounded-xl border-2 border-[#e2e8f0] bg-[#f8fafc]"})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(de,{onClick:()=>y(!1),variant:"outline",className:"flex-1 h-12 rounded-xl",children:"Cancel"}),s.jsxs(de,{onClick:Y,className:"flex-1 h-12 rounded-xl bg-amber-600 hover:bg-amber-700 text-white",children:[s.jsx(Mn,{className:"w-4 h-4 mr-2"}),"Send Email"]})]})]})}),s.jsx(Yc,{open:w,onOpenChange:j,children:s.jsxs(Xc,{children:[s.jsxs(Zc,{children:[s.jsx(Qc,{children:"Finalize & Send for Approval"}),s.jsx(ed,{asChild:!0,children:s.jsxs("div",{children:[s.jsx("p",{children:"Are you sure you want to finalize this chart?"}),s.jsx("p",{className:"mt-4",children:s.jsx("strong",{className:"text-amber-700",children:" This chart will be sent for agency admin approval."})}),s.jsx("p",{className:"mt-4",children:"Delivery methods completed:"}),s.jsxs("ul",{className:"mt-2 space-y-1 list-disc list-inside",children:[U.pdf&&s.jsx("li",{children:"PDF saved"}),U.fax&&s.jsxs("li",{children:["Fax sent to ",C]}),U.email&&s.jsxs("li",{children:["Email sent to ",k]}),U.print&&s.jsx("li",{children:"Printed"})]})]})})]}),s.jsxs(Jc,{children:[s.jsx(rd,{className:"h-12 rounded-xl",children:"Cancel"}),s.jsxs(td,{onClick:z,className:"h-12 rounded-xl bg-green-600 hover:bg-green-700 text-white",children:[s.jsx(kr,{className:"w-4 h-4 mr-2"}),"Submit for Approval"]})]})]})})]})}function Kee({navigation:t}){const[e,r]=N.useState(!1),[n,a]=N.useState(""),[i,o]=N.useState(""),l={name:"Dr. Sarah Johnson",firstName:"Sarah",lastName:"Johnson",credentials:"RN, BSN",role:"Registered Nurse",pronouns:"she/her",email:"sarah.johnson@healthcare.com",phone:"(555) 123-4567",address:"123 Medical Plaza, Healthcare City, HC 12345",department:"Home Health Services",facility:"Memorial Healthcare Network",specialization:"Geriatric Medicine",certifications:["WOCN Certified","Geriatrics Specialist"],licenseNumber:"RN-123456",npiNumber:"1234567890",yearsOfPractice:8,joinDate:"January 15, 2024",accountCreated:"January 2025",lastUpdated:"Today at 2:03 PM",totalPatients:24,totalCharts:67,verificationRate:98},c=()=>{a(l.email),o(l.phone),r(!0)},u=()=>{Pe.success("Profile updated successfully"),r(!1)};return s.jsxs("div",{className:"h-full flex flex-col bg-[#f8fafc]",children:[s.jsxs("div",{className:"bg-gradient-to-r from-[#0966CC] to-[#0C4A6E] p-5",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("button",{onClick:()=>t.goBack(),className:"w-10 h-10 rounded-xl bg-white/15 hover:bg-white/25 flex items-center justify-center transition-colors",children:s.jsx(ln,{className:"w-5 h-5 text-white"})}),s.jsx("h1",{className:"text-lg text-white",children:"My Profile"}),s.jsx("div",{className:"w-10 h-10"})]}),s.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-5 border border-white/20",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Xs,{className:"w-20 h-20 border-4 border-white/30",children:s.jsxs(Zs,{className:"bg-white text-[#0966CC] text-2xl",children:[l.firstName[0],l.lastName[0]]})}),s.jsx("button",{className:"absolute bottom-0 right-0 w-7 h-7 rounded-full bg-white shadow-lg flex items-center justify-center hover:bg-slate-50 transition-colors",children:s.jsx(Ei,{className:"w-3.5 h-3.5 text-slate-600"})})]}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-xl text-white mb-0.5",children:[l.name,s.jsx("span",{className:"text-white/80 ml-2",children:l.credentials})]}),s.jsx("p",{className:"text-sm text-white/70 mb-2",children:l.pronouns})]}),s.jsxs(de,{onClick:c,size:"sm",className:"bg-white/20 hover:bg-white/30 text-white border border-white/30 shadow-none",children:[s.jsx(jh,{className:"w-3.5 h-3.5 mr-1.5"}),"Edit Profile"]})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:[s.jsx(gt,{className:"bg-white/90 text-[#0966CC] border-0 font-medium",children:l.role}),s.jsxs(gt,{className:"bg-emerald-500/90 text-white border-0 flex items-center gap-1",children:[s.jsx(s6,{className:"w-3 h-3"}),"Verified Clinician"]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("p",{className:"text-sm text-white/90 flex items-center gap-2",children:[s.jsx(Ga,{className:"w-3.5 h-3.5"}),l.department,"  ",l.facility]}),s.jsx("p",{className:"text-sm text-white/80",children:l.specialization})]})]})]})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-5 space-y-5",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{className:"bg-white rounded-2xl p-4 border border-[#e2e8f0] shadow-sm text-center",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#E0F2FE] flex items-center justify-center mb-2 mx-auto",children:s.jsx(Rs,{className:"w-5 h-5 text-[#0966CC]"})}),s.jsx("p",{className:"text-2xl text-[#0f172a] mb-1",children:l.totalPatients}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"Patients"})]}),s.jsxs("div",{className:"bg-white rounded-2xl p-4 border border-[#e2e8f0] shadow-sm text-center",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#DBEAFE] flex items-center justify-center mb-2 mx-auto",children:s.jsx(hr,{className:"w-5 h-5 text-[#0966CC]"})}),s.jsx("p",{className:"text-2xl text-[#0f172a] mb-1",children:l.totalCharts}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"Charts"})]}),s.jsx(hn,{children:s.jsxs(fn,{children:[s.jsx(mn,{asChild:!0,children:s.jsxs("div",{className:"bg-white rounded-2xl p-4 border border-[#e2e8f0] shadow-sm text-center cursor-help",children:[s.jsxs("div",{className:"w-10 h-10 rounded-xl bg-[#D1FAE5] flex items-center justify-center mb-2 mx-auto relative",children:[s.jsx(kr,{className:"w-5 h-5 text-[#10B981]"}),s.jsxs("svg",{className:"absolute inset-0 w-10 h-10 -rotate-90",children:[s.jsx("circle",{cx:"20",cy:"20",r:"18",fill:"none",stroke:"#D1FAE5",strokeWidth:"2"}),s.jsx("circle",{cx:"20",cy:"20",r:"18",fill:"none",stroke:"#10B981",strokeWidth:"2",strokeDasharray:`${l.verificationRate/100*113} 113`})]})]}),s.jsxs("p",{className:"text-2xl text-[#0f172a] mb-1",children:[l.verificationRate,"%"]}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"Accuracy"})]})}),s.jsx(pn,{side:"bottom",className:"max-w-xs",children:s.jsx("p",{className:"text-sm",children:"% of medication scans verified correctly on first attempt"})})]})})]}),s.jsx(qr,{className:"bg-slate-200"}),s.jsxs("div",{className:"bg-white rounded-2xl border border-[#e2e8f0] shadow-sm overflow-hidden",children:[s.jsx("div",{className:"p-4 border-b border-slate-100",children:s.jsx("h3",{className:"text-sm font-semibold text-slate-700",children:"Quick Actions"})}),s.jsxs("div",{className:"divide-y divide-slate-100",children:[s.jsxs("button",{onClick:()=>t.navigate("PatientChartList"),className:"w-full flex items-center justify-between p-4 hover:bg-slate-50 transition-colors text-left",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-sky-100 flex items-center justify-center",children:s.jsx(hr,{className:"w-5 h-5 text-sky-600"})}),s.jsx("span",{className:"text-sm text-slate-900",children:"View My Charts"})]}),s.jsx(Xr,{className:"w-4 h-4 text-slate-400"})]}),s.jsxs("button",{onClick:()=>t.navigate("PatientChartList"),className:"w-full flex items-center justify-between p-4 hover:bg-slate-50 transition-colors text-left",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-sky-100 flex items-center justify-center",children:s.jsx(Rs,{className:"w-5 h-5 text-sky-600"})}),s.jsx("span",{className:"text-sm text-slate-900",children:"View My Patients"})]}),s.jsx(Xr,{className:"w-4 h-4 text-slate-400"})]}),s.jsxs("button",{onClick:()=>t.navigate("ClinicianSettings"),className:"w-full flex items-center justify-between p-4 hover:bg-slate-50 transition-colors text-left",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-slate-100 flex items-center justify-center",children:s.jsx(au,{className:"w-5 h-5 text-slate-600"})}),s.jsx("span",{className:"text-sm text-slate-900",children:"Preferences"})]}),s.jsx(Xr,{className:"w-4 h-4 text-slate-400"})]}),s.jsxs("button",{onClick:()=>t.navigate("ClinicianSettings"),className:"w-full flex items-center justify-between p-4 hover:bg-slate-50 transition-colors text-left",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-slate-100 flex items-center justify-center",children:s.jsx(fs,{className:"w-5 h-5 text-slate-600"})}),s.jsx("span",{className:"text-sm text-slate-900",children:"Security Settings"})]}),s.jsx(Xr,{className:"w-4 h-4 text-slate-400"})]})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3 px-2",children:[s.jsx(Mn,{className:"w-4 h-4 text-[#0966CC]"}),s.jsx("h3",{className:"text-sm font-semibold text-[#0f172a]",children:"Contact Information"})]}),s.jsx("div",{className:"bg-white rounded-2xl p-5 border border-[#e2e8f0] shadow-sm",children:s.jsxs("div",{className:"space-y-4 pl-1",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#E0F2FE] flex items-center justify-center flex-shrink-0",children:s.jsx(Mn,{className:"w-4 h-4 text-[#0966CC]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs text-[#64748b] mb-1",children:"Email"}),s.jsx("p",{className:"text-sm text-[#0f172a]",children:l.email})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#E0F2FE] flex items-center justify-center flex-shrink-0",children:s.jsx(Yi,{className:"w-4 h-4 text-[#0966CC]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs text-[#64748b] mb-1",children:"Phone"}),s.jsx("p",{className:"text-sm text-[#0f172a]",children:l.phone})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#E0F2FE] flex items-center justify-center flex-shrink-0",children:s.jsx(Jo,{className:"w-4 h-4 text-[#0966CC]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs text-[#64748b] mb-1",children:"Address"}),s.jsx("p",{className:"text-sm text-[#0f172a]",children:l.address})]})]})]})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3 px-2",children:[s.jsx(Gi,{className:"w-4 h-4 text-[#10B981]"}),s.jsx("h3",{className:"text-sm font-semibold text-[#0f172a]",children:"Professional Information"})]}),s.jsx("div",{className:"bg-white rounded-2xl p-5 border border-[#e2e8f0] shadow-sm",children:s.jsxs("div",{className:"space-y-4 pl-1",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#D1FAE5] flex items-center justify-center flex-shrink-0",children:s.jsx(Gi,{className:"w-4 h-4 text-[#10B981]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs text-[#64748b] mb-1",children:"License Number"}),s.jsxs("p",{className:"text-sm text-[#0f172a] flex items-center gap-2",children:[l.licenseNumber,s.jsxs(gt,{className:"bg-emerald-100 text-emerald-700 border-emerald-200 text-xs py-0 px-1.5",children:[s.jsx(kr,{className:"w-3 h-3 mr-0.5"}),"Verified"]})]})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#D1FAE5] flex items-center justify-center flex-shrink-0",children:s.jsx(Gi,{className:"w-4 h-4 text-[#10B981]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs text-[#64748b] mb-1",children:"NPI Number"}),s.jsx("p",{className:"text-sm text-[#0f172a]",children:l.npiNumber})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#D1FAE5] flex items-center justify-center flex-shrink-0",children:s.jsx(mw,{className:"w-4 h-4 text-[#10B981]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs text-[#64748b] mb-1",children:"Specialization"}),s.jsx("p",{className:"text-sm text-[#0f172a]",children:l.specialization})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#D1FAE5] flex items-center justify-center flex-shrink-0",children:s.jsx(c6,{className:"w-4 h-4 text-[#10B981]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs text-[#64748b] mb-1",children:"Certifications"}),s.jsx("div",{className:"flex flex-wrap gap-1.5 mt-1",children:l.certifications.map((h,m)=>s.jsx(gt,{variant:"outline",className:"text-xs bg-emerald-50 text-emerald-700 border-emerald-200",children:h},m))})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#D1FAE5] flex items-center justify-center flex-shrink-0",children:s.jsx(Ws,{className:"w-4 h-4 text-[#10B981]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs text-[#64748b] mb-1",children:"Years of Practice"}),s.jsxs("p",{className:"text-sm text-[#0f172a]",children:[l.yearsOfPractice," years"]})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#D1FAE5] flex items-center justify-center flex-shrink-0",children:s.jsx(Zo,{className:"w-4 h-4 text-[#10B981]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs text-[#64748b] mb-1",children:"Joined"}),s.jsx("p",{className:"text-sm text-[#0f172a]",children:l.joinDate})]})]})]})})]}),s.jsx("div",{className:"bg-gradient-to-r from-slate-50 to-slate-100 rounded-2xl p-4 border border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-slate-600",children:[s.jsx(Gi,{className:"w-4 h-4 text-emerald-600"}),s.jsx("span",{className:"font-medium text-emerald-700",children:"HIPAA-Compliant"}),s.jsx("span",{className:"text-slate-400",children:""}),s.jsx("span",{children:"Encrypted"}),s.jsx("span",{className:"text-slate-400",children:""}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse"}),"Secure Session"]})]})}),s.jsx("div",{className:"px-2 pb-2",children:s.jsxs("div",{className:"text-xs text-slate-500 space-y-1",children:[s.jsxs("p",{children:["Account created: ",l.accountCreated]}),s.jsxs("p",{children:["Last updated: ",l.lastUpdated]})]})})]}),s.jsx(ar,{open:e,onOpenChange:r,children:s.jsxs(sr,{className:"sm:max-w-md",children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Edit Profile"}),s.jsx(lr,{children:"Update your contact information and preferences."})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"edit-email",children:"Email"}),s.jsx(Ze,{id:"edit-email",type:"email",value:n,onChange:h=>a(h.target.value),className:"h-11 rounded-xl"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"edit-phone",children:"Phone"}),s.jsx(Ze,{id:"edit-phone",type:"tel",value:i,onChange:h=>o(h.target.value),className:"h-11 rounded-xl"})]})]}),s.jsxs(_r,{children:[s.jsx(de,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),s.jsx(de,{onClick:u,className:"bg-sky-600 hover:bg-sky-700",children:"Save Changes"})]})]})})]})}function Yee({navigation:t}){const[e,r]=N.useState(!0),[n,a]=N.useState(!0),[i,o]=N.useState(!1),[l,c]=N.useState(!1),[u,h]=N.useState(!1),[m,x]=N.useState({currentPassword:"",newPassword:"",confirmPassword:""}),p={lastPasswordChange:"30 days ago",lastLogin:"Phoenix, AZ",lastLoginTime:"Today at 9:42 AM"},y=[{id:"1",device:"Chrome on Windows",location:"Phoenix, AZ",ip:"192.168.1.1",lastActive:"Active now",current:!0},{id:"2",device:"Safari on iPhone",location:"Phoenix, AZ",ip:"192.168.1.45",lastActive:"2 hours ago",current:!1},{id:"3",device:"Chrome on MacBook",location:"Scottsdale, AZ",ip:"10.0.0.23",lastActive:"Yesterday",current:!1}],w=()=>{if(!m.currentPassword||!m.newPassword||!m.confirmPassword){Pe.error("Please fill in all fields");return}if(m.newPassword!==m.confirmPassword){Pe.error("New passwords do not match");return}if(m.newPassword.length<8){Pe.error("Password must be at least 8 characters");return}Pe.success("Password changed successfully!"),o(!1),x({currentPassword:"",newPassword:"",confirmPassword:""})},j=S=>{a(S),S?c(!0):Pe.info("Two-factor authentication disabled")},C=S=>{Pe.success("Session revoked successfully")};return s.jsxs("div",{className:"h-full flex flex-col bg-[#f8fafc]",children:[s.jsx("div",{className:"bg-gradient-to-r from-[#0966CC] to-[#0C4A6E] p-5",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("button",{onClick:()=>t.goBack(),className:"w-10 h-10 rounded-xl bg-white/15 hover:bg-white/25 flex items-center justify-center transition-colors",children:s.jsx(ln,{className:"w-5 h-5 text-white"})}),s.jsx("h1",{className:"text-lg text-white",children:"Settings"}),s.jsx("div",{className:"w-10"})]})}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-5 space-y-5",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm text-[#64748b] mb-3 px-2",children:"ACCOUNT"}),s.jsx("div",{className:"bg-white rounded-2xl border border-[#e2e8f0] overflow-hidden",children:s.jsxs("button",{onClick:()=>t.navigate("ClinicianProfile"),className:"w-full flex items-center justify-between p-4 hover:bg-[#f8fafc] transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#E0F2FE] flex items-center justify-center",children:s.jsx(Bn,{className:"w-5 h-5 text-[#0966CC]"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"text-sm text-[#0f172a]",children:"Profile"}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"View your profile"})]})]}),s.jsx(Xr,{className:"w-5 h-5 text-[#cbd5e1]"})]})})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm text-[#64748b] mb-3 px-2",children:"QUICK ACTIONS"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsxs(de,{onClick:()=>t.navigate("ClinicianDashboard"),variant:"outline",className:"h-auto p-4 flex items-center justify-start gap-3 hover:border-[#0966CC] hover:bg-[#E0F2FE] transition-colors",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0",style:{backgroundColor:"#E0F2FE"},children:s.jsx(Rs,{className:"w-5 h-5",style:{color:"#0966CC"}})}),s.jsx("span",{className:"text-sm text-[#0f172a]",children:"My Patients"}),s.jsx(Xr,{className:"w-4 h-4 text-[#cbd5e1] ml-auto"})]}),s.jsxs(de,{onClick:()=>t.navigate("NewPatientChart"),variant:"outline",className:"h-auto p-4 flex items-center justify-start gap-3 hover:border-[#10B981] hover:bg-[#D1FAE5] transition-colors",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0",style:{backgroundColor:"#D1FAE5"},children:s.jsx(q9,{className:"w-5 h-5",style:{color:"#10B981"}})}),s.jsx("span",{className:"text-sm text-[#0f172a]",children:"Start New Chart"}),s.jsx(Xr,{className:"w-4 h-4 text-[#cbd5e1] ml-auto"})]}),s.jsxs(de,{onClick:()=>t.navigate("PatientChartList"),variant:"outline",className:"h-auto p-4 flex items-center justify-start gap-3 hover:border-[#F59E0B] hover:bg-[#FEF3C7] transition-colors",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0",style:{backgroundColor:"#FEF3C7"},children:s.jsx(hr,{className:"w-5 h-5",style:{color:"#F59E0B"}})}),s.jsx("span",{className:"text-sm text-[#0f172a]",children:"View All Charts"}),s.jsx(Xr,{className:"w-4 h-4 text-[#cbd5e1] ml-auto"})]}),s.jsxs(de,{onClick:()=>t.navigate("CaptureSourceSelection"),variant:"outline",className:"h-auto p-4 flex items-center justify-start gap-3 hover:border-[#8B5CF6] hover:bg-[#F3E8FF] transition-colors",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0",style:{backgroundColor:"#F3E8FF"},children:s.jsx(zD,{className:"w-5 h-5",style:{color:"#8B5CF6"}})}),s.jsx("span",{className:"text-sm text-[#0f172a]",children:"Scan Medications"}),s.jsx(Xr,{className:"w-4 h-4 text-[#cbd5e1] ml-auto"})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm text-[#64748b] mb-3 px-2",children:"SECURITY"}),s.jsx(er,{className:"p-5",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#DBEAFE] flex items-center justify-center flex-shrink-0",children:s.jsx(fs,{className:"w-5 h-5 text-[#0966CC]"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-[#0f172a] mb-1",children:"Password"}),s.jsxs("p",{className:"text-xs text-[#64748b]",children:["Last changed ",p.lastPasswordChange]})]})]}),s.jsx(de,{variant:"ghost",size:"sm",onClick:()=>o(!0),className:"text-[#0966CC] hover:text-[#075985] hover:bg-[#DBEAFE]",children:"Change"})]}),s.jsx(qr,{}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#D1FAE5] flex items-center justify-center flex-shrink-0",children:s.jsx(M0,{className:"w-5 h-5 text-[#10B981]"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("p",{className:"text-sm text-[#0f172a]",children:"Two-Factor Authentication"}),n&&s.jsx(gt,{variant:"outline",className:"border-[#10B981] text-[#10B981] text-xs h-5",children:" Enabled"})]}),s.jsx("p",{className:"text-xs text-[#64748b]",children:n?"Extra security for your account":"Add extra layer of security"})]})]}),s.jsx(Si,{checked:n,onCheckedChange:j,className:"data-[state=checked]:bg-[#10B981]"})]}),s.jsx(qr,{}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#FEF3C7] flex items-center justify-center flex-shrink-0",children:s.jsx(L0,{className:"w-5 h-5 text-[#F59E0B]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm text-[#0f172a] mb-1",children:"Last Login"}),s.jsxs("p",{className:"text-xs text-[#64748b]",children:[" ",p.lastLogin]}),s.jsxs("p",{className:"text-xs text-[#64748b]",children:[" ",p.lastLoginTime]})]})]}),s.jsx(qr,{}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#E0E7FF] flex items-center justify-center flex-shrink-0",children:s.jsx(cc,{className:"w-5 h-5 text-[#4F46E5]"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-[#0f172a] mb-1",children:"Active Sessions"}),s.jsxs("p",{className:"text-xs text-[#64748b]",children:[y.length," devices signed in"]})]})]}),s.jsx(de,{variant:"ghost",size:"sm",onClick:()=>h(!0),className:"text-[#4F46E5] hover:text-[#4338CA] hover:bg-[#E0E7FF]",children:"View"})]})]})})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm text-[#64748b] mb-3 px-2",children:"NOTIFICATIONS"}),s.jsxs("div",{className:"bg-white rounded-2xl border border-[#e2e8f0] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[#e2e8f0]",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#D1FAE5] flex items-center justify-center",children:s.jsx(Mn,{className:"w-5 h-5 text-[#10B981]"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-[#0f172a]",children:"Email Notifications"}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"Receive email updates"})]})]}),s.jsx(Si,{className:"data-[state=checked]:bg-[#10B981]",defaultChecked:!0})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[#e2e8f0]",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#FEF3C7] flex items-center justify-center",children:s.jsx(xh,{className:"w-5 h-5 text-[#F59E0B]"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-[#0f172a]",children:"Push Notifications"}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"Receive app notifications"})]})]}),s.jsx(Si,{checked:e,onCheckedChange:r,className:"data-[state=checked]:bg-[#10B981]"})]}),s.jsxs("div",{className:"flex items-center justify-between p-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#E0F2FE] flex items-center justify-center",children:s.jsx(hr,{className:"w-5 h-5 text-[#0966CC]"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-[#0f172a]",children:"Chart Alerts"}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"Updates on your charts"})]})]}),s.jsx(Si,{className:"data-[state=checked]:bg-[#10B981]",defaultChecked:!0})]})]})]})]}),s.jsx(ar,{open:i,onOpenChange:o,children:s.jsxs(sr,{children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Change Password"}),s.jsx(lr,{children:"Choose a strong password to keep your account secure"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"current-password",children:"Current Password"}),s.jsx(Ze,{id:"current-password",type:"password",value:m.currentPassword,onChange:S=>x({...m,currentPassword:S.target.value}),placeholder:"Enter current password",className:"h-11 rounded-xl"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"new-password",children:"New Password"}),s.jsx(Ze,{id:"new-password",type:"password",value:m.newPassword,onChange:S=>x({...m,newPassword:S.target.value}),placeholder:"Enter new password",className:"h-11 rounded-xl"}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"Must be at least 8 characters"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"confirm-password",children:"Confirm New Password"}),s.jsx(Ze,{id:"confirm-password",type:"password",value:m.confirmPassword,onChange:S=>x({...m,confirmPassword:S.target.value}),placeholder:"Confirm new password",className:"h-11 rounded-xl"})]})]}),s.jsxs(_r,{children:[s.jsx(de,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),s.jsx(de,{className:"bg-[#0966CC] hover:bg-[#075985]",onClick:w,children:"Update Password"})]})]})}),s.jsx(ar,{open:l,onOpenChange:c,children:s.jsxs(sr,{children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Enable Two-Factor Authentication"}),s.jsx(lr,{children:"Scan the QR code with your authenticator app"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsx("div",{className:"w-48 h-48 bg-slate-100 rounded-lg mx-auto flex items-center justify-center",children:s.jsx("p",{className:"text-sm text-slate-500",children:"QR Code Here"})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"verification-code",children:"Verification Code"}),s.jsx(Ze,{id:"verification-code",type:"text",placeholder:"Enter 6-digit code",className:"h-11 rounded-xl"})]})]}),s.jsxs(_r,{children:[s.jsx(de,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),s.jsx(de,{className:"bg-[#10B981] hover:bg-[#059669]",onClick:()=>{c(!1),Pe.success("Two-factor authentication enabled")},children:"Verify & Enable"})]})]})}),s.jsx(ar,{open:u,onOpenChange:h,children:s.jsxs(sr,{className:"max-w-2xl",children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Active Sessions"}),s.jsx(lr,{children:"Manage devices where you're currently signed in"})]}),s.jsx("div",{className:"space-y-3 py-4 max-h-96 overflow-y-auto",children:y.map(S=>s.jsx(er,{className:"p-4",children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#DBEAFE] flex items-center justify-center flex-shrink-0",children:s.jsx(cc,{className:"w-5 h-5 text-[#0966CC]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("p",{className:"text-sm font-medium text-[#0f172a]",children:S.device}),S.current&&s.jsx(gt,{variant:"outline",className:"border-[#10B981] text-[#10B981] text-xs h-5",children:"Current"})]}),s.jsxs("p",{className:"text-xs text-[#64748b]",children:[" ",S.location]}),s.jsxs("p",{className:"text-xs text-[#64748b]",children:["IP: ",S.ip]}),s.jsx("p",{className:"text-xs text-[#64748b]",children:S.lastActive})]})]}),!S.current&&s.jsx(de,{variant:"ghost",size:"sm",onClick:()=>C(S.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:"Revoke"})]})},S.id))}),s.jsxs(_r,{children:[s.jsx(de,{variant:"outline",onClick:()=>h(!1),children:"Close"}),s.jsxs(de,{variant:"destructive",onClick:()=>{Pe.success("All other sessions revoked"),h(!1)},children:[s.jsx(go,{className:"w-4 h-4 mr-2"}),"Revoke All Others"]})]})]})})]})}function Xee({clinicianId:t,onBack:e,navigation:r}){const[n,a]=N.useState("patients"),[i,o]=N.useState(!0),[l,c]=N.useState(null),[u,h]=N.useState([]),[m,x]=N.useState([]),[p,y]=N.useState({patient_count:0,chart_count:0,pending_count:0,verified_count:0,active_patient_count:0});N.useEffect(()=>{w()},[t]);const w=async()=>{try{o(!0);const O=await OR(t);c(O.clinician),h(O.patients),x(O.charts),y(O.stats)}catch(O){console.error("Error loading clinician details:",O),Pe.error("Failed to load clinician details")}finally{o(!1)}},j=O=>[O.address_line1,O.address_line2,O.city,O.state,O.zip_code].filter(Boolean).join(", ")||"No address on file",C=O=>{switch(O.toLowerCase()){case"verified":return"bg-[#D1FAE5] text-[#10B981] border-[#A7F3D0]";case"pending_review":case"pending review":return"bg-[#FEF3C7] text-[#F59E0B] border-[#FDE68A]";case"active":return"bg-[#DBEAFE] text-[#0966CC] border-[#BFDBFE]";default:return"bg-gray-100 text-gray-600 border-gray-200"}},S=O=>O.split("_").map($=>$.charAt(0).toUpperCase()+$.slice(1)).join(" ");if(i)return s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Pl,{className:"w-8 h-8 animate-spin text-[#10B981] mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-[#64748b]",children:"Loading clinician details..."})]})});if(!l)return s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Kn,{className:"w-12 h-12 text-red-500 mx-auto mb-3"}),s.jsx("p",{className:"text-lg text-[#0f172a]",children:"Clinician not found"}),s.jsx(de,{onClick:e,className:"mt-4",children:"Go Back"})]});const k=`${l.first_name} ${l.last_name}`,P=`${l.first_name[0]}${l.last_name[0]}`;return s.jsxs("div",{className:"space-y-6 pb-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(de,{variant:"outline",size:"icon",onClick:e,className:"rounded-xl border-2 border-[#e2e8f0] hover:bg-[#D1FAE5] hover:border-[#10B981]",children:s.jsx(ln,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl text-[#0f172a] font-semibold",children:"Clinician Profile"}),s.jsx("p",{className:"text-sm text-[#64748b]",children:"View details and assigned patients"})]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-[#10B981] to-[#059669] rounded-2xl p-6 text-white shadow-lg",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(Xs,{className:"w-20 h-20 border-4 border-white/30",children:s.jsx(Zs,{className:"bg-white text-[#10B981] text-xl font-semibold",children:P})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-semibold mb-2",children:k}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-white/90",children:[s.jsx(Mn,{className:"w-4 h-4"}),s.jsx("span",{children:l.email})]}),l.phone_number&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-white/90",children:[s.jsx(Yi,{className:"w-4 h-4"}),s.jsx("span",{children:l.phone_number})]})]})]})]}),s.jsx(gt,{className:"bg-white/20 text-white border-0",children:"Active"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-6 pt-6 border-t border-white/20",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-white/70 mb-1",children:"Patients"}),s.jsx("p",{className:"text-2xl font-semibold",children:p.patient_count})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-white/70 mb-1",children:"Total Charts"}),s.jsx("p",{className:"text-2xl font-semibold",children:p.chart_count})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-white/70 mb-1",children:"Pending Review"}),s.jsx("p",{className:"text-2xl font-semibold",children:p.pending_count})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs(er,{className:"p-5 border-l-4 border-l-[#10B981]",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("p",{className:"text-xs text-[#64748b]",children:"Active Patients"}),s.jsx(kr,{className:"w-5 h-5 text-[#10B981]"})]}),s.jsx("p",{className:"text-2xl text-[#0f172a] font-semibold",children:p.active_patient_count}),s.jsx("p",{className:"text-xs text-[#10B981] mt-1",children:"Currently assigned"})]}),s.jsxs(er,{className:"p-5 border-l-4 border-l-[#F59E0B]",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("p",{className:"text-xs text-[#64748b]",children:"Pending Charts"}),s.jsx(Ws,{className:"w-5 h-5 text-[#F59E0B]"})]}),s.jsx("p",{className:"text-2xl text-[#0f172a] font-semibold",children:p.pending_count}),s.jsx("p",{className:"text-xs text-[#64748b] mt-1",children:"Awaiting review"})]}),s.jsxs(er,{className:"p-5 border-l-4 border-l-[#0966CC]",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("p",{className:"text-xs text-[#64748b]",children:"Verified Charts"}),s.jsx(w0,{className:"w-5 h-5 text-[#0966CC]"})]}),s.jsx("p",{className:"text-2xl text-[#0f172a] font-semibold",children:p.verified_count}),s.jsx("p",{className:"text-xs text-[#10B981] mt-1",children:"Ready to deliver"})]})]}),s.jsxs("div",{className:"flex gap-2 border-b border-slate-200",children:[s.jsx("button",{onClick:()=>a("patients"),className:`px-4 py-2 font-medium text-sm border-b-2 transition-colors ${n==="patients"?"border-[#10B981] text-[#10B981]":"border-transparent text-[#64748b] hover:text-[#0f172a]"}`,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Rs,{className:"w-4 h-4"}),"Assigned Patients (",u.length,")"]})}),s.jsx("button",{onClick:()=>a("charts"),className:`px-4 py-2 font-medium text-sm border-b-2 transition-colors ${n==="charts"?"border-[#10B981] text-[#10B981]":"border-transparent text-[#64748b] hover:text-[#0f172a]"}`,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(hr,{className:"w-4 h-4"}),"Recent Charts (",m.length,")"]})})]}),n==="patients"?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-[#0f172a]",children:"Assigned Patients"}),s.jsxs(gt,{variant:"outline",className:"text-xs",children:[u.length," total"]})]}),u.map(O=>{const $=`${O.first_name} ${O.last_name}`,R=`${O.first_name[0]}${O.last_name[0]}`;return s.jsx(er,{className:"p-5 hover:shadow-lg transition-all cursor-pointer",children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx(Xs,{className:"w-12 h-12",children:s.jsx(Zs,{className:"bg-[#D1FAE5] text-[#10B981]",children:R})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg text-[#0f172a] font-medium",children:$}),s.jsx(gt,{variant:"outline",className:O.status==="active"?"border-[#10B981] text-[#10B981] text-xs":"border-[#64748b] text-[#64748b] text-xs",children:O.status==="active"?"Active":"Inactive"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm text-[#64748b]",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Zo,{className:"w-4 h-4"}),s.jsxs("span",{className:"text-xs",children:["DOB: ",new Date(O.date_of_birth).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]}),O.phone_number&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Yi,{className:"w-4 h-4"}),s.jsx("span",{className:"text-xs",children:O.phone_number})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(hr,{className:"w-4 h-4"}),s.jsxs("span",{className:"text-xs",children:[O.chart_count," chart",O.chart_count!==1?"s":""]})]}),O.last_chart_date&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ws,{className:"w-4 h-4"}),s.jsxs("span",{className:"text-xs",children:["Last: ",new Date(O.last_chart_date).toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]})]}),s.jsx("div",{className:"mt-3 pt-3 border-t border-slate-100",children:s.jsxs("p",{className:"text-xs text-[#64748b] flex items-center gap-1",children:[s.jsx(Jo,{className:"w-3 h-3"}),j(O)]})})]}),s.jsxs(de,{variant:"outline",size:"sm",onClick:()=>Pe.info("Patient detail view coming soon"),className:"border-[#10B981] text-[#10B981] hover:bg-[#D1FAE5]",children:[s.jsx(hs,{className:"w-4 h-4 mr-2"}),"View"]})]})},O.id)}),u.length===0&&s.jsxs("div",{className:"bg-white rounded-2xl border-2 border-dashed border-slate-200 p-12 text-center",children:[s.jsx(Rs,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),s.jsx("p",{className:"text-slate-600 mb-1",children:"No patients assigned"}),s.jsx("p",{className:"text-sm text-slate-400",children:"This clinician has no assigned patients yet"})]})]}):s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-[#0f172a]",children:"Recent Charts"}),s.jsxs(gt,{variant:"outline",className:"text-xs",children:[m.length," total"]})]}),m.map(O=>{const $=`${O.patients.first_name} ${O.patients.last_name}`;return s.jsx(er,{className:"p-5 hover:shadow-lg transition-all cursor-pointer",children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("h4",{className:"text-lg text-[#0f172a] font-medium",children:$}),s.jsxs(gt,{className:C(O.status),children:[O.status==="verified"&&s.jsx(kr,{className:"w-3 h-3 mr-1"}),(O.status==="pending_review"||O.status==="pending review")&&s.jsx(Ws,{className:"w-3 h-3 mr-1"}),O.status==="active"&&s.jsx(lc,{className:"w-3 h-3 mr-1"}),S(O.status)]})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-[#64748b]",children:[s.jsx("span",{children:O.chart_type||"Standard"}),s.jsx("span",{children:""}),s.jsxs("span",{children:[O.medication_count," medication",O.medication_count!==1?"s":""]}),s.jsx("span",{children:""}),s.jsxs("span",{children:["Created ",new Date(O.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]})]}),s.jsxs(de,{variant:"outline",size:"sm",onClick:()=>r.navigate("ChartDetailView",{chartId:O.id,patientName:$,mode:"review"}),className:"border-[#10B981] text-[#10B981] hover:bg-[#D1FAE5]",children:[s.jsx(hs,{className:"w-4 h-4 mr-2"}),"Review"]})]})},O.id)}),m.length===0&&s.jsxs("div",{className:"bg-white rounded-2xl border-2 border-dashed border-slate-200 p-12 text-center",children:[s.jsx(hr,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),s.jsx("p",{className:"text-slate-600 mb-1",children:"No charts found"}),s.jsx("p",{className:"text-sm text-slate-400",children:"This clinician hasn't created any charts yet"})]})]})]})}async function Zee(t){const{data:e,error:r}=await Qe.from("patients").select("*").eq("tenant_id",t).order("created_at",{ascending:!1});if(r)throw r;return e}async function Jee(t,e=!1){let r=Qe.from("charts").select(`
      *,
      patient:patients!charts_patient_id_fkey (
        id,
        first_name,
        last_name,
        date_of_birth,
        address_line1,
        address_line2,
        city,
        state,
        zip_code,
        phone,
        email,
        assigned_clinician_id,
        assigned_clinician:users!patients_assigned_clinician_id_fkey (
          id,
          first_name,
          last_name,
          email
        )
      )
    `).eq("tenant_id",t);e||(r=r.neq("status","archived"));const{data:n,error:a}=await r.order("created_at",{ascending:!1});if(a)throw a;return await Promise.all((n||[]).map(async o=>{const[{count:l},{count:c}]=await Promise.all([Qe.from("medications").select("id",{count:"exact",head:!0}).eq("chart_id",o.id),Qe.from("documents").select("id",{count:"exact",head:!0}).eq("chart_id",o.id)]);return{...o,medication_count:l||0,document_count:c||0,assigned_clinician:o.patient?.assigned_clinician}}))}async function Qee(t){const{data:e,error:r}=await Qe.from("users").select("id, first_name, last_name, email, role, active").eq("tenant_id",t).eq("role","clinician").eq("active",!0).order("last_name",{ascending:!0});if(r)throw console.error("Error fetching clinicians:",r),r;return console.log("Fetched clinicians:",e),!e||e.length===0?(console.warn("No clinicians found for tenant:",t),[]):await Promise.all((e||[]).map(async a=>{const{count:i,error:o}=await Qe.from("patients").select("id",{count:"exact",head:!0}).eq("tenant_id",t).eq("assigned_clinician_id",a.id);return o&&console.error("Error counting charts for clinician:",a.id,o),{id:a.id,first_name:a.first_name,last_name:a.last_name,email:a.email,active_chart_count:i||0}}))}async function C7(t,e,r){const{data:n,error:a}=await Qe.from("patients").insert({...t,tenant_id:e,created_by:r}).select().single();if(a)throw a;return n}async function S7(t,e,r){const{data:n,error:a}=await Qe.from("charts").insert({...t,tenant_id:e,created_by:r,status:t.status||"needs_assignment"}).select(`
      *,
      patient:patients!charts_patient_id_fkey (
        id,
        first_name,
        last_name,
        date_of_birth,
        address_line1,
        address_line2,
        city,
        state,
        zip_code,
        phone,
        email
      )
    `).single();if(a)throw a;return n}async function ete(t,e,r){const n=await C7(t,e,r),a=await S7({patient_id:n.id,source:"empty_chart",status:"active"},e,r);return{patient:n,chart:a}}async function rw(t,e){const{data:r,error:n}=await Qe.from("charts").select("patient_id").eq("id",t).single();if(n)throw n;const{error:a}=await Qe.from("charts").update({awaiting_clinician_review:!0}).eq("id",t);if(a)throw a;const{data:i,error:o}=await Qe.from("patients").update({assigned_clinician_id:e}).eq("id",r.patient_id).select();if(o)throw o;if(!i||i.length===0)throw new Error("Failed to update patient assignment. Please check Row Level Security policies for the patients table.");const{data:l,error:c}=await Qe.from("charts").select(`
      *,
      patient:patients!charts_patient_id_fkey (
        id,
        first_name,
        last_name,
        date_of_birth,
        phone,
        email,
        address_line1,
        address_line2,
        city,
        state,
        zip_code,
        assigned_clinician_id,
        assigned_clinician:users!patients_assigned_clinician_id_fkey (
          id,
          first_name,
          last_name,
          email
        )
      )
    `).eq("id",t).single();if(c)throw c;return l}async function tte(t,e){return rw(t,e)}async function rte(t){const{count:e,error:r}=await Qe.from("patients").select("*",{count:"exact",head:!0}).eq("tenant_id",t);if(r)throw r;const{count:n,error:a}=await Qe.from("charts").select("*",{count:"exact",head:!0}).eq("tenant_id",t).neq("status","archived");if(a)throw a;const{count:i,error:o}=await Qe.from("charts").select("*",{count:"exact",head:!0}).eq("tenant_id",t).eq("awaiting_clinician_review",!1).eq("status","active");if(o)throw o;const{data:l,error:c}=await Qe.from("charts").select("id, documents(id)").eq("tenant_id",t).neq("status","archived").neq("status","delivered_locked");if(c)throw c;const u=(l||[]).filter(p=>p.documents&&p.documents.length>0).length,h=new Date;h.setHours(0,0,0,0);const{count:m,error:x}=await Qe.from("documents").select("*",{count:"exact",head:!0}).eq("tenant_id",t).gte("created_at",h.toISOString());if(x)throw x;return{totalPatients:e||0,totalCharts:n||0,unassignedCharts:i||0,chartsWithDocuments:u,newDocsToday:m||0}}function A7({}){const{user:t}=Ka(),[e,r]=N.useState(""),[n,a]=N.useState(!1),[i,o]=N.useState(!1),[l,c]=N.useState(null),[u,h]=N.useState(!1),[m,x]=N.useState(null),[p,y]=N.useState(""),[w,j]=N.useState(!1),[C,S]=N.useState(!1),[k,P]=N.useState(""),[O,$]=N.useState(!1),[R,B]=N.useState({id:"",firstName:"",lastName:"",dob:"",addressLine1:"",addressLine2:"",city:"",state:"",zipCode:"",phone:"",email:"",assignedClinician:""}),[U,K]=N.useState({firstName:"",lastName:"",dob:"",addressLine1:"",addressLine2:"",city:"",state:"",zipCode:"",phone:"",email:"",assignedClinician:""}),[M,q]=N.useState([]),[re,ee]=N.useState([]),[H,se]=N.useState(!0),ue=N.useCallback(async()=>{if(!t?.tenant_id){console.log("No tenant_id found");return}try{se(!0),console.log("Loading patients and users for tenant:",t.tenant_id);const[T,ie]=await Promise.all([DR(t.tenant_id),_w(t.tenant_id)]);console.log("Patients loaded:",T),console.log("Users loaded:",ie),q(T||[]),ee((ie||[]).filter(ge=>ge.role==="clinician"))}catch(T){console.error("Error loading data:",T),Pe.error(`Failed to load data: ${T instanceof Error?T.message:"Unknown error"}`),q([]),ee([])}finally{se(!1)}},[t?.tenant_id]);N.useEffect(()=>{ue()},[ue]);const G=(M||[]).map(T=>{const ge=[T.address_line1,T.address_line2,T.city,T.state,T.zip_code].filter(Boolean).join(", ")||"";return{id:T.id,name:`${T.first_name||""} ${T.last_name||""}`.trim()||"Unknown Patient",dob:T.date_of_birth||"",address:ge,phone:T.phone||"",email:T.email||"",chartCount:Array.isArray(T.charts)?T.charts.length:0,assignedClinician:T.assigned_clinician?`${T.assigned_clinician.first_name||""} ${T.assigned_clinician.last_name||""}`.trim():void 0,documents:Array.isArray(T.documents)?T.documents.map(we=>({id:we.id,name:we.file_name||"Unknown",type:we.file_type?.toUpperCase()||"FILE",uploadedDate:we.created_at,size:"N/A",file_url:we.file_url})):[]}}),J=G.filter(T=>T.name.toLowerCase().includes(e.toLowerCase())||T.phone.includes(e)),oe=async()=>{if(!U.firstName||!U.lastName||!U.dob){Pe.error("Please fill in required fields (First Name, Last Name, DOB)");return}if(!t?.tenant_id||!t?.id){Pe.error("User session not found");return}try{const T={first_name:U.firstName,last_name:U.lastName,date_of_birth:U.dob,address_line1:U.addressLine1||void 0,address_line2:U.addressLine2||void 0,city:U.city||void 0,state:U.state||void 0,zip_code:U.zipCode||void 0,phone:U.phone||void 0,email:U.email||void 0},ie=await C7(T,t.tenant_id,t.id);U.assignedClinician&&await Qe.from("patients").update({assigned_clinician_id:U.assignedClinician}).eq("id",ie.id),await S7({patient_id:ie.id,source:"empty_chart",status:"active"},t.tenant_id,t.id),Pe.success(`Patient "${U.firstName} ${U.lastName}" added successfully with an empty chart`),a(!1),K({firstName:"",lastName:"",dob:"",addressLine1:"",addressLine2:"",city:"",state:"",zipCode:"",phone:"",email:"",assignedClinician:""}),await ue()}catch(T){console.error("Error creating patient:",T),Pe.error(`Failed to add patient: ${T instanceof Error?T.message:"Unknown error"}`)}},Y=()=>{Pe.success("Document uploaded successfully"),o(!1),c(null)},L=T=>{if(T.documents.length===0){Pe.error("No documents available");return}z(T.documents[0])},z=async T=>{x(T),h(!0),j(!0);try{if(T.file_url){const ie=await Z1(T.file_url);y(ie)}else Pe.error("Document URL not available"),y("")}catch(ie){console.error("Error getting signed URL:",ie),y(T.file_url||"")}finally{j(!1)}},V=async()=>{if(!l||!k){Pe.error("Please select a clinician");return}try{const T=M.find(Se=>`${Se.first_name} ${Se.last_name}`.trim()===l.name);if(!T){Pe.error("Patient not found");return}const{error:ie}=await Qe.from("patients").update({assigned_clinician_id:k}).eq("id",T.id);if(ie)throw ie;const ge=re.find(Se=>Se.id===k),we=ge?`${ge.first_name} ${ge.last_name}`:"clinician";Pe.success(`Assigned ${l.name} to ${we}`),S(!1),c(null),P(""),await ue()}catch(T){console.error("Error assigning clinician:",T),Pe.error(`Failed to assign clinician: ${T instanceof Error?T.message:"Unknown error"}`)}},W=T=>{const ie=M.find(ge=>ge.id===T.id);if(!ie){console.error("Patient not found in raw data:",T),Pe.error("Patient not found");return}console.log("Editing patient:",ie),B({id:ie.id,firstName:ie.first_name||"",lastName:ie.last_name||"",dob:ie.date_of_birth||"",addressLine1:ie.address_line1||"",addressLine2:ie.address_line2||"",city:ie.city||"",state:ie.state||"",zipCode:ie.zip_code||"",phone:ie.phone||"",email:ie.email||"",assignedClinician:ie.assigned_clinician_id||""}),$(!0)},Q=async()=>{if(!R.firstName||!R.lastName||!R.dob){Pe.error("Please fill in required fields (First Name, Last Name, DOB)");return}try{const T={first_name:R.firstName,last_name:R.lastName,date_of_birth:R.dob,address_line1:R.addressLine1||null,address_line2:R.addressLine2||null,city:R.city||null,state:R.state||null,zip_code:R.zipCode||null,phone:R.phone||null,email:R.email||null,assigned_clinician_id:R.assignedClinician||null},{error:ie}=await Qe.from("patients").update(T).eq("id",R.id);if(ie)throw ie;Pe.success(`Patient "${R.firstName} ${R.lastName}" updated successfully`),$(!1),B({id:"",firstName:"",lastName:"",dob:"",addressLine1:"",addressLine2:"",city:"",state:"",zipCode:"",phone:"",email:"",assignedClinician:""}),await ue()}catch(T){console.error("Error updating patient:",T),Pe.error(`Failed to update patient: ${T instanceof Error?T.message:"Unknown error"}`)}};return s.jsxs("div",{className:"space-y-6 pb-24",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl text-[#0f172a]",children:"Patients"}),s.jsx("p",{className:"text-sm text-[#64748b]",children:"Manage patient records and assignments"})]}),s.jsxs(de,{onClick:()=>a(!0),className:"bg-[#10B981] hover:bg-[#059669] text-white",children:[s.jsx(Da,{className:"w-4 h-4 mr-2"}),"Add Patient"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx(er,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-[#64748b]",children:"Total Patients"}),s.jsx("p",{className:"text-2xl text-[#0f172a] mt-1",children:H?"...":G.length})]}),s.jsx(Rs,{className:"w-8 h-8 text-[#10B981]"})]})}),s.jsx(er,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-[#64748b]",children:"With Assigned Clinician"}),s.jsx("p",{className:"text-2xl text-[#0f172a] mt-1",children:H?"...":G.filter(T=>T.assignedClinician).length})]}),s.jsx(Bn,{className:"w-8 h-8 text-[#0966CC]"})]})}),s.jsx(er,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-[#64748b]",children:"With Documents"}),s.jsx("p",{className:"text-2xl text-[#0f172a] mt-1",children:H?"...":G.filter(T=>T.documents.length>0).length})]}),s.jsx(hr,{className:"w-8 h-8 text-[#F59E0B]"})]})})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Zi,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-[#94a3b8]"}),s.jsx(Ze,{placeholder:"Search patients by name or phone...",value:e,onChange:T=>r(T.target.value),className:"pl-12 h-12 rounded-xl border-2 border-[#e2e8f0] bg-white"})]}),J.length>0?s.jsx("div",{className:"space-y-3",children:J.map(T=>s.jsx(er,{className:"p-5 hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx(Xs,{className:"h-12 w-12 bg-gradient-to-br from-[#10B981] to-[#059669]",children:s.jsx(Zs,{className:"text-white",children:T.name.split(" ").map(ie=>ie[0]).join("")})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg text-[#0f172a]",children:T.name}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-1",children:[T.assignedClinician&&s.jsx(gt,{className:"bg-[#DBEAFE] text-[#0966CC] border-[#BFDBFE]",children:T.assignedClinician}),T.chartCount>0&&s.jsxs(gt,{variant:"outline",className:"border-[#10B981] text-[#10B981]",children:[T.chartCount," chart",T.chartCount!==1?"s":""]}),T.documents.length>0&&s.jsxs(gt,{variant:"outline",className:"border-[#F59E0B] text-[#F59E0B]",children:[s.jsx(F0,{className:"w-3 h-3 mr-1"}),T.documents.length," doc",T.documents.length!==1?"s":""]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-[#64748b]",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Zo,{className:"w-4 h-4"}),s.jsxs("span",{children:["DOB: ",new Date(T.dob).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Yi,{className:"w-4 h-4"}),s.jsx("span",{children:T.phone})]}),T.email&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Mn,{className:"w-4 h-4"}),s.jsx("span",{children:T.email})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Jo,{className:"w-4 h-4"}),s.jsx("span",{children:T.address})]})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[!T.assignedClinician&&s.jsxs(de,{variant:"outline",size:"sm",onClick:()=>{c(T),S(!0)},className:"border-[#0966CC] text-[#0966CC] hover:bg-[#DBEAFE]",children:[s.jsx(Bn,{className:"w-4 h-4 mr-2"}),"Assign Clinician"]}),s.jsxs(de,{variant:"outline",size:"sm",onClick:()=>{c(T),o(!0)},className:"border-[#F59E0B] text-[#F59E0B] hover:bg-[#FEF3C7]",children:[s.jsx(Ei,{className:"w-4 h-4 mr-2"}),"Upload Document"]}),T.documents.length>0&&s.jsxs(de,{variant:"outline",size:"sm",onClick:()=>L(T),className:"border-[#10B981] text-[#10B981] hover:bg-[#D1FAE5]",children:[s.jsx(hs,{className:"w-4 h-4 mr-2"}),"View Docs (",T.documents.length,")"]}),s.jsxs(de,{variant:"outline",size:"sm",onClick:()=>{try{W(T)}catch(ie){console.error("Error opening edit modal:",ie),Pe.error("Failed to open edit form")}},className:"border-[#64748b] text-[#64748b] hover:bg-[#f8fafc]",children:[s.jsx(jh,{className:"w-4 h-4 mr-2"}),"Edit"]})]})]})},T.id))}):s.jsxs(er,{className:"p-12 text-center",children:[s.jsx(Rs,{className:"w-12 h-12 text-[#cbd5e1] mx-auto mb-3"}),s.jsx("p",{className:"text-[#64748b]",children:e?"No patients found matching your search.":"No patients yet. Add a patient to get started."})]}),s.jsx(ar,{open:n,onOpenChange:a,children:s.jsxs(sr,{className:"max-w-2xl",children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Add New Patient"}),s.jsx(lr,{children:"Enter patient information and optionally assign to a clinician"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"patient-firstName",children:"First Name *"}),s.jsx(Ze,{id:"patient-firstName",value:U.firstName,onChange:T=>K({...U,firstName:T.target.value}),placeholder:"John",className:"h-11 rounded-xl"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"patient-lastName",children:"Last Name *"}),s.jsx(Ze,{id:"patient-lastName",value:U.lastName,onChange:T=>K({...U,lastName:T.target.value}),placeholder:"Doe",className:"h-11 rounded-xl"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"patient-dob",children:"Date of Birth *"}),s.jsx(Ze,{id:"patient-dob",type:"date",value:U.dob,onChange:T=>K({...U,dob:T.target.value}),className:"h-11 rounded-xl"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"patient-phone",children:"Phone Number"}),s.jsx(Ze,{id:"patient-phone",value:U.phone,onChange:T=>K({...U,phone:T.target.value}),placeholder:"555-1234",className:"h-11 rounded-xl"})]}),s.jsxs("div",{className:"space-y-2 md:col-span-2",children:[s.jsx(Fe,{htmlFor:"patient-email",children:"Email"}),s.jsx(Ze,{id:"patient-email",type:"email",value:U.email,onChange:T=>K({...U,email:T.target.value}),placeholder:"patient@email.com",className:"h-11 rounded-xl"})]}),s.jsxs("div",{className:"space-y-2 md:col-span-2",children:[s.jsx(Fe,{htmlFor:"patient-addressLine1",children:"Address Line 1"}),s.jsx(Ze,{id:"patient-addressLine1",value:U.addressLine1,onChange:T=>K({...U,addressLine1:T.target.value}),placeholder:"123 Main Street",className:"h-11 rounded-xl"})]}),s.jsxs("div",{className:"space-y-2 md:col-span-2",children:[s.jsx(Fe,{htmlFor:"patient-addressLine2",children:"Address Line 2"}),s.jsx(Ze,{id:"patient-addressLine2",value:U.addressLine2,onChange:T=>K({...U,addressLine2:T.target.value}),placeholder:"Apt 4B (optional)",className:"h-11 rounded-xl"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"patient-city",children:"City"}),s.jsx(Ze,{id:"patient-city",value:U.city,onChange:T=>K({...U,city:T.target.value}),placeholder:"Los Angeles",className:"h-11 rounded-xl"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"patient-state",children:"State"}),s.jsx(Ze,{id:"patient-state",value:U.state,onChange:T=>K({...U,state:T.target.value}),placeholder:"CA",className:"h-11 rounded-xl"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"patient-zipCode",children:"ZIP Code"}),s.jsx(Ze,{id:"patient-zipCode",value:U.zipCode,onChange:T=>K({...U,zipCode:T.target.value}),placeholder:"90210",className:"h-11 rounded-xl"})]}),s.jsxs("div",{className:"space-y-2 md:col-span-2",children:[s.jsx(Fe,{htmlFor:"assigned-clinician",children:"Assign to Clinician (Optional)"}),s.jsxs(oa,{value:U.assignedClinician,onValueChange:T=>K({...U,assignedClinician:T}),children:[s.jsx(ca,{className:"h-11 rounded-xl",children:s.jsx(la,{placeholder:"Select clinician"})}),s.jsx(da,{children:re.map(T=>s.jsxs(Bt,{value:T.id,children:[T.first_name," ",T.last_name," (",T.assigned_chart_count||0," charts)"]},T.id))})]})]})]}),s.jsxs(_r,{children:[s.jsx(de,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),s.jsxs(de,{className:"bg-[#10B981] hover:bg-[#059669]",onClick:oe,children:[s.jsx(kl,{className:"w-4 h-4 mr-2"}),"Add Patient"]})]})]})}),s.jsx(ar,{open:i,onOpenChange:o,children:s.jsxs(sr,{children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Upload Document"}),s.jsxs(lr,{children:["Upload a document for ",l?.name]})]}),s.jsx("div",{className:"space-y-4 py-4",children:s.jsxs("div",{className:"border-2 border-dashed border-[#e2e8f0] rounded-xl p-8 text-center hover:border-[#10B981] hover:bg-[#F0FDF4] transition-colors cursor-pointer",children:[s.jsx(Ei,{className:"w-12 h-12 text-[#94a3b8] mx-auto mb-3"}),s.jsx("p",{className:"text-sm text-[#64748b] mb-1",children:"Click to upload or drag and drop"}),s.jsx("p",{className:"text-xs text-[#94a3b8]",children:"PDF, PNG, JPG up to 10MB"})]})}),s.jsxs(_r,{children:[s.jsx(de,{variant:"outline",onClick:()=>{o(!1),c(null)},children:"Cancel"}),s.jsxs(de,{className:"bg-[#10B981] hover:bg-[#059669]",onClick:Y,children:[s.jsx(Ei,{className:"w-4 h-4 mr-2"}),"Upload"]})]})]})}),s.jsx(ar,{open:u,onOpenChange:h,children:s.jsxs(sr,{className:"max-w-4xl h-[80vh]",children:[s.jsxs(ir,{children:[s.jsx(or,{children:m?.name}),s.jsxs(lr,{children:[m?.type,"  Uploaded ",m?.uploadedDate?new Date(m.uploadedDate).toLocaleDateString():"N/A"]})]}),s.jsx("div",{className:"flex-1 overflow-auto",children:w?s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Pl,{className:"w-8 h-8 animate-spin text-[#10B981] mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-[#64748b]",children:"Loading document..."})]})}):p?m?.type?.toLowerCase().includes("pdf")?s.jsx("iframe",{src:p,className:"w-full h-full border-0 rounded-lg",title:m.name}):s.jsx("img",{src:p,alt:m?.name,className:"w-full h-auto rounded-lg"}):s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsx("p",{className:"text-sm text-[#64748b]",children:"Unable to load document"})})}),s.jsxs(_r,{children:[s.jsx(de,{variant:"outline",onClick:()=>h(!1),children:"Close"}),p&&s.jsxs(de,{onClick:()=>window.open(p,"_blank"),className:"bg-[#10B981] hover:bg-[#059669]",children:[s.jsx(hs,{className:"w-4 h-4 mr-2"}),"Open in New Tab"]})]})]})}),s.jsx(ar,{open:C,onOpenChange:S,children:s.jsxs(sr,{children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Assign Clinician"}),s.jsxs(lr,{children:["Select a clinician to assign to ",l?.name]})]}),s.jsx("div",{className:"space-y-4 py-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"clinician-select",children:"Clinician"}),s.jsxs(oa,{value:k,onValueChange:P,children:[s.jsx(ca,{className:"h-11 rounded-xl",children:s.jsx(la,{placeholder:"Select clinician"})}),s.jsx(da,{children:re.map(T=>s.jsxs(Bt,{value:T.id,children:[T.first_name," ",T.last_name," (",T.assigned_chart_count||0," patients)"]},T.id))})]})]})}),s.jsxs(_r,{children:[s.jsx(de,{variant:"outline",onClick:()=>{S(!1),c(null),P("")},children:"Cancel"}),s.jsxs(de,{className:"bg-[#10B981] hover:bg-[#059669]",onClick:V,disabled:!k,children:[s.jsx(Bn,{className:"w-4 h-4 mr-2"}),"Assign"]})]})]})}),s.jsx(ar,{open:O,onOpenChange:$,children:s.jsxs(sr,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Edit Patient"}),s.jsx(lr,{children:"Update patient information"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"edit-firstName",children:"First Name *"}),s.jsx(Ze,{id:"edit-firstName",value:R.firstName,onChange:T=>B({...R,firstName:T.target.value}),placeholder:"John",className:"h-11 rounded-xl"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"edit-lastName",children:"Last Name *"}),s.jsx(Ze,{id:"edit-lastName",value:R.lastName,onChange:T=>B({...R,lastName:T.target.value}),placeholder:"Doe",className:"h-11 rounded-xl"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"edit-dob",children:"Date of Birth *"}),s.jsx(Ze,{id:"edit-dob",type:"date",value:R.dob,onChange:T=>B({...R,dob:T.target.value}),className:"h-11 rounded-xl"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"edit-phone",children:"Phone Number"}),s.jsx(Ze,{id:"edit-phone",value:R.phone,onChange:T=>B({...R,phone:T.target.value}),placeholder:"555-1234",className:"h-11 rounded-xl"})]}),s.jsxs("div",{className:"space-y-2 md:col-span-2",children:[s.jsx(Fe,{htmlFor:"edit-email",children:"Email"}),s.jsx(Ze,{id:"edit-email",type:"email",value:R.email,onChange:T=>B({...R,email:T.target.value}),placeholder:"patient@email.com",className:"h-11 rounded-xl"})]}),s.jsxs("div",{className:"space-y-2 md:col-span-2",children:[s.jsx(Fe,{htmlFor:"edit-addressLine1",children:"Address Line 1"}),s.jsx(Ze,{id:"edit-addressLine1",value:R.addressLine1,onChange:T=>B({...R,addressLine1:T.target.value}),placeholder:"123 Main Street",className:"h-11 rounded-xl"})]}),s.jsxs("div",{className:"space-y-2 md:col-span-2",children:[s.jsx(Fe,{htmlFor:"edit-addressLine2",children:"Address Line 2"}),s.jsx(Ze,{id:"edit-addressLine2",value:R.addressLine2,onChange:T=>B({...R,addressLine2:T.target.value}),placeholder:"Apt 4B (optional)",className:"h-11 rounded-xl"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"edit-city",children:"City"}),s.jsx(Ze,{id:"edit-city",value:R.city,onChange:T=>B({...R,city:T.target.value}),placeholder:"Los Angeles",className:"h-11 rounded-xl"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"edit-state",children:"State"}),s.jsx(Ze,{id:"edit-state",value:R.state,onChange:T=>B({...R,state:T.target.value}),placeholder:"CA",className:"h-11 rounded-xl"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"edit-zipCode",children:"ZIP Code"}),s.jsx(Ze,{id:"edit-zipCode",value:R.zipCode,onChange:T=>B({...R,zipCode:T.target.value}),placeholder:"90210",className:"h-11 rounded-xl"})]}),s.jsxs("div",{className:"space-y-2 md:col-span-2",children:[s.jsx(Fe,{htmlFor:"edit-assignedClinician",children:"Assigned Clinician"}),s.jsxs(oa,{value:R.assignedClinician||"unassigned",onValueChange:T=>B({...R,assignedClinician:T==="unassigned"?"":T}),children:[s.jsx(ca,{className:"h-11 rounded-xl",children:s.jsx(la,{placeholder:"Select clinician (optional)"})}),s.jsxs(da,{children:[s.jsx(Bt,{value:"unassigned",children:"None"}),re.map(T=>s.jsxs(Bt,{value:T.id,children:[T.first_name," ",T.last_name," (",T.assigned_chart_count||0," patients)"]},T.id))]})]})]})]}),s.jsxs(_r,{children:[s.jsx(de,{variant:"outline",onClick:()=>$(!1),children:"Cancel"}),s.jsxs(de,{className:"bg-[#10B981] hover:bg-[#059669]",onClick:Q,children:[s.jsx(kl,{className:"w-4 h-4 mr-2"}),"Update Patient"]})]})]})})]})}var sg="Tabs",[nte]=_o(sg,[J1]),E7=J1(),[ste,e5]=nte(sg),k7=N.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=t,h=P1(l),[m,x]=dc({prop:n,onChange:a,defaultProp:i??"",caller:sg});return s.jsx(ste,{scope:r,baseId:Ko(),value:m,onValueChange:x,orientation:o,dir:h,activationMode:c,children:s.jsx(Pr.div,{dir:h,"data-orientation":o,...u,ref:e})})});k7.displayName=sg;var P7="TabsList",T7=N.forwardRef((t,e)=>{const{__scopeTabs:r,loop:n=!0,...a}=t,i=e5(P7,r),o=E7(r);return s.jsx(QE,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:s.jsx(Pr.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:e})})});T7.displayName=P7;var I7="TabsTrigger",D7=N.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...i}=t,o=e5(I7,r),l=E7(r),c=R7(o.baseId,n),u=L7(o.baseId,n),h=n===o.value;return s.jsx(ek,{asChild:!0,...l,focusable:!a,active:h,children:s.jsx(Pr.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:e,onMouseDown:Pt(t.onMouseDown,m=>{!a&&m.button===0&&m.ctrlKey===!1?o.onValueChange(n):m.preventDefault()}),onKeyDown:Pt(t.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&o.onValueChange(n)}),onFocus:Pt(t.onFocus,()=>{const m=o.activationMode!=="manual";!h&&!a&&m&&o.onValueChange(n)})})})});D7.displayName=I7;var O7="TabsContent",ate=N.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,forceMount:a,children:i,...o}=t,l=e5(O7,r),c=R7(l.baseId,n),u=L7(l.baseId,n),h=n===l.value,m=N.useRef(h);return N.useEffect(()=>{const x=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(x)},[]),s.jsx(Qi,{present:a||h,children:({present:x})=>s.jsx(Pr.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!x,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:m.current?"0s":void 0},children:x&&i})})});ate.displayName=O7;function R7(t,e){return`${t}-trigger-${e}`}function L7(t,e){return`${t}-content-${e}`}var ite=k7,ote=T7,lte=D7;function cte({className:t,...e}){return s.jsx(ite,{"data-slot":"tabs",className:xr("flex flex-col gap-2",t),...e})}function dte({className:t,...e}){return s.jsx(ote,{"data-slot":"tabs-list",className:xr("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",t),...e})}function aC({className:t,...e}){return s.jsx(lte,{"data-slot":"tabs-trigger",className:xr("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...e})}function F7({}){const{user:t}=Ka(),[e,r]=N.useState(""),[n,a]=N.useState("all"),[i,o]=N.useState("all"),[l,c]=N.useState(!1),[u,h]=N.useState("clinician"),[m,x]=N.useState(""),[p,y]=N.useState(""),[w,j]=N.useState(!1),[C,S]=N.useState(null),[k,P]=N.useState(!1),[O,$]=N.useState({firstName:"",lastName:"",email:"",phone:"",occupation:""}),[R,B]=N.useState([]),[U,K]=N.useState([]),[M,q]=N.useState(!0),re=N.useCallback(async()=>{if(t?.tenant_id)try{q(!0);const[T,ie]=await Promise.all([_w(t.tenant_id),LR(t.tenant_id)]);B(T),K(ie)}catch(T){console.error("Error loading data:",T),Pe.error("Failed to load users and invitations")}finally{q(!1)}},[t?.tenant_id]);N.useEffect(()=>{re()},[re]);const H=[...R.map(T=>({id:T.id,name:`${T.first_name} ${T.last_name}`,email:T.email,phone:T.phone_number,occupation:T.occupation,role:T.role,isActivated:!0,isActive:T.active,createdDate:T.created_at,lastLogin:T.last_login,assignedCharts:T.assigned_chart_count||0,type:"user"})),...U.filter(T=>T.status==="pending").map(T=>({id:T.id,name:`${T.first_name} ${T.last_name}`,email:T.email,phone:T.phone_number,occupation:T.occupation,role:T.role,activationCode:T.activation_code,activationLink:T.activation_link,isActivated:!1,isActive:!0,createdDate:T.created_at,expiresAt:T.expires_at,assignedCharts:0,type:"invitation"}))].filter(T=>{const ie=T.name.toLowerCase().includes(e.toLowerCase())||T.email.toLowerCase().includes(e.toLowerCase()),ge=n==="all"||T.role===n,we=i==="all"||i==="active"&&T.isActivated&&T.isActive||i==="inactive"&&T.isActivated&&!T.isActive||i==="pending"&&!T.isActivated;return ie&&ge&&we}),se=R.filter(T=>T.role==="clinician").length,ue=R.filter(T=>T.role==="scheduler").length,G=R.length,J=U.filter(T=>T.status==="pending").length,oe=async()=>{if(!O.firstName||!O.lastName||!O.email||!t?.tenant_id||!t?.id){Pe.error("Please fill in required fields (name and email)");return}if(u==="clinician"&&!O.occupation){Pe.error("Occupation is required for clinicians");return}try{const T=await RR({email:O.email,first_name:O.firstName,last_name:O.lastName,role:u,tenant_id:t.tenant_id,created_by:t.id,phone_number:O.phone||void 0,occupation:O.occupation||void 0});x(T.activation_code),y(T.activation_link),j(!0);const ie=`${O.firstName} ${O.lastName}`;Pe.success(`${u==="clinician"?"Clinician":"Scheduler"} "${ie}" invited successfully`),await re()}catch(T){console.error("Error adding user:",T),Pe.error(T.message||"Failed to create invitation")}},Y=async T=>{try{await navigator.clipboard.writeText(T),Pe.success("Activation code copied to clipboard")}catch{try{const ge=document.createElement("textarea");ge.value=T,ge.style.position="fixed",ge.style.left="-999999px",ge.style.top="-999999px",document.body.appendChild(ge),ge.focus(),ge.select();const we=document.execCommand("copy");ge.remove(),we?Pe.success("Activation code copied to clipboard"):Pe.info(`Activation Code: ${T}`,{duration:1e4})}catch{Pe.info(`Activation Code: ${T}`,{duration:1e4})}}},L=async T=>{try{await navigator.clipboard.writeText(T),Pe.success("Activation link copied to clipboard")}catch{Pe.info(`Activation Link: ${T}`,{duration:1e4})}},z=async(T,ie)=>{try{const ge=await BR(T);Pe.success(`New activation code generated for ${ie}`),await re()}catch(ge){console.error("Error resending invitation:",ge),Pe.error("Failed to regenerate activation code")}},V=async(T,ie)=>{try{await MR(T),Pe.success(`Invitation for ${ie} has been revoked`),await re()}catch(ge){console.error("Error revoking invitation:",ge),Pe.error("Failed to revoke invitation")}},W=async(T,ie,ge)=>{try{await TR(T,!ie,t?.id||""),Pe.success(`${ge} has been ${ie?"deactivated":"activated"}`),await re(),P(!1),S(null)}catch(we){console.error("Error toggling user status:",we),Pe.error("Failed to update user status")}},Q=()=>{c(!1),j(!1),x(""),y(""),$({firstName:"",lastName:"",email:"",phone:"",occupation:""})};return s.jsxs("div",{className:"space-y-6 pb-24",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl text-[#0f172a]",children:"Users & Onboarding"}),s.jsx("p",{className:"text-sm text-[#64748b]",children:"Manage clinicians and schedulers"})]}),s.jsxs(de,{onClick:()=>c(!0),className:"bg-[#10B981] hover:bg-[#059669] text-white",children:[s.jsx(Da,{className:"w-4 h-4 mr-2"}),"Add User"]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsx(er,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-[#64748b]",children:"Clinicians"}),s.jsx("p",{className:"text-2xl text-[#0f172a] mt-1",children:M?"...":se})]}),s.jsx(Bn,{className:"w-8 h-8 text-[#0966CC]"})]})}),s.jsx(er,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-[#64748b]",children:"Schedulers"}),s.jsx("p",{className:"text-2xl text-[#0f172a] mt-1",children:M?"...":ue})]}),s.jsx(Zo,{className:"w-8 h-8 text-[#F59E0B]"})]})}),s.jsx(er,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-[#64748b]",children:"Activated"}),s.jsx("p",{className:"text-2xl text-[#0f172a] mt-1",children:M?"...":G})]}),s.jsx(kr,{className:"w-8 h-8 text-[#10B981]"})]})}),s.jsx(er,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-[#64748b]",children:"Pending"}),s.jsx("p",{className:"text-2xl text-[#0f172a] mt-1",children:M?"...":J})]}),s.jsx(Wx,{className:"w-8 h-8 text-[#DC2626]"})]})})]}),s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Zi,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-[#94a3b8]"}),s.jsx(Ze,{placeholder:"Search users by name or email...",value:e,onChange:T=>r(T.target.value),className:"pl-12 h-12 rounded-xl border-2 border-[#e2e8f0] bg-white"})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx(de,{variant:n==="all"?"default":"outline",onClick:()=>a("all"),className:n==="all"?"bg-[#10B981] hover:bg-[#059669]":"",size:"sm",children:"All Roles"}),s.jsx(de,{variant:n==="clinician"?"default":"outline",onClick:()=>a("clinician"),className:n==="clinician"?"bg-[#0966CC] hover:bg-[#075985]":"border-[#0966CC] text-[#0966CC]",size:"sm",children:"Clinicians"}),s.jsx(de,{variant:n==="scheduler"?"default":"outline",onClick:()=>a("scheduler"),className:n==="scheduler"?"bg-[#F59E0B] hover:bg-[#D97706]":"border-[#F59E0B] text-[#F59E0B]",size:"sm",children:"Schedulers"})]}),s.jsxs("div",{className:"flex gap-2 border-l pl-2",children:[s.jsx(de,{variant:i==="all"?"default":"outline",onClick:()=>o("all"),className:i==="all"?"bg-[#10B981] hover:bg-[#059669]":"",size:"sm",children:"All Status"}),s.jsx(de,{variant:i==="active"?"default":"outline",onClick:()=>o("active"),className:i==="active"?"bg-[#10B981] hover:bg-[#059669]":"border-[#10B981] text-[#10B981]",size:"sm",children:"Active"}),s.jsx(de,{variant:i==="inactive"?"default":"outline",onClick:()=>o("inactive"),className:i==="inactive"?"bg-gray-500 hover:bg-gray-600":"border-gray-500 text-gray-500",size:"sm",children:"Inactive"}),s.jsx(de,{variant:i==="pending"?"default":"outline",onClick:()=>o("pending"),className:i==="pending"?"bg-[#DC2626] hover:bg-[#B91C1C]":"border-[#DC2626] text-[#DC2626]",size:"sm",children:"Pending"})]})]})]}),H.length>0?s.jsx("div",{className:"space-y-3",children:H.map(T=>s.jsx(er,{className:"p-5 hover:shadow-md transition-shadow",children:s.jsx("div",{className:"flex flex-col lg:flex-row lg:items-start justify-between gap-4",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx(Xs,{className:`h-12 w-12 ${T.role==="clinician"?"bg-linear-to-br from-[#0966CC] to-[#075985]":"bg-linear-to-br from-[#F59E0B] to-[#D97706]"}`,children:s.jsx(Zs,{className:"text-white",children:T.name.split(" ").map(ie=>ie[0]).join("")})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h3",{className:"text-lg text-[#0f172a]",children:T.name}),s.jsx(gt,{className:T.role==="clinician"?"bg-[#DBEAFE] text-[#0966CC] border-[#BFDBFE]":"bg-[#FEF3C7] text-[#F59E0B] border-[#FDE68A]",children:T.role==="clinician"?"Clinician":"Scheduler"}),T.isActivated?s.jsxs(gt,{className:"bg-[#D1FAE5] text-[#10B981] border-[#A7F3D0]",children:[s.jsx(kr,{className:"w-3 h-3 mr-1"}),"Activated"]}):s.jsxs(gt,{className:"bg-[#FEE2E2] text-[#DC2626] border-[#FECACA]",children:[s.jsx(y0,{className:"w-3 h-3 mr-1"}),"Pending Activation"]})]}),T.occupation&&s.jsx("p",{className:"text-sm text-[#64748b] mt-1",children:T.occupation})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-[#64748b]",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Mn,{className:"w-4 h-4"}),s.jsx("span",{children:T.email})]}),T.phone&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Yi,{className:"w-4 h-4"}),s.jsx("span",{children:T.phone})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Zo,{className:"w-4 h-4"}),s.jsxs("span",{children:["Added: ",new Date(T.createdDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]}),T.isActivated&&T.type==="user"&&"lastLogin"in T&&T.lastLogin&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ws,{className:"w-4 h-4"}),s.jsxs("span",{children:["Last login: ",new Date(T.lastLogin).toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]}),T.role==="clinician"&&T.assignedCharts!==void 0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(mw,{className:"w-4 h-4"}),s.jsxs("span",{children:[T.assignedCharts," assigned chart",T.assignedCharts!==1?"s":""]})]})]}),!T.isActivated&&T.type==="invitation"&&"activationCode"in T&&s.jsxs("div",{className:"mt-4 p-3 bg-[#f8fafc] rounded-lg border border-[#e2e8f0]",children:[s.jsxs("div",{className:"flex items-center justify-between gap-3 mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[s.jsx(Wx,{className:"w-4 h-4 text-[#64748b]"}),s.jsx("span",{className:"text-sm text-[#64748b]",children:"Activation Code:"}),s.jsx("code",{className:"text-sm bg-white px-2 py-1 rounded border border-[#e2e8f0]",children:T.activationCode})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(de,{variant:"ghost",size:"sm",onClick:()=>Y(T.activationCode),className:"h-8",title:"Copy code",children:s.jsx(iv,{className:"w-4 h-4"})}),s.jsx(de,{variant:"ghost",size:"sm",onClick:()=>L(T.activationLink),className:"h-8 text-[#0966CC] hover:text-[#075985] hover:bg-[#DBEAFE]",title:"Copy link",children:s.jsx(d6,{className:"w-4 h-4"})}),s.jsx(de,{variant:"ghost",size:"sm",onClick:()=>z(T.id,T.name),className:"h-8 text-[#10B981] hover:text-[#059669] hover:bg-[#D1FAE5]",title:"Resend invitation",children:s.jsx(Pl,{className:"w-4 h-4"})})]})]}),"expiresAt"in T&&s.jsxs("p",{className:"text-xs text-[#64748b]",children:["Expires: ",new Date(T.expiresAt).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})]})]}),T.isActivated&&T.type==="user"&&s.jsx("div",{className:"mt-4 flex gap-2",children:s.jsx(de,{variant:"outline",size:"sm",onClick:()=>{S(T.id),P(!0)},className:T.isActive?"border-red-500 text-red-500 hover:bg-red-50":"border-[#10B981] text-[#10B981] hover:bg-[#D1FAE5]",children:T.isActive?s.jsxs(s.Fragment,{children:[s.jsx(a6,{className:"w-4 h-4 mr-2"}),"Deactivate"]}):s.jsxs(s.Fragment,{children:[s.jsx(kr,{className:"w-4 h-4 mr-2"}),"Reactivate"]})})}),!T.isActivated&&T.type==="invitation"&&s.jsx("div",{className:"mt-4",children:s.jsxs(de,{variant:"outline",size:"sm",onClick:()=>V(T.id,T.name),className:"border-red-500 text-red-500 hover:bg-red-50",children:[s.jsx(y0,{className:"w-4 h-4 mr-2"}),"Revoke Invitation"]})})]})})},T.id))}):s.jsxs(er,{className:"p-12 text-center",children:[s.jsx(Rs,{className:"w-12 h-12 text-[#cbd5e1] mx-auto mb-3"}),s.jsx("p",{className:"text-[#64748b]",children:e?"No users found matching your search.":"No users yet. Add a user to get started."})]}),s.jsx(ar,{open:l,onOpenChange:c,children:s.jsxs(sr,{className:"max-w-2xl",children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Add New User"}),s.jsx(lr,{children:"Onboard a new clinician or scheduler to your organization"})]}),w?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"py-6 text-center space-y-4",children:[s.jsx("div",{className:"w-16 h-16 bg-[#D1FAE5] rounded-full flex items-center justify-center mx-auto",children:s.jsx(kr,{className:"w-8 h-8 text-[#10B981]"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg text-[#0f172a] mb-2",children:"User Invited Successfully!"}),s.jsxs("p",{className:"text-sm text-[#64748b]",children:[O.firstName," ",O.lastName," has been invited as a ",u,". Share the activation code or link below."]})]}),s.jsxs("div",{className:"bg-[#f8fafc] border-2 border-[#e2e8f0] rounded-xl p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-[#64748b] mb-3",children:"Activation Code"}),s.jsxs("div",{className:"flex items-center justify-center gap-3",children:[s.jsx("code",{className:"text-2xl bg-white px-4 py-3 rounded-lg border-2 border-[#10B981] text-[#0f172a]",children:m}),s.jsxs(de,{variant:"outline",onClick:()=>Y(m),className:"border-[#10B981] text-[#10B981] hover:bg-[#D1FAE5]",children:[s.jsx(iv,{className:"w-4 h-4 mr-2"}),"Copy Code"]})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-[#64748b] mb-2",children:"Activation Link"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ze,{value:p,readOnly:!0,className:"text-sm"}),s.jsxs(de,{variant:"outline",onClick:()=>L(p),className:"border-[#10B981] text-[#10B981] hover:bg-[#D1FAE5] shrink-0",children:[s.jsx(iv,{className:"w-4 h-4 mr-2"}),"Copy Link"]})]})]}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"The user will need this code or link to complete their account setup. Invitation expires in 7 days."})]})]}),s.jsx(_r,{children:s.jsx(de,{className:"bg-[#10B981] hover:bg-[#059669]",onClick:Q,children:"Done"})})]}):s.jsxs(s.Fragment,{children:[s.jsx(cte,{value:u,onValueChange:T=>h(T),className:"w-full",children:s.jsxs(dte,{className:"grid w-full grid-cols-2",children:[s.jsx(aC,{value:"clinician",children:"Clinician"}),s.jsx(aC,{value:"scheduler",children:"Scheduler"})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"user-firstName",children:"First Name *"}),s.jsx(Ze,{id:"user-firstName",value:O.firstName,onChange:T=>$({...O,firstName:T.target.value}),placeholder:"John",className:"h-11 rounded-xl"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"user-lastName",children:"Last Name *"}),s.jsx(Ze,{id:"user-lastName",value:O.lastName,onChange:T=>$({...O,lastName:T.target.value}),placeholder:"Doe",className:"h-11 rounded-xl"})]}),u==="clinician"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"user-occupation",children:"Occupation *"}),s.jsx(Ze,{id:"user-occupation",value:O.occupation,onChange:T=>$({...O,occupation:T.target.value}),placeholder:"e.g., Registered Nurse",className:"h-11 rounded-xl"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"user-email",children:"Email Address *"}),s.jsx(Ze,{id:"user-email",type:"email",value:O.email,onChange:T=>$({...O,email:T.target.value}),placeholder:"user@example.com",className:"h-11 rounded-xl"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"user-phone",children:"Phone Number"}),s.jsx(Ze,{id:"user-phone",value:O.phone,onChange:T=>$({...O,phone:T.target.value}),placeholder:"555-1234",className:"h-11 rounded-xl"})]})]}),s.jsxs(_r,{children:[s.jsx(de,{variant:"outline",onClick:Q,children:"Cancel"}),s.jsxs(de,{className:"bg-[#10B981] hover:bg-[#059669]",onClick:oe,children:[s.jsx(Da,{className:"w-4 h-4 mr-2"}),"Add ",u==="clinician"?"Clinician":"Scheduler"]})]})]})]})}),s.jsx(Yc,{open:k,onOpenChange:P,children:s.jsxs(Xc,{children:[s.jsxs(Zc,{children:[s.jsx(Qc,{children:"Confirm User Status Change"}),s.jsx(ed,{children:C&&H.find(T=>T.id===C)?.isActive?"Deactivating this user will prevent them from logging in. They will not be able to access their account until reactivated.":"Reactivating this user will restore their access to the system."})]}),s.jsxs(Jc,{children:[s.jsx(rd,{onClick:()=>{P(!1),S(null)},children:"Cancel"}),s.jsx(td,{onClick:()=>{const T=H.find(ie=>ie.id===C);T&&T.type==="user"&&W(T.id,T.isActive,T.name)},className:C&&H.find(T=>T.id===C)?.isActive?"bg-red-500 hover:bg-red-600":"bg-[#10B981] hover:bg-[#059669]",children:C&&H.find(T=>T.id===C)?.isActive?"Deactivate":"Reactivate"})]})]})})]})}function ute({navigation:t}){const{logout:e,user:r}=Ka(),[n,a]=N.useState(!1),[i,o]=N.useState("charts"),[l,c]=N.useState(""),[u,h]=N.useState("all"),[m,x]=N.useState(!1),[p,y]=N.useState(!0),[w,j]=N.useState(!1),[C,S]=N.useState(!1),[k,P]=N.useState(!1),[O,$]=N.useState(!1),[R,B]=N.useState(null),[U,K]=N.useState([]),[M,q]=N.useState(""),[re,ee]=N.useState(""),[H,se]=N.useState(""),[ue,G]=N.useState("7d"),[J,oe]=N.useState(new Date),[Y,L]=N.useState(null),[z,V]=N.useState([]),[W,Q]=N.useState([]),[T,ie]=N.useState([]),[ge,we]=N.useState("Loading..."),[Se,Ue]=N.useState(!0),[We,be]=N.useState({totalUsers:0,activeUsers:0,totalCharts:0,pendingReviewCharts:0,needsReverificationCharts:0,deliveredCharts:0,totalPatients:0}),[pe,at]=N.useState(!0),[tt,Be]=N.useState(!1),[ye,st]=N.useState(!1),[Ve,vt]=N.useState(!1),[ct,Kt]=N.useState(!1),[ot,Ct]=N.useState({patientName:"",clinicianName:"",dateFrom:"",dateTo:"",scanSource:"",confidenceIssues:!1}),[qt,Tt]=N.useState({name:"",dob:"",address:"",phone:""});N.useEffect(()=>{r?.tenant_id&&Et()},[r?.tenant_id]);const Et=N.useCallback(async()=>{if(r?.tenant_id){Ue(!0);try{const{supabaseClient:Ee}=await f0(async()=>{const{supabaseClient:Bs}=await Promise.resolve().then(()=>a9);return{supabaseClient:Bs}},void 0),{data:wt}=await Ee.from("tenants").select("name").eq("id",r.tenant_id).single();wt&&we(wt.name);const[nt,Qr,Zn,bn]=await Promise.all([kR(r.tenant_id),Zee(r.tenant_id),_w(r.tenant_id),IR(r.tenant_id)]);V(nt),Q(Qr),ie(Zn),be(bn),oe(new Date)}catch(Ee){console.error("Error loading agency admin data:",Ee),Pe.error("Failed to load dashboard data")}finally{Ue(!1)}}},[r?.tenant_id]),kt=z.map(Ee=>{const wt=new Date(Ee.created_at),nt=Math.floor((new Date().getTime()-wt.getTime())/(1e3*60*60*24));return{id:Ee.id,patientName:`${Ee.patient?.first_name||""} ${Ee.patient?.last_name||""}`.trim(),patientDob:Ee.patient?.date_of_birth||"",status:Ee.status==="verified_ready"?"Verified":Ee.status==="delivered_locked"?"Delivered":Ee.status==="needs_reverification"?"Needs Reverification":Ee.status==="archived"?"Archived":Ee.status==="active"?"Active":"Pending Review",type:Ee.source==="bottle_scan"?"Bottle Scan":Ee.source==="pdf_import"?"PDF Import":Ee.source==="image_upload"?"Manual Entry":"Empty Chart",medicationCount:Ee.medication_count||0,createdDate:Ee.created_at,createdBy:Ee.created_by_user?`${Ee.created_by_user.first_name} ${Ee.created_by_user.last_name}`:"Unknown",finalizedDate:Ee.finalized_at,verifiedBy:Ee.finalized_by_user?`${Ee.finalized_by_user.first_name} ${Ee.finalized_by_user.last_name}`:void 0,reviewedBy:Ee.finalized_by_user?`${Ee.finalized_by_user.first_name} ${Ee.finalized_by_user.last_name}`:void 0,deliveryTimestamp:Ee.status==="delivered_locked"?Ee.finalized_at:void 0,archivedDate:Ee.status==="archived"?Ee.updated_at:void 0,lowestConfidence:void 0,daysOld:nt,hasLowConfidence:!1}});We.totalPatients;const St=We.totalCharts,gr=We.pendingReviewCharts,Rr=kt.filter(Ee=>Ee.status==="Verified").length,xt=kt.filter(Ee=>Ee.status==="Active").length,Ht=We.deliveredCharts,Me=kt.filter(Ee=>Ee.status==="Archived").length,bt=We.needsReverificationCharts,Wt=kt.filter(Ee=>Ee.status==="Pending Review"&&Ee.daysOld&&Ee.daysOld>2).length,It=new Date().toISOString().split("T")[0];kt.filter(Ee=>Ee.createdDate?.startsWith(It)).length;const Cr=z.filter(Ee=>["verified_ready","delivered_locked"].includes(Ee.status)&&Ee.finalized_at),Gr=Cr.length>0?(Cr.reduce((Ee,wt)=>{const nt=new Date(wt.created_at).getTime(),Zn=(new Date(wt.finalized_at).getTime()-nt)/(1e3*60*60*24);return Ee+Zn},0)/Cr.length).toFixed(1):"0.0",vr=z.reduce((Ee,wt)=>Ee+(wt.medication_count||0),0),At=ue==="7d"?7:ue==="30d"?30:365,yt=new Date;yt.setDate(yt.getDate()-At);const Lr=z.filter(Ee=>new Date(Ee.created_at)>=yt),Sr=z.filter(Ee=>new Date(Ee.created_at)<yt&&new Date(Ee.created_at)>=new Date(yt.getTime()-At*24*60*60*1e3)),Kr=Sr.length>0?Math.abs((Lr.length-Sr.length)/Sr.length*100).toFixed(0):0,Mr=Lr.length>=Sr.length?"":"",jt=()=>{e(),t.navigate("Landing")},Tr=Ee=>{o(Ee),a(!1)},Vn=()=>{if(!qt.name||!qt.dob){Pe.error("Please fill in required fields");return}Pe.success(`Patient "${qt.name}" added successfully`),x(!1),Tt({name:"",dob:"",address:"",phone:""})},Fr=(Ee,wt)=>{t.navigate("ChartDetailView",{chartId:Ee,patientName:wt,mode:"review"})},Yr=Ee=>{K(wt=>wt.includes(Ee)?wt.filter(nt=>nt!==Ee):[...wt,Ee])},$r=()=>{const Ee=In();U.length===Ee.length?K([]):K(Ee.map(wt=>wt.id))},yr=()=>{Pe.success(`${U.length} chart(s) approved and finalized`),K([])},wn=()=>{P(!0)},Ra=()=>{if(!re.trim()){Pe.error("Please provide a reason for returning");return}Pe.success("Chart returned to clinician with note"),P(!1),ee(""),B(null)},La=()=>{if(!H){Pe.error("Please select a clinician");return}Pe.success(`Chart reassigned to ${H}`),$(!1),se(""),B(null)},Ss=Ee=>{B(Ee),S(!0)},ba=()=>{if(!M.trim()){Pe.error("Please provide a reason for reopening");return}Pe.success("Chart reopened for editing"),S(!1),q(""),B(null)},Xn=Ee=>{Pe.success("PDF download started")},Fs=Ee=>{Pe.info("Audit log view coming soon")},In=()=>kt.filter(Ee=>{const wt=Ee.patientName.toLowerCase().includes(l.toLowerCase())||Ee.createdBy.toLowerCase().includes(l.toLowerCase()),nt=u==="all"||Ee.status===u;return wt&&nt}),Na=Ee=>{const wt=T.find(nt=>nt.id===Ee&&nt.role==="clinician");return wt?{id:wt.id,name:`${wt.first_name} ${wt.last_name}`,email:wt.email,phone:wt.phone,patientCount:wt.assigned_chart_count||0,chartCount:wt.assigned_chart_count||0,assignedPatients:[]}:null},Ms=()=>s.jsxs("nav",{className:"space-y-1",children:[s.jsxs("button",{onClick:()=>Tr("charts"),className:`w-full flex items-center justify-between px-3 py-3 rounded-lg transition-colors ${i==="charts"?"bg-[#D1FAE5] text-[#10B981]":"text-[#64748b] hover:bg-[#f8fafc]"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(hr,{className:"w-5 h-5"}),s.jsx("span",{children:"Charts"})]}),gr>0&&s.jsx(gt,{className:"bg-[#F59E0B] text-white border-0 h-5 min-w-5 px-1.5 flex items-center justify-center",children:gr})]}),s.jsxs("button",{onClick:()=>Tr("patients"),className:`w-full flex items-center gap-3 px-3 py-3 rounded-lg transition-colors ${i==="patients"?"bg-[#D1FAE5] text-[#10B981]":"text-[#64748b] hover:bg-[#f8fafc]"}`,children:[s.jsx(Rs,{className:"w-5 h-5"}),s.jsx("span",{children:"Patients"})]}),s.jsxs("button",{onClick:()=>Tr("clinicians"),className:`w-full flex items-center gap-3 px-3 py-3 rounded-lg transition-colors ${i==="clinicians"?"bg-[#D1FAE5] text-[#10B981]":"text-[#64748b] hover:bg-[#f8fafc]"}`,children:[s.jsx(Bn,{className:"w-5 h-5"}),s.jsx("span",{children:"Clinicians"})]}),s.jsxs("button",{onClick:()=>Tr("users"),className:`w-full flex items-center gap-3 px-3 py-3 rounded-lg transition-colors ${i==="users"?"bg-[#D1FAE5] text-[#10B981]":"text-[#64748b] hover:bg-[#f8fafc]"}`,children:[s.jsx(uh,{className:"w-5 h-5"}),s.jsx("span",{children:"Users"})]}),s.jsxs("button",{onClick:()=>Tr("profile"),className:`w-full flex items-center gap-3 px-3 py-3 rounded-lg transition-colors ${i==="profile"?"bg-[#D1FAE5] text-[#10B981]":"text-[#64748b] hover:bg-[#f8fafc]"}`,children:[s.jsx(Bn,{className:"w-5 h-5"}),s.jsx("span",{children:"Profile"})]}),s.jsxs("button",{onClick:()=>Tr("settings"),className:`w-full flex items-center gap-3 px-3 py-3 rounded-lg transition-colors ${i==="settings"?"bg-[#D1FAE5] text-[#10B981]":"text-[#64748b] hover:bg-[#f8fafc]"}`,children:[s.jsx(au,{className:"w-5 h-5"}),s.jsx("span",{children:"Settings"})]})]}),Fa=()=>{const Ee=In(),wt=u!=="all";return s.jsxs("div",{className:"space-y-6 pb-24",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-sm font-semibold text-slate-700 mb-1",children:"Chart Performance Metrics"}),s.jsx("p",{className:"text-xs text-slate-500",children:"Real-time overview of chart activity"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-1 bg-white rounded-lg p-1 border border-slate-200",children:[s.jsx("button",{onClick:()=>G("7d"),className:`px-3 py-1 rounded text-xs font-medium transition-colors ${ue==="7d"?"bg-[#10B981] text-white":"text-slate-600 hover:bg-slate-100"}`,children:"7d"}),s.jsx("button",{onClick:()=>G("30d"),className:`px-3 py-1 rounded text-xs font-medium transition-colors ${ue==="30d"?"bg-[#10B981] text-white":"text-slate-600 hover:bg-slate-100"}`,children:"30d"}),s.jsx("button",{onClick:()=>G("ytd"),className:`px-3 py-1 rounded text-xs font-medium transition-colors ${ue==="ytd"?"bg-[#10B981] text-white":"text-slate-600 hover:bg-slate-100"}`,children:"YTD"})]}),s.jsx(hn,{children:s.jsxs(fn,{children:[s.jsx(mn,{asChild:!0,children:s.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-white rounded-lg border border-slate-200",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),s.jsx("span",{className:"text-xs text-slate-600",children:"Live data"})]})}),s.jsx(pn,{children:s.jsxs("p",{className:"text-xs",children:["Updated ",Math.floor((new Date().getTime()-J.getTime())/6e4)," min ago"]})})]})})]})]}),s.jsx("div",{className:"bg-gradient-to-br from-slate-50 to-white rounded-2xl p-4 border border-slate-200 shadow-sm",children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4",children:[s.jsx(hn,{children:s.jsxs(fn,{children:[s.jsx(mn,{asChild:!0,children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 border-l-4 border-[#10B981] cursor-help hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("p",{className:"text-xs text-[#64748b]",children:"Avg Turnaround"}),s.jsx(Ws,{className:"w-4 h-4 text-[#10B981]"})]}),s.jsxs("p",{className:"text-2xl text-[#0f172a] font-semibold",children:[Gr," days"]}),s.jsxs("p",{className:"text-xs text-[#10B981] mt-1",children:[Mr," ",Kr,"% from last period"]})]})}),s.jsxs(pn,{children:[s.jsx("p",{className:"font-semibold",children:"Average chart verification time"}),s.jsxs("p",{className:"text-xs text-[#94a3b8]",children:["Past ",ue==="7d"?"7":ue==="30d"?"30":"year-to-date"," days"]})]})]})}),s.jsx(hn,{children:s.jsxs(fn,{children:[s.jsx(mn,{asChild:!0,children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 border-l-4 border-[#0966CC] cursor-help hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("p",{className:"text-xs text-[#64748b]",children:"Total Charts"}),s.jsx(w0,{className:"w-4 h-4 text-[#0966CC]"})]}),s.jsx("p",{className:"text-2xl text-[#0f172a] font-semibold",children:St}),s.jsx("p",{className:"text-xs text-[#64748b] mt-1",children:"Entire organization"})]})}),s.jsxs(pn,{children:[s.jsx("p",{className:"font-semibold",children:"Total number of charts"}),s.jsx("p",{className:"text-xs text-[#94a3b8]",children:"All charts in the system"})]})]})}),s.jsx(hn,{children:s.jsxs(fn,{children:[s.jsx(mn,{asChild:!0,children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 border-l-4 border-[#DC2626] cursor-help hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("p",{className:"text-xs text-[#64748b]",children:"Pending >48h"}),s.jsx(go,{className:"w-4 h-4 text-[#DC2626]"})]}),s.jsx("p",{className:"text-2xl text-[#0f172a] font-semibold",children:Wt}),s.jsx("p",{className:"text-xs text-[#DC2626] mt-1",children:"Needs urgent review"})]})}),s.jsxs(pn,{children:[s.jsx("p",{className:"font-semibold",children:"Charts waiting more than 48 hours"}),s.jsx("p",{className:"text-xs text-[#94a3b8]",children:"Escalated priority  action required"})]})]})}),s.jsx(hn,{children:s.jsxs(fn,{children:[s.jsx(mn,{asChild:!0,children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 border-l-4 border-[#F59E0B] cursor-help hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("p",{className:"text-xs text-[#64748b]",children:"Medications Scanned"}),s.jsx(w0,{className:"w-4 h-4 text-[#F59E0B]"})]}),s.jsx("p",{className:"text-2xl text-[#0f172a] font-semibold",children:vr}),s.jsx("p",{className:"text-xs text-[#64748b] mt-1",children:"Organization total"})]})}),s.jsxs(pn,{children:[s.jsx("p",{className:"font-semibold",children:"Total medications scanned"}),s.jsx("p",{className:"text-xs text-[#94a3b8]",children:"All medications scanned across organization"})]})]})})]})})]}),s.jsx("div",{className:"sticky top-0 z-10 bg-[#F0FDF4] rounded-xl shadow-sm p-4 border border-[#10B981]/20",children:s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-6",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-[#F59E0B] animate-pulse"}),s.jsxs("span",{className:"text-sm",children:[s.jsx("span",{className:"font-semibold text-[#0f172a]",children:gr}),s.jsx("span",{className:"text-[#64748b]",children:" Pending"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-[#10B981]"}),s.jsxs("span",{className:"text-sm",children:[s.jsx("span",{className:"font-semibold text-[#0f172a]",children:Rr}),s.jsx("span",{className:"text-[#64748b]",children:" Verified"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-[#DC2626]"}),s.jsxs("span",{className:"text-sm",children:[s.jsx("span",{className:"font-semibold text-[#0f172a]",children:bt}),s.jsx("span",{className:"text-[#64748b]",children:" Needs Reverification"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-[#0966CC]"}),s.jsxs("span",{className:"text-sm",children:[s.jsx("span",{className:"font-semibold text-[#0f172a]",children:xt}),s.jsx("span",{className:"text-[#64748b]",children:" Active"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-[#4F46E5]"}),s.jsxs("span",{className:"text-sm",children:[s.jsx("span",{className:"font-semibold text-[#0f172a]",children:Ht}),s.jsx("span",{className:"text-[#64748b]",children:" Delivered"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-[#64748b]"}),s.jsxs("span",{className:"text-sm",children:[s.jsx("span",{className:"font-semibold text-[#0f172a]",children:Me}),s.jsx("span",{className:"text-[#64748b]",children:" Archived"})]})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[U.length>0&&s.jsxs(gt,{className:"bg-[#10B981] text-white border-0",children:[U.length," selected"]}),s.jsx(hn,{children:s.jsxs(fn,{children:[s.jsx(mn,{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-white border border-[#10B981]/30 hover:bg-[#D1FAE5] transition-colors",children:s.jsx(Vf,{className:"w-3.5 h-3.5 text-[#10B981]"})}),s.jsx(pn,{className:"max-w-xs",side:"left",children:s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("p",{className:"font-semibold mb-2",children:"Status Key"}),s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx(Ws,{className:"w-3 h-3 text-[#F59E0B]"}),s.jsx("span",{children:"Pending Review"})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx(go,{className:"w-3 h-3 text-[#DC2626]"}),s.jsx("span",{children:"Pending >48h (Overdue)"})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx(go,{className:"w-3 h-3 text-[#F59E0B]"}),s.jsx("span",{children:"Low Confidence (<75%)"})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx(Pl,{className:"w-3 h-3 text-[#64748b]"}),s.jsx("span",{children:"Reopened"})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx(fs,{className:"w-3 h-3 text-[#4F46E5]"}),s.jsx("span",{children:"Delivered (Locked)"})]})]})})]})})]})]})}),wt&&s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("div",{className:"bg-[#0EA5E9]/10 border border-[#0EA5E9]/30 rounded-lg px-3 py-1.5 flex items-center gap-2",children:[s.jsx(Hx,{className:"w-3.5 h-3.5 text-[#0EA5E9]"}),s.jsxs("span",{className:"text-xs font-medium text-[#0EA5E9]",children:["Filtering: ",u," (",Ee.length,")"]}),s.jsx("button",{onClick:()=>h("all"),className:"ml-1 text-[#0EA5E9] hover:text-[#0284C7]",children:s.jsx(ps,{className:"w-3 h-3"})})]})}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx(js.div,{whileTap:{scale:.95},children:s.jsx(de,{variant:u==="all"?"default":"outline",size:"sm",onClick:()=>h("all"),className:u==="all"?"bg-[#10B981] hover:bg-[#059669]":"",children:"All Charts"})}),s.jsx(js.div,{whileTap:{scale:.95},children:s.jsxs(de,{variant:u==="Pending Review"?"default":"outline",size:"sm",onClick:()=>h("Pending Review"),className:u==="Pending Review"?"bg-[#F59E0B] hover:bg-[#D97706]":"border-[#F59E0B] text-[#F59E0B]",children:[s.jsx(Ws,{className:"w-3 h-3 mr-1"}),"Pending Review",gr>0&&s.jsx(gt,{className:"ml-2 bg-white text-[#F59E0B] border-0 h-5 px-1.5",children:gr})]})}),s.jsx(js.div,{whileTap:{scale:.95},children:s.jsxs(de,{variant:u==="Verified"?"default":"outline",size:"sm",onClick:()=>h("Verified"),className:u==="Verified"?"bg-[#10B981] hover:bg-[#059669]":"border-[#10B981] text-[#10B981]",children:[s.jsx(kr,{className:"w-3 h-3 mr-1"}),"Ready to Deliver"]})}),s.jsx(js.div,{whileTap:{scale:.95},children:s.jsxs(de,{variant:u==="Needs Reverification"?"default":"outline",size:"sm",onClick:()=>h("Needs Reverification"),className:u==="Needs Reverification"?"bg-[#DC2626] hover:bg-[#B91C1C]":"border-[#DC2626] text-[#DC2626]",children:[s.jsx(Xm,{className:"w-3 h-3 mr-1"}),"Needs Reverification"]})}),s.jsx(js.div,{whileTap:{scale:.95},children:s.jsxs(de,{variant:u==="Delivered"?"default":"outline",size:"sm",onClick:()=>h("Delivered"),className:u==="Delivered"?"bg-[#4F46E5] hover:bg-[#4338CA]":"border-[#4F46E5] text-[#4F46E5]",children:[s.jsx(fs,{className:"w-3 h-3 mr-1"}),"Delivered"]})}),s.jsx(hn,{children:s.jsxs(fn,{children:[s.jsx(mn,{className:"inline-flex",children:s.jsx(js.div,{whileTap:{scale:.95},children:s.jsxs(de,{variant:u==="Active"?"default":"outline",size:"sm",onClick:()=>h("Active"),className:u==="Active"?"bg-[#0966CC] hover:bg-[#075985]":"border-[#0966CC] text-[#0966CC]",children:[s.jsx(lc,{className:"w-3 h-3 mr-1"}),"Active"]})})}),s.jsxs(pn,{children:[s.jsx("p",{children:"Chart is in progress"}),s.jsx("p",{className:"text-xs text-[#94a3b8]",children:"Requires clinician completion"})]})]})}),s.jsx(hn,{children:s.jsxs(fn,{children:[s.jsx(mn,{className:"inline-flex",children:s.jsx(js.div,{whileTap:{scale:.95},children:s.jsxs(de,{variant:u==="Archived"?"default":"outline",size:"sm",onClick:()=>h("Archived"),className:u==="Archived"?"bg-[#64748b] hover:bg-[#475569]":"border-[#64748b] text-[#64748b]",children:[s.jsx(Wi,{className:"w-3 h-3 mr-1"}),"Archived"]})})}),s.jsxs(pn,{children:[s.jsx("p",{children:"View archived charts"}),s.jsx("p",{className:"text-xs text-[#94a3b8]",children:"Historical records"})]})]})})]}),s.jsxs("div",{children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(hr,{className:"w-4 h-4 text-emerald-600"}),s.jsxs("h3",{className:"text-sm font-semibold text-slate-700",children:["All Charts (",Ee.length,")"]})]})}),s.jsx("div",{className:"flex flex-col gap-3 mb-5",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[Ee.length>0&&s.jsxs("div",{className:"flex items-center gap-2 px-4 h-12 rounded-xl border-2 border-[#e2e8f0] bg-white",children:[s.jsx(bo,{checked:U.length===Ee.length,onCheckedChange:$r,className:"border-[#10B981] data-[state=checked]:bg-[#10B981]"}),s.jsx("span",{className:"text-sm text-[#64748b] whitespace-nowrap",children:"Select All"})]}),s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Zi,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-[#94a3b8]"}),s.jsx(Ze,{placeholder:"Search by patient or clinician name...",value:l,onChange:nt=>c(nt.target.value),className:"pl-12 h-12 rounded-xl border-2 border-[#e2e8f0] bg-white"})]}),s.jsxs(de,{variant:"outline",size:"sm",onClick:()=>j(!0),className:"h-12 border-[#10B981] text-[#10B981] hover:bg-[#D1FAE5]",children:[s.jsx(u6,{className:"w-4 h-4 mr-2"}),"Advanced Search"]})]})}),s.jsx("div",{className:"space-y-3",children:Ee.length===0?s.jsxs("div",{className:"bg-white rounded-2xl border-2 border-dashed border-slate-200 p-12 text-center",children:[s.jsx(hr,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),s.jsx("p",{className:"text-slate-600 mb-1",children:"No charts found"}),s.jsx("p",{className:"text-sm text-slate-400",children:"Try adjusting your search or filters"})]}):Ee.map(nt=>{const Qr=Na(nt.createdBy),Zn=nt.status==="Pending Review"&&nt.daysOld&&nt.daysOld>2,bn=U.includes(nt.id),Bs=Zn||nt.hasLowConfidence&&nt.lowestConfidence&&nt.lowestConfidence<75;return s.jsxs(js.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2},className:`bg-white rounded-xl border-2 transition-all duration-200 group relative hover:shadow-lg ${bn?"border-[#10B981] shadow-lg ring-2 ring-[#10B981]/20":"border-[#e2e8f0] hover:border-[#10B981]/30"} ${Bs?"border-l-4 border-l-rose-200":""}`,children:[Zn&&s.jsx("div",{className:"absolute -top-2 -right-2 z-10",children:s.jsx(hn,{children:s.jsxs(fn,{children:[s.jsx(mn,{className:"rounded-full",children:s.jsx("div",{className:"w-8 h-8 rounded-full bg-[#DC2626] flex items-center justify-center animate-pulse shadow-lg",children:s.jsx(go,{className:"w-4 h-4 text-white"})})}),s.jsxs(pn,{side:"left",children:[s.jsx("p",{className:"font-semibold",children:"Overdue"}),s.jsx("p",{className:"text-xs",children:"Pending >48h - needs urgent review"})]})]})})}),s.jsx("div",{className:"p-5",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"pt-1",children:s.jsx(bo,{checked:bn,onCheckedChange:()=>Yr(nt.id),className:"border-[#10B981] data-[state=checked]:bg-[#10B981]"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3 mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-2",children:[s.jsx("h3",{className:"text-lg text-[#0f172a]",children:nt.patientName}),s.jsx(gt,{className:nt.status==="Delivered"?"bg-[#E0E7FF] text-[#4F46E5] border-[#C7D2FE]":nt.status==="Verified"?"bg-[#D1FAE5] text-[#10B981] border-[#A7F3D0]":nt.status==="Active"?"bg-[#DBEAFE] text-[#0966CC] border-[#BFDBFE]":nt.status==="Archived"?"bg-[#F1F5F9] text-[#64748b] border-[#CBD5E1]":"bg-[#FEF3C7] text-[#F59E0B] border-[#FDE68A]",children:nt.status==="Delivered"?s.jsxs(s.Fragment,{children:[s.jsx(fs,{className:"w-3 h-3 mr-1"})," Delivered (Locked)"]}):nt.status==="Verified"?s.jsxs(s.Fragment,{children:[s.jsx(kr,{className:"w-3 h-3 mr-1"})," Verified (Ready to Deliver)"]}):nt.status==="Active"?s.jsxs(s.Fragment,{children:[s.jsx(lc,{className:"w-3 h-3 mr-1"})," ",nt.status]}):nt.status==="Archived"?s.jsxs(s.Fragment,{children:[s.jsx(Wi,{className:"w-3 h-3 mr-1"})," Archived"]}):s.jsxs(s.Fragment,{children:[s.jsx(Ws,{className:"w-3 h-3 mr-1"})," ",nt.status]})}),nt.daysOld!==void 0&&nt.daysOld>0&&s.jsx(hn,{children:s.jsxs(fn,{children:[s.jsx(mn,{children:s.jsxs(gt,{variant:"outline",className:`text-xs ${nt.daysOld>2?"border-[#DC2626] text-[#DC2626] bg-[#DC2626]/5":nt.daysOld>1?"border-[#F59E0B] text-[#F59E0B] bg-[#F59E0B]/5":"border-[#64748b] text-[#64748b]"}`,children:[s.jsx(Ws,{className:"w-3 h-3 mr-1"}),nt.daysOld," day",nt.daysOld!==1?"s":""," old"]})}),s.jsx(pn,{children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"font-semibold",children:"Chart Age"}),s.jsx("div",{className:"w-32 h-1.5 bg-slate-200 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full rounded-full ${nt.daysOld>2?"bg-[#DC2626]":nt.daysOld>1?"bg-[#F59E0B]":"bg-[#10B981]"}`,style:{width:`${Math.min(nt.daysOld/3*100,100)}%`}})}),s.jsx("p",{className:"text-xs text-slate-500",children:nt.daysOld>2?"Urgent - Review required":nt.daysOld>1?"Needs attention":"Normal timeline"})]})})]})}),nt.hasLowConfidence&&s.jsx(hn,{children:s.jsxs(fn,{children:[s.jsx(mn,{className:"inline-flex",children:s.jsxs(gt,{variant:"outline",className:"border-[#F59E0B] text-[#F59E0B] text-xs",children:[s.jsx(go,{className:"w-3 h-3 mr-1"}),"Low Confidence"]})}),s.jsxs(pn,{children:[s.jsxs("p",{children:["Lowest confidence: ",nt.lowestConfidence,"%"]}),s.jsx("p",{className:"text-xs text-[#94a3b8]",children:"May need manual review"})]})]})})]}),s.jsxs("p",{className:"text-sm text-[#64748b] mb-2",children:["DOB: ",new Date(nt.patientDob).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]}),s.jsxs(Yf,{children:[s.jsx(Xf,{className:"inline-flex items-center justify-center h-8 w-8 p-0 rounded-md hover:bg-accent hover:text-accent-foreground",children:s.jsx(R0,{className:"w-4 h-4"})}),s.jsxs(Zf,{align:"end",className:"w-56",children:[s.jsx(Kb,{children:"Chart Actions"}),s.jsx(Go,{}),s.jsxs(on,{onClick:()=>Fr(nt.id,nt.patientName),children:[s.jsx(hs,{className:"w-4 h-4 mr-2"}),"View Chart"]}),nt.status!=="Delivered"&&s.jsxs(s.Fragment,{children:[s.jsxs(on,{onClick:()=>{B(nt.id),$(!0)},children:[s.jsx(yx,{className:"w-4 h-4 mr-2"}),"Reassign Clinician"]}),s.jsxs(on,{onClick:()=>{B(nt.id),P(!0)},children:[s.jsx(ln,{className:"w-4 h-4 mr-2"}),"Return for Edits"]})]}),s.jsxs(on,{onClick:()=>Pe.info("Add note feature coming soon"),children:[s.jsx(Kx,{className:"w-4 h-4 mr-2"}),"Add Admin Note"]}),s.jsx(Go,{}),s.jsxs(on,{onClick:()=>Xn(nt.id),children:[s.jsx(Ai,{className:"w-4 h-4 mr-2"}),"Download PDF"]}),s.jsxs(on,{onClick:()=>Fs(nt.id),children:[s.jsx(Kd,{className:"w-4 h-4 mr-2"}),"View Audit Trail"]}),nt.status==="Delivered"&&s.jsxs(s.Fragment,{children:[s.jsx(Go,{}),s.jsxs(on,{onClick:()=>Ss(nt.id),className:"text-[#DC2626]",children:[s.jsx(Xm,{className:"w-4 h-4 mr-2"}),"Reopen Chart"]})]})]})]})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm text-[#64748b] mb-3",children:[s.jsx("span",{children:nt.type}),nt.medicationCount>0&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:""}),s.jsxs("span",{children:[nt.medicationCount," medication",nt.medicationCount!==1?"s":""]})]}),nt.lowestConfidence&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:""}),s.jsxs("span",{className:nt.hasLowConfidence?"text-[#F59E0B] font-medium":"",children:["Confidence: ",nt.lowestConfidence,"%"]})]})]}),s.jsx(hn,{children:s.jsxs(fn,{children:[s.jsx(mn,{className:"inline-flex text-xs text-[#94a3b8] mb-3 cursor-help",children:s.jsxs("span",{children:["Created ",new Date(nt.createdDate).toLocaleDateString("en-US",{month:"short",day:"numeric"}),nt.finalizedDate&&s.jsxs(s.Fragment,{children:["  Finalized ",new Date(nt.finalizedDate).toLocaleDateString("en-US",{month:"short",day:"numeric"})]}),"  ",s.jsx("span",{className:"font-semibold text-[#0f172a]",children:nt.createdBy})]})}),s.jsx(pn,{side:"top",className:"max-w-xs",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-semibold text-[#94a3b8]",children:"Created"}),s.jsx("p",{children:new Date(nt.createdDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]}),Qr&&s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-semibold text-[#94a3b8]",children:"Clinician"}),s.jsx("p",{className:"font-semibold",children:Qr.name}),s.jsxs("p",{className:"text-xs flex items-center gap-1",children:[s.jsx(Mn,{className:"w-3 h-3"}),Qr.email]}),Qr.phone&&s.jsxs("p",{className:"text-xs flex items-center gap-1",children:[s.jsx(Yi,{className:"w-3 h-3"}),Qr.phone]})]}),nt.finalizedDate&&s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-semibold text-[#94a3b8]",children:"Finalized"}),s.jsx("p",{children:new Date(nt.finalizedDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})]})})]})}),(nt.verifiedBy||nt.reviewedBy||nt.deliveryTimestamp)&&s.jsxs("div",{className:"bg-[#f8fafc] rounded-lg p-3 space-y-1 text-xs opacity-70 hover:opacity-100 transition-opacity",children:[nt.verifiedBy&&s.jsxs("div",{className:"flex items-center gap-2 text-[#64748b]",children:[s.jsx(kr,{className:"w-3 h-3 text-[#10B981]"}),s.jsxs("span",{children:["Verified by: ",s.jsx("span",{className:"text-[#0f172a] font-medium",children:nt.verifiedBy})]})]}),nt.reviewedBy&&s.jsxs("div",{className:"flex items-center gap-2 text-[#64748b]",children:[s.jsx(hs,{className:"w-3 h-3 text-[#0966CC]"}),s.jsxs("span",{children:["Admin Reviewed: ",s.jsx("span",{className:"text-[#0f172a] font-medium",children:nt.reviewedBy})]})]}),nt.deliveryTimestamp&&s.jsxs("div",{className:"flex items-center gap-2 text-[#64748b]",children:[s.jsx(Hs,{className:"w-3 h-3 text-[#4F46E5]"}),s.jsxs("span",{children:["Delivery: ",s.jsx("span",{className:"text-[#0f172a] font-medium",children:new Date(nt.deliveryTimestamp).toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]})]}),s.jsxs("button",{onClick:()=>Fs(nt.id),className:"text-[#10B981] hover:text-[#059669] flex items-center gap-1 font-medium mt-1",children:[s.jsx(Kd,{className:"w-3 h-3"}),"View Audit Trail"]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[(nt.status==="Verified"||nt.status==="Pending Review")&&s.jsxs(de,{size:"sm",onClick:()=>Fr(nt.id,nt.patientName),className:"bg-[#10B981] hover:bg-[#059669] text-white",children:[s.jsx(hs,{className:"w-4 h-4 mr-2"}),"Review Chart"]}),(nt.status==="Active"||nt.status==="Delivered")&&s.jsxs(de,{variant:"outline",size:"sm",onClick:()=>Fr(nt.id,nt.patientName),className:"border-[#64748b] text-[#64748b] hover:bg-[#f8fafc]",children:[s.jsx(hs,{className:"w-4 h-4 mr-2"}),"View Chart"]}),nt.status==="Delivered"&&s.jsx(hn,{children:s.jsxs(fn,{children:[s.jsx(mn,{className:"inline-flex",children:s.jsxs(de,{variant:"outline",size:"sm",onClick:()=>Ss(nt.id),className:"border-[#DC2626] text-[#DC2626] hover:bg-[#FEE2E2]",children:[s.jsx(Xm,{className:"w-4 h-4 mr-2"}),"Reopen"]})}),s.jsxs(pn,{children:[s.jsx("p",{children:"Delivered charts are locked."}),s.jsx("p",{className:"text-xs text-[#94a3b8]",children:"Admins may reopen with audit reason."})]})]})})]})]})]})})]},nt.id)})})]}),U.length>0&&s.jsx(js.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},className:"fixed bottom-0 left-0 right-0 md:left-64 bg-white border-t-2 border-[#10B981] shadow-2xl p-4 z-20",children:s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs(gt,{className:"bg-[#10B981] text-white border-0 px-3 py-1",children:[U.length," Chart",U.length!==1?"s":""," Selected"]}),s.jsxs(de,{variant:"ghost",size:"sm",onClick:()=>K([]),className:"text-[#64748b]",children:[s.jsx(ps,{className:"w-4 h-4 mr-1"}),"Clear"]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx(js.div,{whileTap:{scale:.95},children:s.jsxs(de,{size:"sm",onClick:yr,className:"bg-[#10B981] hover:bg-[#059669] text-white",children:[s.jsx(kl,{className:"w-4 h-4 mr-2"}),"Approve & Finalize"]})}),s.jsx(js.div,{whileTap:{scale:.95},children:s.jsxs(de,{variant:"outline",size:"sm",onClick:wn,className:"border-[#F59E0B] text-[#F59E0B] hover:bg-[#FEF3C7]",children:[s.jsx(ln,{className:"w-4 h-4 mr-2"}),"Return to Clinician"]})}),s.jsxs(de,{variant:"outline",size:"sm",onClick:()=>Pe.info("Bulk attach feature coming soon"),className:"border-[#64748b] text-[#64748b] hover:bg-[#f8fafc]",children:[s.jsx(F0,{className:"w-4 h-4 mr-2"}),"Attach Docs"]}),s.jsxs(de,{variant:"outline",size:"sm",onClick:()=>$(!0),className:"border-[#0966CC] text-[#0966CC] hover:bg-[#DBEAFE]",children:[s.jsx(uh,{className:"w-4 h-4 mr-2"}),"Reassign"]})]})]})})]})},Js=()=>Y?s.jsx(Xee,{clinicianId:Y,onBack:()=>L(null),navigation:t}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx("div",{className:"bg-white rounded-2xl shadow-sm p-5",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-11 h-11 rounded-xl bg-[#D1FAE5] flex items-center justify-center",children:s.jsx(Bn,{className:"w-5 h-5 text-[#10B981]"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl text-[#0f172a] font-semibold",children:T.filter(Ee=>Ee.role==="clinician").length}),s.jsx("p",{className:"text-xs font-semibold text-[#64748b]",children:"Total Clinicians"})]})]})}),s.jsx("div",{className:"bg-white rounded-2xl shadow-sm p-5",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-11 h-11 rounded-xl bg-[#DBEAFE] flex items-center justify-center",children:s.jsx(kr,{className:"w-5 h-5 text-[#0966CC]"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl text-[#0f172a] font-semibold",children:T.filter(Ee=>Ee.role==="clinician"&&Ee.active).length}),s.jsx("p",{className:"text-xs font-semibold text-[#64748b]",children:"Active"})]})]})}),s.jsx("div",{className:"bg-white rounded-2xl shadow-sm p-5",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-11 h-11 rounded-xl bg-[#FEF3C7] flex items-center justify-center",children:s.jsx(hr,{className:"w-5 h-5 text-[#F59E0B]"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl text-[#0f172a] font-semibold",children:T.filter(Ee=>Ee.role==="clinician").reduce((Ee,wt)=>Ee+(wt.assigned_chart_count||0),0)}),s.jsx("p",{className:"text-xs font-semibold text-[#64748b]",children:"Total Charts"})]})]})})]}),s.jsx("div",{className:"space-y-3",children:T.filter(Ee=>Ee.role==="clinician").map(Ee=>{const wt=`${Ee.first_name} ${Ee.last_name}`,nt=`${Ee.first_name[0]}${Ee.last_name[0]}`,Qr=W.filter(Zn=>Zn.assigned_clinician_id===Ee.id);return s.jsxs("div",{className:"bg-white rounded-xl border border-[#e2e8f0] p-5 hover:shadow-md transition-all",children:[s.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx(Xs,{className:"w-12 h-12",children:s.jsx(Zs,{className:"bg-[#D1FAE5] text-[#10B981]",children:nt})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg text-[#0f172a]",children:wt}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-[#64748b]",children:[s.jsx(Mn,{className:"w-4 h-4"}),s.jsx("span",{children:Ee.email})]}),Ee.phone_number&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-[#64748b]",children:[s.jsx(Yi,{className:"w-4 h-4"}),s.jsx("span",{children:Ee.phone_number})]})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-[#64748b]",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Rs,{className:"w-4 h-4"}),s.jsxs("span",{children:[Qr.length," patient",Qr.length!==1?"s":""]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(hr,{className:"w-4 h-4"}),s.jsxs("span",{children:[Ee.assigned_chart_count||0," chart",Ee.assigned_chart_count!==1?"s":""]})]})]})]}),s.jsxs(de,{variant:"outline",size:"sm",onClick:()=>L(Ee.id),className:"border-[#10B981] text-[#10B981] hover:bg-[#D1FAE5]",children:[s.jsx(hs,{className:"w-4 h-4 mr-2"}),"View Profile"]})]}),Qr.length>0&&s.jsxs("div",{className:"pt-3 border-t border-[#e2e8f0]",children:[s.jsx("p",{className:"text-xs text-[#64748b] mb-2",children:"Assigned Patients:"}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[Qr.slice(0,5).map(Zn=>s.jsxs(gt,{variant:"outline",className:"text-xs",children:[Zn.first_name," ",Zn.last_name]},Zn.id)),Qr.length>5&&s.jsxs(gt,{variant:"outline",className:"text-xs",children:["+",Qr.length-5," more"]})]})]})]},Ee.id)})})]}),Ya=[{id:"1",device:"Chrome on Windows",location:"Phoenix, AZ",ip:"192.168.1.1",lastActive:"Active now",current:!0},{id:"2",device:"Safari on iPhone",location:"Phoenix, AZ",ip:"192.168.1.45",lastActive:"2 hours ago",current:!1},{id:"3",device:"Chrome on MacBook",location:"Scottsdale, AZ",ip:"10.0.0.23",lastActive:"Yesterday",current:!1}],fi=Ee=>{at(Ee),Ee?st(!0):Pe.info("Two-factor authentication disabled")},ze=Ee=>{Pe.success("Session revoked successfully")},ft=()=>{const Ee={name:"Jennifer Martinez",role:"Agency Administrator",email:"admin@qa-hha.test",phone:"+1 (555) 123-4567",address:"456 Admin Building, Healthcare City, HC 12345",agency:"Luminous QA  Test HHA",agencyLicense:"HHA-789456",agencyNPI:"1234567890",agencyAddress:"123 Healthcare Blvd, Medical City, HC 12345",agencyPhone:"(555) 123-4567",supportEmail:"support@healthcarepartners.com",accountCreated:"Jan 07, 2025",lastUpdated:"Feb 01, 2025",totalUsers:24,totalClinicians:18,totalPatients:156,chartsThisMonth:37,avgTurnaround:"2.1 days"},wt=()=>{Pe.success("Avatar upload feature coming soon")},nt=()=>{Pe.info("Avatar removed")};return s.jsxs("div",{className:"max-w-4xl space-y-5",children:[s.jsx(er,{className:"p-6 bg-gradient-to-r from-[#10B981] to-[#059669] border-0 text-white",children:s.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Xs,{className:"w-24 h-24 border-4 border-white/30",children:s.jsx(Zs,{className:"bg-white text-[#10B981] text-2xl",children:"JM"})}),s.jsxs("div",{className:"absolute -bottom-2 left-1/2 -translate-x-1/2 flex gap-2",children:[s.jsx(hn,{children:s.jsxs(fn,{children:[s.jsx(mn,{asChild:!0,children:s.jsx("button",{onClick:wt,className:"w-8 h-8 rounded-full bg-white text-[#10B981] flex items-center justify-center shadow-lg hover:bg-slate-50 transition-colors",children:s.jsx(Ls,{className:"w-4 h-4"})})}),s.jsx(pn,{children:s.jsx("p",{children:"Upload photo"})})]})}),s.jsx(hn,{children:s.jsxs(fn,{children:[s.jsx(mn,{asChild:!0,children:s.jsx("button",{onClick:nt,className:"w-8 h-8 rounded-full bg-white text-red-600 flex items-center justify-center shadow-lg hover:bg-slate-50 transition-colors",children:s.jsx(iu,{className:"w-4 h-4"})})}),s.jsx(pn,{children:s.jsx("p",{children:"Remove photo"})})]})})]})]}),s.jsxs("div",{className:"flex-1 text-center md:text-left",children:[s.jsx("h2",{className:"text-2xl mb-1",children:Ee.name}),s.jsx(gt,{className:"bg-white/20 text-white border-white/30 mb-2",children:Ee.role}),s.jsxs("button",{onClick:()=>Kt(!0),className:"text-sm text-white/90 hover:text-white flex items-center gap-1 transition-colors mx-auto md:mx-0",children:[Ee.agency,s.jsx(pw,{className:"w-3 h-3"})]})]})]})}),s.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-white rounded-2xl p-4 border border-slate-200 shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(o6,{className:"w-4 h-4 text-[#10B981]"}),s.jsx("h3",{className:"text-sm font-semibold text-[#0f172a]",children:"Agency Overview"})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl text-[#10B981] font-semibold",children:Ee.totalUsers}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"Agency Users"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl text-[#0966CC] font-semibold",children:Ee.totalClinicians}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"Clinicians"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl text-[#F59E0B] font-semibold",children:Ee.chartsThisMonth}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"Charts this month"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl text-[#10B981] font-semibold",children:Ee.avgTurnaround}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"Avg turnaround"})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Rs,{className:"w-4 h-4 text-[#10B981]"}),s.jsx("h3",{className:"text-sm font-semibold text-[#0f172a]",children:"User Details"})]}),s.jsxs(de,{variant:"outline",size:"sm",onClick:()=>Pe.info("Edit profile coming soon"),className:"border-[#10B981] text-[#10B981] hover:bg-[#D1FAE5]",children:[s.jsx(jh,{className:"w-3 h-3 mr-2"}),"Edit"]})]}),s.jsx(er,{className:"p-5",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#D1FAE5] flex items-center justify-center flex-shrink-0",children:s.jsx(Mn,{className:"w-5 h-5 text-[#10B981]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs text-[#64748b] mb-1",children:"Email Address"}),s.jsx("p",{className:"text-sm text-[#0f172a]",children:Ee.email})]})]}),s.jsx(qr,{}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#D1FAE5] flex items-center justify-center flex-shrink-0",children:s.jsx(Yi,{className:"w-5 h-5 text-[#10B981]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs text-[#64748b] mb-1",children:"Phone Number"}),s.jsx("p",{className:"text-sm text-[#0f172a]",children:Ee.phone})]})]})]})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ga,{className:"w-4 h-4 text-[#10B981]"}),s.jsx("h3",{className:"text-sm font-semibold text-[#0f172a]",children:"Agency Information"})]}),s.jsxs(de,{variant:"ghost",size:"sm",onClick:()=>Kt(!0),className:"text-[#10B981] hover:text-[#059669] hover:bg-[#D1FAE5]",children:["View Details",s.jsx(Xr,{className:"w-4 h-4 ml-1"})]})]}),s.jsx(er,{className:"p-5",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#D1FAE5] flex items-center justify-center flex-shrink-0",children:s.jsx(Ga,{className:"w-5 h-5 text-[#10B981]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs text-[#64748b] mb-1",children:"Agency Name"}),s.jsx("p",{className:"text-sm text-[#0f172a]",children:Ee.agency})]})]}),s.jsx(qr,{}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#D1FAE5] flex items-center justify-center flex-shrink-0",children:s.jsx(Gi,{className:"w-5 h-5 text-[#10B981]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs text-[#64748b] mb-1",children:"License Number"}),s.jsx("p",{className:"text-sm text-[#0f172a]",children:Ee.agencyLicense})]})]})]})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Yi,{className:"w-4 h-4 text-[#10B981]"}),s.jsx("h3",{className:"text-sm font-semibold text-[#0f172a]",children:"Contact Information"})]}),s.jsx(er,{className:"p-5",children:s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#D1FAE5] flex items-center justify-center flex-shrink-0",children:s.jsx(Jo,{className:"w-5 h-5 text-[#10B981]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs text-[#64748b] mb-1",children:"Address"}),s.jsx("p",{className:"text-sm text-[#0f172a]",children:Ee.address})]})]})})})]}),s.jsx(er,{className:"p-4 bg-slate-50 border-slate-200",children:s.jsxs("div",{className:"flex items-start gap-2 text-xs text-[#64748b]",children:[s.jsx(Ws,{className:"w-3 h-3 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("p",{children:[" Account created: ",Ee.accountCreated]}),s.jsxs("p",{children:[" Last updated: ",Ee.lastUpdated]})]})]})}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[s.jsxs(de,{variant:"outline",className:"flex-1 border-[#0966CC] text-[#0966CC] hover:bg-[#DBEAFE]",onClick:()=>Pe.info("Support contact coming soon"),children:[s.jsx(Kx,{className:"w-4 h-4 mr-2"}),"Contact Support"]}),s.jsxs(de,{variant:"outline",className:"flex-1 border-[#64748b] text-[#64748b] hover:bg-slate-100",onClick:()=>Pe.info("Documentation coming soon"),children:[s.jsx(l6,{className:"w-4 h-4 mr-2"}),"View Docs"]})]}),s.jsx(ar,{open:ct,onOpenChange:Kt,children:s.jsxs(sr,{className:"max-w-2xl",children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Agency Details"}),s.jsx(lr,{children:"Complete information about your healthcare agency"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-[#64748b] mb-1",children:"Agency Name"}),s.jsx("p",{className:"text-sm text-[#0f172a] font-medium",children:Ee.agency})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-[#64748b] mb-1",children:"License Number"}),s.jsx("p",{className:"text-sm text-[#0f172a] font-medium",children:Ee.agencyLicense})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-[#64748b] mb-1",children:"NPI Number"}),s.jsx("p",{className:"text-sm text-[#0f172a] font-medium",children:Ee.agencyNPI})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-[#64748b] mb-1",children:"Support Email"}),s.jsx("p",{className:"text-sm text-[#0f172a] font-medium",children:Ee.supportEmail})]})]}),s.jsx(qr,{}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-[#64748b] mb-1",children:"Agency Address"}),s.jsx("p",{className:"text-sm text-[#0f172a]",children:Ee.agencyAddress})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-[#64748b] mb-1",children:"Agency Phone"}),s.jsx("p",{className:"text-sm text-[#0f172a]",children:Ee.agencyPhone})]}),s.jsx(qr,{}),s.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[s.jsx(Rs,{className:"w-4 h-4 text-[#10B981] mt-0.5"}),s.jsx("p",{className:"text-sm font-medium text-[#0f172a]",children:"Facility Users"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xl text-[#10B981] font-semibold",children:Ee.totalUsers}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"Total Users"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xl text-[#0966CC] font-semibold",children:Ee.totalClinicians}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"Clinicians"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xl text-[#F59E0B] font-semibold",children:Ee.totalPatients}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"Patients"})]})]})]})]}),s.jsxs(_r,{children:[s.jsx(de,{variant:"outline",onClick:()=>Kt(!1),children:"Close"}),s.jsx(de,{className:"bg-[#10B981] hover:bg-[#059669]",onClick:()=>t.navigate("AgencyAdminSettings"),children:"Manage Agency"})]})]})})]})},gn=()=>{const Ee=[{name:"Manage Clinicians",icon:Rs,action:()=>o("clinicians"),color:"#0966CC"},{name:"Approve Charts",icon:hr,action:()=>o("charts"),color:"#10B981"},{name:"Manage Agency Settings",icon:Ga,action:()=>Pe.info("Agency settings coming soon"),color:"#F59E0B"},{name:"Export Data",icon:Ai,action:()=>Pe.success("Data export initiated"),color:"#06B6D4"}];return s.jsxs("div",{className:"max-w-4xl space-y-5",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm text-[#64748b] mb-3 px-2",children:"ACCOUNT"}),s.jsx("div",{className:"bg-white rounded-2xl border border-[#e2e8f0] overflow-hidden",children:s.jsxs("button",{onClick:()=>o("profile"),className:"w-full flex items-center justify-between p-4 hover:bg-[#f8fafc] transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#D1FAE5] flex items-center justify-center",children:s.jsx(Bn,{className:"w-5 h-5 text-[#10B981]"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"text-sm text-[#0f172a]",children:"Profile"}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"View your profile"})]})]}),s.jsx(Xr,{className:"w-5 h-5 text-[#cbd5e1]"})]})})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm text-[#64748b] mb-3 px-2",children:"SECURITY"}),s.jsx(er,{className:"p-5",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#DBEAFE] flex items-center justify-center flex-shrink-0",children:s.jsx(fs,{className:"w-5 h-5 text-[#0966CC]"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-[#0f172a] mb-1",children:"Password"}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"Last changed 30 days ago"})]})]}),s.jsx(de,{variant:"ghost",size:"sm",onClick:()=>Be(!0),className:"text-[#0966CC] hover:text-[#075985] hover:bg-[#DBEAFE]",children:"Change"})]}),s.jsx(qr,{}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#D1FAE5] flex items-center justify-center flex-shrink-0",children:s.jsx(M0,{className:"w-5 h-5 text-[#10B981]"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("p",{className:"text-sm text-[#0f172a]",children:"Two-Factor Authentication"}),pe&&s.jsx(gt,{variant:"outline",className:"border-[#10B981] text-[#10B981] text-xs h-5",children:" Enabled"})]}),s.jsx("p",{className:"text-xs text-[#64748b]",children:pe?"Extra security for your account":"Add extra layer of security"})]})]}),s.jsx(Si,{checked:pe,onCheckedChange:fi,className:"data-[state=checked]:bg-[#10B981]"})]}),s.jsx(qr,{}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#FEF3C7] flex items-center justify-center flex-shrink-0",children:s.jsx(L0,{className:"w-5 h-5 text-[#F59E0B]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm text-[#0f172a] mb-1",children:"Last Login"}),s.jsx("p",{className:"text-xs text-[#64748b]",children:" Phoenix, AZ"}),s.jsx("p",{className:"text-xs text-[#64748b]",children:" Today at 9:42 AM"})]})]}),s.jsx(qr,{}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#E0E7FF] flex items-center justify-center flex-shrink-0",children:s.jsx(cc,{className:"w-5 h-5 text-[#4F46E5]"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-[#0f172a] mb-1",children:"Active Sessions"}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"3 devices signed in"})]})]}),s.jsx(de,{variant:"ghost",size:"sm",onClick:()=>vt(!0),className:"text-[#4F46E5] hover:text-[#4338CA] hover:bg-[#E0E7FF]",children:"View"})]})]})})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm text-[#64748b] mb-3 px-2",children:"QUICK ACTIONS"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Ee.map((wt,nt)=>{const Qr=wt.icon;return s.jsxs(de,{onClick:wt.action,variant:"outline",className:"h-auto p-4 flex items-center justify-start gap-3 hover:border-[#10B981] hover:bg-[#D1FAE5] transition-colors",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0",style:{backgroundColor:`${wt.color}20`},children:s.jsx(Qr,{className:"w-5 h-5",style:{color:wt.color}})}),s.jsx("span",{className:"text-sm text-[#0f172a]",children:wt.name}),s.jsx(Xr,{className:"w-4 h-4 text-[#cbd5e1] ml-auto"})]},nt)})})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm text-[#64748b] mb-3 px-2",children:"NOTIFICATIONS"}),s.jsxs("div",{className:"bg-white rounded-2xl border border-[#e2e8f0] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[#e2e8f0]",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#D1FAE5] flex items-center justify-center",children:s.jsx(Mn,{className:"w-5 h-5 text-[#10B981]"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-[#0f172a]",children:"Email Notifications"}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"Receive email updates"})]})]}),s.jsx(Si,{className:"data-[state=checked]:bg-[#10B981]",defaultChecked:!0})]}),s.jsxs("div",{className:"flex items-center justify-between p-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#FEF3C7] flex items-center justify-center",children:s.jsx(hr,{className:"w-5 h-5 text-[#F59E0B]"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-[#0f172a]",children:"Chart Alerts"}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"Pending review notifications"})]})]}),s.jsx(Si,{className:"data-[state=checked]:bg-[#10B981]",defaultChecked:!0})]})]})]}),s.jsx(ar,{open:ye,onOpenChange:st,children:s.jsxs(sr,{children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Enable Two-Factor Authentication"}),s.jsx(lr,{children:"Scan the QR code with your authenticator app"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsx("div",{className:"w-48 h-48 bg-slate-100 rounded-lg mx-auto flex items-center justify-center",children:s.jsx("p",{className:"text-sm text-slate-500",children:"QR Code Here"})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-[#0f172a]",children:"Verification Code"}),s.jsx("input",{type:"text",className:"w-full h-10 px-3 rounded-lg border border-slate-300 focus:outline-none focus:ring-2 focus:ring-[#10B981]",placeholder:"Enter 6-digit code"})]})]}),s.jsxs(_r,{children:[s.jsx(de,{variant:"outline",onClick:()=>st(!1),children:"Cancel"}),s.jsx(de,{className:"bg-[#10B981] hover:bg-[#059669]",onClick:()=>{st(!1),Pe.success("Two-factor authentication enabled")},children:"Verify & Enable"})]})]})}),s.jsx(ar,{open:Ve,onOpenChange:vt,children:s.jsxs(sr,{className:"max-w-2xl",children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Active Sessions"}),s.jsx(lr,{children:"Manage devices where you're currently signed in"})]}),s.jsx("div",{className:"space-y-3 py-4 max-h-96 overflow-y-auto",children:Ya.map(wt=>s.jsx(er,{className:"p-4",children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#DBEAFE] flex items-center justify-center flex-shrink-0",children:s.jsx(cc,{className:"w-5 h-5 text-[#0966CC]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("p",{className:"text-sm font-medium text-[#0f172a]",children:wt.device}),wt.current&&s.jsx(gt,{variant:"outline",className:"border-[#10B981] text-[#10B981] text-xs h-5",children:"Current"})]}),s.jsxs("p",{className:"text-xs text-[#64748b]",children:[" ",wt.location]}),s.jsxs("p",{className:"text-xs text-[#64748b]",children:["IP: ",wt.ip]}),s.jsx("p",{className:"text-xs text-[#64748b]",children:wt.lastActive})]})]}),!wt.current&&s.jsx(de,{variant:"ghost",size:"sm",onClick:()=>ze(wt.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:"Revoke"})]})},wt.id))}),s.jsxs(_r,{children:[s.jsx(de,{variant:"outline",onClick:()=>vt(!1),children:"Close"}),s.jsxs(de,{variant:"destructive",onClick:()=>{Pe.success("All other sessions revoked"),vt(!1)},children:[s.jsx(go,{className:"w-4 h-4 mr-2"}),"Revoke All Others"]})]})]})}),s.jsx(ar,{open:tt,onOpenChange:Be,children:s.jsxs(sr,{children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Change Password"}),s.jsx(lr,{children:"Choose a strong password to keep your account secure"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-[#0f172a]",children:"Current Password"}),s.jsx("input",{type:"password",className:"w-full h-10 px-3 rounded-lg border border-slate-300 focus:outline-none focus:ring-2 focus:ring-[#10B981]",placeholder:"Enter current password"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-[#0f172a]",children:"New Password"}),s.jsx("input",{type:"password",className:"w-full h-10 px-3 rounded-lg border border-slate-300 focus:outline-none focus:ring-2 focus:ring-[#10B981]",placeholder:"Enter new password"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-[#0f172a]",children:"Confirm New Password"}),s.jsx("input",{type:"password",className:"w-full h-10 px-3 rounded-lg border border-slate-300 focus:outline-none focus:ring-2 focus:ring-[#10B981]",placeholder:"Confirm new password"})]})]}),s.jsxs(_r,{children:[s.jsx(de,{variant:"outline",onClick:()=>Be(!1),children:"Cancel"}),s.jsx(de,{className:"bg-[#10B981] hover:bg-[#059669]",onClick:()=>{Be(!1),Pe.success("Password changed successfully")},children:"Update Password"})]})]})})]})};return s.jsxs("div",{className:"h-screen flex bg-[#f8fafc] overflow-hidden",children:[s.jsxs("aside",{className:"hidden md:flex md:flex-col w-64 bg-white border-r border-[#e2e8f0]",children:[s.jsxs("div",{className:"border-b border-[#e2e8f0] p-6",children:[s.jsx("div",{className:"mb-1 text-sm text-[#64748b]",children:ge}),s.jsx("div",{className:"text-lg text-[#0f172a]",children:"Agency Admin"})]}),s.jsx("div",{className:"flex-1 py-4 px-3 overflow-y-auto",children:Ms()}),s.jsx("div",{className:"border-t border-[#e2e8f0] p-4",children:s.jsxs(de,{onClick:jt,variant:"outline",className:"w-full border-[#DC2626] text-[#DC2626] hover:bg-[#FEE2E2]",children:[s.jsx(su,{className:"w-4 h-4 mr-2"}),"Sign Out"]})})]}),s.jsx(Jd,{open:n,onOpenChange:a,children:s.jsxs(Qd,{side:"left",className:"w-[280px] sm:w-[320px] p-0 flex flex-col",children:[s.jsxs(eu,{className:"border-b border-[#e2e8f0] p-6",children:[s.jsxs(tu,{className:"text-left",children:[s.jsx("div",{className:"mb-1 text-sm text-[#64748b]",children:ge}),s.jsx("div",{className:"text-lg text-[#0f172a]",children:"Agency Admin"})]}),s.jsx(Df,{className:"sr-only",children:"Navigation menu for Agency Admin Portal"})]}),s.jsx("div",{className:"flex-1 py-4 px-3 overflow-y-auto",children:Ms()}),s.jsx("div",{className:"border-t border-[#e2e8f0] p-4",children:s.jsxs(de,{onClick:jt,variant:"outline",className:"w-full border-[#DC2626] text-[#DC2626] hover:bg-[#FEE2E2]",children:[s.jsx(su,{className:"w-4 h-4 mr-2"}),"Sign Out"]})})]})}),s.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s.jsx("header",{className:"bg-white border-b border-[#e2e8f0] px-6 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>a(!0),className:"md:hidden w-10 h-10 rounded-xl bg-[#f8fafc] hover:bg-[#f1f5f9] flex items-center justify-center transition-colors",children:s.jsx(b1,{className:"w-5 h-5 text-[#64748b]"})}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-xl text-[#0f172a]",children:[i==="charts"&&"Charts",i==="patients"&&"Patients",i==="clinicians"&&"Clinicians",i==="users"&&"Users & Onboarding",i==="profile"&&"My Profile",i==="settings"&&"Settings"]}),s.jsxs("p",{className:"text-sm text-[#64748b]",children:[i==="charts"&&"Review and manage patient charts",i==="patients"&&"Manage patient information",i==="clinicians"&&"Manage clinician accounts",i==="users"&&"Onboard and manage users",i==="profile"&&"View and manage your profile",i==="settings"&&"Manage your account settings"]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"hidden sm:flex items-center gap-2 px-3 py-1.5 rounded-lg bg-[#f8fafc]",children:p?s.jsxs(s.Fragment,{children:[s.jsx(h6,{className:"w-4 h-4 text-[#10B981]"}),s.jsx("span",{className:"text-xs text-[#10B981]",children:"Online"})]}):s.jsxs(s.Fragment,{children:[s.jsx(Tf,{className:"w-4 h-4 text-[#DC2626]"}),s.jsx("span",{className:"text-xs text-[#DC2626]",children:"Offline"})]})}),s.jsxs("button",{className:"w-10 h-10 rounded-xl bg-[#f8fafc] hover:bg-[#f1f5f9] flex items-center justify-center relative transition-colors",children:[s.jsx(xh,{className:"w-5 h-5 text-[#64748b]"}),gr>0&&s.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 rounded-full bg-[#F59E0B] border-2 border-white"})]})]})]})}),s.jsxs("main",{className:"flex-1 overflow-y-auto p-6",children:[i==="charts"&&Fa(),i==="patients"&&s.jsx(A7,{}),i==="clinicians"&&Js(),i==="users"&&s.jsx(F7,{}),i==="profile"&&ft(),i==="settings"&&gn()]})]}),s.jsx(om,{position:"top-right"}),s.jsx(ar,{open:m,onOpenChange:x,children:s.jsxs(sr,{className:"sm:max-w-[500px]",children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Add New Patient"}),s.jsx(lr,{children:"Enter patient information to create a new record"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"name",children:"Full Name *"}),s.jsx(Ze,{id:"name",value:qt.name,onChange:Ee=>Tt({...qt,name:Ee.target.value}),placeholder:"Jane Doe",className:"mt-2 h-12 rounded-xl border-2 border-[#e2e8f0] bg-white"})]}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"dob",children:"Date of Birth *"}),s.jsx(Ze,{id:"dob",type:"date",value:qt.dob,onChange:Ee=>Tt({...qt,dob:Ee.target.value}),className:"mt-2 h-12 rounded-xl border-2 border-[#e2e8f0] bg-white"})]}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"address",children:"Address"}),s.jsx(Ze,{id:"address",value:qt.address,onChange:Ee=>Tt({...qt,address:Ee.target.value}),placeholder:"123 Main St, City, State",className:"mt-2 h-12 rounded-xl border-2 border-[#e2e8f0] bg-white"})]}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"phone",children:"Phone"}),s.jsx(Ze,{id:"phone",value:qt.phone,onChange:Ee=>Tt({...qt,phone:Ee.target.value}),placeholder:"(555) 123-4567",className:"mt-2 h-12 rounded-xl border-2 border-[#e2e8f0] bg-white"})]})]}),s.jsxs(_r,{children:[s.jsx(de,{variant:"outline",onClick:()=>x(!1),className:"h-12 rounded-xl",children:"Cancel"}),s.jsxs(de,{onClick:Vn,className:"h-12 rounded-xl bg-[#10B981] hover:bg-[#059669] text-white",children:[s.jsx(Da,{className:"w-4 h-4 mr-2"}),"Add Patient"]})]})]})}),s.jsx(ar,{open:w,onOpenChange:j,children:s.jsxs(sr,{className:"sm:max-w-[600px]",children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Advanced Search"}),s.jsx(lr,{children:"Search charts with multiple filters"})]}),s.jsx("div",{className:"space-y-4 py-4",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"adv-patient",children:"Patient Name"}),s.jsx(Ze,{id:"adv-patient",value:ot.patientName,onChange:Ee=>Ct({...ot,patientName:Ee.target.value}),placeholder:"Search...",className:"mt-2"})]}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"adv-clinician",children:"Clinician Name"}),s.jsx(Ze,{id:"adv-clinician",value:ot.clinicianName,onChange:Ee=>Ct({...ot,clinicianName:Ee.target.value}),placeholder:"Search...",className:"mt-2"})]}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"adv-date-from",children:"Date From"}),s.jsx(Ze,{id:"adv-date-from",type:"date",value:ot.dateFrom,onChange:Ee=>Ct({...ot,dateFrom:Ee.target.value}),className:"mt-2"})]}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"adv-date-to",children:"Date To"}),s.jsx(Ze,{id:"adv-date-to",type:"date",value:ot.dateTo,onChange:Ee=>Ct({...ot,dateTo:Ee.target.value}),className:"mt-2"})]}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"adv-source",children:"Scan Source"}),s.jsxs(oa,{value:ot.scanSource,onValueChange:Ee=>Ct({...ot,scanSource:Ee}),children:[s.jsx(ca,{className:"mt-2",children:s.jsx(la,{placeholder:"All sources"})}),s.jsxs(da,{children:[s.jsx(Bt,{value:"all",children:"All Sources"}),s.jsx(Bt,{value:"bottle",children:"Bottle Scan"}),s.jsx(Bt,{value:"pdf",children:"PDF Import"}),s.jsx(Bt,{value:"manual",children:"Manual Entry"})]})]})]}),s.jsx("div",{className:"flex items-end",children:s.jsxs("div",{className:"flex items-center space-x-2 pb-2",children:[s.jsx(bo,{id:"adv-confidence",checked:ot.confidenceIssues,onCheckedChange:Ee=>Ct({...ot,confidenceIssues:Ee})}),s.jsx(Fe,{htmlFor:"adv-confidence",className:"text-sm cursor-pointer",children:"Low confidence only"})]})})]})}),s.jsxs(_r,{children:[s.jsx(de,{variant:"outline",onClick:()=>{Ct({patientName:"",clinicianName:"",dateFrom:"",dateTo:"",scanSource:"",confidenceIssues:!1})},children:"Clear Filters"}),s.jsxs(de,{onClick:()=>{Pe.info("Advanced search applied"),j(!1)},className:"bg-[#10B981] hover:bg-[#059669] text-white",children:[s.jsx(Zi,{className:"w-4 h-4 mr-2"}),"Apply Filters"]})]})]})}),s.jsx(ar,{open:C,onOpenChange:S,children:s.jsxs(sr,{className:"sm:max-w-[500px]",children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Reopen Delivered Chart"}),s.jsx(lr,{children:"This chart is locked. Please provide a reason for reopening for audit purposes."})]}),s.jsxs("div",{className:"py-4",children:[s.jsx(Fe,{htmlFor:"reopen-reason",children:"Audit Reason *"}),s.jsx(uu,{id:"reopen-reason",value:M,onChange:Ee=>q(Ee.target.value),placeholder:"e.g., Medication dosage correction needed, patient request...",className:"mt-2 min-h-[100px]"})]}),s.jsxs(_r,{children:[s.jsx(de,{variant:"outline",onClick:()=>{S(!1),q(""),B(null)},children:"Cancel"}),s.jsxs(de,{onClick:ba,className:"bg-[#DC2626] hover:bg-[#B91C1C] text-white",children:[s.jsx(Xm,{className:"w-4 h-4 mr-2"}),"Reopen Chart"]})]})]})}),s.jsx(ar,{open:k,onOpenChange:P,children:s.jsxs(sr,{className:"sm:max-w-[500px]",children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Return Chart to Clinician"}),s.jsx(lr,{children:"Provide feedback for the clinician about what needs to be corrected."})]}),s.jsxs("div",{className:"py-4",children:[s.jsx(Fe,{htmlFor:"return-note",children:"Feedback for Clinician *"}),s.jsx(uu,{id:"return-note",value:re,onChange:Ee=>ee(Ee.target.value),placeholder:"e.g., Please verify medication dosages, missing prescription details...",className:"mt-2 min-h-[100px]"})]}),s.jsxs(_r,{children:[s.jsx(de,{variant:"outline",onClick:()=>{P(!1),ee(""),B(null)},children:"Cancel"}),s.jsxs(de,{onClick:Ra,className:"bg-[#F59E0B] hover:bg-[#D97706] text-white",children:[s.jsx(ln,{className:"w-4 h-4 mr-2"}),"Return for Edits"]})]})]})}),s.jsx(ar,{open:O,onOpenChange:$,children:s.jsxs(sr,{className:"sm:max-w-[500px]",children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Reassign Chart"}),s.jsx(lr,{children:"Select a clinician to reassign this chart to."})]}),s.jsxs("div",{className:"py-4",children:[s.jsx(Fe,{htmlFor:"reassign-clinician",children:"Clinician *"}),s.jsxs(oa,{value:H,onValueChange:se,children:[s.jsx(ca,{className:"mt-2",children:s.jsx(la,{placeholder:"Select clinician..."})}),s.jsx(da,{children:T.filter(Ee=>Ee.role==="clinician").map(Ee=>s.jsxs(Bt,{value:Ee.id,children:[Ee.first_name," ",Ee.last_name," (",Ee.assigned_chart_count||0," patients)"]},Ee.id))})]})]}),s.jsxs(_r,{children:[s.jsx(de,{variant:"outline",onClick:()=>{$(!1),se(""),B(null)},children:"Cancel"}),s.jsxs(de,{onClick:La,className:"bg-[#0966CC] hover:bg-[#075985] text-white",children:[s.jsx(yx,{className:"w-4 h-4 mr-2"}),"Reassign Chart"]})]})]})}),s.jsx(js.div,{initial:{y:100,opacity:0},animate:{y:U.length>0?0:100,opacity:U.length>0?1:0},transition:{duration:.3,ease:"easeOut"},className:`fixed bottom-6 left-1/2 transform -translate-x-1/2 z-50 ${U.length===0?"pointer-events-none":""}`,children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl border-2 border-[#10B981] px-6 py-4 flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2 pr-4 border-r border-slate-200",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-[#10B981] flex items-center justify-center",children:s.jsx(Hs,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:[U.length," selected"]}),s.jsx("p",{className:"text-xs text-slate-500",children:"Bulk actions"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(hn,{children:s.jsxs(fn,{children:[s.jsx(mn,{children:s.jsxs(de,{variant:"outline",size:"sm",onClick:()=>wn(),className:"border-[#F59E0B] text-[#F59E0B] hover:bg-[#F59E0B]/10",children:[s.jsx(ln,{className:"w-4 h-4 mr-2"}),"Return to Clinician"]})}),s.jsx(pn,{children:s.jsx("p",{children:"Send selected charts back for corrections"})})]})}),s.jsx(hn,{children:s.jsxs(fn,{children:[s.jsx(mn,{children:s.jsxs(de,{variant:"outline",size:"sm",onClick:()=>yr(),className:"border-[#10B981] text-[#10B981] hover:bg-[#10B981]/10",children:[s.jsx(Hs,{className:"w-4 h-4 mr-2"}),"Approve & Lock"]})}),s.jsx(pn,{children:s.jsx("p",{children:"Approve and finalize selected charts"})})]})}),s.jsx(hn,{children:s.jsxs(fn,{children:[s.jsx(mn,{children:s.jsxs(de,{variant:"outline",size:"sm",onClick:()=>$(!0),className:"border-[#0966CC] text-[#0966CC] hover:bg-[#0966CC]/10",children:[s.jsx(yx,{className:"w-4 h-4 mr-2"}),"Bulk Assign"]})}),s.jsx(pn,{children:s.jsx("p",{children:"Assign selected charts to a clinician"})})]})}),s.jsx(hn,{children:s.jsxs(fn,{children:[s.jsx(mn,{children:s.jsxs(de,{variant:"outline",size:"sm",onClick:()=>Pe.info("Downloading PDFs..."),className:"border-slate-300 text-slate-700 hover:bg-slate-100",children:[s.jsx(Ai,{className:"w-4 h-4 mr-2"}),"Download PDFs"]})}),s.jsx(pn,{children:s.jsx("p",{children:"Download PDFs for all selected charts"})})]})}),s.jsx(de,{variant:"ghost",size:"icon",onClick:()=>K([]),className:"ml-2 text-slate-400 hover:text-slate-600",children:s.jsx(ps,{className:"w-4 h-4"})})]})]})}),!p&&s.jsx(js.div,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},className:"fixed top-20 left-1/2 transform -translate-x-1/2 z-50",children:s.jsxs("div",{className:"bg-[#DC2626] text-white px-4 py-2 rounded-lg shadow-lg flex items-center gap-2",children:[s.jsx(Tf,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:"Offline  some actions unavailable"})]})})]})}const Km=[{id:"c1",patientName:"Jane Test",patientDob:"1969-12-31",status:"Pending Review",type:"Bottle Scan",medicationCount:3,createdDate:"2025-01-17",createdBy:"Anna Clinician",finalizedDate:"2025-01-17",lowestConfidence:72,verifiedBy:"Anna Clinician",daysOld:3,hasLowConfidence:!0},{id:"c2",patientName:"Jane Test",patientDob:"1969-12-31",status:"Verified",type:"Manual Entry",medicationCount:2,createdDate:"2025-01-15",createdBy:"Anna Clinician",finalizedDate:"2025-01-16",lowestConfidence:95,verifiedBy:"Anna Clinician",reviewedBy:"John Jones",daysOld:1,hasLowConfidence:!1},{id:"c3",patientName:"John Sample",patientDob:"1972-02-01",status:"Active",type:"PDF Import",medicationCount:1,createdDate:"2025-01-16",createdBy:"Anna Clinician",daysOld:1,hasLowConfidence:!1},{id:"c4",patientName:"Sarah Martinez",patientDob:"1955-07-12",status:"Delivered",type:"Bottle Scan",medicationCount:5,createdDate:"2025-01-10",createdBy:"Bob Clinician",finalizedDate:"2025-01-11",lowestConfidence:88,verifiedBy:"Bob Clinician",reviewedBy:"Admin User",deliveryTimestamp:"2025-01-11T14:30:00",daysOld:7,hasLowConfidence:!1}];function hte({navigation:t}){const{logout:e,user:r}=Ka(),[n,a]=N.useState(""),[i,o]=N.useState("all"),[l,c]=N.useState(!1),[u,h]=N.useState(!1),[m,x]=N.useState(null),[p,y]=N.useState(!1),[w,j]=N.useState(!1),[C,S]=N.useState(""),[k,P]=N.useState(null),O=()=>{e(),t.navigate("Landing")},$=(H,se)=>{Pe.success(`Opening chart for ${se}`),t.navigate("ChartDetailView",{chartId:H,patientName:se})},R=async H=>{if(!r?.id){Pe.error("User not authenticated");return}try{P(H),await B6(H,r.id),Pe.success("Chart approved and locked successfully")}catch(se){console.error("Error approving chart:",se),Pe.error(se.message||"Failed to approve chart")}finally{P(null)}},B=()=>{if(!C.trim()){Pe.error("Please provide notes for returning the chart");return}Pe.success("Chart returned to clinician with notes"),j(!1),S("")},U=H=>{Pe.info("Downloading chart PDF...")},K=H=>{Pe.info("Opening audit trail...")},M=H=>{Pe.warning("Chart reopened - status changed to Active")},q=Km.filter(H=>{const se=H.patientName.toLowerCase().includes(n.toLowerCase())||H.patientDob.includes(n)||H.createdBy.toLowerCase().includes(n.toLowerCase()),ue=i==="all"||i==="needs-review"&&(H.status==="Verified"||H.status==="Pending Review")||H.status.toLowerCase().replace(" ","-")===i;return se&&ue}),re={all:Km.length,needsReview:Km.filter(H=>H.status==="Verified"||H.status==="Pending Review").length,active:Km.filter(H=>H.status==="Active").length,delivered:Km.filter(H=>H.status==="Delivered").length},ee=H=>{const ue={Active:{color:"bg-[#0EA5E9] text-white border-[#0EA5E9]",icon:s.jsx(lc,{className:"w-3 h-3"})},Verified:{color:"bg-[#8B5CF6] text-white border-[#8B5CF6]",icon:s.jsx(kr,{className:"w-3 h-3"})},"Pending Review":{color:"bg-[#F59E0B] text-white border-[#F59E0B]",icon:s.jsx(iD,{className:"w-3 h-3"})},Delivered:{color:"bg-[#10B981] text-white border-[#10B981]",icon:s.jsx(fs,{className:"w-3 h-3"})}}[H];return s.jsxs(gt,{variant:"outline",className:`${ue.color} flex items-center gap-1 text-xs`,children:[ue.icon,H]})};return s.jsxs("div",{className:"min-h-screen bg-[#f8fafc] flex flex-col",children:[s.jsx(om,{}),s.jsxs(js.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-[#10B981] to-[#059669] p-5 shadow-lg sticky top-0 z-40",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(de,{onClick:()=>t.goBack(),variant:"ghost",size:"icon",className:"h-10 w-10 rounded-xl bg-white/15 hover:bg-white/25 text-white",children:s.jsx(ln,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-white text-xl font-semibold",children:"All Charts"}),s.jsxs("p",{className:"text-white/80 text-sm",children:[q.length," chart",q.length!==1?"s":""]})]})]}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsx(de,{onClick:()=>c(!0),variant:"ghost",size:"icon",className:"h-10 w-10 rounded-xl bg-white/15 hover:bg-white/25 text-white",children:s.jsx(Bn,{className:"w-5 h-5"})})})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Zi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),s.jsx(Ze,{value:n,onChange:H=>a(H.target.value),placeholder:"Search by patient, DOB, or clinician...",className:"pl-10 h-12 rounded-xl border-2 border-white/20 bg-white/95 text-slate-900 placeholder:text-slate-500"})]}),s.jsx(de,{onClick:()=>h(!u),variant:"outline",className:"h-12 px-4 rounded-xl border-2 border-white/20 bg-white/95 hover:bg-white text-slate-700",children:s.jsx(u6,{className:"w-5 h-5"})})]})]}),s.jsx("div",{className:"bg-white border-b border-slate-200 px-5 py-3 overflow-x-auto",children:s.jsxs("div",{className:"flex gap-2 min-w-max",children:[s.jsxs(js.button,{whileTap:{scale:.95},onClick:()=>o("all"),className:`px-4 py-2 rounded-xl text-sm font-medium transition-all ${i==="all"?"bg-[#10B981] text-white shadow-sm":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:["All Charts (",re.all,")"]}),s.jsxs(js.button,{whileTap:{scale:.95},onClick:()=>o("needs-review"),className:`px-4 py-2 rounded-xl text-sm font-medium transition-all ${i==="needs-review"?"bg-[#F59E0B] text-white shadow-sm":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:[s.jsx(Kn,{className:"w-4 h-4 inline mr-1"}),"Needs Review (",re.needsReview,")"]}),s.jsxs(js.button,{whileTap:{scale:.95},onClick:()=>o("active"),className:`px-4 py-2 rounded-xl text-sm font-medium transition-all ${i==="active"?"bg-[#0EA5E9] text-white shadow-sm":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:["Active (",re.active,")"]}),s.jsxs(js.button,{whileTap:{scale:.95},onClick:()=>o("delivered"),className:`px-4 py-2 rounded-xl text-sm font-medium transition-all ${i==="delivered"?"bg-[#10B981] text-white shadow-sm":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:[s.jsx(fs,{className:"w-4 h-4 inline mr-1"}),"Delivered (",re.delivered,")"]})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto p-5",children:s.jsx("div",{className:"max-w-4xl mx-auto space-y-4",children:s.jsx(nz,{mode:"popLayout",children:q.length===0?s.jsxs(js.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"bg-white rounded-2xl border border-slate-200 p-12 text-center",children:[s.jsx(hr,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-slate-900 font-semibold mb-2",children:"No charts found"}),s.jsx("p",{className:"text-slate-600",children:"Try adjusting your search or filters"})]}):q.map((H,se)=>s.jsx(js.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:se*.05},whileHover:{scale:1.01},className:`bg-white rounded-2xl shadow-sm hover:shadow-md transition-all ${H.hasLowConfidence||H.daysOld&&H.daysOld>2?"border-2 border-[#DC2626]/20":"border border-slate-200"}`,children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[ee(H.status),H.daysOld&&H.daysOld>2&&s.jsxs(gt,{variant:"outline",className:"text-xs border-[#DC2626] text-[#DC2626]",children:[s.jsx(Ws,{className:"w-3 h-3 mr-1"}),H.daysOld," day",H.daysOld!==1?"s":""," old"]}),H.hasLowConfidence&&s.jsx(hn,{children:s.jsxs(fn,{children:[s.jsx(mn,{className:"inline-flex",children:s.jsxs(gt,{variant:"outline",className:"border-[#F59E0B] text-[#F59E0B] text-xs",children:[s.jsx(go,{className:"w-3 h-3 mr-1"}),"Low Confidence"]})}),s.jsxs(pn,{children:[s.jsxs("p",{children:["Lowest confidence: ",H.lowestConfidence,"%"]}),s.jsx("p",{className:"text-xs text-[#94a3b8]",children:"May need manual review"})]})]})})]}),s.jsx("h3",{className:"text-slate-900 font-semibold text-lg",children:H.patientName}),s.jsxs("p",{className:"text-sm text-slate-600",children:["DOB: ",new Date(H.patientDob).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]}),s.jsxs(Yf,{children:[s.jsx(Xf,{asChild:!0,children:s.jsx(de,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-lg hover:bg-slate-100",children:s.jsx(R0,{className:"w-4 h-4"})})}),s.jsxs(Zf,{align:"end",className:"w-56",children:[s.jsx(Kb,{children:"Chart Actions"}),s.jsx(Go,{}),s.jsxs(on,{onClick:()=>$(H.id,H.patientName),children:[s.jsx(hs,{className:"w-4 h-4 mr-2"}),"View Chart"]}),H.status!=="Delivered"&&s.jsxs(s.Fragment,{children:[s.jsxs(on,{onClick:()=>{x(H.id),y(!0)},children:[s.jsx(yx,{className:"w-4 h-4 mr-2"}),"Reassign Clinician"]}),s.jsxs(on,{onClick:()=>{x(H.id),j(!0)},children:[s.jsx(ln,{className:"w-4 h-4 mr-2"}),"Return for Edits"]})]}),s.jsxs(on,{onClick:()=>Pe.info("Add note feature coming soon"),children:[s.jsx(Kx,{className:"w-4 h-4 mr-2"}),"Add Admin Note"]}),s.jsx(Go,{}),s.jsxs(on,{onClick:()=>U(H.id),children:[s.jsx(Ai,{className:"w-4 h-4 mr-2"}),"Download PDF"]}),s.jsxs(on,{onClick:()=>K(H.id),children:[s.jsx(Kd,{className:"w-4 h-4 mr-2"}),"View Audit Trail"]}),H.status==="Delivered"&&s.jsxs(s.Fragment,{children:[s.jsx(Go,{}),s.jsxs(on,{onClick:()=>M(H.id),className:"text-[#DC2626]",children:[s.jsx(Xm,{className:"w-4 h-4 mr-2"}),"Reopen Chart"]})]})]})]})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm text-slate-600 mb-3",children:[s.jsx("span",{className:"font-medium",children:H.type}),H.medicationCount>0&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:""}),s.jsxs("span",{children:[H.medicationCount," medication",H.medicationCount!==1?"s":""]})]}),H.lowestConfidence&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:""}),s.jsxs("span",{className:H.hasLowConfidence?"text-[#F59E0B] font-medium":"",children:["Confidence: ",H.lowestConfidence,"%"]})]})]}),s.jsx(hn,{children:s.jsxs(fn,{children:[s.jsx(mn,{className:"inline-flex text-xs text-slate-500 mb-3 cursor-help",children:s.jsxs("span",{children:[new Date(H.createdDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),"  ",s.jsx("span",{className:"font-semibold text-slate-900",children:H.createdBy}),H.finalizedDate&&"  Finalized"]})}),s.jsx(pn,{side:"top",className:"max-w-xs",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-semibold text-slate-400",children:"Created"}),s.jsx("p",{children:new Date(H.createdDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-semibold text-slate-400",children:"Clinician"}),s.jsx("p",{className:"font-semibold",children:H.createdBy})]}),H.finalizedDate&&s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-semibold text-slate-400",children:"Finalized"}),s.jsx("p",{children:new Date(H.finalizedDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})]})})]})}),(H.verifiedBy||H.reviewedBy||H.deliveryTimestamp)&&s.jsxs(js.div,{initial:{opacity:.7},whileHover:{opacity:1},className:"bg-slate-50 rounded-lg p-3 space-y-1 text-xs transition-opacity",children:[H.verifiedBy&&s.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[s.jsx(kr,{className:"w-3 h-3 text-[#10B981]"}),s.jsxs("span",{children:["Verified by: ",s.jsx("span",{className:"text-slate-900 font-medium",children:H.verifiedBy})]})]}),H.reviewedBy&&s.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[s.jsx(hs,{className:"w-3 h-3 text-[#0966CC]"}),s.jsxs("span",{children:["Admin Reviewed: ",s.jsx("span",{className:"text-slate-900 font-medium",children:H.reviewedBy})]})]}),H.deliveryTimestamp&&s.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[s.jsx(Hs,{className:"w-3 h-3 text-[#4F46E5]"}),s.jsxs("span",{children:["Delivery: ",s.jsx("span",{className:"text-slate-900 font-medium",children:new Date(H.deliveryTimestamp).toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]})]}),s.jsxs("button",{onClick:()=>K(H.id),className:"text-[#10B981] hover:text-[#059669] flex items-center gap-1 font-medium mt-1 transition-colors",children:[s.jsx(Kd,{className:"w-3 h-3"}),"View Audit Trail"]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[(H.status==="Verified"||H.status==="Pending Review")&&s.jsxs(s.Fragment,{children:[s.jsxs(de,{size:"sm",onClick:()=>$(H.id,H.patientName),className:"bg-[#10B981] hover:bg-[#059669] text-white rounded-xl",children:[s.jsx(hs,{className:"w-4 h-4 mr-2"}),"Review Chart"]}),s.jsx(de,{size:"sm",variant:"outline",onClick:()=>R(H.id),disabled:k===H.id,className:"border-[#10B981] text-[#10B981] hover:bg-[#10B981]/10 rounded-xl",children:k===H.id?s.jsxs(s.Fragment,{children:[s.jsx(Pl,{className:"w-4 h-4 mr-2 animate-spin"}),"Approving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(kl,{className:"w-4 h-4 mr-2"}),"Approve & Lock"]})})]}),H.status==="Active"&&s.jsxs(de,{size:"sm",variant:"outline",onClick:()=>$(H.id,H.patientName),className:"rounded-xl",children:[s.jsx(hs,{className:"w-4 h-4 mr-2"}),"View Details"]}),H.status==="Delivered"&&s.jsxs(de,{size:"sm",variant:"outline",onClick:()=>U(H.id),className:"rounded-xl",children:[s.jsx(Ai,{className:"w-4 h-4 mr-2"}),"Download"]})]})]})},H.id))})})}),s.jsx(Jd,{open:l,onOpenChange:c,children:s.jsxs(Qd,{side:"right",className:"w-full sm:max-w-md",children:[s.jsx(eu,{children:s.jsx(tu,{children:"Admin Profile"})}),s.jsxs("div",{className:"py-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(Xs,{className:"h-16 w-16 bg-gradient-to-br from-[#10B981] to-[#059669]",children:s.jsx(Zs,{className:"text-white text-xl",children:"JJ"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-slate-900",children:"John Jones"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Agency Admin"}),s.jsx(gt,{variant:"outline",className:"mt-1 text-xs",children:"Healthcare Plus Agency"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs(de,{variant:"outline",className:"w-full justify-start h-12 rounded-xl",onClick:()=>{c(!1),t.navigate("AgencyAdminProfile")},children:[s.jsx(Bn,{className:"w-5 h-5 mr-3"}),"View Profile"]}),s.jsxs(de,{variant:"outline",className:"w-full justify-start h-12 rounded-xl",onClick:()=>{c(!1),t.navigate("AgencyAdminSettings")},children:[s.jsx(au,{className:"w-5 h-5 mr-3"}),"Settings"]}),s.jsxs(de,{variant:"outline",className:"w-full justify-start h-12 rounded-xl text-[#DC2626] border-[#DC2626]/20 hover:bg-[#DC2626]/10",onClick:O,children:[s.jsx(su,{className:"w-5 h-5 mr-3"}),"Logout"]})]})]})]})}),s.jsx(ar,{open:w,onOpenChange:j,children:s.jsxs(sr,{className:"sm:max-w-md",children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Return Chart for Edits"}),s.jsx(lr,{children:"Provide notes for the clinician about what needs to be corrected"})]}),s.jsx("div",{className:"py-4",children:s.jsx(uu,{value:C,onChange:H=>S(H.target.value),placeholder:"Enter your notes here...",className:"min-h-32 rounded-xl"})}),s.jsxs(_r,{children:[s.jsx(de,{variant:"outline",onClick:()=>j(!1),className:"rounded-xl",children:"Cancel"}),s.jsxs(de,{onClick:B,className:"bg-[#F59E0B] hover:bg-[#D97706] text-white rounded-xl",children:[s.jsx(ln,{className:"w-4 h-4 mr-2"}),"Return Chart"]})]})]})})]})}function fte({navigation:t,route:e}){const{chartId:r,mode:n}=e.params,{user:a}=Ka(),[i,o]=N.useState(!1),[l,c]=N.useState(!1),[u,h]=N.useState(""),[m,x]=N.useState(!1),[p,y]=N.useState(!1),[w,j]=N.useState(!1),[C,S]=N.useState(!1),[k,P]=N.useState(!1),[O,$]=N.useState(null),[R,B]=N.useState([]),[U,K]=N.useState([]),[M,q]=N.useState(!0),[re,ee]=N.useState(null),H=n==="review",se=O?.status||"active",ue=se==="delivered_locked",G=se==="verified_ready"||se==="pending_review";N.useEffect(()=>{J()},[r]);const J=async()=>{try{q(!0),ee(null);const{data:be,error:pe}=await Qe.from("charts").select(`
          *,
          patient:patients(first_name, last_name, date_of_birth),
          created_by_user:users!charts_created_by_fkey(first_name, last_name),
          finalized_by_user:users!charts_finalized_by_fkey(first_name, last_name)
        `).eq("id",r).single();if(pe)throw pe;$(be);const{data:at,error:tt}=await Qe.from("medications").select("*").eq("chart_id",r).order("created_at",{ascending:!0});if(tt)throw tt;B(at||[]);const{data:Be,error:ye}=await Qe.from("documents").select("*").eq("chart_id",r).order("created_at",{ascending:!1});if(ye)throw ye;K(Be||[])}catch(be){console.error("Error loading chart data:",be),ee(be.message)}finally{q(!1)}},oe=async()=>{if(!a?.id||!r){Pe.error("User not authenticated");return}try{S(!0),await B6(r,a.id),o(!1),h(""),Pe.success("Chart approved and locked successfully!"),await J()}catch(be){console.error("Error approving chart:",be),Pe.error(be.message||"Failed to approve chart")}finally{S(!1)}},Y=async()=>{if(!u.trim()){Pe.error("Please provide feedback notes for the clinician");return}if(!a?.id||!r){Pe.error("User not authenticated");return}try{P(!0),await PR(r,u,a.id),c(!1),h(""),Pe.success("Chart returned to clinician for changes"),await J()}catch(be){console.error("Error rejecting chart:",be),Pe.error(be.message||"Failed to send reverification request")}finally{P(!1)}},L=async()=>{x(!0)},z=async()=>{if(r)try{const{error:be}=await Qe.from("charts").update({status:"archived"}).eq("id",r);if(be)throw be;x(!1),alert("Chart archived successfully"),await J()}catch(be){console.error("Error archiving chart:",be),alert(`Failed to archive chart: ${be.message}`)}},V=()=>{y(!0)},W=async()=>{if(r)try{const{error:be}=await Qe.from("charts").update({status:"active"}).eq("id",r);if(be)throw be;y(!1),alert("Chart restored to Active status"),await J()}catch(be){console.error("Error restoring chart:",be),alert(`Failed to restore chart: ${be.message}`)}},Q=()=>{j(!0)},T=async()=>{if(r)try{const{error:be}=await Qe.from("charts").update({status:"active",finalized_at:null,finalized_by:null}).eq("id",r);if(be)throw be;j(!1),alert("Chart unlocked successfully"),await J()}catch(be){console.error("Error unlocking chart:",be),alert(`Failed to unlock chart: ${be.message}`)}},ie=be=>{switch(be){case"active":return"Active";case"verified_ready":return"Verified";case"pending_review":return"Pending Review";case"delivered_locked":return"Delivered";case"needs_reverification":return"Needs Reverification";case"archived":return"Archived";default:return"Active"}},ge=be=>{switch(be){case"bottle_scan":return"Bottle Scan";case"pdf_import":return"PDF Import";case"image_upload":return"Manual Entry";default:return"Empty Chart"}},we=be=>be?new Date(be).toLocaleDateString("en-US",{month:"numeric",day:"numeric",year:"numeric"}):"N/A";if(M)return s.jsx("div",{className:"h-screen flex items-center justify-center bg-[#f8fafc]",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-12 h-12 border-4 border-[#0966CC] border-t-transparent rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-[#64748b]",children:"Loading chart..."})]})});if(re||!O)return s.jsx("div",{className:"h-screen flex items-center justify-center bg-[#f8fafc]",children:s.jsxs("div",{className:"text-center max-w-md p-6",children:[s.jsx(Kn,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-lg text-[#0f172a] mb-2",children:"Failed to Load Chart"}),s.jsx("p",{className:"text-[#64748b] mb-4",children:re||"Chart not found"}),s.jsx(de,{onClick:()=>t.goBack(),variant:"outline",children:"Go Back"})]})});const Se={name:`${O.patient.first_name} ${O.patient.last_name}`,dob:we(O.patient.date_of_birth)},Ue={type:ge(O.source),createdBy:O.created_by_user?`${O.created_by_user.first_name} ${O.created_by_user.last_name}`:"Unknown",createdDate:we(O.created_at),finalizedDate:O.finalized_at?we(O.finalized_at):null,finalizedBy:O.finalized_by_user?`${O.finalized_by_user.first_name} ${O.finalized_by_user.last_name}`:null},We=ie(se);return s.jsxs("div",{className:"h-screen flex flex-col bg-[#f8fafc]",children:[s.jsx(om,{}),s.jsxs("div",{className:"bg-gradient-to-r from-[#10B981] to-[#059669] p-5",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("button",{onClick:()=>t.goBack(),className:"w-10 h-10 rounded-xl bg-white/15 hover:bg-white/25 flex items-center justify-center transition-colors",children:s.jsx(ln,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{className:"flex-1 text-center",children:[s.jsx("h1",{className:"text-lg text-white",children:Se.name}),s.jsxs("p",{className:"text-sm text-white/80",children:["DOB: ",Se.dob]})]}),s.jsxs(Yf,{children:[s.jsx(Xf,{asChild:!0,children:s.jsx("button",{className:"w-10 h-10 rounded-xl bg-white/15 hover:bg-white/25 flex items-center justify-center transition-colors",children:s.jsx(R0,{className:"w-5 h-5 text-white"})})}),s.jsxs(Zf,{align:"end",className:"w-56",children:[se==="delivered_locked"&&s.jsxs(s.Fragment,{children:[s.jsxs(on,{onClick:Q,className:"cursor-pointer",children:[s.jsx(Gx,{className:"w-4 h-4 mr-2"}),"Unlock Chart"]}),s.jsx(Go,{}),s.jsxs(on,{onClick:L,className:"cursor-pointer text-amber-600",children:[s.jsx(Wi,{className:"w-4 h-4 mr-2"}),"Archive Chart"]})]}),(se==="active"||se==="verified_ready"||se==="pending_review")&&s.jsxs(on,{onClick:L,className:"cursor-pointer text-amber-600",children:[s.jsx(Wi,{className:"w-4 h-4 mr-2"}),"Archive Chart"]}),se==="archived"&&s.jsxs(on,{onClick:V,className:"cursor-pointer text-green-600",children:[s.jsx(bf,{className:"w-4 h-4 mr-2"}),"Restore to Active"]})]})]})]}),s.jsx("div",{className:"flex justify-center",children:s.jsx(gt,{className:se==="delivered_locked"?"bg-[#E0E7FF] text-[#4F46E5] border-[#C7D2FE]":se==="verified_ready"?"bg-[#D1FAE5] text-[#10B981] border-[#A7F3D0]":se==="pending_review"?"bg-[#FEF3C7] text-[#F59E0B] border-[#FDE68A]":se==="needs_reverification"?"bg-[#FEE2E2] text-[#DC2626] border-[#FECACA]":se==="archived"?"bg-[#F3F4F6] text-[#6B7280] border-[#D1D5DB]":"bg-[#DBEAFE] text-[#0966CC] border-[#BFDBFE]",children:se==="delivered_locked"?s.jsxs(s.Fragment,{children:[s.jsx(fs,{className:"w-3 h-3 mr-1"})," Delivered (Locked)"]}):se==="verified_ready"?s.jsxs(s.Fragment,{children:[s.jsx(kr,{className:"w-3 h-3 mr-1"})," Verified (Ready to Deliver)"]}):se==="pending_review"?s.jsxs(s.Fragment,{children:[s.jsx(Ws,{className:"w-3 h-3 mr-1"})," Pending Review"]}):se==="needs_reverification"?s.jsxs(s.Fragment,{children:[s.jsx(Kn,{className:"w-3 h-3 mr-1"})," Needs Reverification"]}):se==="archived"?s.jsxs(s.Fragment,{children:[s.jsx(Wi,{className:"w-3 h-3 mr-1"})," Archived"]}):We})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:s.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[H&&G&&s.jsx("div",{className:"bg-[#E0F2FE] border-2 border-[#BFDBFE] rounded-xl p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(hs,{className:"w-5 h-5 text-[#0966CC] flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-[#0C4A6E] mb-1",children:"Review Mode"}),s.jsx("p",{className:"text-sm text-[#0C4A6E]",children:"Review all medications and their verification details. You can approve this chart or request changes from the clinician."})]})]})}),s.jsxs("div",{className:"bg-white rounded-xl border border-[#e2e8f0] p-6",children:[s.jsx("h2",{className:"text-lg text-[#0f172a] mb-4",children:"Chart Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-[#64748b]",children:"Chart Type:"})," ",s.jsx("span",{className:"text-[#0f172a]",children:Ue.type})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-[#64748b]",children:"Created By:"})," ",s.jsx("span",{className:"text-[#0f172a]",children:Ue.createdBy})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-[#64748b]",children:"Created Date:"})," ",s.jsx("span",{className:"text-[#0f172a]",children:Ue.createdDate})]}),Ue.finalizedDate&&s.jsxs("div",{children:[s.jsx("span",{className:"text-[#64748b]",children:"Finalized Date:"})," ",s.jsx("span",{className:"text-[#0f172a]",children:Ue.finalizedDate})]}),Ue.finalizedBy&&s.jsxs("div",{children:[s.jsx("span",{className:"text-[#64748b]",children:"Finalized By:"})," ",s.jsx("span",{className:"text-[#0f172a]",children:Ue.finalizedBy})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl border border-[#e2e8f0] p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsxs("h2",{className:"text-lg text-[#0f172a]",children:["Medications (",R.length,")"]})}),s.jsx("div",{className:"space-y-4",children:R.map(be=>s.jsxs("div",{className:"bg-[#f8fafc] rounded-xl border border-[#e2e8f0] p-5",children:[s.jsxs("div",{className:"flex items-start justify-between gap-4 mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg text-[#0f172a] mb-2",children:be.drug_name}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm text-[#64748b]",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-[#94a3b8]",children:"Strength:"})," ",s.jsx("span",{className:"text-[#0f172a]",children:be.strength||"N/A"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-[#94a3b8]",children:"Route:"})," ",s.jsx("span",{className:"text-[#0f172a]",children:be.route||"N/A"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-[#94a3b8]",children:"Frequency:"})," ",s.jsx("span",{className:"text-[#0f172a]",children:be.frequency||"N/A"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-[#94a3b8]",children:"Prescriber:"})," ",s.jsx("span",{className:"text-[#0f172a]",children:be.prescriber||"N/A"})]})]})]}),s.jsx("div",{className:"flex flex-col gap-2 items-end",children:be.is_verified&&s.jsxs(gt,{className:"bg-[#D1FAE5] text-[#10B981] border-[#A7F3D0]",children:[s.jsx(kr,{className:"w-3 h-3 mr-1"}),"Verified"]})})]}),s.jsx("div",{className:"flex items-center gap-3 pt-3 border-t border-[#e2e8f0]",children:s.jsxs("span",{className:"text-xs text-[#94a3b8]",children:["Added: ",we(be.created_at)]})}),be.notes&&s.jsx("div",{className:"mt-3 pt-3 border-t border-[#e2e8f0]",children:s.jsxs("p",{className:"text-sm text-[#64748b]",children:[s.jsx("span",{className:"text-xs text-[#94a3b8]",children:"Notes:"})," ",be.notes]})})]},be.id))})]}),s.jsxs("div",{className:"bg-white rounded-xl border border-[#e2e8f0] p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("h2",{className:"text-lg text-[#0f172a]",children:"Attached Documents"})}),U.length>0?s.jsx("div",{className:"space-y-2",children:U.map(be=>s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-[#f8fafc] rounded-lg border border-[#e2e8f0]",children:[s.jsx(F0,{className:"w-4 h-4 text-[#64748b]"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm text-[#0f172a] truncate",children:be.file_name}),s.jsxs("p",{className:"text-xs text-[#94a3b8]",children:["Uploaded: ",we(be.created_at)]})]}),s.jsxs(de,{variant:"outline",size:"sm",onClick:()=>window.open(be.file_url,"_blank"),children:[s.jsx(hs,{className:"w-4 h-4 mr-1"}),"View"]})]},be.id))}):s.jsx("p",{className:"text-sm text-[#64748b]",children:"No documents attached"})]}),H&&G&&!ue&&s.jsxs("div",{className:"bg-white rounded-xl border border-[#e2e8f0] p-6 space-y-4",children:[s.jsx("h3",{className:"text-lg text-[#0f172a]",children:"Review Actions"}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[s.jsxs(de,{onClick:()=>c(!0),variant:"outline",className:"flex-1 h-12 border-[#F59E0B] text-[#F59E0B] hover:bg-[#FEF3C7]",children:[s.jsx(bf,{className:"w-4 h-4 mr-2"}),"Request Changes"]}),s.jsxs(de,{onClick:()=>o(!0),className:"flex-1 h-12 bg-[#10B981] hover:bg-[#059669] text-white",children:[s.jsx(Hs,{className:"w-4 h-4 mr-2"}),"Approve Chart"]})]})]}),s.jsx(de,{onClick:()=>t.goBack(),variant:"outline",className:"w-full h-12 rounded-xl border-2 border-[#e2e8f0]",children:H?"Back to Dashboard":"Close"})]})}),s.jsx(ar,{open:i,onOpenChange:o,children:s.jsxs(sr,{className:"sm:max-w-[500px]",children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Approve Chart"}),s.jsx(lr,{children:"Confirm that you have reviewed all medications and want to approve this chart."})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"bg-[#f8fafc] rounded-xl p-4",children:[s.jsxs("p",{className:"text-sm text-[#0f172a] mb-2",children:[s.jsx("strong",{children:"Patient:"})," ",Se.name]}),s.jsxs("p",{className:"text-sm text-[#0f172a] mb-2",children:[s.jsx("strong",{children:"Medications:"})," ",R.length]}),s.jsxs("p",{className:"text-sm text-[#0f172a]",children:[s.jsx("strong",{children:"Created by:"})," ",Ue.createdBy]})]}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"approval-notes",children:"Approval Notes (optional)"}),s.jsx(uu,{id:"approval-notes",value:u,onChange:be=>h(be.target.value),placeholder:"Add any notes about this approval...",className:"mt-2 rounded-xl border-2 border-[#e2e8f0] min-h-[100px]"})]})]}),s.jsxs(_r,{className:"flex-col sm:flex-row gap-2",children:[s.jsx(de,{variant:"outline",onClick:()=>o(!1),className:"w-full sm:w-auto",children:"Cancel"}),s.jsx(de,{onClick:oe,disabled:C,className:"w-full sm:w-auto bg-[#10B981] hover:bg-[#059669] text-white",children:C?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 mr-2 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Approving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Hs,{className:"w-4 h-4 mr-2"}),"Confirm Approval"]})})]})]})}),s.jsx(ar,{open:l,onOpenChange:c,children:s.jsxs(sr,{className:"sm:max-w-[500px]",children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Request Changes"}),s.jsx(lr,{children:"Send this chart back to the clinician with feedback for reverification."})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsx("div",{className:"bg-[#FEF3C7] border border-[#FDE68A] rounded-xl p-4",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Kn,{className:"w-5 h-5 text-[#F59E0B] flex-shrink-0 mt-0.5"}),s.jsx("p",{className:"text-sm text-[#92400E]",children:"The clinician will receive your feedback and must reverify the chart before it can be approved."})]})}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"reverification-notes",children:"Feedback for Clinician *"}),s.jsx(uu,{id:"reverification-notes",value:u,onChange:be=>h(be.target.value),placeholder:"Describe what needs to be corrected or verified...",className:"mt-2 rounded-xl border-2 border-[#e2e8f0] min-h-[120px]"}),s.jsx("p",{className:"text-xs text-[#64748b] mt-2",children:"Be specific about which medications or fields need attention."})]})]}),s.jsxs(_r,{className:"flex-col sm:flex-row gap-2",children:[s.jsx(de,{variant:"outline",onClick:()=>c(!1),className:"w-full sm:w-auto",children:"Cancel"}),s.jsx(de,{onClick:Y,disabled:k,className:"w-full sm:w-auto bg-[#F59E0B] hover:bg-[#D97706] text-white",children:k?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 mr-2 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Sending..."]}):s.jsxs(s.Fragment,{children:[s.jsx(bf,{className:"w-4 h-4 mr-2"}),"Send for Reverification"]})})]})]})}),s.jsx(Yc,{open:m,onOpenChange:x,children:s.jsxs(Xc,{children:[s.jsxs(Zc,{children:[s.jsx(Qc,{children:"Archive Chart"}),s.jsxs(ed,{children:["Are you sure you want to archive this chart?",s.jsx("br",{}),s.jsx("br",{}),"Archived charts can be restored to Active status at any time."]})]}),s.jsxs(Jc,{children:[s.jsx(rd,{className:"h-12 rounded-xl",children:"Cancel"}),s.jsxs(td,{onClick:z,className:"h-12 rounded-xl bg-amber-600 hover:bg-amber-700 text-white",children:[s.jsx(Wi,{className:"w-4 h-4 mr-2"}),"Archive Chart"]})]})]})}),s.jsx(Yc,{open:p,onOpenChange:y,children:s.jsxs(Xc,{children:[s.jsxs(Zc,{children:[s.jsx(Qc,{children:"Restore Chart"}),s.jsxs(ed,{children:["Are you sure you want to restore this chart to Active status?",s.jsx("br",{}),s.jsx("br",{}),"The chart will be moved from Archived to Active and can be edited again."]})]}),s.jsxs(Jc,{children:[s.jsx(rd,{className:"h-12 rounded-xl",children:"Cancel"}),s.jsxs(td,{onClick:W,className:"h-12 rounded-xl bg-green-600 hover:bg-green-700 text-white",children:[s.jsx(bf,{className:"w-4 h-4 mr-2"}),"Restore to Active"]})]})]})}),s.jsx(Yc,{open:w,onOpenChange:j,children:s.jsxs(Xc,{children:[s.jsxs(Zc,{children:[s.jsx(Qc,{children:"Unlock Chart"}),s.jsxs(ed,{children:["Are you sure you want to unlock this chart?",s.jsx("br",{}),s.jsx("br",{}),s.jsx("strong",{className:"text-amber-700",children:" Warning:"})," Unlocking will allow the chart to be edited again. This should only be done if corrections are needed."]})]}),s.jsxs(Jc,{children:[s.jsx(rd,{className:"h-12 rounded-xl",children:"Cancel"}),s.jsxs(td,{onClick:T,className:"h-12 rounded-xl bg-blue-600 hover:bg-blue-700 text-white",children:[s.jsx(Gx,{className:"w-4 h-4 mr-2"}),"Unlock Chart"]})]})]})})]})}function M7(t,e="#0966CC",r="#0C4A6E"){return function({navigation:a}){return s.jsxs("div",{className:"h-full flex flex-col bg-white",children:[s.jsxs("div",{className:"p-5 flex items-center justify-between",style:{background:`linear-gradient(135deg, ${e}, ${r})`},children:[s.jsx("button",{onClick:()=>a.goBack(),className:"w-10 h-10 rounded-xl bg-white/15 hover:bg-white/25 flex items-center justify-center transition-colors",children:s.jsx(ln,{className:"w-5 h-5 text-white"})}),s.jsx("h1",{className:"flex-1 text-center text-lg text-white",children:t}),s.jsx("div",{className:"w-10"})]}),s.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-6 text-center",children:[s.jsx("h2",{className:"text-2xl text-[#0f172a] mb-2",children:t}),s.jsx("p",{className:"text-[#64748b]",children:"This screen is under development"})]})]})}}const mte=M7("Patient Details","#10B981","#059669"),pte=M7("User Details","#10B981","#059669");function xte({navigation:t}){const[e,r]=N.useState(!0),[n,a]=N.useState(!1),[i,o]=N.useState(!1),[l,c]=N.useState(!1),[u,h]=N.useState(!1),m={name:"Jennifer Martinez",role:"Agency Administrator",email:"jennifer.martinez@healthcarepartners.com",phone:"(555) 234-5678",address:"456 Admin Building, Healthcare City, HC 12345",agency:"HealthCare Partners LLC",agencyLicense:"HHA-789456",agencyNPI:"1234567890",agencyAddress:"123 Healthcare Blvd, Medical City, HC 12345",agencyPhone:"(555) 123-4567",supportEmail:"support@healthcarepartners.com",joinDate:"March 10, 2024",accountCreated:"Jan 07, 2025",lastUpdated:"Feb 01, 2025",lastPasswordChange:"30 days ago",lastLogin:"Phoenix, AZ",lastLoginTime:"Today at 9:42 AM",totalUsers:24,totalClinicians:18,totalPatients:156,chartsThisMonth:37,avgTurnaround:"2.1 days"},x=[{name:"Manage clinicians",granted:!0},{name:"Approve charts",granted:!0},{name:"Manage agency settings",granted:!0},{name:"View financial reports",granted:!0},{name:"Export data",granted:!0},{name:"Super Admin features",granted:!1},{name:"System configuration",granted:!1}],p=[{id:"1",device:"Chrome on Windows",location:"Phoenix, AZ",ip:"192.168.1.1",lastActive:"Active now",current:!0},{id:"2",device:"Safari on iPhone",location:"Phoenix, AZ",ip:"192.168.1.45",lastActive:"2 hours ago",current:!1},{id:"3",device:"Chrome on MacBook",location:"Scottsdale, AZ",ip:"10.0.0.23",lastActive:"Yesterday",current:!1}],y=()=>{Pe.success("Avatar upload feature coming soon")},w=()=>{Pe.info("Avatar removed")},j=()=>{a(!0)},C=k=>{r(k),k?o(!0):Pe.info("Two-factor authentication disabled")},S=k=>{Pe.success("Session revoked successfully")};return s.jsxs("div",{className:"h-full flex flex-col bg-[#f8fafc]",children:[s.jsxs("div",{className:"bg-gradient-to-r from-[#10B981] to-[#059669] px-5 pt-5 pb-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("button",{onClick:()=>t.goBack(),className:"w-10 h-10 rounded-xl bg-white/15 hover:bg-white/25 flex items-center justify-center transition-colors",children:s.jsx(ln,{className:"w-5 h-5 text-white"})}),s.jsx("h1",{className:"text-lg text-white",children:"Admin Profile"}),s.jsx("div",{className:"w-10 h-10"})]}),s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsxs("div",{className:"relative mb-3",children:[s.jsx(Xs,{className:"w-24 h-24 border-4 border-white/30",children:s.jsx(Zs,{className:"bg-white text-[#10B981] text-2xl",children:"JM"})}),s.jsxs("div",{className:"absolute -bottom-2 left-1/2 -translate-x-1/2 flex gap-2",children:[s.jsx(hn,{children:s.jsxs(fn,{children:[s.jsx(mn,{asChild:!0,children:s.jsx("button",{onClick:y,className:"w-8 h-8 rounded-full bg-white text-[#10B981] flex items-center justify-center shadow-lg hover:bg-slate-50 transition-colors",children:s.jsx(Ls,{className:"w-4 h-4"})})}),s.jsx(pn,{children:s.jsx("p",{children:"Upload photo"})})]})}),s.jsx(hn,{children:s.jsxs(fn,{children:[s.jsx(mn,{asChild:!0,children:s.jsx("button",{onClick:w,className:"w-8 h-8 rounded-full bg-white text-red-600 flex items-center justify-center shadow-lg hover:bg-slate-50 transition-colors",children:s.jsx(iu,{className:"w-4 h-4"})})}),s.jsx(pn,{children:s.jsx("p",{children:"Remove photo"})})]})})]})]}),s.jsx("h2",{className:"text-xl text-white mb-1",children:m.name}),s.jsx(gt,{className:"bg-white/20 text-white border-white/30 mb-2",children:m.role}),s.jsxs("button",{onClick:()=>h(!0),className:"text-sm text-white/90 hover:text-white flex items-center gap-1 transition-colors",children:[m.agency,s.jsx(pw,{className:"w-3 h-3"})]})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-5 space-y-5",children:[s.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-white rounded-2xl p-4 border border-slate-200 shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(o6,{className:"w-4 h-4 text-[#10B981]"}),s.jsx("h3",{className:"text-sm font-semibold text-[#0f172a]",children:"Agency Overview"})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl text-[#10B981] font-semibold",children:m.totalUsers}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"Agency Users"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl text-[#0966CC] font-semibold",children:m.totalClinicians}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"Clinicians"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl text-[#F59E0B] font-semibold",children:m.chartsThisMonth}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"Charts this month"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl text-[#10B981] font-semibold",children:m.avgTurnaround}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"Avg turnaround"})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Rs,{className:"w-4 h-4 text-[#10B981]"}),s.jsx("h3",{className:"text-sm font-semibold text-[#0f172a]",children:"User Details"})]}),s.jsxs(de,{variant:"outline",size:"sm",onClick:()=>Pe.info("Edit profile coming soon"),className:"border-[#10B981] text-[#10B981] hover:bg-[#D1FAE5]",children:[s.jsx(jh,{className:"w-3 h-3 mr-2"}),"Edit"]})]}),s.jsx(er,{className:"p-5",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#D1FAE5] flex items-center justify-center flex-shrink-0",children:s.jsx(Mn,{className:"w-5 h-5 text-[#10B981]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs text-[#64748b] mb-1",children:"Email Address"}),s.jsx("p",{className:"text-sm text-[#0f172a]",children:m.email})]})]}),s.jsx(qr,{}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#D1FAE5] flex items-center justify-center flex-shrink-0",children:s.jsx(Yi,{className:"w-5 h-5 text-[#10B981]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs text-[#64748b] mb-1",children:"Phone Number"}),s.jsx("p",{className:"text-sm text-[#0f172a]",children:m.phone})]})]}),s.jsx(qr,{}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#D1FAE5] flex items-center justify-center flex-shrink-0",children:s.jsx(Jo,{className:"w-5 h-5 text-[#10B981]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs text-[#64748b] mb-1",children:"Address"}),s.jsx("p",{className:"text-sm text-[#0f172a]",children:m.address})]})]})]})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Gi,{className:"w-4 h-4 text-[#10B981]"}),s.jsx("h3",{className:"text-sm font-semibold text-[#0f172a]",children:"Account Security"})]}),s.jsxs(de,{variant:"outline",size:"sm",onClick:()=>Pe.info("Manage security settings"),className:"border-[#10B981] text-[#10B981] hover:bg-[#D1FAE5]",children:[s.jsx(au,{className:"w-3 h-3 mr-2"}),"Manage"]})]}),s.jsx(er,{className:"p-5",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#DBEAFE] flex items-center justify-center flex-shrink-0",children:s.jsx(fs,{className:"w-5 h-5 text-[#0966CC]"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-[#0f172a] mb-1",children:"Password"}),s.jsxs("p",{className:"text-xs text-[#64748b]",children:["Last changed ",m.lastPasswordChange]})]})]}),s.jsx(de,{variant:"ghost",size:"sm",onClick:j,className:"text-[#0966CC] hover:text-[#075985] hover:bg-[#DBEAFE]",children:"Change"})]}),s.jsx(qr,{}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#D1FAE5] flex items-center justify-center flex-shrink-0",children:s.jsx(M0,{className:"w-5 h-5 text-[#10B981]"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("p",{className:"text-sm text-[#0f172a]",children:"Two-Factor Authentication"}),e&&s.jsx(gt,{variant:"outline",className:"border-[#10B981] text-[#10B981] text-xs h-5",children:" Enabled"})]}),s.jsx("p",{className:"text-xs text-[#64748b]",children:e?"Extra security for your account":"Add extra layer of security"})]})]}),s.jsx(Si,{checked:e,onCheckedChange:C,className:"data-[state=checked]:bg-[#10B981]"})]}),s.jsx(qr,{}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#FEF3C7] flex items-center justify-center flex-shrink-0",children:s.jsx(L0,{className:"w-5 h-5 text-[#F59E0B]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm text-[#0f172a] mb-1",children:"Last Login"}),s.jsxs("p",{className:"text-xs text-[#64748b]",children:[" ",m.lastLogin]}),s.jsxs("p",{className:"text-xs text-[#64748b]",children:[" ",m.lastLoginTime]})]})]}),s.jsx(qr,{}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#E0E7FF] flex items-center justify-center flex-shrink-0",children:s.jsx(cc,{className:"w-5 h-5 text-[#4F46E5]"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-[#0f172a] mb-1",children:"Active Sessions"}),s.jsxs("p",{className:"text-xs text-[#64748b]",children:[p.length," devices signed in"]})]})]}),s.jsx(de,{variant:"ghost",size:"sm",onClick:()=>c(!0),className:"text-[#4F46E5] hover:text-[#4338CA] hover:bg-[#E0E7FF]",children:"View"})]})]})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Wx,{className:"w-4 h-4 text-[#10B981]"}),s.jsx("h3",{className:"text-sm font-semibold text-[#0f172a]",children:"Permissions"})]}),s.jsxs(er,{className:"p-5",children:[s.jsx("div",{className:"space-y-2",children:x.map((k,P)=>s.jsxs("div",{className:`flex items-center justify-between py-2 ${P<x.length-1?"border-b border-slate-100":""}`,children:[s.jsx("span",{className:"text-sm text-[#0f172a]",children:k.name}),k.granted?s.jsx(Hs,{className:"w-4 h-4 text-[#10B981]"}):s.jsx(y0,{className:"w-4 h-4 text-[#94a3b8]"})]},P))}),s.jsx("div",{className:"mt-4 pt-4 border-t border-slate-200",children:s.jsxs("p",{className:"text-xs text-[#64748b] flex items-center gap-1",children:[s.jsx(Vf,{className:"w-3 h-3"}),"For Super Admin access, contact system administrator"]})})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ga,{className:"w-4 h-4 text-[#10B981]"}),s.jsx("h3",{className:"text-sm font-semibold text-[#0f172a]",children:"Agency Information"})]}),s.jsxs(de,{variant:"ghost",size:"sm",onClick:()=>h(!0),className:"text-[#10B981] hover:text-[#059669] hover:bg-[#D1FAE5]",children:["View Details",s.jsx(Xr,{className:"w-4 h-4 ml-1"})]})]}),s.jsx(er,{className:"p-5",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#D1FAE5] flex items-center justify-center flex-shrink-0",children:s.jsx(Ga,{className:"w-5 h-5 text-[#10B981]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs text-[#64748b] mb-1",children:"Agency Name"}),s.jsx("p",{className:"text-sm text-[#0f172a]",children:m.agency})]})]}),s.jsx(qr,{}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#D1FAE5] flex items-center justify-center flex-shrink-0",children:s.jsx(Gi,{className:"w-5 h-5 text-[#10B981]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs text-[#64748b] mb-1",children:"License Number"}),s.jsx("p",{className:"text-sm text-[#0f172a]",children:m.agencyLicense})]})]}),s.jsx(qr,{}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#D1FAE5] flex items-center justify-center flex-shrink-0",children:s.jsx(Zo,{className:"w-5 h-5 text-[#10B981]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs text-[#64748b] mb-1",children:"Admin Since"}),s.jsx("p",{className:"text-sm text-[#0f172a]",children:m.joinDate})]})]})]})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(au,{className:"w-4 h-4 text-[#10B981]"}),s.jsx("h3",{className:"text-sm font-semibold text-[#0f172a]",children:"Preferences"})]}),s.jsx(er,{className:"p-5",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{onClick:()=>Pe.info("Notifications settings coming soon"),className:"w-full flex items-center justify-between py-2 px-3 rounded-lg hover:bg-slate-50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(xh,{className:"w-4 h-4 text-[#64748b]"}),s.jsx("span",{className:"text-sm text-[#0f172a]",children:"Notifications"})]}),s.jsx(Xr,{className:"w-4 h-4 text-[#94a3b8]"})]}),s.jsxs("button",{onClick:()=>Pe.info("Appearance settings coming soon"),className:"w-full flex items-center justify-between py-2 px-3 rounded-lg hover:bg-slate-50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(PD,{className:"w-4 h-4 text-[#64748b]"}),s.jsx("span",{className:"text-sm text-[#0f172a]",children:"Appearance"})]}),s.jsx(Xr,{className:"w-4 h-4 text-[#94a3b8]"})]})]})})]}),s.jsx(er,{className:"p-4 bg-slate-50 border-slate-200",children:s.jsxs("div",{className:"flex items-start gap-2 text-xs text-[#64748b]",children:[s.jsx(Ws,{className:"w-3 h-3 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("p",{children:[" Account created: ",m.accountCreated]}),s.jsxs("p",{children:[" Last updated: ",m.lastUpdated]})]})]})}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[s.jsxs(de,{variant:"outline",className:"flex-1 border-[#0966CC] text-[#0966CC] hover:bg-[#DBEAFE]",onClick:()=>Pe.info("Support contact coming soon"),children:[s.jsx(Kx,{className:"w-4 h-4 mr-2"}),"Contact Support"]}),s.jsxs(de,{variant:"outline",className:"flex-1 border-[#64748b] text-[#64748b] hover:bg-slate-100",onClick:()=>Pe.info("Documentation coming soon"),children:[s.jsx(l6,{className:"w-4 h-4 mr-2"}),"View Docs"]})]})]}),s.jsx(ar,{open:n,onOpenChange:a,children:s.jsxs(sr,{children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Change Password"}),s.jsx(lr,{children:"Choose a strong password to keep your account secure"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-[#0f172a]",children:"Current Password"}),s.jsx("input",{type:"password",className:"w-full h-10 px-3 rounded-lg border border-slate-300 focus:outline-none focus:ring-2 focus:ring-[#10B981]",placeholder:"Enter current password"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-[#0f172a]",children:"New Password"}),s.jsx("input",{type:"password",className:"w-full h-10 px-3 rounded-lg border border-slate-300 focus:outline-none focus:ring-2 focus:ring-[#10B981]",placeholder:"Enter new password"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-[#0f172a]",children:"Confirm New Password"}),s.jsx("input",{type:"password",className:"w-full h-10 px-3 rounded-lg border border-slate-300 focus:outline-none focus:ring-2 focus:ring-[#10B981]",placeholder:"Confirm new password"})]})]}),s.jsxs(_r,{children:[s.jsx(de,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),s.jsx(de,{className:"bg-[#10B981] hover:bg-[#059669]",onClick:()=>{a(!1),Pe.success("Password changed successfully")},children:"Update Password"})]})]})}),s.jsx(ar,{open:i,onOpenChange:o,children:s.jsxs(sr,{children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Enable Two-Factor Authentication"}),s.jsx(lr,{children:"Scan the QR code with your authenticator app"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsx("div",{className:"w-48 h-48 bg-slate-100 rounded-lg mx-auto flex items-center justify-center",children:s.jsx("p",{className:"text-sm text-slate-500",children:"QR Code Here"})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-[#0f172a]",children:"Verification Code"}),s.jsx("input",{type:"text",className:"w-full h-10 px-3 rounded-lg border border-slate-300 focus:outline-none focus:ring-2 focus:ring-[#10B981]",placeholder:"Enter 6-digit code"})]})]}),s.jsxs(_r,{children:[s.jsx(de,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),s.jsx(de,{className:"bg-[#10B981] hover:bg-[#059669]",onClick:()=>{o(!1),Pe.success("Two-factor authentication enabled")},children:"Verify & Enable"})]})]})}),s.jsx(ar,{open:l,onOpenChange:c,children:s.jsxs(sr,{className:"max-w-2xl",children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Active Sessions"}),s.jsx(lr,{children:"Manage devices where you're currently signed in"})]}),s.jsx("div",{className:"space-y-3 py-4 max-h-96 overflow-y-auto",children:p.map(k=>s.jsx(er,{className:"p-4",children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#DBEAFE] flex items-center justify-center flex-shrink-0",children:s.jsx(cc,{className:"w-5 h-5 text-[#0966CC]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("p",{className:"text-sm font-medium text-[#0f172a]",children:k.device}),k.current&&s.jsx(gt,{variant:"outline",className:"border-[#10B981] text-[#10B981] text-xs h-5",children:"Current"})]}),s.jsxs("p",{className:"text-xs text-[#64748b]",children:[" ",k.location]}),s.jsxs("p",{className:"text-xs text-[#64748b]",children:["IP: ",k.ip]}),s.jsx("p",{className:"text-xs text-[#64748b]",children:k.lastActive})]})]}),!k.current&&s.jsx(de,{variant:"ghost",size:"sm",onClick:()=>S(k.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:"Revoke"})]})},k.id))}),s.jsxs(_r,{children:[s.jsx(de,{variant:"outline",onClick:()=>c(!1),children:"Close"}),s.jsxs(de,{variant:"destructive",onClick:()=>{Pe.success("All other sessions revoked"),c(!1)},children:[s.jsx(go,{className:"w-4 h-4 mr-2"}),"Revoke All Others"]})]})]})}),s.jsx(ar,{open:u,onOpenChange:h,children:s.jsxs(sr,{className:"max-w-2xl",children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Agency Details"}),s.jsx(lr,{children:"Complete information about your healthcare agency"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-[#64748b] mb-1",children:"Agency Name"}),s.jsx("p",{className:"text-sm text-[#0f172a] font-medium",children:m.agency})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-[#64748b] mb-1",children:"License Number"}),s.jsx("p",{className:"text-sm text-[#0f172a] font-medium",children:m.agencyLicense})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-[#64748b] mb-1",children:"NPI Number"}),s.jsx("p",{className:"text-sm text-[#0f172a] font-medium",children:m.agencyNPI})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-[#64748b] mb-1",children:"Support Email"}),s.jsx("p",{className:"text-sm text-[#0f172a] font-medium",children:m.supportEmail})]})]}),s.jsx(qr,{}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-[#64748b] mb-1",children:"Agency Address"}),s.jsx("p",{className:"text-sm text-[#0f172a]",children:m.agencyAddress})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-[#64748b] mb-1",children:"Agency Phone"}),s.jsx("p",{className:"text-sm text-[#0f172a]",children:m.agencyPhone})]}),s.jsx(qr,{}),s.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[s.jsx(Rs,{className:"w-4 h-4 text-[#10B981] mt-0.5"}),s.jsx("p",{className:"text-sm font-medium text-[#0f172a]",children:"Facility Users"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xl text-[#10B981] font-semibold",children:m.totalUsers}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"Total Users"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xl text-[#0966CC] font-semibold",children:m.totalClinicians}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"Clinicians"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xl text-[#F59E0B] font-semibold",children:m.totalPatients}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"Patients"})]})]})]})]}),s.jsxs(_r,{children:[s.jsx(de,{variant:"outline",onClick:()=>h(!1),children:"Close"}),s.jsx(de,{className:"bg-[#10B981] hover:bg-[#059669]",onClick:()=>t.navigate("AgencyAdminSettings"),children:"Manage Agency"})]})]})})]})}function gte({navigation:t}){const[e,r]=N.useState(!0),[n,a]=N.useState(!0),[i,o]=N.useState(!1),[l,c]=N.useState(!0),[u,h]=N.useState(!1),[m,x]=N.useState(!1),[p,y]=N.useState({currentPassword:"",newPassword:"",confirmPassword:""}),w={lastPasswordChange:"30 days ago",lastLogin:"Phoenix, AZ",lastLoginTime:"Today at 9:42 AM"},j=[{name:"Manage clinicians",granted:!0,action:()=>t.navigate("AgencyUsersView")},{name:"Approve charts",granted:!0,action:()=>t.navigate("AgencyChartsView")},{name:"Manage agency settings",granted:!0,action:()=>Pe.info("Agency settings coming soon")},{name:"View financial reports",granted:!0,action:()=>Pe.info("Financial reports coming soon")},{name:"Export data",granted:!0,action:()=>Pe.success("Data export initiated")},{name:"Super Admin features",granted:!1,action:null},{name:"System configuration",granted:!1,action:null}],C=[{id:"1",device:"Chrome on Windows",location:"Phoenix, AZ",ip:"192.168.1.1",lastActive:"Active now",current:!0},{id:"2",device:"Safari on iPhone",location:"Phoenix, AZ",ip:"192.168.1.45",lastActive:"2 hours ago",current:!1},{id:"3",device:"Chrome on MacBook",location:"Scottsdale, AZ",ip:"10.0.0.23",lastActive:"Yesterday",current:!1}],S=()=>{if(!p.currentPassword||!p.newPassword||!p.confirmPassword){Pe.error("Please fill in all fields");return}if(p.newPassword!==p.confirmPassword){Pe.error("New passwords do not match");return}if(p.newPassword.length<8){Pe.error("Password must be at least 8 characters");return}Pe.success("Password changed successfully!"),o(!1),y({currentPassword:"",newPassword:"",confirmPassword:""})},k=$=>{c($),$?h(!0):Pe.info("Two-factor authentication disabled")},P=$=>{Pe.success("Session revoked successfully")},O=({enabled:$,onToggle:R})=>s.jsx("button",{onClick:R,className:`relative w-12 h-7 rounded-full transition-colors ${$?"bg-[#10B981]":"bg-[#cbd5e1]"}`,children:s.jsx("div",{className:`absolute top-1 w-5 h-5 bg-white rounded-full shadow-md transition-transform ${$?"translate-x-6":"translate-x-1"}`})});return s.jsxs("div",{className:"h-full flex flex-col bg-[#f8fafc]",children:[s.jsx("div",{className:"bg-gradient-to-r from-[#10B981] to-[#059669] p-5",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("button",{onClick:()=>t.goBack(),className:"w-10 h-10 rounded-xl bg-white/15 hover:bg-white/25 flex items-center justify-center transition-colors",children:s.jsx(ln,{className:"w-5 h-5 text-white"})}),s.jsx("h1",{className:"text-lg text-white",children:"Settings"}),s.jsx("div",{className:"w-10"})]})}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-5 space-y-5",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm text-[#64748b] mb-3 px-2",children:"ACCOUNT"}),s.jsx("div",{className:"bg-white rounded-2xl border border-[#e2e8f0] overflow-hidden",children:s.jsxs("button",{onClick:()=>t.navigate("AgencyAdminProfile"),className:"w-full flex items-center justify-between p-4 hover:bg-[#f8fafc] transition-colors border-b border-[#e2e8f0]",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#D1FAE5] flex items-center justify-center",children:s.jsx(Bn,{className:"w-5 h-5 text-[#10B981]"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"text-sm text-[#0f172a]",children:"Profile"}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"View your profile"})]})]}),s.jsx(Xr,{className:"w-5 h-5 text-[#cbd5e1]"})]})})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm text-[#64748b] mb-3 px-2",children:"SECURITY"}),s.jsx(er,{className:"p-5",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#DBEAFE] flex items-center justify-center flex-shrink-0",children:s.jsx(fs,{className:"w-5 h-5 text-[#0966CC]"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-[#0f172a] mb-1",children:"Password"}),s.jsxs("p",{className:"text-xs text-[#64748b]",children:["Last changed ",w.lastPasswordChange]})]})]}),s.jsx(de,{variant:"ghost",size:"sm",onClick:()=>o(!0),className:"text-[#0966CC] hover:text-[#075985] hover:bg-[#DBEAFE]",children:"Change"})]}),s.jsx(qr,{}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#D1FAE5] flex items-center justify-center flex-shrink-0",children:s.jsx(M0,{className:"w-5 h-5 text-[#10B981]"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("p",{className:"text-sm text-[#0f172a]",children:"Two-Factor Authentication"}),l&&s.jsx(gt,{variant:"outline",className:"border-[#10B981] text-[#10B981] text-xs h-5",children:" Enabled"})]}),s.jsx("p",{className:"text-xs text-[#64748b]",children:l?"Extra security for your account":"Add extra layer of security"})]})]}),s.jsx(Si,{checked:l,onCheckedChange:k,className:"data-[state=checked]:bg-[#10B981]"})]}),s.jsx(qr,{}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#FEF3C7] flex items-center justify-center flex-shrink-0",children:s.jsx(L0,{className:"w-5 h-5 text-[#F59E0B]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm text-[#0f172a] mb-1",children:"Last Login"}),s.jsxs("p",{className:"text-xs text-[#64748b]",children:[" ",w.lastLogin]}),s.jsxs("p",{className:"text-xs text-[#64748b]",children:[" ",w.lastLoginTime]})]})]}),s.jsx(qr,{}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#E0E7FF] flex items-center justify-center flex-shrink-0",children:s.jsx(cc,{className:"w-5 h-5 text-[#4F46E5]"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-[#0f172a] mb-1",children:"Active Sessions"}),s.jsxs("p",{className:"text-xs text-[#64748b]",children:[C.length," devices signed in"]})]})]}),s.jsx(de,{variant:"ghost",size:"sm",onClick:()=>x(!0),className:"text-[#4F46E5] hover:text-[#4338CA] hover:bg-[#E0E7FF]",children:"View"})]})]})})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm text-[#64748b] mb-3 px-2",children:"PERMISSIONS & ACTIONS"}),s.jsxs(er,{className:"p-5",children:[s.jsx("div",{className:"space-y-3",children:j.map(($,R)=>s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between py-2",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[$.granted?s.jsx(Hs,{className:"w-4 h-4 text-[#10B981] flex-shrink-0"}):s.jsx(y0,{className:"w-4 h-4 text-[#94a3b8] flex-shrink-0"}),s.jsx("span",{className:"text-sm text-[#0f172a]",children:$.name})]}),$.granted&&$.action&&s.jsx(de,{variant:"ghost",size:"sm",onClick:$.action,className:"text-[#10B981] hover:text-[#059669] hover:bg-[#D1FAE5]",children:"Open"})]}),R<j.length-1&&s.jsx(qr,{})]},R))}),s.jsx("div",{className:"mt-4 pt-4 border-t border-slate-200",children:s.jsxs("p",{className:"text-xs text-[#64748b] flex items-center gap-1",children:[s.jsx(Vf,{className:"w-3 h-3"}),"For Super Admin access, contact system administrator"]})})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm text-[#64748b] mb-3 px-2",children:"NOTIFICATIONS"}),s.jsxs("div",{className:"bg-white rounded-2xl border border-[#e2e8f0] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[#e2e8f0]",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#D1FAE5] flex items-center justify-center",children:s.jsx(Mn,{className:"w-5 h-5 text-[#10B981]"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-[#0f172a]",children:"Email Notifications"}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"Receive email updates"})]})]}),s.jsx(O,{enabled:e,onToggle:()=>r(!e)})]}),s.jsxs("div",{className:"flex items-center justify-between p-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#FEF3C7] flex items-center justify-center",children:s.jsx(hr,{className:"w-5 h-5 text-[#F59E0B]"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-[#0f172a]",children:"Chart Alerts"}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"Pending review notifications"})]})]}),s.jsx(O,{enabled:n,onToggle:()=>a(!n)})]})]})]})]}),s.jsx(ar,{open:i,onOpenChange:o,children:s.jsxs(sr,{className:"sm:max-w-[500px]",children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Change Password"}),s.jsx(lr,{children:"Enter your current password and choose a new one."})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"current-password",children:"Current Password"}),s.jsx(Ze,{id:"current-password",type:"password",value:p.currentPassword,onChange:$=>y({...p,currentPassword:$.target.value}),placeholder:"Enter current password",className:"mt-2 h-12 rounded-xl border-2 border-[#e2e8f0]"})]}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"new-password",children:"New Password"}),s.jsx(Ze,{id:"new-password",type:"password",value:p.newPassword,onChange:$=>y({...p,newPassword:$.target.value}),placeholder:"Enter new password",className:"mt-2 h-12 rounded-xl border-2 border-[#e2e8f0]"}),s.jsx("p",{className:"text-xs text-[#64748b] mt-1",children:"Must be at least 8 characters"})]}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"confirm-password",children:"Confirm New Password"}),s.jsx(Ze,{id:"confirm-password",type:"password",value:p.confirmPassword,onChange:$=>y({...p,confirmPassword:$.target.value}),placeholder:"Confirm new password",className:"mt-2 h-12 rounded-xl border-2 border-[#e2e8f0]"})]})]}),s.jsxs(_r,{children:[s.jsx(de,{variant:"outline",onClick:()=>{o(!1),y({currentPassword:"",newPassword:"",confirmPassword:""})},children:"Cancel"}),s.jsxs(de,{onClick:S,className:"bg-[#10B981] hover:bg-[#059669] text-white",children:[s.jsx(fs,{className:"w-4 h-4 mr-2"}),"Change Password"]})]})]})}),s.jsx(ar,{open:u,onOpenChange:h,children:s.jsxs(sr,{children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Enable Two-Factor Authentication"}),s.jsx(lr,{children:"Scan the QR code with your authenticator app"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsx("div",{className:"w-48 h-48 bg-slate-100 rounded-lg mx-auto flex items-center justify-center",children:s.jsx("p",{className:"text-sm text-slate-500",children:"QR Code Here"})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-[#0f172a]",children:"Verification Code"}),s.jsx("input",{type:"text",className:"w-full h-10 px-3 rounded-lg border border-slate-300 focus:outline-none focus:ring-2 focus:ring-[#10B981]",placeholder:"Enter 6-digit code"})]})]}),s.jsxs(_r,{children:[s.jsx(de,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),s.jsx(de,{className:"bg-[#10B981] hover:bg-[#059669]",onClick:()=>{h(!1),Pe.success("Two-factor authentication enabled")},children:"Verify & Enable"})]})]})}),s.jsx(ar,{open:m,onOpenChange:x,children:s.jsxs(sr,{className:"max-w-2xl",children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Active Sessions"}),s.jsx(lr,{children:"Manage devices where you're currently signed in"})]}),s.jsx("div",{className:"space-y-3 py-4 max-h-96 overflow-y-auto",children:C.map($=>s.jsx(er,{className:"p-4",children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#DBEAFE] flex items-center justify-center flex-shrink-0",children:s.jsx(cc,{className:"w-5 h-5 text-[#0966CC]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("p",{className:"text-sm font-medium text-[#0f172a]",children:$.device}),$.current&&s.jsx(gt,{variant:"outline",className:"border-[#10B981] text-[#10B981] text-xs h-5",children:"Current"})]}),s.jsxs("p",{className:"text-xs text-[#64748b]",children:[" ",$.location]}),s.jsxs("p",{className:"text-xs text-[#64748b]",children:["IP: ",$.ip]}),s.jsx("p",{className:"text-xs text-[#64748b]",children:$.lastActive})]})]}),!$.current&&s.jsx(de,{variant:"ghost",size:"sm",onClick:()=>P($.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:"Revoke"})]})},$.id))}),s.jsxs(_r,{children:[s.jsx(de,{variant:"outline",onClick:()=>x(!1),children:"Close"}),s.jsxs(de,{variant:"destructive",onClick:()=>{Pe.success("All other sessions revoked"),x(!1)},children:[s.jsx(go,{className:"w-4 h-4 mr-2"}),"Revoke All Others"]})]})]})})]})}function vte(t){const e=yte(t),r=N.forwardRef((n,a)=>{const{children:i,...o}=n,l=N.Children.toArray(i),c=l.find(bte);if(c){const u=c.props.children,h=l.map(m=>m===c?N.Children.count(u)>1?N.Children.only(null):N.isValidElement(u)?u.props.children:null:m);return s.jsx(e,{...o,ref:a,children:N.isValidElement(u)?N.cloneElement(u,void 0,h):null})}return s.jsx(e,{...o,ref:a,children:i})});return r.displayName=`${t}.Slot`,r}function yte(t){const e=N.forwardRef((r,n)=>{const{children:a,...i}=r;if(N.isValidElement(a)){const o=jte(a),l=Nte(i,a.props);return a.type!==N.Fragment&&(l.ref=n?fc(n,o):o),N.cloneElement(a,l)}return N.Children.count(a)>1?N.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var wte=Symbol("radix.slottable");function bte(t){return N.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===wte}function Nte(t,e){const r={...e};for(const n in e){const a=t[n],i=e[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...t,...r}}function jte(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var ag="Popover",[B7]=_o(ag,[pu]),tp=pu(),[_te,yu]=B7(ag),U7=t=>{const{__scopePopover:e,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!1}=t,l=tp(e),c=N.useRef(null),[u,h]=N.useState(!1),[m,x]=dc({prop:n,defaultProp:a??!1,onChange:i,caller:ag});return s.jsx(R1,{...l,children:s.jsx(_te,{scope:e,contentId:Ko(),triggerRef:c,open:m,onOpenChange:x,onOpenToggle:N.useCallback(()=>x(p=>!p),[x]),hasCustomAnchor:u,onCustomAnchorAdd:N.useCallback(()=>h(!0),[]),onCustomAnchorRemove:N.useCallback(()=>h(!1),[]),modal:o,children:r})})};U7.displayName=ag;var $7="PopoverAnchor",Cte=N.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,a=yu($7,r),i=tp(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=a;return N.useEffect(()=>(o(),()=>l()),[o,l]),s.jsx(q0,{...i,...n,ref:e})});Cte.displayName=$7;var V7="PopoverTrigger",z7=N.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,a=yu(V7,r),i=tp(r),o=Wr(e,a.triggerRef),l=s.jsx(Pr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":K7(a.open),...n,ref:o,onClick:Pt(t.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:s.jsx(q0,{asChild:!0,...i,children:l})});z7.displayName=V7;var t5="PopoverPortal",[Ste,Ate]=B7(t5,{forceMount:void 0}),q7=t=>{const{__scopePopover:e,forceMount:r,children:n,container:a}=t,i=yu(t5,e);return s.jsx(Ste,{scope:e,forceMount:r,children:s.jsx(Qi,{present:r||i.open,children:s.jsx(nm,{asChild:!0,container:a,children:n})})})};q7.displayName=t5;var Jf="PopoverContent",H7=N.forwardRef((t,e)=>{const r=Ate(Jf,t.__scopePopover),{forceMount:n=r.forceMount,...a}=t,i=yu(Jf,t.__scopePopover);return s.jsx(Qi,{present:n||i.open,children:i.modal?s.jsx(kte,{...a,ref:e}):s.jsx(Pte,{...a,ref:e})})});H7.displayName=Jf;var Ete=vte("PopoverContent.RemoveScroll"),kte=N.forwardRef((t,e)=>{const r=yu(Jf,t.__scopePopover),n=N.useRef(null),a=Wr(e,n),i=N.useRef(!1);return N.useEffect(()=>{const o=n.current;if(o)return C1(o)},[]),s.jsx(V0,{as:Ete,allowPinchZoom:!0,children:s.jsx(W7,{...t,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Pt(t.onCloseAutoFocus,o=>{o.preventDefault(),i.current||r.triggerRef.current?.focus()}),onPointerDownOutside:Pt(t.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;i.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:Pt(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Pte=N.forwardRef((t,e)=>{const r=yu(Jf,t.__scopePopover),n=N.useRef(!1),a=N.useRef(!1);return s.jsx(W7,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{t.onCloseAutoFocus?.(i),i.defaultPrevented||(n.current||r.triggerRef.current?.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{t.onInteractOutside?.(i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;r.triggerRef.current?.contains(o)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),W7=N.forwardRef((t,e)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:h,...m}=t,x=yu(Jf,r),p=tp(r);return j1(),s.jsx($0,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(rm,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:h,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>x.onOpenChange(!1),children:s.jsx(L1,{"data-state":K7(x.open),role:"dialog",id:x.contentId,...p,...m,ref:e,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),G7="PopoverClose",Tte=N.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,a=yu(G7,r);return s.jsx(Pr.button,{type:"button",...n,ref:e,onClick:Pt(t.onClick,()=>a.onOpenChange(!1))})});Tte.displayName=G7;var Ite="PopoverArrow",Dte=N.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,a=tp(r);return s.jsx(F1,{...a,...n,ref:e})});Dte.displayName=Ite;function K7(t){return t?"open":"closed"}var Ote=U7,Rte=z7,Lte=q7,Fte=H7;function iC({...t}){return s.jsx(Ote,{"data-slot":"popover",...t})}function oC({...t}){return s.jsx(Rte,{"data-slot":"popover-trigger",...t})}function lC({className:t,align:e="center",sideOffset:r=4,...n}){return s.jsx(Lte,{children:s.jsx(Fte,{"data-slot":"popover-content",align:e,sideOffset:r,className:xr("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...n})})}function Y7({navigation:t}){const e={name:"Jessica Martinez",role:"Scheduler",email:"jessica.martinez@healthcarepartners.com",phone:"(555) 345-6789",address:"789 Scheduling Center, Healthcare City, HC 12345",agency:"HealthCare Partners LLC",agencyLicense:"HHA-789456",accountCreated:"Jan 07, 2025",lastUpdated:"Feb 01, 2025",totalAssignments:2,totalCharts:2,pendingReview:0,thisWeekScheduled:18},r=()=>{Pe.success("Avatar upload feature coming soon")},n=()=>{Pe.info("Avatar removed")};return s.jsxs("div",{className:"h-full flex flex-col bg-[#f8fafc]",children:[s.jsxs("div",{className:"bg-white border-b border-[#e2e8f0] p-5",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h1",{className:"text-lg text-[#0f172a]",children:"My Profile"}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-[#D1FAE5] rounded-full",children:[s.jsx("div",{className:"w-2 h-2 bg-[#10B981] rounded-full"}),s.jsx("span",{className:"text-xs text-[#10B981]",children:"Online"})]})})]}),s.jsx("p",{className:"text-sm text-[#64748b]",children:"View and manage your profile"})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-5 space-y-5",children:[s.jsx("div",{className:"bg-gradient-to-r from-[#F59E0B] to-[#D97706] rounded-2xl p-6 shadow-lg",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Xs,{className:"w-20 h-20 border-4 border-white/30",children:s.jsx(Zs,{className:"bg-white text-[#F59E0B] text-2xl",children:"JM"})}),s.jsxs("div",{className:"absolute -bottom-2 left-1/2 -translate-x-1/2 flex gap-2",children:[s.jsx(hn,{children:s.jsxs(fn,{children:[s.jsx(mn,{asChild:!0,children:s.jsx("button",{onClick:r,className:"w-8 h-8 rounded-full bg-white text-[#F59E0B] flex items-center justify-center shadow-lg hover:bg-slate-50 transition-colors",children:s.jsx(Ls,{className:"w-4 h-4"})})}),s.jsx(pn,{children:s.jsx("p",{children:"Upload photo"})})]})}),s.jsx(hn,{children:s.jsxs(fn,{children:[s.jsx(mn,{asChild:!0,children:s.jsx("button",{onClick:n,className:"w-8 h-8 rounded-full bg-white text-red-600 flex items-center justify-center shadow-lg hover:bg-slate-50 transition-colors",children:s.jsx(iu,{className:"w-4 h-4"})})}),s.jsx(pn,{children:s.jsx("p",{children:"Remove photo"})})]})})]})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-xl text-white mb-1",children:e.name}),s.jsx(gt,{className:"bg-white/20 text-white border-white/30 mb-2",children:e.role}),s.jsxs("button",{onClick:()=>Pe.info("Agency details coming soon"),className:"text-sm text-white/90 hover:text-white flex items-center gap-1 transition-colors",children:[e.agency,s.jsx(pw,{className:"w-3 h-3"})]})]})]})}),s.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-white rounded-2xl p-4 border border-slate-200 shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(hr,{className:"w-4 h-4 text-[#F59E0B]"}),s.jsx("h3",{className:"text-sm font-semibold text-[#0f172a]",children:"Assignment Overview"})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl text-[#F59E0B] font-semibold",children:e.totalAssignments}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"Total Patients"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl text-[#0966CC] font-semibold",children:e.totalCharts}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"Total Charts"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl text-[#10B981] font-semibold",children:e.pendingReview}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"Pending Review"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl text-[#F59E0B] font-semibold",children:e.thisWeekScheduled}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"This Week"})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Rs,{className:"w-4 h-4 text-[#F59E0B]"}),s.jsx("h3",{className:"text-sm font-semibold text-[#0f172a]",children:"User Details"})]}),s.jsxs(de,{variant:"outline",size:"sm",onClick:()=>Pe.info("Edit profile coming soon"),className:"border-[#F59E0B] text-[#F59E0B] hover:bg-[#FEF3C7]",children:[s.jsx(jh,{className:"w-3 h-3 mr-2"}),"Edit"]})]}),s.jsx(er,{className:"p-5",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#FEF3C7] flex items-center justify-center flex-shrink-0",children:s.jsx(Mn,{className:"w-5 h-5 text-[#F59E0B]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs text-[#64748b] mb-1",children:"Email Address"}),s.jsx("p",{className:"text-sm text-[#0f172a]",children:e.email})]})]}),s.jsx(qr,{}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#FEF3C7] flex items-center justify-center flex-shrink-0",children:s.jsx(Yi,{className:"w-5 h-5 text-[#F59E0B]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs text-[#64748b] mb-1",children:"Phone Number"}),s.jsx("p",{className:"text-sm text-[#0f172a]",children:e.phone})]})]})]})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ga,{className:"w-4 h-4 text-[#F59E0B]"}),s.jsx("h3",{className:"text-sm font-semibold text-[#0f172a]",children:"Agency Information"})]}),s.jsxs(de,{variant:"ghost",size:"sm",onClick:()=>Pe.info("Agency details coming soon"),className:"text-[#F59E0B] hover:text-[#D97706] hover:bg-[#FEF3C7]",children:["View Details",s.jsx(Xr,{className:"w-4 h-4 ml-1"})]})]}),s.jsx(er,{className:"p-5",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#FEF3C7] flex items-center justify-center flex-shrink-0",children:s.jsx(Ga,{className:"w-5 h-5 text-[#F59E0B]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs text-[#64748b] mb-1",children:"Agency Name"}),s.jsx("p",{className:"text-sm text-[#0f172a]",children:e.agency})]})]}),s.jsx(qr,{}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#FEF3C7] flex items-center justify-center flex-shrink-0",children:s.jsx(Hs,{className:"w-5 h-5 text-[#F59E0B]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs text-[#64748b] mb-1",children:"License Number"}),s.jsx("p",{className:"text-sm text-[#0f172a]",children:e.agencyLicense})]})]})]})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Jo,{className:"w-4 h-4 text-[#F59E0B]"}),s.jsx("h3",{className:"text-sm font-semibold text-[#0f172a]",children:"Contact Information"})]}),s.jsx(er,{className:"p-5",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#FEF3C7] flex items-center justify-center flex-shrink-0",children:s.jsx(Jo,{className:"w-5 h-5 text-[#F59E0B]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-xs text-[#64748b] mb-1",children:"Address"}),s.jsx("p",{className:"text-sm text-[#0f172a]",children:e.address})]})]})})]}),s.jsx(er,{className:"p-4 bg-slate-50 border-slate-200",children:s.jsxs("div",{className:"flex items-start gap-2 text-xs text-[#64748b]",children:[s.jsx(Ws,{className:"w-3 h-3 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("p",{children:[" Account created: ",e.accountCreated]}),s.jsxs("p",{children:[" Last updated: ",e.lastUpdated]})]})]})})]})]})}function X7({navigation:t,onNavigateToProfile:e}){const[r,n]=N.useState(!0),[a,i]=N.useState(!0),[o,l]=N.useState(!0),[c,u]=N.useState(!1),[h,m]=N.useState(!1),[x,p]=N.useState(!1),[y,w]=N.useState(!1),[j,C]=N.useState({currentPassword:"",newPassword:"",confirmPassword:""}),S={lastPasswordChange:"45 days ago",lastLogin:"Phoenix, AZ",lastLoginTime:"Today at 8:15 AM"},k=[{id:"1",device:"Chrome on Windows",location:"Phoenix, AZ",ip:"192.168.1.1",lastActive:"Active now",current:!0},{id:"2",device:"Safari on iPhone",location:"Phoenix, AZ",ip:"192.168.1.45",lastActive:"3 hours ago",current:!1}],P=()=>{if(!j.currentPassword||!j.newPassword||!j.confirmPassword){Pe.error("Please fill in all fields");return}if(j.newPassword!==j.confirmPassword){Pe.error("New passwords do not match");return}if(j.newPassword.length<8){Pe.error("Password must be at least 8 characters");return}Pe.success("Password changed successfully!"),m(!1),C({currentPassword:"",newPassword:"",confirmPassword:""})},O=R=>{u(R),R?p(!0):Pe.info("Two-factor authentication disabled")},$=R=>{Pe.success("Session revoked successfully")};return s.jsxs("div",{className:"h-full flex flex-col bg-[#f8fafc]",children:[s.jsxs("div",{className:"bg-white border-b border-[#e2e8f0] p-5",children:[s.jsx("h1",{className:"text-lg text-[#0f172a] mb-2",children:"Settings"}),s.jsx("p",{className:"text-sm text-[#64748b]",children:"Manage your account and preferences"})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-5 space-y-5",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm text-[#64748b] mb-3 px-2",children:"ACCOUNT"}),s.jsx("div",{className:"bg-white rounded-2xl border border-[#e2e8f0] overflow-hidden",children:s.jsxs("button",{onClick:()=>e?.(),className:"w-full flex items-center justify-between p-4 hover:bg-[#f8fafc] transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#FEF3C7] flex items-center justify-center",children:s.jsx(Bn,{className:"w-5 h-5 text-[#F59E0B]"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"text-sm text-[#0f172a]",children:"Profile"}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"View and edit your profile"})]})]}),s.jsx(Xr,{className:"w-5 h-5 text-[#cbd5e1]"})]})})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm text-[#64748b] mb-3 px-2",children:"SECURITY"}),s.jsx(er,{className:"p-5",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#DBEAFE] flex items-center justify-center flex-shrink-0",children:s.jsx(fs,{className:"w-5 h-5 text-[#0966CC]"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-[#0f172a] mb-1",children:"Password"}),s.jsxs("p",{className:"text-xs text-[#64748b]",children:["Last changed ",S.lastPasswordChange]})]})]}),s.jsx(de,{variant:"ghost",size:"sm",onClick:()=>m(!0),className:"text-[#0966CC] hover:text-[#075985] hover:bg-[#DBEAFE]",children:"Change"})]}),s.jsx(qr,{}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#D1FAE5] flex items-center justify-center flex-shrink-0",children:s.jsx(M0,{className:"w-5 h-5 text-[#10B981]"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("p",{className:"text-sm text-[#0f172a]",children:"Two-Factor Authentication"}),c&&s.jsx(gt,{variant:"outline",className:"border-[#10B981] text-[#10B981] text-xs h-5",children:" Enabled"})]}),s.jsx("p",{className:"text-xs text-[#64748b]",children:c?"Extra security for your account":"Add extra layer of security"})]})]}),s.jsx(Si,{checked:c,onCheckedChange:O,className:"data-[state=checked]:bg-[#10B981]"})]}),s.jsx(qr,{}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#FEF3C7] flex items-center justify-center flex-shrink-0",children:s.jsx(L0,{className:"w-5 h-5 text-[#F59E0B]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm text-[#0f172a] mb-1",children:"Last Login"}),s.jsxs("p",{className:"text-xs text-[#64748b]",children:[" ",S.lastLogin]}),s.jsxs("p",{className:"text-xs text-[#64748b]",children:[" ",S.lastLoginTime]})]})]}),s.jsx(qr,{}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#E0E7FF] flex items-center justify-center flex-shrink-0",children:s.jsx(cc,{className:"w-5 h-5 text-[#4F46E5]"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-[#0f172a] mb-1",children:"Active Sessions"}),s.jsxs("p",{className:"text-xs text-[#64748b]",children:[k.length," devices signed in"]})]})]}),s.jsx(de,{variant:"ghost",size:"sm",onClick:()=>w(!0),className:"text-[#4F46E5] hover:text-[#4338CA] hover:bg-[#E0E7FF]",children:"View"})]})]})})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm text-[#64748b] mb-3 px-2",children:"NOTIFICATIONS"}),s.jsxs("div",{className:"bg-white rounded-2xl border border-[#e2e8f0] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[#e2e8f0]",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#FEF3C7] flex items-center justify-center",children:s.jsx(Mn,{className:"w-5 h-5 text-[#F59E0B]"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-[#0f172a]",children:"Email Notifications"}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"Receive email updates"})]})]}),s.jsx(Si,{checked:o,onCheckedChange:l,className:"data-[state=checked]:bg-[#F59E0B]"})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-[#e2e8f0]",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#FEF3C7] flex items-center justify-center",children:s.jsx(hr,{className:"w-5 h-5 text-[#F59E0B]"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-[#0f172a]",children:"Chart Notifications"}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"Chart status updates"})]})]}),s.jsx(Si,{checked:r,onCheckedChange:n,className:"data-[state=checked]:bg-[#F59E0B]"})]}),s.jsxs("div",{className:"flex items-center justify-between p-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#E0F2FE] flex items-center justify-center",children:s.jsx(xh,{className:"w-5 h-5 text-[#0966CC]"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-[#0f172a]",children:"Assignment Alerts"}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"New chart assignments"})]})]}),s.jsx(Si,{checked:a,onCheckedChange:i,className:"data-[state=checked]:bg-[#0966CC]"})]})]})]}),s.jsx(er,{className:"p-4 bg-amber-50 border-amber-200",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Vf,{className:"w-4 h-4 text-amber-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"text-xs text-amber-800",children:[s.jsx("p",{className:"font-semibold mb-1",children:"Need help with settings?"}),s.jsx("p",{children:"Contact your agency administrator or visit our help center for assistance."})]})]})})]}),s.jsx(ar,{open:h,onOpenChange:m,children:s.jsxs(sr,{className:"sm:max-w-[500px]",children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Change Password"}),s.jsx(lr,{children:"Enter your current password and choose a new one."})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"current-password",children:"Current Password"}),s.jsx(Ze,{id:"current-password",type:"password",value:j.currentPassword,onChange:R=>C({...j,currentPassword:R.target.value}),placeholder:"Enter current password",className:"mt-2 h-12 rounded-xl border-2 border-[#e2e8f0]"})]}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"new-password",children:"New Password"}),s.jsx(Ze,{id:"new-password",type:"password",value:j.newPassword,onChange:R=>C({...j,newPassword:R.target.value}),placeholder:"Enter new password",className:"mt-2 h-12 rounded-xl border-2 border-[#e2e8f0]"}),s.jsx("p",{className:"text-xs text-[#64748b] mt-1",children:"Must be at least 8 characters"})]}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"confirm-password",children:"Confirm New Password"}),s.jsx(Ze,{id:"confirm-password",type:"password",value:j.confirmPassword,onChange:R=>C({...j,confirmPassword:R.target.value}),placeholder:"Confirm new password",className:"mt-2 h-12 rounded-xl border-2 border-[#e2e8f0]"})]})]}),s.jsxs(_r,{children:[s.jsx(de,{variant:"outline",onClick:()=>{m(!1),C({currentPassword:"",newPassword:"",confirmPassword:""})},children:"Cancel"}),s.jsxs(de,{onClick:P,className:"bg-[#F59E0B] hover:bg-[#D97706] text-white",children:[s.jsx(fs,{className:"w-4 h-4 mr-2"}),"Change Password"]})]})]})}),s.jsx(ar,{open:x,onOpenChange:p,children:s.jsxs(sr,{children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Enable Two-Factor Authentication"}),s.jsx(lr,{children:"Scan the QR code with your authenticator app"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsx("div",{className:"w-48 h-48 bg-slate-100 rounded-lg mx-auto flex items-center justify-center",children:s.jsx("p",{className:"text-sm text-slate-500",children:"QR Code Here"})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-[#0f172a]",children:"Verification Code"}),s.jsx("input",{type:"text",className:"w-full h-10 px-3 rounded-lg border border-slate-300 focus:outline-none focus:ring-2 focus:ring-[#F59E0B]",placeholder:"Enter 6-digit code"})]})]}),s.jsxs(_r,{children:[s.jsx(de,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),s.jsx(de,{className:"bg-[#F59E0B] hover:bg-[#D97706]",onClick:()=>{p(!1),Pe.success("Two-factor authentication enabled")},children:"Verify & Enable"})]})]})}),s.jsx(ar,{open:y,onOpenChange:w,children:s.jsxs(sr,{className:"max-w-2xl",children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Active Sessions"}),s.jsx(lr,{children:"Manage devices where you're currently signed in"})]}),s.jsx("div",{className:"space-y-3 py-4 max-h-96 overflow-y-auto",children:k.map(R=>s.jsx(er,{className:"p-4",children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#DBEAFE] flex items-center justify-center flex-shrink-0",children:s.jsx(cc,{className:"w-5 h-5 text-[#0966CC]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("p",{className:"text-sm font-medium text-[#0f172a]",children:R.device}),R.current&&s.jsx(gt,{variant:"outline",className:"border-[#F59E0B] text-[#F59E0B] text-xs h-5",children:"Current"})]}),s.jsxs("p",{className:"text-xs text-[#64748b]",children:[" ",R.location]}),s.jsxs("p",{className:"text-xs text-[#64748b]",children:["IP: ",R.ip]}),s.jsx("p",{className:"text-xs text-[#64748b]",children:R.lastActive})]})]}),!R.current&&s.jsx(de,{variant:"ghost",size:"sm",onClick:()=>$(R.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:"Revoke"})]})},R.id))}),s.jsxs(_r,{children:[s.jsx(de,{variant:"outline",onClick:()=>w(!1),children:"Close"}),s.jsxs(de,{variant:"destructive",onClick:()=>{Pe.success("All other sessions revoked"),w(!1)},children:[s.jsx(go,{className:"w-4 h-4 mr-2"}),"Revoke All Others"]})]})]})})]})}function Mte({onClose:t}){const{user:e}=Ka(),[r,n]=N.useState([]),[a,i]=N.useState(!0),[o,l]=N.useState(""),[c,u]=N.useState("all"),[h,m]=N.useState(null),[x,p]=N.useState(!1),[y,w]=N.useState(!1),[j,C]=N.useState(!1),[S,k]=N.useState(null),[P,O]=N.useState(""),[$,R]=N.useState(!1),[B,U]=N.useState({total:0,unassigned:0,ocrProcessing:0,failed:0});N.useEffect(()=>{K(),M()},[e?.tenant_id]);const K=async()=>{if(e?.tenant_id)try{i(!0);const H=await DE(e.tenant_id);n(H)}catch(H){console.error("Error loading documents:",H),Pe.error("Failed to load documents")}finally{i(!1)}},M=async()=>{if(e?.tenant_id)try{const H=await OE(e.tenant_id);U(H)}catch(H){console.error("Error loading document stats:",H)}},q=async H=>{k(H),C(!0),R(!0);try{const se=await Z1(H.file_url);O(se)}catch(se){console.error("Error getting signed URL:",se),O(H.file_url)}finally{R(!1)}},re=async()=>{if(h)try{await Ub(h.id,h.file_url),Pe.success("Document deleted successfully"),w(!1),m(null),K(),M()}catch(H){console.error("Error deleting document:",H),Pe.error("Failed to delete document")}},ee=r.filter(H=>{const se=o.toLowerCase().trim();if(!se&&c==="all")return!0;const ue=!se||H.file_name.toLowerCase().includes(se)||H.chart?.patient&&`${H.chart.patient.first_name} ${H.chart.patient.last_name}`.toLowerCase().includes(se),G=c==="all"?!0:c==="assigned"?H.chart_id!==null&&H.chart?.patient:c==="unassigned"?!H.chart?.patient:c==="processing"?["pending","processing"].includes(H.ocr_status||""):c==="failed"?H.ocr_status==="failed":!0;return ue&&G});return a?s.jsx("div",{className:"flex items-center justify-center p-12",children:s.jsx(Xd,{className:"w-8 h-8 text-[#F59E0B] animate-spin"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl text-[#0f172a]",children:"Document Library"}),s.jsx("p",{className:"text-sm text-[#64748b]",children:"View and manage all documents in your organization"})]}),t&&s.jsx(de,{variant:"ghost",size:"sm",onClick:t,children:s.jsx(ps,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[s.jsxs("div",{className:"bg-white rounded-xl border border-[#e2e8f0] p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(hr,{className:"w-4 h-4 text-[#64748b]"}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"Total"})]}),s.jsx("p",{className:"text-2xl text-[#0f172a]",children:B.total})]}),s.jsxs("div",{className:"bg-white rounded-xl border border-[#e2e8f0] p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(Kn,{className:"w-4 h-4 text-[#F59E0B]"}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"Unassigned"})]}),s.jsx("p",{className:"text-2xl text-[#F59E0B]",children:B.unassigned})]}),s.jsxs("div",{className:"bg-white rounded-xl border border-[#e2e8f0] p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(ps,{className:"w-4 h-4 text-[#DC2626]"}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"Failed"})]}),s.jsx("p",{className:"text-2xl text-[#DC2626]",children:B.failed})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[1fr_auto] gap-3",children:[s.jsxs("div",{className:"relative w-full",children:[s.jsx(Zi,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-[#94a3b8]"}),s.jsx(Ze,{placeholder:"Search by file name or patient name...",value:o,onChange:H=>l(H.target.value),className:"w-full pl-12 pr-10 h-14 rounded-xl border-2 border-[#e2e8f0] bg-white text-base"}),o&&s.jsx("button",{onClick:()=>l(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#94a3b8] hover:text-[#64748b] transition-colors",children:s.jsx(ps,{className:"w-5 h-5"})})]}),s.jsxs(oa,{value:c,onValueChange:H=>u(H),children:[s.jsx(ca,{className:"w-full md:w-[240px] h-14 rounded-xl border-2 border-[#e2e8f0] text-base",children:s.jsx(la,{placeholder:"Filter by status"})}),s.jsxs(da,{children:[s.jsx(Bt,{value:"all",children:"All Documents"}),s.jsx(Bt,{value:"unassigned",children:"Unassigned"}),s.jsx(Bt,{value:"assigned",children:"Assigned"}),s.jsx(Bt,{value:"processing",children:"Processing"}),s.jsx(Bt,{value:"failed",children:"Failed"})]})]})]}),ee.length>0?s.jsx("div",{className:"space-y-3",children:ee.map(H=>s.jsx("div",{className:"bg-white rounded-xl border border-[#e2e8f0] p-5 hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-2",children:[s.jsx("h3",{className:"text-lg text-[#0f172a]",children:H.file_name}),!H.chart_id&&s.jsxs(gt,{className:"bg-[#FEF3C7] text-[#F59E0B] border-[#FDE68A]",children:[s.jsx(Kn,{className:"w-3 h-3 mr-1"}),"Unassigned"]})]}),s.jsxs("div",{className:"space-y-1 text-sm text-[#64748b]",children:[H.chart?.patient&&s.jsxs("p",{children:["Patient: ",H.chart.patient.first_name," ",H.chart.patient.last_name]}),s.jsxs("p",{children:["Uploaded: ",new Date(H.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})]}),H.uploaded_by&&s.jsxs("p",{children:["Uploaded by: ",H.uploaded_by]})]})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsxs(de,{variant:"outline",size:"sm",onClick:()=>q(H),className:"border-[#E0F2FE] text-[#0966CC] hover:bg-[#F0F9FF]",children:[s.jsx(hs,{className:"w-4 h-4 mr-2"}),"View"]}),!H.chart_id&&s.jsxs(de,{variant:"outline",size:"sm",onClick:()=>{m(H),p(!0)},className:"border-[#F59E0B] text-[#F59E0B] hover:bg-[#FEF3C7]",children:[s.jsx(mD,{className:"w-4 h-4 mr-2"}),"Attach"]}),s.jsxs(de,{variant:"outline",size:"sm",onClick:()=>{m(H),w(!0)},className:"border-[#DC2626] text-[#DC2626] hover:bg-[#FEE2E2]",children:[s.jsx(iu,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})},H.id))}):s.jsxs("div",{className:"bg-white rounded-xl border border-[#e2e8f0] p-12 text-center",children:[s.jsx(hr,{className:"w-12 h-12 text-[#cbd5e1] mx-auto mb-3"}),s.jsx("p",{className:"text-[#64748b] mb-2",children:o||c!=="all"?"No documents found matching your filters.":"No documents uploaded yet."}),(o||c!=="all")&&s.jsx("button",{onClick:()=>{l(""),u("all")},className:"text-[#F59E0B] hover:text-[#D97706] text-sm underline",children:"Clear filters"})]}),h&&s.jsx(ar,{open:x,onOpenChange:p,children:s.jsxs(sr,{className:"sm:max-w-[500px]",children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Attach Document to Chart"}),s.jsxs(lr,{children:['Select a patient chart to attach "',h.file_name,'"']})]}),s.jsxs("div",{className:"py-4",children:[s.jsx("p",{className:"text-sm text-[#64748b] mb-4",children:"Search for a patient and select their chart to attach this document."}),s.jsx("p",{className:"text-xs text-[#94a3b8] italic",children:"Patient selection interface coming soon"})]}),s.jsx(_r,{children:s.jsx(de,{variant:"outline",onClick:()=>{p(!1),m(null)},children:"Cancel"})})]})}),s.jsx(ar,{open:y,onOpenChange:w,children:s.jsxs(sr,{className:"sm:max-w-[500px]",children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Delete Document"}),s.jsx(lr,{children:"Are you sure you want to delete this document? This action cannot be undone."})]}),h&&s.jsxs("div",{className:"bg-[#f8fafc] rounded-xl p-4",children:[s.jsxs("p",{className:"text-sm text-[#0f172a]",children:[s.jsx("strong",{children:"File:"})," ",h.file_name]}),h.chart?.patient&&s.jsxs("p",{className:"text-sm text-[#0f172a] mt-1",children:[s.jsx("strong",{children:"Patient:"})," ",h.chart.patient.first_name," ",h.chart.patient.last_name]})]}),s.jsxs(_r,{children:[s.jsx(de,{variant:"outline",onClick:()=>{w(!1),m(null)},children:"Cancel"}),s.jsxs(de,{onClick:re,className:"bg-[#DC2626] hover:bg-[#B91C1C] text-white",children:[s.jsx(iu,{className:"w-4 h-4 mr-2"}),"Delete Document"]})]})]})}),s.jsx(ar,{open:j,onOpenChange:C,children:s.jsxs(sr,{className:"max-w-4xl h-[90vh] flex flex-col",children:[s.jsxs(ir,{children:[s.jsx(or,{children:"View Document"}),s.jsx(lr,{children:S?.file_name})]}),s.jsx("div",{className:"flex-1 overflow-auto bg-[#f8fafc] rounded-xl",children:$?s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsx(Xd,{className:"w-8 h-8 text-[#F59E0B] animate-spin"})}):S&&P?s.jsxs(s.Fragment,{children:[S.file_type.includes("pdf")&&s.jsx("iframe",{src:P,className:"w-full h-full border-0",title:S.file_name}),S.file_type.includes("image")&&s.jsxs("div",{className:"flex items-center justify-center h-full p-4",children:[s.jsx("img",{src:P,alt:S.file_name,className:"max-w-full max-h-full object-contain",onError:H=>{console.error("Image failed to load"),H.currentTarget.style.display="none";const se=H.currentTarget.nextElementSibling;se&&(se.classList.remove("hidden"),se.classList.add("flex"))}}),s.jsxs("div",{className:"hidden flex-col items-center justify-center",children:[s.jsx(Kn,{className:"w-16 h-16 text-[#DC2626] mb-4"}),s.jsx("p",{className:"text-[#64748b] mb-4",children:"Failed to load image"}),s.jsxs(de,{onClick:()=>window.open(P,"_blank"),className:"bg-[#F59E0B] hover:bg-[#D97706] text-white",children:[s.jsx(Ai,{className:"w-4 h-4 mr-2"}),"Try Download"]})]})]}),!S.file_type.includes("pdf")&&!S.file_type.includes("image")&&s.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center",children:[s.jsx(hr,{className:"w-16 h-16 text-[#cbd5e1] mb-4"}),s.jsx("p",{className:"text-[#64748b] mb-4",children:"Preview not available for this file type."}),s.jsxs(de,{onClick:()=>window.open(P,"_blank"),className:"bg-[#F59E0B] hover:bg-[#D97706] text-white",children:[s.jsx(Ai,{className:"w-4 h-4 mr-2"}),"Download File"]})]})]}):null}),s.jsxs(_r,{children:[s.jsx(de,{variant:"outline",onClick:()=>{C(!1),k(null)},children:"Close"}),s.jsxs(de,{onClick:()=>{if(P){const H=document.createElement("a");H.href=P,H.download=S?.file_name||"document",H.target="_blank",document.body.appendChild(H),H.click(),document.body.removeChild(H)}},disabled:$||!P,className:"bg-[#F59E0B] hover:bg-[#D97706] text-white disabled:opacity-50",children:[s.jsx(Ai,{className:"w-4 h-4 mr-2"}),"Download"]})]})]})})]})}function Bte(t){const e=()=>t.status==="delivered_locked"||t.status==="archived"?"Completed":t.assigned_clinician||t.patient.assigned_clinician_id?"Assigned":(t.document_count||0)>0?"Docs Available":"Needs Assignment",r=()=>{const i=new Date(t.created_at);return(new Date().getTime()-i.getTime())/(1e3*60*60)<24},n=()=>{if(t.assigned_clinician||t.patient.assigned_clinician_id)return 0;const i=new Date(t.created_at);return Math.floor((new Date().getTime()-i.getTime())/(1e3*60*60*24))},a=()=>{if(t.assigned_clinician)return`${t.assigned_clinician.first_name} ${t.assigned_clinician.last_name}`};return{id:t.id,patientId:t.patient_id,patientName:`${t.patient.first_name} ${t.patient.last_name}`,patientDob:t.patient.date_of_birth,status:e(),createdDate:t.created_at,assignedTo:a(),assignedToId:t.patient.assigned_clinician_id,documentCount:t.document_count||0,isNew:r(),waitingDays:n()}}function Ute(t){return t.map(Bte)}function $te({navigation:t}){const{user:e,logout:r}=Ka(),[n,a]=N.useState(!1),[i,o]=N.useState("charts"),[l,c]=N.useState(""),[u,h]=N.useState("all"),[m,x]=N.useState([]),[p,y]=N.useState([]),[w,j]=N.useState(!0),[C,S]=N.useState({totalPatients:0,totalCharts:0,unassignedCharts:0,chartsWithDocuments:0,newDocsToday:0}),[k,P]=N.useState(!1),[O,$]=N.useState(!1),[R,B]=N.useState(!1),[U,K]=N.useState(!1),[M,q]=N.useState(null),[re,ee]=N.useState(""),[H,se]=N.useState(!1),[ue,G]=N.useState(null),[J,oe]=N.useState([]),[Y,L]=N.useState(!1),[z,V]=N.useState({first_name:"",last_name:"",date_of_birth:"",address_line1:"",phone:""});N.useEffect(()=>{e?.tenant_id&&W()},[e?.tenant_id]);const W=async()=>{if(e?.tenant_id)try{j(!0);const[Be,ye,st]=await Promise.all([Jee(e.tenant_id),Qee(e.tenant_id),rte(e.tenant_id)]);console.log("Dashboard data loaded:",{charts:Be?.length,clinicians:ye?.length,cliniciansData:ye}),x(Ute(Be)),y(ye),S(st)}catch(Be){console.error("Error loading dashboard data:",Be),Pe.error("Failed to load dashboard data")}finally{j(!1)}},Q=()=>{r(),t.navigate("Landing")},T=Be=>{o(Be),a(!1)},ie=async()=>{if(!z.first_name||!z.last_name||!z.date_of_birth){Pe.error("Please fill in required fields (First Name, Last Name, Date of Birth)");return}if(!e?.tenant_id||!e?.id){Pe.error("User information not available");return}try{se(!0);const Be=await ete(z,e.tenant_id,e.id);Pe.success(`Chart created for ${Be.patient.first_name} ${Be.patient.last_name}`),P(!1),V({first_name:"",last_name:"",date_of_birth:"",address_line1:"",phone:""}),W()}catch(Be){console.error("Error creating chart:",Be),Pe.error(Be.message||"Failed to create chart")}finally{se(!1)}},ge=async()=>{if(!re){Pe.error("Please select a clinician");return}if(!M){Pe.error("No chart selected");return}try{await rw(M.id,re);const Be=p.find(ye=>ye.id===re);Pe.success(`Chart assigned to ${Be?.first_name} ${Be?.last_name}!`),$(!1),q(null),ee(""),W()}catch(Be){console.error("Error assigning chart:",Be),Pe.error(Be.message||"Failed to assign chart")}},we=async(Be,ye)=>{try{await tte(Be,ye);const st=p.find(Ve=>Ve.id===ye);Pe.success(`Chart reassigned to ${st?.first_name} ${st?.last_name}!`),W()}catch(st){console.error("Error reassigning chart:",st),Pe.error(st.message||"Failed to reassign chart")}},Se=()=>{G("camera"),K(!0)},Ue=()=>{const Be=document.createElement("input");Be.type="file",Be.accept="image/*,.pdf",Be.multiple=!0,Be.onchange=ye=>{const st=Array.from(ye.target.files||[]);st.length>0&&(oe(st),G("file"),K(!0))},Be.click()},We=async Be=>{if(!(!e?.id||!e?.tenant_id)){L(!0);try{const{uploadDocument:ye}=await f0(async()=>{const{uploadDocument:st}=await Promise.resolve().then(()=>KY);return{uploadDocument:st}},void 0);ue==="file"&&J.length>0?(await Promise.all(J.map(st=>ye(st,Be,e.tenant_id,e.id))),Pe.success(`${J.length} file(s) uploaded successfully`)):ue==="camera"&&Pe.info("Camera functionality will open after patient selection"),K(!1),oe([]),G(null),W()}catch(ye){console.error("Error uploading documents:",ye),Pe.error(ye.message||"Failed to upload documents")}finally{L(!1)}}},be=()=>s.jsxs("nav",{className:"space-y-1",children:[s.jsxs("button",{onClick:()=>T("charts"),className:`w-full flex items-center gap-3 px-3 py-3 rounded-lg transition-colors ${i==="charts"?"bg-[#FEF3C7] text-[#F59E0B]":"text-[#64748b] hover:bg-[#f8fafc]"}`,children:[s.jsx(hr,{className:"w-5 h-5"}),s.jsx("span",{children:"Patient Charts"})]}),s.jsxs("button",{onClick:()=>T("scan"),className:`w-full flex items-center gap-3 px-3 py-3 rounded-lg transition-colors ${i==="scan"?"bg-[#FEF3C7] text-[#F59E0B]":"text-[#64748b] hover:bg-[#f8fafc]"}`,children:[s.jsx(Ls,{className:"w-5 h-5"}),s.jsx("span",{children:"Scan Documents"})]}),s.jsxs("button",{onClick:()=>T("documents"),className:`w-full flex items-center gap-3 px-3 py-3 rounded-lg transition-colors ${i==="documents"?"bg-[#FEF3C7] text-[#F59E0B]":"text-[#64748b] hover:bg-[#f8fafc]"}`,children:[s.jsx(hr,{className:"w-5 h-5"}),s.jsx("span",{children:"Document Library"})]}),s.jsxs("button",{onClick:()=>T("assign"),className:`w-full flex items-center gap-3 px-3 py-3 rounded-lg transition-colors ${i==="assign"?"bg-[#FEF3C7] text-[#F59E0B]":"text-[#64748b] hover:bg-[#f8fafc]"}`,children:[s.jsx(uh,{className:"w-5 h-5"}),s.jsx("span",{children:"Assign Charts"})]}),s.jsxs("button",{onClick:()=>T("profile"),className:`w-full flex items-center gap-3 px-3 py-3 rounded-lg transition-colors ${i==="profile"?"bg-[#FEF3C7] text-[#F59E0B]":"text-[#64748b] hover:bg-[#f8fafc]"}`,children:[s.jsx(Bn,{className:"w-5 h-5"}),s.jsx("span",{children:"Profile"})]}),s.jsxs("button",{onClick:()=>T("settings"),className:`w-full flex items-center gap-3 px-3 py-3 rounded-lg transition-colors ${i==="settings"?"bg-[#FEF3C7] text-[#F59E0B]":"text-[#64748b] hover:bg-[#f8fafc]"}`,children:[s.jsx(au,{className:"w-5 h-5"}),s.jsx("span",{children:"Settings"})]})]}),pe=()=>{const Be=m.filter(ye=>{const st=ye.patientName.toLowerCase().includes(l.toLowerCase()),Ve=u==="all"?!0:u==="needs-assignment"?ye.status==="Needs Assignment"||ye.status==="Docs Available":u==="assigned"?ye.status==="Assigned":u==="completed"?ye.status==="Completed":!0;return st&&Ve});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl text-[#0f172a]",children:"Patient Charts"}),s.jsx("p",{className:"text-sm text-[#64748b]",children:"Create charts and manage patient records"})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs(de,{onClick:()=>P(!0),className:"bg-[#F59E0B] hover:bg-[#D97706] text-white",children:[s.jsx(Da,{className:"w-4 h-4 mr-2"}),"Create New Chart"]}),s.jsxs(de,{onClick:Se,variant:"outline",className:"border-[#e2e8f0] text-[#64748b] hover:bg-[#f8fafc]",children:[s.jsx(Ls,{className:"w-4 h-4 mr-2"}),"Camera Scan"]}),s.jsxs(de,{onClick:Ue,variant:"outline",className:"border-[#e2e8f0] text-[#64748b] hover:bg-[#f8fafc]",children:[s.jsx(Ai,{className:"w-4 h-4 mr-2"}),"Import File"]})]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Zi,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-[#94a3b8]"}),s.jsx(Ze,{placeholder:"Search charts by patient name...",value:l,onChange:ye=>c(ye.target.value),className:"pl-12 h-12 rounded-xl border-2 border-[#e2e8f0] bg-white"})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx(de,{onClick:()=>h("all"),variant:u==="all"?"default":"outline",className:u==="all"?"bg-[#F59E0B] hover:bg-[#D97706] text-white":"border-[#e2e8f0] text-[#64748b] hover:bg-[#f8fafc]",children:"All Charts"}),s.jsxs(de,{onClick:()=>h("needs-assignment"),variant:u==="needs-assignment"?"default":"outline",className:u==="needs-assignment"?"bg-[#F59E0B] hover:bg-[#D97706] text-white":"border-[#e2e8f0] text-[#64748b] hover:bg-[#f8fafc]",children:[s.jsx(Kn,{className:"w-4 h-4 mr-2"}),"Needs Assignment"]}),s.jsx(de,{onClick:()=>h("assigned"),variant:u==="assigned"?"default":"outline",className:u==="assigned"?"bg-[#F59E0B] hover:bg-[#D97706] text-white":"border-[#e2e8f0] text-[#64748b] hover:bg-[#f8fafc]",children:"Assigned"}),s.jsx(de,{onClick:()=>h("completed"),variant:u==="completed"?"default":"outline",className:u==="completed"?"bg-[#F59E0B] hover:bg-[#D97706] text-white":"border-[#e2e8f0] text-[#64748b] hover:bg-[#f8fafc]",children:"Completed"})]}),Be.length>0?s.jsx("div",{className:"space-y-3",children:Be.map(ye=>{const st=Ve=>{switch(Ve){case"Needs Assignment":return"bg-[#FEF3C7] text-[#F59E0B] border-[#FDE68A]";case"Assigned":return"bg-[#DBEAFE] text-[#0966CC] border-[#BFDBFE]";case"Docs Available":return"bg-[#E0E7FF] text-[#4F46E5] border-[#C7D2FE]";case"Completed":return"bg-[#D1FAE5] text-[#10B981] border-[#A7F3D0]";default:return"bg-[#f1f5f9] text-[#64748b] border-[#e2e8f0]"}};return s.jsxs("div",{className:"bg-white rounded-xl border border-[#e2e8f0] p-5 hover:shadow-md transition-shadow",children:[s.jsx("div",{className:"flex items-start justify-between gap-4 mb-3",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-2",children:[s.jsx("h3",{className:"text-lg text-[#0f172a]",children:ye.patientName}),s.jsx(gt,{className:st(ye.status),children:ye.status==="Assigned"&&ye.assignedTo?`Assigned (${ye.assignedTo})`:ye.status}),ye.isNew&&s.jsxs(gt,{className:"bg-[#FEE2E2] text-[#DC2626] border-[#FECACA]",children:[s.jsx(WN,{className:"w-3 h-3 mr-1"}),"New"]}),ye.documentCount>0&&ye.status!=="Completed"&&s.jsxs(gt,{variant:"outline",className:"border-[#E0E7FF] text-[#4F46E5] bg-[#F5F3FF]",children:[s.jsx(hr,{className:"w-3 h-3 mr-1"}),ye.documentCount," Doc",ye.documentCount!==1?"s":""," Pending"]}),ye.waitingDays>0&&s.jsxs(gt,{variant:"outline",className:"border-[#FDE68A] text-[#D97706] bg-[#FFFBEB]",children:[s.jsx(Ws,{className:"w-3 h-3 mr-1"}),"Waiting ",ye.waitingDays,"d"]})]}),s.jsxs("div",{className:"space-y-1 mb-3",children:[s.jsxs("p",{className:"text-sm text-[#64748b]",children:["ID: ",ye.patientId]}),s.jsxs("p",{className:"text-sm text-[#64748b]",children:["DOB: ",new Date(ye.patientDob).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm text-[#64748b]",children:[s.jsxs("span",{children:[ye.documentCount," document",ye.documentCount!==1?"s":""]}),s.jsx("span",{children:""}),s.jsxs("span",{children:["Created ",new Date(ye.createdDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]}),ye.assignedTo&&s.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[s.jsx(Xs,{className:"w-6 h-6",children:s.jsx(Zs,{className:"bg-gradient-to-br from-[#E0F2FE] to-[#BFDBFE] text-[#0966CC] text-xs",children:ye.assignedTo.split(" ").map(Ve=>Ve[0]).join("")})}),s.jsxs(iC,{children:[s.jsx(oC,{asChild:!0,children:s.jsxs(de,{variant:"ghost",size:"sm",className:"text-sm text-[#0966CC] hover:underline h-auto p-0 hover:bg-transparent flex items-center gap-1",children:["Assigned to: ",ye.assignedTo,s.jsx(qx,{className:"w-3 h-3"})]})}),s.jsx(lC,{className:"w-64 p-3",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-sm text-[#64748b] mb-2",children:"Reassign to:"}),p.map(Ve=>s.jsx("button",{onClick:()=>we(ye.id,Ve.id),className:"w-full text-left px-3 py-2 rounded-lg hover:bg-[#f8fafc] transition-colors text-sm",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Xs,{className:"w-6 h-6",children:s.jsxs(Zs,{className:"bg-gradient-to-br from-[#E0F2FE] to-[#BFDBFE] text-[#0966CC] text-xs",children:[Ve.first_name[0],Ve.last_name[0]]})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-[#0f172a]",children:[Ve.first_name," ",Ve.last_name]}),s.jsxs("p",{className:"text-xs text-[#64748b]",children:[Ve.active_chart_count," charts"]})]})]})},Ve.id))]})})]})]})]})}),s.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[ye.documentCount>0&&s.jsxs(de,{variant:"outline",size:"sm",onClick:()=>{console.log("Viewing documents for chart:",ye.id),alert("Document viewer would open here")},className:"border-[#E0E7FF] text-[#4F46E5] hover:bg-[#F5F3FF]",children:[s.jsx(hs,{className:"w-4 h-4 mr-2"}),"View Docs"]}),!ye.assignedTo&&s.jsxs(iC,{children:[s.jsx(oC,{asChild:!0,children:s.jsxs(de,{variant:"outline",size:"sm",className:"border-[#F59E0B] text-[#F59E0B] hover:bg-[#FEF3C7]",children:[s.jsx(uh,{className:"w-4 h-4 mr-2"}),"Assign to Clinician",s.jsx(qx,{className:"w-4 h-4 ml-1"})]})}),s.jsx(lC,{className:"w-64 p-3",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-sm text-[#64748b] mb-2",children:"Select clinician:"}),p.map(Ve=>s.jsx("button",{onClick:async()=>{try{await rw(ye.id,Ve.id),Pe.success(`Chart assigned to ${Ve.first_name} ${Ve.last_name}!`),W()}catch(vt){console.error("Error assigning chart:",vt),Pe.error(vt.message||"Failed to assign chart")}},className:"w-full text-left px-3 py-2 rounded-lg hover:bg-[#f8fafc] transition-colors text-sm",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Xs,{className:"w-6 h-6",children:s.jsxs(Zs,{className:"bg-gradient-to-br from-[#E0F2FE] to-[#BFDBFE] text-[#0966CC] text-xs",children:[Ve.first_name[0],Ve.last_name[0]]})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-[#0f172a]",children:[Ve.first_name," ",Ve.last_name]}),s.jsxs("p",{className:"text-xs text-[#64748b]",children:[Ve.active_chart_count," charts"]})]})]})},Ve.id))]})})]})]}),!ye.assignedTo&&ye.status==="Needs Assignment"&&s.jsx("div",{className:"mt-3 pt-3 border-t border-[#f1f5f9]",children:s.jsxs("div",{className:"flex items-center gap-2 text-xs text-[#64748b]",children:[s.jsx(w0,{className:"w-3 h-3"}),s.jsx("span",{children:"Suggested: Anna Clinician (5 charts, closest location)"}),s.jsx(gt,{variant:"outline",className:"text-xs border-[#E0E7FF] text-[#4F46E5]",children:"Coming Soon"})]})})]},ye.id)})}):s.jsxs("div",{className:"bg-white rounded-xl border border-[#e2e8f0] p-12 text-center",children:[s.jsx(hr,{className:"w-12 h-12 text-[#cbd5e1] mx-auto mb-3"}),s.jsx("p",{className:"text-[#64748b]",children:l?"No charts found matching your search.":u==="needs-assignment"?"No charts need assignment at this time.":"No charts found. Create a new chart to get started."})]})]})},at=()=>{const ye=C.chartsWithDocuments>0;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl text-[#0f172a]",children:"Scan Documents"}),s.jsx("p",{className:"text-sm text-[#64748b]",children:"Scan and attach documents to patient charts"})]}),s.jsxs(de,{onClick:()=>{console.log("Opening quick scan"),alert("Camera scan would open here")},className:"bg-[#F59E0B] hover:bg-[#D97706] text-white",children:[s.jsx(Ls,{className:"w-4 h-4 mr-2"}),"New Scan"]})]}),s.jsxs("div",{className:"bg-white rounded-xl border border-[#e2e8f0] p-4",children:[s.jsx("p",{className:"text-sm text-[#64748b] mb-3",children:"Document Status"}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[C.newDocsToday>0&&s.jsxs(gt,{className:"bg-[#E0F2FE] text-[#0966CC] border-[#BFDBFE]",children:[s.jsx(hr,{className:"w-3 h-3 mr-1"}),C.newDocsToday," New Today"]}),C.chartsWithDocuments>0&&s.jsxs(gt,{className:"bg-[#D1FAE5] text-[#10B981] border-[#A7F3D0]",children:[s.jsx(kr,{className:"w-3 h-3 mr-1"}),C.chartsWithDocuments," Charts with Docs"]}),!ye&&s.jsxs(gt,{className:"bg-[#F1F5F9] text-[#64748b] border-[#E2E8F0]",children:[s.jsx(Kn,{className:"w-3 h-3 mr-1"}),"No documents yet"]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("button",{onClick:Se,className:"w-full bg-white rounded-xl border-2 border-[#e2e8f0] p-6 hover:border-[#F59E0B] hover:shadow-md transition-all text-left group",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"w-14 h-14 rounded-xl bg-[#FEF3C7] flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform",children:s.jsx(Ls,{className:"w-7 h-7 text-[#F59E0B]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-lg text-[#0f172a] mb-1",children:"Camera Scan"}),s.jsx("p",{className:"text-sm text-[#64748b] mb-2",children:"Scan paper docs using device camera"}),s.jsx("p",{className:"text-xs text-[#94a3b8]",children:"Best for discharge summaries, medical records, and insurance cards"})]}),s.jsx(Xr,{className:"w-5 h-5 text-[#cbd5e1] flex-shrink-0"})]})}),s.jsx("button",{onClick:Ue,className:"w-full bg-white rounded-xl border-2 border-dashed border-[#e2e8f0] p-6 hover:border-[#F59E0B] hover:bg-[#FFFBEB] hover:shadow-md transition-all text-left group",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"w-14 h-14 rounded-xl bg-[#E0F2FE] flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform",children:s.jsx(Ai,{className:"w-7 h-7 text-[#0966CC]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-lg text-[#0f172a] mb-1",children:"Import File"}),s.jsx("p",{className:"text-sm text-[#64748b] mb-2",children:"Upload a PDF or photo from computer"}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("p",{className:"text-xs text-[#94a3b8]",children:"Supports: PDF, JPG, PNG, HEIC"}),s.jsx("p",{className:"text-xs text-[#0966CC] italic",children:"Drop files here or click to browse"})]})]}),s.jsx(Xr,{className:"w-5 h-5 text-[#cbd5e1] flex-shrink-0"})]})})]}),s.jsx("div",{className:"bg-white rounded-xl border border-[#e2e8f0] p-4",children:s.jsxs("div",{className:"flex items-start sm:items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-[#E0F2FE] flex items-center justify-center flex-shrink-0",children:s.jsx(hr,{className:"w-5 h-5 text-[#0966CC]"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-[#0f172a]",children:"Need help scanning?"}),s.jsx("p",{className:"text-xs text-[#64748b]",children:"Tips for better quality scans"})]})]}),s.jsx(de,{variant:"outline",size:"sm",onClick:()=>{console.log("Opening scan guide"),alert("Scan quality guide would open here with tips about lighting, angle, blur, etc.")},className:"border-[#E0F2FE] text-[#0966CC] hover:bg-[#F0F9FF] flex-shrink-0",children:"View Guide"})]})}),s.jsxs("div",{className:"bg-[#FEF3C7] border border-[#FDE68A] rounded-xl p-4 space-y-2",children:[s.jsxs("p",{className:"text-sm text-[#92400E]",children:[s.jsx("strong",{children:"HIPAA Compliant:"})," All scanned documents are securely encrypted and stored. Documents can be attached to patient charts for clinician review."]}),s.jsxs("p",{className:"text-xs text-[#92400E] flex items-center gap-2",children:[s.jsx("span",{className:"inline-block w-1.5 h-1.5 rounded-full bg-[#10B981]"}),"Offline scans will sync automatically once reconnected"]})]})]})},tt=()=>{const Be=m.filter(ye=>!ye.assignedTo);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl text-[#0f172a]",children:"Assign Charts"}),s.jsx("p",{className:"text-sm text-[#64748b]",children:"Assign charts to clinicians for review"})]}),Be.length>0?s.jsx("div",{className:"space-y-3",children:Be.map(ye=>s.jsx("div",{className:"bg-white rounded-xl border border-[#e2e8f0] p-5",children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("h3",{className:"text-lg text-[#0f172a]",children:ye.patientName}),ye.isNew&&s.jsxs(gt,{className:"bg-[#FEE2E2] text-[#DC2626] border-[#FECACA]",children:[s.jsx(WN,{className:"w-3 h-3 mr-1"}),"New"]})]}),s.jsxs("div",{className:"space-y-1 mb-3",children:[s.jsxs("p",{className:"text-sm text-[#64748b]",children:["ID: ",ye.patientId]}),s.jsxs("p",{className:"text-sm text-[#64748b]",children:["DOB: ",new Date(ye.patientDob).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx(gt,{className:"bg-[#FEF3C7] text-[#F59E0B] border-[#FDE68A]",children:ye.status}),ye.documentCount>0&&s.jsxs(gt,{variant:"outline",className:"border-[#E0E7FF] text-[#4F46E5] bg-[#F5F3FF]",children:[s.jsx(hr,{className:"w-3 h-3 mr-1"}),ye.documentCount," Doc",ye.documentCount!==1?"s":""]}),ye.waitingDays>0&&s.jsxs(gt,{variant:"outline",className:"border-[#FDE68A] text-[#D97706] bg-[#FFFBEB]",children:[s.jsx(Ws,{className:"w-3 h-3 mr-1"}),"Waiting ",ye.waitingDays,"d"]})]})]}),s.jsxs(de,{onClick:()=>{q(ye),$(!0)},className:"bg-[#F59E0B] hover:bg-[#D97706] text-white",children:[s.jsx(uh,{className:"w-4 h-4 mr-2"}),"Assign"]})]})},ye.id))}):s.jsxs("div",{className:"bg-white rounded-xl border border-[#e2e8f0] p-12 text-center",children:[s.jsx(kr,{className:"w-12 h-12 text-[#10B981] mx-auto mb-3"}),s.jsx("p",{className:"text-[#0f172a] mb-1",children:"All charts are assigned!"}),s.jsx("p",{className:"text-sm text-[#64748b]",children:"All patient charts have been assigned to clinicians."})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg text-[#0f172a] mb-3",children:"Available Clinicians"}),s.jsx("div",{className:"space-y-2",children:p.map(ye=>s.jsx("div",{className:"bg-white rounded-xl border border-[#e2e8f0] p-4 flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Xs,{children:s.jsxs(Zs,{className:"bg-gradient-to-br from-[#E0F2FE] to-[#BFDBFE] text-[#0966CC]",children:[ye.first_name[0],ye.last_name[0]]})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm text-[#0f172a]",children:[ye.first_name," ",ye.last_name]}),s.jsxs("p",{className:"text-xs text-[#64748b]",children:[ye.active_chart_count," assigned chart",ye.active_chart_count!==1?"s":""]})]})]})},ye.id))})]})]})};return s.jsxs("div",{className:"h-screen flex bg-[#f8fafc] overflow-hidden",children:[s.jsxs("aside",{className:"hidden md:flex md:flex-col w-64 bg-white border-r border-[#e2e8f0]",children:[s.jsx("div",{className:"border-b border-[#e2e8f0] p-6",children:s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#FEF3C7] flex items-center justify-center",children:s.jsx(Zo,{className:"w-6 h-6 text-[#F59E0B]"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-[#64748b]",children:"Scheduler Portal"}),s.jsx("div",{className:"text-[#0f172a]",children:"Jessica Martinez"})]})]})}),s.jsx("div",{className:"flex-1 py-4 px-3 overflow-y-auto",children:be()}),s.jsx("div",{className:"border-t border-[#e2e8f0] p-4",children:s.jsxs(de,{onClick:Q,variant:"outline",className:"w-full border-[#DC2626] text-[#DC2626] hover:bg-[#FEE2E2]",children:[s.jsx(su,{className:"w-4 h-4 mr-2"}),"Sign Out"]})})]}),s.jsx(Jd,{open:n,onOpenChange:a,children:s.jsxs(Qd,{side:"left",className:"w-[280px] sm:w-[320px] p-0 flex flex-col",children:[s.jsxs(eu,{className:"border-b border-[#e2e8f0] p-6",children:[s.jsx(tu,{className:"text-left",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#FEF3C7] flex items-center justify-center",children:s.jsx(Zo,{className:"w-6 h-6 text-[#F59E0B]"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-[#64748b]",children:"Scheduler Portal"}),s.jsx("div",{className:"text-[#0f172a]",children:"Jessica Martinez"})]})]})}),s.jsx(Df,{className:"sr-only",children:"Navigation menu for Scheduler Portal"})]}),s.jsx("div",{className:"flex-1 py-4 px-3 overflow-y-auto",children:be()}),s.jsx("div",{className:"border-t border-[#e2e8f0] p-4",children:s.jsxs(de,{onClick:Q,variant:"outline",className:"w-full border-[#DC2626] text-[#DC2626] hover:bg-[#FEE2E2]",children:[s.jsx(su,{className:"w-4 h-4 mr-2"}),"Sign Out"]})})]})}),s.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s.jsx("header",{className:"bg-white border-b border-[#e2e8f0] px-6 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>a(!0),className:"md:hidden w-10 h-10 rounded-xl bg-[#f8fafc] hover:bg-[#f1f5f9] flex items-center justify-center transition-colors",children:s.jsx(b1,{className:"w-5 h-5 text-[#64748b]"})}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-xl text-[#0f172a]",children:[i==="charts"&&"Patient Charts",i==="scan"&&"Scan Documents",i==="documents"&&"Document Library",i==="assign"&&"Assign Charts",i==="profile"&&"My Profile",i==="settings"&&"Settings"]}),s.jsxs("p",{className:"text-sm text-[#64748b]",children:[i==="charts"&&"Create and manage patient charts",i==="scan"&&"Scan and upload documents",i==="documents"&&"View and manage all documents",i==="assign"&&"Assign charts to clinicians",i==="profile"&&"View your profile information",i==="settings"&&"Manage your account settings"]})]})]}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("button",{className:"w-10 h-10 rounded-xl bg-[#f8fafc] hover:bg-[#f1f5f9] flex items-center justify-center relative transition-colors",children:[s.jsx(xh,{className:"w-5 h-5 text-[#64748b]"}),s.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 rounded-full bg-[#F59E0B] border-2 border-white"})]})})]})}),s.jsxs("main",{className:"flex-1 overflow-y-auto p-6",children:[i==="charts"&&s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4 mb-6",children:[s.jsx("div",{className:"bg-white rounded-xl border border-[#e2e8f0] p-4 sm:p-6",children:s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-[#FEF3C7] flex items-center justify-center",children:s.jsx(Rs,{className:"w-5 h-5 sm:w-6 sm:h-6 text-[#F59E0B]"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xl sm:text-2xl text-[#0f172a]",children:C.totalPatients}),s.jsx("p",{className:"text-xs sm:text-sm text-[#64748b]",children:"Total Patients"})]})]})}),s.jsx("div",{className:"bg-white rounded-xl border border-[#e2e8f0] p-4 sm:p-6",children:s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-[#FEE2E2] flex items-center justify-center",children:s.jsx(Kn,{className:"w-5 h-5 sm:w-6 sm:h-6 text-[#DC2626]"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xl sm:text-2xl text-[#0f172a]",children:C.unassignedCharts}),s.jsx("p",{className:"text-xs sm:text-sm text-[#64748b]",children:"Needs Assignment"})]})]})}),s.jsx("div",{className:"bg-white rounded-xl border border-[#e2e8f0] p-4 sm:p-6",children:s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-[#E0F2FE] flex items-center justify-center",children:s.jsx(hr,{className:"w-5 h-5 sm:w-6 sm:h-6 text-[#0966CC]"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xl sm:text-2xl text-[#0f172a]",children:C.newDocsToday}),s.jsx("p",{className:"text-xs sm:text-sm text-[#64748b]",children:"New Docs Today"})]})]})}),s.jsx("div",{className:"bg-white rounded-xl border border-[#e2e8f0] p-4 sm:p-6",children:s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-[#D1FAE5] flex items-center justify-center",children:s.jsx(Ws,{className:"w-5 h-5 sm:w-6 sm:h-6 text-[#10B981]"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xl sm:text-2xl text-[#0f172a]",children:m.length}),s.jsx("p",{className:"text-xs sm:text-sm text-[#64748b]",children:"Total Charts"})]})]})})]}),i==="charts"&&pe(),i==="scan"&&at(),i==="documents"&&s.jsx(Mte,{}),i==="assign"&&tt(),i==="profile"&&s.jsx(Y7,{navigation:t}),i==="settings"&&s.jsx(X7,{navigation:t,onNavigateToProfile:()=>T("profile")})]})]}),s.jsx(om,{position:"top-right"}),s.jsx(ar,{open:k,onOpenChange:P,children:s.jsxs(sr,{className:"sm:max-w-[500px]",children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Create Empty Chart"}),s.jsx(lr,{children:"Create a new chart for a patient. Clinicians will add medications later."})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"patient-first-name",children:"First Name *"}),s.jsx(Ze,{id:"patient-first-name",value:z.first_name,onChange:Be=>V({...z,first_name:Be.target.value}),placeholder:"John",className:"mt-2 h-12 rounded-xl border-2 border-[#e2e8f0]"})]}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"patient-last-name",children:"Last Name *"}),s.jsx(Ze,{id:"patient-last-name",value:z.last_name,onChange:Be=>V({...z,last_name:Be.target.value}),placeholder:"Doe",className:"mt-2 h-12 rounded-xl border-2 border-[#e2e8f0]"})]}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"patient-dob",children:"Date of Birth *"}),s.jsx(Ze,{id:"patient-dob",type:"date",value:z.date_of_birth,onChange:Be=>V({...z,date_of_birth:Be.target.value}),className:"mt-2 h-12 rounded-xl border-2 border-[#e2e8f0]"})]}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"patient-address",children:"Address (Optional)"}),s.jsx(Ze,{id:"patient-address",value:z.address_line1,onChange:Be=>V({...z,address_line1:Be.target.value}),placeholder:"123 Main St",className:"mt-2 h-12 rounded-xl border-2 border-[#e2e8f0]"})]}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"patient-phone",children:"Phone Number (Optional)"}),s.jsx(Ze,{id:"patient-phone",value:z.phone,onChange:Be=>V({...z,phone:Be.target.value}),placeholder:"555-1234",className:"mt-2 h-12 rounded-xl border-2 border-[#e2e8f0]"})]})]}),s.jsxs(_r,{children:[s.jsx(de,{variant:"outline",onClick:()=>P(!1),children:"Cancel"}),s.jsxs(de,{onClick:ie,className:"bg-[#F59E0B] hover:bg-[#D97706] text-white",children:[s.jsx(Da,{className:"w-4 h-4 mr-2"}),"Create Chart"]})]})]})}),s.jsx(ar,{open:O,onOpenChange:$,children:s.jsxs(sr,{className:"sm:max-w-[500px]",children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Assign Chart to Clinician"}),s.jsx(lr,{children:"Select a clinician to assign this chart for medication review."})]}),M&&s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"bg-[#f8fafc] rounded-xl p-4",children:[s.jsxs("p",{className:"text-sm text-[#0f172a] mb-1",children:[s.jsx("strong",{children:"Patient:"})," ",M.patientName]}),s.jsxs("p",{className:"text-sm text-[#0f172a]",children:[s.jsx("strong",{children:"DOB:"})," ",new Date(M.patientDob).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"clinician",children:"Select Clinician *"}),s.jsxs(oa,{value:re,onValueChange:ee,children:[s.jsx(ca,{className:"mt-2 h-12 rounded-xl border-2 border-[#e2e8f0]",children:s.jsx(la,{placeholder:"Choose a clinician"})}),s.jsx(da,{children:p.map(Be=>s.jsxs(Bt,{value:Be.id,children:[Be.first_name," ",Be.last_name," (",Be.active_chart_count," charts)"]},Be.id))})]})]})]}),s.jsxs(_r,{children:[s.jsx(de,{variant:"outline",onClick:()=>{$(!1),q(null),ee("")},children:"Cancel"}),s.jsxs(de,{onClick:ge,className:"bg-[#F59E0B] hover:bg-[#D97706] text-white",children:[s.jsx(d6,{className:"w-4 h-4 mr-2"}),"Assign Chart"]})]})]})}),s.jsx(ar,{open:U,onOpenChange:K,children:s.jsxs(sr,{className:"max-w-2xl max-h-[80vh] flex flex-col",children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Select Patient for Document"}),s.jsx(lr,{children:ue==="camera"?"Select which patient chart to attach the scanned document to":`Select which patient chart to attach ${J.length} file(s) to`})]}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:Y?s.jsx("div",{className:"flex items-center justify-center p-8",children:s.jsx(Xd,{className:"w-8 h-8 text-[#F59E0B] animate-spin"})}):s.jsxs("div",{className:"space-y-2",children:[m.map(Be=>s.jsx("button",{onClick:()=>We(Be.id),className:"w-full text-left p-4 rounded-xl border-2 border-[#e2e8f0] hover:border-[#F59E0B] hover:bg-[#FFFBEB] transition-all",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-base font-medium text-[#0f172a]",children:Be.patientName}),s.jsxs("p",{className:"text-sm text-[#64748b] mt-1",children:["DOB: ",new Date(Be.patientDob).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]}),s.jsxs("p",{className:"text-xs text-[#94a3b8] mt-1",children:[Be.documentCount," document",Be.documentCount!==1?"s":""]})]}),s.jsx(Xr,{className:"w-5 h-5 text-[#cbd5e1]"})]})},Be.id)),m.length===0&&s.jsxs("div",{className:"text-center p-8 text-[#64748b]",children:[s.jsx("p",{children:"No patient charts available."}),s.jsx("p",{className:"text-sm mt-2",children:"Create a chart first to upload documents."})]})]})}),s.jsx(_r,{children:s.jsx(de,{variant:"outline",onClick:()=>{K(!1),oe([]),G(null)},disabled:Y,children:"Cancel"})})]})})]})}async function Vte(){try{const{data:t,error:e}=await Qe.from("tenants").select("*").order("created_at",{ascending:!1});if(e)throw e;return await Promise.all((t||[]).map(async n=>{const[{count:a},{count:i},{count:o},{count:l}]=await Promise.all([Qe.from("users").select("id",{count:"exact",head:!0}).eq("tenant_id",n.id),Qe.from("users").select("id",{count:"exact",head:!0}).eq("tenant_id",n.id).eq("active",!0),Qe.from("patients").select("id",{count:"exact",head:!0}).eq("tenant_id",n.id),Qe.from("charts").select("id",{count:"exact",head:!0}).eq("tenant_id",n.id)]),{data:c}=await Qe.from("users").select("id").eq("tenant_id",n.id).eq("mfa_enabled",!0),u=a?Math.round((c?.length||0)/a*100):0;let h=n.baa_signed?"signed":"not_signed";if(n.baa_renewal_date&&n.baa_signed){const m=new Date(n.baa_renewal_date),x=Math.floor((m.getTime()-Date.now())/(1e3*60*60*24));x<=30&&x>0?h="expiring_soon":x<=0&&(h="not_signed")}return{...n,user_count:a||0,active_user_count:i||0,patient_count:o||0,chart_count:l||0,mfa_percentage:u,baa_status:h}}))}catch(t){throw console.error("Error fetching tenants:",t),t}}async function zte(t){try{const{data:e}=await Qe.from("tenants").select("id").eq("subdomain",t.subdomain).single();if(e)throw new Error("Subdomain already taken");const{data:r,error:n}=await Qe.from("tenants").insert({name:t.name,subdomain:t.subdomain,ein:t.ein||null,contact_email:t.contact_email,contact_phone:t.contact_phone||null,status:"inactive",test_mode:t.environment==="test",baa_signed:!1,primary_color:"#3b82f6"}).select().single();if(n)throw n;return await fm({tenant_id:r.id,action:"created",entity_type:"tenant",entity_id:r.id,metadata:{name:t.name,subdomain:t.subdomain}}),r}catch(e){throw console.error("Error creating tenant:",e),e}}async function qte(t,e){try{const{data:r,error:n}=await Qe.from("tenants").update({...e,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(n)throw n;return await fm({tenant_id:t,action:"updated",entity_type:"tenant",entity_id:t,changes:e}),r}catch(r){throw console.error("Error updating tenant:",r),r}}async function Hte(t,e){try{const{data:r,error:n}=await Qe.from("tenants").update({status:"suspended"}).eq("id",t).select().single();if(n)throw n;return await fm({tenant_id:t,action:"updated",entity_type:"tenant",entity_id:t,metadata:{status:"suspended",reason:e}}),r}catch(r){throw console.error("Error suspending tenant:",r),r}}async function Wte(t){try{const{data:e,error:r}=await Qe.from("tenants").update({status:"active"}).eq("id",t).select().single();if(r)throw r;return await fm({tenant_id:t,action:"updated",entity_type:"tenant",entity_id:t,metadata:{status:"active"}}),e}catch(e){throw console.error("Error unsuspending tenant:",e),e}}async function Gte(t){try{const{error:e}=await Qe.from("tenants").delete().eq("id",t);if(e)throw e;return console.log(`Tenant ${t} deleted successfully`),{success:!0}}catch(e){throw console.error("Error deleting tenant:",e),e}}async function Kte(t,e,r,n){try{if(e.type!=="application/pdf")throw new Error("Only PDF files are allowed for BAA documents");if(e.size>10*1024*1024)throw new Error("File size must be less than 10MB");const a=`baa-${t}-${Date.now()}.pdf`;console.log("Uploading BAA document:",a);const{data:i,error:o}=await Qe.storage.from("baa-documents").upload(a,e,{cacheControl:"3600",upsert:!1});if(o)throw console.error("Storage upload error:",o),new Error(`Storage upload failed: ${o.message}`);console.log("Upload successful:",i);const{data:{publicUrl:l}}=Qe.storage.from("baa-documents").getPublicUrl(a);console.log("Public URL:",l);const{data:c,error:u}=await Qe.from("baa_documents").insert({tenant_id:t,document_url:l,signed_by:r,signed_at:new Date().toISOString(),expires_at:n,status:"active",version:"1.0"}).select().single();if(u)throw console.error("BAA record creation error:",u),new Error(`Failed to create BAA record: ${u.message}`);const{data:h,error:m}=await Qe.from("tenants").update({baa_signed:!0,baa_signed_date:new Date().toISOString(),baa_signer_name:r,baa_renewal_date:n,baa_document_url:l,status:"active"}).eq("id",t).select("id, name, subdomain, contact_email").single();if(m)throw console.error("Tenant update error:",m),new Error(`Failed to update tenant: ${m.message}`);console.log("Tenant updated successfully:",h);const x=Math.random().toString(36).substring(2,10).toUpperCase(),p=`${window.location.origin}/activate?tenant=${h.subdomain}&code=${x}`;try{const{data:y}=await Qe.from("tenants").select("metadata").eq("id",t).single(),w=y?.metadata||{},{error:j}=await Qe.from("tenants").update({metadata:{...w,activation_code:x,activation_sent_at:new Date().toISOString()}}).eq("id",t);j?console.error("Failed to store activation code:",j):console.log("Activation code stored successfully"),console.log("Activation email should be sent to:",h.contact_email),console.log("Activation link:",p),console.log("Activation code:",x)}catch(y){console.error("Failed to store activation code:",y)}return await fm({tenant_id:t,action:"updated",entity_type:"tenant",entity_id:t,metadata:{baa_uploaded:!0,signed_by:r,expires_at:n}}),{baaRecord:c,activationInfo:{tenantName:h.name,subdomain:h.subdomain,contactEmail:h.contact_email,activationCode:x,activationLink:p}}}catch(a){throw console.error("Error uploading BAA:",a),a}}async function Yte(t){try{const{data:e,error:r}=await Qe.from("baa_documents").select("*").eq("tenant_id",t).order("signed_at",{ascending:!1});if(r)throw r;return e||[]}catch(e){throw console.error("Error fetching BAA documents:",e),e}}async function Xte(t){try{let e=Qe.from("audit_logs").select(`
        *,
        user:users!audit_logs_user_id_fkey(first_name, last_name, email),
        tenant:tenants!audit_logs_tenant_id_fkey(name)
      `).order("created_at",{ascending:!1});t?.tenantId&&(e=e.eq("tenant_id",t.tenantId)),t?.action&&(e=e.eq("action",t.action)),t?.entityType&&(e=e.eq("entity_type",t.entityType)),t?.dateFrom&&(e=e.gte("created_at",t.dateFrom)),t?.dateTo&&(e=e.lte("created_at",t.dateTo)),t?.limit&&(e=e.limit(t.limit));const{data:r,error:n}=await e;return n?(console.warn("Error fetching audit logs:",n),[]):(r||[]).map(a=>({id:a.id,tenant_id:a.tenant_id,user_id:a.user_id,user_name:a.user?`${a.user.first_name} ${a.user.last_name}`:"Unknown User",tenant_name:a.tenant?.name||"Unknown Tenant",action:a.action,entity_type:a.entity_type,entity_id:a.entity_id,changes:a.changes,metadata:a.metadata,ip_address:a.ip_address,user_agent:a.user_agent,created_at:a.created_at}))}catch(e){return console.warn("Error fetching audit logs:",e),[]}}async function fm(t){try{const{data:{user:e}}=await Qe.auth.getUser();if(!e)return;await Qe.from("audit_logs").insert({tenant_id:t.tenant_id,user_id:e.id,action:t.action,entity_type:t.entity_type,entity_id:t.entity_id,changes:t.changes||null,metadata:t.metadata||null,created_at:new Date().toISOString()})}catch(e){console.warn("Audit logging failed:",e)}}async function Zte(){try{const[{data:t},{count:e},{count:r},{count:n}]=await Promise.all([Qe.from("tenants").select("status, baa_signed, baa_renewal_date"),Qe.from("users").select("id",{count:"exact",head:!0}),Qe.from("patients").select("id",{count:"exact",head:!0}),Qe.from("charts").select("id",{count:"exact",head:!0})]),a=t?.filter(c=>c.status==="active").length||0,i=t?.filter(c=>c.status==="suspended").length||0,o=t?.filter(c=>!c.baa_signed).length||0,l=t?.filter(c=>{if(!c.baa_signed||!c.baa_renewal_date)return!1;const u=new Date(c.baa_renewal_date),h=Math.floor((u.getTime()-Date.now())/(1e3*60*60*24));return h<=30&&h>0}).length||0;return{totalTenants:t?.length||0,activeTenants:a,suspendedTenants:i,baaPending:o,baaExpiring:l,totalUsers:e||0,totalPatients:r||0,totalCharts:n||0}}catch(t){throw console.error("Error fetching super admin stats:",t),t}}async function Jte(t,e){try{return await fm({tenant_id:t,action:"viewed",entity_type:"tenant",entity_id:t,metadata:{impersonation:!0,reason:e}}),{success:!0,tenantId:t,reason:e}}catch(r){throw console.error("Error impersonating tenant:",r),r}}function Qte({navigation:t}){const{logout:e,user:r}=Ka(),[n,a]=N.useState(!1),[i,o]=N.useState("tenants"),[l,c]=N.useState(""),[u,h]=N.useState("all"),[m,x]=N.useState("all"),[p,y]=N.useState([]),[w,j]=N.useState(null),[C,S]=N.useState([]),[k,P]=N.useState([]),[O,$]=N.useState(!0),[R,B]=N.useState({totalTenants:0,activeTenants:0,suspendedTenants:0,baaPending:0,baaExpiring:0,totalUsers:0,totalPatients:0,totalCharts:0}),[U,K]=N.useState(!1),[M,q]=N.useState(!1),[re,ee]=N.useState(!1),[H,se]=N.useState(!1),[ue,G]=N.useState(!1),[J,oe]=N.useState(!1),[Y,L]=N.useState(!1),[z,V]=N.useState(null),[W,Q]=N.useState({name:"",subdomain:"",ein:"",contact_email:"",contact_phone:"",environment:"test"}),[T,ie]=N.useState(null),[ge,we]=N.useState(""),[Se,Ue]=N.useState(""),[We,be]=N.useState(""),[pe,at]=N.useState(""),[tt,Be]=N.useState(!1),[ye,st]=N.useState("");N.useEffect(()=>{Ve()},[]);const Ve=N.useCallback(async()=>{$(!0);try{const[Me,bt,Wt]=await Promise.all([Vte(),Zte(),Xte({limit:100}).catch(()=>[])]);y(Me),B(bt),P(Wt)}catch(Me){console.error("Error loading super admin data:",Me),Pe.error("Failed to load some dashboard data. Check console for details.")}finally{$(!1)}},[]),vt=p.filter(Me=>{const bt=Me.name?.toLowerCase().includes(l.toLowerCase())||Me.subdomain?.toLowerCase().includes(l.toLowerCase())||Me.contact_email?.toLowerCase().includes(l.toLowerCase()),Wt=u==="all"||Me.status===u,It=m==="all"||Me.environment===m;return bt&&Wt&&It}),ct=()=>{e(),t.navigate("Landing")},Kt=async()=>{if(!W.name||!W.subdomain||!W.contact_email){Pe.error("Please fill in all required fields");return}try{await zte(W),Pe.success("Tenant created successfully"),K(!1),Q({name:"",subdomain:"",ein:"",contact_email:"",contact_phone:"",environment:"test"}),Ve()}catch(Me){Pe.error(Me instanceof Error?Me.message:"Failed to create tenant")}},ot=async()=>{if(!T||!ge||!Se||!w){Pe.error("Please fill in all BAA fields");return}try{const Me=await Kte(w.id,T,ge,Se);Pe.success("BAA document uploaded successfully"),q(!1),ie(null),we(""),Ue(""),Me.activationInfo&&(V(Me.activationInfo),L(!0)),Ve()}catch(Me){console.error("BAA upload error:",Me);const bt=Me instanceof Error?Me.message:"Failed to upload BAA document";Pe.error(`Failed to upload BAA: ${bt}`)}},Ct=async Me=>{try{const bt=await Yte(Me.id);S(bt),j(Me),we(Me.baa_signer_name||""),q(!0)}catch{Pe.error("Failed to load BAA documents")}},qt=async()=>{if(!We.trim()||!w){Pe.error("Please provide a reason for suspension");return}try{await Hte(w.id,We),Pe.success(`${w.name} has been suspended`),ee(!1),be(""),j(null),Ve()}catch{Pe.error("Failed to suspend tenant")}},Tt=async Me=>{try{await Wte(Me.id),Pe.success("Tenant has been reactivated"),Ve()}catch{Pe.error("Failed to reactivate tenant")}},Et=async()=>{if(w)try{await qte(w.id,{test_mode:tt}),Pe.success("Test mode updated"),se(!1),j(null),Ve()}catch{Pe.error("Failed to update test mode")}},kt=async()=>{if(!pe.trim()||!w){Pe.error("Please provide a reason for impersonation");return}try{await Jte(w.id,pe),Pe.success(`Impersonating ${w.name} - logged to audit`),G(!1),at(""),j(null),Ve()}catch{Pe.error("Failed to start impersonation")}},St=async()=>{if(w){if(ye!==w.name){Pe.error(`Please type "${w.name}" to confirm deletion`);return}try{await Gte(w.id),Pe.success(`${w.name} has been permanently deleted`),oe(!1),st(""),j(null),Ve()}catch{Pe.error("Failed to delete tenant")}}},gr=()=>{const Me=[["Name","Subdomain","Status","Environment","BAA Status","Users","Patients","Charts","Created"],...vt.map(Cr=>[Cr.name,Cr.subdomain,Cr.status,Cr.environment,Cr.baa_status,Cr.user_count||0,Cr.patient_count||0,Cr.chart_count||0,new Date(Cr.created_at).toLocaleDateString()])].map(Cr=>Cr.join(",")).join(`
`),bt=new Blob([Me],{type:"text/csv"}),Wt=URL.createObjectURL(bt),It=document.createElement("a");It.href=Wt,It.download=`tenants-${new Date().toISOString().split("T")[0]}.csv`,It.click(),Pe.success("Exporting to CSV...")},Rr=Me=>{const bt={active:{color:"bg-green-100 text-green-800 border-green-200",label:"Active"},inactive:{color:"bg-gray-100 text-gray-800 border-gray-200",label:"Inactive"},suspended:{color:"bg-red-100 text-red-800 border-red-200",label:"Suspended"},trial:{color:"bg-yellow-100 text-yellow-800 border-yellow-200",label:"Trial"}},Wt=bt[Me]||bt.inactive;return s.jsx(gt,{className:`${Wt.color} border`,children:Wt.label})},xt=Me=>Me?s.jsxs(gt,{className:"bg-purple-100 text-purple-800 border-purple-200 border",children:[s.jsx("span",{className:"mr-1",children:""}),"Test"]}):s.jsxs(gt,{className:"bg-blue-100 text-blue-800 border-blue-200 border",children:[s.jsx("span",{className:"mr-1",children:""}),"Production"]}),Ht=Me=>{const bt={signed:{color:"bg-green-100 text-green-800 border-green-200",label:"BAA Signed",icon:Hs},not_signed:{color:"bg-red-100 text-red-800 border-red-200",label:"BAA Missing",icon:y0},expiring_soon:{color:"bg-yellow-100 text-yellow-800 border-yellow-200",label:"BAA Expiring",icon:Ws}},Wt=bt[Me]||bt.not_signed,It=Wt.icon;return s.jsxs(gt,{className:`${Wt.color} border flex items-center gap-1`,children:[s.jsx(It,{className:"w-3 h-3"}),Wt.label]})};return O?s.jsx("div",{className:"h-full flex items-center justify-center bg-gradient-to-br from-slate-50 to-white",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Pl,{className:"w-8 h-8 text-[#0966CC] animate-spin mx-auto mb-2"}),s.jsx("p",{className:"text-slate-600",children:"Loading dashboard..."})]})}):s.jsxs("div",{className:"h-full flex flex-col bg-gradient-to-br from-slate-50 to-white",children:[s.jsx(om,{}),s.jsx("div",{className:"bg-white border-b border-slate-200 px-6 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>a(!0),className:"lg:hidden p-2 hover:bg-slate-100 rounded-lg",children:s.jsx(b1,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Super Admin"}),s.jsx("p",{className:"text-sm text-slate-600",children:"Platform Management & Oversight"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs(de,{variant:"outline",size:"sm",onClick:()=>Ve(),className:"flex items-center gap-2",children:[s.jsx(Pl,{className:"w-4 h-4"}),"Refresh"]}),s.jsxs(Yf,{children:[s.jsx(Xf,{asChild:!0,children:s.jsxs("button",{className:"flex items-center gap-2 p-2 hover:bg-slate-100 rounded-lg",children:[s.jsx(Xs,{className:"w-8 h-8 bg-gradient-to-br from-[#0966CC] to-[#0C4A6E]",children:s.jsxs(Zs,{className:"text-white text-sm",children:[r?.first_name?.[0],r?.last_name?.[0]]})}),s.jsxs("div",{className:"text-left hidden sm:block",children:[s.jsxs("p",{className:"text-sm font-medium text-slate-900",children:[r?.first_name," ",r?.last_name]}),s.jsx("p",{className:"text-xs text-slate-500",children:"Super Admin"})]})]})}),s.jsxs(Zf,{align:"end",className:"w-48",children:[s.jsx(Kb,{children:"My Account"}),s.jsx(Go,{}),s.jsxs(on,{onClick:()=>o("profile"),children:[s.jsx(Bn,{className:"w-4 h-4 mr-2"}),"Profile"]}),s.jsxs(on,{onClick:()=>o("audit"),children:[s.jsx(Kd,{className:"w-4 h-4 mr-2"}),"Audit Logs"]}),s.jsx(Go,{}),s.jsxs(on,{onClick:ct,className:"text-red-600",children:[s.jsx(su,{className:"w-4 h-4 mr-2"}),"Sign Out"]})]})]})]})]})}),s.jsx("div",{className:"bg-white border-b border-slate-200 px-6",children:s.jsxs("div",{className:"flex gap-6",children:[s.jsxs("button",{onClick:()=>o("tenants"),className:`py-3 px-1 border-b-2 text-sm font-medium transition-colors ${i==="tenants"?"border-[#0966CC] text-[#0966CC]":"border-transparent text-slate-600 hover:text-slate-900"}`,children:[s.jsx(Ga,{className:"w-4 h-4 inline mr-2"}),"Tenants (",R.totalTenants,")"]}),s.jsxs("button",{onClick:()=>o("audit"),className:`py-3 px-1 border-b-2 text-sm font-medium transition-colors ${i==="audit"?"border-[#0966CC] text-[#0966CC]":"border-transparent text-slate-600 hover:text-slate-900"}`,children:[s.jsx(Kd,{className:"w-4 h-4 inline mr-2"}),"Audit Logs"]}),s.jsxs("button",{onClick:()=>o("profile"),className:`py-3 px-1 border-b-2 text-sm font-medium transition-colors ${i==="profile"?"border-[#0966CC] text-[#0966CC]":"border-transparent text-slate-600 hover:text-slate-900"}`,children:[s.jsx(Bn,{className:"w-4 h-4 inline mr-2"}),"Profile"]})]})}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[i==="tenants"&&s.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(er,{className:"p-4 border-l-4 border-l-green-500",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-600",children:"Active Tenants"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:R.activeTenants})]}),s.jsx(Ga,{className:"w-8 h-8 text-green-500"})]})}),s.jsx(er,{className:"p-4 border-l-4 border-l-red-500",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-600",children:"Missing BAA"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:R.baaPending})]}),s.jsx(go,{className:"w-8 h-8 text-red-500"})]})}),s.jsx(er,{className:"p-4 border-l-4 border-l-blue-500",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-600",children:"Total Users"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:R.totalUsers})]}),s.jsx(Rs,{className:"w-8 h-8 text-blue-500"})]})}),s.jsx(er,{className:"p-4 border-l-4 border-l-purple-500",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-600",children:"Total Charts"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900",children:R.totalCharts})]}),s.jsx(hr,{className:"w-8 h-8 text-purple-500"})]})})]}),(R.baaPending>0||R.baaExpiring>0)&&s.jsx(er,{className:"p-4 bg-red-50 border-red-200",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Kn,{className:"w-5 h-5 text-red-600 mt-0.5 shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-red-900",children:"Compliance Risks Detected"}),s.jsxs("p",{className:"text-sm text-red-700 mt-1",children:[R.baaPending>0&&`${R.baaPending} tenant${R.baaPending!==1?"s":""} missing BAA. `,R.baaExpiring>0&&`${R.baaExpiring} BAA${R.baaExpiring!==1?"s":""} expiring soon.`]})]})]})}),s.jsx(er,{className:"p-4",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4 md:items-center md:justify-between",children:[s.jsxs("div",{className:"flex-1 flex flex-col sm:flex-row gap-3",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[s.jsx(Zi,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),s.jsx(Ze,{placeholder:"Search tenants...",value:l,onChange:Me=>c(Me.target.value),className:"pl-10"})]})}),s.jsxs(oa,{value:u,onValueChange:h,children:[s.jsx(ca,{className:"w-full sm:w-40",children:s.jsx(la,{placeholder:"Status"})}),s.jsxs(da,{children:[s.jsx(Bt,{value:"all",children:"All Status"}),s.jsx(Bt,{value:"active",children:"Active"}),s.jsx(Bt,{value:"trial",children:"Trial"}),s.jsx(Bt,{value:"suspended",children:"Suspended"}),s.jsx(Bt,{value:"inactive",children:"Inactive"})]})]}),s.jsxs(oa,{value:m,onValueChange:x,children:[s.jsx(ca,{className:"w-full sm:w-40",children:s.jsx(la,{placeholder:"Environment"})}),s.jsxs(da,{children:[s.jsx(Bt,{value:"all",children:"All Environments"}),s.jsx(Bt,{value:"production",children:"Production"}),s.jsx(Bt,{value:"test",children:"Test"}),s.jsx(Bt,{value:"trial",children:"Trial"}),s.jsx(Bt,{value:"onboarding",children:"Onboarding"})]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(de,{variant:"outline",size:"sm",onClick:gr,className:"flex items-center gap-2",children:[s.jsx(Ai,{className:"w-4 h-4"}),"Export"]}),s.jsxs(de,{size:"sm",onClick:()=>K(!0),className:"flex items-center gap-2 bg-[#0966CC] hover:bg-[#0C4A6E]",children:[s.jsx(Da,{className:"w-4 h-4"}),"Add Tenant"]})]})]})}),s.jsx(er,{children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 uppercase",children:"Tenant"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 uppercase",children:"Status"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 uppercase",children:"Environment"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 uppercase",children:"BAA"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 uppercase",children:"Users"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 uppercase",children:"Patients"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 uppercase",children:"Charts"}),s.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-600 uppercase",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200",children:vt.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:8,className:"px-4 py-8 text-center text-slate-500",children:"No tenants found"})}):vt.map(Me=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-4 py-4",children:s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-slate-900",children:Me.name}),s.jsx("p",{className:"text-sm text-slate-500",children:Me.subdomain}),s.jsx("p",{className:"text-xs text-slate-400",children:Me.contact_email})]})}),s.jsx("td",{className:"px-4 py-4",children:Rr(Me.status)}),s.jsx("td",{className:"px-4 py-4",children:xt(Me.test_mode)}),s.jsx("td",{className:"px-4 py-4",children:Ht(Me.baa_status||"not_signed")}),s.jsx("td",{className:"px-4 py-4 text-slate-900",children:Me.user_count||0}),s.jsx("td",{className:"px-4 py-4 text-slate-900",children:Me.patient_count||0}),s.jsx("td",{className:"px-4 py-4 text-slate-900",children:Me.chart_count||0}),s.jsx("td",{className:"px-4 py-4 text-right",children:s.jsxs(Yf,{children:[s.jsx(Xf,{asChild:!0,children:s.jsx(de,{variant:"ghost",size:"sm",children:s.jsx(R0,{className:"w-4 h-4"})})}),s.jsxs(Zf,{align:"end",children:[s.jsxs(on,{onClick:()=>Ct(Me),children:[s.jsx(hs,{className:"w-4 h-4 mr-2"}),"View/Upload BAA"]}),s.jsxs(on,{onClick:()=>{j(Me),Be(Me.test_mode),se(!0)},children:[s.jsx(au,{className:"w-4 h-4 mr-2"}),"Test Mode"]}),s.jsxs(on,{onClick:()=>{j(Me),G(!0)},children:[s.jsx(Wx,{className:"w-4 h-4 mr-2"}),"Impersonate"]}),s.jsx(Go,{}),Me.status==="suspended"?s.jsxs(on,{onClick:()=>Tt(Me),className:"text-green-600",children:[s.jsx(B9,{className:"w-4 h-4 mr-2"}),"Reactivate"]}):s.jsxs(on,{onClick:()=>{j(Me),ee(!0)},className:"text-red-600",children:[s.jsx(a6,{className:"w-4 h-4 mr-2"}),"Suspend"]}),s.jsx(Go,{}),s.jsxs(on,{onClick:()=>{j(Me),st(""),oe(!0)},className:"text-red-600",children:[s.jsx(ps,{className:"w-4 h-4 mr-2"}),"Delete Permanently"]})]})]})})]},Me.id))})]})})})]}),i==="audit"&&s.jsx("div",{className:"space-y-6 max-w-7xl mx-auto",children:s.jsxs(er,{className:"p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[s.jsx(Kd,{className:"w-5 h-5"}),"Recent Audit Logs"]}),s.jsx("div",{className:"space-y-3",children:k.length===0?s.jsx("p",{className:"text-center text-slate-500 py-8",children:"No audit logs found"}):k.map(Me=>s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg",children:[s.jsx(lc,{className:"w-4 h-4 text-slate-400 mt-1 shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("span",{className:"font-medium text-slate-900",children:Me.user_name}),s.jsx("span",{className:"text-slate-600",children:Me.action}),s.jsx(gt,{variant:"outline",className:"text-xs",children:Me.entity_type}),Me.tenant_name&&s.jsx(gt,{variant:"outline",className:"text-xs bg-blue-50",children:Me.tenant_name})]}),s.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:[Me.changes&&typeof Me.changes=="object"?JSON.stringify(Me.changes):"",Me.metadata&&typeof Me.metadata=="object"?JSON.stringify(Me.metadata):""]}),s.jsx("p",{className:"text-xs text-slate-400 mt-1",children:new Date(Me.created_at).toLocaleString()})]})]},Me.id))})]})}),i==="profile"&&s.jsx("div",{className:"space-y-6 max-w-2xl mx-auto",children:s.jsxs(er,{className:"p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Profile Information"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Fe,{children:"Name"}),s.jsxs("p",{className:"mt-1 text-slate-900",children:[r?.first_name," ",r?.last_name]})]}),s.jsxs("div",{children:[s.jsx(Fe,{children:"Email"}),s.jsx("p",{className:"mt-1 text-slate-900",children:r?.email})]}),s.jsxs("div",{children:[s.jsx(Fe,{children:"Role"}),s.jsx(gt,{className:"mt-1 bg-purple-100 text-purple-800 border-purple-200",children:"Super Admin"})]})]})]})})]}),s.jsx(ar,{open:U,onOpenChange:K,children:s.jsxs(sr,{className:"sm:max-w-2xl",children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Add New Tenant"}),s.jsx(lr,{children:"Create a new tenant organization for the platform."})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 py-4",children:[s.jsxs("div",{className:"col-span-2",children:[s.jsx(Fe,{htmlFor:"name",children:"Organization Name *"}),s.jsx(Ze,{id:"name",value:W.name,onChange:Me=>Q({...W,name:Me.target.value}),placeholder:"Acme Home Health"})]}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"subdomain",children:"Subdomain *"}),s.jsx(Ze,{id:"subdomain",value:W.subdomain,onChange:Me=>Q({...W,subdomain:Me.target.value}),placeholder:"acme"}),s.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[W.subdomain||"subdomain",".app"]})]}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"ein",children:"EIN"}),s.jsx(Ze,{id:"ein",value:W.ein,onChange:Me=>Q({...W,ein:Me.target.value}),placeholder:"12-3456789"})]}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"email",children:"Contact Email *"}),s.jsx(Ze,{id:"email",type:"email",value:W.contact_email,onChange:Me=>Q({...W,contact_email:Me.target.value}),placeholder:"admin@acme.com"})]}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"phone",children:"Contact Phone"}),s.jsx(Ze,{id:"phone",value:W.contact_phone,onChange:Me=>Q({...W,contact_phone:Me.target.value}),placeholder:"(555) 123-4567"})]}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"environment",children:"Environment"}),s.jsxs(oa,{value:W.environment,onValueChange:Me=>Q({...W,environment:Me}),children:[s.jsx(ca,{children:s.jsx(la,{})}),s.jsxs(da,{children:[s.jsx(Bt,{value:"test",children:"Test"}),s.jsx(Bt,{value:"production",children:"Production"})]})]})]})]}),s.jsxs(_r,{children:[s.jsx(de,{variant:"outline",onClick:()=>K(!1),children:"Cancel"}),s.jsx(de,{onClick:Kt,className:"bg-[#0966CC] hover:bg-[#0C4A6E]",children:"Create Tenant"})]})]})}),s.jsx(ar,{open:M,onOpenChange:q,children:s.jsxs(sr,{className:"sm:max-w-xl",children:[s.jsxs(ir,{children:[s.jsxs(or,{children:["BAA Documents - ",w?.name]}),s.jsx(lr,{children:"View and manage Business Associate Agreement documents."})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[C.length>0&&s.jsxs("div",{children:[s.jsx(Fe,{className:"mb-2 block",children:"Existing BAA Documents"}),s.jsx("div",{className:"space-y-2",children:C.map(Me=>s.jsxs("div",{className:"p-3 border rounded-lg flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium text-sm",children:["Signed by ",Me.signed_by]}),s.jsxs("p",{className:"text-xs text-slate-500",children:["Signed: ",new Date(Me.signed_at).toLocaleDateString()]}),s.jsxs("p",{className:"text-xs text-slate-500",children:["Expires: ",new Date(Me.expires_at).toLocaleDateString()]})]}),s.jsx(gt,{className:Me.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800",children:Me.status})]},Me.id))})]}),s.jsx(qr,{}),s.jsxs("div",{children:[s.jsx(Fe,{className:"mb-2 block",children:"Upload New BAA"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"baa-file",children:"BAA Document (PDF) *"}),s.jsx(Ze,{id:"baa-file",type:"file",accept:".pdf",onChange:Me=>ie(Me.target.files?.[0]||null)})]}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"signed-by",children:"Signed By *"}),s.jsx(Ze,{id:"signed-by",value:ge,onChange:Me=>we(Me.target.value),placeholder:"John Doe, CEO"})]}),s.jsxs("div",{children:[s.jsx(Fe,{htmlFor:"expires-at",children:"Expiration Date *"}),s.jsx(Ze,{id:"expires-at",type:"date",value:Se,onChange:Me=>Ue(Me.target.value)})]})]})]})]}),s.jsxs(_r,{children:[s.jsx(de,{variant:"outline",onClick:()=>q(!1),children:"Close"}),s.jsxs(de,{onClick:ot,className:"bg-[#0966CC] hover:bg-[#0C4A6E]",children:[s.jsx(Ei,{className:"w-4 h-4 mr-2"}),"Upload BAA"]})]})]})}),s.jsx(ar,{open:H,onOpenChange:se,children:s.jsxs(sr,{children:[s.jsxs(ir,{children:[s.jsxs(or,{children:["Test Mode - ",w?.name]}),s.jsx(lr,{children:"Enable test mode for this tenant. Test mode tenants have restricted access."})]}),s.jsxs("div",{className:"py-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Si,{id:"test-mode",checked:tt,onCheckedChange:Be}),s.jsx("label",{htmlFor:"test-mode",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Enable Test Mode"})]}),s.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"Test mode prevents this tenant from accessing production features and data."})]}),s.jsxs(_r,{children:[s.jsx(de,{variant:"outline",onClick:()=>se(!1),children:"Cancel"}),s.jsx(de,{onClick:Et,className:"bg-[#0966CC] hover:bg-[#0C4A6E]",children:"Update"})]})]})}),s.jsx(ar,{open:re,onOpenChange:ee,children:s.jsxs(sr,{children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Suspend Tenant"}),s.jsxs(lr,{children:["Are you sure you want to suspend ",w?.name,"? This will prevent all users from accessing the system."]})]}),s.jsxs("div",{className:"py-4",children:[s.jsx(Fe,{htmlFor:"suspend-reason",children:"Reason for Suspension *"}),s.jsx(uu,{id:"suspend-reason",value:We,onChange:Me=>be(Me.target.value),placeholder:"Payment failure, policy violation, etc.",rows:3})]}),s.jsxs(_r,{children:[s.jsx(de,{variant:"outline",onClick:()=>ee(!1),children:"Cancel"}),s.jsx(de,{onClick:qt,className:"bg-red-600 hover:bg-red-700",children:"Suspend Tenant"})]})]})}),s.jsx(ar,{open:ue,onOpenChange:G,children:s.jsxs(sr,{children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Impersonate Tenant"}),s.jsx(lr,{children:"This action will be logged in the audit trail. Provide a reason for this support action."})]}),s.jsxs("div",{className:"py-4",children:[s.jsx(Fe,{htmlFor:"impersonate-reason",children:"Reason for Impersonation *"}),s.jsx(uu,{id:"impersonate-reason",value:pe,onChange:Me=>at(Me.target.value),placeholder:"Support ticket #12345, investigating bug, etc.",rows:3})]}),s.jsxs(_r,{children:[s.jsx(de,{variant:"outline",onClick:()=>G(!1),children:"Cancel"}),s.jsx(de,{onClick:kt,className:"bg-[#0966CC] hover:bg-[#0C4A6E]",children:"Start Impersonation"})]})]})}),s.jsx(ar,{open:J,onOpenChange:oe,children:s.jsxs(sr,{children:[s.jsxs(ir,{children:[s.jsx(or,{className:"text-red-600",children:"Delete Tenant Permanently"}),s.jsxs(lr,{children:["This action CANNOT be undone. This will permanently delete ",w?.name," and ALL associated data including:",s.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[s.jsx("li",{children:"All users"}),s.jsx("li",{children:"All patients"}),s.jsx("li",{children:"All charts and medications"}),s.jsx("li",{children:"All documents and exports"}),s.jsx("li",{children:"All audit logs"})]})]})]}),s.jsxs("div",{className:"py-4",children:[s.jsxs(Fe,{htmlFor:"delete-confirm",children:["Type tenant name to confirm: ",s.jsx("span",{className:"font-bold",children:w?.name})]}),s.jsx(Ze,{id:"delete-confirm",value:ye,onChange:Me=>st(Me.target.value),placeholder:w?.name,className:"mt-2"})]}),s.jsxs(_r,{children:[s.jsx(de,{variant:"outline",onClick:()=>{oe(!1),st("")},children:"Cancel"}),s.jsx(de,{onClick:St,className:"bg-red-600 hover:bg-red-700",disabled:ye!==w?.name,children:"Delete Permanently"})]})]})}),s.jsx(ar,{open:Y,onOpenChange:L,children:s.jsxs(sr,{className:"sm:max-w-[600px]",children:[s.jsxs(ir,{children:[s.jsx(or,{className:"text-green-600",children:"Tenant Activated Successfully!"}),s.jsx(lr,{children:"The BAA has been uploaded and the tenant is now active. Share the following activation details with the tenant administrator."})]}),s.jsxs("div",{className:"py-4 space-y-4",children:[s.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[s.jsx("h3",{className:"font-semibold text-green-900 mb-2",children:" Email Activation Details To:"}),s.jsx("p",{className:"text-green-800",children:z?.contactEmail})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx(Fe,{className:"text-sm font-semibold text-slate-700",children:"Organization Name"}),s.jsx("div",{className:"mt-1 p-3 bg-slate-50 rounded-lg border",children:s.jsx("p",{className:"text-slate-900",children:z?.tenantName})})]}),s.jsxs("div",{children:[s.jsx(Fe,{className:"text-sm font-semibold text-slate-700",children:"Subdomain"}),s.jsx("div",{className:"mt-1 p-3 bg-slate-50 rounded-lg border",children:s.jsx("p",{className:"text-slate-900 font-mono",children:z?.subdomain})})]}),s.jsxs("div",{children:[s.jsx(Fe,{className:"text-sm font-semibold text-slate-700",children:"Activation Code"}),s.jsxs("div",{className:"mt-1 p-3 bg-slate-50 rounded-lg border flex items-center justify-between",children:[s.jsx("p",{className:"text-slate-900 font-mono text-lg font-bold",children:z?.activationCode}),s.jsx(de,{size:"sm",variant:"outline",onClick:()=>{navigator.clipboard.writeText(z?.activationCode||""),Pe.success("Code copied to clipboard")},children:"Copy"})]})]}),s.jsxs("div",{children:[s.jsx(Fe,{className:"text-sm font-semibold text-slate-700",children:"Activation Link"}),s.jsx("div",{className:"mt-1 p-3 bg-slate-50 rounded-lg border",children:s.jsx("p",{className:"text-slate-900 font-mono text-sm break-all",children:z?.activationLink})}),s.jsx(de,{size:"sm",variant:"outline",className:"mt-2 w-full",onClick:()=>{navigator.clipboard.writeText(z?.activationLink||""),Pe.success("Link copied to clipboard")},children:"Copy Link"})]})]}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("p",{className:"text-sm text-blue-900",children:[s.jsx("strong",{children:"Next Steps:"})," Send this activation link and code to the tenant administrator. They will use it to create their admin account and access the system."]})})]}),s.jsx(_r,{children:s.jsx(de,{onClick:()=>L(!1),className:"bg-[#0966CC] hover:bg-[#0C4A6E]",children:"Done"})})]})}),s.jsx(Jd,{open:n,onOpenChange:a,children:s.jsxs(Qd,{side:"left",className:"w-64",children:[s.jsx(eu,{children:s.jsx(tu,{children:"Super Admin"})}),s.jsxs("div",{className:"mt-6 space-y-2",children:[s.jsxs("button",{onClick:()=>{o("tenants"),a(!1)},className:"w-full text-left px-4 py-2 rounded-lg hover:bg-slate-100",children:[s.jsx(Ga,{className:"w-4 h-4 inline mr-2"}),"Tenants"]}),s.jsxs("button",{onClick:()=>{o("audit"),a(!1)},className:"w-full text-left px-4 py-2 rounded-lg hover:bg-slate-100",children:[s.jsx(Kd,{className:"w-4 h-4 inline mr-2"}),"Audit Logs"]}),s.jsxs("button",{onClick:()=>{o("profile"),a(!1)},className:"w-full text-left px-4 py-2 rounded-lg hover:bg-slate-100",children:[s.jsx(Bn,{className:"w-4 h-4 inline mr-2"}),"Profile"]})]})]})})]})}function ere({navigation:t,route:e}){const r=e.params.agencyData,[n,a]=N.useState({agencyName:r?.name||"",subdomain:r?.subdomain?.replace(".app","")||"",ein:r?.ein||"",contactEmail:r?.contact||"",contactPhone:"",paymentToken:"",status:r?.status||"Active",baaSigned:r?.baaStatus==="BAA Signed",testMode:r?.testMode||!1}),i=(c,u)=>{a(h=>({...h,[c]:u}))},o=c=>{c.preventDefault(),console.log("Updating agency:",n),t.goBack()},l=()=>{t.goBack()};return s.jsxs("div",{className:"h-screen flex flex-col bg-[#f8fafc] overflow-hidden",children:[s.jsx("header",{className:"bg-white border-b border-[#e2e8f0] flex-shrink-0",children:s.jsx("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(de,{onClick:()=>t.goBack(),variant:"ghost",size:"icon",className:"rounded-full flex-shrink-0",children:s.jsx(ln,{className:"w-5 h-5"})}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("h1",{className:"text-xl sm:text-2xl text-[#0f172a] truncate",children:"Edit Agency"}),s.jsx("p",{className:"text-sm text-[#64748b] truncate",children:"Update agency information"})]})]})})}),s.jsx("main",{className:"flex-1 overflow-y-auto",children:s.jsx("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8 pb-8",children:s.jsxs("form",{onSubmit:o,className:"bg-white rounded-xl border border-[#e2e8f0] p-4 sm:p-6 space-y-4 sm:space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Fe,{htmlFor:"agencyName",children:["Agency Name ",s.jsx("span",{className:"text-[#DC2626]",children:"*"})]}),s.jsx(Ze,{id:"agencyName",type:"text",required:!0,value:n.agencyName,onChange:c=>i("agencyName",c.target.value),placeholder:"Enter agency name",className:"w-full"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Fe,{htmlFor:"subdomain",children:["Subdomain ",s.jsx("span",{className:"text-[#DC2626]",children:"*"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ze,{id:"subdomain",type:"text",required:!0,value:n.subdomain,onChange:c=>i("subdomain",c.target.value),placeholder:"subdomain",className:"flex-1"}),s.jsx("span",{className:"text-[#64748b]",children:".app"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"ein",children:"EIN"}),s.jsx(Ze,{id:"ein",type:"text",value:n.ein,onChange:c=>i("ein",c.target.value),placeholder:"12-3456789",className:"w-full"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Fe,{htmlFor:"contactEmail",children:["Contact Email ",s.jsx("span",{className:"text-[#DC2626]",children:"*"})]}),s.jsx(Ze,{id:"contactEmail",type:"email",required:!0,value:n.contactEmail,onChange:c=>i("contactEmail",c.target.value),placeholder:"admin@agency.com",className:"w-full"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"contactPhone",children:"Contact Phone"}),s.jsx(Ze,{id:"contactPhone",type:"tel",value:n.contactPhone,onChange:c=>i("contactPhone",c.target.value),placeholder:"(555) 123-4567",className:"w-full"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{htmlFor:"paymentToken",children:"Payment Token"}),s.jsx(Ze,{id:"paymentToken",type:"text",value:n.paymentToken,onChange:c=>i("paymentToken",c.target.value),placeholder:"Stripe customer ID",className:"w-full"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Fe,{htmlFor:"status",children:["Status ",s.jsx("span",{className:"text-[#DC2626]",children:"*"})]}),s.jsxs(oa,{value:n.status,onValueChange:c=>i("status",c),children:[s.jsx(ca,{className:"w-full",children:s.jsx(la,{})}),s.jsxs(da,{children:[s.jsx(Bt,{value:"Active",children:"Active"}),s.jsx(Bt,{value:"Inactive",children:"Inactive"})]})]})]}),s.jsxs("div",{className:"space-y-4 pt-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(bo,{id:"baaSigned",checked:n.baaSigned,onCheckedChange:c=>i("baaSigned",c)}),s.jsx(Fe,{htmlFor:"baaSigned",className:"cursor-pointer",children:"BAA Signed"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(bo,{id:"testMode",checked:n.testMode,onCheckedChange:c=>i("testMode",c)}),s.jsx(Fe,{htmlFor:"testMode",className:"cursor-pointer",children:"Test Mode"})]})]}),s.jsxs("div",{className:"flex items-center gap-3 pt-4 border-t border-[#e2e8f0]",children:[s.jsx(de,{type:"button",onClick:l,variant:"outline",className:"flex-1",children:"Cancel"}),s.jsx(de,{type:"submit",className:"flex-1 bg-[#0966CC] hover:bg-[#0C4A6E] text-white",children:"Save Changes"})]})]})})})]})}function tre({navigation:t,route:e}){const r=e.params.agencyName||"Agency",n={totalCharts:0,finalized:0,pending:0,activeUsers:0,ocrSuccessRates:{bottleScan:0,pdfImport:0,imageUpload:0},monthlyActivity:{chartsCreated:0}};return s.jsxs("div",{className:"h-screen flex flex-col bg-[#f8fafc] overflow-hidden",children:[s.jsx("header",{className:"bg-white border-b border-[#e2e8f0] flex-shrink-0",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(de,{onClick:()=>t.goBack(),variant:"ghost",size:"icon",className:"rounded-full flex-shrink-0",children:s.jsx(ln,{className:"w-5 h-5"})}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("h1",{className:"text-xl sm:text-2xl text-[#0f172a] truncate",children:r}),s.jsx("p",{className:"text-sm text-[#64748b] truncate",children:"Analytics & Performance Metrics"})]})]})})}),s.jsx("main",{className:"flex-1 overflow-y-auto",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8 pb-8 space-y-6 sm:space-y-8",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 sm:gap-6",children:[s.jsxs("div",{className:"bg-white rounded-xl border border-[#e2e8f0] p-4 sm:p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:s.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-[#E0F2FE] flex items-center justify-center",children:s.jsx(hr,{className:"w-5 h-5 sm:w-6 sm:h-6 text-[#0966CC]"})})}),s.jsx("p",{className:"text-2xl sm:text-3xl text-[#0f172a] mb-1",children:n.totalCharts}),s.jsx("p",{className:"text-xs sm:text-sm text-[#64748b]",children:"Total Charts"})]}),s.jsxs("div",{className:"bg-white rounded-xl border border-[#e2e8f0] p-4 sm:p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:s.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-[#D1FAE5] flex items-center justify-center",children:s.jsx(Hs,{className:"w-5 h-5 sm:w-6 sm:h-6 text-[#10B981]"})})}),s.jsx("p",{className:"text-2xl sm:text-3xl text-[#0f172a] mb-1",children:n.finalized}),s.jsx("p",{className:"text-xs sm:text-sm text-[#64748b]",children:"Finalized"})]}),s.jsxs("div",{className:"bg-white rounded-xl border border-[#e2e8f0] p-4 sm:p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:s.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-[#FEF3C7] flex items-center justify-center",children:s.jsx(Ws,{className:"w-5 h-5 sm:w-6 sm:h-6 text-[#F59E0B]"})})}),s.jsx("p",{className:"text-2xl sm:text-3xl text-[#0f172a] mb-1",children:n.pending}),s.jsx("p",{className:"text-xs sm:text-sm text-[#64748b]",children:"Pending"})]}),s.jsxs("div",{className:"bg-white rounded-xl border border-[#e2e8f0] p-4 sm:p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:s.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-xl bg-[#E0F2FE] flex items-center justify-center",children:s.jsx(Rs,{className:"w-5 h-5 sm:w-6 sm:h-6 text-[#0966CC]"})})}),s.jsx("p",{className:"text-2xl sm:text-3xl text-[#0f172a] mb-1",children:n.activeUsers}),s.jsx("p",{className:"text-xs sm:text-sm text-[#64748b]",children:"Active Users"})]})]}),s.jsxs("div",{className:"bg-white rounded-xl border border-[#e2e8f0] p-4 sm:p-6",children:[s.jsx("h2",{className:"text-lg sm:text-xl text-[#0f172a] mb-4 sm:mb-6",children:"OCR Success Rates by Source"}),s.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[s.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-lg bg-[#E0F2FE] flex items-center justify-center flex-shrink-0",children:s.jsx(zf,{className:"w-4 h-4 sm:w-5 sm:h-5 text-[#0966CC]"})}),s.jsx("span",{className:"text-sm sm:text-base text-[#0f172a]",children:"Bottle Scan"})]}),s.jsxs("span",{className:"text-sm sm:text-base text-[#0f172a]",children:[n.ocrSuccessRates.bottleScan.toFixed(1),"%"]})]}),s.jsx("div",{className:"w-full h-2 bg-[#e2e8f0] rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-[#0966CC] rounded-full transition-all",style:{width:`${n.ocrSuccessRates.bottleScan}%`}})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[s.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-lg bg-[#FEE2E2] flex items-center justify-center flex-shrink-0",children:s.jsx(xw,{className:"w-4 h-4 sm:w-5 sm:h-5 text-[#DC2626]"})}),s.jsx("span",{className:"text-sm sm:text-base text-[#0f172a]",children:"PDF Import"})]}),s.jsxs("span",{className:"text-sm sm:text-base text-[#0f172a]",children:[n.ocrSuccessRates.pdfImport.toFixed(1),"%"]})]}),s.jsx("div",{className:"w-full h-2 bg-[#e2e8f0] rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-[#DC2626] rounded-full transition-all",style:{width:`${n.ocrSuccessRates.pdfImport}%`}})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[s.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-lg bg-[#D1FAE5] flex items-center justify-center flex-shrink-0",children:s.jsx(dD,{className:"w-4 h-4 sm:w-5 sm:h-5 text-[#10B981]"})}),s.jsx("span",{className:"text-sm sm:text-base text-[#0f172a]",children:"Image Upload"})]}),s.jsxs("span",{className:"text-sm sm:text-base text-[#0f172a]",children:[n.ocrSuccessRates.imageUpload.toFixed(1),"%"]})]}),s.jsx("div",{className:"w-full h-2 bg-[#e2e8f0] rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-[#10B981] rounded-full transition-all",style:{width:`${n.ocrSuccessRates.imageUpload}%`}})})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl border border-[#e2e8f0] p-4 sm:p-6",children:[s.jsx("h2",{className:"text-lg sm:text-xl text-[#0f172a] mb-3 sm:mb-4",children:"Monthly Activity"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-xl bg-[#E0F2FE] flex items-center justify-center flex-shrink-0",children:s.jsx(hr,{className:"w-6 h-6 sm:w-8 sm:h-8 text-[#0966CC]"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl sm:text-3xl text-[#0f172a]",children:n.monthlyActivity.chartsCreated}),s.jsx("p",{className:"text-xs sm:text-sm text-[#64748b]",children:"charts created this month"})]})]})]}),s.jsx("div",{className:"bg-gradient-to-br from-[#FEF3C7] to-[#FDE68A] rounded-xl border border-[#F59E0B] p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-start gap-3 sm:gap-4",children:[s.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-lg bg-[#F59E0B] flex items-center justify-center flex-shrink-0",children:s.jsx(hr,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm sm:text-base text-[#0f172a] mb-1 sm:mb-2",children:"HIPAA Compliance Notice"}),s.jsx("p",{className:"text-xs sm:text-sm text-[#64748b]",children:"Note: This dashboard displays aggregated, non-PHI metrics only. Individual patient data is not accessible to Super Admins per HIPAA compliance."})]})]})})]})})]})}function rre(){const[t,e]=N.useState("Landing"),[r,n]=N.useState({}),[a,i]=N.useState([]),c={navigate:(h,m={})=>{i([...a,{screen:t,params:r}]),e(h),n(m)},goBack:()=>{if(a.length>0){const h=a[a.length-1];e(h.screen),n(h.params),i(a.slice(0,-1))}}},u=()=>{const h={navigation:c,route:{params:r}};switch(t){case"Landing":return s.jsx(ej,{...h});case"Login":return s.jsx(SR,{...h});case"MFA":return s.jsx(AR,{...h});case"PasswordReset":return s.jsx(ER,{...h});case"AccountActivation":return s.jsx(UR,{...h});case"ClinicianDashboard":return s.jsx(MY,{...h});case"PatientChartList":return s.jsx($Y,{...h});case"NewPatientChart":return s.jsx(qY,{...h});case"NewPatientChartMedications":return s.jsx(GY,{...h});case"NewPatientChartReview":return s.jsx(XY,{...h});case"NewPatientChartComplete":return s.jsx(ZY,{...h});case"CaptureSourceSelection":return s.jsx(JY,{...h});case"ChartDetail":return s.jsx(eJ,{...h});case"MedicationVerification":return s.jsx(tJ,{...h});case"ChartSummary":return s.jsx(rJ,{...h});case"ChartDelivery":return s.jsx(Gee,{...h});case"ClinicianProfile":return s.jsx(Kee,{...h});case"ClinicianSettings":return s.jsx(Yee,{...h});case"AgencyAdminDashboard":return s.jsx(ute,{...h});case"AgencyChartsView":return s.jsx(hte,{...h});case"AgencyPatientsView":return s.jsx(A7,{...h});case"AgencyUsersView":return s.jsx(F7,{...h});case"ChartDetailView":return s.jsx(fte,{...h});case"PatientDetailEdit":return s.jsx(mte,{...h});case"UserDetailEdit":return s.jsx(pte,{...h});case"AgencyAdminProfile":return s.jsx(xte,{...h});case"AgencyAdminSettings":return s.jsx(gte,{...h});case"SchedulerDashboard":return s.jsx($te,{...h});case"SchedulerProfile":return s.jsx(Y7,{...h});case"SchedulerSettings":return s.jsx(X7,{...h});case"SuperAdminDashboard":return s.jsx(Qte,{...h});case"EditAgency":return s.jsx(ere,{...h});case"AgencyAnalytics":return s.jsx(tre,{...h});default:return s.jsx(ej,{...h})}};return s.jsx(i9,{children:s.jsx("div",{className:"h-screen w-full overflow-hidden bg-[#f8fafc]",children:u()})})}FP.createRoot(document.getElementById("root")).render(s.jsx(rre,{}));export{Tn as _,nre as c,g1 as g};
